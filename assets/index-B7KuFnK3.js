(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&r(f)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();function _x(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var dm={exports:{}},yc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bv;function iS(){if(bv)return yc;bv=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,o,c){var f=null;if(c!==void 0&&(f=""+c),o.key!==void 0&&(f=""+o.key),"key"in o){c={};for(var p in o)p!=="key"&&(c[p]=o[p])}else c=o;return o=c.ref,{$$typeof:i,type:r,key:f,ref:o!==void 0?o:null,props:c}}return yc.Fragment=e,yc.jsx=n,yc.jsxs=n,yc}var _v;function sS(){return _v||(_v=1,dm.exports=iS()),dm.exports}var d=sS(),hm={exports:{}},Ye={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wv;function rS(){if(wv)return Ye;wv=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),f=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),S=Symbol.iterator;function A(O){return O===null||typeof O!="object"?null:(O=S&&O[S]||O["@@iterator"],typeof O=="function"?O:null)}var F={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},G=Object.assign,q={};function Q(O,B,oe){this.props=O,this.context=B,this.refs=q,this.updater=oe||F}Q.prototype.isReactComponent={},Q.prototype.setState=function(O,B){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,B,"setState")},Q.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function ee(){}ee.prototype=Q.prototype;function $(O,B,oe){this.props=O,this.context=B,this.refs=q,this.updater=oe||F}var L=$.prototype=new ee;L.constructor=$,G(L,Q.prototype),L.isPureReactComponent=!0;var pe=Array.isArray,de={H:null,A:null,T:null,S:null,V:null},xe=Object.prototype.hasOwnProperty;function V(O,B,oe,K,be,we){return oe=we.ref,{$$typeof:i,type:O,key:B,ref:oe!==void 0?oe:null,props:we}}function R(O,B){return V(O.type,B,void 0,void 0,void 0,O.props)}function k(O){return typeof O=="object"&&O!==null&&O.$$typeof===i}function M(O){var B={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(oe){return B[oe]})}var N=/\/+/g;function z(O,B){return typeof O=="object"&&O!==null&&O.key!=null?M(""+O.key):B.toString(36)}function j(){}function qe(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(j,j):(O.status="pending",O.then(function(B){O.status==="pending"&&(O.status="fulfilled",O.value=B)},function(B){O.status==="pending"&&(O.status="rejected",O.reason=B)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function tt(O,B,oe,K,be){var we=typeof O;(we==="undefined"||we==="boolean")&&(O=null);var Re=!1;if(O===null)Re=!0;else switch(we){case"bigint":case"string":case"number":Re=!0;break;case"object":switch(O.$$typeof){case i:case e:Re=!0;break;case w:return Re=O._init,tt(Re(O._payload),B,oe,K,be)}}if(Re)return be=be(O),Re=K===""?"."+z(O,0):K,pe(be)?(oe="",Re!=null&&(oe=Re.replace(N,"$&/")+"/"),tt(be,B,oe,"",function(Hn){return Hn})):be!=null&&(k(be)&&(be=R(be,oe+(be.key==null||O&&O.key===be.key?"":(""+be.key).replace(N,"$&/")+"/")+Re)),B.push(be)),1;Re=0;var nt=K===""?".":K+":";if(pe(O))for(var vt=0;vt<O.length;vt++)K=O[vt],we=nt+z(K,vt),Re+=tt(K,B,oe,we,be);else if(vt=A(O),typeof vt=="function")for(O=vt.call(O),vt=0;!(K=O.next()).done;)K=K.value,we=nt+z(K,vt++),Re+=tt(K,B,oe,we,be);else if(we==="object"){if(typeof O.then=="function")return tt(qe(O),B,oe,K,be);throw B=String(O),Error("Objects are not valid as a React child (found: "+(B==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":B)+"). If you meant to render a collection of children, use an array instead.")}return Re}function ae(O,B,oe){if(O==null)return O;var K=[],be=0;return tt(O,K,"","",function(we){return B.call(oe,we,be++)}),K}function me(O){if(O._status===-1){var B=O._result;B=B(),B.then(function(oe){(O._status===0||O._status===-1)&&(O._status=1,O._result=oe)},function(oe){(O._status===0||O._status===-1)&&(O._status=2,O._result=oe)}),O._status===-1&&(O._status=0,O._result=B)}if(O._status===1)return O._result.default;throw O._result}var re=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var B=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(B))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)};function Ae(){}return Ye.Children={map:ae,forEach:function(O,B,oe){ae(O,function(){B.apply(this,arguments)},oe)},count:function(O){var B=0;return ae(O,function(){B++}),B},toArray:function(O){return ae(O,function(B){return B})||[]},only:function(O){if(!k(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},Ye.Component=Q,Ye.Fragment=n,Ye.Profiler=o,Ye.PureComponent=$,Ye.StrictMode=r,Ye.Suspense=g,Ye.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=de,Ye.__COMPILER_RUNTIME={__proto__:null,c:function(O){return de.H.useMemoCache(O)}},Ye.cache=function(O){return function(){return O.apply(null,arguments)}},Ye.cloneElement=function(O,B,oe){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var K=G({},O.props),be=O.key,we=void 0;if(B!=null)for(Re in B.ref!==void 0&&(we=void 0),B.key!==void 0&&(be=""+B.key),B)!xe.call(B,Re)||Re==="key"||Re==="__self"||Re==="__source"||Re==="ref"&&B.ref===void 0||(K[Re]=B[Re]);var Re=arguments.length-2;if(Re===1)K.children=oe;else if(1<Re){for(var nt=Array(Re),vt=0;vt<Re;vt++)nt[vt]=arguments[vt+2];K.children=nt}return V(O.type,be,void 0,void 0,we,K)},Ye.createContext=function(O){return O={$$typeof:f,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:c,_context:O},O},Ye.createElement=function(O,B,oe){var K,be={},we=null;if(B!=null)for(K in B.key!==void 0&&(we=""+B.key),B)xe.call(B,K)&&K!=="key"&&K!=="__self"&&K!=="__source"&&(be[K]=B[K]);var Re=arguments.length-2;if(Re===1)be.children=oe;else if(1<Re){for(var nt=Array(Re),vt=0;vt<Re;vt++)nt[vt]=arguments[vt+2];be.children=nt}if(O&&O.defaultProps)for(K in Re=O.defaultProps,Re)be[K]===void 0&&(be[K]=Re[K]);return V(O,we,void 0,void 0,null,be)},Ye.createRef=function(){return{current:null}},Ye.forwardRef=function(O){return{$$typeof:p,render:O}},Ye.isValidElement=k,Ye.lazy=function(O){return{$$typeof:w,_payload:{_status:-1,_result:O},_init:me}},Ye.memo=function(O,B){return{$$typeof:y,type:O,compare:B===void 0?null:B}},Ye.startTransition=function(O){var B=de.T,oe={};de.T=oe;try{var K=O(),be=de.S;be!==null&&be(oe,K),typeof K=="object"&&K!==null&&typeof K.then=="function"&&K.then(Ae,re)}catch(we){re(we)}finally{de.T=B}},Ye.unstable_useCacheRefresh=function(){return de.H.useCacheRefresh()},Ye.use=function(O){return de.H.use(O)},Ye.useActionState=function(O,B,oe){return de.H.useActionState(O,B,oe)},Ye.useCallback=function(O,B){return de.H.useCallback(O,B)},Ye.useContext=function(O){return de.H.useContext(O)},Ye.useDebugValue=function(){},Ye.useDeferredValue=function(O,B){return de.H.useDeferredValue(O,B)},Ye.useEffect=function(O,B,oe){var K=de.H;if(typeof oe=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return K.useEffect(O,B)},Ye.useId=function(){return de.H.useId()},Ye.useImperativeHandle=function(O,B,oe){return de.H.useImperativeHandle(O,B,oe)},Ye.useInsertionEffect=function(O,B){return de.H.useInsertionEffect(O,B)},Ye.useLayoutEffect=function(O,B){return de.H.useLayoutEffect(O,B)},Ye.useMemo=function(O,B){return de.H.useMemo(O,B)},Ye.useOptimistic=function(O,B){return de.H.useOptimistic(O,B)},Ye.useReducer=function(O,B,oe){return de.H.useReducer(O,B,oe)},Ye.useRef=function(O){return de.H.useRef(O)},Ye.useState=function(O){return de.H.useState(O)},Ye.useSyncExternalStore=function(O,B,oe){return de.H.useSyncExternalStore(O,B,oe)},Ye.useTransition=function(){return de.H.useTransition()},Ye.version="19.1.0",Ye}var Sv;function cp(){return Sv||(Sv=1,hm.exports=rS()),hm.exports}var C=cp();const Cc=_x(C);var fm={exports:{}},vc={},mm={exports:{}},pm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ev;function aS(){return Ev||(Ev=1,function(i){function e(ae,me){var re=ae.length;ae.push(me);e:for(;0<re;){var Ae=re-1>>>1,O=ae[Ae];if(0<o(O,me))ae[Ae]=me,ae[re]=O,re=Ae;else break e}}function n(ae){return ae.length===0?null:ae[0]}function r(ae){if(ae.length===0)return null;var me=ae[0],re=ae.pop();if(re!==me){ae[0]=re;e:for(var Ae=0,O=ae.length,B=O>>>1;Ae<B;){var oe=2*(Ae+1)-1,K=ae[oe],be=oe+1,we=ae[be];if(0>o(K,re))be<O&&0>o(we,K)?(ae[Ae]=we,ae[be]=re,Ae=be):(ae[Ae]=K,ae[oe]=re,Ae=oe);else if(be<O&&0>o(we,re))ae[Ae]=we,ae[be]=re,Ae=be;else break e}}return me}function o(ae,me){var re=ae.sortIndex-me.sortIndex;return re!==0?re:ae.id-me.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;i.unstable_now=function(){return c.now()}}else{var f=Date,p=f.now();i.unstable_now=function(){return f.now()-p}}var g=[],y=[],w=1,S=null,A=3,F=!1,G=!1,q=!1,Q=!1,ee=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;function pe(ae){for(var me=n(y);me!==null;){if(me.callback===null)r(y);else if(me.startTime<=ae)r(y),me.sortIndex=me.expirationTime,e(g,me);else break;me=n(y)}}function de(ae){if(q=!1,pe(ae),!G)if(n(g)!==null)G=!0,xe||(xe=!0,z());else{var me=n(y);me!==null&&tt(de,me.startTime-ae)}}var xe=!1,V=-1,R=5,k=-1;function M(){return Q?!0:!(i.unstable_now()-k<R)}function N(){if(Q=!1,xe){var ae=i.unstable_now();k=ae;var me=!0;try{e:{G=!1,q&&(q=!1,$(V),V=-1),F=!0;var re=A;try{t:{for(pe(ae),S=n(g);S!==null&&!(S.expirationTime>ae&&M());){var Ae=S.callback;if(typeof Ae=="function"){S.callback=null,A=S.priorityLevel;var O=Ae(S.expirationTime<=ae);if(ae=i.unstable_now(),typeof O=="function"){S.callback=O,pe(ae),me=!0;break t}S===n(g)&&r(g),pe(ae)}else r(g);S=n(g)}if(S!==null)me=!0;else{var B=n(y);B!==null&&tt(de,B.startTime-ae),me=!1}}break e}finally{S=null,A=re,F=!1}me=void 0}}finally{me?z():xe=!1}}}var z;if(typeof L=="function")z=function(){L(N)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,qe=j.port2;j.port1.onmessage=N,z=function(){qe.postMessage(null)}}else z=function(){ee(N,0)};function tt(ae,me){V=ee(function(){ae(i.unstable_now())},me)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(ae){ae.callback=null},i.unstable_forceFrameRate=function(ae){0>ae||125<ae?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<ae?Math.floor(1e3/ae):5},i.unstable_getCurrentPriorityLevel=function(){return A},i.unstable_next=function(ae){switch(A){case 1:case 2:case 3:var me=3;break;default:me=A}var re=A;A=me;try{return ae()}finally{A=re}},i.unstable_requestPaint=function(){Q=!0},i.unstable_runWithPriority=function(ae,me){switch(ae){case 1:case 2:case 3:case 4:case 5:break;default:ae=3}var re=A;A=ae;try{return me()}finally{A=re}},i.unstable_scheduleCallback=function(ae,me,re){var Ae=i.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?Ae+re:Ae):re=Ae,ae){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=re+O,ae={id:w++,callback:me,priorityLevel:ae,startTime:re,expirationTime:O,sortIndex:-1},re>Ae?(ae.sortIndex=re,e(y,ae),n(g)===null&&ae===n(y)&&(q?($(V),V=-1):q=!0,tt(de,re-Ae))):(ae.sortIndex=O,e(g,ae),G||F||(G=!0,xe||(xe=!0,z()))),ae},i.unstable_shouldYield=M,i.unstable_wrapCallback=function(ae){var me=A;return function(){var re=A;A=me;try{return ae.apply(this,arguments)}finally{A=re}}}}(pm)),pm}var Av;function oS(){return Av||(Av=1,mm.exports=aS()),mm.exports}var gm={exports:{}},Pn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tv;function lS(){if(Tv)return Pn;Tv=1;var i=cp();function e(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var w=2;w<arguments.length;w++)y+="&args[]="+encodeURIComponent(arguments[w])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(g,y,w){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:S==null?null:""+S,children:g,containerInfo:y,implementation:w}}var f=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Pn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Pn.createPortal=function(g,y){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return c(g,y,null,w)},Pn.flushSync=function(g){var y=f.T,w=r.p;try{if(f.T=null,r.p=2,g)return g()}finally{f.T=y,r.p=w,r.d.f()}},Pn.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,r.d.C(g,y))},Pn.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},Pn.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var w=y.as,S=p(w,y.crossOrigin),A=typeof y.integrity=="string"?y.integrity:void 0,F=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;w==="style"?r.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:S,integrity:A,fetchPriority:F}):w==="script"&&r.d.X(g,{crossOrigin:S,integrity:A,fetchPriority:F,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Pn.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var w=p(y.as,y.crossOrigin);r.d.M(g,{crossOrigin:w,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&r.d.M(g)},Pn.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var w=y.as,S=p(w,y.crossOrigin);r.d.L(g,w,{crossOrigin:S,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Pn.preloadModule=function(g,y){if(typeof g=="string")if(y){var w=p(y.as,y.crossOrigin);r.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:w,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else r.d.m(g)},Pn.requestFormReset=function(g){r.d.r(g)},Pn.unstable_batchedUpdates=function(g,y){return g(y)},Pn.useFormState=function(g,y,w){return f.H.useFormState(g,y,w)},Pn.useFormStatus=function(){return f.H.useHostTransitionStatus()},Pn.version="19.1.0",Pn}var Rv;function wx(){if(Rv)return gm.exports;Rv=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),gm.exports=lS(),gm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cv;function cS(){if(Cv)return vc;Cv=1;var i=oS(),e=cp(),n=wx();function r(t){var s="https://react.dev/errors/"+t;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var s=t,a=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(a=s.return),t=s.return;while(t)}return s.tag===3?a:null}function f(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function p(t){if(c(t)!==t)throw Error(r(188))}function g(t){var s=t.alternate;if(!s){if(s=c(t),s===null)throw Error(r(188));return s!==t?null:t}for(var a=t,l=s;;){var h=a.return;if(h===null)break;var m=h.alternate;if(m===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===m.child){for(m=h.child;m;){if(m===a)return p(h),t;if(m===l)return p(h),s;m=m.sibling}throw Error(r(188))}if(a.return!==l.return)a=h,l=m;else{for(var b=!1,E=h.child;E;){if(E===a){b=!0,a=h,l=m;break}if(E===l){b=!0,l=h,a=m;break}E=E.sibling}if(!b){for(E=m.child;E;){if(E===a){b=!0,a=m,l=h;break}if(E===l){b=!0,l=m,a=h;break}E=E.sibling}if(!b)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?t:s}function y(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t;for(t=t.child;t!==null;){if(s=y(t),s!==null)return s;t=t.sibling}return null}var w=Object.assign,S=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),F=Symbol.for("react.portal"),G=Symbol.for("react.fragment"),q=Symbol.for("react.strict_mode"),Q=Symbol.for("react.profiler"),ee=Symbol.for("react.provider"),$=Symbol.for("react.consumer"),L=Symbol.for("react.context"),pe=Symbol.for("react.forward_ref"),de=Symbol.for("react.suspense"),xe=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),k=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),N=Symbol.iterator;function z(t){return t===null||typeof t!="object"?null:(t=N&&t[N]||t["@@iterator"],typeof t=="function"?t:null)}var j=Symbol.for("react.client.reference");function qe(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===j?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case G:return"Fragment";case Q:return"Profiler";case q:return"StrictMode";case de:return"Suspense";case xe:return"SuspenseList";case k:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case F:return"Portal";case L:return(t.displayName||"Context")+".Provider";case $:return(t._context.displayName||"Context")+".Consumer";case pe:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case V:return s=t.displayName||null,s!==null?s:qe(t.type)||"Memo";case R:s=t._payload,t=t._init;try{return qe(t(s))}catch{}}return null}var tt=Array.isArray,ae=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,me=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re={pending:!1,data:null,method:null,action:null},Ae=[],O=-1;function B(t){return{current:t}}function oe(t){0>O||(t.current=Ae[O],Ae[O]=null,O--)}function K(t,s){O++,Ae[O]=t.current,t.current=s}var be=B(null),we=B(null),Re=B(null),nt=B(null);function vt(t,s){switch(K(Re,s),K(we,t),K(be,null),s.nodeType){case 9:case 11:t=(t=s.documentElement)&&(t=t.namespaceURI)?Zy(t):0;break;default:if(t=s.tagName,s=s.namespaceURI)s=Zy(s),t=Ky(s,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}oe(be),K(be,t)}function Hn(){oe(be),oe(we),oe(Re)}function qn(t){t.memoizedState!==null&&K(nt,t);var s=be.current,a=Ky(s,t.type);s!==a&&(K(we,t),K(be,a))}function pn(t){we.current===t&&(oe(be),oe(we)),nt.current===t&&(oe(nt),hc._currentValue=re)}var Gt=Object.prototype.hasOwnProperty,Fi=i.unstable_scheduleCallback,ls=i.unstable_cancelCallback,Ar=i.unstable_shouldYield,Ta=i.unstable_requestPaint,Ce=i.unstable_now,Ra=i.unstable_getCurrentPriorityLevel,Pt=i.unstable_ImmediatePriority,yi=i.unstable_UserBlockingPriority,it=i.unstable_NormalPriority,Tr=i.unstable_LowPriority,Ut=i.unstable_IdlePriority,Mn=i.log,pt=i.unstable_setDisableYieldValue,Et=null,$e=null;function ln(t){if(typeof Mn=="function"&&pt(t),$e&&typeof $e.setStrictMode=="function")try{$e.setStrictMode(Et,t)}catch{}}var Z=Math.clz32?Math.clz32:Ne,ye=Math.log,Se=Math.LN2;function Ne(t){return t>>>=0,t===0?32:31-(ye(t)/Se|0)|0}var ot=256,ut=4194304;function Be(t){var s=t&42;if(s!==0)return s;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Gn(t,s,a){var l=t.pendingLanes;if(l===0)return 0;var h=0,m=t.suspendedLanes,b=t.pingedLanes;t=t.warmLanes;var E=l&134217727;return E!==0?(l=E&~m,l!==0?h=Be(l):(b&=E,b!==0?h=Be(b):a||(a=E&~t,a!==0&&(h=Be(a))))):(E=l&~m,E!==0?h=Be(E):b!==0?h=Be(b):a||(a=l&~t,a!==0&&(h=Be(a)))),h===0?0:s!==0&&s!==h&&(s&m)===0&&(m=h&-h,a=s&-s,m>=a||m===32&&(a&4194048)!==0)?s:h}function Hi(t,s){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&s)===0}function Rr(t,s){switch(t){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ca(){var t=ot;return ot<<=1,(ot&4194048)===0&&(ot=256),t}function Hs(){var t=ut;return ut<<=1,(ut&62914560)===0&&(ut=4194304),t}function qi(t){for(var s=[],a=0;31>a;a++)s.push(t);return s}function Gi(t,s){t.pendingLanes|=s,s!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Ia(t,s,a,l,h,m){var b=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var E=t.entanglements,P=t.expirationTimes,J=t.hiddenUpdates;for(a=b&~a;0<a;){var le=31-Z(a),he=1<<le;E[le]=0,P[le]=-1;var te=J[le];if(te!==null)for(J[le]=null,le=0;le<te.length;le++){var se=te[le];se!==null&&(se.lane&=-536870913)}a&=~he}l!==0&&Wn(t,l,0),m!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=m&~(b&~s))}function Wn(t,s,a){t.pendingLanes|=s,t.suspendedLanes&=~s;var l=31-Z(s);t.entangledLanes|=s,t.entanglements[l]=t.entanglements[l]|1073741824|a&4194090}function vi(t,s){var a=t.entangledLanes|=s;for(t=t.entanglements;a;){var l=31-Z(a),h=1<<l;h&s|t[l]&s&&(t[l]|=s),a&=~h}}function ai(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function ze(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function cs(){var t=me.p;return t!==0?t:(t=window.event,t===void 0?32:mv(t.type))}function Xe(t,s){var a=me.p;try{return me.p=t,s()}finally{me.p=a}}var bt=Math.random().toString(36).slice(2),nn="__reactFiber$"+bt,Wt="__reactProps$"+bt,gn="__reactContainer$"+bt,ka="__reactEvents$"+bt,Il="__reactListeners$"+bt,xi="__reactHandles$"+bt,Eo="__reactResources$"+bt,bi="__reactMarker$"+bt;function Wi(t){delete t[nn],delete t[Wt],delete t[ka],delete t[Il],delete t[xi]}function Xi(t){var s=t[nn];if(s)return s;for(var a=t.parentNode;a;){if(s=a[gn]||a[nn]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(t=Jy(t);t!==null;){if(a=t[nn])return a;t=Jy(t)}return s}t=a,a=t.parentNode}return null}function oi(t){if(t=t[nn]||t[gn]){var s=t.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return t}return null}function _i(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t.stateNode;throw Error(r(33))}function En(t){var s=t[Eo];return s||(s=t[Eo]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Mt(t){t[bi]=!0}var qs=new Set,Cr={};function Kn(t,s){Ln(t,s),Ln(t+"Capture",s)}function Ln(t,s){for(Cr[t]=s,t=0;t<s.length;t++)qs.add(s[t])}var Ir=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ao={},wi={};function To(t){return Gt.call(wi,t)?!0:Gt.call(Ao,t)?!1:Ir.test(t)?wi[t]=!0:(Ao[t]=!0,!1)}function us(t,s,a){if(To(s))if(a===null)t.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(s);return;case"boolean":var l=s.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(s);return}}t.setAttribute(s,""+a)}}function li(t,s,a){if(a===null)t.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttribute(s,""+a)}}function cn(t,s,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(s,a,""+l)}}var Gs,Na;function Si(t){if(Gs===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);Gs=s&&s[1]||"",Na=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Gs+t+Na}var kr=!1;function Nr(t,s){if(!t||kr)return"";kr=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(s){var he=function(){throw Error()};if(Object.defineProperty(he.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(he,[])}catch(se){var te=se}Reflect.construct(t,[],he)}else{try{he.call()}catch(se){te=se}t.call(he.prototype)}}else{try{throw Error()}catch(se){te=se}(he=t())&&typeof he.catch=="function"&&he.catch(function(){})}}catch(se){if(se&&te&&typeof se.stack=="string")return[se.stack,te.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=l.DetermineComponentFrameRoot(),b=m[0],E=m[1];if(b&&E){var P=b.split(`
`),J=E.split(`
`);for(h=l=0;l<P.length&&!P[l].includes("DetermineComponentFrameRoot");)l++;for(;h<J.length&&!J[h].includes("DetermineComponentFrameRoot");)h++;if(l===P.length||h===J.length)for(l=P.length-1,h=J.length-1;1<=l&&0<=h&&P[l]!==J[h];)h--;for(;1<=l&&0<=h;l--,h--)if(P[l]!==J[h]){if(l!==1||h!==1)do if(l--,h--,0>h||P[l]!==J[h]){var le=`
`+P[l].replace(" at new "," at ");return t.displayName&&le.includes("<anonymous>")&&(le=le.replace("<anonymous>",t.displayName)),le}while(1<=l&&0<=h);break}}}finally{kr=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Si(a):""}function ja(t){switch(t.tag){case 26:case 27:case 5:return Si(t.type);case 16:return Si("Lazy");case 13:return Si("Suspense");case 19:return Si("SuspenseList");case 0:case 15:return Nr(t.type,!1);case 11:return Nr(t.type.render,!1);case 1:return Nr(t.type,!0);case 31:return Si("Activity");default:return""}}function Ws(t){try{var s="";do s+=ja(t),t=t.return;while(t);return s}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function yn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Da(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Ro(t){var s=Da(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,s),l=""+t[s];if(!t.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,m=a.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return h.call(this)},set:function(b){l=""+b,m.call(this,b)}}),Object.defineProperty(t,s,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(b){l=""+b},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function jr(t){t._valueTracker||(t._valueTracker=Ro(t))}function Oa(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var a=s.getValue(),l="";return t&&(l=Da(t)?t.checked?"true":"false":t.value),t=l,t!==a?(s.setValue(t),!0):!1}function Xs(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var ds=/[\n"\\]/g;function Xt(t){return t.replace(ds,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function vn(t,s,a,l,h,m,b,E){t.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?t.type=b:t.removeAttribute("type"),s!=null?b==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+yn(s)):t.value!==""+yn(s)&&(t.value=""+yn(s)):b!=="submit"&&b!=="reset"||t.removeAttribute("value"),s!=null?hs(t,b,yn(s)):a!=null?hs(t,b,yn(a)):l!=null&&t.removeAttribute("value"),h==null&&m!=null&&(t.defaultChecked=!!m),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?t.name=""+yn(E):t.removeAttribute("name")}function Zs(t,s,a,l,h,m,b,E){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),s!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||s!=null))return;a=a!=null?""+yn(a):"",s=s!=null?""+yn(s):a,E||s===t.value||(t.value=s),t.defaultValue=s}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=E?t.checked:!!l,t.defaultChecked=!!l,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(t.name=b)}function hs(t,s,a){s==="number"&&Xs(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Yn(t,s,a,l){if(t=t.options,s){s={};for(var h=0;h<a.length;h++)s["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=s.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+yn(a),s=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}s!==null||t[h].disabled||(s=t[h])}s!==null&&(s.selected=!0)}}function Qe(t,s,a){if(s!=null&&(s=""+yn(s),s!==t.value&&(t.value=s),a==null)){t.defaultValue!==s&&(t.defaultValue=s);return}t.defaultValue=a!=null?""+yn(a):""}function fs(t,s,a,l){if(s==null){if(l!=null){if(a!=null)throw Error(r(92));if(tt(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),s=a}a=yn(s),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l)}function He(t,s){if(s){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=s;return}}t.textContent=s}var Ei=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ms(t,s,a){var l=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="":l?t.setProperty(s,a):typeof a!="number"||a===0||Ei.has(s)?s==="float"?t.cssFloat=a:t[s]=(""+a).trim():t[s]=a+"px"}function Ai(t,s,a){if(s!=null&&typeof s!="object")throw Error(r(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||s!=null&&s.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in s)l=s[h],s.hasOwnProperty(h)&&a[h]!==l&&ms(t,h,l)}else for(var m in s)s.hasOwnProperty(m)&&ms(t,m,s[m])}function Ks(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Co=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ma=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Dr(t){return Ma.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var Zi=null;function Qn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var $n=null,ps=null;function gs(t){var s=oi(t);if(s&&(t=s.stateNode)){var a=t[Wt]||null;e:switch(t=s.stateNode,s.type){case"input":if(vn(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Xt(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var l=a[s];if(l!==t&&l.form===t.form){var h=l[Wt]||null;if(!h)throw Error(r(90));vn(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(s=0;s<a.length;s++)l=a[s],l.form===t.form&&Oa(l)}break e;case"textarea":Qe(t,a.value,a.defaultValue);break e;case"select":s=a.value,s!=null&&Yn(t,!!a.multiple,s,!1)}}}var Ti=!1;function Io(t,s,a){if(Ti)return t(s,a);Ti=!0;try{var l=t(s);return l}finally{if(Ti=!1,($n!==null||ps!==null)&&(Fu(),$n&&(s=$n,t=ps,ps=$n=null,gs(s),t)))for(s=0;s<t.length;s++)gs(t[s])}}function Ri(t,s){var a=t.stateNode;if(a===null)return null;var l=a[Wt]||null;if(l===null)return null;a=l[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(r(231,s,typeof a));return a}var Jn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),An=!1;if(Jn)try{var ys={};Object.defineProperty(ys,"passive",{get:function(){An=!0}}),window.addEventListener("test",ys,ys),window.removeEventListener("test",ys,ys)}catch{An=!1}var un=null,Ki=null,Yi=null;function vs(){if(Yi)return Yi;var t,s=Ki,a=s.length,l,h="value"in un?un.value:un.textContent,m=h.length;for(t=0;t<a&&s[t]===h[t];t++);var b=a-t;for(l=1;l<=b&&s[a-l]===h[m-l];l++);return Yi=h.slice(t,1<l?1-l:void 0)}function $t(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function Ci(){return!0}function xs(){return!1}function Bt(t){function s(a,l,h,m,b){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=m,this.target=b,this.currentTarget=null;for(var E in t)t.hasOwnProperty(E)&&(a=t[E],this[E]=a?a(m):m[E]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Ci:xs,this.isPropagationStopped=xs,this}return w(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Ci)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Ci)},persist:function(){},isPersistent:Ci}),s}var ft={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},La=Bt(ft),Ii=w({},ft,{view:0,detail:0}),kl=Bt(Ii),bs,_s,ki,Ys=w({},Ii,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Es,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ki&&(ki&&t.type==="mousemove"?(bs=t.screenX-ki.screenX,_s=t.screenY-ki.screenY):_s=bs=0,ki=t),bs)},movementY:function(t){return"movementY"in t?t.movementY:_s}}),ei=Bt(Ys),ko=w({},Ys,{dataTransfer:0}),Nl=Bt(ko),ws=w({},Ii,{relatedTarget:0}),Or=Bt(ws),Va=w({},ft,{animationName:0,elapsedTime:0,pseudoElement:0}),Qs=Bt(Va),Pa=w({},ft,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),$s=Bt(Pa),No=w({},ft,{data:0}),Mr=Bt(No),Ss={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ua={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ba={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Lr(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=Ba[t])?!!s[t]:!1}function Es(){return Lr}var za=w({},Ii,{key:function(t){if(t.key){var s=Ss[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=$t(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ua[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Es,charCode:function(t){return t.type==="keypress"?$t(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?$t(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Js=Bt(za),Fa=w({},Ys,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vr=Bt(Fa),_=w({},Ii,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Es}),I=Bt(_),U=w({},ft,{propertyName:0,elapsedTime:0,pseudoElement:0}),D=Bt(U),ne=w({},Ys,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ve=Bt(ne),ue=w({},ft,{newState:0,oldState:0}),Ie=Bt(ue),Ct=[9,13,27,32],Oe=Jn&&"CompositionEvent"in window,u=null;Jn&&"documentMode"in document&&(u=document.documentMode);var v=Jn&&"TextEvent"in window&&!u,x=Jn&&(!Oe||u&&8<u&&11>=u),T=" ",W=!1;function ie(t,s){switch(t){case"keyup":return Ct.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _e(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ze=!1;function It(t,s){switch(t){case"compositionend":return _e(s);case"keypress":return s.which!==32?null:(W=!0,T);case"textInput":return t=s.data,t===T&&W?null:t;default:return null}}function Ke(t,s){if(Ze)return t==="compositionend"||!Oe&&ie(t,s)?(t=vs(),Yi=Ki=un=null,Ze=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return x&&s.locale!=="ko"?null:s.data;default:return null}}var kt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ke(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!kt[t.type]:s==="textarea"}function _t(t,s,a,l){$n?ps?ps.push(l):ps=[l]:$n=l,s=Zu(s,"onChange"),0<s.length&&(a=new La("onChange","change",null,a,l),t.push({event:a,listeners:s}))}var gt=null,Tn=null;function jo(t){Hy(t,0)}function er(t){var s=_i(t);if(Oa(s))return t}function ug(t,s){if(t==="change")return s}var dg=!1;if(Jn){var bh;if(Jn){var _h="oninput"in document;if(!_h){var hg=document.createElement("div");hg.setAttribute("oninput","return;"),_h=typeof hg.oninput=="function"}bh=_h}else bh=!1;dg=bh&&(!document.documentMode||9<document.documentMode)}function fg(){gt&&(gt.detachEvent("onpropertychange",mg),Tn=gt=null)}function mg(t){if(t.propertyName==="value"&&er(Tn)){var s=[];_t(s,Tn,t,Qn(t)),Io(jo,s)}}function D_(t,s,a){t==="focusin"?(fg(),gt=s,Tn=a,gt.attachEvent("onpropertychange",mg)):t==="focusout"&&fg()}function O_(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return er(Tn)}function M_(t,s){if(t==="click")return er(s)}function L_(t,s){if(t==="input"||t==="change")return er(s)}function V_(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var ci=typeof Object.is=="function"?Object.is:V_;function jl(t,s){if(ci(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var a=Object.keys(t),l=Object.keys(s);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!Gt.call(s,h)||!ci(t[h],s[h]))return!1}return!0}function pg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function gg(t,s){var a=pg(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=s&&l>=s)return{node:a,offset:s-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=pg(a)}}function yg(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?yg(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function vg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var s=Xs(t.document);s instanceof t.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)t=s.contentWindow;else break;s=Xs(t.document)}return s}function wh(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}var P_=Jn&&"documentMode"in document&&11>=document.documentMode,Do=null,Sh=null,Dl=null,Eh=!1;function xg(t,s,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Eh||Do==null||Do!==Xs(l)||(l=Do,"selectionStart"in l&&wh(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Dl&&jl(Dl,l)||(Dl=l,l=Zu(Sh,"onSelect"),0<l.length&&(s=new La("onSelect","select",null,s,a),t.push({event:s,listeners:l}),s.target=Do)))}function Ha(t,s){var a={};return a[t.toLowerCase()]=s.toLowerCase(),a["Webkit"+t]="webkit"+s,a["Moz"+t]="moz"+s,a}var Oo={animationend:Ha("Animation","AnimationEnd"),animationiteration:Ha("Animation","AnimationIteration"),animationstart:Ha("Animation","AnimationStart"),transitionrun:Ha("Transition","TransitionRun"),transitionstart:Ha("Transition","TransitionStart"),transitioncancel:Ha("Transition","TransitionCancel"),transitionend:Ha("Transition","TransitionEnd")},Ah={},bg={};Jn&&(bg=document.createElement("div").style,"AnimationEvent"in window||(delete Oo.animationend.animation,delete Oo.animationiteration.animation,delete Oo.animationstart.animation),"TransitionEvent"in window||delete Oo.transitionend.transition);function qa(t){if(Ah[t])return Ah[t];if(!Oo[t])return t;var s=Oo[t],a;for(a in s)if(s.hasOwnProperty(a)&&a in bg)return Ah[t]=s[a];return t}var _g=qa("animationend"),wg=qa("animationiteration"),Sg=qa("animationstart"),U_=qa("transitionrun"),B_=qa("transitionstart"),z_=qa("transitioncancel"),Eg=qa("transitionend"),Ag=new Map,Th="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Th.push("scrollEnd");function Qi(t,s){Ag.set(t,s),Kn(s,[t])}var Tg=new WeakMap;function Ni(t,s){if(typeof t=="object"&&t!==null){var a=Tg.get(t);return a!==void 0?a:(s={value:t,source:s,stack:Ws(s)},Tg.set(t,s),s)}return{value:t,source:s,stack:Ws(s)}}var ji=[],Mo=0,Rh=0;function uu(){for(var t=Mo,s=Rh=Mo=0;s<t;){var a=ji[s];ji[s++]=null;var l=ji[s];ji[s++]=null;var h=ji[s];ji[s++]=null;var m=ji[s];if(ji[s++]=null,l!==null&&h!==null){var b=l.pending;b===null?h.next=h:(h.next=b.next,b.next=h),l.pending=h}m!==0&&Rg(a,h,m)}}function du(t,s,a,l){ji[Mo++]=t,ji[Mo++]=s,ji[Mo++]=a,ji[Mo++]=l,Rh|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Ch(t,s,a,l){return du(t,s,a,l),hu(t)}function Lo(t,s){return du(t,null,null,s),hu(t)}function Rg(t,s,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,m=t.return;m!==null;)m.childLanes|=a,l=m.alternate,l!==null&&(l.childLanes|=a),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(h=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,h&&s!==null&&(h=31-Z(a),t=m.hiddenUpdates,l=t[h],l===null?t[h]=[s]:l.push(s),s.lane=a|536870912),m):null}function hu(t){if(50<sc)throw sc=0,Mf=null,Error(r(185));for(var s=t.return;s!==null;)t=s,s=t.return;return t.tag===3?t.stateNode:null}var Vo={};function F_(t,s,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ui(t,s,a,l){return new F_(t,s,a,l)}function Ih(t){return t=t.prototype,!(!t||!t.isReactComponent)}function tr(t,s){var a=t.alternate;return a===null?(a=ui(t.tag,s,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=s,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,s=t.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Cg(t,s){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=s,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,s=a.dependencies,t.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),t}function fu(t,s,a,l,h,m){var b=0;if(l=t,typeof t=="function")Ih(t)&&(b=1);else if(typeof t=="string")b=qw(t,a,be.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case k:return t=ui(31,a,s,h),t.elementType=k,t.lanes=m,t;case G:return Ga(a.children,h,m,s);case q:b=8,h|=24;break;case Q:return t=ui(12,a,s,h|2),t.elementType=Q,t.lanes=m,t;case de:return t=ui(13,a,s,h),t.elementType=de,t.lanes=m,t;case xe:return t=ui(19,a,s,h),t.elementType=xe,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ee:case L:b=10;break e;case $:b=9;break e;case pe:b=11;break e;case V:b=14;break e;case R:b=16,l=null;break e}b=29,a=Error(r(130,t===null?"null":typeof t,"")),l=null}return s=ui(b,a,s,h),s.elementType=t,s.type=l,s.lanes=m,s}function Ga(t,s,a,l){return t=ui(7,t,l,s),t.lanes=a,t}function kh(t,s,a){return t=ui(6,t,null,s),t.lanes=a,t}function Nh(t,s,a){return s=ui(4,t.children!==null?t.children:[],t.key,s),s.lanes=a,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}var Po=[],Uo=0,mu=null,pu=0,Di=[],Oi=0,Wa=null,nr=1,ir="";function Xa(t,s){Po[Uo++]=pu,Po[Uo++]=mu,mu=t,pu=s}function Ig(t,s,a){Di[Oi++]=nr,Di[Oi++]=ir,Di[Oi++]=Wa,Wa=t;var l=nr;t=ir;var h=32-Z(l)-1;l&=~(1<<h),a+=1;var m=32-Z(s)+h;if(30<m){var b=h-h%5;m=(l&(1<<b)-1).toString(32),l>>=b,h-=b,nr=1<<32-Z(s)+h|a<<h|l,ir=m+t}else nr=1<<m|a<<h|l,ir=t}function jh(t){t.return!==null&&(Xa(t,1),Ig(t,1,0))}function Dh(t){for(;t===mu;)mu=Po[--Uo],Po[Uo]=null,pu=Po[--Uo],Po[Uo]=null;for(;t===Wa;)Wa=Di[--Oi],Di[Oi]=null,ir=Di[--Oi],Di[Oi]=null,nr=Di[--Oi],Di[Oi]=null}var Xn=null,Zt=null,yt=!1,Za=null,As=!1,Oh=Error(r(519));function Ka(t){var s=Error(r(418,""));throw Ll(Ni(s,t)),Oh}function kg(t){var s=t.stateNode,a=t.type,l=t.memoizedProps;switch(s[nn]=t,s[Wt]=l,a){case"dialog":at("cancel",s),at("close",s);break;case"iframe":case"object":case"embed":at("load",s);break;case"video":case"audio":for(a=0;a<ac.length;a++)at(ac[a],s);break;case"source":at("error",s);break;case"img":case"image":case"link":at("error",s),at("load",s);break;case"details":at("toggle",s);break;case"input":at("invalid",s),Zs(s,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),jr(s);break;case"select":at("invalid",s);break;case"textarea":at("invalid",s),fs(s,l.value,l.defaultValue,l.children),jr(s)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||l.suppressHydrationWarning===!0||Xy(s.textContent,a)?(l.popover!=null&&(at("beforetoggle",s),at("toggle",s)),l.onScroll!=null&&at("scroll",s),l.onScrollEnd!=null&&at("scrollend",s),l.onClick!=null&&(s.onclick=Ku),s=!0):s=!1,s||Ka(t)}function Ng(t){for(Xn=t.return;Xn;)switch(Xn.tag){case 5:case 13:As=!1;return;case 27:case 3:As=!0;return;default:Xn=Xn.return}}function Ol(t){if(t!==Xn)return!1;if(!yt)return Ng(t),yt=!0,!1;var s=t.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Qf(t.type,t.memoizedProps)),a=!a),a&&Zt&&Ka(t),Ng(t),s===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));e:{for(t=t.nextSibling,s=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(s===0){Zt=Ji(t.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++;t=t.nextSibling}Zt=null}}else s===27?(s=Zt,Jr(t.type)?(t=tm,tm=null,Zt=t):Zt=s):Zt=Xn?Ji(t.stateNode.nextSibling):null;return!0}function Ml(){Zt=Xn=null,yt=!1}function jg(){var t=Za;return t!==null&&(ii===null?ii=t:ii.push.apply(ii,t),Za=null),t}function Ll(t){Za===null?Za=[t]:Za.push(t)}var Mh=B(null),Ya=null,sr=null;function Pr(t,s,a){K(Mh,s._currentValue),s._currentValue=a}function rr(t){t._currentValue=Mh.current,oe(Mh)}function Lh(t,s,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,l!==null&&(l.childLanes|=s)):l!==null&&(l.childLanes&s)!==s&&(l.childLanes|=s),t===a)break;t=t.return}}function Vh(t,s,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var m=h.dependencies;if(m!==null){var b=h.child;m=m.firstContext;e:for(;m!==null;){var E=m;m=h;for(var P=0;P<s.length;P++)if(E.context===s[P]){m.lanes|=a,E=m.alternate,E!==null&&(E.lanes|=a),Lh(m.return,a,t),l||(b=null);break e}m=E.next}}else if(h.tag===18){if(b=h.return,b===null)throw Error(r(341));b.lanes|=a,m=b.alternate,m!==null&&(m.lanes|=a),Lh(b,a,t),b=null}else b=h.child;if(b!==null)b.return=h;else for(b=h;b!==null;){if(b===t){b=null;break}if(h=b.sibling,h!==null){h.return=b.return,b=h;break}b=b.return}h=b}}function Vl(t,s,a,l){t=null;for(var h=s,m=!1;h!==null;){if(!m){if((h.flags&524288)!==0)m=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var b=h.alternate;if(b===null)throw Error(r(387));if(b=b.memoizedProps,b!==null){var E=h.type;ci(h.pendingProps.value,b.value)||(t!==null?t.push(E):t=[E])}}else if(h===nt.current){if(b=h.alternate,b===null)throw Error(r(387));b.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(hc):t=[hc])}h=h.return}t!==null&&Vh(s,t,a,l),s.flags|=262144}function gu(t){for(t=t.firstContext;t!==null;){if(!ci(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Qa(t){Ya=t,sr=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Vn(t){return Dg(Ya,t)}function yu(t,s){return Ya===null&&Qa(t),Dg(t,s)}function Dg(t,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},sr===null){if(t===null)throw Error(r(308));sr=s,t.dependencies={lanes:0,firstContext:s},t.flags|=524288}else sr=sr.next=s;return a}var H_=typeof AbortController<"u"?AbortController:function(){var t=[],s=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){s.aborted=!0,t.forEach(function(a){return a()})}},q_=i.unstable_scheduleCallback,G_=i.unstable_NormalPriority,dn={$$typeof:L,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ph(){return{controller:new H_,data:new Map,refCount:0}}function Pl(t){t.refCount--,t.refCount===0&&q_(G_,function(){t.controller.abort()})}var Ul=null,Uh=0,Bo=0,zo=null;function W_(t,s){if(Ul===null){var a=Ul=[];Uh=0,Bo=Ff(),zo={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Uh++,s.then(Og,Og),s}function Og(){if(--Uh===0&&Ul!==null){zo!==null&&(zo.status="fulfilled");var t=Ul;Ul=null,Bo=0,zo=null;for(var s=0;s<t.length;s++)(0,t[s])()}}function X_(t,s){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=s;for(var h=0;h<a.length;h++)(0,a[h])(s)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var Mg=ae.S;ae.S=function(t,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&W_(t,s),Mg!==null&&Mg(t,s)};var $a=B(null);function Bh(){var t=$a.current;return t!==null?t:jt.pooledCache}function vu(t,s){s===null?K($a,$a.current):K($a,s.pool)}function Lg(){var t=Bh();return t===null?null:{parent:dn._currentValue,pool:t}}var Bl=Error(r(460)),Vg=Error(r(474)),xu=Error(r(542)),zh={then:function(){}};function Pg(t){return t=t.status,t==="fulfilled"||t==="rejected"}function bu(){}function Ug(t,s,a){switch(a=t[a],a===void 0?t.push(s):a!==s&&(s.then(bu,bu),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,zg(t),t;default:if(typeof s.status=="string")s.then(bu,bu);else{if(t=jt,t!==null&&100<t.shellSuspendCounter)throw Error(r(482));t=s,t.status="pending",t.then(function(l){if(s.status==="pending"){var h=s;h.status="fulfilled",h.value=l}},function(l){if(s.status==="pending"){var h=s;h.status="rejected",h.reason=l}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,zg(t),t}throw zl=s,Bl}}var zl=null;function Bg(){if(zl===null)throw Error(r(459));var t=zl;return zl=null,t}function zg(t){if(t===Bl||t===xu)throw Error(r(483))}var Ur=!1;function Fh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Hh(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Br(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function zr(t,s,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(wt&2)!==0){var h=l.pending;return h===null?s.next=s:(s.next=h.next,h.next=s),l.pending=s,s=hu(t),Rg(t,null,a),s}return du(t,l,s,a),hu(t)}function Fl(t,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var l=s.lanes;l&=t.pendingLanes,a|=l,s.lanes=a,vi(t,a)}}function qh(t,s){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var b={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?h=m=b:m=m.next=b,a=a.next}while(a!==null);m===null?h=m=s:m=m.next=s}else h=m=s;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:m,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=s:t.next=s,a.lastBaseUpdate=s}var Gh=!1;function Hl(){if(Gh){var t=zo;if(t!==null)throw t}}function ql(t,s,a,l){Gh=!1;var h=t.updateQueue;Ur=!1;var m=h.firstBaseUpdate,b=h.lastBaseUpdate,E=h.shared.pending;if(E!==null){h.shared.pending=null;var P=E,J=P.next;P.next=null,b===null?m=J:b.next=J,b=P;var le=t.alternate;le!==null&&(le=le.updateQueue,E=le.lastBaseUpdate,E!==b&&(E===null?le.firstBaseUpdate=J:E.next=J,le.lastBaseUpdate=P))}if(m!==null){var he=h.baseState;b=0,le=J=P=null,E=m;do{var te=E.lane&-536870913,se=te!==E.lane;if(se?(dt&te)===te:(l&te)===te){te!==0&&te===Bo&&(Gh=!0),le!==null&&(le=le.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var Fe=t,Le=E;te=s;var Rt=a;switch(Le.tag){case 1:if(Fe=Le.payload,typeof Fe=="function"){he=Fe.call(Rt,he,te);break e}he=Fe;break e;case 3:Fe.flags=Fe.flags&-65537|128;case 0:if(Fe=Le.payload,te=typeof Fe=="function"?Fe.call(Rt,he,te):Fe,te==null)break e;he=w({},he,te);break e;case 2:Ur=!0}}te=E.callback,te!==null&&(t.flags|=64,se&&(t.flags|=8192),se=h.callbacks,se===null?h.callbacks=[te]:se.push(te))}else se={lane:te,tag:E.tag,payload:E.payload,callback:E.callback,next:null},le===null?(J=le=se,P=he):le=le.next=se,b|=te;if(E=E.next,E===null){if(E=h.shared.pending,E===null)break;se=E,E=se.next,se.next=null,h.lastBaseUpdate=se,h.shared.pending=null}}while(!0);le===null&&(P=he),h.baseState=P,h.firstBaseUpdate=J,h.lastBaseUpdate=le,m===null&&(h.shared.lanes=0),Kr|=b,t.lanes=b,t.memoizedState=he}}function Fg(t,s){if(typeof t!="function")throw Error(r(191,t));t.call(s)}function Hg(t,s){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Fg(a[t],s)}var Fo=B(null),_u=B(0);function qg(t,s){t=hr,K(_u,t),K(Fo,s),hr=t|s.baseLanes}function Wh(){K(_u,hr),K(Fo,Fo.current)}function Xh(){hr=_u.current,oe(Fo),oe(_u)}var Fr=0,Je=null,At=null,sn=null,wu=!1,Ho=!1,Ja=!1,Su=0,Gl=0,qo=null,Z_=0;function Jt(){throw Error(r(321))}function Zh(t,s){if(s===null)return!1;for(var a=0;a<s.length&&a<t.length;a++)if(!ci(t[a],s[a]))return!1;return!0}function Kh(t,s,a,l,h,m){return Fr=m,Je=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,ae.H=t===null||t.memoizedState===null?R0:C0,Ja=!1,m=a(l,h),Ja=!1,Ho&&(m=Wg(s,a,l,h)),Gg(t),m}function Gg(t){ae.H=Iu;var s=At!==null&&At.next!==null;if(Fr=0,sn=At=Je=null,wu=!1,Gl=0,qo=null,s)throw Error(r(300));t===null||xn||(t=t.dependencies,t!==null&&gu(t)&&(xn=!0))}function Wg(t,s,a,l){Je=t;var h=0;do{if(Ho&&(qo=null),Gl=0,Ho=!1,25<=h)throw Error(r(301));if(h+=1,sn=At=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}ae.H=tw,m=s(a,l)}while(Ho);return m}function K_(){var t=ae.H,s=t.useState()[0];return s=typeof s.then=="function"?Wl(s):s,t=t.useState()[0],(At!==null?At.memoizedState:null)!==t&&(Je.flags|=1024),s}function Yh(){var t=Su!==0;return Su=0,t}function Qh(t,s,a){s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~a}function $h(t){if(wu){for(t=t.memoizedState;t!==null;){var s=t.queue;s!==null&&(s.pending=null),t=t.next}wu=!1}Fr=0,sn=At=Je=null,Ho=!1,Gl=Su=0,qo=null}function ti(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return sn===null?Je.memoizedState=sn=t:sn=sn.next=t,sn}function rn(){if(At===null){var t=Je.alternate;t=t!==null?t.memoizedState:null}else t=At.next;var s=sn===null?Je.memoizedState:sn.next;if(s!==null)sn=s,At=t;else{if(t===null)throw Je.alternate===null?Error(r(467)):Error(r(310));At=t,t={memoizedState:At.memoizedState,baseState:At.baseState,baseQueue:At.baseQueue,queue:At.queue,next:null},sn===null?Je.memoizedState=sn=t:sn=sn.next=t}return sn}function Jh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Wl(t){var s=Gl;return Gl+=1,qo===null&&(qo=[]),t=Ug(qo,t,s),s=Je,(sn===null?s.memoizedState:sn.next)===null&&(s=s.alternate,ae.H=s===null||s.memoizedState===null?R0:C0),t}function Eu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Wl(t);if(t.$$typeof===L)return Vn(t)}throw Error(r(438,String(t)))}function ef(t){var s=null,a=Je.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var l=Je.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(s={data:l.data.map(function(h){return h.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=Jh(),Je.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(t),l=0;l<t;l++)a[l]=M;return s.index++,a}function ar(t,s){return typeof s=="function"?s(t):s}function Au(t){var s=rn();return tf(s,At,t)}function tf(t,s,a){var l=t.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var h=t.baseQueue,m=l.pending;if(m!==null){if(h!==null){var b=h.next;h.next=m.next,m.next=b}s.baseQueue=h=m,l.pending=null}if(m=t.baseState,h===null)t.memoizedState=m;else{s=h.next;var E=b=null,P=null,J=s,le=!1;do{var he=J.lane&-536870913;if(he!==J.lane?(dt&he)===he:(Fr&he)===he){var te=J.revertLane;if(te===0)P!==null&&(P=P.next={lane:0,revertLane:0,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),he===Bo&&(le=!0);else if((Fr&te)===te){J=J.next,te===Bo&&(le=!0);continue}else he={lane:0,revertLane:J.revertLane,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},P===null?(E=P=he,b=m):P=P.next=he,Je.lanes|=te,Kr|=te;he=J.action,Ja&&a(m,he),m=J.hasEagerState?J.eagerState:a(m,he)}else te={lane:he,revertLane:J.revertLane,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},P===null?(E=P=te,b=m):P=P.next=te,Je.lanes|=he,Kr|=he;J=J.next}while(J!==null&&J!==s);if(P===null?b=m:P.next=E,!ci(m,t.memoizedState)&&(xn=!0,le&&(a=zo,a!==null)))throw a;t.memoizedState=m,t.baseState=b,t.baseQueue=P,l.lastRenderedState=m}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function nf(t){var s=rn(),a=s.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,m=s.memoizedState;if(h!==null){a.pending=null;var b=h=h.next;do m=t(m,b.action),b=b.next;while(b!==h);ci(m,s.memoizedState)||(xn=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),a.lastRenderedState=m}return[m,l]}function Xg(t,s,a){var l=Je,h=rn(),m=yt;if(m){if(a===void 0)throw Error(r(407));a=a()}else a=s();var b=!ci((At||h).memoizedState,a);b&&(h.memoizedState=a,xn=!0),h=h.queue;var E=Yg.bind(null,l,h,t);if(Xl(2048,8,E,[t]),h.getSnapshot!==s||b||sn!==null&&sn.memoizedState.tag&1){if(l.flags|=2048,Go(9,Tu(),Kg.bind(null,l,h,a,s),null),jt===null)throw Error(r(349));m||(Fr&124)!==0||Zg(l,s,a)}return a}function Zg(t,s,a){t.flags|=16384,t={getSnapshot:s,value:a},s=Je.updateQueue,s===null?(s=Jh(),Je.updateQueue=s,s.stores=[t]):(a=s.stores,a===null?s.stores=[t]:a.push(t))}function Kg(t,s,a,l){s.value=a,s.getSnapshot=l,Qg(s)&&$g(t)}function Yg(t,s,a){return a(function(){Qg(s)&&$g(t)})}function Qg(t){var s=t.getSnapshot;t=t.value;try{var a=s();return!ci(t,a)}catch{return!0}}function $g(t){var s=Lo(t,2);s!==null&&pi(s,t,2)}function sf(t){var s=ti();if(typeof t=="function"){var a=t;if(t=a(),Ja){ln(!0);try{a()}finally{ln(!1)}}}return s.memoizedState=s.baseState=t,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ar,lastRenderedState:t},s}function Jg(t,s,a,l){return t.baseState=a,tf(t,At,typeof l=="function"?l:ar)}function Y_(t,s,a,l,h){if(Cu(t))throw Error(r(485));if(t=s.action,t!==null){var m={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){m.listeners.push(b)}};ae.T!==null?a(!0):m.isTransition=!1,l(m),a=s.pending,a===null?(m.next=s.pending=m,e0(s,m)):(m.next=a.next,s.pending=a.next=m)}}function e0(t,s){var a=s.action,l=s.payload,h=t.state;if(s.isTransition){var m=ae.T,b={};ae.T=b;try{var E=a(h,l),P=ae.S;P!==null&&P(b,E),t0(t,s,E)}catch(J){rf(t,s,J)}finally{ae.T=m}}else try{m=a(h,l),t0(t,s,m)}catch(J){rf(t,s,J)}}function t0(t,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){n0(t,s,l)},function(l){return rf(t,s,l)}):n0(t,s,a)}function n0(t,s,a){s.status="fulfilled",s.value=a,i0(s),t.state=a,s=t.pending,s!==null&&(a=s.next,a===s?t.pending=null:(a=a.next,s.next=a,e0(t,a)))}function rf(t,s,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do s.status="rejected",s.reason=a,i0(s),s=s.next;while(s!==l)}t.action=null}function i0(t){t=t.listeners;for(var s=0;s<t.length;s++)(0,t[s])()}function s0(t,s){return s}function r0(t,s){if(yt){var a=jt.formState;if(a!==null){e:{var l=Je;if(yt){if(Zt){t:{for(var h=Zt,m=As;h.nodeType!==8;){if(!m){h=null;break t}if(h=Ji(h.nextSibling),h===null){h=null;break t}}m=h.data,h=m==="F!"||m==="F"?h:null}if(h){Zt=Ji(h.nextSibling),l=h.data==="F!";break e}}Ka(l)}l=!1}l&&(s=a[0])}}return a=ti(),a.memoizedState=a.baseState=s,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s0,lastRenderedState:s},a.queue=l,a=E0.bind(null,Je,l),l.dispatch=a,l=sf(!1),m=uf.bind(null,Je,!1,l.queue),l=ti(),h={state:s,dispatch:null,action:t,pending:null},l.queue=h,a=Y_.bind(null,Je,h,m,a),h.dispatch=a,l.memoizedState=t,[s,a,!1]}function a0(t){var s=rn();return o0(s,At,t)}function o0(t,s,a){if(s=tf(t,s,s0)[0],t=Au(ar)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var l=Wl(s)}catch(b){throw b===Bl?xu:b}else l=s;s=rn();var h=s.queue,m=h.dispatch;return a!==s.memoizedState&&(Je.flags|=2048,Go(9,Tu(),Q_.bind(null,h,a),null)),[l,m,t]}function Q_(t,s){t.action=s}function l0(t){var s=rn(),a=At;if(a!==null)return o0(s,a,t);rn(),s=s.memoizedState,a=rn();var l=a.queue.dispatch;return a.memoizedState=t,[s,l,!1]}function Go(t,s,a,l){return t={tag:t,create:a,deps:l,inst:s,next:null},s=Je.updateQueue,s===null&&(s=Jh(),Je.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,s.lastEffect=t),t}function Tu(){return{destroy:void 0,resource:void 0}}function c0(){return rn().memoizedState}function Ru(t,s,a,l){var h=ti();l=l===void 0?null:l,Je.flags|=t,h.memoizedState=Go(1|s,Tu(),a,l)}function Xl(t,s,a,l){var h=rn();l=l===void 0?null:l;var m=h.memoizedState.inst;At!==null&&l!==null&&Zh(l,At.memoizedState.deps)?h.memoizedState=Go(s,m,a,l):(Je.flags|=t,h.memoizedState=Go(1|s,m,a,l))}function u0(t,s){Ru(8390656,8,t,s)}function d0(t,s){Xl(2048,8,t,s)}function h0(t,s){return Xl(4,2,t,s)}function f0(t,s){return Xl(4,4,t,s)}function m0(t,s){if(typeof s=="function"){t=t();var a=s(t);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function p0(t,s,a){a=a!=null?a.concat([t]):null,Xl(4,4,m0.bind(null,s,t),a)}function af(){}function g0(t,s){var a=rn();s=s===void 0?null:s;var l=a.memoizedState;return s!==null&&Zh(s,l[1])?l[0]:(a.memoizedState=[t,s],t)}function y0(t,s){var a=rn();s=s===void 0?null:s;var l=a.memoizedState;if(s!==null&&Zh(s,l[1]))return l[0];if(l=t(),Ja){ln(!0);try{t()}finally{ln(!1)}}return a.memoizedState=[l,s],l}function of(t,s,a){return a===void 0||(Fr&1073741824)!==0?t.memoizedState=s:(t.memoizedState=a,t=by(),Je.lanes|=t,Kr|=t,a)}function v0(t,s,a,l){return ci(a,s)?a:Fo.current!==null?(t=of(t,a,l),ci(t,s)||(xn=!0),t):(Fr&42)===0?(xn=!0,t.memoizedState=a):(t=by(),Je.lanes|=t,Kr|=t,s)}function x0(t,s,a,l,h){var m=me.p;me.p=m!==0&&8>m?m:8;var b=ae.T,E={};ae.T=E,uf(t,!1,s,a);try{var P=h(),J=ae.S;if(J!==null&&J(E,P),P!==null&&typeof P=="object"&&typeof P.then=="function"){var le=X_(P,l);Zl(t,s,le,mi(t))}else Zl(t,s,l,mi(t))}catch(he){Zl(t,s,{then:function(){},status:"rejected",reason:he},mi())}finally{me.p=m,ae.T=b}}function $_(){}function lf(t,s,a,l){if(t.tag!==5)throw Error(r(476));var h=b0(t).queue;x0(t,h,s,re,a===null?$_:function(){return _0(t),a(l)})}function b0(t){var s=t.memoizedState;if(s!==null)return s;s={memoizedState:re,baseState:re,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ar,lastRenderedState:re},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ar,lastRenderedState:a},next:null},t.memoizedState=s,t=t.alternate,t!==null&&(t.memoizedState=s),s}function _0(t){var s=b0(t).next.queue;Zl(t,s,{},mi())}function cf(){return Vn(hc)}function w0(){return rn().memoizedState}function S0(){return rn().memoizedState}function J_(t){for(var s=t.return;s!==null;){switch(s.tag){case 24:case 3:var a=mi();t=Br(a);var l=zr(s,t,a);l!==null&&(pi(l,s,a),Fl(l,s,a)),s={cache:Ph()},t.payload=s;return}s=s.return}}function ew(t,s,a){var l=mi();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Cu(t)?A0(s,a):(a=Ch(t,s,a,l),a!==null&&(pi(a,t,l),T0(a,s,l)))}function E0(t,s,a){var l=mi();Zl(t,s,a,l)}function Zl(t,s,a,l){var h={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Cu(t))A0(s,h);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var b=s.lastRenderedState,E=m(b,a);if(h.hasEagerState=!0,h.eagerState=E,ci(E,b))return du(t,s,h,0),jt===null&&uu(),!1}catch{}finally{}if(a=Ch(t,s,h,l),a!==null)return pi(a,t,l),T0(a,s,l),!0}return!1}function uf(t,s,a,l){if(l={lane:2,revertLane:Ff(),action:l,hasEagerState:!1,eagerState:null,next:null},Cu(t)){if(s)throw Error(r(479))}else s=Ch(t,a,l,2),s!==null&&pi(s,t,2)}function Cu(t){var s=t.alternate;return t===Je||s!==null&&s===Je}function A0(t,s){Ho=wu=!0;var a=t.pending;a===null?s.next=s:(s.next=a.next,a.next=s),t.pending=s}function T0(t,s,a){if((a&4194048)!==0){var l=s.lanes;l&=t.pendingLanes,a|=l,s.lanes=a,vi(t,a)}}var Iu={readContext:Vn,use:Eu,useCallback:Jt,useContext:Jt,useEffect:Jt,useImperativeHandle:Jt,useLayoutEffect:Jt,useInsertionEffect:Jt,useMemo:Jt,useReducer:Jt,useRef:Jt,useState:Jt,useDebugValue:Jt,useDeferredValue:Jt,useTransition:Jt,useSyncExternalStore:Jt,useId:Jt,useHostTransitionStatus:Jt,useFormState:Jt,useActionState:Jt,useOptimistic:Jt,useMemoCache:Jt,useCacheRefresh:Jt},R0={readContext:Vn,use:Eu,useCallback:function(t,s){return ti().memoizedState=[t,s===void 0?null:s],t},useContext:Vn,useEffect:u0,useImperativeHandle:function(t,s,a){a=a!=null?a.concat([t]):null,Ru(4194308,4,m0.bind(null,s,t),a)},useLayoutEffect:function(t,s){return Ru(4194308,4,t,s)},useInsertionEffect:function(t,s){Ru(4,2,t,s)},useMemo:function(t,s){var a=ti();s=s===void 0?null:s;var l=t();if(Ja){ln(!0);try{t()}finally{ln(!1)}}return a.memoizedState=[l,s],l},useReducer:function(t,s,a){var l=ti();if(a!==void 0){var h=a(s);if(Ja){ln(!0);try{a(s)}finally{ln(!1)}}}else h=s;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=ew.bind(null,Je,t),[l.memoizedState,t]},useRef:function(t){var s=ti();return t={current:t},s.memoizedState=t},useState:function(t){t=sf(t);var s=t.queue,a=E0.bind(null,Je,s);return s.dispatch=a,[t.memoizedState,a]},useDebugValue:af,useDeferredValue:function(t,s){var a=ti();return of(a,t,s)},useTransition:function(){var t=sf(!1);return t=x0.bind(null,Je,t.queue,!0,!1),ti().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,s,a){var l=Je,h=ti();if(yt){if(a===void 0)throw Error(r(407));a=a()}else{if(a=s(),jt===null)throw Error(r(349));(dt&124)!==0||Zg(l,s,a)}h.memoizedState=a;var m={value:a,getSnapshot:s};return h.queue=m,u0(Yg.bind(null,l,m,t),[t]),l.flags|=2048,Go(9,Tu(),Kg.bind(null,l,m,a,s),null),a},useId:function(){var t=ti(),s=jt.identifierPrefix;if(yt){var a=ir,l=nr;a=(l&~(1<<32-Z(l)-1)).toString(32)+a,s=""+s+"R"+a,a=Su++,0<a&&(s+="H"+a.toString(32)),s+=""}else a=Z_++,s=""+s+"r"+a.toString(32)+"";return t.memoizedState=s},useHostTransitionStatus:cf,useFormState:r0,useActionState:r0,useOptimistic:function(t){var s=ti();s.memoizedState=s.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=uf.bind(null,Je,!0,a),a.dispatch=s,[t,s]},useMemoCache:ef,useCacheRefresh:function(){return ti().memoizedState=J_.bind(null,Je)}},C0={readContext:Vn,use:Eu,useCallback:g0,useContext:Vn,useEffect:d0,useImperativeHandle:p0,useInsertionEffect:h0,useLayoutEffect:f0,useMemo:y0,useReducer:Au,useRef:c0,useState:function(){return Au(ar)},useDebugValue:af,useDeferredValue:function(t,s){var a=rn();return v0(a,At.memoizedState,t,s)},useTransition:function(){var t=Au(ar)[0],s=rn().memoizedState;return[typeof t=="boolean"?t:Wl(t),s]},useSyncExternalStore:Xg,useId:w0,useHostTransitionStatus:cf,useFormState:a0,useActionState:a0,useOptimistic:function(t,s){var a=rn();return Jg(a,At,t,s)},useMemoCache:ef,useCacheRefresh:S0},tw={readContext:Vn,use:Eu,useCallback:g0,useContext:Vn,useEffect:d0,useImperativeHandle:p0,useInsertionEffect:h0,useLayoutEffect:f0,useMemo:y0,useReducer:nf,useRef:c0,useState:function(){return nf(ar)},useDebugValue:af,useDeferredValue:function(t,s){var a=rn();return At===null?of(a,t,s):v0(a,At.memoizedState,t,s)},useTransition:function(){var t=nf(ar)[0],s=rn().memoizedState;return[typeof t=="boolean"?t:Wl(t),s]},useSyncExternalStore:Xg,useId:w0,useHostTransitionStatus:cf,useFormState:l0,useActionState:l0,useOptimistic:function(t,s){var a=rn();return At!==null?Jg(a,At,t,s):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:ef,useCacheRefresh:S0},Wo=null,Kl=0;function ku(t){var s=Kl;return Kl+=1,Wo===null&&(Wo=[]),Ug(Wo,t,s)}function Yl(t,s){s=s.props.ref,t.ref=s!==void 0?s:null}function Nu(t,s){throw s.$$typeof===S?Error(r(525)):(t=Object.prototype.toString.call(s),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t)))}function I0(t){var s=t._init;return s(t._payload)}function k0(t){function s(X,H){if(t){var Y=X.deletions;Y===null?(X.deletions=[H],X.flags|=16):Y.push(H)}}function a(X,H){if(!t)return null;for(;H!==null;)s(X,H),H=H.sibling;return null}function l(X){for(var H=new Map;X!==null;)X.key!==null?H.set(X.key,X):H.set(X.index,X),X=X.sibling;return H}function h(X,H){return X=tr(X,H),X.index=0,X.sibling=null,X}function m(X,H,Y){return X.index=Y,t?(Y=X.alternate,Y!==null?(Y=Y.index,Y<H?(X.flags|=67108866,H):Y):(X.flags|=67108866,H)):(X.flags|=1048576,H)}function b(X){return t&&X.alternate===null&&(X.flags|=67108866),X}function E(X,H,Y,ce){return H===null||H.tag!==6?(H=kh(Y,X.mode,ce),H.return=X,H):(H=h(H,Y),H.return=X,H)}function P(X,H,Y,ce){var Te=Y.type;return Te===G?le(X,H,Y.props.children,ce,Y.key):H!==null&&(H.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===R&&I0(Te)===H.type)?(H=h(H,Y.props),Yl(H,Y),H.return=X,H):(H=fu(Y.type,Y.key,Y.props,null,X.mode,ce),Yl(H,Y),H.return=X,H)}function J(X,H,Y,ce){return H===null||H.tag!==4||H.stateNode.containerInfo!==Y.containerInfo||H.stateNode.implementation!==Y.implementation?(H=Nh(Y,X.mode,ce),H.return=X,H):(H=h(H,Y.children||[]),H.return=X,H)}function le(X,H,Y,ce,Te){return H===null||H.tag!==7?(H=Ga(Y,X.mode,ce,Te),H.return=X,H):(H=h(H,Y),H.return=X,H)}function he(X,H,Y){if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return H=kh(""+H,X.mode,Y),H.return=X,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case A:return Y=fu(H.type,H.key,H.props,null,X.mode,Y),Yl(Y,H),Y.return=X,Y;case F:return H=Nh(H,X.mode,Y),H.return=X,H;case R:var ce=H._init;return H=ce(H._payload),he(X,H,Y)}if(tt(H)||z(H))return H=Ga(H,X.mode,Y,null),H.return=X,H;if(typeof H.then=="function")return he(X,ku(H),Y);if(H.$$typeof===L)return he(X,yu(X,H),Y);Nu(X,H)}return null}function te(X,H,Y,ce){var Te=H!==null?H.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Te!==null?null:E(X,H,""+Y,ce);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case A:return Y.key===Te?P(X,H,Y,ce):null;case F:return Y.key===Te?J(X,H,Y,ce):null;case R:return Te=Y._init,Y=Te(Y._payload),te(X,H,Y,ce)}if(tt(Y)||z(Y))return Te!==null?null:le(X,H,Y,ce,null);if(typeof Y.then=="function")return te(X,H,ku(Y),ce);if(Y.$$typeof===L)return te(X,H,yu(X,Y),ce);Nu(X,Y)}return null}function se(X,H,Y,ce,Te){if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return X=X.get(Y)||null,E(H,X,""+ce,Te);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case A:return X=X.get(ce.key===null?Y:ce.key)||null,P(H,X,ce,Te);case F:return X=X.get(ce.key===null?Y:ce.key)||null,J(H,X,ce,Te);case R:var st=ce._init;return ce=st(ce._payload),se(X,H,Y,ce,Te)}if(tt(ce)||z(ce))return X=X.get(Y)||null,le(H,X,ce,Te,null);if(typeof ce.then=="function")return se(X,H,Y,ku(ce),Te);if(ce.$$typeof===L)return se(X,H,Y,yu(H,ce),Te);Nu(H,ce)}return null}function Fe(X,H,Y,ce){for(var Te=null,st=null,je=H,Ve=H=0,_n=null;je!==null&&Ve<Y.length;Ve++){je.index>Ve?(_n=je,je=null):_n=je.sibling;var mt=te(X,je,Y[Ve],ce);if(mt===null){je===null&&(je=_n);break}t&&je&&mt.alternate===null&&s(X,je),H=m(mt,H,Ve),st===null?Te=mt:st.sibling=mt,st=mt,je=_n}if(Ve===Y.length)return a(X,je),yt&&Xa(X,Ve),Te;if(je===null){for(;Ve<Y.length;Ve++)je=he(X,Y[Ve],ce),je!==null&&(H=m(je,H,Ve),st===null?Te=je:st.sibling=je,st=je);return yt&&Xa(X,Ve),Te}for(je=l(je);Ve<Y.length;Ve++)_n=se(je,X,Ve,Y[Ve],ce),_n!==null&&(t&&_n.alternate!==null&&je.delete(_n.key===null?Ve:_n.key),H=m(_n,H,Ve),st===null?Te=_n:st.sibling=_n,st=_n);return t&&je.forEach(function(sa){return s(X,sa)}),yt&&Xa(X,Ve),Te}function Le(X,H,Y,ce){if(Y==null)throw Error(r(151));for(var Te=null,st=null,je=H,Ve=H=0,_n=null,mt=Y.next();je!==null&&!mt.done;Ve++,mt=Y.next()){je.index>Ve?(_n=je,je=null):_n=je.sibling;var sa=te(X,je,mt.value,ce);if(sa===null){je===null&&(je=_n);break}t&&je&&sa.alternate===null&&s(X,je),H=m(sa,H,Ve),st===null?Te=sa:st.sibling=sa,st=sa,je=_n}if(mt.done)return a(X,je),yt&&Xa(X,Ve),Te;if(je===null){for(;!mt.done;Ve++,mt=Y.next())mt=he(X,mt.value,ce),mt!==null&&(H=m(mt,H,Ve),st===null?Te=mt:st.sibling=mt,st=mt);return yt&&Xa(X,Ve),Te}for(je=l(je);!mt.done;Ve++,mt=Y.next())mt=se(je,X,Ve,mt.value,ce),mt!==null&&(t&&mt.alternate!==null&&je.delete(mt.key===null?Ve:mt.key),H=m(mt,H,Ve),st===null?Te=mt:st.sibling=mt,st=mt);return t&&je.forEach(function(nS){return s(X,nS)}),yt&&Xa(X,Ve),Te}function Rt(X,H,Y,ce){if(typeof Y=="object"&&Y!==null&&Y.type===G&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case A:e:{for(var Te=Y.key;H!==null;){if(H.key===Te){if(Te=Y.type,Te===G){if(H.tag===7){a(X,H.sibling),ce=h(H,Y.props.children),ce.return=X,X=ce;break e}}else if(H.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===R&&I0(Te)===H.type){a(X,H.sibling),ce=h(H,Y.props),Yl(ce,Y),ce.return=X,X=ce;break e}a(X,H);break}else s(X,H);H=H.sibling}Y.type===G?(ce=Ga(Y.props.children,X.mode,ce,Y.key),ce.return=X,X=ce):(ce=fu(Y.type,Y.key,Y.props,null,X.mode,ce),Yl(ce,Y),ce.return=X,X=ce)}return b(X);case F:e:{for(Te=Y.key;H!==null;){if(H.key===Te)if(H.tag===4&&H.stateNode.containerInfo===Y.containerInfo&&H.stateNode.implementation===Y.implementation){a(X,H.sibling),ce=h(H,Y.children||[]),ce.return=X,X=ce;break e}else{a(X,H);break}else s(X,H);H=H.sibling}ce=Nh(Y,X.mode,ce),ce.return=X,X=ce}return b(X);case R:return Te=Y._init,Y=Te(Y._payload),Rt(X,H,Y,ce)}if(tt(Y))return Fe(X,H,Y,ce);if(z(Y)){if(Te=z(Y),typeof Te!="function")throw Error(r(150));return Y=Te.call(Y),Le(X,H,Y,ce)}if(typeof Y.then=="function")return Rt(X,H,ku(Y),ce);if(Y.$$typeof===L)return Rt(X,H,yu(X,Y),ce);Nu(X,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint"?(Y=""+Y,H!==null&&H.tag===6?(a(X,H.sibling),ce=h(H,Y),ce.return=X,X=ce):(a(X,H),ce=kh(Y,X.mode,ce),ce.return=X,X=ce),b(X)):a(X,H)}return function(X,H,Y,ce){try{Kl=0;var Te=Rt(X,H,Y,ce);return Wo=null,Te}catch(je){if(je===Bl||je===xu)throw je;var st=ui(29,je,null,X.mode);return st.lanes=ce,st.return=X,st}finally{}}}var Xo=k0(!0),N0=k0(!1),Mi=B(null),Ts=null;function Hr(t){var s=t.alternate;K(hn,hn.current&1),K(Mi,t),Ts===null&&(s===null||Fo.current!==null||s.memoizedState!==null)&&(Ts=t)}function j0(t){if(t.tag===22){if(K(hn,hn.current),K(Mi,t),Ts===null){var s=t.alternate;s!==null&&s.memoizedState!==null&&(Ts=t)}}else qr()}function qr(){K(hn,hn.current),K(Mi,Mi.current)}function or(t){oe(Mi),Ts===t&&(Ts=null),oe(hn)}var hn=B(0);function ju(t){for(var s=t;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||em(a)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function df(t,s,a,l){s=t.memoizedState,a=a(l,s),a=a==null?s:w({},s,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var hf={enqueueSetState:function(t,s,a){t=t._reactInternals;var l=mi(),h=Br(l);h.payload=s,a!=null&&(h.callback=a),s=zr(t,h,l),s!==null&&(pi(s,t,l),Fl(s,t,l))},enqueueReplaceState:function(t,s,a){t=t._reactInternals;var l=mi(),h=Br(l);h.tag=1,h.payload=s,a!=null&&(h.callback=a),s=zr(t,h,l),s!==null&&(pi(s,t,l),Fl(s,t,l))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var a=mi(),l=Br(a);l.tag=2,s!=null&&(l.callback=s),s=zr(t,l,a),s!==null&&(pi(s,t,a),Fl(s,t,a))}};function D0(t,s,a,l,h,m,b){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,m,b):s.prototype&&s.prototype.isPureReactComponent?!jl(a,l)||!jl(h,m):!0}function O0(t,s,a,l){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,l),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,l),s.state!==t&&hf.enqueueReplaceState(s,s.state,null)}function eo(t,s){var a=s;if("ref"in s){a={};for(var l in s)l!=="ref"&&(a[l]=s[l])}if(t=t.defaultProps){a===s&&(a=w({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}var Du=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function M0(t){Du(t)}function L0(t){console.error(t)}function V0(t){Du(t)}function Ou(t,s){try{var a=t.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(l){setTimeout(function(){throw l})}}function P0(t,s,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function ff(t,s,a){return a=Br(a),a.tag=3,a.payload={element:null},a.callback=function(){Ou(t,s)},a}function U0(t){return t=Br(t),t.tag=3,t}function B0(t,s,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var m=l.value;t.payload=function(){return h(m)},t.callback=function(){P0(s,a,l)}}var b=a.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(t.callback=function(){P0(s,a,l),typeof h!="function"&&(Yr===null?Yr=new Set([this]):Yr.add(this));var E=l.stack;this.componentDidCatch(l.value,{componentStack:E!==null?E:""})})}function nw(t,s,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(s=a.alternate,s!==null&&Vl(s,a,h,!0),a=Mi.current,a!==null){switch(a.tag){case 13:return Ts===null?Vf():a.alternate===null&&Kt===0&&(Kt=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===zh?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([l]):s.add(l),Uf(t,l,h)),!1;case 22:return a.flags|=65536,l===zh?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([l]):a.add(l)),Uf(t,l,h)),!1}throw Error(r(435,a.tag))}return Uf(t,l,h),Vf(),!1}if(yt)return s=Mi.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=h,l!==Oh&&(t=Error(r(422),{cause:l}),Ll(Ni(t,a)))):(l!==Oh&&(s=Error(r(423),{cause:l}),Ll(Ni(s,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=Ni(l,a),h=ff(t.stateNode,l,h),qh(t,h),Kt!==4&&(Kt=2)),!1;var m=Error(r(520),{cause:l});if(m=Ni(m,a),ic===null?ic=[m]:ic.push(m),Kt!==4&&(Kt=2),s===null)return!0;l=Ni(l,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=ff(a.stateNode,l,t),qh(a,t),!1;case 1:if(s=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Yr===null||!Yr.has(m))))return a.flags|=65536,h&=-h,a.lanes|=h,h=U0(h),B0(h,t,a,l),qh(a,h),!1}a=a.return}while(a!==null);return!1}var z0=Error(r(461)),xn=!1;function Rn(t,s,a,l){s.child=t===null?N0(s,null,a,l):Xo(s,t.child,a,l)}function F0(t,s,a,l,h){a=a.render;var m=s.ref;if("ref"in l){var b={};for(var E in l)E!=="ref"&&(b[E]=l[E])}else b=l;return Qa(s),l=Kh(t,s,a,b,m,h),E=Yh(),t!==null&&!xn?(Qh(t,s,h),lr(t,s,h)):(yt&&E&&jh(s),s.flags|=1,Rn(t,s,l,h),s.child)}function H0(t,s,a,l,h){if(t===null){var m=a.type;return typeof m=="function"&&!Ih(m)&&m.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=m,q0(t,s,m,l,h)):(t=fu(a.type,null,l,s,s.mode,h),t.ref=s.ref,t.return=s,s.child=t)}if(m=t.child,!_f(t,h)){var b=m.memoizedProps;if(a=a.compare,a=a!==null?a:jl,a(b,l)&&t.ref===s.ref)return lr(t,s,h)}return s.flags|=1,t=tr(m,l),t.ref=s.ref,t.return=s,s.child=t}function q0(t,s,a,l,h){if(t!==null){var m=t.memoizedProps;if(jl(m,l)&&t.ref===s.ref)if(xn=!1,s.pendingProps=l=m,_f(t,h))(t.flags&131072)!==0&&(xn=!0);else return s.lanes=t.lanes,lr(t,s,h)}return mf(t,s,a,l,h)}function G0(t,s,a){var l=s.pendingProps,h=l.children,m=t!==null?t.memoizedState:null;if(l.mode==="hidden"){if((s.flags&128)!==0){if(l=m!==null?m.baseLanes|a:a,t!==null){for(h=s.child=t.child,m=0;h!==null;)m=m|h.lanes|h.childLanes,h=h.sibling;s.childLanes=m&~l}else s.childLanes=0,s.child=null;return W0(t,s,l,a)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},t!==null&&vu(s,m!==null?m.cachePool:null),m!==null?qg(s,m):Wh(),j0(s);else return s.lanes=s.childLanes=536870912,W0(t,s,m!==null?m.baseLanes|a:a,a)}else m!==null?(vu(s,m.cachePool),qg(s,m),qr(),s.memoizedState=null):(t!==null&&vu(s,null),Wh(),qr());return Rn(t,s,h,a),s.child}function W0(t,s,a,l){var h=Bh();return h=h===null?null:{parent:dn._currentValue,pool:h},s.memoizedState={baseLanes:a,cachePool:h},t!==null&&vu(s,null),Wh(),j0(s),t!==null&&Vl(t,s,l,!0),null}function Mu(t,s){var a=s.ref;if(a===null)t!==null&&t.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(t===null||t.ref!==a)&&(s.flags|=4194816)}}function mf(t,s,a,l,h){return Qa(s),a=Kh(t,s,a,l,void 0,h),l=Yh(),t!==null&&!xn?(Qh(t,s,h),lr(t,s,h)):(yt&&l&&jh(s),s.flags|=1,Rn(t,s,a,h),s.child)}function X0(t,s,a,l,h,m){return Qa(s),s.updateQueue=null,a=Wg(s,l,a,h),Gg(t),l=Yh(),t!==null&&!xn?(Qh(t,s,m),lr(t,s,m)):(yt&&l&&jh(s),s.flags|=1,Rn(t,s,a,m),s.child)}function Z0(t,s,a,l,h){if(Qa(s),s.stateNode===null){var m=Vo,b=a.contextType;typeof b=="object"&&b!==null&&(m=Vn(b)),m=new a(l,m),s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=hf,s.stateNode=m,m._reactInternals=s,m=s.stateNode,m.props=l,m.state=s.memoizedState,m.refs={},Fh(s),b=a.contextType,m.context=typeof b=="object"&&b!==null?Vn(b):Vo,m.state=s.memoizedState,b=a.getDerivedStateFromProps,typeof b=="function"&&(df(s,a,b,l),m.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(b=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),b!==m.state&&hf.enqueueReplaceState(m,m.state,null),ql(s,l,m,h),Hl(),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308),l=!0}else if(t===null){m=s.stateNode;var E=s.memoizedProps,P=eo(a,E);m.props=P;var J=m.context,le=a.contextType;b=Vo,typeof le=="object"&&le!==null&&(b=Vn(le));var he=a.getDerivedStateFromProps;le=typeof he=="function"||typeof m.getSnapshotBeforeUpdate=="function",E=s.pendingProps!==E,le||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(E||J!==b)&&O0(s,m,l,b),Ur=!1;var te=s.memoizedState;m.state=te,ql(s,l,m,h),Hl(),J=s.memoizedState,E||te!==J||Ur?(typeof he=="function"&&(df(s,a,he,l),J=s.memoizedState),(P=Ur||D0(s,a,P,l,te,J,b))?(le||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(s.flags|=4194308)):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=l,s.memoizedState=J),m.props=l,m.state=J,m.context=b,l=P):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),l=!1)}else{m=s.stateNode,Hh(t,s),b=s.memoizedProps,le=eo(a,b),m.props=le,he=s.pendingProps,te=m.context,J=a.contextType,P=Vo,typeof J=="object"&&J!==null&&(P=Vn(J)),E=a.getDerivedStateFromProps,(J=typeof E=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(b!==he||te!==P)&&O0(s,m,l,P),Ur=!1,te=s.memoizedState,m.state=te,ql(s,l,m,h),Hl();var se=s.memoizedState;b!==he||te!==se||Ur||t!==null&&t.dependencies!==null&&gu(t.dependencies)?(typeof E=="function"&&(df(s,a,E,l),se=s.memoizedState),(le=Ur||D0(s,a,le,l,te,se,P)||t!==null&&t.dependencies!==null&&gu(t.dependencies))?(J||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(l,se,P),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(l,se,P)),typeof m.componentDidUpdate=="function"&&(s.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof m.componentDidUpdate!="function"||b===t.memoizedProps&&te===t.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&te===t.memoizedState||(s.flags|=1024),s.memoizedProps=l,s.memoizedState=se),m.props=l,m.state=se,m.context=P,l=le):(typeof m.componentDidUpdate!="function"||b===t.memoizedProps&&te===t.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&te===t.memoizedState||(s.flags|=1024),l=!1)}return m=l,Mu(t,s),l=(s.flags&128)!==0,m||l?(m=s.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:m.render(),s.flags|=1,t!==null&&l?(s.child=Xo(s,t.child,null,h),s.child=Xo(s,null,a,h)):Rn(t,s,a,h),s.memoizedState=m.state,t=s.child):t=lr(t,s,h),t}function K0(t,s,a,l){return Ml(),s.flags|=256,Rn(t,s,a,l),s.child}var pf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function gf(t){return{baseLanes:t,cachePool:Lg()}}function yf(t,s,a){return t=t!==null?t.childLanes&~a:0,s&&(t|=Li),t}function Y0(t,s,a){var l=s.pendingProps,h=!1,m=(s.flags&128)!==0,b;if((b=m)||(b=t!==null&&t.memoizedState===null?!1:(hn.current&2)!==0),b&&(h=!0,s.flags&=-129),b=(s.flags&32)!==0,s.flags&=-33,t===null){if(yt){if(h?Hr(s):qr(),yt){var E=Zt,P;if(P=E){e:{for(P=E,E=As;P.nodeType!==8;){if(!E){E=null;break e}if(P=Ji(P.nextSibling),P===null){E=null;break e}}E=P}E!==null?(s.memoizedState={dehydrated:E,treeContext:Wa!==null?{id:nr,overflow:ir}:null,retryLane:536870912,hydrationErrors:null},P=ui(18,null,null,0),P.stateNode=E,P.return=s,s.child=P,Xn=s,Zt=null,P=!0):P=!1}P||Ka(s)}if(E=s.memoizedState,E!==null&&(E=E.dehydrated,E!==null))return em(E)?s.lanes=32:s.lanes=536870912,null;or(s)}return E=l.children,l=l.fallback,h?(qr(),h=s.mode,E=Lu({mode:"hidden",children:E},h),l=Ga(l,h,a,null),E.return=s,l.return=s,E.sibling=l,s.child=E,h=s.child,h.memoizedState=gf(a),h.childLanes=yf(t,b,a),s.memoizedState=pf,l):(Hr(s),vf(s,E))}if(P=t.memoizedState,P!==null&&(E=P.dehydrated,E!==null)){if(m)s.flags&256?(Hr(s),s.flags&=-257,s=xf(t,s,a)):s.memoizedState!==null?(qr(),s.child=t.child,s.flags|=128,s=null):(qr(),h=l.fallback,E=s.mode,l=Lu({mode:"visible",children:l.children},E),h=Ga(h,E,a,null),h.flags|=2,l.return=s,h.return=s,l.sibling=h,s.child=l,Xo(s,t.child,null,a),l=s.child,l.memoizedState=gf(a),l.childLanes=yf(t,b,a),s.memoizedState=pf,s=h);else if(Hr(s),em(E)){if(b=E.nextSibling&&E.nextSibling.dataset,b)var J=b.dgst;b=J,l=Error(r(419)),l.stack="",l.digest=b,Ll({value:l,source:null,stack:null}),s=xf(t,s,a)}else if(xn||Vl(t,s,a,!1),b=(a&t.childLanes)!==0,xn||b){if(b=jt,b!==null&&(l=a&-a,l=(l&42)!==0?1:ai(l),l=(l&(b.suspendedLanes|a))!==0?0:l,l!==0&&l!==P.retryLane))throw P.retryLane=l,Lo(t,l),pi(b,t,l),z0;E.data==="$?"||Vf(),s=xf(t,s,a)}else E.data==="$?"?(s.flags|=192,s.child=t.child,s=null):(t=P.treeContext,Zt=Ji(E.nextSibling),Xn=s,yt=!0,Za=null,As=!1,t!==null&&(Di[Oi++]=nr,Di[Oi++]=ir,Di[Oi++]=Wa,nr=t.id,ir=t.overflow,Wa=s),s=vf(s,l.children),s.flags|=4096);return s}return h?(qr(),h=l.fallback,E=s.mode,P=t.child,J=P.sibling,l=tr(P,{mode:"hidden",children:l.children}),l.subtreeFlags=P.subtreeFlags&65011712,J!==null?h=tr(J,h):(h=Ga(h,E,a,null),h.flags|=2),h.return=s,l.return=s,l.sibling=h,s.child=l,l=h,h=s.child,E=t.child.memoizedState,E===null?E=gf(a):(P=E.cachePool,P!==null?(J=dn._currentValue,P=P.parent!==J?{parent:J,pool:J}:P):P=Lg(),E={baseLanes:E.baseLanes|a,cachePool:P}),h.memoizedState=E,h.childLanes=yf(t,b,a),s.memoizedState=pf,l):(Hr(s),a=t.child,t=a.sibling,a=tr(a,{mode:"visible",children:l.children}),a.return=s,a.sibling=null,t!==null&&(b=s.deletions,b===null?(s.deletions=[t],s.flags|=16):b.push(t)),s.child=a,s.memoizedState=null,a)}function vf(t,s){return s=Lu({mode:"visible",children:s},t.mode),s.return=t,t.child=s}function Lu(t,s){return t=ui(22,t,null,s),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function xf(t,s,a){return Xo(s,t.child,null,a),t=vf(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function Q0(t,s,a){t.lanes|=s;var l=t.alternate;l!==null&&(l.lanes|=s),Lh(t.return,s,a)}function bf(t,s,a,l,h){var m=t.memoizedState;m===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h}:(m.isBackwards=s,m.rendering=null,m.renderingStartTime=0,m.last=l,m.tail=a,m.tailMode=h)}function $0(t,s,a){var l=s.pendingProps,h=l.revealOrder,m=l.tail;if(Rn(t,s,l.children,a),l=hn.current,(l&2)!==0)l=l&1|2,s.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Q0(t,a,s);else if(t.tag===19)Q0(t,a,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch(K(hn,l),h){case"forwards":for(a=s.child,h=null;a!==null;)t=a.alternate,t!==null&&ju(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=s.child,s.child=null):(h=a.sibling,a.sibling=null),bf(s,!1,h,a,m);break;case"backwards":for(a=null,h=s.child,s.child=null;h!==null;){if(t=h.alternate,t!==null&&ju(t)===null){s.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}bf(s,!0,a,null,m);break;case"together":bf(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function lr(t,s,a){if(t!==null&&(s.dependencies=t.dependencies),Kr|=s.lanes,(a&s.childLanes)===0)if(t!==null){if(Vl(t,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(t!==null&&s.child!==t.child)throw Error(r(153));if(s.child!==null){for(t=s.child,a=tr(t,t.pendingProps),s.child=a,a.return=s;t.sibling!==null;)t=t.sibling,a=a.sibling=tr(t,t.pendingProps),a.return=s;a.sibling=null}return s.child}function _f(t,s){return(t.lanes&s)!==0?!0:(t=t.dependencies,!!(t!==null&&gu(t)))}function iw(t,s,a){switch(s.tag){case 3:vt(s,s.stateNode.containerInfo),Pr(s,dn,t.memoizedState.cache),Ml();break;case 27:case 5:qn(s);break;case 4:vt(s,s.stateNode.containerInfo);break;case 10:Pr(s,s.type,s.memoizedProps.value);break;case 13:var l=s.memoizedState;if(l!==null)return l.dehydrated!==null?(Hr(s),s.flags|=128,null):(a&s.child.childLanes)!==0?Y0(t,s,a):(Hr(s),t=lr(t,s,a),t!==null?t.sibling:null);Hr(s);break;case 19:var h=(t.flags&128)!==0;if(l=(a&s.childLanes)!==0,l||(Vl(t,s,a,!1),l=(a&s.childLanes)!==0),h){if(l)return $0(t,s,a);s.flags|=128}if(h=s.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),K(hn,hn.current),l)break;return null;case 22:case 23:return s.lanes=0,G0(t,s,a);case 24:Pr(s,dn,t.memoizedState.cache)}return lr(t,s,a)}function J0(t,s,a){if(t!==null)if(t.memoizedProps!==s.pendingProps)xn=!0;else{if(!_f(t,a)&&(s.flags&128)===0)return xn=!1,iw(t,s,a);xn=(t.flags&131072)!==0}else xn=!1,yt&&(s.flags&1048576)!==0&&Ig(s,pu,s.index);switch(s.lanes=0,s.tag){case 16:e:{t=s.pendingProps;var l=s.elementType,h=l._init;if(l=h(l._payload),s.type=l,typeof l=="function")Ih(l)?(t=eo(l,t),s.tag=1,s=Z0(null,s,l,t,a)):(s.tag=0,s=mf(null,s,l,t,a));else{if(l!=null){if(h=l.$$typeof,h===pe){s.tag=11,s=F0(null,s,l,t,a);break e}else if(h===V){s.tag=14,s=H0(null,s,l,t,a);break e}}throw s=qe(l)||l,Error(r(306,s,""))}}return s;case 0:return mf(t,s,s.type,s.pendingProps,a);case 1:return l=s.type,h=eo(l,s.pendingProps),Z0(t,s,l,h,a);case 3:e:{if(vt(s,s.stateNode.containerInfo),t===null)throw Error(r(387));l=s.pendingProps;var m=s.memoizedState;h=m.element,Hh(t,s),ql(s,l,null,a);var b=s.memoizedState;if(l=b.cache,Pr(s,dn,l),l!==m.cache&&Vh(s,[dn],a,!0),Hl(),l=b.element,m.isDehydrated)if(m={element:l,isDehydrated:!1,cache:b.cache},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){s=K0(t,s,l,a);break e}else if(l!==h){h=Ni(Error(r(424)),s),Ll(h),s=K0(t,s,l,a);break e}else{switch(t=s.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Zt=Ji(t.firstChild),Xn=s,yt=!0,Za=null,As=!0,a=N0(s,null,l,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Ml(),l===h){s=lr(t,s,a);break e}Rn(t,s,l,a)}s=s.child}return s;case 26:return Mu(t,s),t===null?(a=iv(s.type,null,s.pendingProps,null))?s.memoizedState=a:yt||(a=s.type,t=s.pendingProps,l=Yu(Re.current).createElement(a),l[nn]=s,l[Wt]=t,In(l,a,t),Mt(l),s.stateNode=l):s.memoizedState=iv(s.type,t.memoizedProps,s.pendingProps,t.memoizedState),null;case 27:return qn(s),t===null&&yt&&(l=s.stateNode=ev(s.type,s.pendingProps,Re.current),Xn=s,As=!0,h=Zt,Jr(s.type)?(tm=h,Zt=Ji(l.firstChild)):Zt=h),Rn(t,s,s.pendingProps.children,a),Mu(t,s),t===null&&(s.flags|=4194304),s.child;case 5:return t===null&&yt&&((h=l=Zt)&&(l=Nw(l,s.type,s.pendingProps,As),l!==null?(s.stateNode=l,Xn=s,Zt=Ji(l.firstChild),As=!1,h=!0):h=!1),h||Ka(s)),qn(s),h=s.type,m=s.pendingProps,b=t!==null?t.memoizedProps:null,l=m.children,Qf(h,m)?l=null:b!==null&&Qf(h,b)&&(s.flags|=32),s.memoizedState!==null&&(h=Kh(t,s,K_,null,null,a),hc._currentValue=h),Mu(t,s),Rn(t,s,l,a),s.child;case 6:return t===null&&yt&&((t=a=Zt)&&(a=jw(a,s.pendingProps,As),a!==null?(s.stateNode=a,Xn=s,Zt=null,t=!0):t=!1),t||Ka(s)),null;case 13:return Y0(t,s,a);case 4:return vt(s,s.stateNode.containerInfo),l=s.pendingProps,t===null?s.child=Xo(s,null,l,a):Rn(t,s,l,a),s.child;case 11:return F0(t,s,s.type,s.pendingProps,a);case 7:return Rn(t,s,s.pendingProps,a),s.child;case 8:return Rn(t,s,s.pendingProps.children,a),s.child;case 12:return Rn(t,s,s.pendingProps.children,a),s.child;case 10:return l=s.pendingProps,Pr(s,s.type,l.value),Rn(t,s,l.children,a),s.child;case 9:return h=s.type._context,l=s.pendingProps.children,Qa(s),h=Vn(h),l=l(h),s.flags|=1,Rn(t,s,l,a),s.child;case 14:return H0(t,s,s.type,s.pendingProps,a);case 15:return q0(t,s,s.type,s.pendingProps,a);case 19:return $0(t,s,a);case 31:return l=s.pendingProps,a=s.mode,l={mode:l.mode,children:l.children},t===null?(a=Lu(l,a),a.ref=s.ref,s.child=a,a.return=s,s=a):(a=tr(t.child,l),a.ref=s.ref,s.child=a,a.return=s,s=a),s;case 22:return G0(t,s,a);case 24:return Qa(s),l=Vn(dn),t===null?(h=Bh(),h===null&&(h=jt,m=Ph(),h.pooledCache=m,m.refCount++,m!==null&&(h.pooledCacheLanes|=a),h=m),s.memoizedState={parent:l,cache:h},Fh(s),Pr(s,dn,h)):((t.lanes&a)!==0&&(Hh(t,s),ql(s,null,null,a),Hl()),h=t.memoizedState,m=s.memoizedState,h.parent!==l?(h={parent:l,cache:l},s.memoizedState=h,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=h),Pr(s,dn,l)):(l=m.cache,Pr(s,dn,l),l!==h.cache&&Vh(s,[dn],a,!0))),Rn(t,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function cr(t){t.flags|=4}function ey(t,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!lv(s)){if(s=Mi.current,s!==null&&((dt&4194048)===dt?Ts!==null:(dt&62914560)!==dt&&(dt&536870912)===0||s!==Ts))throw zl=zh,Vg;t.flags|=8192}}function Vu(t,s){s!==null&&(t.flags|=4),t.flags&16384&&(s=t.tag!==22?Hs():536870912,t.lanes|=s,Qo|=s)}function Ql(t,s){if(!yt)switch(t.tailMode){case"hidden":s=t.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function zt(t){var s=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(s)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,s}function sw(t,s,a){var l=s.pendingProps;switch(Dh(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zt(s),null;case 1:return zt(s),null;case 3:return a=s.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),rr(dn),Hn(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Ol(s)?cr(s):t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,jg())),zt(s),null;case 26:return a=s.memoizedState,t===null?(cr(s),a!==null?(zt(s),ey(s,a)):(zt(s),s.flags&=-16777217)):a?a!==t.memoizedState?(cr(s),zt(s),ey(s,a)):(zt(s),s.flags&=-16777217):(t.memoizedProps!==l&&cr(s),zt(s),s.flags&=-16777217),null;case 27:pn(s),a=Re.current;var h=s.type;if(t!==null&&s.stateNode!=null)t.memoizedProps!==l&&cr(s);else{if(!l){if(s.stateNode===null)throw Error(r(166));return zt(s),null}t=be.current,Ol(s)?kg(s):(t=ev(h,l,a),s.stateNode=t,cr(s))}return zt(s),null;case 5:if(pn(s),a=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==l&&cr(s);else{if(!l){if(s.stateNode===null)throw Error(r(166));return zt(s),null}if(t=be.current,Ol(s))kg(s);else{switch(h=Yu(Re.current),t){case 1:t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=h.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?h.createElement("select",{is:l.is}):h.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?h.createElement(a,{is:l.is}):h.createElement(a)}}t[nn]=s,t[Wt]=l;e:for(h=s.child;h!==null;){if(h.tag===5||h.tag===6)t.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===s)break e;for(;h.sibling===null;){if(h.return===null||h.return===s)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}s.stateNode=t;e:switch(In(t,a,l),a){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&cr(s)}}return zt(s),s.flags&=-16777217,null;case 6:if(t&&s.stateNode!=null)t.memoizedProps!==l&&cr(s);else{if(typeof l!="string"&&s.stateNode===null)throw Error(r(166));if(t=Re.current,Ol(s)){if(t=s.stateNode,a=s.memoizedProps,l=null,h=Xn,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[nn]=s,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Xy(t.nodeValue,a)),t||Ka(s)}else t=Yu(t).createTextNode(l),t[nn]=s,s.stateNode=t}return zt(s),null;case 13:if(l=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=Ol(s),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(r(318));if(h=s.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));h[nn]=s}else Ml(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;zt(s),h=!1}else h=jg(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return s.flags&256?(or(s),s):(or(s),null)}if(or(s),(s.flags&128)!==0)return s.lanes=a,s;if(a=l!==null,t=t!==null&&t.memoizedState!==null,a){l=s.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool);var m=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==h&&(l.flags|=2048)}return a!==t&&a&&(s.child.flags|=8192),Vu(s,s.updateQueue),zt(s),null;case 4:return Hn(),t===null&&Wf(s.stateNode.containerInfo),zt(s),null;case 10:return rr(s.type),zt(s),null;case 19:if(oe(hn),h=s.memoizedState,h===null)return zt(s),null;if(l=(s.flags&128)!==0,m=h.rendering,m===null)if(l)Ql(h,!1);else{if(Kt!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(m=ju(t),m!==null){for(s.flags|=128,Ql(h,!1),t=m.updateQueue,s.updateQueue=t,Vu(s,t),s.subtreeFlags=0,t=a,a=s.child;a!==null;)Cg(a,t),a=a.sibling;return K(hn,hn.current&1|2),s.child}t=t.sibling}h.tail!==null&&Ce()>Bu&&(s.flags|=128,l=!0,Ql(h,!1),s.lanes=4194304)}else{if(!l)if(t=ju(m),t!==null){if(s.flags|=128,l=!0,t=t.updateQueue,s.updateQueue=t,Vu(s,t),Ql(h,!0),h.tail===null&&h.tailMode==="hidden"&&!m.alternate&&!yt)return zt(s),null}else 2*Ce()-h.renderingStartTime>Bu&&a!==536870912&&(s.flags|=128,l=!0,Ql(h,!1),s.lanes=4194304);h.isBackwards?(m.sibling=s.child,s.child=m):(t=h.last,t!==null?t.sibling=m:s.child=m,h.last=m)}return h.tail!==null?(s=h.tail,h.rendering=s,h.tail=s.sibling,h.renderingStartTime=Ce(),s.sibling=null,t=hn.current,K(hn,l?t&1|2:t&1),s):(zt(s),null);case 22:case 23:return or(s),Xh(),l=s.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(s.flags|=8192):l&&(s.flags|=8192),l?(a&536870912)!==0&&(s.flags&128)===0&&(zt(s),s.subtreeFlags&6&&(s.flags|=8192)):zt(s),a=s.updateQueue,a!==null&&Vu(s,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),l!==a&&(s.flags|=2048),t!==null&&oe($a),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),rr(dn),zt(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function rw(t,s){switch(Dh(s),s.tag){case 1:return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return rr(dn),Hn(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 26:case 27:case 5:return pn(s),null;case 13:if(or(s),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(r(340));Ml()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return oe(hn),null;case 4:return Hn(),null;case 10:return rr(s.type),null;case 22:case 23:return or(s),Xh(),t!==null&&oe($a),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 24:return rr(dn),null;case 25:return null;default:return null}}function ty(t,s){switch(Dh(s),s.tag){case 3:rr(dn),Hn();break;case 26:case 27:case 5:pn(s);break;case 4:Hn();break;case 13:or(s);break;case 19:oe(hn);break;case 10:rr(s.type);break;case 22:case 23:or(s),Xh(),t!==null&&oe($a);break;case 24:rr(dn)}}function $l(t,s){try{var a=s.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var m=a.create,b=a.inst;l=m(),b.destroy=l}a=a.next}while(a!==h)}}catch(E){Nt(s,s.return,E)}}function Gr(t,s,a){try{var l=s.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var m=h.next;l=m;do{if((l.tag&t)===t){var b=l.inst,E=b.destroy;if(E!==void 0){b.destroy=void 0,h=s;var P=a,J=E;try{J()}catch(le){Nt(h,P,le)}}}l=l.next}while(l!==m)}}catch(le){Nt(s,s.return,le)}}function ny(t){var s=t.updateQueue;if(s!==null){var a=t.stateNode;try{Hg(s,a)}catch(l){Nt(t,t.return,l)}}}function iy(t,s,a){a.props=eo(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){Nt(t,s,l)}}function Jl(t,s){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(h){Nt(t,s,h)}}function Rs(t,s){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){Nt(t,s,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){Nt(t,s,h)}else a.current=null}function sy(t){var s=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){Nt(t,t.return,h)}}function wf(t,s,a){try{var l=t.stateNode;Tw(l,t.type,a,s),l[Wt]=s}catch(h){Nt(t,t.return,h)}}function ry(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Jr(t.type)||t.tag===4}function Sf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ry(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Jr(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ef(t,s,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(t),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Ku));else if(l!==4&&(l===27&&Jr(t.type)&&(a=t.stateNode,s=null),t=t.child,t!==null))for(Ef(t,s,a),t=t.sibling;t!==null;)Ef(t,s,a),t=t.sibling}function Pu(t,s,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,s?a.insertBefore(t,s):a.appendChild(t);else if(l!==4&&(l===27&&Jr(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Pu(t,s,a),t=t.sibling;t!==null;)Pu(t,s,a),t=t.sibling}function ay(t){var s=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,h=s.attributes;h.length;)s.removeAttributeNode(h[0]);In(s,l,a),s[nn]=t,s[Wt]=a}catch(m){Nt(t,t.return,m)}}var ur=!1,en=!1,Af=!1,oy=typeof WeakSet=="function"?WeakSet:Set,bn=null;function aw(t,s){if(t=t.containerInfo,Kf=nd,t=vg(t),wh(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,m=l.focusNode;l=l.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var b=0,E=-1,P=-1,J=0,le=0,he=t,te=null;t:for(;;){for(var se;he!==a||h!==0&&he.nodeType!==3||(E=b+h),he!==m||l!==0&&he.nodeType!==3||(P=b+l),he.nodeType===3&&(b+=he.nodeValue.length),(se=he.firstChild)!==null;)te=he,he=se;for(;;){if(he===t)break t;if(te===a&&++J===h&&(E=b),te===m&&++le===l&&(P=b),(se=he.nextSibling)!==null)break;he=te,te=he.parentNode}he=se}a=E===-1||P===-1?null:{start:E,end:P}}else a=null}a=a||{start:0,end:0}}else a=null;for(Yf={focusedElem:t,selectionRange:a},nd=!1,bn=s;bn!==null;)if(s=bn,t=s.child,(s.subtreeFlags&1024)!==0&&t!==null)t.return=s,bn=t;else for(;bn!==null;){switch(s=bn,m=s.alternate,t=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,a=s,h=m.memoizedProps,m=m.memoizedState,l=a.stateNode;try{var Fe=eo(a.type,h,a.elementType===a.type);t=l.getSnapshotBeforeUpdate(Fe,m),l.__reactInternalSnapshotBeforeUpdate=t}catch(Le){Nt(a,a.return,Le)}}break;case 3:if((t&1024)!==0){if(t=s.stateNode.containerInfo,a=t.nodeType,a===9)Jf(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Jf(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(r(163))}if(t=s.sibling,t!==null){t.return=s.return,bn=t;break}bn=s.return}}function ly(t,s,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Wr(t,a),l&4&&$l(5,a);break;case 1:if(Wr(t,a),l&4)if(t=a.stateNode,s===null)try{t.componentDidMount()}catch(b){Nt(a,a.return,b)}else{var h=eo(a.type,s.memoizedProps);s=s.memoizedState;try{t.componentDidUpdate(h,s,t.__reactInternalSnapshotBeforeUpdate)}catch(b){Nt(a,a.return,b)}}l&64&&ny(a),l&512&&Jl(a,a.return);break;case 3:if(Wr(t,a),l&64&&(t=a.updateQueue,t!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{Hg(t,s)}catch(b){Nt(a,a.return,b)}}break;case 27:s===null&&l&4&&ay(a);case 26:case 5:Wr(t,a),s===null&&l&4&&sy(a),l&512&&Jl(a,a.return);break;case 12:Wr(t,a);break;case 13:Wr(t,a),l&4&&dy(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=pw.bind(null,a),Dw(t,a))));break;case 22:if(l=a.memoizedState!==null||ur,!l){s=s!==null&&s.memoizedState!==null||en,h=ur;var m=en;ur=l,(en=s)&&!m?Xr(t,a,(a.subtreeFlags&8772)!==0):Wr(t,a),ur=h,en=m}break;case 30:break;default:Wr(t,a)}}function cy(t){var s=t.alternate;s!==null&&(t.alternate=null,cy(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&Wi(s)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Lt=null,ni=!1;function dr(t,s,a){for(a=a.child;a!==null;)uy(t,s,a),a=a.sibling}function uy(t,s,a){if($e&&typeof $e.onCommitFiberUnmount=="function")try{$e.onCommitFiberUnmount(Et,a)}catch{}switch(a.tag){case 26:en||Rs(a,s),dr(t,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:en||Rs(a,s);var l=Lt,h=ni;Jr(a.type)&&(Lt=a.stateNode,ni=!1),dr(t,s,a),lc(a.stateNode),Lt=l,ni=h;break;case 5:en||Rs(a,s);case 6:if(l=Lt,h=ni,Lt=null,dr(t,s,a),Lt=l,ni=h,Lt!==null)if(ni)try{(Lt.nodeType===9?Lt.body:Lt.nodeName==="HTML"?Lt.ownerDocument.body:Lt).removeChild(a.stateNode)}catch(m){Nt(a,s,m)}else try{Lt.removeChild(a.stateNode)}catch(m){Nt(a,s,m)}break;case 18:Lt!==null&&(ni?(t=Lt,$y(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),gc(t)):$y(Lt,a.stateNode));break;case 4:l=Lt,h=ni,Lt=a.stateNode.containerInfo,ni=!0,dr(t,s,a),Lt=l,ni=h;break;case 0:case 11:case 14:case 15:en||Gr(2,a,s),en||Gr(4,a,s),dr(t,s,a);break;case 1:en||(Rs(a,s),l=a.stateNode,typeof l.componentWillUnmount=="function"&&iy(a,s,l)),dr(t,s,a);break;case 21:dr(t,s,a);break;case 22:en=(l=en)||a.memoizedState!==null,dr(t,s,a),en=l;break;default:dr(t,s,a)}}function dy(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{gc(t)}catch(a){Nt(s,s.return,a)}}function ow(t){switch(t.tag){case 13:case 19:var s=t.stateNode;return s===null&&(s=t.stateNode=new oy),s;case 22:return t=t.stateNode,s=t._retryCache,s===null&&(s=t._retryCache=new oy),s;default:throw Error(r(435,t.tag))}}function Tf(t,s){var a=ow(t);s.forEach(function(l){var h=gw.bind(null,t,l);a.has(l)||(a.add(l),l.then(h,h))})}function di(t,s){var a=s.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],m=t,b=s,E=b;e:for(;E!==null;){switch(E.tag){case 27:if(Jr(E.type)){Lt=E.stateNode,ni=!1;break e}break;case 5:Lt=E.stateNode,ni=!1;break e;case 3:case 4:Lt=E.stateNode.containerInfo,ni=!0;break e}E=E.return}if(Lt===null)throw Error(r(160));uy(m,b,h),Lt=null,ni=!1,m=h.alternate,m!==null&&(m.return=null),h.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)hy(s,t),s=s.sibling}var $i=null;function hy(t,s){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:di(s,t),hi(t),l&4&&(Gr(3,t,t.return),$l(3,t),Gr(5,t,t.return));break;case 1:di(s,t),hi(t),l&512&&(en||a===null||Rs(a,a.return)),l&64&&ur&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=$i;if(di(s,t),hi(t),l&512&&(en||a===null||Rs(a,a.return)),l&4){var m=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":m=h.getElementsByTagName("title")[0],(!m||m[bi]||m[nn]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=h.createElement(l),h.head.insertBefore(m,h.querySelector("head > title"))),In(m,l,a),m[nn]=t,Mt(m),l=m;break e;case"link":var b=av("link","href",h).get(l+(a.href||""));if(b){for(var E=0;E<b.length;E++)if(m=b[E],m.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){b.splice(E,1);break t}}m=h.createElement(l),In(m,l,a),h.head.appendChild(m);break;case"meta":if(b=av("meta","content",h).get(l+(a.content||""))){for(E=0;E<b.length;E++)if(m=b[E],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){b.splice(E,1);break t}}m=h.createElement(l),In(m,l,a),h.head.appendChild(m);break;default:throw Error(r(468,l))}m[nn]=t,Mt(m),l=m}t.stateNode=l}else ov(h,t.type,t.stateNode);else t.stateNode=rv(h,l,t.memoizedProps);else m!==l?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,l===null?ov(h,t.type,t.stateNode):rv(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&wf(t,t.memoizedProps,a.memoizedProps)}break;case 27:di(s,t),hi(t),l&512&&(en||a===null||Rs(a,a.return)),a!==null&&l&4&&wf(t,t.memoizedProps,a.memoizedProps);break;case 5:if(di(s,t),hi(t),l&512&&(en||a===null||Rs(a,a.return)),t.flags&32){h=t.stateNode;try{He(h,"")}catch(se){Nt(t,t.return,se)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,wf(t,h,a!==null?a.memoizedProps:h)),l&1024&&(Af=!0);break;case 6:if(di(s,t),hi(t),l&4){if(t.stateNode===null)throw Error(r(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(se){Nt(t,t.return,se)}}break;case 3:if(Ju=null,h=$i,$i=Qu(s.containerInfo),di(s,t),$i=h,hi(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{gc(s.containerInfo)}catch(se){Nt(t,t.return,se)}Af&&(Af=!1,fy(t));break;case 4:l=$i,$i=Qu(t.stateNode.containerInfo),di(s,t),hi(t),$i=l;break;case 12:di(s,t),hi(t);break;case 13:di(s,t),hi(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(jf=Ce()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Tf(t,l)));break;case 22:h=t.memoizedState!==null;var P=a!==null&&a.memoizedState!==null,J=ur,le=en;if(ur=J||h,en=le||P,di(s,t),en=le,ur=J,hi(t),l&8192)e:for(s=t.stateNode,s._visibility=h?s._visibility&-2:s._visibility|1,h&&(a===null||P||ur||en||to(t)),a=null,s=t;;){if(s.tag===5||s.tag===26){if(a===null){P=a=s;try{if(m=P.stateNode,h)b=m.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{E=P.stateNode;var he=P.memoizedProps.style,te=he!=null&&he.hasOwnProperty("display")?he.display:null;E.style.display=te==null||typeof te=="boolean"?"":(""+te).trim()}}catch(se){Nt(P,P.return,se)}}}else if(s.tag===6){if(a===null){P=s;try{P.stateNode.nodeValue=h?"":P.memoizedProps}catch(se){Nt(P,P.return,se)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===t)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Tf(t,a))));break;case 19:di(s,t),hi(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Tf(t,l)));break;case 30:break;case 21:break;default:di(s,t),hi(t)}}function hi(t){var s=t.flags;if(s&2){try{for(var a,l=t.return;l!==null;){if(ry(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var h=a.stateNode,m=Sf(t);Pu(t,m,h);break;case 5:var b=a.stateNode;a.flags&32&&(He(b,""),a.flags&=-33);var E=Sf(t);Pu(t,E,b);break;case 3:case 4:var P=a.stateNode.containerInfo,J=Sf(t);Ef(t,J,P);break;default:throw Error(r(161))}}catch(le){Nt(t,t.return,le)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function fy(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var s=t;fy(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),t=t.sibling}}function Wr(t,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)ly(t,s.alternate,s),s=s.sibling}function to(t){for(t=t.child;t!==null;){var s=t;switch(s.tag){case 0:case 11:case 14:case 15:Gr(4,s,s.return),to(s);break;case 1:Rs(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&iy(s,s.return,a),to(s);break;case 27:lc(s.stateNode);case 26:case 5:Rs(s,s.return),to(s);break;case 22:s.memoizedState===null&&to(s);break;case 30:to(s);break;default:to(s)}t=t.sibling}}function Xr(t,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var l=s.alternate,h=t,m=s,b=m.flags;switch(m.tag){case 0:case 11:case 15:Xr(h,m,a),$l(4,m);break;case 1:if(Xr(h,m,a),l=m,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(J){Nt(l,l.return,J)}if(l=m,h=l.updateQueue,h!==null){var E=l.stateNode;try{var P=h.shared.hiddenCallbacks;if(P!==null)for(h.shared.hiddenCallbacks=null,h=0;h<P.length;h++)Fg(P[h],E)}catch(J){Nt(l,l.return,J)}}a&&b&64&&ny(m),Jl(m,m.return);break;case 27:ay(m);case 26:case 5:Xr(h,m,a),a&&l===null&&b&4&&sy(m),Jl(m,m.return);break;case 12:Xr(h,m,a);break;case 13:Xr(h,m,a),a&&b&4&&dy(h,m);break;case 22:m.memoizedState===null&&Xr(h,m,a),Jl(m,m.return);break;case 30:break;default:Xr(h,m,a)}s=s.sibling}}function Rf(t,s){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(t=s.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&Pl(a))}function Cf(t,s){t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&Pl(t))}function Cs(t,s,a,l){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)my(t,s,a,l),s=s.sibling}function my(t,s,a,l){var h=s.flags;switch(s.tag){case 0:case 11:case 15:Cs(t,s,a,l),h&2048&&$l(9,s);break;case 1:Cs(t,s,a,l);break;case 3:Cs(t,s,a,l),h&2048&&(t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&Pl(t)));break;case 12:if(h&2048){Cs(t,s,a,l),t=s.stateNode;try{var m=s.memoizedProps,b=m.id,E=m.onPostCommit;typeof E=="function"&&E(b,s.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(P){Nt(s,s.return,P)}}else Cs(t,s,a,l);break;case 13:Cs(t,s,a,l);break;case 23:break;case 22:m=s.stateNode,b=s.alternate,s.memoizedState!==null?m._visibility&2?Cs(t,s,a,l):ec(t,s):m._visibility&2?Cs(t,s,a,l):(m._visibility|=2,Zo(t,s,a,l,(s.subtreeFlags&10256)!==0)),h&2048&&Rf(b,s);break;case 24:Cs(t,s,a,l),h&2048&&Cf(s.alternate,s);break;default:Cs(t,s,a,l)}}function Zo(t,s,a,l,h){for(h=h&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var m=t,b=s,E=a,P=l,J=b.flags;switch(b.tag){case 0:case 11:case 15:Zo(m,b,E,P,h),$l(8,b);break;case 23:break;case 22:var le=b.stateNode;b.memoizedState!==null?le._visibility&2?Zo(m,b,E,P,h):ec(m,b):(le._visibility|=2,Zo(m,b,E,P,h)),h&&J&2048&&Rf(b.alternate,b);break;case 24:Zo(m,b,E,P,h),h&&J&2048&&Cf(b.alternate,b);break;default:Zo(m,b,E,P,h)}s=s.sibling}}function ec(t,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=t,l=s,h=l.flags;switch(l.tag){case 22:ec(a,l),h&2048&&Rf(l.alternate,l);break;case 24:ec(a,l),h&2048&&Cf(l.alternate,l);break;default:ec(a,l)}s=s.sibling}}var tc=8192;function Ko(t){if(t.subtreeFlags&tc)for(t=t.child;t!==null;)py(t),t=t.sibling}function py(t){switch(t.tag){case 26:Ko(t),t.flags&tc&&t.memoizedState!==null&&Ww($i,t.memoizedState,t.memoizedProps);break;case 5:Ko(t);break;case 3:case 4:var s=$i;$i=Qu(t.stateNode.containerInfo),Ko(t),$i=s;break;case 22:t.memoizedState===null&&(s=t.alternate,s!==null&&s.memoizedState!==null?(s=tc,tc=16777216,Ko(t),tc=s):Ko(t));break;default:Ko(t)}}function gy(t){var s=t.alternate;if(s!==null&&(t=s.child,t!==null)){s.child=null;do s=t.sibling,t.sibling=null,t=s;while(t!==null)}}function nc(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];bn=l,vy(l,t)}gy(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)yy(t),t=t.sibling}function yy(t){switch(t.tag){case 0:case 11:case 15:nc(t),t.flags&2048&&Gr(9,t,t.return);break;case 3:nc(t);break;case 12:nc(t);break;case 22:var s=t.stateNode;t.memoizedState!==null&&s._visibility&2&&(t.return===null||t.return.tag!==13)?(s._visibility&=-3,Uu(t)):nc(t);break;default:nc(t)}}function Uu(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];bn=l,vy(l,t)}gy(t)}for(t=t.child;t!==null;){switch(s=t,s.tag){case 0:case 11:case 15:Gr(8,s,s.return),Uu(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,Uu(s));break;default:Uu(s)}t=t.sibling}}function vy(t,s){for(;bn!==null;){var a=bn;switch(a.tag){case 0:case 11:case 15:Gr(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Pl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,bn=l;else e:for(a=t;bn!==null;){l=bn;var h=l.sibling,m=l.return;if(cy(l),l===a){bn=null;break e}if(h!==null){h.return=m,bn=h;break e}bn=m}}}var lw={getCacheForType:function(t){var s=Vn(dn),a=s.data.get(t);return a===void 0&&(a=t(),s.data.set(t,a)),a}},cw=typeof WeakMap=="function"?WeakMap:Map,wt=0,jt=null,rt=null,dt=0,St=0,fi=null,Zr=!1,Yo=!1,If=!1,hr=0,Kt=0,Kr=0,no=0,kf=0,Li=0,Qo=0,ic=null,ii=null,Nf=!1,jf=0,Bu=1/0,zu=null,Yr=null,Cn=0,Qr=null,$o=null,Jo=0,Df=0,Of=null,xy=null,sc=0,Mf=null;function mi(){if((wt&2)!==0&&dt!==0)return dt&-dt;if(ae.T!==null){var t=Bo;return t!==0?t:Ff()}return cs()}function by(){Li===0&&(Li=(dt&536870912)===0||yt?Ca():536870912);var t=Mi.current;return t!==null&&(t.flags|=32),Li}function pi(t,s,a){(t===jt&&(St===2||St===9)||t.cancelPendingCommit!==null)&&(el(t,0),$r(t,dt,Li,!1)),Gi(t,a),((wt&2)===0||t!==jt)&&(t===jt&&((wt&2)===0&&(no|=a),Kt===4&&$r(t,dt,Li,!1)),Is(t))}function _y(t,s,a){if((wt&6)!==0)throw Error(r(327));var l=!a&&(s&124)===0&&(s&t.expiredLanes)===0||Hi(t,s),h=l?hw(t,s):Pf(t,s,!0),m=l;do{if(h===0){Yo&&!l&&$r(t,s,0,!1);break}else{if(a=t.current.alternate,m&&!uw(a)){h=Pf(t,s,!1),m=!1;continue}if(h===2){if(m=s,t.errorRecoveryDisabledLanes&m)var b=0;else b=t.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){s=b;e:{var E=t;h=ic;var P=E.current.memoizedState.isDehydrated;if(P&&(el(E,b).flags|=256),b=Pf(E,b,!1),b!==2){if(If&&!P){E.errorRecoveryDisabledLanes|=m,no|=m,h=4;break e}m=ii,ii=h,m!==null&&(ii===null?ii=m:ii.push.apply(ii,m))}h=b}if(m=!1,h!==2)continue}}if(h===1){el(t,0),$r(t,s,0,!0);break}e:{switch(l=t,m=h,m){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:$r(l,s,Li,!Zr);break e;case 2:ii=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(h=jf+300-Ce(),10<h)){if($r(l,s,Li,!Zr),Gn(l,0,!0)!==0)break e;l.timeoutHandle=Yy(wy.bind(null,l,a,ii,zu,Nf,s,Li,no,Qo,Zr,m,2,-0,0),h);break e}wy(l,a,ii,zu,Nf,s,Li,no,Qo,Zr,m,0,-0,0)}}break}while(!0);Is(t)}function wy(t,s,a,l,h,m,b,E,P,J,le,he,te,se){if(t.timeoutHandle=-1,he=s.subtreeFlags,(he&8192||(he&16785408)===16785408)&&(dc={stylesheets:null,count:0,unsuspend:Gw},py(s),he=Xw(),he!==null)){t.cancelPendingCommit=he(Iy.bind(null,t,s,m,a,l,h,b,E,P,le,1,te,se)),$r(t,m,b,!J);return}Iy(t,s,m,a,l,h,b,E,P)}function uw(t){for(var s=t;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],m=h.getSnapshot;h=h.value;try{if(!ci(m(),h))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function $r(t,s,a,l){s&=~kf,s&=~no,t.suspendedLanes|=s,t.pingedLanes&=~s,l&&(t.warmLanes|=s),l=t.expirationTimes;for(var h=s;0<h;){var m=31-Z(h),b=1<<m;l[m]=-1,h&=~b}a!==0&&Wn(t,a,s)}function Fu(){return(wt&6)===0?(rc(0),!1):!0}function Lf(){if(rt!==null){if(St===0)var t=rt.return;else t=rt,sr=Ya=null,$h(t),Wo=null,Kl=0,t=rt;for(;t!==null;)ty(t.alternate,t),t=t.return;rt=null}}function el(t,s){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,Cw(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Lf(),jt=t,rt=a=tr(t.current,null),dt=s,St=0,fi=null,Zr=!1,Yo=Hi(t,s),If=!1,Qo=Li=kf=no=Kr=Kt=0,ii=ic=null,Nf=!1,(s&8)!==0&&(s|=s&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=s;0<l;){var h=31-Z(l),m=1<<h;s|=t[h],l&=~m}return hr=s,uu(),a}function Sy(t,s){Je=null,ae.H=Iu,s===Bl||s===xu?(s=Bg(),St=3):s===Vg?(s=Bg(),St=4):St=s===z0?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,fi=s,rt===null&&(Kt=1,Ou(t,Ni(s,t.current)))}function Ey(){var t=ae.H;return ae.H=Iu,t===null?Iu:t}function Ay(){var t=ae.A;return ae.A=lw,t}function Vf(){Kt=4,Zr||(dt&4194048)!==dt&&Mi.current!==null||(Yo=!0),(Kr&134217727)===0&&(no&134217727)===0||jt===null||$r(jt,dt,Li,!1)}function Pf(t,s,a){var l=wt;wt|=2;var h=Ey(),m=Ay();(jt!==t||dt!==s)&&(zu=null,el(t,s)),s=!1;var b=Kt;e:do try{if(St!==0&&rt!==null){var E=rt,P=fi;switch(St){case 8:Lf(),b=6;break e;case 3:case 2:case 9:case 6:Mi.current===null&&(s=!0);var J=St;if(St=0,fi=null,tl(t,E,P,J),a&&Yo){b=0;break e}break;default:J=St,St=0,fi=null,tl(t,E,P,J)}}dw(),b=Kt;break}catch(le){Sy(t,le)}while(!0);return s&&t.shellSuspendCounter++,sr=Ya=null,wt=l,ae.H=h,ae.A=m,rt===null&&(jt=null,dt=0,uu()),b}function dw(){for(;rt!==null;)Ty(rt)}function hw(t,s){var a=wt;wt|=2;var l=Ey(),h=Ay();jt!==t||dt!==s?(zu=null,Bu=Ce()+500,el(t,s)):Yo=Hi(t,s);e:do try{if(St!==0&&rt!==null){s=rt;var m=fi;t:switch(St){case 1:St=0,fi=null,tl(t,s,m,1);break;case 2:case 9:if(Pg(m)){St=0,fi=null,Ry(s);break}s=function(){St!==2&&St!==9||jt!==t||(St=7),Is(t)},m.then(s,s);break e;case 3:St=7;break e;case 4:St=5;break e;case 7:Pg(m)?(St=0,fi=null,Ry(s)):(St=0,fi=null,tl(t,s,m,7));break;case 5:var b=null;switch(rt.tag){case 26:b=rt.memoizedState;case 5:case 27:var E=rt;if(!b||lv(b)){St=0,fi=null;var P=E.sibling;if(P!==null)rt=P;else{var J=E.return;J!==null?(rt=J,Hu(J)):rt=null}break t}}St=0,fi=null,tl(t,s,m,5);break;case 6:St=0,fi=null,tl(t,s,m,6);break;case 8:Lf(),Kt=6;break e;default:throw Error(r(462))}}fw();break}catch(le){Sy(t,le)}while(!0);return sr=Ya=null,ae.H=l,ae.A=h,wt=a,rt!==null?0:(jt=null,dt=0,uu(),Kt)}function fw(){for(;rt!==null&&!Ar();)Ty(rt)}function Ty(t){var s=J0(t.alternate,t,hr);t.memoizedProps=t.pendingProps,s===null?Hu(t):rt=s}function Ry(t){var s=t,a=s.alternate;switch(s.tag){case 15:case 0:s=X0(a,s,s.pendingProps,s.type,void 0,dt);break;case 11:s=X0(a,s,s.pendingProps,s.type.render,s.ref,dt);break;case 5:$h(s);default:ty(a,s),s=rt=Cg(s,hr),s=J0(a,s,hr)}t.memoizedProps=t.pendingProps,s===null?Hu(t):rt=s}function tl(t,s,a,l){sr=Ya=null,$h(s),Wo=null,Kl=0;var h=s.return;try{if(nw(t,h,s,a,dt)){Kt=1,Ou(t,Ni(a,t.current)),rt=null;return}}catch(m){if(h!==null)throw rt=h,m;Kt=1,Ou(t,Ni(a,t.current)),rt=null;return}s.flags&32768?(yt||l===1?t=!0:Yo||(dt&536870912)!==0?t=!1:(Zr=t=!0,(l===2||l===9||l===3||l===6)&&(l=Mi.current,l!==null&&l.tag===13&&(l.flags|=16384))),Cy(s,t)):Hu(s)}function Hu(t){var s=t;do{if((s.flags&32768)!==0){Cy(s,Zr);return}t=s.return;var a=sw(s.alternate,s,hr);if(a!==null){rt=a;return}if(s=s.sibling,s!==null){rt=s;return}rt=s=t}while(s!==null);Kt===0&&(Kt=5)}function Cy(t,s){do{var a=rw(t.alternate,t);if(a!==null){a.flags&=32767,rt=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(t=t.sibling,t!==null)){rt=t;return}rt=t=a}while(t!==null);Kt=6,rt=null}function Iy(t,s,a,l,h,m,b,E,P){t.cancelPendingCommit=null;do qu();while(Cn!==0);if((wt&6)!==0)throw Error(r(327));if(s!==null){if(s===t.current)throw Error(r(177));if(m=s.lanes|s.childLanes,m|=Rh,Ia(t,a,m,b,E,P),t===jt&&(rt=jt=null,dt=0),$o=s,Qr=t,Jo=a,Df=m,Of=h,xy=l,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,yw(it,function(){return Oy(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||l){l=ae.T,ae.T=null,h=me.p,me.p=2,b=wt,wt|=4;try{aw(t,s,a)}finally{wt=b,me.p=h,ae.T=l}}Cn=1,ky(),Ny(),jy()}}function ky(){if(Cn===1){Cn=0;var t=Qr,s=$o,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=ae.T,ae.T=null;var l=me.p;me.p=2;var h=wt;wt|=4;try{hy(s,t);var m=Yf,b=vg(t.containerInfo),E=m.focusedElem,P=m.selectionRange;if(b!==E&&E&&E.ownerDocument&&yg(E.ownerDocument.documentElement,E)){if(P!==null&&wh(E)){var J=P.start,le=P.end;if(le===void 0&&(le=J),"selectionStart"in E)E.selectionStart=J,E.selectionEnd=Math.min(le,E.value.length);else{var he=E.ownerDocument||document,te=he&&he.defaultView||window;if(te.getSelection){var se=te.getSelection(),Fe=E.textContent.length,Le=Math.min(P.start,Fe),Rt=P.end===void 0?Le:Math.min(P.end,Fe);!se.extend&&Le>Rt&&(b=Rt,Rt=Le,Le=b);var X=gg(E,Le),H=gg(E,Rt);if(X&&H&&(se.rangeCount!==1||se.anchorNode!==X.node||se.anchorOffset!==X.offset||se.focusNode!==H.node||se.focusOffset!==H.offset)){var Y=he.createRange();Y.setStart(X.node,X.offset),se.removeAllRanges(),Le>Rt?(se.addRange(Y),se.extend(H.node,H.offset)):(Y.setEnd(H.node,H.offset),se.addRange(Y))}}}}for(he=[],se=E;se=se.parentNode;)se.nodeType===1&&he.push({element:se,left:se.scrollLeft,top:se.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<he.length;E++){var ce=he[E];ce.element.scrollLeft=ce.left,ce.element.scrollTop=ce.top}}nd=!!Kf,Yf=Kf=null}finally{wt=h,me.p=l,ae.T=a}}t.current=s,Cn=2}}function Ny(){if(Cn===2){Cn=0;var t=Qr,s=$o,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=ae.T,ae.T=null;var l=me.p;me.p=2;var h=wt;wt|=4;try{ly(t,s.alternate,s)}finally{wt=h,me.p=l,ae.T=a}}Cn=3}}function jy(){if(Cn===4||Cn===3){Cn=0,Ta();var t=Qr,s=$o,a=Jo,l=xy;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Cn=5:(Cn=0,$o=Qr=null,Dy(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(Yr=null),ze(a),s=s.stateNode,$e&&typeof $e.onCommitFiberRoot=="function")try{$e.onCommitFiberRoot(Et,s,void 0,(s.current.flags&128)===128)}catch{}if(l!==null){s=ae.T,h=me.p,me.p=2,ae.T=null;try{for(var m=t.onRecoverableError,b=0;b<l.length;b++){var E=l[b];m(E.value,{componentStack:E.stack})}}finally{ae.T=s,me.p=h}}(Jo&3)!==0&&qu(),Is(t),h=t.pendingLanes,(a&4194090)!==0&&(h&42)!==0?t===Mf?sc++:(sc=0,Mf=t):sc=0,rc(0)}}function Dy(t,s){(t.pooledCacheLanes&=s)===0&&(s=t.pooledCache,s!=null&&(t.pooledCache=null,Pl(s)))}function qu(t){return ky(),Ny(),jy(),Oy()}function Oy(){if(Cn!==5)return!1;var t=Qr,s=Df;Df=0;var a=ze(Jo),l=ae.T,h=me.p;try{me.p=32>a?32:a,ae.T=null,a=Of,Of=null;var m=Qr,b=Jo;if(Cn=0,$o=Qr=null,Jo=0,(wt&6)!==0)throw Error(r(331));var E=wt;if(wt|=4,yy(m.current),my(m,m.current,b,a),wt=E,rc(0,!1),$e&&typeof $e.onPostCommitFiberRoot=="function")try{$e.onPostCommitFiberRoot(Et,m)}catch{}return!0}finally{me.p=h,ae.T=l,Dy(t,s)}}function My(t,s,a){s=Ni(a,s),s=ff(t.stateNode,s,2),t=zr(t,s,2),t!==null&&(Gi(t,2),Is(t))}function Nt(t,s,a){if(t.tag===3)My(t,t,a);else for(;s!==null;){if(s.tag===3){My(s,t,a);break}else if(s.tag===1){var l=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Yr===null||!Yr.has(l))){t=Ni(a,t),a=U0(2),l=zr(s,a,2),l!==null&&(B0(a,l,s,t),Gi(l,2),Is(l));break}}s=s.return}}function Uf(t,s,a){var l=t.pingCache;if(l===null){l=t.pingCache=new cw;var h=new Set;l.set(s,h)}else h=l.get(s),h===void 0&&(h=new Set,l.set(s,h));h.has(a)||(If=!0,h.add(a),t=mw.bind(null,t,s,a),s.then(t,t))}function mw(t,s,a){var l=t.pingCache;l!==null&&l.delete(s),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,jt===t&&(dt&a)===a&&(Kt===4||Kt===3&&(dt&62914560)===dt&&300>Ce()-jf?(wt&2)===0&&el(t,0):kf|=a,Qo===dt&&(Qo=0)),Is(t)}function Ly(t,s){s===0&&(s=Hs()),t=Lo(t,s),t!==null&&(Gi(t,s),Is(t))}function pw(t){var s=t.memoizedState,a=0;s!==null&&(a=s.retryLane),Ly(t,a)}function gw(t,s){var a=0;switch(t.tag){case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(s),Ly(t,a)}function yw(t,s){return Fi(t,s)}var Gu=null,nl=null,Bf=!1,Wu=!1,zf=!1,io=0;function Is(t){t!==nl&&t.next===null&&(nl===null?Gu=nl=t:nl=nl.next=t),Wu=!0,Bf||(Bf=!0,xw())}function rc(t,s){if(!zf&&Wu){zf=!0;do for(var a=!1,l=Gu;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var m=0;else{var b=l.suspendedLanes,E=l.pingedLanes;m=(1<<31-Z(42|t)+1)-1,m&=h&~(b&~E),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(a=!0,By(l,m))}else m=dt,m=Gn(l,l===jt?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(m&3)===0||Hi(l,m)||(a=!0,By(l,m));l=l.next}while(a);zf=!1}}function vw(){Vy()}function Vy(){Wu=Bf=!1;var t=0;io!==0&&(Rw()&&(t=io),io=0);for(var s=Ce(),a=null,l=Gu;l!==null;){var h=l.next,m=Py(l,s);m===0?(l.next=null,a===null?Gu=h:a.next=h,h===null&&(nl=a)):(a=l,(t!==0||(m&3)!==0)&&(Wu=!0)),l=h}rc(t)}function Py(t,s){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var b=31-Z(m),E=1<<b,P=h[b];P===-1?((E&a)===0||(E&l)!==0)&&(h[b]=Rr(E,s)):P<=s&&(t.expiredLanes|=E),m&=~E}if(s=jt,a=dt,a=Gn(t,t===s?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===s&&(St===2||St===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&ls(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||Hi(t,a)){if(s=a&-a,s===t.callbackPriority)return s;switch(l!==null&&ls(l),ze(a)){case 2:case 8:a=yi;break;case 32:a=it;break;case 268435456:a=Ut;break;default:a=it}return l=Uy.bind(null,t),a=Fi(a,l),t.callbackPriority=s,t.callbackNode=a,s}return l!==null&&l!==null&&ls(l),t.callbackPriority=2,t.callbackNode=null,2}function Uy(t,s){if(Cn!==0&&Cn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(qu()&&t.callbackNode!==a)return null;var l=dt;return l=Gn(t,t===jt?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(_y(t,l,s),Py(t,Ce()),t.callbackNode!=null&&t.callbackNode===a?Uy.bind(null,t):null)}function By(t,s){if(qu())return null;_y(t,s,!0)}function xw(){Iw(function(){(wt&6)!==0?Fi(Pt,vw):Vy()})}function Ff(){return io===0&&(io=Ca()),io}function zy(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Dr(""+t)}function Fy(t,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,t.id&&a.setAttribute("form",t.id),s.parentNode.insertBefore(a,s),t=new FormData(t),a.parentNode.removeChild(a),t}function bw(t,s,a,l,h){if(s==="submit"&&a&&a.stateNode===h){var m=zy((h[Wt]||null).action),b=l.submitter;b&&(s=(s=b[Wt]||null)?zy(s.formAction):b.getAttribute("formAction"),s!==null&&(m=s,b=null));var E=new La("action","action",null,l,h);t.push({event:E,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(io!==0){var P=b?Fy(h,b):new FormData(h);lf(a,{pending:!0,data:P,method:h.method,action:m},null,P)}}else typeof m=="function"&&(E.preventDefault(),P=b?Fy(h,b):new FormData(h),lf(a,{pending:!0,data:P,method:h.method,action:m},m,P))},currentTarget:h}]})}}for(var Hf=0;Hf<Th.length;Hf++){var qf=Th[Hf],_w=qf.toLowerCase(),ww=qf[0].toUpperCase()+qf.slice(1);Qi(_w,"on"+ww)}Qi(_g,"onAnimationEnd"),Qi(wg,"onAnimationIteration"),Qi(Sg,"onAnimationStart"),Qi("dblclick","onDoubleClick"),Qi("focusin","onFocus"),Qi("focusout","onBlur"),Qi(U_,"onTransitionRun"),Qi(B_,"onTransitionStart"),Qi(z_,"onTransitionCancel"),Qi(Eg,"onTransitionEnd"),Ln("onMouseEnter",["mouseout","mouseover"]),Ln("onMouseLeave",["mouseout","mouseover"]),Ln("onPointerEnter",["pointerout","pointerover"]),Ln("onPointerLeave",["pointerout","pointerover"]),Kn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Kn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Kn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Kn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Kn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Kn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ac="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Sw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ac));function Hy(t,s){s=(s&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var m=void 0;if(s)for(var b=l.length-1;0<=b;b--){var E=l[b],P=E.instance,J=E.currentTarget;if(E=E.listener,P!==m&&h.isPropagationStopped())break e;m=E,h.currentTarget=J;try{m(h)}catch(le){Du(le)}h.currentTarget=null,m=P}else for(b=0;b<l.length;b++){if(E=l[b],P=E.instance,J=E.currentTarget,E=E.listener,P!==m&&h.isPropagationStopped())break e;m=E,h.currentTarget=J;try{m(h)}catch(le){Du(le)}h.currentTarget=null,m=P}}}}function at(t,s){var a=s[ka];a===void 0&&(a=s[ka]=new Set);var l=t+"__bubble";a.has(l)||(qy(s,t,2,!1),a.add(l))}function Gf(t,s,a){var l=0;s&&(l|=4),qy(a,t,l,s)}var Xu="_reactListening"+Math.random().toString(36).slice(2);function Wf(t){if(!t[Xu]){t[Xu]=!0,qs.forEach(function(a){a!=="selectionchange"&&(Sw.has(a)||Gf(a,!1,t),Gf(a,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[Xu]||(s[Xu]=!0,Gf("selectionchange",!1,s))}}function qy(t,s,a,l){switch(mv(s)){case 2:var h=Yw;break;case 8:h=Qw;break;default:h=am}a=h.bind(null,s,a,t),h=void 0,!An||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(s,a,{capture:!0,passive:h}):t.addEventListener(s,a,!0):h!==void 0?t.addEventListener(s,a,{passive:h}):t.addEventListener(s,a,!1)}function Xf(t,s,a,l,h){var m=l;if((s&1)===0&&(s&2)===0&&l!==null)e:for(;;){if(l===null)return;var b=l.tag;if(b===3||b===4){var E=l.stateNode.containerInfo;if(E===h)break;if(b===4)for(b=l.return;b!==null;){var P=b.tag;if((P===3||P===4)&&b.stateNode.containerInfo===h)return;b=b.return}for(;E!==null;){if(b=Xi(E),b===null)return;if(P=b.tag,P===5||P===6||P===26||P===27){l=m=b;continue e}E=E.parentNode}}l=l.return}Io(function(){var J=m,le=Qn(a),he=[];e:{var te=Ag.get(t);if(te!==void 0){var se=La,Fe=t;switch(t){case"keypress":if($t(a)===0)break e;case"keydown":case"keyup":se=Js;break;case"focusin":Fe="focus",se=Or;break;case"focusout":Fe="blur",se=Or;break;case"beforeblur":case"afterblur":se=Or;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":se=ei;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":se=Nl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":se=I;break;case _g:case wg:case Sg:se=Qs;break;case Eg:se=D;break;case"scroll":case"scrollend":se=kl;break;case"wheel":se=ve;break;case"copy":case"cut":case"paste":se=$s;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":se=Vr;break;case"toggle":case"beforetoggle":se=Ie}var Le=(s&4)!==0,Rt=!Le&&(t==="scroll"||t==="scrollend"),X=Le?te!==null?te+"Capture":null:te;Le=[];for(var H=J,Y;H!==null;){var ce=H;if(Y=ce.stateNode,ce=ce.tag,ce!==5&&ce!==26&&ce!==27||Y===null||X===null||(ce=Ri(H,X),ce!=null&&Le.push(oc(H,ce,Y))),Rt)break;H=H.return}0<Le.length&&(te=new se(te,Fe,null,a,le),he.push({event:te,listeners:Le}))}}if((s&7)===0){e:{if(te=t==="mouseover"||t==="pointerover",se=t==="mouseout"||t==="pointerout",te&&a!==Zi&&(Fe=a.relatedTarget||a.fromElement)&&(Xi(Fe)||Fe[gn]))break e;if((se||te)&&(te=le.window===le?le:(te=le.ownerDocument)?te.defaultView||te.parentWindow:window,se?(Fe=a.relatedTarget||a.toElement,se=J,Fe=Fe?Xi(Fe):null,Fe!==null&&(Rt=c(Fe),Le=Fe.tag,Fe!==Rt||Le!==5&&Le!==27&&Le!==6)&&(Fe=null)):(se=null,Fe=J),se!==Fe)){if(Le=ei,ce="onMouseLeave",X="onMouseEnter",H="mouse",(t==="pointerout"||t==="pointerover")&&(Le=Vr,ce="onPointerLeave",X="onPointerEnter",H="pointer"),Rt=se==null?te:_i(se),Y=Fe==null?te:_i(Fe),te=new Le(ce,H+"leave",se,a,le),te.target=Rt,te.relatedTarget=Y,ce=null,Xi(le)===J&&(Le=new Le(X,H+"enter",Fe,a,le),Le.target=Y,Le.relatedTarget=Rt,ce=Le),Rt=ce,se&&Fe)t:{for(Le=se,X=Fe,H=0,Y=Le;Y;Y=il(Y))H++;for(Y=0,ce=X;ce;ce=il(ce))Y++;for(;0<H-Y;)Le=il(Le),H--;for(;0<Y-H;)X=il(X),Y--;for(;H--;){if(Le===X||X!==null&&Le===X.alternate)break t;Le=il(Le),X=il(X)}Le=null}else Le=null;se!==null&&Gy(he,te,se,Le,!1),Fe!==null&&Rt!==null&&Gy(he,Rt,Fe,Le,!0)}}e:{if(te=J?_i(J):window,se=te.nodeName&&te.nodeName.toLowerCase(),se==="select"||se==="input"&&te.type==="file")var Te=ug;else if(ke(te))if(dg)Te=L_;else{Te=O_;var st=D_}else se=te.nodeName,!se||se.toLowerCase()!=="input"||te.type!=="checkbox"&&te.type!=="radio"?J&&Ks(J.elementType)&&(Te=ug):Te=M_;if(Te&&(Te=Te(t,J))){_t(he,Te,a,le);break e}st&&st(t,te,J),t==="focusout"&&J&&te.type==="number"&&J.memoizedProps.value!=null&&hs(te,"number",te.value)}switch(st=J?_i(J):window,t){case"focusin":(ke(st)||st.contentEditable==="true")&&(Do=st,Sh=J,Dl=null);break;case"focusout":Dl=Sh=Do=null;break;case"mousedown":Eh=!0;break;case"contextmenu":case"mouseup":case"dragend":Eh=!1,xg(he,a,le);break;case"selectionchange":if(P_)break;case"keydown":case"keyup":xg(he,a,le)}var je;if(Oe)e:{switch(t){case"compositionstart":var Ve="onCompositionStart";break e;case"compositionend":Ve="onCompositionEnd";break e;case"compositionupdate":Ve="onCompositionUpdate";break e}Ve=void 0}else Ze?ie(t,a)&&(Ve="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Ve="onCompositionStart");Ve&&(x&&a.locale!=="ko"&&(Ze||Ve!=="onCompositionStart"?Ve==="onCompositionEnd"&&Ze&&(je=vs()):(un=le,Ki="value"in un?un.value:un.textContent,Ze=!0)),st=Zu(J,Ve),0<st.length&&(Ve=new Mr(Ve,t,null,a,le),he.push({event:Ve,listeners:st}),je?Ve.data=je:(je=_e(a),je!==null&&(Ve.data=je)))),(je=v?It(t,a):Ke(t,a))&&(Ve=Zu(J,"onBeforeInput"),0<Ve.length&&(st=new Mr("onBeforeInput","beforeinput",null,a,le),he.push({event:st,listeners:Ve}),st.data=je)),bw(he,t,J,a,le)}Hy(he,s)})}function oc(t,s,a){return{instance:t,listener:s,currentTarget:a}}function Zu(t,s){for(var a=s+"Capture",l=[];t!==null;){var h=t,m=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||m===null||(h=Ri(t,a),h!=null&&l.unshift(oc(t,h,m)),h=Ri(t,s),h!=null&&l.push(oc(t,h,m))),t.tag===3)return l;t=t.return}return[]}function il(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Gy(t,s,a,l,h){for(var m=s._reactName,b=[];a!==null&&a!==l;){var E=a,P=E.alternate,J=E.stateNode;if(E=E.tag,P!==null&&P===l)break;E!==5&&E!==26&&E!==27||J===null||(P=J,h?(J=Ri(a,m),J!=null&&b.unshift(oc(a,J,P))):h||(J=Ri(a,m),J!=null&&b.push(oc(a,J,P)))),a=a.return}b.length!==0&&t.push({event:s,listeners:b})}var Ew=/\r\n?/g,Aw=/\u0000|\uFFFD/g;function Wy(t){return(typeof t=="string"?t:""+t).replace(Ew,`
`).replace(Aw,"")}function Xy(t,s){return s=Wy(s),Wy(t)===s}function Ku(){}function Tt(t,s,a,l,h,m){switch(a){case"children":typeof l=="string"?s==="body"||s==="textarea"&&l===""||He(t,l):(typeof l=="number"||typeof l=="bigint")&&s!=="body"&&He(t,""+l);break;case"className":li(t,"class",l);break;case"tabIndex":li(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":li(t,a,l);break;case"style":Ai(t,l,m);break;case"data":if(s!=="object"){li(t,"data",l);break}case"src":case"href":if(l===""&&(s!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Dr(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(s!=="input"&&Tt(t,s,"name",h.name,h,null),Tt(t,s,"formEncType",h.formEncType,h,null),Tt(t,s,"formMethod",h.formMethod,h,null),Tt(t,s,"formTarget",h.formTarget,h,null)):(Tt(t,s,"encType",h.encType,h,null),Tt(t,s,"method",h.method,h,null),Tt(t,s,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Dr(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=Ku);break;case"onScroll":l!=null&&at("scroll",t);break;case"onScrollEnd":l!=null&&at("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=Dr(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":at("beforetoggle",t),at("toggle",t),us(t,"popover",l);break;case"xlinkActuate":cn(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":cn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":cn(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":cn(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":cn(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":cn(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":cn(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":cn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":cn(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":us(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Co.get(a)||a,us(t,a,l))}}function Zf(t,s,a,l,h,m){switch(a){case"style":Ai(t,l,m);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"children":typeof l=="string"?He(t,l):(typeof l=="number"||typeof l=="bigint")&&He(t,""+l);break;case"onScroll":l!=null&&at("scroll",t);break;case"onScrollEnd":l!=null&&at("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Ku);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Cr.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),s=a.slice(2,h?a.length-7:void 0),m=t[Wt]||null,m=m!=null?m[a]:null,typeof m=="function"&&t.removeEventListener(s,m,h),typeof l=="function")){typeof m!="function"&&m!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(s,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):us(t,a,l)}}}function In(t,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":at("error",t),at("load",t);var l=!1,h=!1,m;for(m in a)if(a.hasOwnProperty(m)){var b=a[m];if(b!=null)switch(m){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:Tt(t,s,m,b,a,null)}}h&&Tt(t,s,"srcSet",a.srcSet,a,null),l&&Tt(t,s,"src",a.src,a,null);return;case"input":at("invalid",t);var E=m=b=h=null,P=null,J=null;for(l in a)if(a.hasOwnProperty(l)){var le=a[l];if(le!=null)switch(l){case"name":h=le;break;case"type":b=le;break;case"checked":P=le;break;case"defaultChecked":J=le;break;case"value":m=le;break;case"defaultValue":E=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(r(137,s));break;default:Tt(t,s,l,le,a,null)}}Zs(t,m,E,P,J,b,h,!1),jr(t);return;case"select":at("invalid",t),l=b=m=null;for(h in a)if(a.hasOwnProperty(h)&&(E=a[h],E!=null))switch(h){case"value":m=E;break;case"defaultValue":b=E;break;case"multiple":l=E;default:Tt(t,s,h,E,a,null)}s=m,a=b,t.multiple=!!l,s!=null?Yn(t,!!l,s,!1):a!=null&&Yn(t,!!l,a,!0);return;case"textarea":at("invalid",t),m=h=l=null;for(b in a)if(a.hasOwnProperty(b)&&(E=a[b],E!=null))switch(b){case"value":l=E;break;case"defaultValue":h=E;break;case"children":m=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(r(91));break;default:Tt(t,s,b,E,a,null)}fs(t,l,h,m),jr(t);return;case"option":for(P in a)if(a.hasOwnProperty(P)&&(l=a[P],l!=null))switch(P){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Tt(t,s,P,l,a,null)}return;case"dialog":at("beforetoggle",t),at("toggle",t),at("cancel",t),at("close",t);break;case"iframe":case"object":at("load",t);break;case"video":case"audio":for(l=0;l<ac.length;l++)at(ac[l],t);break;case"image":at("error",t),at("load",t);break;case"details":at("toggle",t);break;case"embed":case"source":case"link":at("error",t),at("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in a)if(a.hasOwnProperty(J)&&(l=a[J],l!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:Tt(t,s,J,l,a,null)}return;default:if(Ks(s)){for(le in a)a.hasOwnProperty(le)&&(l=a[le],l!==void 0&&Zf(t,s,le,l,a,void 0));return}}for(E in a)a.hasOwnProperty(E)&&(l=a[E],l!=null&&Tt(t,s,E,l,a,null))}function Tw(t,s,a,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,m=null,b=null,E=null,P=null,J=null,le=null;for(se in a){var he=a[se];if(a.hasOwnProperty(se)&&he!=null)switch(se){case"checked":break;case"value":break;case"defaultValue":P=he;default:l.hasOwnProperty(se)||Tt(t,s,se,null,l,he)}}for(var te in l){var se=l[te];if(he=a[te],l.hasOwnProperty(te)&&(se!=null||he!=null))switch(te){case"type":m=se;break;case"name":h=se;break;case"checked":J=se;break;case"defaultChecked":le=se;break;case"value":b=se;break;case"defaultValue":E=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(r(137,s));break;default:se!==he&&Tt(t,s,te,se,l,he)}}vn(t,b,E,P,J,le,m,h);return;case"select":se=b=E=te=null;for(m in a)if(P=a[m],a.hasOwnProperty(m)&&P!=null)switch(m){case"value":break;case"multiple":se=P;default:l.hasOwnProperty(m)||Tt(t,s,m,null,l,P)}for(h in l)if(m=l[h],P=a[h],l.hasOwnProperty(h)&&(m!=null||P!=null))switch(h){case"value":te=m;break;case"defaultValue":E=m;break;case"multiple":b=m;default:m!==P&&Tt(t,s,h,m,l,P)}s=E,a=b,l=se,te!=null?Yn(t,!!a,te,!1):!!l!=!!a&&(s!=null?Yn(t,!!a,s,!0):Yn(t,!!a,a?[]:"",!1));return;case"textarea":se=te=null;for(E in a)if(h=a[E],a.hasOwnProperty(E)&&h!=null&&!l.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:Tt(t,s,E,null,l,h)}for(b in l)if(h=l[b],m=a[b],l.hasOwnProperty(b)&&(h!=null||m!=null))switch(b){case"value":te=h;break;case"defaultValue":se=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(r(91));break;default:h!==m&&Tt(t,s,b,h,l,m)}Qe(t,te,se);return;case"option":for(var Fe in a)if(te=a[Fe],a.hasOwnProperty(Fe)&&te!=null&&!l.hasOwnProperty(Fe))switch(Fe){case"selected":t.selected=!1;break;default:Tt(t,s,Fe,null,l,te)}for(P in l)if(te=l[P],se=a[P],l.hasOwnProperty(P)&&te!==se&&(te!=null||se!=null))switch(P){case"selected":t.selected=te&&typeof te!="function"&&typeof te!="symbol";break;default:Tt(t,s,P,te,l,se)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Le in a)te=a[Le],a.hasOwnProperty(Le)&&te!=null&&!l.hasOwnProperty(Le)&&Tt(t,s,Le,null,l,te);for(J in l)if(te=l[J],se=a[J],l.hasOwnProperty(J)&&te!==se&&(te!=null||se!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(r(137,s));break;default:Tt(t,s,J,te,l,se)}return;default:if(Ks(s)){for(var Rt in a)te=a[Rt],a.hasOwnProperty(Rt)&&te!==void 0&&!l.hasOwnProperty(Rt)&&Zf(t,s,Rt,void 0,l,te);for(le in l)te=l[le],se=a[le],!l.hasOwnProperty(le)||te===se||te===void 0&&se===void 0||Zf(t,s,le,te,l,se);return}}for(var X in a)te=a[X],a.hasOwnProperty(X)&&te!=null&&!l.hasOwnProperty(X)&&Tt(t,s,X,null,l,te);for(he in l)te=l[he],se=a[he],!l.hasOwnProperty(he)||te===se||te==null&&se==null||Tt(t,s,he,te,l,se)}var Kf=null,Yf=null;function Yu(t){return t.nodeType===9?t:t.ownerDocument}function Zy(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ky(t,s){if(t===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&s==="foreignObject"?0:t}function Qf(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var $f=null;function Rw(){var t=window.event;return t&&t.type==="popstate"?t===$f?!1:($f=t,!0):($f=null,!1)}var Yy=typeof setTimeout=="function"?setTimeout:void 0,Cw=typeof clearTimeout=="function"?clearTimeout:void 0,Qy=typeof Promise=="function"?Promise:void 0,Iw=typeof queueMicrotask=="function"?queueMicrotask:typeof Qy<"u"?function(t){return Qy.resolve(null).then(t).catch(kw)}:Yy;function kw(t){setTimeout(function(){throw t})}function Jr(t){return t==="head"}function $y(t,s){var a=s,l=0,h=0;do{var m=a.nextSibling;if(t.removeChild(a),m&&m.nodeType===8)if(a=m.data,a==="/$"){if(0<l&&8>l){a=l;var b=t.ownerDocument;if(a&1&&lc(b.documentElement),a&2&&lc(b.body),a&4)for(a=b.head,lc(a),b=a.firstChild;b;){var E=b.nextSibling,P=b.nodeName;b[bi]||P==="SCRIPT"||P==="STYLE"||P==="LINK"&&b.rel.toLowerCase()==="stylesheet"||a.removeChild(b),b=E}}if(h===0){t.removeChild(m),gc(s);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:l=a.charCodeAt(0)-48;else l=0;a=m}while(a);gc(s)}function Jf(t){var s=t.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Jf(a),Wi(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function Nw(t,s,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==s.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[bi])switch(s){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(s==="input"&&t.type==="hidden"){var m=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=Ji(t.nextSibling),t===null)break}return null}function jw(t,s,a){if(s==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Ji(t.nextSibling),t===null))return null;return t}function em(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function Dw(t,s){var a=t.ownerDocument;if(t.data!=="$?"||a.readyState==="complete")s();else{var l=function(){s(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function Ji(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return t}var tm=null;function Jy(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return t;s--}else a==="/$"&&s++}t=t.previousSibling}return null}function ev(t,s,a){switch(s=Yu(a),t){case"html":if(t=s.documentElement,!t)throw Error(r(452));return t;case"head":if(t=s.head,!t)throw Error(r(453));return t;case"body":if(t=s.body,!t)throw Error(r(454));return t;default:throw Error(r(451))}}function lc(t){for(var s=t.attributes;s.length;)t.removeAttributeNode(s[0]);Wi(t)}var Vi=new Map,tv=new Set;function Qu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var fr=me.d;me.d={f:Ow,r:Mw,D:Lw,C:Vw,L:Pw,m:Uw,X:zw,S:Bw,M:Fw};function Ow(){var t=fr.f(),s=Fu();return t||s}function Mw(t){var s=oi(t);s!==null&&s.tag===5&&s.type==="form"?_0(s):fr.r(t)}var sl=typeof document>"u"?null:document;function nv(t,s,a){var l=sl;if(l&&typeof s=="string"&&s){var h=Xt(s);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),tv.has(h)||(tv.add(h),t={rel:t,crossOrigin:a,href:s},l.querySelector(h)===null&&(s=l.createElement("link"),In(s,"link",t),Mt(s),l.head.appendChild(s)))}}function Lw(t){fr.D(t),nv("dns-prefetch",t,null)}function Vw(t,s){fr.C(t,s),nv("preconnect",t,s)}function Pw(t,s,a){fr.L(t,s,a);var l=sl;if(l&&t&&s){var h='link[rel="preload"][as="'+Xt(s)+'"]';s==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+Xt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+Xt(a.imageSizes)+'"]')):h+='[href="'+Xt(t)+'"]';var m=h;switch(s){case"style":m=rl(t);break;case"script":m=al(t)}Vi.has(m)||(t=w({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:t,as:s},a),Vi.set(m,t),l.querySelector(h)!==null||s==="style"&&l.querySelector(cc(m))||s==="script"&&l.querySelector(uc(m))||(s=l.createElement("link"),In(s,"link",t),Mt(s),l.head.appendChild(s)))}}function Uw(t,s){fr.m(t,s);var a=sl;if(a&&t){var l=s&&typeof s.as=="string"?s.as:"script",h='link[rel="modulepreload"][as="'+Xt(l)+'"][href="'+Xt(t)+'"]',m=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=al(t)}if(!Vi.has(m)&&(t=w({rel:"modulepreload",href:t},s),Vi.set(m,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(uc(m)))return}l=a.createElement("link"),In(l,"link",t),Mt(l),a.head.appendChild(l)}}}function Bw(t,s,a){fr.S(t,s,a);var l=sl;if(l&&t){var h=En(l).hoistableStyles,m=rl(t);s=s||"default";var b=h.get(m);if(!b){var E={loading:0,preload:null};if(b=l.querySelector(cc(m)))E.loading=5;else{t=w({rel:"stylesheet",href:t,"data-precedence":s},a),(a=Vi.get(m))&&nm(t,a);var P=b=l.createElement("link");Mt(P),In(P,"link",t),P._p=new Promise(function(J,le){P.onload=J,P.onerror=le}),P.addEventListener("load",function(){E.loading|=1}),P.addEventListener("error",function(){E.loading|=2}),E.loading|=4,$u(b,s,l)}b={type:"stylesheet",instance:b,count:1,state:E},h.set(m,b)}}}function zw(t,s){fr.X(t,s);var a=sl;if(a&&t){var l=En(a).hoistableScripts,h=al(t),m=l.get(h);m||(m=a.querySelector(uc(h)),m||(t=w({src:t,async:!0},s),(s=Vi.get(h))&&im(t,s),m=a.createElement("script"),Mt(m),In(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(h,m))}}function Fw(t,s){fr.M(t,s);var a=sl;if(a&&t){var l=En(a).hoistableScripts,h=al(t),m=l.get(h);m||(m=a.querySelector(uc(h)),m||(t=w({src:t,async:!0,type:"module"},s),(s=Vi.get(h))&&im(t,s),m=a.createElement("script"),Mt(m),In(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(h,m))}}function iv(t,s,a,l){var h=(h=Re.current)?Qu(h):null;if(!h)throw Error(r(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=rl(a.href),a=En(h).hoistableStyles,l=a.get(s),l||(l={type:"style",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=rl(a.href);var m=En(h).hoistableStyles,b=m.get(t);if(b||(h=h.ownerDocument||h,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,b),(m=h.querySelector(cc(t)))&&!m._p&&(b.instance=m,b.state.loading=5),Vi.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Vi.set(t,a),m||Hw(h,t,a,b.state))),s&&l===null)throw Error(r(528,""));return b}if(s&&l!==null)throw Error(r(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=al(a),a=En(h).hoistableScripts,l=a.get(s),l||(l={type:"script",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,t))}}function rl(t){return'href="'+Xt(t)+'"'}function cc(t){return'link[rel="stylesheet"]['+t+"]"}function sv(t){return w({},t,{"data-precedence":t.precedence,precedence:null})}function Hw(t,s,a,l){t.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=t.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),In(s,"link",a),Mt(s),t.head.appendChild(s))}function al(t){return'[src="'+Xt(t)+'"]'}function uc(t){return"script[async]"+t}function rv(t,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var l=t.querySelector('style[data-href~="'+Xt(a.href)+'"]');if(l)return s.instance=l,Mt(l),l;var h=w({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),Mt(l),In(l,"style",h),$u(l,a.precedence,t),s.instance=l;case"stylesheet":h=rl(a.href);var m=t.querySelector(cc(h));if(m)return s.state.loading|=4,s.instance=m,Mt(m),m;l=sv(a),(h=Vi.get(h))&&nm(l,h),m=(t.ownerDocument||t).createElement("link"),Mt(m);var b=m;return b._p=new Promise(function(E,P){b.onload=E,b.onerror=P}),In(m,"link",l),s.state.loading|=4,$u(m,a.precedence,t),s.instance=m;case"script":return m=al(a.src),(h=t.querySelector(uc(m)))?(s.instance=h,Mt(h),h):(l=a,(h=Vi.get(m))&&(l=w({},a),im(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),Mt(h),In(h,"link",l),t.head.appendChild(h),s.instance=h);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(l=s.instance,s.state.loading|=4,$u(l,a.precedence,t));return s.instance}function $u(t,s,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,m=h,b=0;b<l.length;b++){var E=l[b];if(E.dataset.precedence===s)m=E;else if(m!==h)break}m?m.parentNode.insertBefore(t,m.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(t,s.firstChild))}function nm(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.title==null&&(t.title=s.title)}function im(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.integrity==null&&(t.integrity=s.integrity)}var Ju=null;function av(t,s,a){if(Ju===null){var l=new Map,h=Ju=new Map;h.set(a,l)}else h=Ju,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var m=a[h];if(!(m[bi]||m[nn]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var b=m.getAttribute(s)||"";b=t+b;var E=l.get(b);E?E.push(m):l.set(b,[m])}}return l}function ov(t,s,a){t=t.ownerDocument||t,t.head.insertBefore(a,s==="title"?t.querySelector("head > title"):null)}function qw(t,s,a){if(a===1||s.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return t=s.disabled,typeof s.precedence=="string"&&t==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function lv(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var dc=null;function Gw(){}function Ww(t,s,a){if(dc===null)throw Error(r(475));var l=dc;if(s.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var h=rl(a.href),m=t.querySelector(cc(h));if(m){t=m._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=ed.bind(l),t.then(l,l)),s.state.loading|=4,s.instance=m,Mt(m);return}m=t.ownerDocument||t,a=sv(a),(h=Vi.get(h))&&nm(a,h),m=m.createElement("link"),Mt(m);var b=m;b._p=new Promise(function(E,P){b.onload=E,b.onerror=P}),In(m,"link",a),s.instance=m}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(s,t),(t=s.state.preload)&&(s.state.loading&3)===0&&(l.count++,s=ed.bind(l),t.addEventListener("load",s),t.addEventListener("error",s))}}function Xw(){if(dc===null)throw Error(r(475));var t=dc;return t.stylesheets&&t.count===0&&sm(t,t.stylesheets),0<t.count?function(s){var a=setTimeout(function(){if(t.stylesheets&&sm(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=s,function(){t.unsuspend=null,clearTimeout(a)}}:null}function ed(){if(this.count--,this.count===0){if(this.stylesheets)sm(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var td=null;function sm(t,s){t.stylesheets=null,t.unsuspend!==null&&(t.count++,td=new Map,s.forEach(Zw,t),td=null,ed.call(t))}function Zw(t,s){if(!(s.state.loading&4)){var a=td.get(t);if(a)var l=a.get(null);else{a=new Map,td.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<h.length;m++){var b=h[m];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(a.set(b.dataset.precedence,b),l=b)}l&&a.set(null,l)}h=s.instance,b=h.getAttribute("data-precedence"),m=a.get(b)||l,m===l&&a.set(null,h),a.set(b,h),this.count++,l=ed.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),m?m.parentNode.insertBefore(h,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),s.state.loading|=4}}var hc={$$typeof:L,Provider:null,Consumer:null,_currentValue:re,_currentValue2:re,_threadCount:0};function Kw(t,s,a,l,h,m,b,E){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=qi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qi(0),this.hiddenUpdates=qi(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=m,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map}function cv(t,s,a,l,h,m,b,E,P,J,le,he){return t=new Kw(t,s,a,b,E,P,J,he),s=1,m===!0&&(s|=24),m=ui(3,null,null,s),t.current=m,m.stateNode=t,s=Ph(),s.refCount++,t.pooledCache=s,s.refCount++,m.memoizedState={element:l,isDehydrated:a,cache:s},Fh(m),t}function uv(t){return t?(t=Vo,t):Vo}function dv(t,s,a,l,h,m){h=uv(h),l.context===null?l.context=h:l.pendingContext=h,l=Br(s),l.payload={element:a},m=m===void 0?null:m,m!==null&&(l.callback=m),a=zr(t,l,s),a!==null&&(pi(a,t,s),Fl(a,t,s))}function hv(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<s?a:s}}function rm(t,s){hv(t,s),(t=t.alternate)&&hv(t,s)}function fv(t){if(t.tag===13){var s=Lo(t,67108864);s!==null&&pi(s,t,67108864),rm(t,67108864)}}var nd=!0;function Yw(t,s,a,l){var h=ae.T;ae.T=null;var m=me.p;try{me.p=2,am(t,s,a,l)}finally{me.p=m,ae.T=h}}function Qw(t,s,a,l){var h=ae.T;ae.T=null;var m=me.p;try{me.p=8,am(t,s,a,l)}finally{me.p=m,ae.T=h}}function am(t,s,a,l){if(nd){var h=om(l);if(h===null)Xf(t,s,l,id,a),pv(t,l);else if(Jw(h,t,s,a,l))l.stopPropagation();else if(pv(t,l),s&4&&-1<$w.indexOf(t)){for(;h!==null;){var m=oi(h);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var b=Be(m.pendingLanes);if(b!==0){var E=m;for(E.pendingLanes|=2,E.entangledLanes|=2;b;){var P=1<<31-Z(b);E.entanglements[1]|=P,b&=~P}Is(m),(wt&6)===0&&(Bu=Ce()+500,rc(0))}}break;case 13:E=Lo(m,2),E!==null&&pi(E,m,2),Fu(),rm(m,2)}if(m=om(l),m===null&&Xf(t,s,l,id,a),m===h)break;h=m}h!==null&&l.stopPropagation()}else Xf(t,s,l,null,a)}}function om(t){return t=Qn(t),lm(t)}var id=null;function lm(t){if(id=null,t=Xi(t),t!==null){var s=c(t);if(s===null)t=null;else{var a=s.tag;if(a===13){if(t=f(s),t!==null)return t;t=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null)}}return id=t,null}function mv(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ra()){case Pt:return 2;case yi:return 8;case it:case Tr:return 32;case Ut:return 268435456;default:return 32}default:return 32}}var cm=!1,ea=null,ta=null,na=null,fc=new Map,mc=new Map,ia=[],$w="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function pv(t,s){switch(t){case"focusin":case"focusout":ea=null;break;case"dragenter":case"dragleave":ta=null;break;case"mouseover":case"mouseout":na=null;break;case"pointerover":case"pointerout":fc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":mc.delete(s.pointerId)}}function pc(t,s,a,l,h,m){return t===null||t.nativeEvent!==m?(t={blockedOn:s,domEventName:a,eventSystemFlags:l,nativeEvent:m,targetContainers:[h]},s!==null&&(s=oi(s),s!==null&&fv(s)),t):(t.eventSystemFlags|=l,s=t.targetContainers,h!==null&&s.indexOf(h)===-1&&s.push(h),t)}function Jw(t,s,a,l,h){switch(s){case"focusin":return ea=pc(ea,t,s,a,l,h),!0;case"dragenter":return ta=pc(ta,t,s,a,l,h),!0;case"mouseover":return na=pc(na,t,s,a,l,h),!0;case"pointerover":var m=h.pointerId;return fc.set(m,pc(fc.get(m)||null,t,s,a,l,h)),!0;case"gotpointercapture":return m=h.pointerId,mc.set(m,pc(mc.get(m)||null,t,s,a,l,h)),!0}return!1}function gv(t){var s=Xi(t.target);if(s!==null){var a=c(s);if(a!==null){if(s=a.tag,s===13){if(s=f(a),s!==null){t.blockedOn=s,Xe(t.priority,function(){if(a.tag===13){var l=mi();l=ai(l);var h=Lo(a,l);h!==null&&pi(h,a,l),rm(a,l)}});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function sd(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var a=om(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Zi=l,a.target.dispatchEvent(l),Zi=null}else return s=oi(a),s!==null&&fv(s),t.blockedOn=a,!1;s.shift()}return!0}function yv(t,s,a){sd(t)&&a.delete(s)}function eS(){cm=!1,ea!==null&&sd(ea)&&(ea=null),ta!==null&&sd(ta)&&(ta=null),na!==null&&sd(na)&&(na=null),fc.forEach(yv),mc.forEach(yv)}function rd(t,s){t.blockedOn===s&&(t.blockedOn=null,cm||(cm=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,eS)))}var ad=null;function vv(t){ad!==t&&(ad=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){ad===t&&(ad=null);for(var s=0;s<t.length;s+=3){var a=t[s],l=t[s+1],h=t[s+2];if(typeof l!="function"){if(lm(l||a)===null)continue;break}var m=oi(a);m!==null&&(t.splice(s,3),s-=3,lf(m,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function gc(t){function s(P){return rd(P,t)}ea!==null&&rd(ea,t),ta!==null&&rd(ta,t),na!==null&&rd(na,t),fc.forEach(s),mc.forEach(s);for(var a=0;a<ia.length;a++){var l=ia[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<ia.length&&(a=ia[0],a.blockedOn===null);)gv(a),a.blockedOn===null&&ia.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],m=a[l+1],b=h[Wt]||null;if(typeof m=="function")b||vv(a);else if(b){var E=null;if(m&&m.hasAttribute("formAction")){if(h=m,b=m[Wt]||null)E=b.formAction;else if(lm(h)!==null)continue}else E=b.action;typeof E=="function"?a[l+1]=E:(a.splice(l,3),l-=3),vv(a)}}}function um(t){this._internalRoot=t}od.prototype.render=um.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(r(409));var a=s.current,l=mi();dv(a,l,t,s,null,null)},od.prototype.unmount=um.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;dv(t.current,2,null,t,null,null),Fu(),s[gn]=null}};function od(t){this._internalRoot=t}od.prototype.unstable_scheduleHydration=function(t){if(t){var s=cs();t={blockedOn:null,target:t,priority:s};for(var a=0;a<ia.length&&s!==0&&s<ia[a].priority;a++);ia.splice(a,0,t),a===0&&gv(t)}};var xv=e.version;if(xv!=="19.1.0")throw Error(r(527,xv,"19.1.0"));me.findDOMNode=function(t){var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=g(s),t=t!==null?y(t):null,t=t===null?null:t.stateNode,t};var tS={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:ae,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ld=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ld.isDisabled&&ld.supportsFiber)try{Et=ld.inject(tS),$e=ld}catch{}}return vc.createRoot=function(t,s){if(!o(t))throw Error(r(299));var a=!1,l="",h=M0,m=L0,b=V0,E=null;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(l=s.identifierPrefix),s.onUncaughtError!==void 0&&(h=s.onUncaughtError),s.onCaughtError!==void 0&&(m=s.onCaughtError),s.onRecoverableError!==void 0&&(b=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(E=s.unstable_transitionCallbacks)),s=cv(t,1,!1,null,null,a,l,h,m,b,E,null),t[gn]=s.current,Wf(t),new um(s)},vc.hydrateRoot=function(t,s,a){if(!o(t))throw Error(r(299));var l=!1,h="",m=M0,b=L0,E=V0,P=null,J=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(b=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(P=a.unstable_transitionCallbacks),a.formState!==void 0&&(J=a.formState)),s=cv(t,1,!0,s,a??null,l,h,m,b,E,P,J),s.context=uv(null),a=s.current,l=mi(),l=ai(l),h=Br(l),h.callback=null,zr(a,h,l),a=l,s.current.lanes=a,Gi(s,a),Is(s),t[gn]=s.current,Wf(t),new od(s)},vc.version="19.1.0",vc}var Iv;function uS(){if(Iv)return fm.exports;Iv=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),fm.exports=cS(),fm.exports}var dS=uS();const hS=_x(dS);var xc={},kv;function fS(){if(kv)return xc;kv=1,Object.defineProperty(xc,"__esModule",{value:!0}),xc.parse=f,xc.serialize=y;const i=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,c=(()=>{const A=function(){};return A.prototype=Object.create(null),A})();function f(A,F){const G=new c,q=A.length;if(q<2)return G;const Q=(F==null?void 0:F.decode)||w;let ee=0;do{const $=A.indexOf("=",ee);if($===-1)break;const L=A.indexOf(";",ee),pe=L===-1?q:L;if($>pe){ee=A.lastIndexOf(";",$-1)+1;continue}const de=p(A,ee,$),xe=g(A,$,de),V=A.slice(de,xe);if(G[V]===void 0){let R=p(A,$+1,pe),k=g(A,pe,R);const M=Q(A.slice(R,k));G[V]=M}ee=pe+1}while(ee<q);return G}function p(A,F,G){do{const q=A.charCodeAt(F);if(q!==32&&q!==9)return F}while(++F<G);return G}function g(A,F,G){for(;F>G;){const q=A.charCodeAt(--F);if(q!==32&&q!==9)return F+1}return G}function y(A,F,G){const q=(G==null?void 0:G.encode)||encodeURIComponent;if(!i.test(A))throw new TypeError(`argument name is invalid: ${A}`);const Q=q(F);if(!e.test(Q))throw new TypeError(`argument val is invalid: ${F}`);let ee=A+"="+Q;if(!G)return ee;if(G.maxAge!==void 0){if(!Number.isInteger(G.maxAge))throw new TypeError(`option maxAge is invalid: ${G.maxAge}`);ee+="; Max-Age="+G.maxAge}if(G.domain){if(!n.test(G.domain))throw new TypeError(`option domain is invalid: ${G.domain}`);ee+="; Domain="+G.domain}if(G.path){if(!r.test(G.path))throw new TypeError(`option path is invalid: ${G.path}`);ee+="; Path="+G.path}if(G.expires){if(!S(G.expires)||!Number.isFinite(G.expires.valueOf()))throw new TypeError(`option expires is invalid: ${G.expires}`);ee+="; Expires="+G.expires.toUTCString()}if(G.httpOnly&&(ee+="; HttpOnly"),G.secure&&(ee+="; Secure"),G.partitioned&&(ee+="; Partitioned"),G.priority)switch(typeof G.priority=="string"?G.priority.toLowerCase():void 0){case"low":ee+="; Priority=Low";break;case"medium":ee+="; Priority=Medium";break;case"high":ee+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${G.priority}`)}if(G.sameSite)switch(typeof G.sameSite=="string"?G.sameSite.toLowerCase():G.sameSite){case!0:case"strict":ee+="; SameSite=Strict";break;case"lax":ee+="; SameSite=Lax";break;case"none":ee+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${G.sameSite}`)}return ee}function w(A){if(A.indexOf("%")===-1)return A;try{return decodeURIComponent(A)}catch{return A}}function S(A){return o.call(A)==="[object Date]"}return xc}fS();var Nv="popstate";function mS(i={}){function e(o,c){let{pathname:f="/",search:p="",hash:g=""}=go(o.location.hash.substring(1));return!f.startsWith("/")&&!f.startsWith(".")&&(f="/"+f),Mm("",{pathname:f,search:p,hash:g},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function n(o,c){let f=o.document.querySelector("base"),p="";if(f&&f.getAttribute("href")){let g=o.location.href,y=g.indexOf("#");p=y===-1?g:g.slice(0,y)}return p+"#"+(typeof c=="string"?c:Pc(c))}function r(o,c){is(o.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(c)})`)}return gS(e,n,r,i)}function Ht(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function is(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function pS(){return Math.random().toString(36).substring(2,10)}function jv(i,e){return{usr:i.state,key:i.key,idx:e}}function Mm(i,e,n=null,r){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?go(e):e,state:n,key:e&&e.key||r||pS()}}function Pc({pathname:i="/",search:e="",hash:n=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(i+=n.charAt(0)==="#"?n:"#"+n),i}function go(i){let e={};if(i){let n=i.indexOf("#");n>=0&&(e.hash=i.substring(n),i=i.substring(0,n));let r=i.indexOf("?");r>=0&&(e.search=i.substring(r),i=i.substring(0,r)),i&&(e.pathname=i)}return e}function gS(i,e,n,r={}){let{window:o=document.defaultView,v5Compat:c=!1}=r,f=o.history,p="POP",g=null,y=w();y==null&&(y=0,f.replaceState({...f.state,idx:y},""));function w(){return(f.state||{idx:null}).idx}function S(){p="POP";let Q=w(),ee=Q==null?null:Q-y;y=Q,g&&g({action:p,location:q.location,delta:ee})}function A(Q,ee){p="PUSH";let $=Mm(q.location,Q,ee);n&&n($,Q),y=w()+1;let L=jv($,y),pe=q.createHref($);try{f.pushState(L,"",pe)}catch(de){if(de instanceof DOMException&&de.name==="DataCloneError")throw de;o.location.assign(pe)}c&&g&&g({action:p,location:q.location,delta:1})}function F(Q,ee){p="REPLACE";let $=Mm(q.location,Q,ee);n&&n($,Q),y=w();let L=jv($,y),pe=q.createHref($);f.replaceState(L,"",pe),c&&g&&g({action:p,location:q.location,delta:0})}function G(Q){return yS(Q)}let q={get action(){return p},get location(){return i(o,f)},listen(Q){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(Nv,S),g=Q,()=>{o.removeEventListener(Nv,S),g=null}},createHref(Q){return e(o,Q)},createURL:G,encodeLocation(Q){let ee=G(Q);return{pathname:ee.pathname,search:ee.search,hash:ee.hash}},push:A,replace:F,go(Q){return f.go(Q)}};return q}function yS(i,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Ht(n,"No window.location.(origin|href) available to create URL");let r=typeof i=="string"?i:Pc(i);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function Sx(i,e,n="/"){return vS(i,e,n,!1)}function vS(i,e,n,r){let o=typeof e=="string"?go(e):e,c=br(o.pathname||"/",n);if(c==null)return null;let f=Ex(i);xS(f);let p=null;for(let g=0;p==null&&g<f.length;++g){let y=kS(c);p=CS(f[g],y,r)}return p}function Ex(i,e=[],n=[],r=""){let o=(c,f,p)=>{let g={relativePath:p===void 0?c.path||"":p,caseSensitive:c.caseSensitive===!0,childrenIndex:f,route:c};g.relativePath.startsWith("/")&&(Ht(g.relativePath.startsWith(r),`Absolute route path "${g.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(r.length));let y=yr([r,g.relativePath]),w=n.concat(g);c.children&&c.children.length>0&&(Ht(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),Ex(c.children,e,w,y)),!(c.path==null&&!c.index)&&e.push({path:y,score:TS(y,c.index),routesMeta:w})};return i.forEach((c,f)=>{var p;if(c.path===""||!((p=c.path)!=null&&p.includes("?")))o(c,f);else for(let g of Ax(c.path))o(c,f,g)}),e}function Ax(i){let e=i.split("/");if(e.length===0)return[];let[n,...r]=e,o=n.endsWith("?"),c=n.replace(/\?$/,"");if(r.length===0)return o?[c,""]:[c];let f=Ax(r.join("/")),p=[];return p.push(...f.map(g=>g===""?c:[c,g].join("/"))),o&&p.push(...f),p.map(g=>i.startsWith("/")&&g===""?"/":g)}function xS(i){i.sort((e,n)=>e.score!==n.score?n.score-e.score:RS(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var bS=/^:[\w-]+$/,_S=3,wS=2,SS=1,ES=10,AS=-2,Dv=i=>i==="*";function TS(i,e){let n=i.split("/"),r=n.length;return n.some(Dv)&&(r+=AS),e&&(r+=wS),n.filter(o=>!Dv(o)).reduce((o,c)=>o+(bS.test(c)?_S:c===""?SS:ES),r)}function RS(i,e){return i.length===e.length&&i.slice(0,-1).every((r,o)=>r===e[o])?i[i.length-1]-e[e.length-1]:0}function CS(i,e,n=!1){let{routesMeta:r}=i,o={},c="/",f=[];for(let p=0;p<r.length;++p){let g=r[p],y=p===r.length-1,w=c==="/"?e:e.slice(c.length)||"/",S=Id({path:g.relativePath,caseSensitive:g.caseSensitive,end:y},w),A=g.route;if(!S&&y&&n&&!r[r.length-1].route.index&&(S=Id({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},w)),!S)return null;Object.assign(o,S.params),f.push({params:o,pathname:yr([c,S.pathname]),pathnameBase:OS(yr([c,S.pathnameBase])),route:A}),S.pathnameBase!=="/"&&(c=yr([c,S.pathnameBase]))}return f}function Id(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[n,r]=IS(i.path,i.caseSensitive,i.end),o=e.match(n);if(!o)return null;let c=o[0],f=c.replace(/(.)\/+$/,"$1"),p=o.slice(1);return{params:r.reduce((y,{paramName:w,isOptional:S},A)=>{if(w==="*"){let G=p[A]||"";f=c.slice(0,c.length-G.length).replace(/(.)\/+$/,"$1")}const F=p[A];return S&&!F?y[w]=void 0:y[w]=(F||"").replace(/%2F/g,"/"),y},{}),pathname:c,pathnameBase:f,pattern:i}}function IS(i,e=!1,n=!0){is(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let r=[],o="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,p,g)=>(r.push({paramName:p,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(r.push({paramName:"*"}),o+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":i!==""&&i!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),r]}function kS(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return is(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function br(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=i.charAt(n);return r&&r!=="/"?null:i.slice(n)||"/"}function NS(i,e="/"){let{pathname:n,search:r="",hash:o=""}=typeof i=="string"?go(i):i;return{pathname:n?n.startsWith("/")?n:jS(n,e):e,search:MS(r),hash:LS(o)}}function jS(i,e){let n=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function ym(i,e,n,r){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function DS(i){return i.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Tx(i){let e=DS(i);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function Rx(i,e,n,r=!1){let o;typeof i=="string"?o=go(i):(o={...i},Ht(!o.pathname||!o.pathname.includes("?"),ym("?","pathname","search",o)),Ht(!o.pathname||!o.pathname.includes("#"),ym("#","pathname","hash",o)),Ht(!o.search||!o.search.includes("#"),ym("#","search","hash",o)));let c=i===""||o.pathname==="",f=c?"/":o.pathname,p;if(f==null)p=n;else{let S=e.length-1;if(!r&&f.startsWith("..")){let A=f.split("/");for(;A[0]==="..";)A.shift(),S-=1;o.pathname=A.join("/")}p=S>=0?e[S]:"/"}let g=NS(o,p),y=f&&f!=="/"&&f.endsWith("/"),w=(c||f===".")&&n.endsWith("/");return!g.pathname.endsWith("/")&&(y||w)&&(g.pathname+="/"),g}var yr=i=>i.join("/").replace(/\/\/+/g,"/"),OS=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),MS=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,LS=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function VS(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}var Cx=["POST","PUT","PATCH","DELETE"];new Set(Cx);var PS=["GET",...Cx];new Set(PS);var _l=C.createContext(null);_l.displayName="DataRouter";var $d=C.createContext(null);$d.displayName="DataRouterState";var Ix=C.createContext({isTransitioning:!1});Ix.displayName="ViewTransition";var US=C.createContext(new Map);US.displayName="Fetchers";var BS=C.createContext(null);BS.displayName="Await";var Bs=C.createContext(null);Bs.displayName="Navigation";var Yc=C.createContext(null);Yc.displayName="Location";var zs=C.createContext({outlet:null,matches:[],isDataRoute:!1});zs.displayName="Route";var up=C.createContext(null);up.displayName="RouteError";function zS(i,{relative:e}={}){Ht(Qc(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=C.useContext(Bs),{hash:o,pathname:c,search:f}=$c(i,{relative:e}),p=c;return n!=="/"&&(p=c==="/"?n:yr([n,c])),r.createHref({pathname:p,search:f,hash:o})}function Qc(){return C.useContext(Yc)!=null}function as(){return Ht(Qc(),"useLocation() may be used only in the context of a <Router> component."),C.useContext(Yc).location}var kx="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Nx(i){C.useContext(Bs).static||C.useLayoutEffect(i)}function Fs(){let{isDataRoute:i}=C.useContext(zs);return i?tE():FS()}function FS(){Ht(Qc(),"useNavigate() may be used only in the context of a <Router> component.");let i=C.useContext(_l),{basename:e,navigator:n}=C.useContext(Bs),{matches:r}=C.useContext(zs),{pathname:o}=as(),c=JSON.stringify(Tx(r)),f=C.useRef(!1);return Nx(()=>{f.current=!0}),C.useCallback((g,y={})=>{if(is(f.current,kx),!f.current)return;if(typeof g=="number"){n.go(g);return}let w=Rx(g,JSON.parse(c),o,y.relative==="path");i==null&&e!=="/"&&(w.pathname=w.pathname==="/"?e:yr([e,w.pathname])),(y.replace?n.replace:n.push)(w,y.state,y)},[e,n,c,o,i])}C.createContext(null);function HS(){let{matches:i}=C.useContext(zs),e=i[i.length-1];return e?e.params:{}}function $c(i,{relative:e}={}){let{matches:n}=C.useContext(zs),{pathname:r}=as(),o=JSON.stringify(Tx(n));return C.useMemo(()=>Rx(i,JSON.parse(o),r,e==="path"),[i,o,r,e])}function qS(i,e){return jx(i,e)}function jx(i,e,n,r){var ee;Ht(Qc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=C.useContext(Bs),{matches:c}=C.useContext(zs),f=c[c.length-1],p=f?f.params:{},g=f?f.pathname:"/",y=f?f.pathnameBase:"/",w=f&&f.route;{let $=w&&w.path||"";Dx(g,!w||$.endsWith("*")||$.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${$}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${$}"> to <Route path="${$==="/"?"*":`${$}/*`}">.`)}let S=as(),A;if(e){let $=typeof e=="string"?go(e):e;Ht(y==="/"||((ee=$.pathname)==null?void 0:ee.startsWith(y)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${$.pathname}" was given in the \`location\` prop.`),A=$}else A=S;let F=A.pathname||"/",G=F;if(y!=="/"){let $=y.replace(/^\//,"").split("/");G="/"+F.replace(/^\//,"").split("/").slice($.length).join("/")}let q=Sx(i,{pathname:G});is(w||q!=null,`No routes matched location "${A.pathname}${A.search}${A.hash}" `),is(q==null||q[q.length-1].route.element!==void 0||q[q.length-1].route.Component!==void 0||q[q.length-1].route.lazy!==void 0,`Matched leaf route at location "${A.pathname}${A.search}${A.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let Q=KS(q&&q.map($=>Object.assign({},$,{params:Object.assign({},p,$.params),pathname:yr([y,o.encodeLocation?o.encodeLocation($.pathname).pathname:$.pathname]),pathnameBase:$.pathnameBase==="/"?y:yr([y,o.encodeLocation?o.encodeLocation($.pathnameBase).pathname:$.pathnameBase])})),c,n,r);return e&&Q?C.createElement(Yc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...A},navigationType:"POP"}},Q):Q}function GS(){let i=eE(),e=VS(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),n=i instanceof Error?i.stack:null,r="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:r},c={padding:"2px 4px",backgroundColor:r},f=null;return console.error("Error handled by React Router default ErrorBoundary:",i),f=C.createElement(C.Fragment,null,C.createElement("p",null," Hey developer "),C.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",C.createElement("code",{style:c},"ErrorBoundary")," or"," ",C.createElement("code",{style:c},"errorElement")," prop on your route.")),C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},e),n?C.createElement("pre",{style:o},n):null,f)}var WS=C.createElement(GS,null),XS=class extends C.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){console.error("React Router caught the following error during render",i,e)}render(){return this.state.error!==void 0?C.createElement(zs.Provider,{value:this.props.routeContext},C.createElement(up.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function ZS({routeContext:i,match:e,children:n}){let r=C.useContext(_l);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),C.createElement(zs.Provider,{value:i},n)}function KS(i,e=[],n=null,r=null){if(i==null){if(!n)return null;if(n.errors)i=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)i=n.matches;else return null}let o=i,c=n==null?void 0:n.errors;if(c!=null){let g=o.findIndex(y=>y.route.id&&(c==null?void 0:c[y.route.id])!==void 0);Ht(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),o=o.slice(0,Math.min(o.length,g+1))}let f=!1,p=-1;if(n)for(let g=0;g<o.length;g++){let y=o[g];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(p=g),y.route.id){let{loaderData:w,errors:S}=n,A=y.route.loader&&!w.hasOwnProperty(y.route.id)&&(!S||S[y.route.id]===void 0);if(y.route.lazy||A){f=!0,p>=0?o=o.slice(0,p+1):o=[o[0]];break}}}return o.reduceRight((g,y,w)=>{let S,A=!1,F=null,G=null;n&&(S=c&&y.route.id?c[y.route.id]:void 0,F=y.route.errorElement||WS,f&&(p<0&&w===0?(Dx("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),A=!0,G=null):p===w&&(A=!0,G=y.route.hydrateFallbackElement||null)));let q=e.concat(o.slice(0,w+1)),Q=()=>{let ee;return S?ee=F:A?ee=G:y.route.Component?ee=C.createElement(y.route.Component,null):y.route.element?ee=y.route.element:ee=g,C.createElement(ZS,{match:y,routeContext:{outlet:g,matches:q,isDataRoute:n!=null},children:ee})};return n&&(y.route.ErrorBoundary||y.route.errorElement||w===0)?C.createElement(XS,{location:n.location,revalidation:n.revalidation,component:F,error:S,children:Q(),routeContext:{outlet:null,matches:q,isDataRoute:!0}}):Q()},null)}function dp(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function YS(i){let e=C.useContext(_l);return Ht(e,dp(i)),e}function QS(i){let e=C.useContext($d);return Ht(e,dp(i)),e}function $S(i){let e=C.useContext(zs);return Ht(e,dp(i)),e}function hp(i){let e=$S(i),n=e.matches[e.matches.length-1];return Ht(n.route.id,`${i} can only be used on routes that contain a unique "id"`),n.route.id}function JS(){return hp("useRouteId")}function eE(){var r;let i=C.useContext(up),e=QS("useRouteError"),n=hp("useRouteError");return i!==void 0?i:(r=e.errors)==null?void 0:r[n]}function tE(){let{router:i}=YS("useNavigate"),e=hp("useNavigate"),n=C.useRef(!1);return Nx(()=>{n.current=!0}),C.useCallback(async(o,c={})=>{is(n.current,kx),n.current&&(typeof o=="number"?i.navigate(o):await i.navigate(o,{fromRouteId:e,...c}))},[i,e])}var Ov={};function Dx(i,e,n){!e&&!Ov[i]&&(Ov[i]=!0,is(!1,n))}C.memo(nE);function nE({routes:i,future:e,state:n}){return jx(i,void 0,n,e)}function mr(i){Ht(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function iE({basename:i="/",children:e=null,location:n,navigationType:r="POP",navigator:o,static:c=!1}){Ht(!Qc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=i.replace(/^\/*/,"/"),p=C.useMemo(()=>({basename:f,navigator:o,static:c,future:{}}),[f,o,c]);typeof n=="string"&&(n=go(n));let{pathname:g="/",search:y="",hash:w="",state:S=null,key:A="default"}=n,F=C.useMemo(()=>{let G=br(g,f);return G==null?null:{location:{pathname:G,search:y,hash:w,state:S,key:A},navigationType:r}},[f,g,y,w,S,A,r]);return is(F!=null,`<Router basename="${f}"> is not able to match the URL "${g}${y}${w}" because it does not start with the basename, so the <Router> won't render anything.`),F==null?null:C.createElement(Bs.Provider,{value:p},C.createElement(Yc.Provider,{children:e,value:F}))}function sE({children:i,location:e}){return qS(Lm(i),e)}function Lm(i,e=[]){let n=[];return C.Children.forEach(i,(r,o)=>{if(!C.isValidElement(r))return;let c=[...e,o];if(r.type===C.Fragment){n.push.apply(n,Lm(r.props.children,c));return}Ht(r.type===mr,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ht(!r.props.index||!r.props.children,"An index route cannot have child routes.");let f={id:r.props.id||c.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(f.children=Lm(r.props.children,c)),n.push(f)}),n}var gd="get",yd="application/x-www-form-urlencoded";function Jd(i){return i!=null&&typeof i.tagName=="string"}function rE(i){return Jd(i)&&i.tagName.toLowerCase()==="button"}function aE(i){return Jd(i)&&i.tagName.toLowerCase()==="form"}function oE(i){return Jd(i)&&i.tagName.toLowerCase()==="input"}function lE(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function cE(i,e){return i.button===0&&(!e||e==="_self")&&!lE(i)}var cd=null;function uE(){if(cd===null)try{new FormData(document.createElement("form"),0),cd=!1}catch{cd=!0}return cd}var dE=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function vm(i){return i!=null&&!dE.has(i)?(is(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${yd}"`),null):i}function hE(i,e){let n,r,o,c,f;if(aE(i)){let p=i.getAttribute("action");r=p?br(p,e):null,n=i.getAttribute("method")||gd,o=vm(i.getAttribute("enctype"))||yd,c=new FormData(i)}else if(rE(i)||oE(i)&&(i.type==="submit"||i.type==="image")){let p=i.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=i.getAttribute("formaction")||p.getAttribute("action");if(r=g?br(g,e):null,n=i.getAttribute("formmethod")||p.getAttribute("method")||gd,o=vm(i.getAttribute("formenctype"))||vm(p.getAttribute("enctype"))||yd,c=new FormData(p,i),!uE()){let{name:y,type:w,value:S}=i;if(w==="image"){let A=y?`${y}.`:"";c.append(`${A}x`,"0"),c.append(`${A}y`,"0")}else y&&c.append(y,S)}}else{if(Jd(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=gd,r=null,o=yd,f=i}return c&&o==="text/plain"&&(f=c,c=void 0),{action:r,method:n.toLowerCase(),encType:o,formData:c,body:f}}function fp(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}async function fE(i,e){if(i.id in e)return e[i.id];try{let n=await import(i.module);return e[i.id]=n,n}catch(n){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function mE(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function pE(i,e,n){let r=await Promise.all(i.map(async o=>{let c=e.routes[o.route.id];if(c){let f=await fE(c,n);return f.links?f.links():[]}return[]}));return xE(r.flat(1).filter(mE).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function Mv(i,e,n,r,o,c){let f=(g,y)=>n[y]?g.route.id!==n[y].route.id:!0,p=(g,y)=>{var w;return n[y].pathname!==g.pathname||((w=n[y].route.path)==null?void 0:w.endsWith("*"))&&n[y].params["*"]!==g.params["*"]};return c==="assets"?e.filter((g,y)=>f(g,y)||p(g,y)):c==="data"?e.filter((g,y)=>{var S;let w=r.routes[g.route.id];if(!w||!w.hasLoader)return!1;if(f(g,y)||p(g,y))return!0;if(g.route.shouldRevalidate){let A=g.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((S=n[0])==null?void 0:S.params)||{},nextUrl:new URL(i,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof A=="boolean")return A}return!0}):[]}function gE(i,e,{includeHydrateFallback:n}={}){return yE(i.map(r=>{let o=e.routes[r.route.id];if(!o)return[];let c=[o.module];return o.clientActionModule&&(c=c.concat(o.clientActionModule)),o.clientLoaderModule&&(c=c.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(c=c.concat(o.hydrateFallbackModule)),o.imports&&(c=c.concat(o.imports)),c}).flat(1))}function yE(i){return[...new Set(i)]}function vE(i){let e={},n=Object.keys(i).sort();for(let r of n)e[r]=i[r];return e}function xE(i,e){let n=new Set;return new Set(e),i.reduce((r,o)=>{let c=JSON.stringify(vE(o));return n.has(c)||(n.add(c),r.push({key:c,link:o})),r},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var bE=new Set([100,101,204,205]);function _E(i,e){let n=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return n.pathname==="/"?n.pathname="_root.data":e&&br(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function Ox(){let i=C.useContext(_l);return fp(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function wE(){let i=C.useContext($d);return fp(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var mp=C.createContext(void 0);mp.displayName="FrameworkContext";function Mx(){let i=C.useContext(mp);return fp(i,"You must render this element inside a <HydratedRouter> element"),i}function SE(i,e){let n=C.useContext(mp),[r,o]=C.useState(!1),[c,f]=C.useState(!1),{onFocus:p,onBlur:g,onMouseEnter:y,onMouseLeave:w,onTouchStart:S}=e,A=C.useRef(null);C.useEffect(()=>{if(i==="render"&&f(!0),i==="viewport"){let q=ee=>{ee.forEach($=>{f($.isIntersecting)})},Q=new IntersectionObserver(q,{threshold:.5});return A.current&&Q.observe(A.current),()=>{Q.disconnect()}}},[i]),C.useEffect(()=>{if(r){let q=setTimeout(()=>{f(!0)},100);return()=>{clearTimeout(q)}}},[r]);let F=()=>{o(!0)},G=()=>{o(!1),f(!1)};return n?i!=="intent"?[c,A,{}]:[c,A,{onFocus:bc(p,F),onBlur:bc(g,G),onMouseEnter:bc(y,F),onMouseLeave:bc(w,G),onTouchStart:bc(S,F)}]:[!1,A,{}]}function bc(i,e){return n=>{i&&i(n),n.defaultPrevented||e(n)}}function EE({page:i,...e}){let{router:n}=Ox(),r=C.useMemo(()=>Sx(n.routes,i,n.basename),[n.routes,i,n.basename]);return r?C.createElement(TE,{page:i,matches:r,...e}):null}function AE(i){let{manifest:e,routeModules:n}=Mx(),[r,o]=C.useState([]);return C.useEffect(()=>{let c=!1;return pE(i,e,n).then(f=>{c||o(f)}),()=>{c=!0}},[i,e,n]),r}function TE({page:i,matches:e,...n}){let r=as(),{manifest:o,routeModules:c}=Mx(),{basename:f}=Ox(),{loaderData:p,matches:g}=wE(),y=C.useMemo(()=>Mv(i,e,g,o,r,"data"),[i,e,g,o,r]),w=C.useMemo(()=>Mv(i,e,g,o,r,"assets"),[i,e,g,o,r]),S=C.useMemo(()=>{if(i===r.pathname+r.search+r.hash)return[];let G=new Set,q=!1;if(e.forEach(ee=>{var L;let $=o.routes[ee.route.id];!$||!$.hasLoader||(!y.some(pe=>pe.route.id===ee.route.id)&&ee.route.id in p&&((L=c[ee.route.id])!=null&&L.shouldRevalidate)||$.hasClientLoader?q=!0:G.add(ee.route.id))}),G.size===0)return[];let Q=_E(i,f);return q&&G.size>0&&Q.searchParams.set("_routes",e.filter(ee=>G.has(ee.route.id)).map(ee=>ee.route.id).join(",")),[Q.pathname+Q.search]},[f,p,r,o,y,e,i,c]),A=C.useMemo(()=>gE(w,o),[w,o]),F=AE(w);return C.createElement(C.Fragment,null,S.map(G=>C.createElement("link",{key:G,rel:"prefetch",as:"fetch",href:G,...n})),A.map(G=>C.createElement("link",{key:G,rel:"modulepreload",href:G,...n})),F.map(({key:G,link:q})=>C.createElement("link",{key:G,...q})))}function RE(...i){return e=>{i.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Lx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Lx&&(window.__reactRouterVersion="7.6.1")}catch{}function CE({basename:i,children:e,window:n}){let r=C.useRef();r.current==null&&(r.current=mS({window:n,v5Compat:!0}));let o=r.current,[c,f]=C.useState({action:o.action,location:o.location}),p=C.useCallback(g=>{C.startTransition(()=>f(g))},[f]);return C.useLayoutEffect(()=>o.listen(p),[o,p]),C.createElement(iE,{basename:i,children:e,location:c.location,navigationType:c.action,navigator:o})}var Vx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Px=C.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:o,reloadDocument:c,replace:f,state:p,target:g,to:y,preventScrollReset:w,viewTransition:S,...A},F){let{basename:G}=C.useContext(Bs),q=typeof y=="string"&&Vx.test(y),Q,ee=!1;if(typeof y=="string"&&q&&(Q=y,Lx))try{let k=new URL(window.location.href),M=y.startsWith("//")?new URL(k.protocol+y):new URL(y),N=br(M.pathname,G);M.origin===k.origin&&N!=null?y=N+M.search+M.hash:ee=!0}catch{is(!1,`<Link to="${y}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let $=zS(y,{relative:o}),[L,pe,de]=SE(r,A),xe=jE(y,{replace:f,state:p,target:g,preventScrollReset:w,relative:o,viewTransition:S});function V(k){e&&e(k),k.defaultPrevented||xe(k)}let R=C.createElement("a",{...A,...de,href:Q||$,onClick:ee||c?e:V,ref:RE(F,pe),target:g,"data-discover":!q&&n==="render"?"true":void 0});return L&&!q?C.createElement(C.Fragment,null,R,C.createElement(EE,{page:$})):R});Px.displayName="Link";var IE=C.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:o=!1,style:c,to:f,viewTransition:p,children:g,...y},w){let S=$c(f,{relative:y.relative}),A=as(),F=C.useContext($d),{navigator:G,basename:q}=C.useContext(Bs),Q=F!=null&&VE(S)&&p===!0,ee=G.encodeLocation?G.encodeLocation(S).pathname:S.pathname,$=A.pathname,L=F&&F.navigation&&F.navigation.location?F.navigation.location.pathname:null;n||($=$.toLowerCase(),L=L?L.toLowerCase():null,ee=ee.toLowerCase()),L&&q&&(L=br(L,q)||L);const pe=ee!=="/"&&ee.endsWith("/")?ee.length-1:ee.length;let de=$===ee||!o&&$.startsWith(ee)&&$.charAt(pe)==="/",xe=L!=null&&(L===ee||!o&&L.startsWith(ee)&&L.charAt(ee.length)==="/"),V={isActive:de,isPending:xe,isTransitioning:Q},R=de?e:void 0,k;typeof r=="function"?k=r(V):k=[r,de?"active":null,xe?"pending":null,Q?"transitioning":null].filter(Boolean).join(" ");let M=typeof c=="function"?c(V):c;return C.createElement(Px,{...y,"aria-current":R,className:k,ref:w,style:M,to:f,viewTransition:p},typeof g=="function"?g(V):g)});IE.displayName="NavLink";var kE=C.forwardRef(({discover:i="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:o,state:c,method:f=gd,action:p,onSubmit:g,relative:y,preventScrollReset:w,viewTransition:S,...A},F)=>{let G=ME(),q=LE(p,{relative:y}),Q=f.toLowerCase()==="get"?"get":"post",ee=typeof p=="string"&&Vx.test(p),$=L=>{if(g&&g(L),L.defaultPrevented)return;L.preventDefault();let pe=L.nativeEvent.submitter,de=(pe==null?void 0:pe.getAttribute("formmethod"))||f;G(pe||L.currentTarget,{fetcherKey:e,method:de,navigate:n,replace:o,state:c,relative:y,preventScrollReset:w,viewTransition:S})};return C.createElement("form",{ref:F,method:Q,action:q,onSubmit:r?g:$,...A,"data-discover":!ee&&i==="render"?"true":void 0})});kE.displayName="Form";function NE(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ux(i){let e=C.useContext(_l);return Ht(e,NE(i)),e}function jE(i,{target:e,replace:n,state:r,preventScrollReset:o,relative:c,viewTransition:f}={}){let p=Fs(),g=as(),y=$c(i,{relative:c});return C.useCallback(w=>{if(cE(w,e)){w.preventDefault();let S=n!==void 0?n:Pc(g)===Pc(y);p(i,{replace:S,state:r,preventScrollReset:o,relative:c,viewTransition:f})}},[g,p,y,n,r,e,i,o,c,f])}var DE=0,OE=()=>`__${String(++DE)}__`;function ME(){let{router:i}=Ux("useSubmit"),{basename:e}=C.useContext(Bs),n=JS();return C.useCallback(async(r,o={})=>{let{action:c,method:f,encType:p,formData:g,body:y}=hE(r,e);if(o.navigate===!1){let w=o.fetcherKey||OE();await i.fetch(w,n,o.action||c,{preventScrollReset:o.preventScrollReset,formData:g,body:y,formMethod:o.method||f,formEncType:o.encType||p,flushSync:o.flushSync})}else await i.navigate(o.action||c,{preventScrollReset:o.preventScrollReset,formData:g,body:y,formMethod:o.method||f,formEncType:o.encType||p,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[i,e,n])}function LE(i,{relative:e}={}){let{basename:n}=C.useContext(Bs),r=C.useContext(zs);Ht(r,"useFormAction must be used inside a RouteContext");let[o]=r.matches.slice(-1),c={...$c(i||".",{relative:e})},f=as();if(i==null){c.search=f.search;let p=new URLSearchParams(c.search),g=p.getAll("index");if(g.some(w=>w==="")){p.delete("index"),g.filter(S=>S).forEach(S=>p.append("index",S));let w=p.toString();c.search=w?`?${w}`:""}}return(!i||i===".")&&o.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(c.pathname=c.pathname==="/"?n:yr([n,c.pathname])),Pc(c)}function VE(i,e={}){let n=C.useContext(Ix);Ht(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Ux("useViewTransitionState"),o=$c(i,{relative:e.relative});if(!n.isTransitioning)return!1;let c=br(n.currentLocation.pathname,r)||n.currentLocation.pathname,f=br(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Id(o.pathname,f)!=null||Id(o.pathname,c)!=null}[...bE];var PE=wx();const UE=()=>{};var Lv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bx=function(i){const e=[];let n=0;for(let r=0;r<i.length;r++){let o=i.charCodeAt(r);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&r+1<i.length&&(i.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++r)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},BE=function(i){const e=[];let n=0,r=0;for(;n<i.length;){const o=i[n++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const c=i[n++];e[r++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=i[n++],f=i[n++],p=i[n++],g=((o&7)<<18|(c&63)<<12|(f&63)<<6|p&63)-65536;e[r++]=String.fromCharCode(55296+(g>>10)),e[r++]=String.fromCharCode(56320+(g&1023))}else{const c=i[n++],f=i[n++];e[r++]=String.fromCharCode((o&15)<<12|(c&63)<<6|f&63)}}return e.join("")},zx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<i.length;o+=3){const c=i[o],f=o+1<i.length,p=f?i[o+1]:0,g=o+2<i.length,y=g?i[o+2]:0,w=c>>2,S=(c&3)<<4|p>>4;let A=(p&15)<<2|y>>6,F=y&63;g||(F=64,f||(A=64)),r.push(n[w],n[S],n[A],n[F])}return r.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(Bx(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):BE(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<i.length;){const c=n[i.charAt(o++)],p=o<i.length?n[i.charAt(o)]:0;++o;const y=o<i.length?n[i.charAt(o)]:64;++o;const S=o<i.length?n[i.charAt(o)]:64;if(++o,c==null||p==null||y==null||S==null)throw new zE;const A=c<<2|p>>4;if(r.push(A),y!==64){const F=p<<4&240|y>>2;if(r.push(F),S!==64){const G=y<<6&192|S;r.push(G)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class zE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const FE=function(i){const e=Bx(i);return zx.encodeByteArray(e,!0)},kd=function(i){return FE(i).replace(/\./g,"")},Fx=function(i){try{return zx.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qE=()=>HE().__FIREBASE_DEFAULTS__,GE=()=>{if(typeof process>"u"||typeof Lv>"u")return;const i=Lv.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},WE=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&Fx(i[1]);return e&&JSON.parse(e)},eh=()=>{try{return UE()||qE()||GE()||WE()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},Hx=i=>{var e,n;return(n=(e=eh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[i]},XE=i=>{const e=Hx(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},qx=()=>{var i;return(i=eh())===null||i===void 0?void 0:i.config},Gx=i=>{var e;return(e=eh())===null||e===void 0?void 0:e[`_${i}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wl(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Wx(i){return(await fetch(i,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KE(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",o=i.iat||0,c=i.sub||i.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}}},i);return[kd(JSON.stringify(n)),kd(JSON.stringify(f)),""].join(".")}const Ic={};function YE(){const i={prod:[],emulator:[]};for(const e of Object.keys(Ic))Ic[e]?i.emulator.push(e):i.prod.push(e);return i}function QE(i){let e=document.getElementById(i),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),n=!0),{created:n,element:e}}let Vv=!1;function Xx(i,e){if(typeof window>"u"||typeof document>"u"||!wl(window.location.host)||Ic[i]===e||Ic[i]||Vv)return;Ic[i]=e;function n(A){return`__firebase__banner__${A}`}const r="__firebase__banner",c=YE().prod.length>0;function f(){const A=document.getElementById(r);A&&A.remove()}function p(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function g(A,F){A.setAttribute("width","24"),A.setAttribute("id",F),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function y(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{Vv=!0,f()},A}function w(A,F){A.setAttribute("id",F),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function S(){const A=QE(r),F=n("text"),G=document.getElementById(F)||document.createElement("span"),q=n("learnmore"),Q=document.getElementById(q)||document.createElement("a"),ee=n("preprendIcon"),$=document.getElementById(ee)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const L=A.element;p(L),w(Q,q);const pe=y();g($,ee),L.append($,G,Q,pe),document.body.appendChild(L)}c?(G.innerText="Preview backend disconnected.",$.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):($.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,G.innerText="Preview backend running in this workspace."),G.setAttribute("id",F)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",S):S()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function $E(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Fn())}function JE(){var i;const e=(i=eh())===null||i===void 0?void 0:i.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function eA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Zx(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function tA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function nA(){const i=Fn();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function iA(){return!JE()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Kx(){try{return typeof indexedDB=="object"}catch{return!1}}function Yx(){return new Promise((i,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(r),i(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var c;e(((c=o.error)===null||c===void 0?void 0:c.message)||"")}}catch(n){e(n)}})}function sA(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rA="FirebaseError";class os extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=rA,Object.setPrototypeOf(this,os.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,yo.prototype.create)}}class yo{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},o=`${this.service}/${e}`,c=this.errors[e],f=c?aA(c,r):"Error",p=`${this.serviceName}: ${f} (${o}).`;return new os(o,p,r)}}function aA(i,e){return i.replace(oA,(n,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const oA=/\{\$([^}]+)}/g;function lA(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function ga(i,e){if(i===e)return!0;const n=Object.keys(i),r=Object.keys(e);for(const o of n){if(!r.includes(o))return!1;const c=i[o],f=e[o];if(Pv(c)&&Pv(f)){if(!ga(c,f))return!1}else if(c!==f)return!1}for(const o of r)if(!n.includes(o))return!1;return!0}function Pv(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jc(i){const e=[];for(const[n,r]of Object.entries(i))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function wc(i){const e={};return i.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[o,c]=r.split("=");e[decodeURIComponent(o)]=decodeURIComponent(c)}}),e}function Sc(i){const e=i.indexOf("?");if(!e)return"";const n=i.indexOf("#",e);return i.substring(e,n>0?n:void 0)}function cA(i,e){const n=new uA(i,e);return n.subscribe.bind(n)}class uA{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let o;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");dA(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:r},o.next===void 0&&(o.next=xm),o.error===void 0&&(o.error=xm),o.complete===void 0&&(o.complete=xm);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function dA(i,e){if(typeof i!="object"||i===null)return!1;for(const n of e)if(n in i&&typeof i[n]=="function")return!0;return!1}function xm(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hA=1e3,fA=2,mA=4*60*60*1e3,pA=.5;function Uv(i,e=hA,n=fA){const r=e*Math.pow(n,i),o=Math.round(pA*r*(Math.random()-.5)*2);return Math.min(mA,r+o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zn(i){return i&&i._delegate?i._delegate:i}class ss{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ro="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new ZE;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(c){if(o)return null;throw c}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(vA(e))try{this.getOrInitializeService({instanceIdentifier:ro})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:o});r.resolve(c)}catch{}}}}clearInstance(e=ro){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ro){return this.instances.has(e)}getOptions(e=ro){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[c,f]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(c);r===p&&f.resolve(o)}return o}onInit(e,n){var r;const o=this.normalizeInstanceIdentifier(n),c=(r=this.onInitCallbacks.get(o))!==null&&r!==void 0?r:new Set;c.add(e),this.onInitCallbacks.set(o,c);const f=this.instances.get(o);return f&&e(f,o),()=>{c.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const o of r)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:yA(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ro){return this.component?this.component.multipleInstances?e:ro:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function yA(i){return i===ro?void 0:i}function vA(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new gA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lt;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(lt||(lt={}));const bA={debug:lt.DEBUG,verbose:lt.VERBOSE,info:lt.INFO,warn:lt.WARN,error:lt.ERROR,silent:lt.SILENT},_A=lt.INFO,wA={[lt.DEBUG]:"log",[lt.VERBOSE]:"log",[lt.INFO]:"info",[lt.WARN]:"warn",[lt.ERROR]:"error"},SA=(i,e,...n)=>{if(e<i.logLevel)return;const r=new Date().toISOString(),o=wA[e];if(o)console[o](`[${r}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class th{constructor(e){this.name=e,this._logLevel=_A,this._logHandler=SA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in lt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?bA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,lt.DEBUG,...e),this._logHandler(this,lt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,lt.VERBOSE,...e),this._logHandler(this,lt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,lt.INFO,...e),this._logHandler(this,lt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,lt.WARN,...e),this._logHandler(this,lt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,lt.ERROR,...e),this._logHandler(this,lt.ERROR,...e)}}const EA=(i,e)=>e.some(n=>i instanceof n);let Bv,zv;function AA(){return Bv||(Bv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function TA(){return zv||(zv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Qx=new WeakMap,Vm=new WeakMap,$x=new WeakMap,bm=new WeakMap,pp=new WeakMap;function RA(i){const e=new Promise((n,r)=>{const o=()=>{i.removeEventListener("success",c),i.removeEventListener("error",f)},c=()=>{n(ha(i.result)),o()},f=()=>{r(i.error),o()};i.addEventListener("success",c),i.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&Qx.set(n,i)}).catch(()=>{}),pp.set(e,i),e}function CA(i){if(Vm.has(i))return;const e=new Promise((n,r)=>{const o=()=>{i.removeEventListener("complete",c),i.removeEventListener("error",f),i.removeEventListener("abort",f)},c=()=>{n(),o()},f=()=>{r(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",c),i.addEventListener("error",f),i.addEventListener("abort",f)});Vm.set(i,e)}let Pm={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return Vm.get(i);if(e==="objectStoreNames")return i.objectStoreNames||$x.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ha(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function IA(i){Pm=i(Pm)}function kA(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=i.call(_m(this),e,...n);return $x.set(r,e.sort?e.sort():[e]),ha(r)}:TA().includes(i)?function(...e){return i.apply(_m(this),e),ha(Qx.get(this))}:function(...e){return ha(i.apply(_m(this),e))}}function NA(i){return typeof i=="function"?kA(i):(i instanceof IDBTransaction&&CA(i),EA(i,AA())?new Proxy(i,Pm):i)}function ha(i){if(i instanceof IDBRequest)return RA(i);if(bm.has(i))return bm.get(i);const e=NA(i);return e!==i&&(bm.set(i,e),pp.set(e,i)),e}const _m=i=>pp.get(i);function Jx(i,e,{blocked:n,upgrade:r,blocking:o,terminated:c}={}){const f=indexedDB.open(i,e),p=ha(f);return r&&f.addEventListener("upgradeneeded",g=>{r(ha(f.result),g.oldVersion,g.newVersion,ha(f.transaction),g)}),n&&f.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),p.then(g=>{c&&g.addEventListener("close",()=>c()),o&&g.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),p}const jA=["get","getKey","getAll","getAllKeys","count"],DA=["put","add","delete","clear"],wm=new Map;function Fv(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(wm.get(e))return wm.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,o=DA.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(o||jA.includes(n)))return;const c=async function(f,...p){const g=this.transaction(f,o?"readwrite":"readonly");let y=g.store;return r&&(y=y.index(p.shift())),(await Promise.all([y[n](...p),o&&g.done]))[0]};return wm.set(e,c),c}IA(i=>({...i,get:(e,n,r)=>Fv(e,n)||i.get(e,n,r),has:(e,n)=>!!Fv(e,n)||i.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(MA(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function MA(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Um="@firebase/app",Hv="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _r=new th("@firebase/app"),LA="@firebase/app-compat",VA="@firebase/analytics-compat",PA="@firebase/analytics",UA="@firebase/app-check-compat",BA="@firebase/app-check",zA="@firebase/auth",FA="@firebase/auth-compat",HA="@firebase/database",qA="@firebase/data-connect",GA="@firebase/database-compat",WA="@firebase/functions",XA="@firebase/functions-compat",ZA="@firebase/installations",KA="@firebase/installations-compat",YA="@firebase/messaging",QA="@firebase/messaging-compat",$A="@firebase/performance",JA="@firebase/performance-compat",eT="@firebase/remote-config",tT="@firebase/remote-config-compat",nT="@firebase/storage",iT="@firebase/storage-compat",sT="@firebase/firestore",rT="@firebase/ai",aT="@firebase/firestore-compat",oT="firebase",lT="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bm="[DEFAULT]",cT={[Um]:"fire-core",[LA]:"fire-core-compat",[PA]:"fire-analytics",[VA]:"fire-analytics-compat",[BA]:"fire-app-check",[UA]:"fire-app-check-compat",[zA]:"fire-auth",[FA]:"fire-auth-compat",[HA]:"fire-rtdb",[qA]:"fire-data-connect",[GA]:"fire-rtdb-compat",[WA]:"fire-fn",[XA]:"fire-fn-compat",[ZA]:"fire-iid",[KA]:"fire-iid-compat",[YA]:"fire-fcm",[QA]:"fire-fcm-compat",[$A]:"fire-perf",[JA]:"fire-perf-compat",[eT]:"fire-rc",[tT]:"fire-rc-compat",[nT]:"fire-gcs",[iT]:"fire-gcs-compat",[sT]:"fire-fst",[aT]:"fire-fst-compat",[rT]:"fire-vertex","fire-js":"fire-js",[oT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nd=new Map,uT=new Map,zm=new Map;function qv(i,e){try{i.container.addComponent(e)}catch(n){_r.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function Vs(i){const e=i.name;if(zm.has(e))return _r.debug(`There were multiple attempts to register component ${e}.`),!1;zm.set(e,i);for(const n of Nd.values())qv(n,i);for(const n of uT.values())qv(n,i);return!0}function vo(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}function Pi(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},fa=new yo("app","Firebase",dT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ss("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw fa.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sl=lT;function eb(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Bm,automaticDataCollectionEnabled:!0},e),o=r.name;if(typeof o!="string"||!o)throw fa.create("bad-app-name",{appName:String(o)});if(n||(n=qx()),!n)throw fa.create("no-options");const c=Nd.get(o);if(c){if(ga(n,c.options)&&ga(r,c.config))return c;throw fa.create("duplicate-app",{appName:o})}const f=new xA(o);for(const g of zm.values())f.addComponent(g);const p=new hT(n,r,f);return Nd.set(o,p),p}function gp(i=Bm){const e=Nd.get(i);if(!e&&i===Bm&&qx())return eb();if(!e)throw fa.create("no-app",{appName:i});return e}function zi(i,e,n){var r;let o=(r=cT[i])!==null&&r!==void 0?r:i;n&&(o+=`-${n}`);const c=o.match(/\s|\//),f=e.match(/\s|\//);if(c||f){const p=[`Unable to register library "${o}" with version "${e}":`];c&&p.push(`library name "${o}" contains illegal characters (whitespace or "/")`),c&&f&&p.push("and"),f&&p.push(`version name "${e}" contains illegal characters (whitespace or "/")`),_r.warn(p.join(" "));return}Vs(new ss(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fT="firebase-heartbeat-database",mT=1,Uc="firebase-heartbeat-store";let Sm=null;function tb(){return Sm||(Sm=Jx(fT,mT,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(Uc)}catch(n){console.warn(n)}}}}).catch(i=>{throw fa.create("idb-open",{originalErrorMessage:i.message})})),Sm}async function pT(i){try{const n=(await tb()).transaction(Uc),r=await n.objectStore(Uc).get(nb(i));return await n.done,r}catch(e){if(e instanceof os)_r.warn(e.message);else{const n=fa.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});_r.warn(n.message)}}}async function Gv(i,e){try{const r=(await tb()).transaction(Uc,"readwrite");await r.objectStore(Uc).put(e,nb(i)),await r.done}catch(n){if(n instanceof os)_r.warn(n.message);else{const r=fa.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});_r.warn(r.message)}}}function nb(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gT=1024,yT=30;class vT{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new bT(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=Wv();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(f=>f.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:o}),this._heartbeatsCache.heartbeats.length>yT){const f=_T(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(f,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){_r.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Wv(),{heartbeatsToSend:r,unsentEntries:o}=xT(this._heartbeatsCache.heartbeats),c=kd(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(n){return _r.warn(n),""}}}function Wv(){return new Date().toISOString().substring(0,10)}function xT(i,e=gT){const n=[];let r=i.slice();for(const o of i){const c=n.find(f=>f.agent===o.agent);if(c){if(c.dates.push(o.date),Xv(n)>e){c.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),Xv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class bT{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Kx()?Yx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await pT(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return Gv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return Gv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function Xv(i){return kd(JSON.stringify({version:2,heartbeats:i})).length}function _T(i){if(i.length===0)return-1;let e=0,n=i[0].date;for(let r=1;r<i.length;r++)i[r].date<n&&(n=i[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wT(i){Vs(new ss("platform-logger",e=>new OA(e),"PRIVATE")),Vs(new ss("heartbeat",e=>new vT(e),"PRIVATE")),zi(Um,Hv,i),zi(Um,Hv,"esm2017"),zi("fire-js","")}wT("");var ST="firebase",ET="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zi(ST,ET,"app");const ib="@firebase/installations",yp="0.6.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sb=1e4,rb=`w:${yp}`,ab="FIS_v2",AT="https://firebaseinstallations.googleapis.com/v1",TT=60*60*1e3,RT="installations",CT="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IT={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},co=new yo(RT,CT,IT);function ob(i){return i instanceof os&&i.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lb({projectId:i}){return`${AT}/projects/${i}/installations`}function cb(i){return{token:i.token,requestStatus:2,expiresIn:NT(i.expiresIn),creationTime:Date.now()}}async function ub(i,e){const r=(await e.json()).error;return co.create("request-failed",{requestName:i,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function db({apiKey:i}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":i})}function kT(i,{refreshToken:e}){const n=db(i);return n.append("Authorization",jT(e)),n}async function hb(i){const e=await i();return e.status>=500&&e.status<600?i():e}function NT(i){return Number(i.replace("s","000"))}function jT(i){return`${ab} ${i}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DT({appConfig:i,heartbeatServiceProvider:e},{fid:n}){const r=lb(i),o=db(i),c=e.getImmediate({optional:!0});if(c){const y=await c.getHeartbeatsHeader();y&&o.append("x-firebase-client",y)}const f={fid:n,authVersion:ab,appId:i.appId,sdkVersion:rb},p={method:"POST",headers:o,body:JSON.stringify(f)},g=await hb(()=>fetch(r,p));if(g.ok){const y=await g.json();return{fid:y.fid||n,registrationStatus:2,refreshToken:y.refreshToken,authToken:cb(y.authToken)}}else throw await ub("Create Installation",g)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fb(i){return new Promise(e=>{setTimeout(e,i)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OT(i){return btoa(String.fromCharCode(...i)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MT=/^[cdef][\w-]{21}$/,Fm="";function LT(){try{const i=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(i),i[0]=112+i[0]%16;const n=VT(i);return MT.test(n)?n:Fm}catch{return Fm}}function VT(i){return OT(i).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nh(i){return`${i.appName}!${i.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mb=new Map;function pb(i,e){const n=nh(i);gb(n,e),PT(n,e)}function gb(i,e){const n=mb.get(i);if(n)for(const r of n)r(e)}function PT(i,e){const n=UT();n&&n.postMessage({key:i,fid:e}),BT()}let ao=null;function UT(){return!ao&&"BroadcastChannel"in self&&(ao=new BroadcastChannel("[Firebase] FID Change"),ao.onmessage=i=>{gb(i.data.key,i.data.fid)}),ao}function BT(){mb.size===0&&ao&&(ao.close(),ao=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zT="firebase-installations-database",FT=1,uo="firebase-installations-store";let Em=null;function vp(){return Em||(Em=Jx(zT,FT,{upgrade:(i,e)=>{switch(e){case 0:i.createObjectStore(uo)}}})),Em}async function jd(i,e){const n=nh(i),o=(await vp()).transaction(uo,"readwrite"),c=o.objectStore(uo),f=await c.get(n);return await c.put(e,n),await o.done,(!f||f.fid!==e.fid)&&pb(i,e.fid),e}async function yb(i){const e=nh(i),r=(await vp()).transaction(uo,"readwrite");await r.objectStore(uo).delete(e),await r.done}async function ih(i,e){const n=nh(i),o=(await vp()).transaction(uo,"readwrite"),c=o.objectStore(uo),f=await c.get(n),p=e(f);return p===void 0?await c.delete(n):await c.put(p,n),await o.done,p&&(!f||f.fid!==p.fid)&&pb(i,p.fid),p}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xp(i){let e;const n=await ih(i.appConfig,r=>{const o=HT(r),c=qT(i,o);return e=c.registrationPromise,c.installationEntry});return n.fid===Fm?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function HT(i){const e=i||{fid:LT(),registrationStatus:0};return vb(e)}function qT(i,e){if(e.registrationStatus===0){if(!navigator.onLine){const o=Promise.reject(co.create("app-offline"));return{installationEntry:e,registrationPromise:o}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=GT(i,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:WT(i)}:{installationEntry:e}}async function GT(i,e){try{const n=await DT(i,e);return jd(i.appConfig,n)}catch(n){throw ob(n)&&n.customData.serverCode===409?await yb(i.appConfig):await jd(i.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function WT(i){let e=await Zv(i.appConfig);for(;e.registrationStatus===1;)await fb(100),e=await Zv(i.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await xp(i);return r||n}return e}function Zv(i){return ih(i,e=>{if(!e)throw co.create("installation-not-found");return vb(e)})}function vb(i){return XT(i)?{fid:i.fid,registrationStatus:0}:i}function XT(i){return i.registrationStatus===1&&i.registrationTime+sb<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZT({appConfig:i,heartbeatServiceProvider:e},n){const r=KT(i,n),o=kT(i,n),c=e.getImmediate({optional:!0});if(c){const y=await c.getHeartbeatsHeader();y&&o.append("x-firebase-client",y)}const f={installation:{sdkVersion:rb,appId:i.appId}},p={method:"POST",headers:o,body:JSON.stringify(f)},g=await hb(()=>fetch(r,p));if(g.ok){const y=await g.json();return cb(y)}else throw await ub("Generate Auth Token",g)}function KT(i,{fid:e}){return`${lb(i)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bp(i,e=!1){let n;const r=await ih(i.appConfig,c=>{if(!xb(c))throw co.create("not-registered");const f=c.authToken;if(!e&&$T(f))return c;if(f.requestStatus===1)return n=YT(i,e),c;{if(!navigator.onLine)throw co.create("app-offline");const p=eR(c);return n=QT(i,p),p}});return n?await n:r.authToken}async function YT(i,e){let n=await Kv(i.appConfig);for(;n.authToken.requestStatus===1;)await fb(100),n=await Kv(i.appConfig);const r=n.authToken;return r.requestStatus===0?bp(i,e):r}function Kv(i){return ih(i,e=>{if(!xb(e))throw co.create("not-registered");const n=e.authToken;return tR(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function QT(i,e){try{const n=await ZT(i,e),r=Object.assign(Object.assign({},e),{authToken:n});return await jd(i.appConfig,r),n}catch(n){if(ob(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await yb(i.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await jd(i.appConfig,r)}throw n}}function xb(i){return i!==void 0&&i.registrationStatus===2}function $T(i){return i.requestStatus===2&&!JT(i)}function JT(i){const e=Date.now();return e<i.creationTime||i.creationTime+i.expiresIn<e+TT}function eR(i){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},i),{authToken:e})}function tR(i){return i.requestStatus===1&&i.requestTime+sb<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nR(i){const e=i,{installationEntry:n,registrationPromise:r}=await xp(e);return r?r.catch(console.error):bp(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iR(i,e=!1){const n=i;return await sR(n),(await bp(n,e)).token}async function sR(i){const{registrationPromise:e}=await xp(i);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rR(i){if(!i||!i.options)throw Am("App Configuration");if(!i.name)throw Am("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!i.options[n])throw Am(n);return{appName:i.name,projectId:i.options.projectId,apiKey:i.options.apiKey,appId:i.options.appId}}function Am(i){return co.create("missing-app-config-values",{valueName:i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bb="installations",aR="installations-internal",oR=i=>{const e=i.getProvider("app").getImmediate(),n=rR(e),r=vo(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},lR=i=>{const e=i.getProvider("app").getImmediate(),n=vo(e,bb).getImmediate();return{getId:()=>nR(n),getToken:o=>iR(n,o)}};function cR(){Vs(new ss(bb,oR,"PUBLIC")),Vs(new ss(aR,lR,"PRIVATE"))}cR();zi(ib,yp);zi(ib,yp,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dd="analytics",uR="firebase_id",dR="origin",hR=60*1e3,fR="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",_p="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ri=new th("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mR={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},gi=new yo("analytics","Analytics",mR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pR(i){if(!i.startsWith(_p)){const e=gi.create("invalid-gtag-resource",{gtagURL:i});return ri.warn(e.message),""}return i}function _b(i){return Promise.all(i.map(e=>e.catch(n=>n)))}function gR(i,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(i,e)),n}function yR(i,e){const n=gR("firebase-js-sdk-policy",{createScriptURL:pR}),r=document.createElement("script"),o=`${_p}?l=${i}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(o):o,r.async=!0,document.head.appendChild(r)}function vR(i){let e=[];return Array.isArray(window[i])?e=window[i]:window[i]=e,e}async function xR(i,e,n,r,o,c){const f=r[o];try{if(f)await e[f];else{const g=(await _b(n)).find(y=>y.measurementId===o);g&&await e[g.appId]}}catch(p){ri.error(p)}i("config",o,c)}async function bR(i,e,n,r,o){try{let c=[];if(o&&o.send_to){let f=o.send_to;Array.isArray(f)||(f=[f]);const p=await _b(n);for(const g of f){const y=p.find(S=>S.measurementId===g),w=y&&e[y.appId];if(w)c.push(w);else{c=[];break}}}c.length===0&&(c=Object.values(e)),await Promise.all(c),i("event",r,o||{})}catch(c){ri.error(c)}}function _R(i,e,n,r){async function o(c,...f){try{if(c==="event"){const[p,g]=f;await bR(i,e,n,p,g)}else if(c==="config"){const[p,g]=f;await xR(i,e,n,r,p,g)}else if(c==="consent"){const[p,g]=f;i("consent",p,g)}else if(c==="get"){const[p,g,y]=f;i("get",p,g,y)}else if(c==="set"){const[p]=f;i("set",p)}else i(c,...f)}catch(p){ri.error(p)}}return o}function wR(i,e,n,r,o){let c=function(...f){window[r].push(arguments)};return window[o]&&typeof window[o]=="function"&&(c=window[o]),window[o]=_R(c,i,e,n),{gtagCore:c,wrappedGtag:window[o]}}function SR(i){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(_p)&&n.src.includes(i))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ER=30,AR=1e3;class TR{constructor(e={},n=AR){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const wb=new TR;function RR(i){return new Headers({Accept:"application/json","x-goog-api-key":i})}async function CR(i){var e;const{appId:n,apiKey:r}=i,o={method:"GET",headers:RR(r)},c=fR.replace("{app-id}",n),f=await fetch(c,o);if(f.status!==200&&f.status!==304){let p="";try{const g=await f.json();!((e=g.error)===null||e===void 0)&&e.message&&(p=g.error.message)}catch{}throw gi.create("config-fetch-failed",{httpStatus:f.status,responseMessage:p})}return f.json()}async function IR(i,e=wb,n){const{appId:r,apiKey:o,measurementId:c}=i.options;if(!r)throw gi.create("no-app-id");if(!o){if(c)return{measurementId:c,appId:r};throw gi.create("no-api-key")}const f=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},p=new jR;return setTimeout(async()=>{p.abort()},hR),Sb({appId:r,apiKey:o,measurementId:c},f,p,e)}async function Sb(i,{throttleEndTimeMillis:e,backoffCount:n},r,o=wb){var c;const{appId:f,measurementId:p}=i;try{await kR(r,e)}catch(g){if(p)return ri.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${p} provided in the "measurementId" field in the local Firebase config. [${g==null?void 0:g.message}]`),{appId:f,measurementId:p};throw g}try{const g=await CR(i);return o.deleteThrottleMetadata(f),g}catch(g){const y=g;if(!NR(y)){if(o.deleteThrottleMetadata(f),p)return ri.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${p} provided in the "measurementId" field in the local Firebase config. [${y==null?void 0:y.message}]`),{appId:f,measurementId:p};throw g}const w=Number((c=y==null?void 0:y.customData)===null||c===void 0?void 0:c.httpStatus)===503?Uv(n,o.intervalMillis,ER):Uv(n,o.intervalMillis),S={throttleEndTimeMillis:Date.now()+w,backoffCount:n+1};return o.setThrottleMetadata(f,S),ri.debug(`Calling attemptFetch again in ${w} millis`),Sb(i,S,r,o)}}function kR(i,e){return new Promise((n,r)=>{const o=Math.max(e-Date.now(),0),c=setTimeout(n,o);i.addEventListener(()=>{clearTimeout(c),r(gi.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function NR(i){if(!(i instanceof os)||!i.customData)return!1;const e=Number(i.customData.httpStatus);return e===429||e===500||e===503||e===504}class jR{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function DR(i,e,n,r,o){if(o&&o.global){i("event",n,r);return}else{const c=await e,f=Object.assign(Object.assign({},r),{send_to:c});i("event",n,f)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OR(){if(Kx())try{await Yx()}catch(i){return ri.warn(gi.create("indexeddb-unavailable",{errorInfo:i==null?void 0:i.toString()}).message),!1}else return ri.warn(gi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function MR(i,e,n,r,o,c,f){var p;const g=IR(i);g.then(F=>{n[F.measurementId]=F.appId,i.options.measurementId&&F.measurementId!==i.options.measurementId&&ri.warn(`The measurement ID in the local Firebase config (${i.options.measurementId}) does not match the measurement ID fetched from the server (${F.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(F=>ri.error(F)),e.push(g);const y=OR().then(F=>{if(F)return r.getId()}),[w,S]=await Promise.all([g,y]);SR(c)||yR(c,w.measurementId),o("js",new Date);const A=(p=f==null?void 0:f.config)!==null&&p!==void 0?p:{};return A[dR]="firebase",A.update=!0,S!=null&&(A[uR]=S),o("config",w.measurementId,A),w.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(e){this.app=e}_delete(){return delete kc[this.app.options.appId],Promise.resolve()}}let kc={},Yv=[];const Qv={};let Tm="dataLayer",VR="gtag",$v,Eb,Jv=!1;function PR(){const i=[];if(Zx()&&i.push("This is a browser extension environment."),sA()||i.push("Cookies are not available."),i.length>0){const e=i.map((r,o)=>`(${o+1}) ${r}`).join(" "),n=gi.create("invalid-analytics-context",{errorInfo:e});ri.warn(n.message)}}function UR(i,e,n){PR();const r=i.options.appId;if(!r)throw gi.create("no-app-id");if(!i.options.apiKey)if(i.options.measurementId)ri.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${i.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw gi.create("no-api-key");if(kc[r]!=null)throw gi.create("already-exists",{id:r});if(!Jv){vR(Tm);const{wrappedGtag:c,gtagCore:f}=wR(kc,Yv,Qv,Tm,VR);Eb=c,$v=f,Jv=!0}return kc[r]=MR(i,Yv,Qv,e,$v,Tm,n),new LR(i)}function BR(i=gp()){i=Zn(i);const e=vo(i,Dd);return e.isInitialized()?e.getImmediate():zR(i)}function zR(i,e={}){const n=vo(i,Dd);if(n.isInitialized()){const o=n.getImmediate();if(ga(e,n.getOptions()))return o;throw gi.create("already-initialized")}return n.initialize({options:e})}function FR(i,e,n,r){i=Zn(i),DR(Eb,kc[i.app.options.appId],e,n,r).catch(o=>ri.error(o))}const e1="@firebase/analytics",t1="0.10.17";function HR(){Vs(new ss(Dd,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("installations-internal").getImmediate();return UR(r,o,n)},"PUBLIC")),Vs(new ss("analytics-internal",i,"PRIVATE")),zi(e1,t1),zi(e1,t1,"esm2017");function i(e){try{const n=e.getProvider(Dd).getImmediate();return{logEvent:(r,o,c)=>FR(n,r,o,c)}}catch(n){throw gi.create("interop-component-reg-failed",{reason:n})}}}HR();function wp(i,e){var n={};for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&e.indexOf(r)<0&&(n[r]=i[r]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(i);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(i,r[o])&&(n[r[o]]=i[r[o]]);return n}function Ab(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const qR=Ab,Tb=new yo("auth","Firebase",Ab());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Od=new th("@firebase/auth");function GR(i,...e){Od.logLevel<=lt.WARN&&Od.warn(`Auth (${Sl}): ${i}`,...e)}function vd(i,...e){Od.logLevel<=lt.ERROR&&Od.error(`Auth (${Sl}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rs(i,...e){throw Sp(i,...e)}function Ns(i,...e){return Sp(i,...e)}function Rb(i,e,n){const r=Object.assign(Object.assign({},qR()),{[e]:n});return new yo("auth","Firebase",r).create(e,{appName:i.name})}function vr(i){return Rb(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Sp(i,...e){if(typeof i!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=i.name),i._errorFactory.create(n,...r)}return Tb.create(i,...e)}function Pe(i,e,...n){if(!i)throw Sp(e,...n)}function pr(i){const e="INTERNAL ASSERTION FAILED: "+i;throw vd(e),new Error(e)}function wr(i,e){i||pr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hm(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.href)||""}function WR(){return n1()==="http:"||n1()==="https:"}function n1(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(WR()||Zx()||"connection"in navigator)?navigator.onLine:!0}function ZR(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(e,n){this.shortDelay=e,this.longDelay=n,wr(n>e,"Short delay should be less than long delay!"),this.isMobile=$E()||tA()}get(){return XR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ep(i,e){wr(i.emulator,"Emulator should always be set here");const{url:n}=i.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cb{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;pr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;pr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;pr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],QR=new eu(3e4,6e4);function Ea(i,e){return i.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:i.tenantId}):e}async function Aa(i,e,n,r,o={}){return Ib(i,o,async()=>{let c={},f={};r&&(e==="GET"?f=r:c={body:JSON.stringify(r)});const p=Jc(Object.assign({key:i.config.apiKey},f)).slice(1),g=await i._getAdditionalHeaders();g["Content-Type"]="application/json",i.languageCode&&(g["X-Firebase-Locale"]=i.languageCode);const y=Object.assign({method:e,headers:g},c);return eA()||(y.referrerPolicy="no-referrer"),i.emulatorConfig&&wl(i.emulatorConfig.host)&&(y.credentials="include"),Cb.fetch()(await kb(i,i.config.apiHost,n,p),y)})}async function Ib(i,e,n){i._canInitEmulator=!1;const r=Object.assign(Object.assign({},KR),e);try{const o=new JR(i),c=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const f=await c.json();if("needConfirmation"in f)throw ud(i,"account-exists-with-different-credential",f);if(c.ok&&!("errorMessage"in f))return f;{const p=c.ok?f.errorMessage:f.error.message,[g,y]=p.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw ud(i,"credential-already-in-use",f);if(g==="EMAIL_EXISTS")throw ud(i,"email-already-in-use",f);if(g==="USER_DISABLED")throw ud(i,"user-disabled",f);const w=r[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw Rb(i,w,y);rs(i,w)}}catch(o){if(o instanceof os)throw o;rs(i,"network-request-failed",{message:String(o)})}}async function tu(i,e,n,r,o={}){const c=await Aa(i,e,n,r,o);return"mfaPendingCredential"in c&&rs(i,"multi-factor-auth-required",{_serverResponse:c}),c}async function kb(i,e,n,r){const o=`${e}${n}?${r}`,c=i,f=c.config.emulator?Ep(i.config,o):`${i.config.apiScheme}://${o}`;return YR.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(f).toString():f}function $R(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class JR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Ns(this.auth,"network-request-failed")),QR.get())})}}function ud(i,e,n){const r={appName:i.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const o=Ns(i,e,r);return o.customData._tokenResponse=n,o}function i1(i){return i!==void 0&&i.enterprise!==void 0}class eC{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return $R(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function tC(i,e){return Aa(i,"GET","/v2/recaptchaConfig",Ea(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nC(i,e){return Aa(i,"POST","/v1/accounts:delete",e)}async function Md(i,e){return Aa(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nc(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function iC(i,e=!1){const n=Zn(i),r=await n.getIdToken(e),o=Ap(r);Pe(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,f=c==null?void 0:c.sign_in_provider;return{claims:o,token:r,authTime:Nc(Rm(o.auth_time)),issuedAtTime:Nc(Rm(o.iat)),expirationTime:Nc(Rm(o.exp)),signInProvider:f||null,signInSecondFactor:(c==null?void 0:c.sign_in_second_factor)||null}}function Rm(i){return Number(i)*1e3}function Ap(i){const[e,n,r]=i.split(".");if(e===void 0||n===void 0||r===void 0)return vd("JWT malformed, contained fewer than 3 sections"),null;try{const o=Fx(n);return o?JSON.parse(o):(vd("Failed to decode base64 JWT payload"),null)}catch(o){return vd("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function s1(i){const e=Ap(i);return Pe(e,"internal-error"),Pe(typeof e.exp<"u","internal-error"),Pe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bc(i,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof os&&sC(r)&&i.auth.currentUser===i&&await i.auth.signOut(),r}}function sC({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const o=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Nc(this.lastLoginAt),this.creationTime=Nc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ld(i){var e;const n=i.auth,r=await i.getIdToken(),o=await Bc(i,Md(n,{idToken:r}));Pe(o==null?void 0:o.users.length,n,"internal-error");const c=o.users[0];i._notifyReloadListener(c);const f=!((e=c.providerUserInfo)===null||e===void 0)&&e.length?Nb(c.providerUserInfo):[],p=oC(i.providerData,f),g=i.isAnonymous,y=!(i.email&&c.passwordHash)&&!(p!=null&&p.length),w=g?y:!1,S={uid:c.localId,displayName:c.displayName||null,photoURL:c.photoUrl||null,email:c.email||null,emailVerified:c.emailVerified||!1,phoneNumber:c.phoneNumber||null,tenantId:c.tenantId||null,providerData:p,metadata:new qm(c.createdAt,c.lastLoginAt),isAnonymous:w};Object.assign(i,S)}async function aC(i){const e=Zn(i);await Ld(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function oC(i,e){return[...i.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function Nb(i){return i.map(e=>{var{providerId:n}=e,r=wp(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lC(i,e){const n=await Ib(i,{},async()=>{const r=Jc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:c}=i.config,f=await kb(i,o,"/v1/token",`key=${c}`),p=await i._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:p,body:r};return i.emulatorConfig&&wl(i.emulatorConfig.host)&&(g.credentials="include"),Cb.fetch()(f,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function cC(i,e){return Aa(i,"POST","/v2/accounts:revokeToken",Ea(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Pe(e.idToken,"internal-error"),Pe(typeof e.idToken<"u","internal-error"),Pe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):s1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Pe(e.length!==0,"internal-error");const n=s1(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Pe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:o,expiresIn:c}=await lC(e,n);this.updateTokensAndExpiration(r,o,Number(c))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:o,expirationTime:c}=n,f=new hl;return r&&(Pe(typeof r=="string","internal-error",{appName:e}),f.refreshToken=r),o&&(Pe(typeof o=="string","internal-error",{appName:e}),f.accessToken=o),c&&(Pe(typeof c=="number","internal-error",{appName:e}),f.expirationTime=c),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new hl,this.toJSON())}_performRefresh(){return pr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ra(i,e){Pe(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class ts{constructor(e){var{uid:n,auth:r,stsTokenManager:o}=e,c=wp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new rC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=c.displayName||null,this.email=c.email||null,this.emailVerified=c.emailVerified||!1,this.phoneNumber=c.phoneNumber||null,this.photoURL=c.photoURL||null,this.isAnonymous=c.isAnonymous||!1,this.tenantId=c.tenantId||null,this.providerData=c.providerData?[...c.providerData]:[],this.metadata=new qm(c.createdAt||void 0,c.lastLoginAt||void 0)}async getIdToken(e){const n=await Bc(this,this.stsTokenManager.getToken(this.auth,e));return Pe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return iC(this,e)}reload(){return aC(this)}_assign(e){this!==e&&(Pe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ts(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Ld(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Pi(this.auth.app))return Promise.reject(vr(this.auth));const e=await this.getIdToken();return await Bc(this,nC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,o,c,f,p,g,y,w;const S=(r=n.displayName)!==null&&r!==void 0?r:void 0,A=(o=n.email)!==null&&o!==void 0?o:void 0,F=(c=n.phoneNumber)!==null&&c!==void 0?c:void 0,G=(f=n.photoURL)!==null&&f!==void 0?f:void 0,q=(p=n.tenantId)!==null&&p!==void 0?p:void 0,Q=(g=n._redirectEventId)!==null&&g!==void 0?g:void 0,ee=(y=n.createdAt)!==null&&y!==void 0?y:void 0,$=(w=n.lastLoginAt)!==null&&w!==void 0?w:void 0,{uid:L,emailVerified:pe,isAnonymous:de,providerData:xe,stsTokenManager:V}=n;Pe(L&&V,e,"internal-error");const R=hl.fromJSON(this.name,V);Pe(typeof L=="string",e,"internal-error"),ra(S,e.name),ra(A,e.name),Pe(typeof pe=="boolean",e,"internal-error"),Pe(typeof de=="boolean",e,"internal-error"),ra(F,e.name),ra(G,e.name),ra(q,e.name),ra(Q,e.name),ra(ee,e.name),ra($,e.name);const k=new ts({uid:L,auth:e,email:A,emailVerified:pe,displayName:S,isAnonymous:de,photoURL:G,phoneNumber:F,tenantId:q,stsTokenManager:R,createdAt:ee,lastLoginAt:$});return xe&&Array.isArray(xe)&&(k.providerData=xe.map(M=>Object.assign({},M))),Q&&(k._redirectEventId=Q),k}static async _fromIdTokenResponse(e,n,r=!1){const o=new hl;o.updateFromServerResponse(n);const c=new ts({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await Ld(c),c}static async _fromGetAccountInfoResponse(e,n,r){const o=n.users[0];Pe(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?Nb(o.providerUserInfo):[],f=!(o.email&&o.passwordHash)&&!(c!=null&&c.length),p=new hl;p.updateFromIdToken(r);const g=new ts({uid:o.localId,auth:e,stsTokenManager:p,isAnonymous:f}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new qm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(c!=null&&c.length)};return Object.assign(g,y),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r1=new Map;function gr(i){wr(i instanceof Function,"Expected a class definition");let e=r1.get(i);return e?(wr(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,r1.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}jb.type="NONE";const a1=jb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xd(i,e,n){return`firebase:${i}:${e}:${n}`}class fl{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:o,name:c}=this.auth;this.fullUserKey=xd(this.userKey,o.apiKey,c),this.fullPersistenceKey=xd("persistence",o.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Md(this.auth,{idToken:e}).catch(()=>{});return n?ts._fromGetAccountInfoResponse(this.auth,n,e):null}return ts._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new fl(gr(a1),e,r);const o=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let c=o[0]||gr(a1);const f=xd(r,e.config.apiKey,e.name);let p=null;for(const y of n)try{const w=await y._get(f);if(w){let S;if(typeof w=="string"){const A=await Md(e,{idToken:w}).catch(()=>{});if(!A)break;S=await ts._fromGetAccountInfoResponse(e,A,w)}else S=ts._fromJSON(e,w);y!==c&&(p=S),c=y;break}}catch{}const g=o.filter(y=>y._shouldAllowMigration);return!c._shouldAllowMigration||!g.length?new fl(c,e,r):(c=g[0],p&&await c._set(f,p.toJSON()),await Promise.all(n.map(async y=>{if(y!==c)try{await y._remove(f)}catch{}})),new fl(c,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o1(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Lb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Db(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Pb(e))return"Blackberry";if(Ub(e))return"Webos";if(Ob(e))return"Safari";if((e.includes("chrome/")||Mb(e))&&!e.includes("edge/"))return"Chrome";if(Vb(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=i.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Db(i=Fn()){return/firefox\//i.test(i)}function Ob(i=Fn()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Mb(i=Fn()){return/crios\//i.test(i)}function Lb(i=Fn()){return/iemobile/i.test(i)}function Vb(i=Fn()){return/android/i.test(i)}function Pb(i=Fn()){return/blackberry/i.test(i)}function Ub(i=Fn()){return/webos/i.test(i)}function Tp(i=Fn()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function uC(i=Fn()){var e;return Tp(i)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function dC(){return nA()&&document.documentMode===10}function Bb(i=Fn()){return Tp(i)||Vb(i)||Ub(i)||Pb(i)||/windows phone/i.test(i)||Lb(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zb(i,e=[]){let n;switch(i){case"Browser":n=o1(Fn());break;case"Worker":n=`${o1(Fn())}-${i}`;break;default:n=i}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Sl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=c=>new Promise((f,p)=>{try{const g=e(c);f(g)}catch(g){p(g)}});r.onAbort=n,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fC(i,e={}){return Aa(i,"GET","/v2/passwordPolicy",Ea(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mC=6;class pC{constructor(e){var n,r,o,c;const f=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=f.minPasswordLength)!==null&&n!==void 0?n:mC,f.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=f.maxPasswordLength),f.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=f.containsLowercaseCharacter),f.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=f.containsUppercaseCharacter),f.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=f.containsNumericCharacter),f.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=f.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(c=e.forceUpgradeOnSignin)!==null&&c!==void 0?c:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,o,c,f,p;const g={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,g),this.validatePasswordCharacterOptions(e,g),g.isValid&&(g.isValid=(n=g.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),g.isValid&&(g.isValid=(r=g.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),g.isValid&&(g.isValid=(o=g.containsLowercaseLetter)!==null&&o!==void 0?o:!0),g.isValid&&(g.isValid=(c=g.containsUppercaseLetter)!==null&&c!==void 0?c:!0),g.isValid&&(g.isValid=(f=g.containsNumericCharacter)!==null&&f!==void 0?f:!0),g.isValid&&(g.isValid=(p=g.containsNonAlphanumericCharacter)!==null&&p!==void 0?p:!0),g}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,o,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(e,n,r,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new l1(this),this.idTokenSubscription=new l1(this),this.beforeStateQueue=new hC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Tb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=gr(n)),this._initializationPromise=this.queue(async()=>{var r,o,c;if(!this._deleted&&(this.persistenceManager=await fl.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((c=this.currentUser)===null||c===void 0?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Md(this,{idToken:e}),r=await ts._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Pi(this.app)){const f=this.app.settings.authIdToken;return f?new Promise(p=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(f).then(p,p))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let o=r,c=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const f=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,p=o==null?void 0:o._redirectEventId,g=await this.tryRedirectSignIn(e);(!f||f===p)&&(g!=null&&g.user)&&(o=g.user,c=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(c)try{await this.beforeStateQueue.runMiddleware(o)}catch(f){o=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(f))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Pe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ld(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=ZR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Pi(this.app))return Promise.reject(vr(this));const n=e?Zn(e):null;return n&&Pe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Pe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Pi(this.app)?Promise.reject(vr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Pi(this.app)?Promise.reject(vr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(gr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await fC(this),n=new pC(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new yo("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await cC(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&gr(e)||this._popupRedirectResolver;Pe(n,this,"argument-error"),this.redirectPersistenceManager=await fl.create(this,[gr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,o){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let f=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(Pe(p,this,"internal-error"),p.then(()=>{f||c(this.currentUser)}),typeof n=="function"){const g=e.addObserver(n,r,o);return()=>{f=!0,g()}}else{const g=e.addObserver(n);return()=>{f=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=zb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const o=await this._getAppCheckToken();return o&&(n["X-Firebase-AppCheck"]=o),n}async _getAppCheckToken(){var e;if(Pi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&GR(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function xo(i){return Zn(i)}class l1{constructor(e){this.auth=e,this.observer=null,this.addObserver=cA(n=>this.observer=n)}get next(){return Pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function yC(i){sh=i}function Fb(i){return sh.loadJS(i)}function vC(){return sh.recaptchaEnterpriseScript}function xC(){return sh.gapiScript}function bC(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class _C{constructor(){this.enterprise=new wC}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class wC{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const SC="recaptcha-enterprise",Hb="NO_RECAPTCHA";class EC{constructor(e){this.type=SC,this.auth=xo(e)}async verify(e="verify",n=!1){async function r(c){if(!n){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(f,p)=>{tC(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const y=new eC(g);return c.tenantId==null?c._agentRecaptchaConfig=y:c._tenantRecaptchaConfigs[c.tenantId]=y,f(y.siteKey)}}).catch(g=>{p(g)})})}function o(c,f,p){const g=window.grecaptcha;i1(g)?g.enterprise.ready(()=>{g.enterprise.execute(c,{action:e}).then(y=>{f(y)}).catch(()=>{f(Hb)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new _C().execute("siteKey",{action:"verify"}):new Promise((c,f)=>{r(this.auth).then(p=>{if(!n&&i1(window.grecaptcha))o(p,c,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let g=vC();g.length!==0&&(g+=p),Fb(g).then(()=>{o(p,c,f)}).catch(y=>{f(y)})}}).catch(p=>{f(p)})})}}async function c1(i,e,n,r=!1,o=!1){const c=new EC(i);let f;if(o)f=Hb;else try{f=await c.verify(n)}catch{f=await c.verify(n,!0)}const p=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const g=p.phoneEnrollmentInfo.phoneNumber,y=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:y,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const g=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return r?Object.assign(p,{captchaResp:f}):Object.assign(p,{captchaResponse:f}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function Gm(i,e,n,r,o){var c;if(!((c=i._getRecaptchaConfig())===null||c===void 0)&&c.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const f=await c1(i,e,n,n==="getOobCode");return r(i,f)}else return r(i,e).catch(async f=>{if(f.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const p=await c1(i,e,n,n==="getOobCode");return r(i,p)}else return Promise.reject(f)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AC(i,e){const n=vo(i,"auth");if(n.isInitialized()){const o=n.getImmediate(),c=n.getOptions();if(ga(c,e??{}))return o;rs(o,"already-initialized")}return n.initialize({options:e})}function TC(i,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(gr);e!=null&&e.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function RC(i,e,n){const r=xo(i);Pe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,c=qb(e),{host:f,port:p}=CC(e),g=p===null?"":`:${p}`,y={url:`${c}//${f}${g}/`},w=Object.freeze({host:f,port:p,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){Pe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Pe(ga(y,r.config.emulator)&&ga(w,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=y,r.emulatorConfig=w,r.settings.appVerificationDisabledForTesting=!0,wl(f)?(Wx(`${c}//${f}${g}`),Xx("Auth",!0)):IC()}function qb(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function CC(i){const e=qb(i),n=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const c=o[1];return{host:c,port:u1(r.substr(c.length+1))}}else{const[c,f]=r.split(":");return{host:c,port:u1(f)}}}function u1(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function IC(){function i(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return pr("not implemented")}_getIdTokenResponse(e){return pr("not implemented")}_linkToIdToken(e,n){return pr("not implemented")}_getReauthenticationResolver(e){return pr("not implemented")}}async function kC(i,e){return Aa(i,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NC(i,e){return tu(i,"POST","/v1/accounts:signInWithPassword",Ea(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jC(i,e){return tu(i,"POST","/v1/accounts:signInWithEmailLink",Ea(i,e))}async function DC(i,e){return tu(i,"POST","/v1/accounts:signInWithEmailLink",Ea(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc extends Rp{constructor(e,n,r,o=null){super("password",r),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new zc(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new zc(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Gm(e,n,"signInWithPassword",NC);case"emailLink":return jC(e,{email:this._email,oobCode:this._password});default:rs(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Gm(e,r,"signUpPassword",kC);case"emailLink":return DC(e,{idToken:n,email:this._email,oobCode:this._password});default:rs(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ml(i,e){return tu(i,"POST","/v1/accounts:signInWithIdp",Ea(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC="http://localhost";class ho extends Rp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ho(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):rs("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o}=n,c=wp(n,["providerId","signInMethod"]);if(!r||!o)return null;const f=new ho(r,o);return f.idToken=c.idToken||void 0,f.accessToken=c.accessToken||void 0,f.secret=c.secret,f.nonce=c.nonce,f.pendingToken=c.pendingToken||null,f}_getIdTokenResponse(e){const n=this.buildRequest();return ml(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ml(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ml(e,n)}buildRequest(){const e={requestUri:OC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Jc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MC(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function LC(i){const e=wc(Sc(i)).link,n=e?wc(Sc(e)).deep_link_id:null,r=wc(Sc(i)).deep_link_id;return(r?wc(Sc(r)).link:null)||r||n||e||i}class Cp{constructor(e){var n,r,o,c,f,p;const g=wc(Sc(e)),y=(n=g.apiKey)!==null&&n!==void 0?n:null,w=(r=g.oobCode)!==null&&r!==void 0?r:null,S=MC((o=g.mode)!==null&&o!==void 0?o:null);Pe(y&&w&&S,"argument-error"),this.apiKey=y,this.operation=S,this.code=w,this.continueUrl=(c=g.continueUrl)!==null&&c!==void 0?c:null,this.languageCode=(f=g.lang)!==null&&f!==void 0?f:null,this.tenantId=(p=g.tenantId)!==null&&p!==void 0?p:null}static parseLink(e){const n=LC(e);try{return new Cp(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(){this.providerId=El.PROVIDER_ID}static credential(e,n){return zc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Cp.parseLink(n);return Pe(r,"argument-error"),zc._fromEmailAndCode(e,r.code,r.tenantId)}}El.PROVIDER_ID="password";El.EMAIL_PASSWORD_SIGN_IN_METHOD="password";El.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu extends Gb{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa extends nu{constructor(){super("facebook.com")}static credential(e){return ho._fromParams({providerId:oa.PROVIDER_ID,signInMethod:oa.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return oa.credentialFromTaggedObject(e)}static credentialFromError(e){return oa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return oa.credential(e.oauthAccessToken)}catch{return null}}}oa.FACEBOOK_SIGN_IN_METHOD="facebook.com";oa.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la extends nu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ho._fromParams({providerId:la.PROVIDER_ID,signInMethod:la.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return la.credentialFromTaggedObject(e)}static credentialFromError(e){return la.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return la.credential(n,r)}catch{return null}}}la.GOOGLE_SIGN_IN_METHOD="google.com";la.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca extends nu{constructor(){super("github.com")}static credential(e){return ho._fromParams({providerId:ca.PROVIDER_ID,signInMethod:ca.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ca.credentialFromTaggedObject(e)}static credentialFromError(e){return ca.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ca.credential(e.oauthAccessToken)}catch{return null}}}ca.GITHUB_SIGN_IN_METHOD="github.com";ca.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua extends nu{constructor(){super("twitter.com")}static credential(e,n){return ho._fromParams({providerId:ua.PROVIDER_ID,signInMethod:ua.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ua.credentialFromTaggedObject(e)}static credentialFromError(e){return ua.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ua.credential(n,r)}catch{return null}}}ua.TWITTER_SIGN_IN_METHOD="twitter.com";ua.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VC(i,e){return tu(i,"POST","/v1/accounts:signUp",Ea(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,o=!1){const c=await ts._fromIdTokenResponse(e,r,o),f=d1(r);return new fo({user:c,providerId:f,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const o=d1(r);return new fo({user:e,providerId:o,_tokenResponse:r,operationType:n})}}function d1(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd extends os{constructor(e,n,r,o){var c;super(n.code,n.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,Vd.prototype),this.customData={appName:e.name,tenantId:(c=e.tenantId)!==null&&c!==void 0?c:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,o){return new Vd(e,n,r,o)}}function Wb(i,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(i):n._getIdTokenResponse(i)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Vd._fromErrorAndOperation(i,c,e,r):c})}async function PC(i,e,n=!1){const r=await Bc(i,e._linkToIdToken(i.auth,await i.getIdToken()),n);return fo._forOperation(i,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UC(i,e,n=!1){const{auth:r}=i;if(Pi(r.app))return Promise.reject(vr(r));const o="reauthenticate";try{const c=await Bc(i,Wb(r,o,e,i),n);Pe(c.idToken,r,"internal-error");const f=Ap(c.idToken);Pe(f,r,"internal-error");const{sub:p}=f;return Pe(i.uid===p,r,"user-mismatch"),fo._forOperation(i,o,c)}catch(c){throw(c==null?void 0:c.code)==="auth/user-not-found"&&rs(r,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xb(i,e,n=!1){if(Pi(i.app))return Promise.reject(vr(i));const r="signIn",o=await Wb(i,r,e),c=await fo._fromIdTokenResponse(i,r,o);return n||await i._updateCurrentUser(c.user),c}async function BC(i,e){return Xb(xo(i),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zb(i){const e=xo(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function zC(i,e,n){if(Pi(i.app))return Promise.reject(vr(i));const r=xo(i),f=await Gm(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",VC).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&Zb(i),g}),p=await fo._fromIdTokenResponse(r,"signIn",f);return await r._updateCurrentUser(p.user),p}function FC(i,e,n){return Pi(i.app)?Promise.reject(vr(i)):BC(Zn(i),El.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Zb(i),r})}function HC(i,e,n,r){return Zn(i).onIdTokenChanged(e,n,r)}function qC(i,e,n){return Zn(i).beforeAuthStateChanged(e,n)}function Ip(i,e,n,r){return Zn(i).onAuthStateChanged(e,n,r)}function GC(i){return Zn(i).signOut()}const Pd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Pd,"1"),this.storage.removeItem(Pd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WC=1e3,XC=10;class Yb extends Kb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Bb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),o=this.localCache[n];r!==o&&e(n,o,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((f,p,g)=>{this.notifyListeners(f,g)});return}const r=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const f=this.storage.getItem(r);!n&&this.localCache[r]===f||this.notifyListeners(r,f)},c=this.storage.getItem(r);dC()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,XC):o()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},WC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Yb.type="LOCAL";const ZC=Yb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb extends Kb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Qb.type="SESSION";const $b=Qb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KC(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const r=new rh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:o,data:c}=n.data,f=this.handlersMap[o];if(!(f!=null&&f.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const p=Array.from(f).map(async y=>y(n.origin,c)),g=await KC(p);n.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:g})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}rh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kp(i="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return i+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,f;return new Promise((p,g)=>{const y=kp("",20);o.port1.start();const w=setTimeout(()=>{g(new Error("unsupported_event"))},r);f={messageChannel:o,onMessage(S){const A=S;if(A.data.eventId===y)switch(A.data.status){case"ack":clearTimeout(w),c=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),p(A.data.response);break;default:clearTimeout(w),clearTimeout(c),g(new Error("invalid_response"));break}}},this.handlers.add(f),o.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:y,data:n},[o.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function js(){return window}function QC(i){js().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jb(){return typeof js().WorkerGlobalScope<"u"&&typeof js().importScripts=="function"}async function $C(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function JC(){var i;return((i=navigator==null?void 0:navigator.serviceWorker)===null||i===void 0?void 0:i.controller)||null}function e5(){return Jb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e2="firebaseLocalStorageDb",t5=1,Ud="firebaseLocalStorage",t2="fbase_key";class iu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function ah(i,e){return i.transaction([Ud],e?"readwrite":"readonly").objectStore(Ud)}function n5(){const i=indexedDB.deleteDatabase(e2);return new iu(i).toPromise()}function Wm(){const i=indexedDB.open(e2,t5);return new Promise((e,n)=>{i.addEventListener("error",()=>{n(i.error)}),i.addEventListener("upgradeneeded",()=>{const r=i.result;try{r.createObjectStore(Ud,{keyPath:t2})}catch(o){n(o)}}),i.addEventListener("success",async()=>{const r=i.result;r.objectStoreNames.contains(Ud)?e(r):(r.close(),await n5(),e(await Wm()))})})}async function h1(i,e,n){const r=ah(i,!0).put({[t2]:e,value:n});return new iu(r).toPromise()}async function i5(i,e){const n=ah(i,!1).get(e),r=await new iu(n).toPromise();return r===void 0?null:r.value}function f1(i,e){const n=ah(i,!0).delete(e);return new iu(n).toPromise()}const s5=800,r5=3;class n2{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Wm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>r5)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Jb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=rh._getInstance(e5()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await $C(),!this.activeServiceWorker)return;this.sender=new YC(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||JC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Wm();return await h1(e,Pd,"1"),await f1(e,Pd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>h1(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>i5(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>f1(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const c=ah(o,!1).getAll();return new iu(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:c}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),s5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}n2.type="LOCAL";const a5=n2;new eu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o5(i,e){return e?gr(e):(Pe(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np extends Rp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ml(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ml(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ml(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function l5(i){return Xb(i.auth,new Np(i),i.bypassAuthState)}function c5(i){const{auth:e,user:n}=i;return Pe(n,e,"internal-error"),UC(n,new Np(i),i.bypassAuthState)}async function u5(i){const{auth:e,user:n}=i;return Pe(n,e,"internal-error"),PC(n,new Np(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(e,n,r,o,c=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:o,tenantId:c,error:f,type:p}=e;if(f){this.reject(f);return}const g={auth:this.auth,requestUri:n,sessionId:r,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return l5;case"linkViaPopup":case"linkViaRedirect":return u5;case"reauthViaPopup":case"reauthViaRedirect":return c5;default:rs(this.auth,"internal-error")}}resolve(e){wr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){wr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d5=new eu(2e3,1e4);class dl extends i2{constructor(e,n,r,o,c){super(e,n,o,c),this.provider=r,this.authWindow=null,this.pollId=null,dl.currentPopupAction&&dl.currentPopupAction.cancel(),dl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Pe(e,this.auth,"internal-error"),e}async onExecution(){wr(this.filter.length===1,"Popup operations only handle one event");const e=kp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ns(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ns(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,dl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ns(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,d5.get())};e()}}dl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h5="pendingRedirect",bd=new Map;class f5 extends i2{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=bd.get(this.auth._key());if(!e){try{const r=await m5(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}bd.set(this.auth._key(),e)}return this.bypassAuthState||bd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function m5(i,e){const n=y5(e),r=g5(i);if(!await r._isAvailable())return!1;const o=await r._get(n)==="true";return await r._remove(n),o}function p5(i,e){bd.set(i._key(),e)}function g5(i){return gr(i._redirectPersistence)}function y5(i){return xd(h5,i.config.apiKey,i.name)}async function v5(i,e,n=!1){if(Pi(i.app))return Promise.reject(vr(i));const r=xo(i),o=o5(r,e),f=await new f5(r,o,n).execute();return f&&!n&&(delete f.user._redirectEventId,await r._persistUserIfCurrent(f.user),await r._setRedirectUser(null,e)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x5=10*60*1e3;class b5{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!_5(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!s2(e)){const o=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Ns(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=x5&&this.cachedEventUids.clear(),this.cachedEventUids.has(m1(e))}saveEventToCache(e){this.cachedEventUids.add(m1(e)),this.lastProcessedEventTime=Date.now()}}function m1(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function s2({type:i,error:e}){return i==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function _5(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return s2(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w5(i,e={}){return Aa(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S5=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,E5=/^https?/;async function A5(i){if(i.config.emulator)return;const{authorizedDomains:e}=await w5(i);for(const n of e)try{if(T5(n))return}catch{}rs(i,"unauthorized-domain")}function T5(i){const e=Hm(),{protocol:n,hostname:r}=new URL(e);if(i.startsWith("chrome-extension://")){const f=new URL(i);return f.hostname===""&&r===""?n==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===r}if(!E5.test(n))return!1;if(S5.test(i))return r===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R5=new eu(3e4,6e4);function p1(){const i=js().___jsl;if(i!=null&&i.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let n=0;n<i.CP.length;n++)i.CP[n]=null}}function C5(i){return new Promise((e,n)=>{var r,o,c;function f(){p1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{p1(),n(Ns(i,"network-request-failed"))},timeout:R5.get()})}if(!((o=(r=js().gapi)===null||r===void 0?void 0:r.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((c=js().gapi)===null||c===void 0)&&c.load)f();else{const p=bC("iframefcb");return js()[p]=()=>{gapi.load?f():n(Ns(i,"network-request-failed"))},Fb(`${xC()}?onload=${p}`).catch(g=>n(g))}}).catch(e=>{throw _d=null,e})}let _d=null;function I5(i){return _d=_d||C5(i),_d}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k5=new eu(5e3,15e3),N5="__/auth/iframe",j5="emulator/auth/iframe",D5={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},O5=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function M5(i){const e=i.config;Pe(e.authDomain,i,"auth-domain-config-required");const n=e.emulator?Ep(e,j5):`https://${i.config.authDomain}/${N5}`,r={apiKey:e.apiKey,appName:i.name,v:Sl},o=O5.get(i.config.apiHost);o&&(r.eid=o);const c=i._getFrameworks();return c.length&&(r.fw=c.join(",")),`${n}?${Jc(r).slice(1)}`}async function L5(i){const e=await I5(i),n=js().gapi;return Pe(n,i,"internal-error"),e.open({where:document.body,url:M5(i),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:D5,dontclear:!0},r=>new Promise(async(o,c)=>{await r.restyle({setHideOnLeave:!1});const f=Ns(i,"network-request-failed"),p=js().setTimeout(()=>{c(f)},k5.get());function g(){js().clearTimeout(p),o(r)}r.ping(g).then(g,()=>{c(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V5={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},P5=500,U5=600,B5="_blank",z5="http://localhost";class g1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function F5(i,e,n,r=P5,o=U5){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),f=Math.max((window.screen.availWidth-r)/2,0).toString();let p="";const g=Object.assign(Object.assign({},V5),{width:r.toString(),height:o.toString(),top:c,left:f}),y=Fn().toLowerCase();n&&(p=Mb(y)?B5:n),Db(y)&&(e=e||z5,g.scrollbars="yes");const w=Object.entries(g).reduce((A,[F,G])=>`${A}${F}=${G},`,"");if(uC(y)&&p!=="_self")return H5(e||"",p),new g1(null);const S=window.open(e||"",p,w);Pe(S,i,"popup-blocked");try{S.focus()}catch{}return new g1(S)}function H5(i,e){const n=document.createElement("a");n.href=i,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q5="__/auth/handler",G5="emulator/auth/handler",W5=encodeURIComponent("fac");async function y1(i,e,n,r,o,c){Pe(i.config.authDomain,i,"auth-domain-config-required"),Pe(i.config.apiKey,i,"invalid-api-key");const f={apiKey:i.config.apiKey,appName:i.name,authType:n,redirectUrl:r,v:Sl,eventId:o};if(e instanceof Gb){e.setDefaultLanguage(i.languageCode),f.providerId=e.providerId||"",lA(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[w,S]of Object.entries({}))f[w]=S}if(e instanceof nu){const w=e.getScopes().filter(S=>S!=="");w.length>0&&(f.scopes=w.join(","))}i.tenantId&&(f.tid=i.tenantId);const p=f;for(const w of Object.keys(p))p[w]===void 0&&delete p[w];const g=await i._getAppCheckToken(),y=g?`#${W5}=${encodeURIComponent(g)}`:"";return`${X5(i)}?${Jc(p).slice(1)}${y}`}function X5({config:i}){return i.emulator?Ep(i,G5):`https://${i.authDomain}/${q5}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cm="webStorageSupport";class Z5{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=$b,this._completeRedirectFn=v5,this._overrideRedirectResult=p5}async _openPopup(e,n,r,o){var c;wr((c=this.eventManagers[e._key()])===null||c===void 0?void 0:c.manager,"_initialize() not called before _openPopup()");const f=await y1(e,n,r,Hm(),o);return F5(e,f,kp())}async _openRedirect(e,n,r,o){await this._originValidation(e);const c=await y1(e,n,r,Hm(),o);return QC(c),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:c}=this.eventManagers[n];return o?Promise.resolve(o):(wr(c,"If manager is not set, promise should be"),c)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await L5(e),r=new b5(e);return n.register("authEvent",o=>(Pe(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Cm,{type:Cm},o=>{var c;const f=(c=o==null?void 0:o[0])===null||c===void 0?void 0:c[Cm];f!==void 0&&n(!!f),rs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=A5(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Bb()||Ob()||Tp()}}const K5=Z5;var v1="@firebase/auth",x1="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y5{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q5(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function $5(i){Vs(new ss("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:f,authDomain:p}=r.options;Pe(f&&!f.includes(":"),"invalid-api-key",{appName:r.name});const g={apiKey:f,authDomain:p,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:zb(i)},y=new gC(r,o,c,g);return TC(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Vs(new ss("auth-internal",e=>{const n=xo(e.getProvider("auth").getImmediate());return(r=>new Y5(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),zi(v1,x1,Q5(i)),zi(v1,x1,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J5=5*60,e4=Gx("authIdTokenMaxAge")||J5;let b1=null;const t4=i=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>e4)return;const o=n==null?void 0:n.token;b1!==o&&(b1=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function n4(i=gp()){const e=vo(i,"auth");if(e.isInitialized())return e.getImmediate();const n=AC(i,{popupRedirectResolver:K5,persistence:[a5,ZC,$b]}),r=Gx("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(r,location.origin);if(location.origin===c.origin){const f=t4(c.toString());qC(n,f,()=>f(n.currentUser)),HC(n,p=>f(p))}}const o=Hx("auth");return o&&RC(n,`http://${o}`),n}function i4(){var i,e;return(e=(i=document.getElementsByTagName("head"))===null||i===void 0?void 0:i[0])!==null&&e!==void 0?e:document}yC({loadJS(i){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",i),r.onload=e,r.onerror=o=>{const c=Ns("internal-error");c.customData=o,n(c)},r.type="text/javascript",r.charset="UTF-8",i4().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});$5("Browser");var _1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ma,r2;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(V,R){function k(){}k.prototype=R.prototype,V.D=R.prototype,V.prototype=new k,V.prototype.constructor=V,V.C=function(M,N,z){for(var j=Array(arguments.length-2),qe=2;qe<arguments.length;qe++)j[qe-2]=arguments[qe];return R.prototype[N].apply(M,j)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(V,R,k){k||(k=0);var M=Array(16);if(typeof R=="string")for(var N=0;16>N;++N)M[N]=R.charCodeAt(k++)|R.charCodeAt(k++)<<8|R.charCodeAt(k++)<<16|R.charCodeAt(k++)<<24;else for(N=0;16>N;++N)M[N]=R[k++]|R[k++]<<8|R[k++]<<16|R[k++]<<24;R=V.g[0],k=V.g[1],N=V.g[2];var z=V.g[3],j=R+(z^k&(N^z))+M[0]+3614090360&4294967295;R=k+(j<<7&4294967295|j>>>25),j=z+(N^R&(k^N))+M[1]+3905402710&4294967295,z=R+(j<<12&4294967295|j>>>20),j=N+(k^z&(R^k))+M[2]+606105819&4294967295,N=z+(j<<17&4294967295|j>>>15),j=k+(R^N&(z^R))+M[3]+3250441966&4294967295,k=N+(j<<22&4294967295|j>>>10),j=R+(z^k&(N^z))+M[4]+4118548399&4294967295,R=k+(j<<7&4294967295|j>>>25),j=z+(N^R&(k^N))+M[5]+1200080426&4294967295,z=R+(j<<12&4294967295|j>>>20),j=N+(k^z&(R^k))+M[6]+2821735955&4294967295,N=z+(j<<17&4294967295|j>>>15),j=k+(R^N&(z^R))+M[7]+4249261313&4294967295,k=N+(j<<22&4294967295|j>>>10),j=R+(z^k&(N^z))+M[8]+1770035416&4294967295,R=k+(j<<7&4294967295|j>>>25),j=z+(N^R&(k^N))+M[9]+2336552879&4294967295,z=R+(j<<12&4294967295|j>>>20),j=N+(k^z&(R^k))+M[10]+4294925233&4294967295,N=z+(j<<17&4294967295|j>>>15),j=k+(R^N&(z^R))+M[11]+2304563134&4294967295,k=N+(j<<22&4294967295|j>>>10),j=R+(z^k&(N^z))+M[12]+1804603682&4294967295,R=k+(j<<7&4294967295|j>>>25),j=z+(N^R&(k^N))+M[13]+4254626195&4294967295,z=R+(j<<12&4294967295|j>>>20),j=N+(k^z&(R^k))+M[14]+2792965006&4294967295,N=z+(j<<17&4294967295|j>>>15),j=k+(R^N&(z^R))+M[15]+1236535329&4294967295,k=N+(j<<22&4294967295|j>>>10),j=R+(N^z&(k^N))+M[1]+4129170786&4294967295,R=k+(j<<5&4294967295|j>>>27),j=z+(k^N&(R^k))+M[6]+3225465664&4294967295,z=R+(j<<9&4294967295|j>>>23),j=N+(R^k&(z^R))+M[11]+643717713&4294967295,N=z+(j<<14&4294967295|j>>>18),j=k+(z^R&(N^z))+M[0]+3921069994&4294967295,k=N+(j<<20&4294967295|j>>>12),j=R+(N^z&(k^N))+M[5]+3593408605&4294967295,R=k+(j<<5&4294967295|j>>>27),j=z+(k^N&(R^k))+M[10]+38016083&4294967295,z=R+(j<<9&4294967295|j>>>23),j=N+(R^k&(z^R))+M[15]+3634488961&4294967295,N=z+(j<<14&4294967295|j>>>18),j=k+(z^R&(N^z))+M[4]+3889429448&4294967295,k=N+(j<<20&4294967295|j>>>12),j=R+(N^z&(k^N))+M[9]+568446438&4294967295,R=k+(j<<5&4294967295|j>>>27),j=z+(k^N&(R^k))+M[14]+3275163606&4294967295,z=R+(j<<9&4294967295|j>>>23),j=N+(R^k&(z^R))+M[3]+4107603335&4294967295,N=z+(j<<14&4294967295|j>>>18),j=k+(z^R&(N^z))+M[8]+1163531501&4294967295,k=N+(j<<20&4294967295|j>>>12),j=R+(N^z&(k^N))+M[13]+2850285829&4294967295,R=k+(j<<5&4294967295|j>>>27),j=z+(k^N&(R^k))+M[2]+4243563512&4294967295,z=R+(j<<9&4294967295|j>>>23),j=N+(R^k&(z^R))+M[7]+1735328473&4294967295,N=z+(j<<14&4294967295|j>>>18),j=k+(z^R&(N^z))+M[12]+2368359562&4294967295,k=N+(j<<20&4294967295|j>>>12),j=R+(k^N^z)+M[5]+4294588738&4294967295,R=k+(j<<4&4294967295|j>>>28),j=z+(R^k^N)+M[8]+2272392833&4294967295,z=R+(j<<11&4294967295|j>>>21),j=N+(z^R^k)+M[11]+1839030562&4294967295,N=z+(j<<16&4294967295|j>>>16),j=k+(N^z^R)+M[14]+4259657740&4294967295,k=N+(j<<23&4294967295|j>>>9),j=R+(k^N^z)+M[1]+2763975236&4294967295,R=k+(j<<4&4294967295|j>>>28),j=z+(R^k^N)+M[4]+1272893353&4294967295,z=R+(j<<11&4294967295|j>>>21),j=N+(z^R^k)+M[7]+4139469664&4294967295,N=z+(j<<16&4294967295|j>>>16),j=k+(N^z^R)+M[10]+3200236656&4294967295,k=N+(j<<23&4294967295|j>>>9),j=R+(k^N^z)+M[13]+681279174&4294967295,R=k+(j<<4&4294967295|j>>>28),j=z+(R^k^N)+M[0]+3936430074&4294967295,z=R+(j<<11&4294967295|j>>>21),j=N+(z^R^k)+M[3]+3572445317&4294967295,N=z+(j<<16&4294967295|j>>>16),j=k+(N^z^R)+M[6]+76029189&4294967295,k=N+(j<<23&4294967295|j>>>9),j=R+(k^N^z)+M[9]+3654602809&4294967295,R=k+(j<<4&4294967295|j>>>28),j=z+(R^k^N)+M[12]+3873151461&4294967295,z=R+(j<<11&4294967295|j>>>21),j=N+(z^R^k)+M[15]+530742520&4294967295,N=z+(j<<16&4294967295|j>>>16),j=k+(N^z^R)+M[2]+3299628645&4294967295,k=N+(j<<23&4294967295|j>>>9),j=R+(N^(k|~z))+M[0]+4096336452&4294967295,R=k+(j<<6&4294967295|j>>>26),j=z+(k^(R|~N))+M[7]+1126891415&4294967295,z=R+(j<<10&4294967295|j>>>22),j=N+(R^(z|~k))+M[14]+2878612391&4294967295,N=z+(j<<15&4294967295|j>>>17),j=k+(z^(N|~R))+M[5]+4237533241&4294967295,k=N+(j<<21&4294967295|j>>>11),j=R+(N^(k|~z))+M[12]+1700485571&4294967295,R=k+(j<<6&4294967295|j>>>26),j=z+(k^(R|~N))+M[3]+2399980690&4294967295,z=R+(j<<10&4294967295|j>>>22),j=N+(R^(z|~k))+M[10]+4293915773&4294967295,N=z+(j<<15&4294967295|j>>>17),j=k+(z^(N|~R))+M[1]+2240044497&4294967295,k=N+(j<<21&4294967295|j>>>11),j=R+(N^(k|~z))+M[8]+1873313359&4294967295,R=k+(j<<6&4294967295|j>>>26),j=z+(k^(R|~N))+M[15]+4264355552&4294967295,z=R+(j<<10&4294967295|j>>>22),j=N+(R^(z|~k))+M[6]+2734768916&4294967295,N=z+(j<<15&4294967295|j>>>17),j=k+(z^(N|~R))+M[13]+1309151649&4294967295,k=N+(j<<21&4294967295|j>>>11),j=R+(N^(k|~z))+M[4]+4149444226&4294967295,R=k+(j<<6&4294967295|j>>>26),j=z+(k^(R|~N))+M[11]+3174756917&4294967295,z=R+(j<<10&4294967295|j>>>22),j=N+(R^(z|~k))+M[2]+718787259&4294967295,N=z+(j<<15&4294967295|j>>>17),j=k+(z^(N|~R))+M[9]+3951481745&4294967295,V.g[0]=V.g[0]+R&4294967295,V.g[1]=V.g[1]+(N+(j<<21&4294967295|j>>>11))&4294967295,V.g[2]=V.g[2]+N&4294967295,V.g[3]=V.g[3]+z&4294967295}r.prototype.u=function(V,R){R===void 0&&(R=V.length);for(var k=R-this.blockSize,M=this.B,N=this.h,z=0;z<R;){if(N==0)for(;z<=k;)o(this,V,z),z+=this.blockSize;if(typeof V=="string"){for(;z<R;)if(M[N++]=V.charCodeAt(z++),N==this.blockSize){o(this,M),N=0;break}}else for(;z<R;)if(M[N++]=V[z++],N==this.blockSize){o(this,M),N=0;break}}this.h=N,this.o+=R},r.prototype.v=function(){var V=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);V[0]=128;for(var R=1;R<V.length-8;++R)V[R]=0;var k=8*this.o;for(R=V.length-8;R<V.length;++R)V[R]=k&255,k/=256;for(this.u(V),V=Array(16),R=k=0;4>R;++R)for(var M=0;32>M;M+=8)V[k++]=this.g[R]>>>M&255;return V};function c(V,R){var k=p;return Object.prototype.hasOwnProperty.call(k,V)?k[V]:k[V]=R(V)}function f(V,R){this.h=R;for(var k=[],M=!0,N=V.length-1;0<=N;N--){var z=V[N]|0;M&&z==R||(k[N]=z,M=!1)}this.g=k}var p={};function g(V){return-128<=V&&128>V?c(V,function(R){return new f([R|0],0>R?-1:0)}):new f([V|0],0>V?-1:0)}function y(V){if(isNaN(V)||!isFinite(V))return S;if(0>V)return Q(y(-V));for(var R=[],k=1,M=0;V>=k;M++)R[M]=V/k|0,k*=4294967296;return new f(R,0)}function w(V,R){if(V.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(V.charAt(0)=="-")return Q(w(V.substring(1),R));if(0<=V.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=y(Math.pow(R,8)),M=S,N=0;N<V.length;N+=8){var z=Math.min(8,V.length-N),j=parseInt(V.substring(N,N+z),R);8>z?(z=y(Math.pow(R,z)),M=M.j(z).add(y(j))):(M=M.j(k),M=M.add(y(j)))}return M}var S=g(0),A=g(1),F=g(16777216);i=f.prototype,i.m=function(){if(q(this))return-Q(this).m();for(var V=0,R=1,k=0;k<this.g.length;k++){var M=this.i(k);V+=(0<=M?M:4294967296+M)*R,R*=4294967296}return V},i.toString=function(V){if(V=V||10,2>V||36<V)throw Error("radix out of range: "+V);if(G(this))return"0";if(q(this))return"-"+Q(this).toString(V);for(var R=y(Math.pow(V,6)),k=this,M="";;){var N=pe(k,R).g;k=ee(k,N.j(R));var z=((0<k.g.length?k.g[0]:k.h)>>>0).toString(V);if(k=N,G(k))return z+M;for(;6>z.length;)z="0"+z;M=z+M}},i.i=function(V){return 0>V?0:V<this.g.length?this.g[V]:this.h};function G(V){if(V.h!=0)return!1;for(var R=0;R<V.g.length;R++)if(V.g[R]!=0)return!1;return!0}function q(V){return V.h==-1}i.l=function(V){return V=ee(this,V),q(V)?-1:G(V)?0:1};function Q(V){for(var R=V.g.length,k=[],M=0;M<R;M++)k[M]=~V.g[M];return new f(k,~V.h).add(A)}i.abs=function(){return q(this)?Q(this):this},i.add=function(V){for(var R=Math.max(this.g.length,V.g.length),k=[],M=0,N=0;N<=R;N++){var z=M+(this.i(N)&65535)+(V.i(N)&65535),j=(z>>>16)+(this.i(N)>>>16)+(V.i(N)>>>16);M=j>>>16,z&=65535,j&=65535,k[N]=j<<16|z}return new f(k,k[k.length-1]&-2147483648?-1:0)};function ee(V,R){return V.add(Q(R))}i.j=function(V){if(G(this)||G(V))return S;if(q(this))return q(V)?Q(this).j(Q(V)):Q(Q(this).j(V));if(q(V))return Q(this.j(Q(V)));if(0>this.l(F)&&0>V.l(F))return y(this.m()*V.m());for(var R=this.g.length+V.g.length,k=[],M=0;M<2*R;M++)k[M]=0;for(M=0;M<this.g.length;M++)for(var N=0;N<V.g.length;N++){var z=this.i(M)>>>16,j=this.i(M)&65535,qe=V.i(N)>>>16,tt=V.i(N)&65535;k[2*M+2*N]+=j*tt,$(k,2*M+2*N),k[2*M+2*N+1]+=z*tt,$(k,2*M+2*N+1),k[2*M+2*N+1]+=j*qe,$(k,2*M+2*N+1),k[2*M+2*N+2]+=z*qe,$(k,2*M+2*N+2)}for(M=0;M<R;M++)k[M]=k[2*M+1]<<16|k[2*M];for(M=R;M<2*R;M++)k[M]=0;return new f(k,0)};function $(V,R){for(;(V[R]&65535)!=V[R];)V[R+1]+=V[R]>>>16,V[R]&=65535,R++}function L(V,R){this.g=V,this.h=R}function pe(V,R){if(G(R))throw Error("division by zero");if(G(V))return new L(S,S);if(q(V))return R=pe(Q(V),R),new L(Q(R.g),Q(R.h));if(q(R))return R=pe(V,Q(R)),new L(Q(R.g),R.h);if(30<V.g.length){if(q(V)||q(R))throw Error("slowDivide_ only works with positive integers.");for(var k=A,M=R;0>=M.l(V);)k=de(k),M=de(M);var N=xe(k,1),z=xe(M,1);for(M=xe(M,2),k=xe(k,2);!G(M);){var j=z.add(M);0>=j.l(V)&&(N=N.add(k),z=j),M=xe(M,1),k=xe(k,1)}return R=ee(V,N.j(R)),new L(N,R)}for(N=S;0<=V.l(R);){for(k=Math.max(1,Math.floor(V.m()/R.m())),M=Math.ceil(Math.log(k)/Math.LN2),M=48>=M?1:Math.pow(2,M-48),z=y(k),j=z.j(R);q(j)||0<j.l(V);)k-=M,z=y(k),j=z.j(R);G(z)&&(z=A),N=N.add(z),V=ee(V,j)}return new L(N,V)}i.A=function(V){return pe(this,V).h},i.and=function(V){for(var R=Math.max(this.g.length,V.g.length),k=[],M=0;M<R;M++)k[M]=this.i(M)&V.i(M);return new f(k,this.h&V.h)},i.or=function(V){for(var R=Math.max(this.g.length,V.g.length),k=[],M=0;M<R;M++)k[M]=this.i(M)|V.i(M);return new f(k,this.h|V.h)},i.xor=function(V){for(var R=Math.max(this.g.length,V.g.length),k=[],M=0;M<R;M++)k[M]=this.i(M)^V.i(M);return new f(k,this.h^V.h)};function de(V){for(var R=V.g.length+1,k=[],M=0;M<R;M++)k[M]=V.i(M)<<1|V.i(M-1)>>>31;return new f(k,V.h)}function xe(V,R){var k=R>>5;R%=32;for(var M=V.g.length-k,N=[],z=0;z<M;z++)N[z]=0<R?V.i(z+k)>>>R|V.i(z+k+1)<<32-R:V.i(z+k);return new f(N,V.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,r2=r,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.A,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=y,f.fromString=w,ma=f}).apply(typeof _1<"u"?_1:typeof self<"u"?self:typeof window<"u"?window:{});var dd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var a2,Ec,o2,wd,Xm,l2,c2,u2;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,v,x){return u==Array.prototype||u==Object.prototype||(u[v]=x.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof dd=="object"&&dd];for(var v=0;v<u.length;++v){var x=u[v];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var r=n(this);function o(u,v){if(v)e:{var x=r;u=u.split(".");for(var T=0;T<u.length-1;T++){var W=u[T];if(!(W in x))break e;x=x[W]}u=u[u.length-1],T=x[u],v=v(T),v!=T&&v!=null&&e(x,u,{configurable:!0,writable:!0,value:v})}}function c(u,v){u instanceof String&&(u+="");var x=0,T=!1,W={next:function(){if(!T&&x<u.length){var ie=x++;return{value:v(ie,u[ie]),done:!1}}return T=!0,{done:!0,value:void 0}}};return W[Symbol.iterator]=function(){return W},W}o("Array.prototype.values",function(u){return u||function(){return c(this,function(v,x){return x})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var f=f||{},p=this||self;function g(u){var v=typeof u;return v=v!="object"?v:u?Array.isArray(u)?"array":v:"null",v=="array"||v=="object"&&typeof u.length=="number"}function y(u){var v=typeof u;return v=="object"&&u!=null||v=="function"}function w(u,v,x){return u.call.apply(u.bind,arguments)}function S(u,v,x){if(!u)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var W=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(W,T),u.apply(v,W)}}return function(){return u.apply(v,arguments)}}function A(u,v,x){return A=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?w:S,A.apply(null,arguments)}function F(u,v){var x=Array.prototype.slice.call(arguments,1);return function(){var T=x.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function G(u,v){function x(){}x.prototype=v.prototype,u.aa=v.prototype,u.prototype=new x,u.prototype.constructor=u,u.Qb=function(T,W,ie){for(var _e=Array(arguments.length-2),Ze=2;Ze<arguments.length;Ze++)_e[Ze-2]=arguments[Ze];return v.prototype[W].apply(T,_e)}}function q(u){const v=u.length;if(0<v){const x=Array(v);for(let T=0;T<v;T++)x[T]=u[T];return x}return[]}function Q(u,v){for(let x=1;x<arguments.length;x++){const T=arguments[x];if(g(T)){const W=u.length||0,ie=T.length||0;u.length=W+ie;for(let _e=0;_e<ie;_e++)u[W+_e]=T[_e]}else u.push(T)}}class ee{constructor(v,x){this.i=v,this.j=x,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function $(u){return/^[\s\xa0]*$/.test(u)}function L(){var u=p.navigator;return u&&(u=u.userAgent)?u:""}function pe(u){return pe[" "](u),u}pe[" "]=function(){};var de=L().indexOf("Gecko")!=-1&&!(L().toLowerCase().indexOf("webkit")!=-1&&L().indexOf("Edge")==-1)&&!(L().indexOf("Trident")!=-1||L().indexOf("MSIE")!=-1)&&L().indexOf("Edge")==-1;function xe(u,v,x){for(const T in u)v.call(x,u[T],T,u)}function V(u,v){for(const x in u)v.call(void 0,u[x],x,u)}function R(u){const v={};for(const x in u)v[x]=u[x];return v}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(u,v){let x,T;for(let W=1;W<arguments.length;W++){T=arguments[W];for(x in T)u[x]=T[x];for(let ie=0;ie<k.length;ie++)x=k[ie],Object.prototype.hasOwnProperty.call(T,x)&&(u[x]=T[x])}}function N(u){var v=1;u=u.split(":");const x=[];for(;0<v&&u.length;)x.push(u.shift()),v--;return u.length&&x.push(u.join(":")),x}function z(u){p.setTimeout(()=>{throw u},0)}function j(){var u=Ae;let v=null;return u.g&&(v=u.g,u.g=u.g.next,u.g||(u.h=null),v.next=null),v}class qe{constructor(){this.h=this.g=null}add(v,x){const T=tt.get();T.set(v,x),this.h?this.h.next=T:this.g=T,this.h=T}}var tt=new ee(()=>new ae,u=>u.reset());class ae{constructor(){this.next=this.g=this.h=null}set(v,x){this.h=v,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let me,re=!1,Ae=new qe,O=()=>{const u=p.Promise.resolve(void 0);me=()=>{u.then(B)}};var B=()=>{for(var u;u=j();){try{u.h.call(u.g)}catch(x){z(x)}var v=tt;v.j(u),100>v.h&&(v.h++,u.next=v.g,v.g=u)}re=!1};function oe(){this.s=this.s,this.C=this.C}oe.prototype.s=!1,oe.prototype.ma=function(){this.s||(this.s=!0,this.N())},oe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function K(u,v){this.type=u,this.g=this.target=v,this.defaultPrevented=!1}K.prototype.h=function(){this.defaultPrevented=!0};var be=function(){if(!p.addEventListener||!Object.defineProperty)return!1;var u=!1,v=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const x=()=>{};p.addEventListener("test",x,v),p.removeEventListener("test",x,v)}catch{}return u}();function we(u,v){if(K.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var x=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=v,v=u.relatedTarget){if(de){e:{try{pe(v.nodeName);var W=!0;break e}catch{}W=!1}W||(v=null)}}else x=="mouseover"?v=u.fromElement:x=="mouseout"&&(v=u.toElement);this.relatedTarget=v,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Re[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&we.aa.h.call(this)}}G(we,K);var Re={2:"touch",3:"pen",4:"mouse"};we.prototype.h=function(){we.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var nt="closure_listenable_"+(1e6*Math.random()|0),vt=0;function Hn(u,v,x,T,W){this.listener=u,this.proxy=null,this.src=v,this.type=x,this.capture=!!T,this.ha=W,this.key=++vt,this.da=this.fa=!1}function qn(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function pn(u){this.src=u,this.g={},this.h=0}pn.prototype.add=function(u,v,x,T,W){var ie=u.toString();u=this.g[ie],u||(u=this.g[ie]=[],this.h++);var _e=Fi(u,v,T,W);return-1<_e?(v=u[_e],x||(v.fa=!1)):(v=new Hn(v,this.src,ie,!!T,W),v.fa=x,u.push(v)),v};function Gt(u,v){var x=v.type;if(x in u.g){var T=u.g[x],W=Array.prototype.indexOf.call(T,v,void 0),ie;(ie=0<=W)&&Array.prototype.splice.call(T,W,1),ie&&(qn(v),u.g[x].length==0&&(delete u.g[x],u.h--))}}function Fi(u,v,x,T){for(var W=0;W<u.length;++W){var ie=u[W];if(!ie.da&&ie.listener==v&&ie.capture==!!x&&ie.ha==T)return W}return-1}var ls="closure_lm_"+(1e6*Math.random()|0),Ar={};function Ta(u,v,x,T,W){if(Array.isArray(v)){for(var ie=0;ie<v.length;ie++)Ta(u,v[ie],x,T,W);return null}return x=pt(x),u&&u[nt]?u.K(v,x,y(T)?!!T.capture:!1,W):Ce(u,v,x,!1,T,W)}function Ce(u,v,x,T,W,ie){if(!v)throw Error("Invalid event type");var _e=y(W)?!!W.capture:!!W,Ze=Ut(u);if(Ze||(u[ls]=Ze=new pn(u)),x=Ze.add(v,x,T,_e,ie),x.proxy)return x;if(T=Ra(),x.proxy=T,T.src=u,T.listener=x,u.addEventListener)be||(W=_e),W===void 0&&(W=!1),u.addEventListener(v.toString(),T,W);else if(u.attachEvent)u.attachEvent(it(v.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return x}function Ra(){function u(x){return v.call(u.src,u.listener,x)}const v=Tr;return u}function Pt(u,v,x,T,W){if(Array.isArray(v))for(var ie=0;ie<v.length;ie++)Pt(u,v[ie],x,T,W);else T=y(T)?!!T.capture:!!T,x=pt(x),u&&u[nt]?(u=u.i,v=String(v).toString(),v in u.g&&(ie=u.g[v],x=Fi(ie,x,T,W),-1<x&&(qn(ie[x]),Array.prototype.splice.call(ie,x,1),ie.length==0&&(delete u.g[v],u.h--)))):u&&(u=Ut(u))&&(v=u.g[v.toString()],u=-1,v&&(u=Fi(v,x,T,W)),(x=-1<u?v[u]:null)&&yi(x))}function yi(u){if(typeof u!="number"&&u&&!u.da){var v=u.src;if(v&&v[nt])Gt(v.i,u);else{var x=u.type,T=u.proxy;v.removeEventListener?v.removeEventListener(x,T,u.capture):v.detachEvent?v.detachEvent(it(x),T):v.addListener&&v.removeListener&&v.removeListener(T),(x=Ut(v))?(Gt(x,u),x.h==0&&(x.src=null,v[ls]=null)):qn(u)}}}function it(u){return u in Ar?Ar[u]:Ar[u]="on"+u}function Tr(u,v){if(u.da)u=!0;else{v=new we(v,this);var x=u.listener,T=u.ha||u.src;u.fa&&yi(u),u=x.call(T,v)}return u}function Ut(u){return u=u[ls],u instanceof pn?u:null}var Mn="__closure_events_fn_"+(1e9*Math.random()>>>0);function pt(u){return typeof u=="function"?u:(u[Mn]||(u[Mn]=function(v){return u.handleEvent(v)}),u[Mn])}function Et(){oe.call(this),this.i=new pn(this),this.M=this,this.F=null}G(Et,oe),Et.prototype[nt]=!0,Et.prototype.removeEventListener=function(u,v,x,T){Pt(this,u,v,x,T)};function $e(u,v){var x,T=u.F;if(T)for(x=[];T;T=T.F)x.push(T);if(u=u.M,T=v.type||v,typeof v=="string")v=new K(v,u);else if(v instanceof K)v.target=v.target||u;else{var W=v;v=new K(T,u),M(v,W)}if(W=!0,x)for(var ie=x.length-1;0<=ie;ie--){var _e=v.g=x[ie];W=ln(_e,T,!0,v)&&W}if(_e=v.g=u,W=ln(_e,T,!0,v)&&W,W=ln(_e,T,!1,v)&&W,x)for(ie=0;ie<x.length;ie++)_e=v.g=x[ie],W=ln(_e,T,!1,v)&&W}Et.prototype.N=function(){if(Et.aa.N.call(this),this.i){var u=this.i,v;for(v in u.g){for(var x=u.g[v],T=0;T<x.length;T++)qn(x[T]);delete u.g[v],u.h--}}this.F=null},Et.prototype.K=function(u,v,x,T){return this.i.add(String(u),v,!1,x,T)},Et.prototype.L=function(u,v,x,T){return this.i.add(String(u),v,!0,x,T)};function ln(u,v,x,T){if(v=u.i.g[String(v)],!v)return!0;v=v.concat();for(var W=!0,ie=0;ie<v.length;++ie){var _e=v[ie];if(_e&&!_e.da&&_e.capture==x){var Ze=_e.listener,It=_e.ha||_e.src;_e.fa&&Gt(u.i,_e),W=Ze.call(It,T)!==!1&&W}}return W&&!T.defaultPrevented}function Z(u,v,x){if(typeof u=="function")x&&(u=A(u,x));else if(u&&typeof u.handleEvent=="function")u=A(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:p.setTimeout(u,v||0)}function ye(u){u.g=Z(()=>{u.g=null,u.i&&(u.i=!1,ye(u))},u.l);const v=u.h;u.h=null,u.m.apply(null,v)}class Se extends oe{constructor(v,x){super(),this.m=v,this.l=x,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:ye(this)}N(){super.N(),this.g&&(p.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ne(u){oe.call(this),this.h=u,this.g={}}G(Ne,oe);var ot=[];function ut(u){xe(u.g,function(v,x){this.g.hasOwnProperty(x)&&yi(v)},u),u.g={}}Ne.prototype.N=function(){Ne.aa.N.call(this),ut(this)},Ne.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Be=p.JSON.stringify,Gn=p.JSON.parse,Hi=class{stringify(u){return p.JSON.stringify(u,void 0)}parse(u){return p.JSON.parse(u,void 0)}};function Rr(){}Rr.prototype.h=null;function Ca(u){return u.h||(u.h=u.i())}function Hs(){}var qi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Gi(){K.call(this,"d")}G(Gi,K);function Ia(){K.call(this,"c")}G(Ia,K);var Wn={},vi=null;function ai(){return vi=vi||new Et}Wn.La="serverreachability";function ze(u){K.call(this,Wn.La,u)}G(ze,K);function cs(u){const v=ai();$e(v,new ze(v))}Wn.STAT_EVENT="statevent";function Xe(u,v){K.call(this,Wn.STAT_EVENT,u),this.stat=v}G(Xe,K);function bt(u){const v=ai();$e(v,new Xe(v,u))}Wn.Ma="timingevent";function nn(u,v){K.call(this,Wn.Ma,u),this.size=v}G(nn,K);function Wt(u,v){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return p.setTimeout(function(){u()},v)}function gn(){this.g=!0}gn.prototype.xa=function(){this.g=!1};function ka(u,v,x,T,W,ie){u.info(function(){if(u.g)if(ie)for(var _e="",Ze=ie.split("&"),It=0;It<Ze.length;It++){var Ke=Ze[It].split("=");if(1<Ke.length){var kt=Ke[0];Ke=Ke[1];var ke=kt.split("_");_e=2<=ke.length&&ke[1]=="type"?_e+(kt+"="+Ke+"&"):_e+(kt+"=redacted&")}}else _e=null;else _e=ie;return"XMLHTTP REQ ("+T+") [attempt "+W+"]: "+v+`
`+x+`
`+_e})}function Il(u,v,x,T,W,ie,_e){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+W+"]: "+v+`
`+x+`
`+ie+" "+_e})}function xi(u,v,x,T){u.info(function(){return"XMLHTTP TEXT ("+v+"): "+bi(u,x)+(T?" "+T:"")})}function Eo(u,v){u.info(function(){return"TIMEOUT: "+v})}gn.prototype.info=function(){};function bi(u,v){if(!u.g)return v;if(!v)return null;try{var x=JSON.parse(v);if(x){for(u=0;u<x.length;u++)if(Array.isArray(x[u])){var T=x[u];if(!(2>T.length)){var W=T[1];if(Array.isArray(W)&&!(1>W.length)){var ie=W[0];if(ie!="noop"&&ie!="stop"&&ie!="close")for(var _e=1;_e<W.length;_e++)W[_e]=""}}}}return Be(x)}catch{return v}}var Wi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Xi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},oi;function _i(){}G(_i,Rr),_i.prototype.g=function(){return new XMLHttpRequest},_i.prototype.i=function(){return{}},oi=new _i;function En(u,v,x,T){this.j=u,this.i=v,this.l=x,this.R=T||1,this.U=new Ne(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Mt}function Mt(){this.i=null,this.g="",this.h=!1}var qs={},Cr={};function Kn(u,v,x){u.L=1,u.v=fs(vn(v)),u.m=x,u.P=!0,Ln(u,null)}function Ln(u,v){u.F=Date.now(),wi(u),u.A=vn(u.v);var x=u.A,T=u.R;Array.isArray(T)||(T=[String(T)]),gs(x.i,"t",T),u.C=0,x=u.j.J,u.h=new Mt,u.g=D(u.j,x?v:null,!u.m),0<u.O&&(u.M=new Se(A(u.Y,u,u.g),u.O)),v=u.U,x=u.g,T=u.ca;var W="readystatechange";Array.isArray(W)||(W&&(ot[0]=W.toString()),W=ot);for(var ie=0;ie<W.length;ie++){var _e=Ta(x,W[ie],T||v.handleEvent,!1,v.h||v);if(!_e)break;v.g[_e.key]=_e}v=u.H?R(u.H):{},u.m?(u.u||(u.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,v)):(u.u="GET",u.g.ea(u.A,u.u,null,v)),cs(),ka(u.i,u.u,u.A,u.l,u.R,u.m)}En.prototype.ca=function(u){u=u.target;const v=this.M;v&&ei(u)==3?v.j():this.Y(u)},En.prototype.Y=function(u){try{if(u==this.g)e:{const ke=ei(this.g);var v=this.g.Ba();const _t=this.g.Z();if(!(3>ke)&&(ke!=3||this.g&&(this.h.h||this.g.oa()||ko(this.g)))){this.J||ke!=4||v==7||(v==8||0>=_t?cs(3):cs(2)),us(this);var x=this.g.Z();this.X=x;t:if(Ir(this)){var T=ko(this.g);u="";var W=T.length,ie=ei(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){cn(this),li(this);var _e="";break t}this.h.i=new p.TextDecoder}for(v=0;v<W;v++)this.h.h=!0,u+=this.h.i.decode(T[v],{stream:!(ie&&v==W-1)});T.length=0,this.h.g+=u,this.C=0,_e=this.h.g}else _e=this.g.oa();if(this.o=x==200,Il(this.i,this.u,this.A,this.l,this.R,ke,x),this.o){if(this.T&&!this.K){t:{if(this.g){var Ze,It=this.g;if((Ze=It.g?It.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$(Ze)){var Ke=Ze;break t}}Ke=null}if(x=Ke)xi(this.i,this.l,x,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Gs(this,x);else{this.o=!1,this.s=3,bt(12),cn(this),li(this);break e}}if(this.P){x=!0;let gt;for(;!this.J&&this.C<_e.length;)if(gt=Ao(this,_e),gt==Cr){ke==4&&(this.s=4,bt(14),x=!1),xi(this.i,this.l,null,"[Incomplete Response]");break}else if(gt==qs){this.s=4,bt(15),xi(this.i,this.l,_e,"[Invalid Chunk]"),x=!1;break}else xi(this.i,this.l,gt,null),Gs(this,gt);if(Ir(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ke!=4||_e.length!=0||this.h.h||(this.s=1,bt(16),x=!1),this.o=this.o&&x,!x)xi(this.i,this.l,_e,"[Invalid Chunked Response]"),cn(this),li(this);else if(0<_e.length&&!this.W){this.W=!0;var kt=this.j;kt.g==this&&kt.ba&&!kt.M&&(kt.j.info("Great, no buffering proxy detected. Bytes received: "+_e.length),Es(kt),kt.M=!0,bt(11))}}else xi(this.i,this.l,_e,null),Gs(this,_e);ke==4&&cn(this),this.o&&!this.J&&(ke==4?Fa(this.j,this):(this.o=!1,wi(this)))}else Nl(this.g),x==400&&0<_e.indexOf("Unknown SID")?(this.s=3,bt(12)):(this.s=0,bt(13)),cn(this),li(this)}}}catch{}finally{}};function Ir(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Ao(u,v){var x=u.C,T=v.indexOf(`
`,x);return T==-1?Cr:(x=Number(v.substring(x,T)),isNaN(x)?qs:(T+=1,T+x>v.length?Cr:(v=v.slice(T,T+x),u.C=T+x,v)))}En.prototype.cancel=function(){this.J=!0,cn(this)};function wi(u){u.S=Date.now()+u.I,To(u,u.I)}function To(u,v){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Wt(A(u.ba,u),v)}function us(u){u.B&&(p.clearTimeout(u.B),u.B=null)}En.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Eo(this.i,this.A),this.L!=2&&(cs(),bt(17)),cn(this),this.s=2,li(this)):To(this,this.S-u)};function li(u){u.j.G==0||u.J||Fa(u.j,u)}function cn(u){us(u);var v=u.M;v&&typeof v.ma=="function"&&v.ma(),u.M=null,ut(u.U),u.g&&(v=u.g,u.g=null,v.abort(),v.ma())}function Gs(u,v){try{var x=u.j;if(x.G!=0&&(x.g==u||ja(x.h,u))){if(!u.K&&ja(x.h,u)&&x.G==3){try{var T=x.Da.g.parse(v)}catch{T=null}if(Array.isArray(T)&&T.length==3){var W=T;if(W[0]==0){e:if(!x.u){if(x.g)if(x.g.F+3e3<u.F)Js(x),Qs(x);else break e;Lr(x),bt(18)}}else x.za=W[1],0<x.za-x.T&&37500>W[2]&&x.F&&x.v==0&&!x.C&&(x.C=Wt(A(x.Za,x),6e3));if(1>=Nr(x.h)&&x.ca){try{x.ca()}catch{}x.ca=void 0}}else _(x,11)}else if((u.K||x.g==u)&&Js(x),!$(v))for(W=x.Da.g.parse(v),v=0;v<W.length;v++){let Ke=W[v];if(x.T=Ke[0],Ke=Ke[1],x.G==2)if(Ke[0]=="c"){x.K=Ke[1],x.ia=Ke[2];const kt=Ke[3];kt!=null&&(x.la=kt,x.j.info("VER="+x.la));const ke=Ke[4];ke!=null&&(x.Aa=ke,x.j.info("SVER="+x.Aa));const _t=Ke[5];_t!=null&&typeof _t=="number"&&0<_t&&(T=1.5*_t,x.L=T,x.j.info("backChannelRequestTimeoutMs_="+T)),T=x;const gt=u.g;if(gt){const Tn=gt.g?gt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Tn){var ie=T.h;ie.g||Tn.indexOf("spdy")==-1&&Tn.indexOf("quic")==-1&&Tn.indexOf("h2")==-1||(ie.j=ie.l,ie.g=new Set,ie.h&&(Ws(ie,ie.h),ie.h=null))}if(T.D){const jo=gt.g?gt.g.getResponseHeader("X-HTTP-Session-Id"):null;jo&&(T.ya=jo,Qe(T.I,T.D,jo))}}x.G=3,x.l&&x.l.ua(),x.ba&&(x.R=Date.now()-u.F,x.j.info("Handshake RTT: "+x.R+"ms")),T=x;var _e=u;if(T.qa=U(T,T.J?T.ia:null,T.W),_e.K){yn(T.h,_e);var Ze=_e,It=T.L;It&&(Ze.I=It),Ze.B&&(us(Ze),wi(Ze)),T.g=_e}else Ba(T);0<x.i.length&&$s(x)}else Ke[0]!="stop"&&Ke[0]!="close"||_(x,7);else x.G==3&&(Ke[0]=="stop"||Ke[0]=="close"?Ke[0]=="stop"?_(x,7):Va(x):Ke[0]!="noop"&&x.l&&x.l.ta(Ke),x.v=0)}}cs(4)}catch{}}var Na=class{constructor(u,v){this.g=u,this.map=v}};function Si(u){this.l=u||10,p.PerformanceNavigationTiming?(u=p.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(p.chrome&&p.chrome.loadTimes&&p.chrome.loadTimes()&&p.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function kr(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Nr(u){return u.h?1:u.g?u.g.size:0}function ja(u,v){return u.h?u.h==v:u.g?u.g.has(v):!1}function Ws(u,v){u.g?u.g.add(v):u.h=v}function yn(u,v){u.h&&u.h==v?u.h=null:u.g&&u.g.has(v)&&u.g.delete(v)}Si.prototype.cancel=function(){if(this.i=Da(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Da(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let v=u.i;for(const x of u.g.values())v=v.concat(x.D);return v}return q(u.i)}function Ro(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(g(u)){for(var v=[],x=u.length,T=0;T<x;T++)v.push(u[T]);return v}v=[],x=0;for(T in u)v[x++]=u[T];return v}function jr(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(g(u)||typeof u=="string"){var v=[];u=u.length;for(var x=0;x<u;x++)v.push(x);return v}v=[],x=0;for(const T in u)v[x++]=T;return v}}}function Oa(u,v){if(u.forEach&&typeof u.forEach=="function")u.forEach(v,void 0);else if(g(u)||typeof u=="string")Array.prototype.forEach.call(u,v,void 0);else for(var x=jr(u),T=Ro(u),W=T.length,ie=0;ie<W;ie++)v.call(void 0,T[ie],x&&x[ie],u)}var Xs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ds(u,v){if(u){u=u.split("&");for(var x=0;x<u.length;x++){var T=u[x].indexOf("="),W=null;if(0<=T){var ie=u[x].substring(0,T);W=u[x].substring(T+1)}else ie=u[x];v(ie,W?decodeURIComponent(W.replace(/\+/g," ")):"")}}}function Xt(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Xt){this.h=u.h,Zs(this,u.j),this.o=u.o,this.g=u.g,hs(this,u.s),this.l=u.l;var v=u.i,x=new Zi;x.i=v.i,v.g&&(x.g=new Map(v.g),x.h=v.h),Yn(this,x),this.m=u.m}else u&&(v=String(u).match(Xs))?(this.h=!1,Zs(this,v[1]||"",!0),this.o=He(v[2]||""),this.g=He(v[3]||"",!0),hs(this,v[4]),this.l=He(v[5]||"",!0),Yn(this,v[6]||"",!0),this.m=He(v[7]||"")):(this.h=!1,this.i=new Zi(null,this.h))}Xt.prototype.toString=function(){var u=[],v=this.j;v&&u.push(Ei(v,Ai,!0),":");var x=this.g;return(x||v=="file")&&(u.push("//"),(v=this.o)&&u.push(Ei(v,Ai,!0),"@"),u.push(encodeURIComponent(String(x)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.s,x!=null&&u.push(":",String(x))),(x=this.l)&&(this.g&&x.charAt(0)!="/"&&u.push("/"),u.push(Ei(x,x.charAt(0)=="/"?Co:Ks,!0))),(x=this.i.toString())&&u.push("?",x),(x=this.m)&&u.push("#",Ei(x,Dr)),u.join("")};function vn(u){return new Xt(u)}function Zs(u,v,x){u.j=x?He(v,!0):v,u.j&&(u.j=u.j.replace(/:$/,""))}function hs(u,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);u.s=v}else u.s=null}function Yn(u,v,x){v instanceof Zi?(u.i=v,Io(u.i,u.h)):(x||(v=Ei(v,Ma)),u.i=new Zi(v,u.h))}function Qe(u,v,x){u.i.set(v,x)}function fs(u){return Qe(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function He(u,v){return u?v?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Ei(u,v,x){return typeof u=="string"?(u=encodeURI(u).replace(v,ms),x&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function ms(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Ai=/[#\/\?@]/g,Ks=/[#\?:]/g,Co=/[#\?]/g,Ma=/[#\?@]/g,Dr=/#/g;function Zi(u,v){this.h=this.g=null,this.i=u||null,this.j=!!v}function Qn(u){u.g||(u.g=new Map,u.h=0,u.i&&ds(u.i,function(v,x){u.add(decodeURIComponent(v.replace(/\+/g," ")),x)}))}i=Zi.prototype,i.add=function(u,v){Qn(this),this.i=null,u=Ti(this,u);var x=this.g.get(u);return x||this.g.set(u,x=[]),x.push(v),this.h+=1,this};function $n(u,v){Qn(u),v=Ti(u,v),u.g.has(v)&&(u.i=null,u.h-=u.g.get(v).length,u.g.delete(v))}function ps(u,v){return Qn(u),v=Ti(u,v),u.g.has(v)}i.forEach=function(u,v){Qn(this),this.g.forEach(function(x,T){x.forEach(function(W){u.call(v,W,T,this)},this)},this)},i.na=function(){Qn(this);const u=Array.from(this.g.values()),v=Array.from(this.g.keys()),x=[];for(let T=0;T<v.length;T++){const W=u[T];for(let ie=0;ie<W.length;ie++)x.push(v[T])}return x},i.V=function(u){Qn(this);let v=[];if(typeof u=="string")ps(this,u)&&(v=v.concat(this.g.get(Ti(this,u))));else{u=Array.from(this.g.values());for(let x=0;x<u.length;x++)v=v.concat(u[x])}return v},i.set=function(u,v){return Qn(this),this.i=null,u=Ti(this,u),ps(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[v]),this.h+=1,this},i.get=function(u,v){return u?(u=this.V(u),0<u.length?String(u[0]):v):v};function gs(u,v,x){$n(u,v),0<x.length&&(u.i=null,u.g.set(Ti(u,v),q(x)),u.h+=x.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],v=Array.from(this.g.keys());for(var x=0;x<v.length;x++){var T=v[x];const ie=encodeURIComponent(String(T)),_e=this.V(T);for(T=0;T<_e.length;T++){var W=ie;_e[T]!==""&&(W+="="+encodeURIComponent(String(_e[T]))),u.push(W)}}return this.i=u.join("&")};function Ti(u,v){return v=String(v),u.j&&(v=v.toLowerCase()),v}function Io(u,v){v&&!u.j&&(Qn(u),u.i=null,u.g.forEach(function(x,T){var W=T.toLowerCase();T!=W&&($n(this,T),gs(this,W,x))},u)),u.j=v}function Ri(u,v){const x=new gn;if(p.Image){const T=new Image;T.onload=F(An,x,"TestLoadImage: loaded",!0,v,T),T.onerror=F(An,x,"TestLoadImage: error",!1,v,T),T.onabort=F(An,x,"TestLoadImage: abort",!1,v,T),T.ontimeout=F(An,x,"TestLoadImage: timeout",!1,v,T),p.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else v(!1)}function Jn(u,v){const x=new gn,T=new AbortController,W=setTimeout(()=>{T.abort(),An(x,"TestPingServer: timeout",!1,v)},1e4);fetch(u,{signal:T.signal}).then(ie=>{clearTimeout(W),ie.ok?An(x,"TestPingServer: ok",!0,v):An(x,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(W),An(x,"TestPingServer: error",!1,v)})}function An(u,v,x,T,W){try{W&&(W.onload=null,W.onerror=null,W.onabort=null,W.ontimeout=null),T(x)}catch{}}function ys(){this.g=new Hi}function un(u,v,x){const T=x||"";try{Oa(u,function(W,ie){let _e=W;y(W)&&(_e=Be(W)),v.push(T+ie+"="+encodeURIComponent(_e))})}catch(W){throw v.push(T+"type="+encodeURIComponent("_badmap")),W}}function Ki(u){this.l=u.Ub||null,this.j=u.eb||!1}G(Ki,Rr),Ki.prototype.g=function(){return new Yi(this.l,this.j)},Ki.prototype.i=function(u){return function(){return u}}({});function Yi(u,v){Et.call(this),this.D=u,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}G(Yi,Et),i=Yi.prototype,i.open=function(u,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=v,this.readyState=1,Ci(this)},i.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(v.body=u),(this.D||p).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,$t(this)),this.readyState=0},i.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Ci(this)),this.g&&(this.readyState=3,Ci(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof p.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;vs(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function vs(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}i.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var v=u.value?u.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!u.done}))&&(this.response=this.responseText+=v)}u.done?$t(this):Ci(this),this.readyState==3&&vs(this)}},i.Ra=function(u){this.g&&(this.response=this.responseText=u,$t(this))},i.Qa=function(u){this.g&&(this.response=u,$t(this))},i.ga=function(){this.g&&$t(this)};function $t(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Ci(u)}i.setRequestHeader=function(u,v){this.u.append(u,v)},i.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],v=this.h.entries();for(var x=v.next();!x.done;)x=x.value,u.push(x[0]+": "+x[1]),x=v.next();return u.join(`\r
`)};function Ci(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Yi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function xs(u){let v="";return xe(u,function(x,T){v+=T,v+=":",v+=x,v+=`\r
`}),v}function Bt(u,v,x){e:{for(T in x){var T=!1;break e}T=!0}T||(x=xs(x),typeof u=="string"?x!=null&&encodeURIComponent(String(x)):Qe(u,v,x))}function ft(u){Et.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}G(ft,Et);var La=/^https?$/i,Ii=["POST","PUT"];i=ft.prototype,i.Ha=function(u){this.J=u},i.ea=function(u,v,x,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);v=v?v.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():oi.g(),this.v=this.o?Ca(this.o):Ca(oi),this.g.onreadystatechange=A(this.Ea,this);try{this.B=!0,this.g.open(v,String(u),!0),this.B=!1}catch(ie){kl(this,ie);return}if(u=x||"",x=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var W in T)x.set(W,T[W]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const ie of T.keys())x.set(ie,T.get(ie));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(x.keys()).find(ie=>ie.toLowerCase()=="content-type"),W=p.FormData&&u instanceof p.FormData,!(0<=Array.prototype.indexOf.call(Ii,v,void 0))||T||W||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ie,_e]of x)this.g.setRequestHeader(ie,_e);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ys(this),this.u=!0,this.g.send(u),this.u=!1}catch(ie){kl(this,ie)}};function kl(u,v){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=v,u.m=5,bs(u),ki(u)}function bs(u){u.A||(u.A=!0,$e(u,"complete"),$e(u,"error"))}i.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,$e(this,"complete"),$e(this,"abort"),ki(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ki(this,!0)),ft.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?_s(this):this.bb())},i.bb=function(){_s(this)};function _s(u){if(u.h&&typeof f<"u"&&(!u.v[1]||ei(u)!=4||u.Z()!=2)){if(u.u&&ei(u)==4)Z(u.Ea,0,u);else if($e(u,"readystatechange"),ei(u)==4){u.h=!1;try{const _e=u.Z();e:switch(_e){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var x;if(!(x=v)){var T;if(T=_e===0){var W=String(u.D).match(Xs)[1]||null;!W&&p.self&&p.self.location&&(W=p.self.location.protocol.slice(0,-1)),T=!La.test(W?W.toLowerCase():"")}x=T}if(x)$e(u,"complete"),$e(u,"success");else{u.m=6;try{var ie=2<ei(u)?u.g.statusText:""}catch{ie=""}u.l=ie+" ["+u.Z()+"]",bs(u)}}finally{ki(u)}}}}function ki(u,v){if(u.g){Ys(u);const x=u.g,T=u.v[0]?()=>{}:null;u.g=null,u.v=null,v||$e(u,"ready");try{x.onreadystatechange=T}catch{}}}function Ys(u){u.I&&(p.clearTimeout(u.I),u.I=null)}i.isActive=function(){return!!this.g};function ei(u){return u.g?u.g.readyState:0}i.Z=function(){try{return 2<ei(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(u){if(this.g){var v=this.g.responseText;return u&&v.indexOf(u)==0&&(v=v.substring(u.length)),Gn(v)}};function ko(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Nl(u){const v={};u=(u.g&&2<=ei(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if($(u[T]))continue;var x=N(u[T]);const W=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const ie=v[W]||[];v[W]=ie,ie.push(x)}V(v,function(T){return T.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ws(u,v,x){return x&&x.internalChannelParams&&x.internalChannelParams[u]||v}function Or(u){this.Aa=0,this.i=[],this.j=new gn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ws("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ws("baseRetryDelayMs",5e3,u),this.cb=ws("retryDelaySeedMs",1e4,u),this.Wa=ws("forwardChannelMaxRetries",2,u),this.wa=ws("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Si(u&&u.concurrentRequestLimit),this.Da=new ys,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=Or.prototype,i.la=8,i.G=1,i.connect=function(u,v,x,T){bt(0),this.W=u,this.H=v||{},x&&T!==void 0&&(this.H.OSID=x,this.H.OAID=T),this.F=this.X,this.I=U(this,null,this.W),$s(this)};function Va(u){if(Pa(u),u.G==3){var v=u.U++,x=vn(u.I);if(Qe(x,"SID",u.K),Qe(x,"RID",v),Qe(x,"TYPE","terminate"),Ss(u,x),v=new En(u,u.j,v),v.L=2,v.v=fs(vn(x)),x=!1,p.navigator&&p.navigator.sendBeacon)try{x=p.navigator.sendBeacon(v.v.toString(),"")}catch{}!x&&p.Image&&(new Image().src=v.v,x=!0),x||(v.g=D(v.j,null),v.g.ea(v.v)),v.F=Date.now(),wi(v)}I(u)}function Qs(u){u.g&&(Es(u),u.g.cancel(),u.g=null)}function Pa(u){Qs(u),u.u&&(p.clearTimeout(u.u),u.u=null),Js(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&p.clearTimeout(u.s),u.s=null)}function $s(u){if(!kr(u.h)&&!u.s){u.s=!0;var v=u.Ga;me||O(),re||(me(),re=!0),Ae.add(v,u),u.B=0}}function No(u,v){return Nr(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=v.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Wt(A(u.Ga,u,v),Vr(u,u.B)),u.B++,!0)}i.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const W=new En(this,this.j,u);let ie=this.o;if(this.S&&(ie?(ie=R(ie),M(ie,this.S)):ie=this.S),this.m!==null||this.O||(W.H=ie,ie=null),this.P)e:{for(var v=0,x=0;x<this.i.length;x++){t:{var T=this.i[x];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(v+=T,4096<v){v=x;break e}if(v===4096||x===this.i.length-1){v=x+1;break e}}v=1e3}else v=1e3;v=Ua(this,W,v),x=vn(this.I),Qe(x,"RID",u),Qe(x,"CVER",22),this.D&&Qe(x,"X-HTTP-Session-Id",this.D),Ss(this,x),ie&&(this.O?v="headers="+encodeURIComponent(String(xs(ie)))+"&"+v:this.m&&Bt(x,this.m,ie)),Ws(this.h,W),this.Ua&&Qe(x,"TYPE","init"),this.P?(Qe(x,"$req",v),Qe(x,"SID","null"),W.T=!0,Kn(W,x,null)):Kn(W,x,v),this.G=2}}else this.G==3&&(u?Mr(this,u):this.i.length==0||kr(this.h)||Mr(this))};function Mr(u,v){var x;v?x=v.l:x=u.U++;const T=vn(u.I);Qe(T,"SID",u.K),Qe(T,"RID",x),Qe(T,"AID",u.T),Ss(u,T),u.m&&u.o&&Bt(T,u.m,u.o),x=new En(u,u.j,x,u.B+1),u.m===null&&(x.H=u.o),v&&(u.i=v.D.concat(u.i)),v=Ua(u,x,1e3),x.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Ws(u.h,x),Kn(x,T,v)}function Ss(u,v){u.H&&xe(u.H,function(x,T){Qe(v,T,x)}),u.l&&Oa({},function(x,T){Qe(v,T,x)})}function Ua(u,v,x){x=Math.min(u.i.length,x);var T=u.l?A(u.l.Na,u.l,u):null;e:{var W=u.i;let ie=-1;for(;;){const _e=["count="+x];ie==-1?0<x?(ie=W[0].g,_e.push("ofs="+ie)):ie=0:_e.push("ofs="+ie);let Ze=!0;for(let It=0;It<x;It++){let Ke=W[It].g;const kt=W[It].map;if(Ke-=ie,0>Ke)ie=Math.max(0,W[It].g-100),Ze=!1;else try{un(kt,_e,"req"+Ke+"_")}catch{T&&T(kt)}}if(Ze){T=_e.join("&");break e}}}return u=u.i.splice(0,x),v.D=u,T}function Ba(u){if(!u.g&&!u.u){u.Y=1;var v=u.Fa;me||O(),re||(me(),re=!0),Ae.add(v,u),u.v=0}}function Lr(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Wt(A(u.Fa,u),Vr(u,u.v)),u.v++,!0)}i.Fa=function(){if(this.u=null,za(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Wt(A(this.ab,this),u)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,bt(10),Qs(this),za(this))};function Es(u){u.A!=null&&(p.clearTimeout(u.A),u.A=null)}function za(u){u.g=new En(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var v=vn(u.qa);Qe(v,"RID","rpc"),Qe(v,"SID",u.K),Qe(v,"AID",u.T),Qe(v,"CI",u.F?"0":"1"),!u.F&&u.ja&&Qe(v,"TO",u.ja),Qe(v,"TYPE","xmlhttp"),Ss(u,v),u.m&&u.o&&Bt(v,u.m,u.o),u.L&&(u.g.I=u.L);var x=u.g;u=u.ia,x.L=1,x.v=fs(vn(v)),x.m=null,x.P=!0,Ln(x,u)}i.Za=function(){this.C!=null&&(this.C=null,Qs(this),Lr(this),bt(19))};function Js(u){u.C!=null&&(p.clearTimeout(u.C),u.C=null)}function Fa(u,v){var x=null;if(u.g==v){Js(u),Es(u),u.g=null;var T=2}else if(ja(u.h,v))x=v.D,yn(u.h,v),T=1;else return;if(u.G!=0){if(v.o)if(T==1){x=v.m?v.m.length:0,v=Date.now()-v.F;var W=u.B;T=ai(),$e(T,new nn(T,x)),$s(u)}else Ba(u);else if(W=v.s,W==3||W==0&&0<v.X||!(T==1&&No(u,v)||T==2&&Lr(u)))switch(x&&0<x.length&&(v=u.h,v.i=v.i.concat(x)),W){case 1:_(u,5);break;case 4:_(u,10);break;case 3:_(u,6);break;default:_(u,2)}}}function Vr(u,v){let x=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(x*=2),x*v}function _(u,v){if(u.j.info("Error code "+v),v==2){var x=A(u.fb,u),T=u.Xa;const W=!T;T=new Xt(T||"//www.google.com/images/cleardot.gif"),p.location&&p.location.protocol=="http"||Zs(T,"https"),fs(T),W?Ri(T.toString(),x):Jn(T.toString(),x)}else bt(2);u.G=0,u.l&&u.l.sa(v),I(u),Pa(u)}i.fb=function(u){u?(this.j.info("Successfully pinged google.com"),bt(2)):(this.j.info("Failed to ping google.com"),bt(1))};function I(u){if(u.G=0,u.ka=[],u.l){const v=Da(u.h);(v.length!=0||u.i.length!=0)&&(Q(u.ka,v),Q(u.ka,u.i),u.h.i.length=0,q(u.i),u.i.length=0),u.l.ra()}}function U(u,v,x){var T=x instanceof Xt?vn(x):new Xt(x);if(T.g!="")v&&(T.g=v+"."+T.g),hs(T,T.s);else{var W=p.location;T=W.protocol,v=v?v+"."+W.hostname:W.hostname,W=+W.port;var ie=new Xt(null);T&&Zs(ie,T),v&&(ie.g=v),W&&hs(ie,W),x&&(ie.l=x),T=ie}return x=u.D,v=u.ya,x&&v&&Qe(T,x,v),Qe(T,"VER",u.la),Ss(u,T),T}function D(u,v,x){if(v&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=u.Ca&&!u.pa?new ft(new Ki({eb:x})):new ft(u.pa),v.Ha(u.J),v}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function ne(){}i=ne.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function ve(){}ve.prototype.g=function(u,v){return new ue(u,v)};function ue(u,v){Et.call(this),this.g=new Or(v),this.l=u,this.h=v&&v.messageUrlParams||null,u=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(u?u["X-WebChannel-Content-Type"]=v.messageContentType:u={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(u?u["X-WebChannel-Client-Profile"]=v.va:u={"X-WebChannel-Client-Profile":v.va}),this.g.S=u,(u=v&&v.Sb)&&!$(u)&&(this.g.m=u),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!$(v)&&(this.g.D=v,u=this.h,u!==null&&v in u&&(u=this.h,v in u&&delete u[v])),this.j=new Oe(this)}G(ue,Et),ue.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ue.prototype.close=function(){Va(this.g)},ue.prototype.o=function(u){var v=this.g;if(typeof u=="string"){var x={};x.__data__=u,u=x}else this.u&&(x={},x.__data__=Be(u),u=x);v.i.push(new Na(v.Ya++,u)),v.G==3&&$s(v)},ue.prototype.N=function(){this.g.l=null,delete this.j,Va(this.g),delete this.g,ue.aa.N.call(this)};function Ie(u){Gi.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var v=u.__sm__;if(v){e:{for(const x in v){u=x;break e}u=void 0}(this.i=u)&&(u=this.i,v=v!==null&&u in v?v[u]:void 0),this.data=v}else this.data=u}G(Ie,Gi);function Ct(){Ia.call(this),this.status=1}G(Ct,Ia);function Oe(u){this.g=u}G(Oe,ne),Oe.prototype.ua=function(){$e(this.g,"a")},Oe.prototype.ta=function(u){$e(this.g,new Ie(u))},Oe.prototype.sa=function(u){$e(this.g,new Ct)},Oe.prototype.ra=function(){$e(this.g,"b")},ve.prototype.createWebChannel=ve.prototype.g,ue.prototype.send=ue.prototype.o,ue.prototype.open=ue.prototype.m,ue.prototype.close=ue.prototype.close,u2=function(){return new ve},c2=function(){return ai()},l2=Wn,Xm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Wi.NO_ERROR=0,Wi.TIMEOUT=8,Wi.HTTP_ERROR=6,wd=Wi,Xi.COMPLETE="complete",o2=Xi,Hs.EventType=qi,qi.OPEN="a",qi.CLOSE="b",qi.ERROR="c",qi.MESSAGE="d",Et.prototype.listen=Et.prototype.K,Ec=Hs,ft.prototype.listenOnce=ft.prototype.L,ft.prototype.getLastError=ft.prototype.Ka,ft.prototype.getLastErrorCode=ft.prototype.Ba,ft.prototype.getStatus=ft.prototype.Z,ft.prototype.getResponseJson=ft.prototype.Oa,ft.prototype.getResponseText=ft.prototype.oa,ft.prototype.send=ft.prototype.ea,ft.prototype.setWithCredentials=ft.prototype.Ha,a2=ft}).apply(typeof dd<"u"?dd:typeof self<"u"?self:typeof window<"u"?window:{});const w1="@firebase/firestore",S1="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Bn.UNAUTHENTICATED=new Bn(null),Bn.GOOGLE_CREDENTIALS=new Bn("google-credentials-uid"),Bn.FIRST_PARTY=new Bn("first-party-uid"),Bn.MOCK_USER=new Bn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Al="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mo=new th("@firebase/firestore");function ol(){return mo.logLevel}function Ee(i,...e){if(mo.logLevel<=lt.DEBUG){const n=e.map(jp);mo.debug(`Firestore (${Al}): ${i}`,...n)}}function Sr(i,...e){if(mo.logLevel<=lt.ERROR){const n=e.map(jp);mo.error(`Firestore (${Al}): ${i}`,...n)}}function ya(i,...e){if(mo.logLevel<=lt.WARN){const n=e.map(jp);mo.warn(`Firestore (${Al}): ${i}`,...n)}}function jp(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ue(i,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,d2(i,r,n)}function d2(i,e,n){let r=`FIRESTORE (${Al}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Sr(r),new Error(r)}function xt(i,e,n,r){let o="Unexpected state";typeof n=="string"?o=n:r=n,i||d2(e,o,r)}function We(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ge={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class De extends os{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class s4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Bn.UNAUTHENTICATED))}shutdown(){}}class r4{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class a4{constructor(e){this.t=e,this.currentUser=Bn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){xt(this.o===void 0,42304);let r=this.i;const o=g=>this.i!==r?(r=this.i,n(g)):Promise.resolve();let c=new pa;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new pa,e.enqueueRetryable(()=>o(this.currentUser))};const f=()=>{const g=c;e.enqueueRetryable(async()=>{await g.promise,await o(this.currentUser)})},p=g=>{Ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit(g=>p(g)),setTimeout(()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?p(g):(Ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new pa)}},0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(xt(typeof r.accessToken=="string",31837,{l:r}),new h2(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return xt(e===null||typeof e=="string",2055,{h:e}),new Bn(e)}}class o4{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Bn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class l4{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new o4(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Bn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class E1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class c4{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Pi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){xt(this.o===void 0,3512);const r=c=>{c.error!=null&&Ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const f=c.token!==this.m;return this.m=c.token,Ee("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>r(c))};const o=c=>{Ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(c=>o(c)),setTimeout(()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?o(c):Ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new E1(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(xt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new E1(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u4(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<i;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f2(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=u4(40);for(let c=0;c<o.length;++c)r.length<20&&o[c]<n&&(r+=e.charAt(o[c]%62))}return r}}function et(i,e){return i<e?-1:i>e?1:0}function Zm(i,e){let n=0;for(;n<i.length&&n<e.length;){const r=i.codePointAt(n),o=e.codePointAt(n);if(r!==o){if(r<128&&o<128)return et(r,o);{const c=f2(),f=d4(c.encode(A1(i,n)),c.encode(A1(e,n)));return f!==0?f:et(r,o)}}n+=r>65535?2:1}return et(i.length,e.length)}function A1(i,e){return i.codePointAt(e)>65535?i.substring(e,e+2):i.substring(e,e+1)}function d4(i,e){for(let n=0;n<i.length&&n<e.length;++n)if(i[n]!==e[n])return et(i[n],e[n]);return et(i.length,e.length)}function gl(i,e,n){return i.length===e.length&&i.every((r,o)=>n(r,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T1="__name__";class ks{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ue(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Ue(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ks.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ks?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let o=0;o<r;o++){const c=ks.compareSegments(e.get(o),n.get(o));if(c!==0)return c}return et(e.length,n.length)}static compareSegments(e,n){const r=ks.isNumericId(e),o=ks.isNumericId(n);return r&&!o?-1:!r&&o?1:r&&o?ks.extractNumericId(e).compare(ks.extractNumericId(n)):Zm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ma.fromString(e.substring(4,e.length-2))}}class Ft extends ks{construct(e,n,r){return new Ft(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new De(ge.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(o=>o.length>0))}return new Ft(n)}static emptyPath(){return new Ft([])}}const h4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Dn extends ks{construct(e,n,r){return new Dn(e,n,r)}static isValidIdentifier(e){return h4.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Dn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===T1}static keyField(){return new Dn([T1])}static fromServerFormat(e){const n=[];let r="",o=0;const c=()=>{if(r.length===0)throw new De(ge.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let f=!1;for(;o<e.length;){const p=e[o];if(p==="\\"){if(o+1===e.length)throw new De(ge.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new De(ge.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=g,o+=2}else p==="`"?(f=!f,o++):p!=="."||f?(r+=p,o++):(c(),o++)}if(c(),f)throw new De(ge.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Dn(n)}static emptyPath(){return new Dn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(e){this.path=e}static fromPath(e){return new Me(Ft.fromString(e))}static fromName(e){return new Me(Ft.fromString(e).popFirst(5))}static empty(){return new Me(Ft.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ft.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ft.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Me(new Ft(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f4(i,e,n){if(!n)throw new De(ge.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function m4(i,e,n,r){if(e===!0&&r===!0)throw new De(ge.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function R1(i){if(!Me.isDocumentKey(i))throw new De(ge.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function m2(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function Op(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":Ue(12329,{type:typeof i})}function Fc(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new De(ge.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Op(i);throw new De(ge.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(i,e){const n={typeString:i};return e&&(n.value=e),n}function su(i,e){if(!m2(i))throw new De(ge.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const o=e[r].typeString,c="value"in e[r]?{value:e[r].value}:void 0;if(!(r in i)){n=`JSON missing required field: '${r}'`;break}const f=i[r];if(o&&typeof f!==o){n=`JSON field '${r}' must be a ${o}.`;break}if(c!==void 0&&f!==c.value){n=`Expected '${r}' field to equal '${c.value}'`;break}}if(n)throw new De(ge.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C1=-62135596800,I1=1e6;class Ot{static now(){return Ot.fromMillis(Date.now())}static fromDate(e){return Ot.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*I1);return new Ot(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new De(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new De(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<C1)throw new De(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new De(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/I1}_compareTo(e){return this.seconds===e.seconds?et(this.nanoseconds,e.nanoseconds):et(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ot._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(su(e,Ot._jsonSchema))return new Ot(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-C1;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ot._jsonSchemaVersion="firestore/timestamp/1.0",Ot._jsonSchema={type:on("string",Ot._jsonSchemaVersion),seconds:on("number"),nanoseconds:on("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{static fromTimestamp(e){return new Ge(e)}static min(){return new Ge(new Ot(0,0))}static max(){return new Ge(new Ot(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hc=-1;function p4(i,e){const n=i.toTimestamp().seconds,r=i.toTimestamp().nanoseconds+1,o=Ge.fromTimestamp(r===1e9?new Ot(n+1,0):new Ot(n,r));return new va(o,Me.empty(),e)}function g4(i){return new va(i.readTime,i.key,Hc)}class va{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new va(Ge.min(),Me.empty(),Hc)}static max(){return new va(Ge.max(),Me.empty(),Hc)}}function y4(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=Me.comparator(i.documentKey,e.documentKey),n!==0?n:et(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class x4{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tl(i){if(i.code!==ge.FAILED_PRECONDITION||i.message!==v4)throw i;Ee("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ue(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new fe((r,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(r,o)},this.catchCallback=c=>{this.wrapFailure(n,c).next(r,o)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof fe?n:fe.resolve(n)}catch(n){return fe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):fe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):fe.reject(n)}static resolve(e){return new fe((n,r)=>{n(e)})}static reject(e){return new fe((n,r)=>{r(e)})}static waitFor(e){return new fe((n,r)=>{let o=0,c=0,f=!1;e.forEach(p=>{++o,p.next(()=>{++c,f&&c===o&&n()},g=>r(g))}),f=!0,c===o&&n()})}static or(e){let n=fe.resolve(!1);for(const r of e)n=n.next(o=>o?fe.resolve(o):r());return n}static forEach(e,n){const r=[];return e.forEach((o,c)=>{r.push(n.call(this,o,c))}),this.waitFor(r)}static mapArray(e,n){return new fe((r,o)=>{const c=e.length,f=new Array(c);let p=0;for(let g=0;g<c;g++){const y=g;n(e[y]).next(w=>{f[y]=w,++p,p===c&&r(f)},w=>o(w))}})}static doWhile(e,n){return new fe((r,o)=>{const c=()=>{e()===!0?n().next(()=>{c()},o):r()};c()})}}function b4(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Rl(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this._e(r),this.ae=r=>n.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}oh.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mp=-1;function lh(i){return i==null}function Bd(i){return i===0&&1/i==-1/0}function _4(i){return typeof i=="number"&&Number.isInteger(i)&&!Bd(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p2="";function w4(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=k1(e)),e=S4(i.get(n),e);return k1(e)}function S4(i,e){let n=e;const r=i.length;for(let o=0;o<r;o++){const c=i.charAt(o);switch(c){case"\0":n+="";break;case p2:n+="";break;default:n+=c}}return n}function k1(i){return i+p2+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N1(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function bo(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function g2(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e,n){this.comparator=e,this.root=n||Nn.EMPTY}insert(e,n){return new qt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Nn.BLACK,null,null))}remove(e){return new qt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Nn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return n+r.left.size;o<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new hd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new hd(this.root,e,this.comparator,!1)}getReverseIterator(){return new hd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new hd(this.root,e,this.comparator,!0)}}class hd{constructor(e,n,r,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?r(e.key,n):1,n&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Nn{constructor(e,n,r,o,c){this.key=e,this.value=n,this.color=r??Nn.RED,this.left=o??Nn.EMPTY,this.right=c??Nn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,o,c){return new Nn(e??this.key,n??this.value,r??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let o=this;const c=r(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,n,r),null):c===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Nn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return Nn.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Nn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Nn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ue(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ue(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ue(27949);return e+(this.isRed()?0:1)}}Nn.EMPTY=null,Nn.RED=!0,Nn.BLACK=!1;Nn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ue(57766)}get value(){throw Ue(16141)}get color(){throw Ue(16727)}get left(){throw Ue(29726)}get right(){throw Ue(36894)}copy(e,n,r,o,c){return this}insert(e,n,r){return new Nn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e){this.comparator=e,this.data=new qt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new j1(this.data.getIterator())}getIteratorFrom(e){return new j1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof mn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=r.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new mn(this.comparator);return n.data=e,n}}class j1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(e){this.fields=e,e.sort(Dn.comparator)}static empty(){return new ns([])}unionWith(e){let n=new mn(Dn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new ns(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return gl(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new y2("Invalid base64 string: "+c):c}}(e);return new On(n)}static fromUint8Array(e){const n=function(o){let c="";for(let f=0;f<o.length;++f)c+=String.fromCharCode(o[f]);return c}(e);return new On(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return et(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}On.EMPTY_BYTE_STRING=new On("");const E4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xa(i){if(xt(!!i,39018),typeof i=="string"){let e=0;const n=E4.exec(i);if(xt(!!n,46558,{timestamp:i}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(i);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:tn(i.seconds),nanos:tn(i.nanos)}}function tn(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function ba(i){return typeof i=="string"?On.fromBase64String(i):On.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v2="server_timestamp",x2="__type__",b2="__previous_value__",_2="__local_write_time__";function Lp(i){var e,n;return((n=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[x2])===null||n===void 0?void 0:n.stringValue)===v2}function ch(i){const e=i.mapValue.fields[b2];return Lp(e)?ch(e):e}function qc(i){const e=xa(i.mapValue.fields[_2].timestampValue);return new Ot(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A4{constructor(e,n,r,o,c,f,p,g,y,w){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=o,this.ssl=c,this.forceLongPolling=f,this.autoDetectLongPolling=p,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=w}}const zd="(default)";class Gc{constructor(e,n){this.projectId=e,this.database=n||zd}static empty(){return new Gc("","")}get isDefaultDatabase(){return this.database===zd}isEqual(e){return e instanceof Gc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w2="__type__",T4="__max__",fd={mapValue:{}},S2="__vector__",Fd="value";function _a(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Lp(i)?4:C4(i)?9007199254740991:R4(i)?10:11:Ue(28295,{value:i})}function Ps(i,e){if(i===e)return!0;const n=_a(i);if(n!==_a(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return qc(i).isEqual(qc(e));case 3:return function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const f=xa(o.timestampValue),p=xa(c.timestampValue);return f.seconds===p.seconds&&f.nanos===p.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return function(o,c){return ba(o.bytesValue).isEqual(ba(c.bytesValue))}(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return function(o,c){return tn(o.geoPointValue.latitude)===tn(c.geoPointValue.latitude)&&tn(o.geoPointValue.longitude)===tn(c.geoPointValue.longitude)}(i,e);case 2:return function(o,c){if("integerValue"in o&&"integerValue"in c)return tn(o.integerValue)===tn(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const f=tn(o.doubleValue),p=tn(c.doubleValue);return f===p?Bd(f)===Bd(p):isNaN(f)&&isNaN(p)}return!1}(i,e);case 9:return gl(i.arrayValue.values||[],e.arrayValue.values||[],Ps);case 10:case 11:return function(o,c){const f=o.mapValue.fields||{},p=c.mapValue.fields||{};if(N1(f)!==N1(p))return!1;for(const g in f)if(f.hasOwnProperty(g)&&(p[g]===void 0||!Ps(f[g],p[g])))return!1;return!0}(i,e);default:return Ue(52216,{left:i})}}function Wc(i,e){return(i.values||[]).find(n=>Ps(n,e))!==void 0}function yl(i,e){if(i===e)return 0;const n=_a(i),r=_a(e);if(n!==r)return et(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return et(i.booleanValue,e.booleanValue);case 2:return function(c,f){const p=tn(c.integerValue||c.doubleValue),g=tn(f.integerValue||f.doubleValue);return p<g?-1:p>g?1:p===g?0:isNaN(p)?isNaN(g)?0:-1:1}(i,e);case 3:return D1(i.timestampValue,e.timestampValue);case 4:return D1(qc(i),qc(e));case 5:return Zm(i.stringValue,e.stringValue);case 6:return function(c,f){const p=ba(c),g=ba(f);return p.compareTo(g)}(i.bytesValue,e.bytesValue);case 7:return function(c,f){const p=c.split("/"),g=f.split("/");for(let y=0;y<p.length&&y<g.length;y++){const w=et(p[y],g[y]);if(w!==0)return w}return et(p.length,g.length)}(i.referenceValue,e.referenceValue);case 8:return function(c,f){const p=et(tn(c.latitude),tn(f.latitude));return p!==0?p:et(tn(c.longitude),tn(f.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return O1(i.arrayValue,e.arrayValue);case 10:return function(c,f){var p,g,y,w;const S=c.fields||{},A=f.fields||{},F=(p=S[Fd])===null||p===void 0?void 0:p.arrayValue,G=(g=A[Fd])===null||g===void 0?void 0:g.arrayValue,q=et(((y=F==null?void 0:F.values)===null||y===void 0?void 0:y.length)||0,((w=G==null?void 0:G.values)===null||w===void 0?void 0:w.length)||0);return q!==0?q:O1(F,G)}(i.mapValue,e.mapValue);case 11:return function(c,f){if(c===fd.mapValue&&f===fd.mapValue)return 0;if(c===fd.mapValue)return 1;if(f===fd.mapValue)return-1;const p=c.fields||{},g=Object.keys(p),y=f.fields||{},w=Object.keys(y);g.sort(),w.sort();for(let S=0;S<g.length&&S<w.length;++S){const A=Zm(g[S],w[S]);if(A!==0)return A;const F=yl(p[g[S]],y[w[S]]);if(F!==0)return F}return et(g.length,w.length)}(i.mapValue,e.mapValue);default:throw Ue(23264,{le:n})}}function D1(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return et(i,e);const n=xa(i),r=xa(e),o=et(n.seconds,r.seconds);return o!==0?o:et(n.nanos,r.nanos)}function O1(i,e){const n=i.values||[],r=e.values||[];for(let o=0;o<n.length&&o<r.length;++o){const c=yl(n[o],r[o]);if(c)return c}return et(n.length,r.length)}function vl(i){return Km(i)}function Km(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(n){const r=xa(n);return`time(${r.seconds},${r.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?function(n){return ba(n).toBase64()}(i.bytesValue):"referenceValue"in i?function(n){return Me.fromName(n).toString()}(i.referenceValue):"geoPointValue"in i?function(n){return`geo(${n.latitude},${n.longitude})`}(i.geoPointValue):"arrayValue"in i?function(n){let r="[",o=!0;for(const c of n.values||[])o?o=!1:r+=",",r+=Km(c);return r+"]"}(i.arrayValue):"mapValue"in i?function(n){const r=Object.keys(n.fields||{}).sort();let o="{",c=!0;for(const f of r)c?c=!1:o+=",",o+=`${f}:${Km(n.fields[f])}`;return o+"}"}(i.mapValue):Ue(61005,{value:i})}function Sd(i){switch(_a(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ch(i);return e?16+Sd(e):16;case 5:return 2*i.stringValue.length;case 6:return ba(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((o,c)=>o+Sd(c),0)}(i.arrayValue);case 10:case 11:return function(r){let o=0;return bo(r.fields,(c,f)=>{o+=c.length+Sd(f)}),o}(i.mapValue);default:throw Ue(13486,{value:i})}}function Ym(i){return!!i&&"integerValue"in i}function Vp(i){return!!i&&"arrayValue"in i}function M1(i){return!!i&&"nullValue"in i}function L1(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Ed(i){return!!i&&"mapValue"in i}function R4(i){var e,n;return((n=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[w2])===null||n===void 0?void 0:n.stringValue)===S2}function jc(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return bo(i.mapValue.fields,(n,r)=>e.mapValue.fields[n]=jc(r)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=jc(i.arrayValue.values[n]);return e}return Object.assign({},i)}function C4(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===T4}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e){this.value=e}static empty(){return new Ui({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ed(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=jc(n)}setAll(e){let n=Dn.emptyPath(),r={},o=[];e.forEach((f,p)=>{if(!n.isImmediateParentOf(p)){const g=this.getFieldsMap(n);this.applyChanges(g,r,o),r={},o=[],n=p.popLast()}f?r[p.lastSegment()]=jc(f):o.push(p.lastSegment())});const c=this.getFieldsMap(n);this.applyChanges(c,r,o)}delete(e){const n=this.field(e.popLast());Ed(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ps(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=n.mapValue.fields[e.get(r)];Ed(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,r){bo(n,(o,c)=>e[o]=c);for(const o of r)delete e[o]}clone(){return new Ui(jc(this.value))}}function E2(i){const e=[];return bo(i.fields,(n,r)=>{const o=new Dn([n]);if(Ed(r)){const c=E2(r.mapValue).fields;if(c.length===0)e.push(o);else for(const f of c)e.push(o.child(f))}else e.push(o)}),new ns(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e,n,r,o,c,f,p){this.key=e,this.documentType=n,this.version=r,this.readTime=o,this.createTime=c,this.data=f,this.documentState=p}static newInvalidDocument(e){return new zn(e,0,Ge.min(),Ge.min(),Ge.min(),Ui.empty(),0)}static newFoundDocument(e,n,r,o){return new zn(e,1,n,Ge.min(),r,o,0)}static newNoDocument(e,n){return new zn(e,2,n,Ge.min(),Ge.min(),Ui.empty(),0)}static newUnknownDocument(e,n){return new zn(e,3,n,Ge.min(),Ge.min(),Ui.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ge.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ui.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ui.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ge.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof zn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new zn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(e,n){this.position=e,this.inclusive=n}}function V1(i,e,n){let r=0;for(let o=0;o<i.position.length;o++){const c=e[o],f=i.position[o];if(c.field.isKeyField()?r=Me.comparator(Me.fromName(f.referenceValue),n.key):r=yl(f,n.data.field(c.field)),c.dir==="desc"&&(r*=-1),r!==0)break}return r}function P1(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!Ps(i.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{constructor(e,n="asc"){this.field=e,this.dir=n}}function I4(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{}class fn extends A2{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new N4(e,n,r):n==="array-contains"?new O4(e,r):n==="in"?new M4(e,r):n==="not-in"?new L4(e,r):n==="array-contains-any"?new V4(e,r):new fn(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new j4(e,r):new D4(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(yl(n,this.value)):n!==null&&_a(this.value)===_a(n)&&this.matchesComparison(yl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ue(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Us extends A2{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new Us(e,n)}matches(e){return T2(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function T2(i){return i.op==="and"}function R2(i){return k4(i)&&T2(i)}function k4(i){for(const e of i.filters)if(e instanceof Us)return!1;return!0}function Qm(i){if(i instanceof fn)return i.field.canonicalString()+i.op.toString()+vl(i.value);if(R2(i))return i.filters.map(e=>Qm(e)).join(",");{const e=i.filters.map(n=>Qm(n)).join(",");return`${i.op}(${e})`}}function C2(i,e){return i instanceof fn?function(r,o){return o instanceof fn&&r.op===o.op&&r.field.isEqual(o.field)&&Ps(r.value,o.value)}(i,e):i instanceof Us?function(r,o){return o instanceof Us&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce((c,f,p)=>c&&C2(f,o.filters[p]),!0):!1}(i,e):void Ue(19439)}function I2(i){return i instanceof fn?function(n){return`${n.field.canonicalString()} ${n.op} ${vl(n.value)}`}(i):i instanceof Us?function(n){return n.op.toString()+" {"+n.getFilters().map(I2).join(" ,")+"}"}(i):"Filter"}class N4 extends fn{constructor(e,n,r){super(e,n,r),this.key=Me.fromName(r.referenceValue)}matches(e){const n=Me.comparator(e.key,this.key);return this.matchesComparison(n)}}class j4 extends fn{constructor(e,n){super(e,"in",n),this.keys=k2("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class D4 extends fn{constructor(e,n){super(e,"not-in",n),this.keys=k2("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function k2(i,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Me.fromName(r.referenceValue))}class O4 extends fn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Vp(n)&&Wc(n.arrayValue,this.value)}}class M4 extends fn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Wc(this.value.arrayValue,n)}}class L4 extends fn{constructor(e,n){super(e,"not-in",n)}matches(e){if(Wc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Wc(this.value.arrayValue,n)}}class V4 extends fn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Vp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Wc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P4{constructor(e,n=null,r=[],o=[],c=null,f=null,p=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=o,this.limit=c,this.startAt=f,this.endAt=p,this.Pe=null}}function U1(i,e=null,n=[],r=[],o=null,c=null,f=null){return new P4(i,e,n,r,o,c,f)}function Pp(i){const e=We(i);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Qm(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(c){return c.field.canonicalString()+c.dir}(r)).join(","),lh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>vl(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>vl(r)).join(",")),e.Pe=n}return e.Pe}function Up(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!I4(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!C2(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!P1(i.startAt,e.startAt)&&P1(i.endAt,e.endAt)}function $m(i){return Me.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(e,n=null,r=[],o=[],c=null,f="F",p=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=o,this.limit=c,this.limitType=f,this.startAt=p,this.endAt=g,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function U4(i,e,n,r,o,c,f,p){return new uh(i,e,n,r,o,c,f,p)}function Bp(i){return new uh(i)}function B1(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function B4(i){return i.collectionGroup!==null}function Dc(i){const e=We(i);if(e.Te===null){e.Te=[];const n=new Set;for(const c of e.explicitOrderBy)e.Te.push(c),n.add(c.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let p=new mn(Dn.comparator);return f.filters.forEach(g=>{g.getFlattenedFilters().forEach(y=>{y.isInequality()&&(p=p.add(y.field))})}),p})(e).forEach(c=>{n.has(c.canonicalString())||c.isKeyField()||e.Te.push(new qd(c,r))}),n.has(Dn.keyField().canonicalString())||e.Te.push(new qd(Dn.keyField(),r))}return e.Te}function Ds(i){const e=We(i);return e.Ie||(e.Ie=z4(e,Dc(i))),e.Ie}function z4(i,e){if(i.limitType==="F")return U1(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(o=>{const c=o.dir==="desc"?"asc":"desc";return new qd(o.field,c)});const n=i.endAt?new Hd(i.endAt.position,i.endAt.inclusive):null,r=i.startAt?new Hd(i.startAt.position,i.startAt.inclusive):null;return U1(i.path,i.collectionGroup,e,i.filters,i.limit,n,r)}}function Jm(i,e,n){return new uh(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function dh(i,e){return Up(Ds(i),Ds(e))&&i.limitType===e.limitType}function N2(i){return`${Pp(Ds(i))}|lt:${i.limitType}`}function ll(i){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(o=>I2(o)).join(", ")}]`),lh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(o=>function(f){return`${f.field.canonicalString()} (${f.dir})`}(o)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(o=>vl(o)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(o=>vl(o)).join(",")),`Target(${r})`}(Ds(i))}; limitType=${i.limitType})`}function hh(i,e){return e.isFoundDocument()&&function(r,o){const c=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(c):Me.isDocumentKey(r.path)?r.path.isEqual(c):r.path.isImmediateParentOf(c)}(i,e)&&function(r,o){for(const c of Dc(r))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0}(i,e)&&function(r,o){for(const c of r.filters)if(!c.matches(o))return!1;return!0}(i,e)&&function(r,o){return!(r.startAt&&!function(f,p,g){const y=V1(f,p,g);return f.inclusive?y<=0:y<0}(r.startAt,Dc(r),o)||r.endAt&&!function(f,p,g){const y=V1(f,p,g);return f.inclusive?y>=0:y>0}(r.endAt,Dc(r),o))}(i,e)}function F4(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function j2(i){return(e,n)=>{let r=!1;for(const o of Dc(i)){const c=H4(o,e,n);if(c!==0)return c;r=r||o.field.isKeyField()}return 0}}function H4(i,e,n){const r=i.field.isKeyField()?Me.comparator(e.key,n.key):function(c,f,p){const g=f.data.field(c),y=p.data.field(c);return g!==null&&y!==null?yl(g,y):Ue(42886)}(i.field,e,n);switch(i.dir){case"asc":return r;case"desc":return-1*r;default:return Ue(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[o,c]of r)if(this.equalsFn(o,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[n]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){bo(this.inner,(n,r)=>{for(const[o,c]of r)e(o,c)})}isEmpty(){return g2(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q4=new qt(Me.comparator);function Er(){return q4}const D2=new qt(Me.comparator);function Ac(...i){let e=D2;for(const n of i)e=e.insert(n.key,n);return e}function O2(i){let e=D2;return i.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function oo(){return Oc()}function M2(){return Oc()}function Oc(){return new _o(i=>i.toString(),(i,e)=>i.isEqual(e))}const G4=new qt(Me.comparator),W4=new mn(Me.comparator);function ct(...i){let e=W4;for(const n of i)e=e.add(n);return e}const X4=new mn(et);function Z4(){return X4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zp(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bd(e)?"-0":e}}function L2(i){return{integerValue:""+i}}function K4(i,e){return _4(e)?L2(e):zp(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(){this._=void 0}}function Y4(i,e,n){return i instanceof Gd?function(o,c){const f={fields:{[x2]:{stringValue:v2},[_2]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&Lp(c)&&(c=ch(c)),c&&(f.fields[b2]=c),{mapValue:f}}(n,e):i instanceof Xc?P2(i,e):i instanceof Zc?U2(i,e):function(o,c){const f=V2(o,c),p=z1(f)+z1(o.Ee);return Ym(f)&&Ym(o.Ee)?L2(p):zp(o.serializer,p)}(i,e)}function Q4(i,e,n){return i instanceof Xc?P2(i,e):i instanceof Zc?U2(i,e):n}function V2(i,e){return i instanceof Wd?function(r){return Ym(r)||function(c){return!!c&&"doubleValue"in c}(r)}(e)?e:{integerValue:0}:null}class Gd extends fh{}class Xc extends fh{constructor(e){super(),this.elements=e}}function P2(i,e){const n=B2(e);for(const r of i.elements)n.some(o=>Ps(o,r))||n.push(r);return{arrayValue:{values:n}}}class Zc extends fh{constructor(e){super(),this.elements=e}}function U2(i,e){let n=B2(e);for(const r of i.elements)n=n.filter(o=>!Ps(o,r));return{arrayValue:{values:n}}}class Wd extends fh{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function z1(i){return tn(i.integerValue||i.doubleValue)}function B2(i){return Vp(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function $4(i,e){return i.field.isEqual(e.field)&&function(r,o){return r instanceof Xc&&o instanceof Xc||r instanceof Zc&&o instanceof Zc?gl(r.elements,o.elements,Ps):r instanceof Wd&&o instanceof Wd?Ps(r.Ee,o.Ee):r instanceof Gd&&o instanceof Gd}(i.transform,e.transform)}class J4{constructor(e,n){this.version=e,this.transformResults=n}}class xr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new xr}static exists(e){return new xr(void 0,e)}static updateTime(e){return new xr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ad(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class mh{}function z2(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new H2(i.key,xr.none()):new ru(i.key,i.data,xr.none());{const n=i.data,r=Ui.empty();let o=new mn(Dn.comparator);for(let c of e.fields)if(!o.has(c)){let f=n.field(c);f===null&&c.length>1&&(c=c.popLast(),f=n.field(c)),f===null?r.delete(c):r.set(c,f),o=o.add(c)}return new wo(i.key,r,new ns(o.toArray()),xr.none())}}function e6(i,e,n){i instanceof ru?function(o,c,f){const p=o.value.clone(),g=H1(o.fieldTransforms,c,f.transformResults);p.setAll(g),c.convertToFoundDocument(f.version,p).setHasCommittedMutations()}(i,e,n):i instanceof wo?function(o,c,f){if(!Ad(o.precondition,c))return void c.convertToUnknownDocument(f.version);const p=H1(o.fieldTransforms,c,f.transformResults),g=c.data;g.setAll(F2(o)),g.setAll(p),c.convertToFoundDocument(f.version,g).setHasCommittedMutations()}(i,e,n):function(o,c,f){c.convertToNoDocument(f.version).setHasCommittedMutations()}(0,e,n)}function Mc(i,e,n,r){return i instanceof ru?function(c,f,p,g){if(!Ad(c.precondition,f))return p;const y=c.value.clone(),w=q1(c.fieldTransforms,g,f);return y.setAll(w),f.convertToFoundDocument(f.version,y).setHasLocalMutations(),null}(i,e,n,r):i instanceof wo?function(c,f,p,g){if(!Ad(c.precondition,f))return p;const y=q1(c.fieldTransforms,g,f),w=f.data;return w.setAll(F2(c)),w.setAll(y),f.convertToFoundDocument(f.version,w).setHasLocalMutations(),p===null?null:p.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(S=>S.field))}(i,e,n,r):function(c,f,p){return Ad(c.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):p}(i,e,n)}function t6(i,e){let n=null;for(const r of i.fieldTransforms){const o=e.data.field(r.field),c=V2(r.transform,o||null);c!=null&&(n===null&&(n=Ui.empty()),n.set(r.field,c))}return n||null}function F1(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&gl(r,o,(c,f)=>$4(c,f))}(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class ru extends mh{constructor(e,n,r,o=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class wo extends mh{constructor(e,n,r,o,c=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function F2(i){const e=new Map;return i.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=i.data.field(n);e.set(n,r)}}),e}function H1(i,e,n){const r=new Map;xt(i.length===n.length,32656,{Ae:n.length,Re:i.length});for(let o=0;o<n.length;o++){const c=i[o],f=c.transform,p=e.data.field(c.field);r.set(c.field,Q4(f,p,n[o]))}return r}function q1(i,e,n){const r=new Map;for(const o of i){const c=o.transform,f=n.data.field(o.field);r.set(o.field,Y4(c,f,e))}return r}class H2 extends mh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class n6 extends mh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i6{constructor(e,n,r,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&e6(c,e,r[o])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Mc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Mc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=M2();return this.mutations.forEach(o=>{const c=e.get(o.key),f=c.overlayedDocument;let p=this.applyToLocalView(f,c.mutatedFields);p=n.has(o.key)?null:p;const g=z2(f,p);g!==null&&r.set(o.key,g),f.isValidDocument()||f.convertToNoDocument(Ge.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ct())}isEqual(e){return this.batchId===e.batchId&&gl(this.mutations,e.mutations,(n,r)=>F1(n,r))&&gl(this.baseMutations,e.baseMutations,(n,r)=>F1(n,r))}}class Fp{constructor(e,n,r,o){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=o}static from(e,n,r){xt(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let o=function(){return G4}();const c=e.mutations;for(let f=0;f<c.length;f++)o=o.insert(c[f].key,r[f].version);return new Fp(e,n,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s6{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r6{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var an,ht;function a6(i){switch(i){case ge.OK:return Ue(64938);case ge.CANCELLED:case ge.UNKNOWN:case ge.DEADLINE_EXCEEDED:case ge.RESOURCE_EXHAUSTED:case ge.INTERNAL:case ge.UNAVAILABLE:case ge.UNAUTHENTICATED:return!1;case ge.INVALID_ARGUMENT:case ge.NOT_FOUND:case ge.ALREADY_EXISTS:case ge.PERMISSION_DENIED:case ge.FAILED_PRECONDITION:case ge.ABORTED:case ge.OUT_OF_RANGE:case ge.UNIMPLEMENTED:case ge.DATA_LOSS:return!0;default:return Ue(15467,{code:i})}}function q2(i){if(i===void 0)return Sr("GRPC error has no .code"),ge.UNKNOWN;switch(i){case an.OK:return ge.OK;case an.CANCELLED:return ge.CANCELLED;case an.UNKNOWN:return ge.UNKNOWN;case an.DEADLINE_EXCEEDED:return ge.DEADLINE_EXCEEDED;case an.RESOURCE_EXHAUSTED:return ge.RESOURCE_EXHAUSTED;case an.INTERNAL:return ge.INTERNAL;case an.UNAVAILABLE:return ge.UNAVAILABLE;case an.UNAUTHENTICATED:return ge.UNAUTHENTICATED;case an.INVALID_ARGUMENT:return ge.INVALID_ARGUMENT;case an.NOT_FOUND:return ge.NOT_FOUND;case an.ALREADY_EXISTS:return ge.ALREADY_EXISTS;case an.PERMISSION_DENIED:return ge.PERMISSION_DENIED;case an.FAILED_PRECONDITION:return ge.FAILED_PRECONDITION;case an.ABORTED:return ge.ABORTED;case an.OUT_OF_RANGE:return ge.OUT_OF_RANGE;case an.UNIMPLEMENTED:return ge.UNIMPLEMENTED;case an.DATA_LOSS:return ge.DATA_LOSS;default:return Ue(39323,{code:i})}}(ht=an||(an={}))[ht.OK=0]="OK",ht[ht.CANCELLED=1]="CANCELLED",ht[ht.UNKNOWN=2]="UNKNOWN",ht[ht.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ht[ht.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ht[ht.NOT_FOUND=5]="NOT_FOUND",ht[ht.ALREADY_EXISTS=6]="ALREADY_EXISTS",ht[ht.PERMISSION_DENIED=7]="PERMISSION_DENIED",ht[ht.UNAUTHENTICATED=16]="UNAUTHENTICATED",ht[ht.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ht[ht.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ht[ht.ABORTED=10]="ABORTED",ht[ht.OUT_OF_RANGE=11]="OUT_OF_RANGE",ht[ht.UNIMPLEMENTED=12]="UNIMPLEMENTED",ht[ht.INTERNAL=13]="INTERNAL",ht[ht.UNAVAILABLE=14]="UNAVAILABLE",ht[ht.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o6=new ma([4294967295,4294967295],0);function G1(i){const e=f2().encode(i),n=new r2;return n.update(e),new Uint8Array(n.digest())}function W1(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new ma([n,r],0),new ma([o,c],0)]}class Hp{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Tc(`Invalid padding: ${n}`);if(r<0)throw new Tc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Tc(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Tc(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=ma.fromNumber(this.fe)}pe(e,n,r){let o=e.add(n.multiply(ma.fromNumber(r)));return o.compare(o6)===1&&(o=new ma([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=G1(e),[r,o]=W1(n);for(let c=0;c<this.hashCount;c++){const f=this.pe(r,o,c);if(!this.ye(f))return!1}return!0}static create(e,n,r){const o=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),f=new Hp(c,o,n);return r.forEach(p=>f.insert(p)),f}insert(e){if(this.fe===0)return;const n=G1(e),[r,o]=W1(n);for(let c=0;c<this.hashCount;c++){const f=this.pe(r,o,c);this.we(f)}}we(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Tc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(e,n,r,o,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const o=new Map;return o.set(e,au.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new ph(Ge.min(),o,new qt(et),Er(),ct())}}class au{constructor(e,n,r,o,c){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new au(r,n,ct(),ct(),ct())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(e,n,r,o){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=o}}class G2{constructor(e,n){this.targetId=e,this.De=n}}class W2{constructor(e,n,r=On.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=o}}class X1{constructor(){this.ve=0,this.Ce=Z1(),this.Fe=On.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=ct(),n=ct(),r=ct();return this.Ce.forEach((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:r=r.add(o);break;default:Ue(38017,{changeType:c})}}),new au(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=Z1()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,xt(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class l6{constructor(e){this.We=e,this.Ge=new Map,this.ze=Er(),this.je=md(),this.Je=md(),this.He=new qt(et)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:Ue(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,o)=>{this.nt(o)&&n(o)})}it(e){const n=e.targetId,r=e.De.count,o=this.st(n);if(o){const c=o.target;if($m(c))if(r===0){const f=new Me(c.path);this.Xe(n,f,zn.newNoDocument(f,Ge.min()))}else xt(r===1,20013,{expectedCount:r});else{const f=this.ot(n);if(f!==r){const p=this._t(e),g=p?this.ut(p,e,f):1;if(g!==0){this.rt(n);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,y)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:c=0}=n;let f,p;try{f=ba(r).toUint8Array()}catch(g){if(g instanceof y2)return ya("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{p=new Hp(f,o,c)}catch(g){return ya(g instanceof Tc?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return p.fe===0?null:p}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){const r=this.We.getRemoteKeysForTarget(n);let o=0;return r.forEach(c=>{const f=this.We.lt(),p=`projects/${f.projectId}/databases/${f.database}/documents/${c.path.canonicalString()}`;e.mightContain(p)||(this.Xe(n,c,null),o++)}),o}Pt(e){const n=new Map;this.Ge.forEach((c,f)=>{const p=this.st(f);if(p){if(c.current&&$m(p.target)){const g=new Me(p.target.path);this.Tt(g).has(f)||this.It(f,g)||this.Xe(f,g,zn.newNoDocument(g,e))}c.Ne&&(n.set(f,c.Le()),c.ke())}});let r=ct();this.Je.forEach((c,f)=>{let p=!0;f.forEachWhile(g=>{const y=this.st(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)}),p&&(r=r.add(c))}),this.ze.forEach((c,f)=>f.setReadTime(e));const o=new ph(e,n,this.He,this.ze,r);return this.ze=Er(),this.je=md(),this.Je=md(),this.He=new qt(et),o}Ze(e,n){if(!this.nt(e))return;const r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;const o=this.tt(e);this.It(e,n)?o.qe(n,1):o.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new X1,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new mn(et),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new mn(et),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||Ee("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new X1),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function md(){return new qt(Me.comparator)}function Z1(){return new qt(Me.comparator)}const c6={asc:"ASCENDING",desc:"DESCENDING"},u6={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},d6={and:"AND",or:"OR"};class h6{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function ep(i,e){return i.useProto3Json||lh(e)?e:{value:e}}function Xd(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function X2(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function f6(i,e){return Xd(i,e.toTimestamp())}function Os(i){return xt(!!i,49232),Ge.fromTimestamp(function(n){const r=xa(n);return new Ot(r.seconds,r.nanos)}(i))}function qp(i,e){return tp(i,e).canonicalString()}function tp(i,e){const n=function(o){return new Ft(["projects",o.projectId,"databases",o.database])}(i).child("documents");return e===void 0?n:n.child(e)}function Z2(i){const e=Ft.fromString(i);return xt(J2(e),10190,{key:e.toString()}),e}function np(i,e){return qp(i.databaseId,e.path)}function Im(i,e){const n=Z2(e);if(n.get(1)!==i.databaseId.projectId)throw new De(ge.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new De(ge.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new Me(Y2(n))}function K2(i,e){return qp(i.databaseId,e)}function m6(i){const e=Z2(i);return e.length===4?Ft.emptyPath():Y2(e)}function ip(i){return new Ft(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function Y2(i){return xt(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function K1(i,e,n){return{name:np(i,e),fields:n.value.mapValue.fields}}function p6(i,e){let n;if("targetChange"in e){e.targetChange;const r=function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Ue(39313,{state:y})}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],c=function(y,w){return y.useProto3Json?(xt(w===void 0||typeof w=="string",58123),On.fromBase64String(w||"")):(xt(w===void 0||w instanceof Buffer||w instanceof Uint8Array,16193),On.fromUint8Array(w||new Uint8Array))}(i,e.targetChange.resumeToken),f=e.targetChange.cause,p=f&&function(y){const w=y.code===void 0?ge.UNKNOWN:q2(y.code);return new De(w,y.message||"")}(f);n=new W2(r,o,c,p||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=Im(i,r.document.name),c=Os(r.document.updateTime),f=r.document.createTime?Os(r.document.createTime):Ge.min(),p=new Ui({mapValue:{fields:r.document.fields}}),g=zn.newFoundDocument(o,c,f,p),y=r.targetIds||[],w=r.removedTargetIds||[];n=new Td(y,w,g.key,g)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=Im(i,r.document),c=r.readTime?Os(r.readTime):Ge.min(),f=zn.newNoDocument(o,c),p=r.removedTargetIds||[];n=new Td([],p,f.key,f)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=Im(i,r.document),c=r.removedTargetIds||[];n=new Td([],c,o,null)}else{if(!("filter"in e))return Ue(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:c}=r,f=new r6(o,c),p=r.targetId;n=new G2(p,f)}}return n}function g6(i,e){let n;if(e instanceof ru)n={update:K1(i,e.key,e.value)};else if(e instanceof H2)n={delete:np(i,e.key)};else if(e instanceof wo)n={update:K1(i,e.key,e.data),updateMask:A6(e.fieldMask)};else{if(!(e instanceof n6))return Ue(16599,{Rt:e.type});n={verify:np(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(c,f){const p=f.transform;if(p instanceof Gd)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof Xc)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof Zc)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof Wd)return{fieldPath:f.field.canonicalString(),increment:p.Ee};throw Ue(20930,{transform:f.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(o,c){return c.updateTime!==void 0?{updateTime:f6(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Ue(27497)}(i,e.precondition)),n}function y6(i,e){return i&&i.length>0?(xt(e!==void 0,14353),i.map(n=>function(o,c){let f=o.updateTime?Os(o.updateTime):Os(c);return f.isEqual(Ge.min())&&(f=Os(c)),new J4(f,o.transformResults||[])}(n,e))):[]}function v6(i,e){return{documents:[K2(i,e.path)]}}function x6(i,e){const n={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=K2(i,o);const c=function(y){if(y.length!==0)return $2(Us.create(y,"and"))}(e.filters);c&&(n.structuredQuery.where=c);const f=function(y){if(y.length!==0)return y.map(w=>function(A){return{field:cl(A.field),direction:w6(A.dir)}}(w))}(e.orderBy);f&&(n.structuredQuery.orderBy=f);const p=ep(i,e.limit);return p!==null&&(n.structuredQuery.limit=p),e.startAt&&(n.structuredQuery.startAt=function(y){return{before:y.inclusive,values:y.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(y){return{before:!y.inclusive,values:y.position}}(e.endAt)),{Vt:n,parent:o}}function b6(i){let e=m6(i.parent);const n=i.structuredQuery,r=n.from?n.from.length:0;let o=null;if(r>0){xt(r===1,65062);const w=n.from[0];w.allDescendants?o=w.collectionId:e=e.child(w.collectionId)}let c=[];n.where&&(c=function(S){const A=Q2(S);return A instanceof Us&&R2(A)?A.getFilters():[A]}(n.where));let f=[];n.orderBy&&(f=function(S){return S.map(A=>function(G){return new qd(ul(G.field),function(Q){switch(Q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(G.direction))}(A))}(n.orderBy));let p=null;n.limit&&(p=function(S){let A;return A=typeof S=="object"?S.value:S,lh(A)?null:A}(n.limit));let g=null;n.startAt&&(g=function(S){const A=!!S.before,F=S.values||[];return new Hd(F,A)}(n.startAt));let y=null;return n.endAt&&(y=function(S){const A=!S.before,F=S.values||[];return new Hd(F,A)}(n.endAt)),U4(e,o,f,c,p,"F",g,y)}function _6(i,e){const n=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ue(28987,{purpose:o})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Q2(i){return i.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ul(n.unaryFilter.field);return fn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=ul(n.unaryFilter.field);return fn.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=ul(n.unaryFilter.field);return fn.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=ul(n.unaryFilter.field);return fn.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ue(61313);default:return Ue(60726)}}(i):i.fieldFilter!==void 0?function(n){return fn.create(ul(n.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ue(58110);default:return Ue(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(i):i.compositeFilter!==void 0?function(n){return Us.create(n.compositeFilter.filters.map(r=>Q2(r)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ue(1026)}}(n.compositeFilter.op))}(i):Ue(30097,{filter:i})}function w6(i){return c6[i]}function S6(i){return u6[i]}function E6(i){return d6[i]}function cl(i){return{fieldPath:i.canonicalString()}}function ul(i){return Dn.fromServerFormat(i.fieldPath)}function $2(i){return i instanceof fn?function(n){if(n.op==="=="){if(L1(n.value))return{unaryFilter:{field:cl(n.field),op:"IS_NAN"}};if(M1(n.value))return{unaryFilter:{field:cl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(L1(n.value))return{unaryFilter:{field:cl(n.field),op:"IS_NOT_NAN"}};if(M1(n.value))return{unaryFilter:{field:cl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:cl(n.field),op:S6(n.op),value:n.value}}}(i):i instanceof Us?function(n){const r=n.getFilters().map(o=>$2(o));return r.length===1?r[0]:{compositeFilter:{op:E6(n.op),filters:r}}}(i):Ue(54877,{filter:i})}function A6(i){const e=[];return i.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function J2(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(e,n,r,o,c=Ge.min(),f=Ge.min(),p=On.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=p,this.expectedCount=g}withSequenceNumber(e){return new da(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new da(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new da(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new da(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T6{constructor(e){this.gt=e}}function R6(i){const e=b6({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?Jm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C6{constructor(){this.Dn=new I6}addToCollectionParentIndex(e,n){return this.Dn.add(n),fe.resolve()}getCollectionParents(e,n){return fe.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return fe.resolve()}deleteFieldIndex(e,n){return fe.resolve()}deleteAllFieldIndexes(e){return fe.resolve()}createTargetIndexes(e,n){return fe.resolve()}getDocumentsMatchingTarget(e,n){return fe.resolve(null)}getIndexType(e,n){return fe.resolve(0)}getFieldIndexes(e,n){return fe.resolve([])}getNextCollectionGroupToUpdate(e){return fe.resolve(null)}getMinOffset(e,n){return fe.resolve(va.min())}getMinOffsetFromCollectionGroup(e,n){return fe.resolve(va.min())}updateCollectionGroup(e,n,r){return fe.resolve()}updateIndexEntries(e,n){return fe.resolve()}}class I6{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),o=this.index[n]||new mn(Ft.comparator),c=!o.has(r);return this.index[n]=o.add(r),c}has(e){const n=e.lastSegment(),r=e.popLast(),o=this.index[n];return o&&o.has(r)}getEntries(e){return(this.index[e]||new mn(Ft.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},e_=41943040;class si{static withCacheSize(e){return new si(e,si.DEFAULT_COLLECTION_PERCENTILE,si.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */si.DEFAULT_COLLECTION_PERCENTILE=10,si.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,si.DEFAULT=new si(e_,si.DEFAULT_COLLECTION_PERCENTILE,si.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),si.DISABLED=new si(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new xl(0)}static ur(){return new xl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q1="LruGarbageCollector",k6=1048576;function $1([i,e],[n,r]){const o=et(i,n);return o===0?et(e,r):o}class N6{constructor(e){this.Tr=e,this.buffer=new mn($1),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();$1(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class j6{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){Ee(Q1,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Rl(n)?Ee(Q1,"Ignoring IndexedDB error during garbage collection: ",n):await Tl(n)}await this.Rr(3e5)})}}class D6{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return fe.resolve(oh.ue);const r=new N6(n);return this.Vr.forEachTarget(e,o=>r.Er(o.sequenceNumber)).next(()=>this.Vr.gr(e,o=>r.Er(o))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Ee("LruGarbageCollector","Garbage collection skipped; disabled"),fe.resolve(Y1)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ee("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Y1):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,o,c,f,p,g,y;const w=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(Ee("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),o=this.params.maximumSequenceNumbersToCollect):o=S,f=Date.now(),this.nthSequenceNumber(e,o))).next(S=>(r=S,p=Date.now(),this.removeTargets(e,r,n))).next(S=>(c=S,g=Date.now(),this.removeOrphanedDocuments(e,r))).next(S=>(y=Date.now(),ol()<=lt.DEBUG&&Ee("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-w}ms
	Determined least recently used ${o} in `+(p-f)+`ms
	Removed ${c} targets in `+(g-p)+`ms
	Removed ${S} documents in `+(y-g)+`ms
Total Duration: ${y-w}ms`),fe.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:S})))}}function O6(i,e){return new D6(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M6{constructor(){this.changes=new _o(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,zn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?fe.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L6{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V6{constructor(e,n,r,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(o=>(r=o,this.remoteDocumentCache.getEntry(e,n))).next(o=>(r!==null&&Mc(r.mutation,o,ns.empty(),Ot.now()),o))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ct()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ct()){const o=oo();return this.populateOverlays(e,o,n).next(()=>this.computeViews(e,n,o,r).next(c=>{let f=Ac();return c.forEach((p,g)=>{f=f.insert(p,g.overlayedDocument)}),f}))}getOverlayedDocuments(e,n){const r=oo();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ct()))}populateOverlays(e,n,r){const o=[];return r.forEach(c=>{n.has(c)||o.push(c)}),this.documentOverlayCache.getOverlays(e,o).next(c=>{c.forEach((f,p)=>{n.set(f,p)})})}computeViews(e,n,r,o){let c=Er();const f=Oc(),p=function(){return Oc()}();return n.forEach((g,y)=>{const w=r.get(y.key);o.has(y.key)&&(w===void 0||w.mutation instanceof wo)?c=c.insert(y.key,y):w!==void 0?(f.set(y.key,w.mutation.getFieldMask()),Mc(w.mutation,y,w.mutation.getFieldMask(),Ot.now())):f.set(y.key,ns.empty())}),this.recalculateAndSaveOverlays(e,c).next(g=>(g.forEach((y,w)=>f.set(y,w)),n.forEach((y,w)=>{var S;return p.set(y,new L6(w,(S=f.get(y))!==null&&S!==void 0?S:null))}),p))}recalculateAndSaveOverlays(e,n){const r=Oc();let o=new qt((f,p)=>f-p),c=ct();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(f=>{for(const p of f)p.keys().forEach(g=>{const y=n.get(g);if(y===null)return;let w=r.get(g)||ns.empty();w=p.applyToLocalView(y,w),r.set(g,w);const S=(o.get(p.batchId)||ct()).add(g);o=o.insert(p.batchId,S)})}).next(()=>{const f=[],p=o.getReverseIterator();for(;p.hasNext();){const g=p.getNext(),y=g.key,w=g.value,S=M2();w.forEach(A=>{if(!c.has(A)){const F=z2(n.get(A),r.get(A));F!==null&&S.set(A,F),c=c.add(A)}}),f.push(this.documentOverlayCache.saveOverlays(e,y,S))}return fe.waitFor(f)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,o){return function(f){return Me.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):B4(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,o):this.getDocumentsMatchingCollectionQuery(e,n,r,o)}getNextDocuments(e,n,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,o).next(c=>{const f=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,o-c.size):fe.resolve(oo());let p=Hc,g=c;return f.next(y=>fe.forEach(y,(w,S)=>(p<S.largestBatchId&&(p=S.largestBatchId),c.get(w)?fe.resolve():this.remoteDocumentCache.getEntry(e,w).next(A=>{g=g.insert(w,A)}))).next(()=>this.populateOverlays(e,y,c)).next(()=>this.computeViews(e,g,y,ct())).next(w=>({batchId:p,changes:O2(w)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Me(n)).next(r=>{let o=Ac();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,n,r,o){const c=n.collectionGroup;let f=Ac();return this.indexManager.getCollectionParents(e,c).next(p=>fe.forEach(p,g=>{const y=function(S,A){return new uh(A,null,S.explicitOrderBy.slice(),S.filters.slice(),S.limit,S.limitType,S.startAt,S.endAt)}(n,g.child(c));return this.getDocumentsMatchingCollectionQuery(e,y,r,o).next(w=>{w.forEach((S,A)=>{f=f.insert(S,A)})})}).next(()=>f))}getDocumentsMatchingCollectionQuery(e,n,r,o){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(f=>(c=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,c,o))).next(f=>{c.forEach((g,y)=>{const w=y.getKey();f.get(w)===null&&(f=f.insert(w,zn.newInvalidDocument(w)))});let p=Ac();return f.forEach((g,y)=>{const w=c.get(g);w!==void 0&&Mc(w.mutation,y,ns.empty(),Ot.now()),hh(n,y)&&(p=p.insert(g,y))}),p})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P6{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return fe.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(o){return{id:o.id,version:o.version,createTime:Os(o.createTime)}}(n)),fe.resolve()}getNamedQuery(e,n){return fe.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(o){return{name:o.name,query:R6(o.bundledQuery),readTime:Os(o.readTime)}}(n)),fe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U6{constructor(){this.overlays=new qt(Me.comparator),this.kr=new Map}getOverlay(e,n){return fe.resolve(this.overlays.get(n))}getOverlays(e,n){const r=oo();return fe.forEach(n,o=>this.getOverlay(e,o).next(c=>{c!==null&&r.set(o,c)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((o,c)=>{this.wt(e,n,c)}),fe.resolve()}removeOverlaysForBatchId(e,n,r){const o=this.kr.get(r);return o!==void 0&&(o.forEach(c=>this.overlays=this.overlays.remove(c)),this.kr.delete(r)),fe.resolve()}getOverlaysForCollection(e,n,r){const o=oo(),c=n.length+1,f=new Me(n.child("")),p=this.overlays.getIteratorFrom(f);for(;p.hasNext();){const g=p.getNext().value,y=g.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===c&&g.largestBatchId>r&&o.set(g.getKey(),g)}return fe.resolve(o)}getOverlaysForCollectionGroup(e,n,r,o){let c=new qt((y,w)=>y-w);const f=this.overlays.getIterator();for(;f.hasNext();){const y=f.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>r){let w=c.get(y.largestBatchId);w===null&&(w=oo(),c=c.insert(y.largestBatchId,w)),w.set(y.getKey(),y)}}const p=oo(),g=c.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((y,w)=>p.set(y,w)),!(p.size()>=o)););return fe.resolve(p)}wt(e,n,r){const o=this.overlays.get(r.key);if(o!==null){const f=this.kr.get(o.largestBatchId).delete(r.key);this.kr.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(r.key,new s6(n,r));let c=this.kr.get(n);c===void 0&&(c=ct(),this.kr.set(n,c)),this.kr.set(n,c.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B6{constructor(){this.sessionToken=On.EMPTY_BYTE_STRING}getSessionToken(e){return fe.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,fe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(){this.qr=new mn(wn.Qr),this.$r=new mn(wn.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const r=new wn(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new wn(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){const n=new Me(new Ft([])),r=new wn(n,e),o=new wn(n,e+1),c=[];return this.$r.forEachInRange([r,o],f=>{this.Wr(f),c.push(f.key)}),c}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new Me(new Ft([])),r=new wn(n,e),o=new wn(n,e+1);let c=ct();return this.$r.forEachInRange([r,o],f=>{c=c.add(f.key)}),c}containsKey(e){const n=new wn(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class wn{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return Me.comparator(e.key,n.key)||et(e.Hr,n.Hr)}static Ur(e,n){return et(e.Hr,n.Hr)||Me.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z6{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new mn(wn.Qr)}checkEmpty(e){return fe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,o){const c=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new i6(c,n,r,o);this.mutationQueue.push(f);for(const p of o)this.Yr=this.Yr.add(new wn(p.key,c)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return fe.resolve(f)}lookupMutationBatch(e,n){return fe.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,o=this.Xr(r),c=o<0?0:o;return fe.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return fe.resolve(this.mutationQueue.length===0?Mp:this.er-1)}getAllMutationBatches(e){return fe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new wn(n,0),o=new wn(n,Number.POSITIVE_INFINITY),c=[];return this.Yr.forEachInRange([r,o],f=>{const p=this.Zr(f.Hr);c.push(p)}),fe.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new mn(et);return n.forEach(o=>{const c=new wn(o,0),f=new wn(o,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([c,f],p=>{r=r.add(p.Hr)})}),fe.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,o=r.length+1;let c=r;Me.isDocumentKey(c)||(c=c.child(""));const f=new wn(new Me(c),0);let p=new mn(et);return this.Yr.forEachWhile(g=>{const y=g.key.path;return!!r.isPrefixOf(y)&&(y.length===o&&(p=p.add(g.Hr)),!0)},f),fe.resolve(this.ei(p))}ei(e){const n=[];return e.forEach(r=>{const o=this.Zr(r);o!==null&&n.push(o)}),n}removeMutationBatch(e,n){xt(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return fe.forEach(n.mutations,o=>{const c=new wn(o.key,n.batchId);return r=r.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){const r=new wn(n,0),o=this.Yr.firstAfterOrEqual(r);return fe.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,fe.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F6{constructor(e){this.ni=e,this.docs=function(){return new qt(Me.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,o=this.docs.get(r),c=o?o.size:0,f=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:f}),this.size+=f-c,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return fe.resolve(r?r.document.mutableCopy():zn.newInvalidDocument(n))}getEntries(e,n){let r=Er();return n.forEach(o=>{const c=this.docs.get(o);r=r.insert(o,c?c.document.mutableCopy():zn.newInvalidDocument(o))}),fe.resolve(r)}getDocumentsMatchingQuery(e,n,r,o){let c=Er();const f=n.path,p=new Me(f.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(p);for(;g.hasNext();){const{key:y,value:{document:w}}=g.getNext();if(!f.isPrefixOf(y.path))break;y.path.length>f.length+1||y4(g4(w),r)<=0||(o.has(w.key)||hh(n,w))&&(c=c.insert(w.key,w.mutableCopy()))}return fe.resolve(c)}getAllFromCollectionGroup(e,n,r,o){Ue(9500)}ri(e,n){return fe.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new H6(this)}getSize(e){return fe.resolve(this.size)}}class H6 extends M6{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?n.push(this.Or.addEntry(e,o)):this.Or.removeEntry(r)}),fe.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q6{constructor(e){this.persistence=e,this.ii=new _o(n=>Pp(n),Up),this.lastRemoteSnapshotVersion=Ge.min(),this.highestTargetId=0,this.si=0,this.oi=new Gp,this.targetCount=0,this._i=xl.ar()}forEachTarget(e,n){return this.ii.forEach((r,o)=>n(o)),fe.resolve()}getLastRemoteSnapshotVersion(e){return fe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return fe.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),fe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),fe.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new xl(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,fe.resolve()}updateTargetData(e,n){return this.hr(n),fe.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,fe.resolve()}removeTargets(e,n,r){let o=0;const c=[];return this.ii.forEach((f,p)=>{p.sequenceNumber<=n&&r.get(p.targetId)===null&&(this.ii.delete(f),c.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)}),fe.waitFor(c).next(()=>o)}getTargetCount(e){return fe.resolve(this.targetCount)}getTargetData(e,n){const r=this.ii.get(n)||null;return fe.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),fe.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);const o=this.persistence.referenceDelegate,c=[];return o&&n.forEach(f=>{c.push(o.markPotentiallyOrphaned(e,f))}),fe.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),fe.resolve()}getMatchingKeysForTargetId(e,n){const r=this.oi.Jr(n);return fe.resolve(r)}containsKey(e,n){return fe.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_{constructor(e,n){this.ai={},this.overlays={},this.ui=new oh(0),this.ci=!1,this.ci=!0,this.li=new B6,this.referenceDelegate=e(this),this.hi=new q6(this),this.indexManager=new C6,this.remoteDocumentCache=function(o){return new F6(o)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new T6(n),this.Ti=new P6(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new U6,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new z6(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){Ee("MemoryPersistence","Starting transaction:",e);const o=new G6(this.ui.next());return this.referenceDelegate.Ii(),r(o).next(c=>this.referenceDelegate.di(o).next(()=>c)).toPromise().then(c=>(o.raiseOnCommittedEvent(),c))}Ei(e,n){return fe.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}}class G6 extends x4{constructor(e){super(),this.currentSequenceNumber=e}}class Wp{constructor(e){this.persistence=e,this.Ai=new Gp,this.Ri=null}static Vi(e){return new Wp(e)}get mi(){if(this.Ri)return this.Ri;throw Ue(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),fe.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),fe.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),fe.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(o=>this.mi.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(o=>{o.forEach(c=>this.mi.add(c.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return fe.forEach(this.mi,r=>{const o=Me.fromPath(r);return this.fi(e,o).next(c=>{c||n.removeEntry(o,Ge.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return fe.or([()=>fe.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Zd{constructor(e,n){this.persistence=e,this.gi=new _o(r=>w4(r.path),(r,o)=>r.isEqual(o)),this.garbageCollector=O6(this,n)}static Vi(e,n){return new Zd(e,n)}Ii(){}di(e){return fe.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(o=>r+o))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return fe.forEach(this.gi,(r,o)=>this.Sr(e,r,o).next(c=>c?fe.resolve():n(o)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const o=this.persistence.getRemoteDocumentCache(),c=o.newChangeBuffer();return o.ri(e,f=>this.Sr(e,f,n).next(p=>{p||(r++,c.removeEntry(f,Ge.min()))})).next(()=>c.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),fe.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),fe.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),fe.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),fe.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Sd(e.data.value)),n}Sr(e,n,r){return fe.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.gi.get(n);return fe.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(e,n,r,o){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=o}static Es(e,n){let r=ct(),o=ct();for(const c of n.docChanges)switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new Xp(e,n.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W6{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X6{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return iA()?8:b4(Fn())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,o){const c={result:null};return this.ps(e,n).next(f=>{c.result=f}).next(()=>{if(!c.result)return this.ys(e,n,o,r).next(f=>{c.result=f})}).next(()=>{if(c.result)return;const f=new W6;return this.ws(e,n,f).next(p=>{if(c.result=p,this.Rs)return this.Ss(e,n,f,p.size)})}).next(()=>c.result)}Ss(e,n,r,o){return r.documentReadCount<this.Vs?(ol()<=lt.DEBUG&&Ee("QueryEngine","SDK will not create cache indexes for query:",ll(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),fe.resolve()):(ol()<=lt.DEBUG&&Ee("QueryEngine","Query:",ll(n),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.fs*o?(ol()<=lt.DEBUG&&Ee("QueryEngine","The SDK decides to create cache indexes for query:",ll(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ds(n))):fe.resolve())}ps(e,n){if(B1(n))return fe.resolve(null);let r=Ds(n);return this.indexManager.getIndexType(e,r).next(o=>o===0?null:(n.limit!==null&&o===1&&(n=Jm(n,null,"F"),r=Ds(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(c=>{const f=ct(...c);return this.gs.getDocuments(e,f).next(p=>this.indexManager.getMinOffset(e,r).next(g=>{const y=this.bs(n,p);return this.Ds(n,y,f,g.readTime)?this.ps(e,Jm(n,null,"F")):this.vs(e,y,n,g)}))})))}ys(e,n,r,o){return B1(n)||o.isEqual(Ge.min())?fe.resolve(null):this.gs.getDocuments(e,r).next(c=>{const f=this.bs(n,c);return this.Ds(n,f,r,o)?fe.resolve(null):(ol()<=lt.DEBUG&&Ee("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),ll(n)),this.vs(e,f,n,p4(o,Hc)).next(p=>p))})}bs(e,n){let r=new mn(j2(e));return n.forEach((o,c)=>{hh(e,c)&&(r=r.add(c))}),r}Ds(e,n,r,o){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}ws(e,n,r){return ol()<=lt.DEBUG&&Ee("QueryEngine","Using full collection scan to execute query:",ll(n)),this.gs.getDocumentsMatchingQuery(e,n,va.min(),r)}vs(e,n,r,o){return this.gs.getDocumentsMatchingQuery(e,r,o).next(c=>(n.forEach(f=>{c=c.insert(f.key,f)}),c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zp="LocalStore",Z6=3e8;class K6{constructor(e,n,r,o){this.persistence=e,this.Cs=n,this.serializer=o,this.Fs=new qt(et),this.Ms=new _o(c=>Pp(c),Up),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new V6(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function Y6(i,e,n,r){return new K6(i,e,n,r)}async function n_(i,e){const n=We(i);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let o;return n.mutationQueue.getAllMutationBatches(r).next(c=>(o=c,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(c=>{const f=[],p=[];let g=ct();for(const y of o){f.push(y.batchId);for(const w of y.mutations)g=g.add(w.key)}for(const y of c){p.push(y.batchId);for(const w of y.mutations)g=g.add(w.key)}return n.localDocuments.getDocuments(r,g).next(y=>({Bs:y,removedBatchIds:f,addedBatchIds:p}))})})}function Q6(i,e){const n=We(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),c=n.Os.newChangeBuffer({trackRemovals:!0});return function(p,g,y,w){const S=y.batch,A=S.keys();let F=fe.resolve();return A.forEach(G=>{F=F.next(()=>w.getEntry(g,G)).next(q=>{const Q=y.docVersions.get(G);xt(Q!==null,48541),q.version.compareTo(Q)<0&&(S.applyToRemoteDocument(q,y),q.isValidDocument()&&(q.setReadTime(y.commitVersion),w.addEntry(q)))})}),F.next(()=>p.mutationQueue.removeMutationBatch(g,S))}(n,r,e,c).next(()=>c.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(p){let g=ct();for(let y=0;y<p.mutationResults.length;++y)p.mutationResults[y].transformResults.length>0&&(g=g.add(p.batch.mutations[y].key));return g}(e))).next(()=>n.localDocuments.getDocuments(r,o))})}function i_(i){const e=We(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function $6(i,e){const n=We(i),r=e.snapshotVersion;let o=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const f=n.Os.newChangeBuffer({trackRemovals:!0});o=n.Fs;const p=[];e.targetChanges.forEach((w,S)=>{const A=o.get(S);if(!A)return;p.push(n.hi.removeMatchingKeys(c,w.removedDocuments,S).next(()=>n.hi.addMatchingKeys(c,w.addedDocuments,S)));let F=A.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(S)!==null?F=F.withResumeToken(On.EMPTY_BYTE_STRING,Ge.min()).withLastLimboFreeSnapshotVersion(Ge.min()):w.resumeToken.approximateByteSize()>0&&(F=F.withResumeToken(w.resumeToken,r)),o=o.insert(S,F),function(q,Q,ee){return q.resumeToken.approximateByteSize()===0||Q.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=Z6?!0:ee.addedDocuments.size+ee.modifiedDocuments.size+ee.removedDocuments.size>0}(A,F,w)&&p.push(n.hi.updateTargetData(c,F))});let g=Er(),y=ct();if(e.documentUpdates.forEach(w=>{e.resolvedLimboDocuments.has(w)&&p.push(n.persistence.referenceDelegate.updateLimboDocument(c,w))}),p.push(J6(c,f,e.documentUpdates).next(w=>{g=w.Ls,y=w.ks})),!r.isEqual(Ge.min())){const w=n.hi.getLastRemoteSnapshotVersion(c).next(S=>n.hi.setTargetsMetadata(c,c.currentSequenceNumber,r));p.push(w)}return fe.waitFor(p).next(()=>f.apply(c)).next(()=>n.localDocuments.getLocalViewOfDocuments(c,g,y)).next(()=>g)}).then(c=>(n.Fs=o,c))}function J6(i,e,n){let r=ct(),o=ct();return n.forEach(c=>r=r.add(c)),e.getEntries(i,r).next(c=>{let f=Er();return n.forEach((p,g)=>{const y=c.get(p);g.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(p)),g.isNoDocument()&&g.version.isEqual(Ge.min())?(e.removeEntry(p,g.readTime),f=f.insert(p,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),f=f.insert(p,g)):Ee(Zp,"Ignoring outdated watch update for ",p,". Current version:",y.version," Watch version:",g.version)}),{Ls:f,ks:o}})}function eI(i,e){const n=We(i);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Mp),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function tI(i,e){const n=We(i);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return n.hi.getTargetData(r,e).next(c=>c?(o=c,fe.resolve(o)):n.hi.allocateTargetId(r).next(f=>(o=new da(e,f,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=n.Fs.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}async function sp(i,e,n){const r=We(i),o=r.Fs.get(e),c=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",c,f=>r.persistence.referenceDelegate.removeTarget(f,o))}catch(f){if(!Rl(f))throw f;Ee(Zp,`Failed to update sequence numbers for target ${e}: ${f}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(o.target)}function J1(i,e,n){const r=We(i);let o=Ge.min(),c=ct();return r.persistence.runTransaction("Execute query","readwrite",f=>function(g,y,w){const S=We(g),A=S.Ms.get(w);return A!==void 0?fe.resolve(S.Fs.get(A)):S.hi.getTargetData(y,w)}(r,f,Ds(e)).next(p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(f,p.targetId).next(g=>{c=g})}).next(()=>r.Cs.getDocumentsMatchingQuery(f,e,n?o:Ge.min(),n?c:ct())).next(p=>(nI(r,F4(e),p),{documents:p,qs:c})))}function nI(i,e,n){let r=i.xs.get(e)||Ge.min();n.forEach((o,c)=>{c.readTime.compareTo(r)>0&&(r=c.readTime)}),i.xs.set(e,r)}class ex{constructor(){this.activeTargetIds=Z4()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class iI{constructor(){this.Fo=new ex,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new ex,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx="ConnectivityMonitor";class nx{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){Ee(tx,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){Ee(tx,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pd=null;function rp(){return pd===null?pd=function(){return 268435456+Math.round(2147483648*Math.random())}():pd++,"0x"+pd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const km="RestConnection",rI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class aI{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${o}`,this.Ko=this.databaseId.database===zd?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Wo(e,n,r,o,c){const f=rp(),p=this.Go(e,n.toUriEncodedString());Ee(km,`Sending RPC '${e}' ${f}:`,p,r);const g={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(g,o,c);const{host:y}=new URL(p),w=wl(y);return this.jo(e,p,g,r,w).then(S=>(Ee(km,`Received RPC '${e}' ${f}: `,S),S),S=>{throw ya(km,`RPC '${e}' ${f} failed with error: `,S,"url: ",p,"request:",r),S})}Jo(e,n,r,o,c,f){return this.Wo(e,n,r,o,c)}zo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Al}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((o,c)=>e[c]=o),r&&r.headers.forEach((o,c)=>e[c]=o)}Go(e,n){const r=rI[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Un="WebChannelConnection";class lI extends aI{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,o,c){const f=rp();return new Promise((p,g)=>{const y=new a2;y.setWithCredentials(!0),y.listenOnce(o2.COMPLETE,()=>{try{switch(y.getLastErrorCode()){case wd.NO_ERROR:const S=y.getResponseJson();Ee(Un,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(S)),p(S);break;case wd.TIMEOUT:Ee(Un,`RPC '${e}' ${f} timed out`),g(new De(ge.DEADLINE_EXCEEDED,"Request time out"));break;case wd.HTTP_ERROR:const A=y.getStatus();if(Ee(Un,`RPC '${e}' ${f} failed with status:`,A,"response text:",y.getResponseText()),A>0){let F=y.getResponseJson();Array.isArray(F)&&(F=F[0]);const G=F==null?void 0:F.error;if(G&&G.status&&G.message){const q=function(ee){const $=ee.toLowerCase().replace(/_/g,"-");return Object.values(ge).indexOf($)>=0?$:ge.UNKNOWN}(G.status);g(new De(q,G.message))}else g(new De(ge.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new De(ge.UNAVAILABLE,"Connection failed."));break;default:Ue(9055,{c_:e,streamId:f,l_:y.getLastErrorCode(),h_:y.getLastError()})}}finally{Ee(Un,`RPC '${e}' ${f} completed.`)}});const w=JSON.stringify(o);Ee(Un,`RPC '${e}' ${f} sending request:`,o),y.send(n,"POST",w,r,15)})}P_(e,n,r){const o=rp(),c=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=u2(),p=c2(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(g.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(g.useFetchStreams=!0),this.zo(g.initMessageHeaders,n,r),g.encodeInitMessageHeaders=!0;const w=c.join("");Ee(Un,`Creating RPC '${e}' stream ${o}: ${w}`,g);const S=f.createWebChannel(w,g);this.T_(S);let A=!1,F=!1;const G=new oI({Ho:Q=>{F?Ee(Un,`Not sending because RPC '${e}' stream ${o} is closed:`,Q):(A||(Ee(Un,`Opening RPC '${e}' stream ${o} transport.`),S.open(),A=!0),Ee(Un,`RPC '${e}' stream ${o} sending:`,Q),S.send(Q))},Yo:()=>S.close()}),q=(Q,ee,$)=>{Q.listen(ee,L=>{try{$(L)}catch(pe){setTimeout(()=>{throw pe},0)}})};return q(S,Ec.EventType.OPEN,()=>{F||(Ee(Un,`RPC '${e}' stream ${o} transport opened.`),G.s_())}),q(S,Ec.EventType.CLOSE,()=>{F||(F=!0,Ee(Un,`RPC '${e}' stream ${o} transport closed`),G.__(),this.I_(S))}),q(S,Ec.EventType.ERROR,Q=>{F||(F=!0,ya(Un,`RPC '${e}' stream ${o} transport errored. Name:`,Q.name,"Message:",Q.message),G.__(new De(ge.UNAVAILABLE,"The operation could not be completed")))}),q(S,Ec.EventType.MESSAGE,Q=>{var ee;if(!F){const $=Q.data[0];xt(!!$,16349);const L=$,pe=(L==null?void 0:L.error)||((ee=L[0])===null||ee===void 0?void 0:ee.error);if(pe){Ee(Un,`RPC '${e}' stream ${o} received error:`,pe);const de=pe.status;let xe=function(k){const M=an[k];if(M!==void 0)return q2(M)}(de),V=pe.message;xe===void 0&&(xe=ge.INTERNAL,V="Unknown error status: "+de+" with message "+pe.message),F=!0,G.__(new De(xe,V)),S.close()}else Ee(Un,`RPC '${e}' stream ${o} received:`,$),G.a_($)}}),q(p,l2.STAT_EVENT,Q=>{Q.stat===Xm.PROXY?Ee(Un,`RPC '${e}' stream ${o} detected buffering proxy`):Q.stat===Xm.NOPROXY&&Ee(Un,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{G.o_()},0),G}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}function Nm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gh(i){return new h6(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s_{constructor(e,n,r=1e3,o=1.5,c=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=o,this.A_=c,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),o=Math.max(0,n-r);o>0&&Ee("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,o,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ix="PersistentStream";class r_{constructor(e,n,r,o,c,f,p,g){this.Fi=e,this.w_=r,this.S_=o,this.connection=c,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=p,this.listener=g,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new s_(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===ge.RESOURCE_EXHAUSTED?(Sr(n.toString()),Sr("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===ge.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.b_===n&&this.W_(r,o)},r=>{e(()=>{const o=new De(ge.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(o)})})}W_(e,n){const r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(o=>{r(()=>this.G_(o))}),this.stream.onMessage(o=>{r(()=>++this.C_==1?this.j_(o):this.onNext(o))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return Ee(ix,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(Ee(ix,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class cI extends r_{constructor(e,n,r,o,c,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,o,f),this.serializer=c}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=p6(this.serializer,e),r=function(c){if(!("targetChange"in c))return Ge.min();const f=c.targetChange;return f.targetIds&&f.targetIds.length?Ge.min():f.readTime?Os(f.readTime):Ge.min()}(e);return this.listener.J_(n,r)}H_(e){const n={};n.database=ip(this.serializer),n.addTarget=function(c,f){let p;const g=f.target;if(p=$m(g)?{documents:v6(c,g)}:{query:x6(c,g).Vt},p.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){p.resumeToken=X2(c,f.resumeToken);const y=ep(c,f.expectedCount);y!==null&&(p.expectedCount=y)}else if(f.snapshotVersion.compareTo(Ge.min())>0){p.readTime=Xd(c,f.snapshotVersion.toTimestamp());const y=ep(c,f.expectedCount);y!==null&&(p.expectedCount=y)}return p}(this.serializer,e);const r=_6(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){const n={};n.database=ip(this.serializer),n.removeTarget=e,this.k_(n)}}class uI extends r_{constructor(e,n,r,o,c,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,o,f),this.serializer=c}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return xt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,xt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){xt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=y6(e.writeResults,e.commitTime),r=Os(e.commitTime);return this.listener.ta(r,n)}na(){const e={};e.database=ip(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>g6(this.serializer,r))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{}class hI extends dI{constructor(e,n,r,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=o,this.ra=!1}ia(){if(this.ra)throw new De(ge.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,f])=>this.connection.Wo(e,tp(n,r),o,c,f)).catch(c=>{throw c.name==="FirebaseError"?(c.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new De(ge.UNKNOWN,c.toString())})}Jo(e,n,r,o,c){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([f,p])=>this.connection.Jo(e,tp(n,r),o,f,p,c)).catch(f=>{throw f.name==="FirebaseError"?(f.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new De(ge.UNKNOWN,f.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class fI{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Sr(n),this._a=!1):Ee("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const po="RemoteStore";class mI{constructor(e,n,r,o,c){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=c,this.Ea.xo(f=>{r.enqueueAndForget(async()=>{So(this)&&(Ee(po,"Restarting streams for network reachability change."),await async function(g){const y=We(g);y.Ia.add(4),await ou(y),y.Aa.set("Unknown"),y.Ia.delete(4),await yh(y)}(this))})}),this.Aa=new fI(r,o)}}async function yh(i){if(So(i))for(const e of i.da)await e(!0)}async function ou(i){for(const e of i.da)await e(!1)}function a_(i,e){const n=We(i);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),$p(n)?Qp(n):Cl(n).x_()&&Yp(n,e))}function Kp(i,e){const n=We(i),r=Cl(n);n.Ta.delete(e),r.x_()&&o_(n,e),n.Ta.size===0&&(r.x_()?r.B_():So(n)&&n.Aa.set("Unknown"))}function Yp(i,e){if(i.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ge.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Cl(i).H_(e)}function o_(i,e){i.Ra.$e(e),Cl(i).Y_(e)}function Qp(i){i.Ra=new l6({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>i.Ta.get(e)||null,lt:()=>i.datastore.serializer.databaseId}),Cl(i).start(),i.Aa.aa()}function $p(i){return So(i)&&!Cl(i).M_()&&i.Ta.size>0}function So(i){return We(i).Ia.size===0}function l_(i){i.Ra=void 0}async function pI(i){i.Aa.set("Online")}async function gI(i){i.Ta.forEach((e,n)=>{Yp(i,e)})}async function yI(i,e){l_(i),$p(i)?(i.Aa.la(e),Qp(i)):i.Aa.set("Unknown")}async function vI(i,e,n){if(i.Aa.set("Online"),e instanceof W2&&e.state===2&&e.cause)try{await async function(o,c){const f=c.cause;for(const p of c.targetIds)o.Ta.has(p)&&(await o.remoteSyncer.rejectListen(p,f),o.Ta.delete(p),o.Ra.removeTarget(p))}(i,e)}catch(r){Ee(po,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Kd(i,r)}else if(e instanceof Td?i.Ra.Ye(e):e instanceof G2?i.Ra.it(e):i.Ra.et(e),!n.isEqual(Ge.min()))try{const r=await i_(i.localStore);n.compareTo(r)>=0&&await function(c,f){const p=c.Ra.Pt(f);return p.targetChanges.forEach((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const w=c.Ta.get(y);w&&c.Ta.set(y,w.withResumeToken(g.resumeToken,f))}}),p.targetMismatches.forEach((g,y)=>{const w=c.Ta.get(g);if(!w)return;c.Ta.set(g,w.withResumeToken(On.EMPTY_BYTE_STRING,w.snapshotVersion)),o_(c,g);const S=new da(w.target,g,y,w.sequenceNumber);Yp(c,S)}),c.remoteSyncer.applyRemoteEvent(p)}(i,n)}catch(r){Ee(po,"Failed to raise snapshot:",r),await Kd(i,r)}}async function Kd(i,e,n){if(!Rl(e))throw e;i.Ia.add(1),await ou(i),i.Aa.set("Offline"),n||(n=()=>i_(i.localStore)),i.asyncQueue.enqueueRetryable(async()=>{Ee(po,"Retrying IndexedDB access"),await n(),i.Ia.delete(1),await yh(i)})}function c_(i,e){return e().catch(n=>Kd(i,n,e))}async function vh(i){const e=We(i),n=wa(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Mp;for(;xI(e);)try{const o=await eI(e.localStore,r);if(o===null){e.Pa.length===0&&n.B_();break}r=o.batchId,bI(e,o)}catch(o){await Kd(e,o)}u_(e)&&d_(e)}function xI(i){return So(i)&&i.Pa.length<10}function bI(i,e){i.Pa.push(e);const n=wa(i);n.x_()&&n.Z_&&n.X_(e.mutations)}function u_(i){return So(i)&&!wa(i).M_()&&i.Pa.length>0}function d_(i){wa(i).start()}async function _I(i){wa(i).na()}async function wI(i){const e=wa(i);for(const n of i.Pa)e.X_(n.mutations)}async function SI(i,e,n){const r=i.Pa.shift(),o=Fp.from(r,e,n);await c_(i,()=>i.remoteSyncer.applySuccessfulWrite(o)),await vh(i)}async function EI(i,e){e&&wa(i).Z_&&await async function(r,o){if(function(f){return a6(f)&&f!==ge.ABORTED}(o.code)){const c=r.Pa.shift();wa(r).N_(),await c_(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,o)),await vh(r)}}(i,e),u_(i)&&d_(i)}async function sx(i,e){const n=We(i);n.asyncQueue.verifyOperationInProgress(),Ee(po,"RemoteStore received new credentials");const r=So(n);n.Ia.add(3),await ou(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await yh(n)}async function AI(i,e){const n=We(i);e?(n.Ia.delete(2),await yh(n)):e||(n.Ia.add(2),await ou(n),n.Aa.set("Unknown"))}function Cl(i){return i.Va||(i.Va=function(n,r,o){const c=We(n);return c.ia(),new cI(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)}(i.datastore,i.asyncQueue,{Zo:pI.bind(null,i),e_:gI.bind(null,i),n_:yI.bind(null,i),J_:vI.bind(null,i)}),i.da.push(async e=>{e?(i.Va.N_(),$p(i)?Qp(i):i.Aa.set("Unknown")):(await i.Va.stop(),l_(i))})),i.Va}function wa(i){return i.ma||(i.ma=function(n,r,o){const c=We(n);return c.ia(),new uI(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)}(i.datastore,i.asyncQueue,{Zo:()=>Promise.resolve(),e_:_I.bind(null,i),n_:EI.bind(null,i),ea:wI.bind(null,i),ta:SI.bind(null,i)}),i.da.push(async e=>{e?(i.ma.N_(),await vh(i)):(await i.ma.stop(),i.Pa.length>0&&(Ee(po,`Stopping write stream with ${i.Pa.length} pending writes`),i.Pa=[]))})),i.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(e,n,r,o,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=o,this.removalCallback=c,this.deferred=new pa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(f=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,o,c){const f=Date.now()+r,p=new Jp(e,n,f,o,c);return p.start(r),p}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new De(ge.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function eg(i,e){if(Sr("AsyncQueue",`${e}: ${i}`),Rl(i))return new De(ge.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{static emptySet(e){return new pl(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Me.comparator(n.key,r.key):(n,r)=>Me.comparator(n.key,r.key),this.keyedMap=Ac(),this.sortedSet=new qt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof pl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=r.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new pl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(){this.fa=new qt(Me.comparator)}track(e){const n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):Ue(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}}class bl{constructor(e,n,r,o,c,f,p,g,y){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=c,this.fromCache=f,this.syncStateChanged=p,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,n,r,o,c){const f=[];return n.forEach(p=>{f.push({type:0,doc:p})}),new bl(e,n,pl.emptySet(n),f,r,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&dh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==r[o].type||!n[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class RI{constructor(){this.queries=ax(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){const o=We(n),c=o.queries;o.queries=ax(),c.forEach((f,p)=>{for(const g of p.wa)g.onError(r)})})(this,new De(ge.ABORTED,"Firestore shutting down"))}}function ax(){return new _o(i=>N2(i),dh)}async function CI(i,e){const n=We(i);let r=3;const o=e.query;let c=n.queries.get(o);c?!c.Sa()&&e.ba()&&(r=2):(c=new TI,r=e.ba()?0:1);try{switch(r){case 0:c.ya=await n.onListen(o,!0);break;case 1:c.ya=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(f){const p=eg(f,`Initialization of query '${ll(e.query)}' failed`);return void e.onError(p)}n.queries.set(o,c),c.wa.push(e),e.va(n.onlineState),c.ya&&e.Ca(c.ya)&&tg(n)}async function II(i,e){const n=We(i),r=e.query;let o=3;const c=n.queries.get(r);if(c){const f=c.wa.indexOf(e);f>=0&&(c.wa.splice(f,1),c.wa.length===0?o=e.ba()?0:1:!c.Sa()&&e.ba()&&(o=2))}switch(o){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function kI(i,e){const n=We(i);let r=!1;for(const o of e){const c=o.query,f=n.queries.get(c);if(f){for(const p of f.wa)p.Ca(o)&&(r=!0);f.ya=o}}r&&tg(n)}function NI(i,e,n){const r=We(i),o=r.queries.get(e);if(o)for(const c of o.wa)c.onError(n);r.queries.delete(e)}function tg(i){i.Da.forEach(e=>{e.next()})}var ap,ox;(ox=ap||(ap={})).Fa="default",ox.Cache="cache";class jI{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new bl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=bl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==ap.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_{constructor(e){this.key=e}}class f_{constructor(e){this.key=e}}class DI{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=ct(),this.mutatedKeys=ct(),this.Xa=j2(e),this.eu=new pl(this.Xa)}get tu(){return this.Ha}nu(e,n){const r=n?n.ru:new rx,o=n?n.eu:this.eu;let c=n?n.mutatedKeys:this.mutatedKeys,f=o,p=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((w,S)=>{const A=o.get(w),F=hh(this.query,S)?S:null,G=!!A&&this.mutatedKeys.has(A.key),q=!!F&&(F.hasLocalMutations||this.mutatedKeys.has(F.key)&&F.hasCommittedMutations);let Q=!1;A&&F?A.data.isEqual(F.data)?G!==q&&(r.track({type:3,doc:F}),Q=!0):this.iu(A,F)||(r.track({type:2,doc:F}),Q=!0,(g&&this.Xa(F,g)>0||y&&this.Xa(F,y)<0)&&(p=!0)):!A&&F?(r.track({type:0,doc:F}),Q=!0):A&&!F&&(r.track({type:1,doc:A}),Q=!0,(g||y)&&(p=!0)),Q&&(F?(f=f.add(F),c=q?c.add(w):c.delete(w)):(f=f.delete(w),c=c.delete(w)))}),this.query.limit!==null)for(;f.size>this.query.limit;){const w=this.query.limitType==="F"?f.last():f.first();f=f.delete(w.key),c=c.delete(w.key),r.track({type:1,doc:w})}return{eu:f,ru:r,Ds:p,mutatedKeys:c}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,o){const c=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const f=e.ru.pa();f.sort((w,S)=>function(F,G){const q=Q=>{switch(Q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ue(20277,{At:Q})}};return q(F)-q(G)}(w.type,S.type)||this.Xa(w.doc,S.doc)),this.su(r),o=o!=null&&o;const p=n&&!o?this.ou():[],g=this.Za.size===0&&this.current&&!o?1:0,y=g!==this.Ya;return this.Ya=g,f.length!==0||y?{snapshot:new bl(this.query,e.eu,c,f,e.mutatedKeys,g===0,y,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:p}:{_u:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new rx,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=ct(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new f_(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new h_(r))}),n}uu(e){this.Ha=e.qs,this.Za=ct();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return bl.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const ng="SyncEngine";class OI{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class MI{constructor(e){this.key=e,this.lu=!1}}class LI{constructor(e,n,r,o,c,f){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=f,this.hu={},this.Pu=new _o(p=>N2(p),dh),this.Tu=new Map,this.Iu=new Set,this.du=new qt(Me.comparator),this.Eu=new Map,this.Au=new Gp,this.Ru={},this.Vu=new Map,this.mu=xl.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function VI(i,e,n=!0){const r=x_(i);let o;const c=r.Pu.get(e);return c?(r.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.cu()):o=await m_(r,e,n,!0),o}async function PI(i,e){const n=x_(i);await m_(n,e,!0,!1)}async function m_(i,e,n,r){const o=await tI(i.localStore,Ds(e)),c=o.targetId,f=i.sharedClientState.addLocalQueryTarget(c,n);let p;return r&&(p=await UI(i,e,c,f==="current",o.resumeToken)),i.isPrimaryClient&&n&&a_(i.remoteStore,o),p}async function UI(i,e,n,r,o){i.gu=(S,A,F)=>async function(q,Q,ee,$){let L=Q.view.nu(ee);L.Ds&&(L=await J1(q.localStore,Q.query,!1).then(({documents:V})=>Q.view.nu(V,L)));const pe=$&&$.targetChanges.get(Q.targetId),de=$&&$.targetMismatches.get(Q.targetId)!=null,xe=Q.view.applyChanges(L,q.isPrimaryClient,pe,de);return cx(q,Q.targetId,xe._u),xe.snapshot}(i,S,A,F);const c=await J1(i.localStore,e,!0),f=new DI(e,c.qs),p=f.nu(c.documents),g=au.createSynthesizedTargetChangeForCurrentChange(n,r&&i.onlineState!=="Offline",o),y=f.applyChanges(p,i.isPrimaryClient,g);cx(i,n,y._u);const w=new OI(e,n,f);return i.Pu.set(e,w),i.Tu.has(n)?i.Tu.get(n).push(e):i.Tu.set(n,[e]),y.snapshot}async function BI(i,e,n){const r=We(i),o=r.Pu.get(e),c=r.Tu.get(o.targetId);if(c.length>1)return r.Tu.set(o.targetId,c.filter(f=>!dh(f,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await sp(r.localStore,o.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(o.targetId),n&&Kp(r.remoteStore,o.targetId),op(r,o.targetId)}).catch(Tl)):(op(r,o.targetId),await sp(r.localStore,o.targetId,!0))}async function zI(i,e){const n=We(i),r=n.Pu.get(e),o=n.Tu.get(r.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Kp(n.remoteStore,r.targetId))}async function FI(i,e,n){const r=KI(i);try{const o=await function(f,p){const g=We(f),y=Ot.now(),w=p.reduce((F,G)=>F.add(G.key),ct());let S,A;return g.persistence.runTransaction("Locally write mutations","readwrite",F=>{let G=Er(),q=ct();return g.Os.getEntries(F,w).next(Q=>{G=Q,G.forEach((ee,$)=>{$.isValidDocument()||(q=q.add(ee))})}).next(()=>g.localDocuments.getOverlayedDocuments(F,G)).next(Q=>{S=Q;const ee=[];for(const $ of p){const L=t6($,S.get($.key).overlayedDocument);L!=null&&ee.push(new wo($.key,L,E2(L.value.mapValue),xr.exists(!0)))}return g.mutationQueue.addMutationBatch(F,y,ee,p)}).next(Q=>{A=Q;const ee=Q.applyToLocalDocumentSet(S,q);return g.documentOverlayCache.saveOverlays(F,Q.batchId,ee)})}).then(()=>({batchId:A.batchId,changes:O2(S)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(f,p,g){let y=f.Ru[f.currentUser.toKey()];y||(y=new qt(et)),y=y.insert(p,g),f.Ru[f.currentUser.toKey()]=y}(r,o.batchId,n),await lu(r,o.changes),await vh(r.remoteStore)}catch(o){const c=eg(o,"Failed to persist write");n.reject(c)}}async function p_(i,e){const n=We(i);try{const r=await $6(n.localStore,e);e.targetChanges.forEach((o,c)=>{const f=n.Eu.get(c);f&&(xt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?f.lu=!0:o.modifiedDocuments.size>0?xt(f.lu,14607):o.removedDocuments.size>0&&(xt(f.lu,42227),f.lu=!1))}),await lu(n,r,e)}catch(r){await Tl(r)}}function lx(i,e,n){const r=We(i);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const o=[];r.Pu.forEach((c,f)=>{const p=f.view.va(e);p.snapshot&&o.push(p.snapshot)}),function(f,p){const g=We(f);g.onlineState=p;let y=!1;g.queries.forEach((w,S)=>{for(const A of S.wa)A.va(p)&&(y=!0)}),y&&tg(g)}(r.eventManager,e),o.length&&r.hu.J_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function HI(i,e,n){const r=We(i);r.sharedClientState.updateQueryState(e,"rejected",n);const o=r.Eu.get(e),c=o&&o.key;if(c){let f=new qt(Me.comparator);f=f.insert(c,zn.newNoDocument(c,Ge.min()));const p=ct().add(c),g=new ph(Ge.min(),new Map,new qt(et),f,p);await p_(r,g),r.du=r.du.remove(c),r.Eu.delete(e),ig(r)}else await sp(r.localStore,e,!1).then(()=>op(r,e,n)).catch(Tl)}async function qI(i,e){const n=We(i),r=e.batch.batchId;try{const o=await Q6(n.localStore,e);y_(n,r,null),g_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await lu(n,o)}catch(o){await Tl(o)}}async function GI(i,e,n){const r=We(i);try{const o=await function(f,p){const g=We(f);return g.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let w;return g.mutationQueue.lookupMutationBatch(y,p).next(S=>(xt(S!==null,37113),w=S.keys(),g.mutationQueue.removeMutationBatch(y,S))).next(()=>g.mutationQueue.performConsistencyCheck(y)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(y,w,p)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,w)).next(()=>g.localDocuments.getDocuments(y,w))})}(r.localStore,e);y_(r,e,n),g_(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await lu(r,o)}catch(o){await Tl(o)}}function g_(i,e){(i.Vu.get(e)||[]).forEach(n=>{n.resolve()}),i.Vu.delete(e)}function y_(i,e,n){const r=We(i);let o=r.Ru[r.currentUser.toKey()];if(o){const c=o.get(e);c&&(n?c.reject(n):c.resolve(),o=o.remove(e)),r.Ru[r.currentUser.toKey()]=o}}function op(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const r of i.Tu.get(e))i.Pu.delete(r),n&&i.hu.pu(r,n);i.Tu.delete(e),i.isPrimaryClient&&i.Au.zr(e).forEach(r=>{i.Au.containsKey(r)||v_(i,r)})}function v_(i,e){i.Iu.delete(e.path.canonicalString());const n=i.du.get(e);n!==null&&(Kp(i.remoteStore,n),i.du=i.du.remove(e),i.Eu.delete(n),ig(i))}function cx(i,e,n){for(const r of n)r instanceof h_?(i.Au.addReference(r.key,e),WI(i,r)):r instanceof f_?(Ee(ng,"Document no longer in limbo: "+r.key),i.Au.removeReference(r.key,e),i.Au.containsKey(r.key)||v_(i,r.key)):Ue(19791,{yu:r})}function WI(i,e){const n=e.key,r=n.path.canonicalString();i.du.get(n)||i.Iu.has(r)||(Ee(ng,"New document in limbo: "+n),i.Iu.add(r),ig(i))}function ig(i){for(;i.Iu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Iu.values().next().value;i.Iu.delete(e);const n=new Me(Ft.fromString(e)),r=i.mu.next();i.Eu.set(r,new MI(n)),i.du=i.du.insert(n,r),a_(i.remoteStore,new da(Ds(Bp(n.path)),r,"TargetPurposeLimboResolution",oh.ue))}}async function lu(i,e,n){const r=We(i),o=[],c=[],f=[];r.Pu.isEmpty()||(r.Pu.forEach((p,g)=>{f.push(r.gu(g,e,n).then(y=>{var w;if((y||n)&&r.isPrimaryClient){const S=y?!y.fromCache:(w=n==null?void 0:n.targetChanges.get(g.targetId))===null||w===void 0?void 0:w.current;r.sharedClientState.updateQueryState(g.targetId,S?"current":"not-current")}if(y){o.push(y);const S=Xp.Es(g.targetId,y);c.push(S)}}))}),await Promise.all(f),r.hu.J_(o),await async function(g,y){const w=We(g);try{await w.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>fe.forEach(y,A=>fe.forEach(A.Is,F=>w.persistence.referenceDelegate.addReference(S,A.targetId,F)).next(()=>fe.forEach(A.ds,F=>w.persistence.referenceDelegate.removeReference(S,A.targetId,F)))))}catch(S){if(!Rl(S))throw S;Ee(Zp,"Failed to update sequence numbers: "+S)}for(const S of y){const A=S.targetId;if(!S.fromCache){const F=w.Fs.get(A),G=F.snapshotVersion,q=F.withLastLimboFreeSnapshotVersion(G);w.Fs=w.Fs.insert(A,q)}}}(r.localStore,c))}async function XI(i,e){const n=We(i);if(!n.currentUser.isEqual(e)){Ee(ng,"User change. New user:",e.toKey());const r=await n_(n.localStore,e);n.currentUser=e,function(c,f){c.Vu.forEach(p=>{p.forEach(g=>{g.reject(new De(ge.CANCELLED,f))})}),c.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await lu(n,r.Bs)}}function ZI(i,e){const n=We(i),r=n.Eu.get(e);if(r&&r.lu)return ct().add(r.key);{let o=ct();const c=n.Tu.get(e);if(!c)return o;for(const f of c){const p=n.Pu.get(f);o=o.unionWith(p.view.tu)}return o}}function x_(i){const e=We(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=p_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ZI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=HI.bind(null,e),e.hu.J_=kI.bind(null,e.eventManager),e.hu.pu=NI.bind(null,e.eventManager),e}function KI(i){const e=We(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=qI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=GI.bind(null,e),e}class Yd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=gh(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return Y6(this.persistence,new X6,e.initialUser,this.serializer)}Du(e){return new t_(Wp.Vi,this.serializer)}bu(e){return new iI}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Yd.provider={build:()=>new Yd};class YI extends Yd{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){xt(this.persistence.referenceDelegate instanceof Zd,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new j6(r,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?si.withCacheSize(this.cacheSizeBytes):si.DEFAULT;return new t_(r=>Zd.Vi(r,n),this.serializer)}}class lp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>lx(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=XI.bind(null,this.syncEngine),await AI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new RI}()}createDatastore(e){const n=gh(e.databaseInfo.databaseId),r=function(c){return new lI(c)}(e.databaseInfo);return function(c,f,p,g){return new hI(c,f,p,g)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,o,c,f,p){return new mI(r,o,c,f,p)}(this.localStore,this.datastore,e.asyncQueue,n=>lx(this.syncEngine,n,0),function(){return nx.C()?new nx:new sI}())}createSyncEngine(e,n){return function(o,c,f,p,g,y,w){const S=new LI(o,c,f,p,g,y);return w&&(S.fu=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(o){const c=We(o);Ee(po,"RemoteStore shutting down."),c.Ia.add(5),await ou(c),c.Ea.shutdown(),c.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}lp.provider={build:()=>new lp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Sr("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sa="FirestoreClient";class $I{constructor(e,n,r,o,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=o,this.user=Bn.UNAUTHENTICATED,this.clientId=Dp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(r,async f=>{Ee(Sa,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f}),this.appCheckCredentials.start(r,f=>(Ee(Sa,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new pa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=eg(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function jm(i,e){i.asyncQueue.verifyOperationInProgress(),Ee(Sa,"Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let r=n.initialUser;i.setCredentialChangeListener(async o=>{r.isEqual(o)||(await n_(e.localStore,o),r=o)}),e.persistence.setDatabaseDeletedListener(()=>{ya("Terminating Firestore due to IndexedDb database deletion"),i.terminate().then(()=>{Ee("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(o=>{ya("Terminating Firestore due to IndexedDb database deletion failed",o)})}),i._offlineComponents=e}async function ux(i,e){i.asyncQueue.verifyOperationInProgress();const n=await JI(i);Ee(Sa,"Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener(r=>sx(e.remoteStore,r)),i.setAppCheckTokenChangeListener((r,o)=>sx(e.remoteStore,o)),i._onlineComponents=e}async function JI(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){Ee(Sa,"Using user provided OfflineComponentProvider");try{await jm(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(o){return o.name==="FirebaseError"?o.code===ge.FAILED_PRECONDITION||o.code===ge.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(n))throw n;ya("Error using user provided cache. Falling back to memory cache: "+n),await jm(i,new Yd)}}else Ee(Sa,"Using default OfflineComponentProvider"),await jm(i,new YI(void 0));return i._offlineComponents}async function b_(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(Ee(Sa,"Using user provided OnlineComponentProvider"),await ux(i,i._uninitializedComponentsProvider._online)):(Ee(Sa,"Using default OnlineComponentProvider"),await ux(i,new lp))),i._onlineComponents}function ek(i){return b_(i).then(e=>e.syncEngine)}async function tk(i){const e=await b_(i),n=e.eventManager;return n.onListen=VI.bind(null,e.syncEngine),n.onUnlisten=BI.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=PI.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=zI.bind(null,e.syncEngine),n}function nk(i,e,n={}){const r=new pa;return i.asyncQueue.enqueueAndForget(async()=>function(c,f,p,g,y){const w=new QI({next:A=>{w.Ou(),f.enqueueAndForget(()=>II(c,S));const F=A.docs.has(p);!F&&A.fromCache?y.reject(new De(ge.UNAVAILABLE,"Failed to get document because the client is offline.")):F&&A.fromCache&&g&&g.source==="server"?y.reject(new De(ge.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(A)},error:A=>y.reject(A)}),S=new jI(Bp(p.path),w,{includeMetadataChanges:!0,ka:!0});return CI(c,S)}(await tk(i),i.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dx=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w_="firestore.googleapis.com",hx=!0;class fx{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new De(ge.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=w_,this.ssl=hx}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:hx;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=e_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<k6)throw new De(ge.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}m4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=__((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(c){if(c.timeoutSeconds!==void 0){if(isNaN(c.timeoutSeconds))throw new De(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (must not be NaN)`);if(c.timeoutSeconds<5)throw new De(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (minimum allowed value is 5)`);if(c.timeoutSeconds>30)throw new De(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,o){return r.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class sg{constructor(e,n,r,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new fx({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new De(ge.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new De(ge.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new fx(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new s4;switch(r.type){case"firstParty":return new l4(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new De(ge.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=dx.get(n);r&&(Ee("ComponentProvider","Removing Datastore"),dx.delete(n),r.terminate())}(this),Promise.resolve()}}function ik(i,e,n,r={}){var o;i=Fc(i,sg);const c=wl(e),f=i._getSettings(),p=Object.assign(Object.assign({},f),{emulatorOptions:i._getEmulatorOptions()}),g=`${e}:${n}`;c&&(Wx(`https://${g}`),Xx("Firestore",!0)),f.host!==w_&&f.host!==g&&ya("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y=Object.assign(Object.assign({},f),{host:g,ssl:c,emulatorOptions:r});if(!ga(y,p)&&(i._setSettings(y),r.mockUserToken)){let w,S;if(typeof r.mockUserToken=="string")w=r.mockUserToken,S=Bn.MOCK_USER;else{w=KE(r.mockUserToken,(o=i._app)===null||o===void 0?void 0:o.options.projectId);const A=r.mockUserToken.sub||r.mockUserToken.user_id;if(!A)throw new De(ge.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");S=new Bn(A)}i._authCredentials=new r4(new h2(w,S))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new rg(this.firestore,e,this._query)}}class Sn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Kc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Sn(this.firestore,e,this._key)}toJSON(){return{type:Sn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(su(n,Sn._jsonSchema))return new Sn(e,r||null,new Me(Ft.fromString(n.referencePath)))}}Sn._jsonSchemaVersion="firestore/documentReference/1.0",Sn._jsonSchema={type:on("string",Sn._jsonSchemaVersion),referencePath:on("string")};class Kc extends rg{constructor(e,n,r){super(e,n,Bp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Sn(this.firestore,null,new Me(e))}withConverter(e){return new Kc(this.firestore,e,this._path)}}function Yt(i,e,...n){if(i=Zn(i),arguments.length===1&&(e=Dp.newId()),f4("doc","path",e),i instanceof sg){const r=Ft.fromString(e,...n);return R1(r),new Sn(i,null,new Me(r))}{if(!(i instanceof Sn||i instanceof Kc))throw new De(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(Ft.fromString(e,...n));return R1(r),new Sn(i.firestore,i instanceof Kc?i.converter:null,new Me(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mx="AsyncQueue";class px{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new s_(this,"async_queue_retry"),this.oc=()=>{const r=Nm();r&&Ee(mx,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const n=Nm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=Nm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new pa;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Rl(e))throw e;Ee(mx,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Sr("INTERNAL UNHANDLED ERROR: ",gx(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const o=Jp.createAndSchedule(this,e,n,r,c=>this.lc(c));return this.ec.push(o),o}ac(){this.tc&&Ue(47125,{hc:gx(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function gx(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}class ag extends sg{constructor(e,n,r,o){super(e,n,r,o),this.type="firestore",this._queue=new px,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new px(e),this._firestoreClient=void 0,await e}}}function sk(i,e){const n=typeof i=="object"?i:gp(),r=typeof i=="string"?i:zd,o=vo(n,"firestore").getImmediate({identifier:r});if(!o._initialized){const c=XE("firestore");c&&ik(o,...c)}return o}function S_(i){if(i._terminated)throw new De(ge.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||rk(i),i._firestoreClient}function rk(i){var e,n,r;const o=i._freezeSettings(),c=function(p,g,y,w){return new A4(p,g,y,w.host,w.ssl,w.experimentalForceLongPolling,w.experimentalAutoDetectLongPolling,__(w.experimentalLongPollingOptions),w.useFetchStreams,w.isUsingEmulator)}(i._databaseId,((e=i._app)===null||e===void 0?void 0:e.options.appId)||"",i._persistenceKey,o);i._componentsProvider||!((n=o.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=o.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(i._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),i._firestoreClient=new $I(i._authCredentials,i._appCheckCredentials,i._queue,c,i._componentsProvider&&function(p){const g=p==null?void 0:p._online.build();return{_offline:p==null?void 0:p._offline.build(g),_online:g}}(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Bi(On.fromBase64String(e))}catch(n){throw new De(ge.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Bi(On.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Bi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(su(e,Bi._jsonSchema))return Bi.fromBase64String(e.bytes)}}Bi._jsonSchemaVersion="firestore/bytes/1.0",Bi._jsonSchema={type:on("string",Bi._jsonSchemaVersion),bytes:on("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new De(ge.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Dn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E_{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new De(ge.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new De(ge.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return et(this._lat,e._lat)||et(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ms._jsonSchemaVersion}}static fromJSON(e){if(su(e,Ms._jsonSchema))return new Ms(e.latitude,e.longitude)}}Ms._jsonSchemaVersion="firestore/geoPoint/1.0",Ms._jsonSchema={type:on("string",Ms._jsonSchemaVersion),latitude:on("number"),longitude:on("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,o){if(r.length!==o.length)return!1;for(let c=0;c<r.length;++c)if(r[c]!==o[c])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Ls._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(su(e,Ls._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Ls(e.vectorValues);throw new De(ge.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ls._jsonSchemaVersion="firestore/vectorValue/1.0",Ls._jsonSchema={type:on("string",Ls._jsonSchemaVersion),vectorValues:on("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ak=/^__.*__$/;class ok{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new wo(e,this.data,this.fieldMask,n,this.fieldTransforms):new ru(e,this.data,n,this.fieldTransforms)}}function A_(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ue(40011,{Ec:i})}}class lg{constructor(e,n,r,o,c,f){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=o,c===void 0&&this.Ac(),this.fieldTransforms=c||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new lg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.Rc({path:r,mc:!1});return o.fc(e),o}gc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.Rc({path:r,mc:!1});return o.Ac(),o}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Qd(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(A_(this.Ec)&&ak.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class lk{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||gh(e)}Dc(e,n,r,o=!1){return new lg({Ec:e,methodName:n,bc:r,path:Dn.emptyPath(),mc:!1,Sc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ck(i){const e=i._freezeSettings(),n=gh(i._databaseId);return new lk(i._databaseId,!!e.ignoreUndefinedProperties,n)}function uk(i,e,n,r,o,c={}){const f=i.Dc(c.merge||c.mergeFields?2:0,e,n,o);I_("Data must be an object, but it was:",f,r);const p=R_(r,f);let g,y;if(c.merge)g=new ns(f.fieldMask),y=f.fieldTransforms;else if(c.mergeFields){const w=[];for(const S of c.mergeFields){const A=dk(e,S,n);if(!f.contains(A))throw new De(ge.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);fk(w,A)||w.push(A)}g=new ns(w),y=f.fieldTransforms.filter(S=>g.covers(S.field))}else g=null,y=f.fieldTransforms;return new ok(new Ui(p),g,y)}function T_(i,e){if(C_(i=Zn(i)))return I_("Unsupported field value:",e,i),R_(i,e);if(i instanceof E_)return function(r,o){if(!A_(o.Ec))throw o.wc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.wc(`${r._methodName}() is not currently supported inside arrays`);const c=r._toFieldTransform(o);c&&o.fieldTransforms.push(c)}(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,o){const c=[];let f=0;for(const p of r){let g=T_(p,o.yc(f));g==null&&(g={nullValue:"NULL_VALUE"}),c.push(g),f++}return{arrayValue:{values:c}}}(i,e)}return function(r,o){if((r=Zn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return K4(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const c=Ot.fromDate(r);return{timestampValue:Xd(o.serializer,c)}}if(r instanceof Ot){const c=new Ot(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Xd(o.serializer,c)}}if(r instanceof Ms)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Bi)return{bytesValue:X2(o.serializer,r._byteString)};if(r instanceof Sn){const c=o.databaseId,f=r.firestore._databaseId;if(!f.isEqual(c))throw o.wc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:qp(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof Ls)return function(f,p){return{mapValue:{fields:{[w2]:{stringValue:S2},[Fd]:{arrayValue:{values:f.toArray().map(y=>{if(typeof y!="number")throw p.wc("VectorValues must only contain numeric values.");return zp(p.serializer,y)})}}}}}}(r,o);throw o.wc(`Unsupported field value: ${Op(r)}`)}(i,e)}function R_(i,e){const n={};return g2(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):bo(i,(r,o)=>{const c=T_(o,e.Vc(r));c!=null&&(n[r]=c)}),{mapValue:{fields:n}}}function C_(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof Ot||i instanceof Ms||i instanceof Bi||i instanceof Sn||i instanceof E_||i instanceof Ls)}function I_(i,e,n){if(!C_(n)||!m2(n)){const r=Op(n);throw r==="an object"?e.wc(i+" a custom object"):e.wc(i+" "+r)}}function dk(i,e,n){if((e=Zn(e))instanceof og)return e._internalPath;if(typeof e=="string")return k_(i,e);throw Qd("Field path arguments must be of type string or ",i,!1,void 0,n)}const hk=new RegExp("[~\\*/\\[\\]]");function k_(i,e,n){if(e.search(hk)>=0)throw Qd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new og(...e.split("."))._internalPath}catch{throw Qd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function Qd(i,e,n,r,o){const c=r&&!r.isEmpty(),f=o!==void 0;let p=`Function ${e}() called with invalid data`;n&&(p+=" (via `toFirestore()`)"),p+=". ";let g="";return(c||f)&&(g+=" (found",c&&(g+=` in field ${r}`),f&&(g+=` in document ${o}`),g+=")"),new De(ge.INVALID_ARGUMENT,p+i+g)}function fk(i,e){return i.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N_{constructor(e,n,r,o,c){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Sn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new mk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(j_("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class mk extends N_{data(){return super.data()}}function j_(i,e){return typeof e=="string"?k_(i,e):e instanceof og?e._internalPath:e._delegate._internalPath}class pk{convertValue(e,n="none"){switch(_a(e)){case 0:return null;case 1:return e.booleanValue;case 2:return tn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ba(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ue(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return bo(e,(o,c)=>{r[o]=this.convertValue(c,n)}),r}convertVectorValue(e){var n,r,o;const c=(o=(r=(n=e.fields)===null||n===void 0?void 0:n[Fd].arrayValue)===null||r===void 0?void 0:r.values)===null||o===void 0?void 0:o.map(f=>tn(f.doubleValue));return new Ls(c)}convertGeoPoint(e){return new Ms(tn(e.latitude),tn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=ch(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(qc(e));default:return null}}convertTimestamp(e){const n=xa(e);return new Ot(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ft.fromString(e);xt(J2(r),9688,{name:e});const o=new Gc(r.get(1),r.get(3)),c=new Me(r.popFirst(5));return o.isEqual(n)||Sr(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gk(i,e,n){let r;return r=i?i.toFirestore(e):e,r}class Rc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class lo extends N_{constructor(e,n,r,o,c,f){super(e,n,r,o,f),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Rd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(j_("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new De(ge.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=lo._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}lo._jsonSchemaVersion="firestore/documentSnapshot/1.0",lo._jsonSchema={type:on("string",lo._jsonSchemaVersion),bundleSource:on("string","DocumentSnapshot"),bundleName:on("string"),bundle:on("string")};class Rd extends lo{data(e={}){return super.data(e)}}class Lc{constructor(e,n,r,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new Rc(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Rd(this._firestore,this._userDataWriter,r.key,r,new Rc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new De(ge.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(o,c){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map(p=>{const g=new Rd(o._firestore,o._userDataWriter,p.doc.key,p.doc,new Rc(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);return p.doc,{type:"added",doc:g,oldIndex:-1,newIndex:f++}})}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(p=>c||p.type!==3).map(p=>{const g=new Rd(o._firestore,o._userDataWriter,p.doc.key,p.doc,new Rc(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,w=-1;return p.type!==0&&(y=f.indexOf(p.doc.key),f=f.delete(p.doc.key)),p.type!==1&&(f=f.add(p.doc),w=f.indexOf(p.doc.key)),{type:yk(p.type),doc:g,oldIndex:y,newIndex:w}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new De(ge.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Lc._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Dp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],o=[];return this.docs.forEach(c=>{c._document!==null&&(n.push(c._document),r.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),o.push(c.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function yk(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ue(61501,{type:i})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jn(i){i=Fc(i,Sn);const e=Fc(i.firestore,ag);return nk(S_(e),i._key).then(n=>bk(e,i,n))}Lc._jsonSchemaVersion="firestore/querySnapshot/1.0",Lc._jsonSchema={type:on("string",Lc._jsonSchemaVersion),bundleSource:on("string","QuerySnapshot"),bundleName:on("string"),bundle:on("string")};class vk extends pk{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Sn(this.firestore,null,n)}}function es(i,e,n){i=Fc(i,Sn);const r=Fc(i.firestore,ag),o=gk(i.converter,e);return xk(r,[uk(ck(r),"setDoc",i._key,o,i.converter!==null,n).toMutation(i._key,xr.none())])}function xk(i,e){return function(r,o){const c=new pa;return r.asyncQueue.enqueueAndForget(async()=>FI(await ek(r),o,c)),c.promise}(S_(i),e)}function bk(i,e,n){const r=n.docs.get(e._key),o=new vk(i);return new lo(i,o,e._key,r,new Rc(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(o){Al=o})(Sl),Vs(new ss("firestore",(r,{instanceIdentifier:o,options:c})=>{const f=r.getProvider("app").getImmediate(),p=new ag(new a4(r.getProvider("auth-internal")),new c4(f,r.getProvider("app-check-internal")),function(y,w){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new De(ge.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Gc(y.options.projectId,w)}(f,o),f);return c=Object.assign({useFetchStreams:n},c),p._setSettings(c),p},"PUBLIC").setMultipleInstances(!0)),zi(w1,S1,e),zi(w1,S1,"esm2017")})();const _k={apiKey:"AIzaSyApj9cFUaYnRAZq4Hjab0NMtCJo7OwCG1w",authDomain:"roversa-2c5fd.firebaseapp.com",projectId:"roversa-2c5fd",storageBucket:"roversa-2c5fd.firebasestorage.app",messagingSenderId:"261909236286",appId:"1:261909236286:web:3714d3511e6a5c980a1f6f",measurementId:"G-NX72JNWMM2"},cg=eb(_k);BR(cg);const Dt=n4(cg),Qt=sk(cg),xh="/dashboard/assets/Official_Logo_White-bdZT6TWh.png";function wk(){const i=Fs(),[e,n]=C.useState(null);return C.useEffect(()=>{Ip(Dt,r=>{r&&i("/dashboard")})}),d.jsxs("div",{className:"home-container",children:[d.jsxs("div",{className:"home-header slide-in-from-top",children:[d.jsx("div",{className:"logo",onClick:()=>i("/"),style:{cursor:"pointer"},children:d.jsx("img",{src:xh,alt:"Roversa Robotics"})}),d.jsx("div",{className:"header-nav",children:d.jsx("button",{className:"nav-button fade-in-scale animate-on-mount-delay-1",onClick:()=>i("/login"),children:"Login"})})]}),d.jsx("div",{className:"home-content slide-in-from-bottom",children:d.jsx("div",{className:"hero-section",children:d.jsxs("div",{className:"hero-content",children:[d.jsx("h1",{className:"animate-on-mount-delay-2",children:"Welcome to Roversa Dashboard"}),d.jsx("div",{className:"hero-buttons",children:d.jsx("button",{className:"secondary-btn fade-in-scale animate-on-mount-delay-3",onClick:()=>i("/login"),children:"Sign In"})})]})})})]})}function Sk(){const i=Fs(),[e,n]=C.useState(""),[r,o]=C.useState(""),[c,f]=C.useState(""),[p,g]=C.useState(null),y=async()=>{try{const w=await FC(Dt,e,r);i("/dashboard")}catch{f("Invalid login credentials")}};return C.useEffect(()=>{Ip(Dt,w=>{w&&i("/dashboard")})}),d.jsxs("div",{className:"login-container",children:[d.jsxs("div",{className:"login-header slide-in-from-top",children:[d.jsx("div",{className:"logo",onClick:()=>i("/"),style:{cursor:"pointer"},children:d.jsx("img",{src:xh,alt:"Roversa Robotics"})}),d.jsx("div",{className:"header-nav",children:d.jsx("button",{className:"nav-button active fade-in-scale animate-on-mount-delay-1",children:"Login"})})]}),d.jsx("div",{className:"login-content slide-in-from-bottom",children:d.jsxs("div",{className:"login-card fade-in-scale animate-on-mount-delay-2",children:[d.jsxs("div",{className:"login-title animate-on-mount-delay-3",children:[d.jsx("h1",{children:"Welcome Back"}),d.jsx("p",{children:"Sign in to your account"})]}),c&&d.jsx("div",{className:"error-message animate-on-mount-delay-4",children:c}),d.jsxs("div",{className:"login-form",children:[d.jsxs("div",{className:"input-group animate-on-mount-delay-4",children:[d.jsx("label",{htmlFor:"email",children:"Email"}),d.jsx("input",{type:"email",id:"email",placeholder:"Enter your email",className:"login-input",value:e,onChange:w=>n(w.target.value)})]}),d.jsxs("div",{className:"input-group animate-on-mount-delay-5",children:[d.jsx("label",{htmlFor:"password",children:"Password"}),d.jsx("input",{type:"password",id:"password",placeholder:"Enter your password",className:"login-input",value:r,onChange:w=>o(w.target.value)})]}),d.jsx("button",{className:"login-submit-btn fade-in-scale animate-on-mount-delay-6",onClick:y,children:"Sign In"})]}),d.jsx("div",{className:"signup-link animate-on-mount-delay-7",children:d.jsxs("p",{children:["Don't have an account? ",d.jsx("button",{className:"link-button",onClick:()=>i("/signup"),children:"Sign up"})]})})]})})]})}function Ek(){const i=Fs(),[e,n]=C.useState(""),[r,o]=C.useState(""),[c,f]=C.useState(""),[p,g]=C.useState(""),[y,w]=C.useState(null),S=async()=>{try{const A=await zC(Dt,r,c);await es(Yt(Qt,"users",A.user.uid),{name:e,email:r}),await new Promise(F=>setTimeout(F,1e3)),i("/dashboard")}catch(A){console.error("Signup error:",A),g(A.message)}};return C.useEffect(()=>{Ip(Dt,A=>{A&&i("/dashboard")})}),d.jsxs("div",{className:"signup-container",children:[d.jsxs("div",{className:"signup-header slide-in-from-top",children:[d.jsx("div",{className:"logo",onClick:()=>i("/"),style:{cursor:"pointer"},children:d.jsx("img",{src:xh,alt:"Roversa Robotics"})}),d.jsx("div",{className:"header-nav",children:d.jsx("button",{className:"nav-button fade-in-scale animate-on-mount-delay-1",onClick:()=>i("/login"),children:"Login"})})]}),d.jsx("div",{className:"signup-content slide-in-from-bottom",children:d.jsxs("div",{className:"signup-card fade-in-scale animate-on-mount-delay-2",children:[d.jsxs("div",{className:"signup-title animate-on-mount-delay-3",children:[d.jsx("h1",{children:"Create Account"}),d.jsx("p",{children:"Let's make your classroom experience easy"})]}),p&&d.jsx("div",{className:"error-message animate-on-mount-delay-4",children:p}),d.jsxs("div",{className:"signup-form",children:[d.jsxs("div",{className:"input-group animate-on-mount-delay-4",children:[d.jsx("label",{htmlFor:"name",children:"Name"}),d.jsx("input",{type:"text",id:"name",placeholder:"Enter your name",className:"signup-input",value:e,onChange:A=>n(A.target.value)})]}),d.jsxs("div",{className:"input-group animate-on-mount-delay-5",children:[d.jsx("label",{htmlFor:"email",children:"Email"}),d.jsx("input",{type:"email",id:"email",placeholder:"Enter your email",className:"signup-input",value:r,onChange:A=>o(A.target.value)})]}),d.jsxs("div",{className:"input-group animate-on-mount-delay-6",children:[d.jsx("label",{htmlFor:"password",children:"Password"}),d.jsx("input",{type:"password",id:"password",placeholder:"Create a password",className:"signup-input",value:c,onChange:A=>f(A.target.value)})]}),d.jsx("button",{className:"signup-submit-btn fade-in-scale animate-on-mount-delay-7",onClick:S,children:"Create Account"})]}),d.jsx("div",{className:"login-link animate-on-mount-delay-8",children:d.jsxs("p",{children:["Already have an account? ",d.jsx("button",{className:"link-button",onClick:()=>i("/login"),children:"Sign in"})]})})]})})]})}const Ak="/dashboard/assets/robotman-XVmXDZYK.png";function cu(){const i=Fs(),e=as(),[n,r]=C.useState(null),[o,c]=C.useState(""),f=async()=>{try{await GC(Dt),i("/login")}catch(p){console.error("Error signing out:",p)}};return C.useEffect(()=>{const p=Dt.onAuthStateChanged(g=>{var y;g?(r(g),c(g.displayName||((y=g.email)==null?void 0:y.split("@")[0])||"User")):i("/login")});return()=>p()},[i]),d.jsxs("div",{className:"sidebar",children:[d.jsx("div",{className:"logo",style:{marginBottom:30},children:d.jsx("img",{src:xh,alt:"Roversa Robotics"})}),d.jsxs("nav",{className:"nav-menu",children:[d.jsx("div",{className:`nav-item${e.pathname==="/dashboard"?" active":""}`,onClick:()=>i("/dashboard"),style:{cursor:"pointer"},children:d.jsxs("span",{style:{display:"flex",alignItems:"center",gap:8},children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"20",height:"20",style:{marginRight:8},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"})}),"Home"]})}),d.jsx("div",{className:`nav-item${e.pathname.startsWith("/classrooms")?" active":""}`,onClick:()=>i("/classrooms"),children:d.jsxs("span",{style:{display:"flex",alignItems:"center",gap:8},children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"20",height:"20",style:{marginRight:8},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"})}),"Classrooms"]})}),d.jsx("div",{className:`nav-item${e.pathname.startsWith("/lessons")?" active":""}`,onClick:()=>i("/lessons"),style:{cursor:"pointer"},children:d.jsxs("span",{style:{display:"flex",alignItems:"center",gap:8},children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"20",height:"20",style:{marginRight:8},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.26 10.147a60.438 60.438 0 0 0-.491 6.347A48.62 48.62 0 0 1 12 20.904a48.62 48.62 0 0 1 8.232-4.41 60.46 60.46 0 0 0-.491-6.347m-15.482 0a50.636 50.636 0 0 0-2.658-.813A59.906 59.906 0 0 1 12 3.493a59.903 59.903 0 0 1 10.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0A50.717 50.717 0 0 1 12 13.489a50.702 50.702 0 0 1 7.74-3.342M6.75 15a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Zm0 0v-3.675A55.378 55.378 0 0 1 12 8.443m-7.007 11.55A5.981 5.981 0 0 0 6.75 15.75v-1.5"})}),"Lessons"]})}),d.jsx("div",{className:`nav-item${e.pathname.startsWith("/sessions")?" active":""}`,onClick:()=>i("/sessions"),children:d.jsxs("span",{style:{display:"flex",alignItems:"center",gap:8},children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"20",height:"20",style:{marginRight:8},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.383a14.406 14.406 0 0 1-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 1 0-7.517 0c.85.493 1.509 1.333 1.509 2.316V18"})}),"Sessions"]})}),d.jsx("div",{style:{height:"170px"}}),d.jsx("div",{className:"robotman-wrapper",style:{display:"flex",justifyContent:"flex-start",alignItems:"flex-end",marginTop:0,marginBottom:"0",height:"100px",marginLeft:0,marginRight:0},children:d.jsx("img",{src:Ak,alt:"Robotman",className:"robotman-img",style:{width:"250px",height:"auto",display:"block",marginLeft:"-19px"}})}),d.jsx("div",{className:"nav-item",style:{marginTop:"-50px",cursor:"pointer",opacity:.5,pointerEvents:"none"},children:d.jsxs("span",{style:{display:"flex",alignItems:"center",gap:8},children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"20",height:"20",style:{marginRight:8},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 7.5a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.5 19.5a7.5 7.5 0 0115 0v.75a.75.75 0 01-.75.75h-13.5a.75.75 0 01-.75-.75v-.75z"})}),"Profile"]})}),d.jsx("div",{className:"nav-item",style:{cursor:"pointer",opacity:.5,pointerEvents:"none"},children:d.jsxs("span",{style:{display:"flex",alignItems:"center",gap:8},children:[d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"20",height:"20",style:{marginRight:8},children:[d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.01c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.01 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.01 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.573 1.01c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.572-1.01c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.01-2.573c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.01-2.572c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.01z"}),d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Settings"]})}),d.jsx("div",{className:"nav-item logout",onClick:f,children:d.jsxs("span",{style:{display:"flex",alignItems:"center",gap:8},children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"20",height:"20",style:{marginRight:8},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 9V5.25A2.25 2.25 0 0 1 10.5 3h6a2.25 2.25 0 0 1 2.25 2.25v13.5A2.25 2.25 0 0 1 16.5 21h-6a2.25 2.25 0 0 1-2.25-2.25V15m-3 0-3-3m0 0 3-3m-3 3H15"})}),"Log out"]})})]})]})}const Tk="/dashboard/assets/tent-DiHh0Yjx.png",Rk=(i,e)=>{const n=new Date(i,e,1),o=new Date(i,e+1,0).getDate(),c=new Date(i,e,0).getDate(),f=n.getDay()===0?6:n.getDay()-1,p=[];let g=[],y=1;for(let w=0;w<6;w++){g=[];for(let S=0;S<7;S++){const A=w*7+S;A<f?g.push({day:c-(f-A-1),isCurrentMonth:!1}):y>o?(g.push({day:y-o,isCurrentMonth:!1}),y++):(g.push({day:y,isCurrentMonth:!0}),y++)}p.push(g)}return p},yx=["January","February","March","April","May","June","July","August","September","October","November","December"];function Ck({sessions:i=[]}){const e=new Date,[n,r]=C.useState(e.getFullYear()),[o,c]=C.useState(e.getMonth()),[f,p]=C.useState(2.5),g=C.useRef(null),y=C.useRef(null),w=C.useRef(null),[S,A]=C.useState(null),[F,G]=C.useState(!1),[q,Q]=C.useState([]);let ee=Rk(n,o);C.useEffect(()=>{var N;if(!g.current||!w.current)return;const xe=1.1,V=1.4,R=.01;let k=xe;for(let z=V;z>=xe;z-=R){g.current.style.fontSize=`${z}rem`;const j=g.current.scrollWidth,qe=w.current.offsetWidth-(((N=y.current)==null?void 0:N.offsetWidth)||0)-8;if(j<=qe){k=z;break}}p(k);const M=new window.ResizeObserver(()=>{var j;let z=xe;for(let qe=V;qe>=xe;qe-=R){g.current.style.fontSize=`${qe}rem`;const tt=g.current.scrollWidth,ae=w.current.offsetWidth-(((j=y.current)==null?void 0:j.offsetWidth)||0)-8;if(tt<=ae){z=qe;break}}p(z)});return M.observe(w.current),()=>M.disconnect()},[o,n]);const $=()=>{o===0?(c(11),r(n-1)):c(o-1)},L=()=>{o===11?(c(0),r(n+1)):c(o+1)},pe=xe=>{try{const R=new Date(n,o,xe).toDateString();let k=0,M=0,N=0;return i.forEach(z=>{new Date(z.createdAt).toDateString()===R&&(z.status==="ended"?k++:z.status==="active"||z.status==="paused"?M++:z.status==="scheduled"&&N++)}),k>0||M>0||N>0?{past:k,active:M,scheduled:N}:null}catch(V){return console.error("Error getting session data:",V),null}},de=xe=>{try{const R=new Date(n,o,xe).toDateString();return i.filter(k=>new Date(k.createdAt).toDateString()===R)}catch{return[]}};return d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"dashboard-calendar-card",children:[d.jsxs("div",{className:"calendar-header-row",ref:w,children:[d.jsxs("div",{className:"calendar-title",ref:g,style:{fontSize:`${f}rem`},children:[yx[o],", ",n]}),d.jsxs("div",{className:"calendar-arrows-group",ref:y,children:[d.jsx("button",{className:"calendar-arrow",onClick:$,children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"})})}),d.jsx("button",{className:"calendar-arrow",onClick:L,children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})})})]})]}),d.jsx("div",{className:"calendar-subtitle",children:"Track your progress"}),d.jsx("div",{className:"calendar-grid",children:ee.map((xe,V)=>d.jsx("div",{className:"calendar-week",children:xe.map((R,k)=>{const M=R.isCurrentMonth&&R.day===e.getDate()&&o===e.getMonth()&&n===e.getFullYear();return d.jsxs("div",{className:`calendar-day${R.isCurrentMonth?"":" calendar-day-outside"}${M?" calendar-day-today":""}`,onClick:()=>{R.isCurrentMonth&&(A(R.day),Q(de(R.day)),G(!0))},style:{cursor:R.isCurrentMonth?"pointer":"default"},children:[d.jsx("span",{children:R.day}),R.isCurrentMonth&&pe(R.day)&&d.jsxs("div",{className:"calendar-day-dots",children:[Array.from({length:pe(R.day).past||0},(N,z)=>d.jsx("div",{className:"calendar-day-dot-past"},`past-${z}`)),Array.from({length:pe(R.day).active||0},(N,z)=>d.jsx("div",{className:"calendar-day-dot-active"},`active-${z}`)),Array.from({length:pe(R.day).scheduled||0},(N,z)=>d.jsx("div",{className:"calendar-day-dot-scheduled"},`scheduled-${z}`))]})]},k)})},V))}),d.jsx("img",{src:Tk,alt:"Tent illustration for calendar",className:"calendar-tent-img",onError:xe=>{xe.target.style.display="none"}})]}),F&&PE.createPortal(d.jsx("div",{className:"modal-overlay",onClick:()=>G(!1),children:d.jsxs("div",{className:"modal-content",onClick:xe=>xe.stopPropagation(),style:{maxWidth:420,width:"90%",maxHeight:"80vh",overflowY:"auto",borderRadius:16},children:[d.jsx("div",{className:"modal-header",children:d.jsxs("h2",{style:{fontSize:"1.3rem",fontWeight:400,color:"#222",fontFamily:"Inter, sans-serif",textAlign:"center",margin:0},children:["Sessions on ",S," ",yx[o],", ",n]})}),d.jsx("div",{className:"modal-body",children:q.length===0?d.jsx("div",{style:{color:"#888",fontSize:15,fontFamily:"Open Sans, sans-serif",fontWeight:400,textAlign:"center",margin:"32px 0"},children:"No sessions on this day"}):d.jsx("div",{style:{display:"flex",flexDirection:"column",gap:16,width:"100%"},children:q.map(xe=>d.jsxs("div",{style:{background:"#f7f8fa",borderRadius:10,padding:"12px 18px",border:"1px solid #e0e0e0",display:"flex",flexDirection:"column",gap:2},children:[d.jsx("div",{style:{fontWeight:700,color:"#4169e1",fontSize:15},children:xe.name}),d.jsx("div",{style:{color:"#888",fontWeight:400,fontSize:13},children:xe.status.charAt(0).toUpperCase()+xe.status.slice(1)}),d.jsx("div",{style:{color:"#555",fontWeight:400,fontSize:12},children:xe.block||xe.blockName||xe.classroomBlock||""})]},xe.id))})})]})}),document.body)]})}const Ik="/dashboard/assets/chargingstation-DIe01uMz.png",kk="/dashboard/assets/dashboardbatterydesign-DalcyAxh.png",Nk="/dashboard/assets/excited_flower-DN0cCqXE.png",jk="/dashboard/assets/myrobots-BpXXry3c.png",Dk="/dashboard/assets/myclassrooms--acsbIcs.png",Ok="/dashboard/assets/accessguides-KOE7_o3r.png";function Mk(){const i=Fs(),[e,n]=C.useState(null),[r,o]=C.useState(""),[c,f]=C.useState([]),[p,g]=C.useState([]),[y,w]=C.useState([]),[S,A]=C.useState([]),[F,G]=C.useState(!1),q=C.useRef();function Q({lastBatteryTime:$,firstBatteryTime:L,lastProgramTime:pe},de=new Date){return!$||(de-new Date($))/1e3>10?"inactive_battery":pe&&(de-new Date(pe))/1e3<=180?"active":pe&&(de-new Date(pe))/1e3>180||!pe&&L&&(de-new Date(L))/1e3>180?"inactive":"inactive_battery"}function ee($){if($.assignedTo&&typeof $.assignedTo=="object"){if($.assignedTo.name)return $.assignedTo.name;if($.assignedTo.group)return $.assignedTo.group}return $.assignedTo?$.assignedTo:"Unassigned"}return C.useEffect(()=>{if(!F)return;function $(L){q.current&&!q.current.contains(L.target)&&G(!1)}return document.addEventListener("mousedown",$),()=>document.removeEventListener("mousedown",$)},[F]),C.useEffect(()=>{const $=async de=>{if(!de)return;const xe=Yt(Qt,"users",de.uid,"appdata","sessions"),V=await jn(xe);if(V.exists()){const R=V.data();g((R.sessions||[]).filter(N=>String(N.status)==="active")),w((R.sessions||[]).filter(N=>String(N.status)==="paused"));const k=(R.sessions||[]).filter(N=>String(N.status)==="ended");k.sort((N,z)=>new Date(z.endedAt||z.createdAt)-new Date(N.endedAt||N.createdAt)),f(k.slice(0,3));let M=[];(R.sessions||[]).forEach(N=>{N.robots&&Object.entries(N.robots).forEach(([z,j])=>{if(!j.batteryData||typeof j.batteryData.voltage!="number")return;const qe=Q(j);(j.batteryData.voltage<3.7||qe==="inactive_battery")&&M.push({sessionName:N.name,sessionId:N.id,deviceId:z,robot:j})})}),A(M)}else g([]),w([]),f([]),A([])},L=async de=>{var xe;if(de){for(let V=0;V<3;V++)try{const R=Yt(Qt,"users",de.uid),k=await jn(R);if(k.exists()){const M=k.data();if(M.name&&M.name.trim()!==""){o(M.name);return}}V<2&&await new Promise(M=>setTimeout(M,1e3))}catch(R){console.error("Error loading profile:",R),V<2&&await new Promise(k=>setTimeout(k,1e3))}o(((xe=de.email)==null?void 0:xe.split("@")[0])||"User")}},pe=Dt.onAuthStateChanged(de=>{de?(n(de),L(de),$(de)):i("/login")});return()=>pe()},[i]),d.jsxs("div",{className:"dashboard-container",children:[d.jsx(cu,{className:"slide-in-from-left"}),F&&d.jsx("div",{className:"modal-overlay",onClick:()=>G(!1),children:d.jsxs("div",{className:"modal-content",ref:q,onClick:$=>$.stopPropagation(),style:{maxWidth:500,width:"90%",maxHeight:"80vh",overflowY:"auto",position:"relative",display:"flex",flexDirection:"column",alignItems:"center"},children:[d.jsx("div",{className:"modal-header",children:d.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:400,color:"#222",fontFamily:"Inter, sans-serif",textAlign:"center",margin:0},children:"Low Battery Robots"})}),d.jsx("div",{className:"modal-body",style:{width:"100%"},children:S.length===0?d.jsx("div",{style:{color:"#888",fontSize:16,fontFamily:"Open Sans, sans-serif",fontWeight:400,textAlign:"center",margin:"32px 0"},children:"All robots are sufficiently charged"}):d.jsx("div",{className:"robot-cards-container",style:{display:"flex",flexWrap:"wrap",gap:24,width:"100%",justifyContent:"center",alignItems:"flex-start"},children:S.map(({sessionName:$,sessionId:L,deviceId:pe,robot:de},xe)=>{var z;let k=0;typeof((z=de.batteryData)==null?void 0:z.voltage)=="number"&&(k=Math.max(0,Math.min(1,(de.batteryData.voltage-3.3)/(5-3.3))));const M=`${Math.round(k*100)}%`,N=ee(de);return d.jsxs("div",{className:"robot-card",style:{width:320,minHeight:70,background:"#fff",borderRadius:12,boxShadow:"0 2px 12px rgba(65, 105, 225, 0.08)",border:"2px solid #e0e0e0",padding:"16px 20px",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",position:"relative",textAlign:"left",gap:8},children:[d.jsxs("div",{className:"robot-card-info",style:{width:"70%",display:"flex",flexDirection:"column",alignItems:"flex-start",gap:2},children:[d.jsx("div",{style:{fontWeight:700,color:"#4169e1",fontSize:16,marginBottom:2,letterSpacing:.5},children:pe}),d.jsx("div",{style:{color:"#555",fontWeight:500,fontSize:13,marginBottom:2,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:N}),d.jsx("div",{style:{color:"#888",fontWeight:400,fontSize:12,marginBottom:2,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:$})]}),d.jsx("div",{style:{color:"#d32f2f",fontWeight:700,fontSize:20,minWidth:80,textAlign:"right"},children:M})]},L+"-"+pe)})})})]})}),d.jsxs("div",{className:"main-content dashboard-home-main-content slide-in-from-bottom",children:[d.jsxs("div",{className:"dashboard-header slide-in-from-top",children:[d.jsxs("h1",{className:"dashboard-welcome",style:{fontFamily:"Bevan, serif",fontWeight:400},children:["Welcome, ",r,"!"]}),d.jsx("div",{className:"dashboard-subtitle",children:"Control the Classroom. Ignite the Circuit."})]}),d.jsxs("div",{style:{width:"100%"},children:[d.jsxs("div",{style:{display:"flex",flexDirection:"row",gap:30,width:"100%",marginBottom:30,alignItems:"flex-start"},children:[d.jsxs("div",{style:{minWidth:275,maxWidth:320,marginLeft:0,padding:0,background:"#fff",border:"1.5px solid #e0e0e0",boxShadow:"0 1px 4px rgba(65,105,225,0.04)",borderRadius:20,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start",overflow:"hidden",height:400},children:[d.jsxs("div",{style:{width:"100%",background:"#fff",borderTopLeftRadius:20,borderTopRightRadius:20,display:"flex",flexDirection:"column",alignItems:"center",padding:"18px 0 0 0",position:"relative",minHeight:120},children:[d.jsx("img",{src:kk,alt:"Battery Design",style:{position:"absolute",top:-50,left:0,width:"100%",height:200,objectFit:"cover",zIndex:1,pointerEvents:"none",borderTopLeftRadius:20,borderTopRightRadius:20}}),d.jsx("img",{src:Ik,alt:"Charging Station",style:{width:200,height:190,objectFit:"cover",marginBottom:10,zIndex:400,position:"relative"}})]}),d.jsxs("div",{style:{padding:"0 14px 14px 14px",width:"100%",display:"flex",flexDirection:"column",alignItems:"center"},children:[d.jsx("h2",{style:{fontSize:"1.7rem",fontWeight:700,color:"#222",margin:"12px 0 6px 0",fontFamily:"Inter, sans-serif",textAlign:"center"},children:"Time to Charge?"}),d.jsx("div",{style:{color:"#555",fontSize:"0.90rem",fontFamily:"Inter, sans-serif",fontWeight:400,textAlign:"center",marginBottom:14,maxWidth:200},children:"Monitor your robots' battery life while they're in use."}),d.jsx("button",{style:{background:"#ff7a1a",color:"#fff",fontWeight:700,fontFamily:"Bevan, serif",fontSize:"0.85rem",border:"none",borderRadius:10,padding:"10px 0",width:"100%",marginTop:6,boxShadow:"0 2px 8px rgba(0,0,0,0.10)",cursor:"pointer",transition:"background 0.15s",outline:"none",letterSpacing:.5},onClick:()=>G(!0),children:"See Activity"})]})]}),d.jsx("div",{style:{flex:1,minWidth:340,maxWidth:520,height:400},children:d.jsxs("div",{className:"dashboard-card active-sessions-section fade-in-scale animate-on-mount-delay-2",style:{padding:0,width:"100%",height:"400px",marginBottom:8,marginTop:0,display:"flex",flexDirection:"column",background:"#fff6fa",border:"2px solid #fff",borderRadius:20},children:[d.jsxs("div",{style:{padding:"22px 28px 0 28px",display:"flex",alignItems:"center",gap:14,height:140,flexShrink:0},children:[d.jsx("img",{src:Nk,alt:"Excited Flower",style:{width:80,height:105,marginRight:8,marginBottom:20,marginLeft:-10,flexShrink:0}}),d.jsxs("div",{style:{display:"flex",flexDirection:"column",flex:1},children:[d.jsx("h2",{style:{fontSize:"2rem",fontWeight:700,color:"#222",marginBottom:6,fontFamily:"Inter, sans-serif",textAlign:"left"},children:"Active Sessions"}),d.jsx("div",{style:{color:"#555",fontSize:"0.85rem",marginBottom:25,fontFamily:"Open Sans, sans-serif",textAlign:"left"},children:"Continue or manage your currently running or paused sessions"})]})]}),d.jsxs("div",{className:"session-list",style:{padding:"0 28px 0 28px",width:"100%",marginTop:-30,height:200},children:[[...p,...y].length>0?[...p,...y].slice(0,2).map(($,L)=>d.jsxs("div",{className:`session-list-item ${$.status}-session`,onClick:()=>i(`/sessions/${$.id}`),style:{position:"relative",overflow:"visible",marginTop:20,marginBottom:-20,borderRadius:8,background:"#fff",border:"1.5px solid #e0e0e0",boxShadow:"0 1px 4px rgba(65,105,225,0.04)",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"14px 24px",cursor:"pointer",fontFamily:"inherit",minWidth:0,width:"100%",boxSizing:"border-box",minHeight:60},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:18,minWidth:0},children:[d.jsx("span",{className:`status-badge ${$.status}`,style:{fontSize:13,padding:"3px 12px",borderRadius:5,marginRight:8,marginLeft:8,marginTop:16,flexShrink:0,whiteSpace:"nowrap"},children:$.status==="active"?"Active":$.status==="paused"?"Paused":$.status}),d.jsx("span",{style:{fontWeight:700,fontSize:"1.18rem",color:"#222",fontFamily:"Inter, sans-serif",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:220},children:$.name}),d.jsxs("span",{className:"session-time",style:{color:"#888",fontSize:"0.93rem",fontFamily:"Inter, sans-serif",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:180},children:["Started: ",new Date($.createdAt).toLocaleDateString()]})]}),$.status==="paused"&&null]},$.id)):d.jsxs("div",{className:"session-list-item session-card-empty animate-on-mount-delay-2",style:{textAlign:"center",padding:40,color:"#888",fontFamily:"inherit",background:"transparent",border:"none",boxShadow:"none"},children:[d.jsx("h3",{style:{color:"#888",fontWeight:500,fontSize:"1.1rem"},children:"No Active or Paused Sessions"}),d.jsx("p",{style:{color:"#bbb",fontSize:14},children:"Start or resume a session to see it here."})]}),[...p,...y].length>2&&d.jsxs("div",{style:{textAlign:"center",padding:"20px 0",color:"#888",fontSize:"0.9rem",fontStyle:"italic"},children:["+",[...p,...y].length-2," more sessions"]})]}),d.jsx("div",{style:{margin:"10px 28px 18px 0",textAlign:"right",height:60,flexShrink:0},children:d.jsx("button",{style:{background:"#ff7a1a",color:"#fff",fontWeight:700,fontFamily:"Bevan, serif",fontSize:"0.75rem",border:"none",borderRadius:10,padding:"12px 0",width:"100%",marginTop:8,marginRight:28,boxShadow:"0 2px 8px rgba(0,0,0,0.10)",cursor:"pointer",transition:"background 0.15s",outline:"none",letterSpacing:.5},onClick:()=>i("/sessions"),children:"View All Sessions"})})]})}),d.jsxs("div",{className:"dashboard-calendar-card animate-on-mount-delay-5",style:{minWidth:220,maxWidth:320,display:"flex",flexDirection:"column",justifyContent:"flex-start",position:"relative"},children:[d.jsx(Ck,{sessions:[...p,...y,...c]}),d.jsxs("div",{style:{position:"absolute",top:"100%",left:0,right:0,marginTop:20,zIndex:10,width:"100%",minWidth:220,maxWidth:300},children:[d.jsx("h3",{style:{fontSize:"1.5rem",fontWeight:700,color:"#222",marginBottom:6,fontFamily:"Inter, sans-serif",textAlign:"left"},children:"Recent Sessions"}),d.jsx("div",{className:"recent-sessions-subtitle",style:{color:"#555",fontSize:"0.85rem",marginBottom:24,fontFamily:"Open Sans, sans-serif"},children:"View student progress on most recently assigned sessions"}),d.jsx("div",{className:"recent-sessions-list",style:{display:"flex",flexDirection:"column",gap:12},children:c.length>0?c.slice(0,3).map(($,L)=>{const pe=$.block||$.blockName||($.classroomBlock?$.classroomBlock:null),xe=new Date($.endedAt||$.createdAt).toLocaleDateString("en-GB",{day:"2-digit",month:"long"});return d.jsx("div",{className:`recent-session-card slide-in-from-right animate-on-mount-delay-${5+L}`,onClick:()=>i(`/sessions/${$.id}`),style:{cursor:"pointer",position:"relative"},children:d.jsxs("div",{className:"recent-session-card-main",children:[d.jsxs("div",{className:"recent-session-card-info",children:[d.jsx("div",{className:"recent-session-card-title",style:{fontWeight:700,fontSize:"1.18rem",color:"#222",marginBottom:4},children:$.name}),d.jsxs("div",{className:"recent-session-card-meta",style:{color:"#888",fontSize:"1.02rem",marginBottom:10},children:[d.jsx("span",{children:xe}),pe&&d.jsx("span",{className:"dot-separator",children:""}),pe&&d.jsx("span",{children:pe})]}),d.jsxs("div",{className:"recent-session-progress-bar",children:[d.jsx("div",{className:"recent-session-progress-bar-inner"}),d.jsx("div",{className:"recent-session-progress-dot"})]})]}),d.jsx("div",{className:"recent-session-card-menu",children:d.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[d.jsx("circle",{cx:"12",cy:"5",r:"1.5",fill:"#888"}),d.jsx("circle",{cx:"12",cy:"12",r:"1.5",fill:"#888"}),d.jsx("circle",{cx:"12",cy:"19",r:"1.5",fill:"#888"})]})})]})},$.id)}):d.jsx("div",{className:"recent-session-item no-sessions animate-on-mount-delay-5",style:{color:"#888",fontSize:"1.1rem",fontStyle:"italic",textAlign:"center",padding:"20px 0"},children:"No recent sessions"})})]})]})]}),d.jsxs("div",{style:{marginTop:30,marginBottom:20},children:[d.jsx("h2",{style:{fontSize:"2rem",fontWeight:700,color:"#222",marginBottom:20,fontFamily:"Inter, sans-serif",textAlign:"left"},children:"Quick Access "}),d.jsxs("div",{className:"dashboard-cards-row",style:{display:"flex",gap:24,paddingBottom:0},children:[d.jsxs("div",{className:"dashboard-card fade-in-scale animate-on-mount-delay-3",onClick:()=>window.open("https://sites.google.com/roversa.com/roversa-classroom/meet-roversa","_blank"),style:{flex:"1 1 320px",minWidth:250,maxWidth:250},children:[d.jsx("img",{src:Dk,alt:"Meet Roversa",className:"dashboard-card-bg"}),d.jsxs("div",{className:"dashboard-card-content",children:[d.jsx("div",{className:"dashboard-card-title",children:"Meet Roversa"}),d.jsx("div",{className:"dashboard-card-desc",children:"Get started and learn more about Roversa"})]})]}),d.jsxs("div",{className:"dashboard-card fade-in-scale animate-on-mount-delay-1",onClick:()=>window.open("https://sites.google.com/roversa.com/roversa-classroom/guides","_blank"),style:{flex:"1 1 320px",minWidth:250,maxWidth:250},children:[d.jsx("img",{src:jk,alt:"Guides",className:"dashboard-card-bg"}),d.jsxs("div",{className:"dashboard-card-content",children:[d.jsx("div",{className:"dashboard-card-title",children:"User Guides"}),d.jsx("div",{className:"dashboard-card-desc",children:"Find guides and technical documentation"})]})]}),d.jsxs("div",{className:"dashboard-card fade-in-scale animate-on-mount-delay-4",onClick:()=>window.open("https://sites.google.com/roversa.com/roversa-classroom/lessons","_blank"),style:{flex:"1 1 320px",minWidth:250,maxWidth:250},children:[d.jsx("img",{src:Ok,alt:"Lessons",className:"dashboard-card-bg"}),d.jsxs("div",{className:"dashboard-card-content",children:[d.jsx("div",{className:"dashboard-card-title",children:"Lesson Repository"}),d.jsx("div",{className:"dashboard-card-desc",children:"View all of Roversa's provided lessons"})]})]})]})]})]})]})]})}function Lk(){const i=Fs(),e=as(),[n,r]=C.useState(!1),[o,c]=C.useState(""),[f,p]=C.useState([]),[g,y]=C.useState([]),[w,S]=C.useState(null),[A,F]=C.useState([]),[G,q]=C.useState(""),[Q,ee]=C.useState(""),[$,L]=C.useState(!1),[pe,de]=C.useState(null),[xe,V]=C.useState(!1),[R,k]=C.useState(null),M=async re=>{if(!re)return;const Ae=Yt(Qt,"users",re.uid,"appdata","classrooms"),O=await jn(Ae);O.exists()?F(O.data().classrooms||[]):F([])},N=re=>{if(!re)return null;const Ae=A.find(O=>O.id===re);return Ae?Ae.name:null},z=async()=>{var K,be;const re=Dt.currentUser;if(!re)return;const Ae=Yt(Qt,"users",re.uid,"appdata","sessions"),O=await jn(Ae);let B=[];if(O.exists()&&(B=O.data().sessions||[]),B.find(we=>we.status==="active")){de({id:Date.now().toString(),name:o,classroomId:G||null,createdAt:new Date().toISOString(),createdBy:(K=Dt.currentUser)==null?void 0:K.email,status:"active"}),L(!0);return}j({id:Date.now().toString(),name:o,classroomId:G||null,createdAt:new Date().toISOString(),createdBy:(be=Dt.currentUser)==null?void 0:be.email,status:"active"})},j=async re=>{const Ae=Dt.currentUser,O=Yt(Qt,"users",Ae.uid,"appdata","sessions"),B=await jn(O);let oe=[];B.exists()&&(oe=B.data().sessions||[]),console.log("Sessions.jsx: sessions before:",oe),console.log("Sessions.jsx: newSession:",re),oe.push(re),await es(O,{sessions:oe}),console.log("Sessions.jsx: sessions after:",oe),p([re,...f]),r(!1),c(""),q(""),console.log("Sessions.jsx: navigating to sessionId:",re.id),i(`/sessions/${re.id}?name=${encodeURIComponent(re.name)}`)},qe=async re=>{if(!re)return;const Ae=Yt(Qt,"users",re.uid,"appdata","sessions"),O=await jn(Ae);if(O.exists()){const B=O.data(),oe=(B.sessions||[]).filter(we=>String(we.status)==="active"),K=(B.sessions||[]).filter(we=>String(we.status)==="paused"),be=(B.sessions||[]).filter(we=>String(we.status)==="ended");p([...oe,...K]),y(be)}else p([]),y([])},tt=re=>{k(re),V(!0)};C.useEffect(()=>{const re=Dt.onAuthStateChanged(Ae=>{Ae?S(Ae):i("/login")});return()=>re()},[i]),C.useEffect(()=>{const re=Dt.onAuthStateChanged(Ae=>{Ae?(S(Ae),qe(Ae),M(Ae)):i("/login")});return()=>re()},[i]),C.useEffect(()=>{qe(w)},[e.pathname,w]),C.useEffect(()=>{M(w)},[w]);const me=[...f.filter(re=>re.status==="active"),...f.filter(re=>re.status==="paused"),...g].filter(re=>{const Ae=re.name.toLowerCase().includes(Q.toLowerCase()),B=(re.classroomId&&N(re.classroomId)||"").toLowerCase().includes(Q.toLowerCase());return Ae||B});return d.jsxs("div",{className:"dashboard-container",children:[d.jsx(cu,{className:"slide-in-from-left"}),d.jsxs("div",{className:"main-content slide-in-from-bottom",children:[d.jsxs("div",{className:"top-bar slide-in-from-top",style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:24,marginBottom:32},children:[d.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[d.jsx("h1",{style:{margin:0,fontSize:"2rem",fontWeight:700,color:"#222"},children:"Sessions"}),d.jsx("span",{style:{fontSize:"0.9rem",color:"#666",fontWeight:"400",fontFamily:"Space Mono, monospace"},children:"Create a session for your classroom to monitor student progress and activity"})]}),d.jsxs("button",{className:"create-session-btn fade-in-scale animate-on-mount-delay-1",style:{display:"flex",alignItems:"center",gap:8},onClick:()=>r(!0),children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",width:"20",height:"20",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),"Create Session"]})]}),d.jsxs("div",{className:"sessions-content",children:[d.jsx("div",{style:{marginBottom:24,display:"flex",width:"45%"},children:d.jsxs("div",{style:{display:"flex",alignItems:"center",background:"#fff",borderRadius:8,border:"1.5px solid #e0e0e0",boxShadow:"0 1px 4px rgba(65,105,225,0.04)",width:"100%",maxWidth:"100%"},children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:20,height:20,color:"#666",marginLeft:14,marginRight:8},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})}),d.jsx("input",{type:"text",placeholder:"Search sessions by name or classroom...",value:Q,onChange:re=>ee(re.target.value),style:{padding:"10px 16px",border:"none",outline:"none",fontSize:"1rem",width:"100%",background:"transparent",color:"#222",borderRadius:8}})]})}),d.jsx("div",{className:"session-list",children:me.length>0?me.map((re,Ae)=>d.jsxs("div",{className:`session-list-item ${re.status}-session slide-in-from-right animate-on-mount-delay-${3+Ae}`,onClick:()=>i(`/sessions/${re.id}`),style:{position:"relative",overflow:"hidden"},children:[d.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%"},children:d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:18},children:[d.jsx("span",{className:`status-badge ${re.status}`,children:re.status==="active"?"Active":re.status==="paused"?"Paused":re.status==="ended"?"Ended":re.status}),d.jsx("span",{style:{fontWeight:600,fontSize:"1.15rem",color:"#222"},children:re.name}),d.jsxs("span",{className:"session-time",style:{color:"#888",fontSize:13},children:["Started: ",new Date(re.createdAt).toLocaleString()]}),re.classroomId&&d.jsx("span",{className:"classroom-badge",style:{background:"#e3eafe",color:"#4169e1",padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"500"},children:N(re.classroomId)})]})}),d.jsx("div",{className:"delete-area",onClick:O=>{O.stopPropagation(),tt(re.id)},title:"Delete session",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"trash-icon",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})})})]},re.id)):Q.trim()?d.jsxs("div",{className:"session-list-item session-card-empty animate-on-mount-delay-3",style:{textAlign:"center",padding:40},children:[d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"#b0b0b0",width:"40",height:"40",style:{marginBottom:12},children:[d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6l4 2"}),d.jsx("circle",{cx:"12",cy:"12",r:"9",stroke:"#b0b0b0",strokeWidth:"1.5",fill:"none"})]}),d.jsx("h3",{style:{color:"#888",fontWeight:500},children:"No Sessions Found"}),d.jsx("p",{style:{color:"#bbb"},children:"Try using a different query..."})]}):d.jsxs("div",{className:"session-list-item session-card-empty animate-on-mount-delay-3",style:{textAlign:"center",padding:40},children:[d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"#b0b0b0",width:"40",height:"40",style:{marginBottom:12},children:[d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6l4 2"}),d.jsx("circle",{cx:"12",cy:"12",r:"9",stroke:"#b0b0b0",strokeWidth:"1.5",fill:"none"})]}),d.jsx("h3",{style:{color:"#888",fontWeight:500},children:"No Sessions"}),d.jsx("p",{style:{color:"#bbb"},children:"Start a new session to begin"})]})})]})]}),n&&d.jsx("div",{className:"modal-overlay fade-in-scale",onClick:()=>{r(!1),c(""),q("")},children:d.jsxs("div",{className:"modal-content create-classroom-modal",onClick:re=>re.stopPropagation(),children:[d.jsxs("div",{className:"modal-header",children:[d.jsx("h2",{children:"Create New Session"}),d.jsx("button",{className:"modal-close",onClick:()=>{r(!1),c(""),q("")},children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"20",height:"20",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),d.jsxs("div",{className:"modal-body",children:[d.jsxs("div",{className:"form-group",children:[d.jsxs("label",{children:["Session Name ",d.jsx("span",{style:{color:"red"},children:"*"})]}),d.jsx("input",{type:"text",value:o,onChange:re=>c(re.target.value),placeholder:"Enter session name",onKeyPress:re=>re.key==="Enter"&&o.trim()&&z()})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Classroom (Optional)"}),d.jsxs("select",{value:G,onChange:re=>q(re.target.value),className:"form-control",children:[d.jsx("option",{value:"",children:"Select a Classroom"}),A.map(re=>d.jsx("option",{value:re.id,children:re.name},re.id))]})]})]}),d.jsxs("div",{className:"modal-footer",children:[d.jsx("button",{className:"btn-secondary",onClick:()=>{r(!1),c(""),q("")},children:"Cancel"}),d.jsx("button",{className:"btn-primary",style:{background:o.trim()?"#4169e1":"#e0e0e0",borderColor:o.trim()?"#4169e1":"#e0e0e0",color:o.trim()?"#fff":"#b0b0b0",cursor:o.trim()?"pointer":"not-allowed",fontFamily:"Space Mono, monospace"},onClick:z,disabled:!o.trim(),children:"Create"})]})]})}),$&&d.jsx("div",{className:"modal-overlay fade-in-scale",onClick:()=>{L(!1),de(null)},children:d.jsxs("div",{className:"modal-content",onClick:re=>re.stopPropagation(),children:[d.jsx("div",{className:"modal-header",children:d.jsx("h2",{children:"Active Session Detected"})}),d.jsx("div",{className:"modal-body",children:d.jsx("p",{children:"There is already an active running session. If you create this session, the active session will be paused. Proceed?"})}),d.jsxs("div",{className:"modal-footer",children:[d.jsx("button",{className:"btn-secondary",onClick:()=>{L(!1),de(null)},children:"Cancel"}),d.jsx("button",{className:"btn-primary",onClick:async()=>{const re=Dt.currentUser;if(!re)return;const Ae=Yt(Qt,"users",re.uid,"appdata","sessions"),O=await jn(Ae);if(O.exists()){const oe=O.data().sessions||[],K=oe.findIndex(be=>be.status==="active");K!==-1&&(oe[K].status="paused",await es(Ae,{sessions:oe}))}L(!1),pe&&(await j(pe),de(null)),await qe(re)},children:"Proceed"})]})]})}),xe&&d.jsx("div",{className:"modal-overlay fade-in-scale",onClick:()=>{V(!1),k(null)},children:d.jsxs("div",{className:"modal-content",onClick:re=>re.stopPropagation(),children:[d.jsx("div",{className:"modal-header",children:d.jsx("h2",{children:"Delete Session"})}),d.jsx("div",{className:"modal-body",children:d.jsx("p",{children:"Are you sure you want to delete this session? This action cannot be undone."})}),d.jsxs("div",{className:"modal-footer",children:[d.jsx("button",{className:"btn-secondary",onClick:()=>{V(!1),k(null)},children:"Cancel"}),d.jsx("button",{className:"btn-primary",style:{background:"#dc3545",borderColor:"#dc3545"},onClick:async()=>{const re=Dt.currentUser;if(!re)return;const Ae=Yt(Qt,"users",re.uid,"appdata","sessions"),O=await jn(Ae);if(O.exists()){const K=(O.data().sessions||[]).filter(be=>String(be.id)!==String(R));await es(Ae,{sessions:K})}V(!1),k(null),await qe(re)},children:"Delete"})]})]})})]})}let Cd=null,Vc=null;function Vk(i){Cd=i}function Pk(i){Vc=i}function Uk(){return Vc}async function vx(){try{Vc&&(await Vc.cancel(),Vc=null),Cd&&(await Cd.close(),Cd=null)}catch{}}const Dm="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAACWCAMAAAAL34HQAAAAIGNIUk0AAHomAACAhAAA+gAAAIDoAAB1MAAA6mAAADqYAAAXcJy6UTwAAAHjUExURQAAABfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRjAZr3t1DvKff////v+/ZzkvSfEcO/79HrbpxvBZ9v151nSkDLHd3csD88AAACTdFJOUwAraa3O4vfNq2gpGqnr6qdmFjCm+vieLQFPw7tGPdgyCZL++4EFMd3QJ3ljmn+Pl4J+Yl4q9SUK2tWIIh62NrysNSaiEvEHZ1GxBuM7b1Sjh8mw3/Ts8ta9upZkA/CqoGBVEAtMPALbXEnXyD6YDd75IGxTdYWE/D/u1BwIfHcZn5sswLLgOZHliR9Kc53G7ZlFG34nhJYAAAABYktHRJfmbhuvAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH6QcTFCU033vrdQAAAyR6VFh0UmF3IHByb2ZpbGUgdHlwZSB4bXAAAEiJnVZBkuMgDLzrFfsEkEDCz3FsuG3VHvf528JxjGeY1OwkFScxQmq1WsL09/cf+oVXjKWQbNKsWNCoog/Nljgoa1bTRavsbLU9Ho/GhvuLJr+TTXLaJaTdQhLYFl0oFVsNG7PYmmpOim84FMEmNmlSwyqbFVmtKDbq7sE0cvD/umk18TXyCECTtDkOWY+FlzmQPF0xbFTWzCkl/eAGa4RFd1Us4R1kxdZm/cXVYMVVGwyNm0RZ/I1fQRhXxnU/AvBOJgYuPLoV3j0C1juKsHK4kAAGqEHirIsF2C/IoQLZc52QFiMmEnFkbL79DjzFjhYOlD+j76GrRrqM3NkzTkUFm+4wA3swRFpcJZyMeSjZbgFWSt30XB6TySisxWtlXAPa5UrLxUPIBhtyMmSOqrlKuLPh6TKQ5QvF6e6OJTlvGRwhoQyhVbCMakhmSE1Sv6ps3Gbbrl1nCJrGyNB6Sq5jZ0s0CgQMvrxou4hAtoKS427AL4RGapKluA5grsAAgUvBO+BuwpYywTSEuVKmCR74PczglvtHcV3EcUUEWjw4Qt1C0H3rO1LRhygAkJdXaZzXpzt6bziWnttY/FEwvkIzzUx4GdQ2urwah8bO+f8OuxqMvuow9RJ/nguhy3S7ZoLb4QpBbhAWpo9PgFdXxXtXdaer48FnG7m7sHuvbZbedlTH2f9FrWqOs48c1zZkigLBA3lk8zwVbHjfxc5A67k7JxAO3O8IEOVN7ehWgxs6X5knNasb3evx87rR15MRkkyziX7OxPPAOMYg+Rw8tjwrJveKPd35wPUJWrzsUrNP0Op8ej/gmFoOjqbGX6t4Rgb9RMUzMug4J/0M/S4bnYwC/YTxUKCBjcPdOEyRVuegQZAVQxKChN7ADBef7GDJs/AZz8TQbo+IzsJhHJNpyqiYqS0wVn2w95dPB5xqOCUiBie+MgYOwD/AUvHHDteRCx95Jz6NFL7wNFLSpo1DH/P++LAdI1/2XoIP+OljAt+v1WiVmfzZ4nX708PLsTJ5gspHFmhfPh5+6B8dljH+sg7JVwAAAAFvck5UAc+id5oAAANnSURBVHja7duHUhRBEAbgEQ9MYEAPEEUliKgoiKAoKpgjinKcOecsJsw5Zx10zfqoclIWWLWhe6Z7dq5q/gfY+6rurw0zPUK4uLi4uLi4uLi4ZGuG5AxN5OZJVPJyhw0fMZKNNConvwAHGpzRY8aOY0AVjp+gbupPsqiY1lQysVTX1J9JkwlVZVNoUJkkphKhppVX0KmkrKyaTqGqnkGJyqRmpr5qFjUqk9m6qloOlZRztFAlTCop5+qw6rhUUtapq+r5VFLOU1U1cKqknK+makQ+krFpWqCiWtjMq5JykQprMbdKqV4t2i8M0UkuQbOW8qukzMeqlvlepvfjJ1JWRSOS1erP8j5/+UrpasOplvtfpdfzvG/ffxC6VqBYK4NZnvfzFx0L9WxclQxjeR5dxVavQbDWBlzkH4uwYusQrPVRLLqK1cJVG5qiWVQV2whnbQq6xn8sooq1gFntQBZJxTaDWVugLIqKdYBZW+Es/YptA7M6MSzdiiXArBSOpVexLjAr8BIBLL2KMbJ0KsbKUq8YM0u1YtwsxYrxs5QqZoKlUDEzLHTFDLGwFTPGwlXMIAtTMaMseMXMssAVM80CVsw8C1SxOFiAisXCiq5YTKyoisXGCq9YjKywisXJCqlYvKzAisXN6qvYb8fK6j/RysrbeYOw8nZq5cPHyke1nS82Vr4GWvnSbOUnhp0fZFZ+vlr5sW/l0oidC0lWLrtZuUhp5ZKunQvgVm4XWLm5YmQrKo1kaW3cpcGswFlhjm3O7WDWDgxLd1N4J5i1C87S30IvB7N2Q1kUAwfwgcpqIItkPAM+WbZnL4RFM8xSUAJmiX3RLKrRn/1wlTgQxaIblDqIYB0KmO6kHytLHUawRFsYi3IIrwijEkeCWbQji0dRrGPHA1jEA541KJUQJ/xZxOOw8iSSJU7R/r5/TmNV4owBVSV2drgvZ/lZ9XiVOHeeWwUfKBucwgu8qnS3Ektc5GVdUlMxn3u4rKqy9fiREFe4VFd1VEI09HCgehSPHg3k2nV6VVeZrkqIbvLH0I2b+iohbt1O6VMGkr6DOVAQlrv36FT3KU9XP3hIg3qEO6kSneKOx7qm5ipq1N88efpM3dT5nOpAtU9evHz1+g3ylvG29F37+w98JhcXFxcXFxcXFxcXl6zMH8sOCq3nAGlzAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDI1LTA3LTE5VDIwOjM1OjU5KzAwOjAwFCv9uwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyNS0wNy0xOVQyMDozNTo1OSswMDowMGV2RQcAAAAodEVYdGRhdGU6dGltZXN0YW1wADIwMjUtMDctMTlUMjA6Mzc6NTIrMDA6MDA0keAfAAAAFHRFWHRwZGY6QXV0aG9yAFNvbmEgVG9teTcubfgAAABddEVYdHhtcDpDcmVhdG9yVG9vbABDYW52YSAoUmVuZGVyZXIpIGRvYz1EQUdkWnB2eVJmayB1c2VyPVVBQzVUVWNHS244IGJyYW5kPUJBQzVUZkVnaExvIHRlbXBsYXRlPcsU5u0AAAAASUVORK5CYII=",Om="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAACWCAMAAAAL34HQAAAAIGNIUk0AAHomAACAhAAA+gAAAIDoAAB1MAAA6mAAADqYAAAXcJy6UTwAAALTUExURQAAAJmXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5+dnba1tcTDw9HR0d/e3uzs7Pn5+f///6KgoMPCwuPj4/39/ePi4sPBwaOiop2bm8XDw+rp6enp6ZuZmcLBwfX09PLy8r69vbu6uvDw8LOxsevr6+rq6rSzs9LR0czLy5yamt3c3NjX1+bl5aSiou7t7aqpqfT09Ofn59fW1tbV1cnIyMbFxbW0tP7+/qimpqmnp7a0tO3t7bm4uJqYmL++vry7u9zc3Pr6+vX19dPS0vPy8vz8/N/f39nY2KOhoc/Ozq+urqupqaakpO/v7/v7+728vLe2tubm5vPz86Gfn+jn59va2tXV1ff399TT06Wjo9rZ2aqoqN3d3d7d3ayqqqWkpMfFxeTk5MXExNDPz/n4+NHQ0Ao8SYwAAACTdFJOUwAraa3O4vfNq2gpGqnr6qdmFjCm+vieLQFPw7tGPdgyCZL++4EFMd3QJ3ljmn+Pl4J+Yl4q9SUK2tWIIh62NrysNSaiEvEHZ1GxBuM7b1Sjh8mw3/Ts8ta9upZkA/CqoGBVEAtMPALbXEnXyD6YDd75IGxTdYWE/D/u1BwIfHcZn5sswLLgOZHliR9Kc53G7ZlFG34nhJYAAAABYktHRJvv2FeEAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH6QcTFCco+UzVuAAAAyF6VFh0UmF3IHByb2ZpbGUgdHlwZSB4bXAAAEiJnVZBkuMwCLzzin2CBAjk5zi2dNuqPe7zt5Gd2J7xpGYnqdiOQdBAg0R/f/+hX/jkXCvJIt2rJ8sm9rDiysnYirlN1mRlb/3xeHR2vJ9M401xKbpK0tWTCnSrTaTVZ8fCIj5rK2q4w6AIFrFLl5ZmWbzK7NWw0NZwZplT/LfFmkvIKDwAjVoPHDJvgpc6kOymGDomc2FVtQ9mICMIw1R1xTfJjKXdx4ebQ4ubdSg6d8kyxRdPSRhXxnXdHPBKLo5chHevvIYHyAeKNHM6kAAGUoPA2SZP0J8QQwOyXU4Ii+ETgQQy9lh+Ba55oIUB48/oh+tmmQ6lMLb7aahgtxVqyB4UERY3Sc+MhStZLg5m0qH6FJ+DKSis50NylgHtdIQV5CFEgwVFHZGjasESHtmIcBnIyoHiae6KRSNvBTlCQAVEa8gyqiGFQTXRcTVZuN8tO1Y9XdCtjwKuq07DfMYCkwSKmlTgW/HWLDi2CoxJBSFW46iajEeIRETBFsETWAH1UPuM6eTmCJlu8IBfO5oSoeJnuE5wEW4cT+EgXV3Qdem7pKIPUQCkv75KE3ndzdF7xXPpuZ+LfyZMSOiOMzd5ObHtbPJoHDp3zv932NFg9FWHQVFu5kIaNF2OmRB6uIKQC3iC6RMT4NVV+dpVw+gcePBbzrk7sEevLa5vO2rgHP+yNfPAOUZOcNvA8RIWKDx7xAn6jb7LIwN9xB45AXFgfoWDLG9qR5caXNCF5D6ou7rRtR4/rxt9PRlBSb2b6M+Z+NwwtjFIMQe3JXvF5Fqx3VwM3JigNcourcQEbZHP6AdsU9OWo1vlr1l8lwz6CYvvkkHbPhl76HezMZJRwZ903hTolI3N3HmYIqyRgw5CNgxGEBJ8Q2a4xmRHliKKmPFMDO4Oj+gsbMZZ3bSgYm4+QdnswdFfMR2wq2GXyCqCW8HAAfgHslTj2BE8CuIjbuWnEkZynEaqLtY5jTEfx4dlG/myjhJ8wE8fA/h+rc5ahSnOFq/Xnw4vm+TmBFW2KNC+vB1+6B9daTIIi5FANAAAAAFvck5UAc+id5oAAAS1SURBVHja7dvnd5RFFMfxEQM2sKCBiKJSRFQURFAUC/aKooTYe+9iw95717sJbCZxAZEVBSMmGgIY47IrUTQkZAmoNBUxYsE/wax5kchhZ+6duXeVc+b7Pr/zOdk9z/OcZB6lQqFQKBQKhUKhrbVtumyb17UbkOrWdbvtd9hRjLRTl+49aKDO7bzLrrsJoHruvoe7qb38Xr15TQV79vE1tbfX3oyqvvvwoDLl7cuE2q9ffz4VwICB+3OoBh3Aico0+EB/1UHcqEwH+6qGSKgADvFCFQipAA71YQ2VUgEMdVcNk1MBHOaqGi6pAjjcTTWCeEumNvIIF9WRo2RVAEe5sI6WVjl9vUZ7PzDYyz+GzDpWXgXQnao6Lhcq6D+CyDo+JywYQ1OdkBsVwIkk1km5YpHujSfnE5YjxSWTp0RLdVul0SmTS4ojhB8+5VQC6zT0bFn5WzG9WbGp06ajB04nsM7ATb494x2dpZklSNYQvOrMkZjB+LuztKH33o9jVs7Cs87G7M2eoy3NmY3ZGY1mjbWPfVBhQ2X6cK596Rw061zr1kcYVKZK69Q4NOs8y1LVx1iV1p9UWcbOR7PGm4ci1XiV1tWWy1gemlVo3JlXQ1FpXTPPODcBzTLOzF9AU2m9YL5xkIUVX0hVab0wLs76lK7Sulaa9ZmLSus6WdbnCTdWoliStajUTdX2yJMUZJEuWP+uWo6VcldpnRJjfeHDikqxFvuotF4sw6r3+mVl/3V5sr70U2n9lQhriS9riQQr/rUvqzQuwPL8wmdKCbC8P8Nsd2wvlv9nqPU3/Kykv0rrJDuL4auV5YrqxarjYNWxs2o5WA3sLI9nmo6msrOWcrCWsrMaOViN7CwOldaB9Z+yWL7yUXYWywWiiZ21jIPFfzmt5GDx33y8n+Qz8d+qp3OwmtlZEPVXzQR+VtqfVSnAWu7PWi7Aglm+qi0/yvuyvB8Ea0VYXn9GypQSYUGTn6oJZFgtjn84bS/RIsTyuy8uAynWCo8n58YVYixocGelQY4VWemqWhkRZEHyWzeV4c/yeFZR9o3v3FjfZ18sQrNMZ4Wd7thpw+AFaNaFhpX6VXTVqnrD4EVo1sWGFShbTVWtLjPt9UOzLjHNwJq1NNXaNcY5/IHKQcYdiK+jqH6wHB7Bnyy79DLzEsxA3x0T0yxTPQrQLHW5ZQvmIv+x+KP12MgVeJW60jYGzQ0xOyr2U7N16CoC62rE6c71P1s+ycS69faVwmsILDXGPgiw4ReTqnUDZqMXRaWuxUwC/JrOcoKkJt2CW7iOxLr+BtwqwMbfqjf7MGO//7ER+9ODSSqlbsQOt1W1KFX+Z2vFpk0VrX+Vp5K2I0idu4nIUjcTxp27hapSt+ZANYB6drit2+RZw+gqdfsd0ir8gbLO9bxTVlU00Yml7pJl3e2mEn7v4R5X1f/19SOl7pVS3eejUmr4JAnUJMdXjzq6/wF+1YS+viqlJrLfhh58yF+l1MOPFPpTOip6lPJCganHHudTPcH5dvWTT/Ggnqa9qWKv97hnfE2jBnKj/unZ5553N41/geuF6i304ksvv/Iq8ZLxWp/Xx77xppwpFAqFQqFQKBQKhbbK/gaAcnwn+ebi2QAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyNS0wNy0xOVQyMDozODoxMiswMDowMGeYLAsAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjUtMDctMTlUMjA6Mzg6MTIrMDA6MDAWxZS3AAAAKHRFWHRkYXRlOnRpbWVzdGFtcAAyMDI1LTA3LTE5VDIwOjM5OjQwKzAwOjAwcW3BGwAAABR0RVh0cGRmOkF1dGhvcgBTb25hIFRvbXk3Lm34AAAAXXRFWHR4bXA6Q3JlYXRvclRvb2wAQ2FudmEgKFJlbmRlcmVyKSBkb2M9REFHZFpwdnlSZmsgdXNlcj1VQUM1VFVjR0tuOCBicmFuZD1CQUM1VGZFZ2hMbyB0ZW1wbGF0ZT3LFObtAAAAAElFTkSuQmCC",Bk="/dashboard/assets/forward-C0bK_Hny.png",zk="/dashboard/assets/right-C2_LwsZ_.png",Fk="/dashboard/assets/reverse-BkDOZ5rR.png",Hk="/dashboard/assets/left-bDZiDDEe.png",qk="/dashboard/assets/connectiongraphic-BSRRSLPm.png",xx="/dashboard/assets/robotgraphic-DpxCb7B5.png";function Gk({voltage:i,cardHeight:e=60}){let o=0;typeof i=="number"&&(o=Math.max(0,Math.min(1,(i-3.3)/(5-3.3))));const c=`${Math.round(o*100)}%`;let f="#4caf50";return o<.2?f="#f44336":o<.5&&(f="#ff9800"),d.jsxs("div",{style:{position:"absolute",bottom:0,left:0,right:0,height:"28px",background:"transparent",borderBottomLeftRadius:16,borderBottomRightRadius:16,overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center",padding:"0 12px"},children:[d.jsx("div",{style:{position:"absolute",bottom:0,left:0,right:0,height:"4px",background:f,width:`${o*100}%`,transition:"width 0.4s cubic-bezier(0.4,0,0.2,1)"}}),d.jsx("div",{style:{fontSize:"11px",fontWeight:"600",color:"#666",zIndex:1,textAlign:"center"},children:c+" Charged"})]})}function _c(i){if(!i)return"";const e=new Date(i);return isNaN(e.getTime())?i:e.toLocaleString(void 0,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}function Wk({lastBatteryTime:i,firstBatteryTime:e,lastProgramTime:n},r=new Date){return!i||(r-i)/1e3>5?"inactive_battery":!n&&e&&(r-e)/1e3>180||n&&(r-n)/1e3>180?"inactive":n&&(r-n)/1e3<=180?"active":"idle"}function Xk(i){if(!i)return 0;const e=i.trim().toLowerCase().split(/\s+/);let n=4e3;for(const r of e)r==="forward"||r==="reverse"?n+=1500:(r==="left"||r==="right")&&(n+=1e3);return n}const Vt=async i=>{if(!i)return[];const e=Yt(Qt,"users",i.uid,"appdata","sessions"),n=await jn(e);return n.exists()?n.data().sessions||[]:[]},kn=async(i,e)=>{if(!i)return;const n=Yt(Qt,"users",i.uid,"appdata","sessions");await es(n,{sessions:e})};function Zk(){var Qs,Pa,$s,No,Mr,Ss,Ua,Ba,Lr,Es,za,Js,Fa,Vr;const[i,e]=C.useState({}),n=Fs(),{sessionId:r}=HS(),o=as(),f=(_=>new URLSearchParams(o.search).get(_))("name")||`Session ${new Date().toLocaleDateString()}`,[p,g]=C.useState(!1),[y,w]=C.useState([]),[S,A]=C.useState({}),[F,G]=C.useState(null),[q,Q]=C.useState("active"),[ee,$]=C.useState(f),[L,pe]=C.useState(null),[de,xe]=C.useState(!1),[V,R]=C.useState(null),[k,M]=C.useState([]),[N,z]=C.useState(null),[j,qe]=C.useState(!1),[tt,ae]=C.useState(null),[me,re]=C.useState(new Set),[Ae,O]=C.useState(!1),[B,oe]=C.useState(""),[K,be]=C.useState(new Set),[we,Re]=C.useState(""),[nt,vt]=C.useState({connection:!1,lessonProgress:!1,robotsAndPrograms:!1,dataReceived:!0}),[Hn,qn]=C.useState(!1),[pn,Gt]=C.useState(null),[Fi,ls]=C.useState(null),[Ar,Ta]=C.useState(null);C.useRef();const[Ce,Ra]=C.useState(()=>Dt.currentUser);C.useEffect(()=>{const _=Dt.onAuthStateChanged(I=>{Ra(I)});return()=>_()},[]);const[Pt,yi]=C.useState("main"),[it,Tr]=C.useState(""),[Ut,Mn]=C.useState({bold:!1,italic:!1,underline:!1,color:"#000000"}),[pt,Et]=C.useState(!1),$e=C.useRef(null),ln=C.useRef(!1);C.useEffect(()=>(ln.current=!0,()=>{ln.current=!1}),[]),C.useEffect(()=>{const _=I=>{document.querySelectorAll(".dropdown").forEach(D=>{const ne=D.querySelector(".dropdown-menu");ne&&ne.style.display==="block"&&(D.contains(I.target)||(ne.style.display="none"))})};return document.addEventListener("click",_),()=>{document.removeEventListener("click",_)}},[]);const Z=async _=>{if(!_)return;const I=Yt(Qt,"users",_.uid,"appdata","classrooms"),U=await jn(I);U.exists()?M(U.data().classrooms||[]):M([])},ye=_=>{if(!_)return null;const I=k.find(U=>String(U.id)===String(_));return console.log("getClassroomById:",{classroomId:_,classrooms:k.length,found:I}),I},Se=_=>{vt(I=>({...I,[_]:!I[_]}))},Ne=async _=>{if(!L)return;_==="no-classroom"&&(_=null);const U=L.classroomId!==_;if(z(_?ye(_):null),U){xe(!0);const D={...L,classroomId:_||null};pe(D)}},ot=async()=>{if(!(!L||!Ce))try{const _={};Object.keys(S).forEach(D=>{_[D]={...S[D],assignedTo:null,assignedToType:null,assignedToName:null}}),A(_);const I=await Vt(Ce),U=I.findIndex(D=>String(D.id)===String(r));if(U!==-1){const D={...I[U],classroomId:(N==null?void 0:N.id)||null,robots:_};I[U]=D,await kn(Ce,I),pe(D);const ne={robots:_,receivedData:y,sessionName:ee,completedRobots:K,sessionNotes:it,classroomId:(N==null?void 0:N.id)||null};R(ne),z(null),xe(!1),console.log("Classroom change applied successfully")}}catch(_){console.error("Error applying classroom change:",_)}},ut=()=>{if(!V)return!1;const _=Object.keys(S),I=Object.keys(V.robots||{});if(_.length!==I.length)return!0;for(const ue of _)if(!V.robots[ue]||JSON.stringify(S[ue])!==JSON.stringify(V.robots[ue]))return!0;if(y.length!==(V.receivedData||[]).length||ee!==V.sessionName||it!==(V.sessionNotes||""))return!0;const U=Array.from(K),D=Array.from(V.completedRobots||[]);if(U.length!==D.length)return!0;for(const ue of U)if(!D.includes(ue))return!0;const ne=L==null?void 0:L.classroomId,ve=V.classroomId;return ne!==ve};C.useEffect(()=>{const _=ut();xe(_)},[S,y,ee,K,it,L]);const Be=C.useRef(!1);C.useEffect(()=>{!Be.current&&r&&Ce&&(Be.current=!0,Ii(!0),bs(null),Vt(Ce).then(_=>{const I=_.find(U=>String(U.id)===String(r));I?(pe(I),$(I.name),Q(I.status),A(I.robots||{}),w(I.receivedData||{}),be(new Set(I.completedRobots||[])),bt(I.lessonCompletions?Object.fromEntries(Object.entries(I.lessonCompletions).map(([U,D])=>[U,new Set(D)])):{}),Tr(I.sessionNotes||""),Ii(!1),R({robots:I.robots||{},receivedData:I.receivedData||{},sessionName:I.name,sessionNotes:I.sessionNotes||"",completedRobots:new Set(I.completedRobots||[]),lessonCompletions:I.lessonCompletions?Object.fromEntries(Object.entries(I.lessonCompletions).map(([U,D])=>[U,new Set(D)])):{},classroomId:I.classroomId||null})):(Ii(!1),bs("Session not found."),setTimeout(()=>n("/sessions"),2e3))}).catch(_=>{Ii(!1),bs("Error loading session.")}))},[r,Ce,n]),C.useEffect(()=>{const _=Dt.onAuthStateChanged(I=>{I?Z(I):M([])});return()=>_()},[]);const Gn=C.useCallback(async()=>{try{if(q==="active"&&L&&L.id&&Vt(Ce).then(_=>{const I={...L,name:ee,status:q,robots:S,receivedData:y,completedRobots:Array.from(K),lessonCompletions:Object.fromEntries(Object.entries(Xe).map(([D,ne])=>[D,Array.from(ne)])),sessionNotes:it,lastUpdated:new Date().toISOString()},U=_.findIndex(D=>String(D.id)===String(L.id));U>=0?_[U]=I:_.push(I),kn(Ce,_),R({robots:S,receivedData:y,sessionName:ee,sessionNotes:it,completedRobots:K,lessonCompletions:Object.fromEntries(Object.entries(Xe).map(([D,ne])=>[D,Array.from(ne)]))})}),p)try{await Hs()}catch(_){console.error("Error disconnecting micro:bit:",_)}}catch(_){console.error("Error in handleLeaveSession:",_)}},[q,L==null?void 0:L.id,ee,p]),[Hi,Rr]=C.useState(!1),Ca=async()=>{if(q==="active"){Rr(!0);try{const _=await navigator.serial.requestPort();await _.open({baudRate:115200}),Vk(_),g(!0);const I=new TextDecoderStream;_.readable.pipeTo(I.writable);const U=I.readable.getReader();Pk(U)}catch(_){console.error("Error connecting to micro:bit:",_),g(!1)}finally{Rr(!1)}}},Hs=async()=>{q==="active"&&L&&L.id&&await new Promise(_=>{Vt(Ce).then(I=>{const U={...L,name:ee,status:q,robots:S,receivedData:y,completedRobots:Array.from(K),lessonCompletions:Object.fromEntries(Object.entries(Xe).map(([ne,ve])=>[ne,Array.from(ve)])),sessionNotes:it,lastUpdated:new Date().toISOString()},D=I.findIndex(ne=>String(ne.id)===String(L.id));D>=0?I[D]=U:I.push(U),kn(Ce,I).then(_)})}),g(!1),await new Promise(_=>setTimeout(_,100)),await vx(),window.location.reload()},qi=_=>{if(_&&_.trim().length>0){const I=new Date().toISOString(),U=_.trim(),D=U.split(" ");if(D.length>=2){const ne=D[0];if(ne.length>10)return;if(D.length===2&&!isNaN(parseFloat(D[1]))){const ve=parseFloat(D[1]),ue={type:"battery",voltage:ve,timestamp:I};A(Ie=>{var Ct,Oe,u,v,x,T,W;return{...Ie,[ne]:{...Ie[ne],deviceId:ne,lastSeen:I,dataCount:(((Ct=Ie[ne])==null?void 0:Ct.dataCount)||0)+1,latestData:ue,rawData:U,firstSeen:((Oe=Ie[ne])==null?void 0:Oe.firstSeen)||I,status:((u=Ie[ne])==null?void 0:u.status)||"inactive",batteryData:{voltage:ve,timestamp:I},lastBatteryTime:I,firstBatteryTime:((v=Ie[ne])==null?void 0:v.firstBatteryTime)||I,buttonEvents:((x=Ie[ne])==null?void 0:x.buttonEvents)||[],assignedTo:((T=Ie[ne])==null?void 0:T.assignedTo)||null,assignmentTime:((W=Ie[ne])==null?void 0:W.assignmentTime)||null}}}),w(Ie=>[...Array.isArray(Ie)?Ie:[],{timestamp:I,data:U}]),setTimeout(()=>Ln(),100)}else if(D.length>=2&&["PLAY","TEST"].includes(D[1])){const ve=D[1],ue=D.slice(2).join(" "),Ie={type:"button_event",button:ve,program:ue||null,timestamp:I};A(Oe=>{var u,v,x,T,W,ie,_e,Ze,It,Ke,kt;return{...Oe,[ne]:{deviceId:ne,lastSeen:I,dataCount:(((u=Oe[ne])==null?void 0:u.dataCount)||0)+1,latestData:Ie,rawData:U,firstSeen:((v=Oe[ne])==null?void 0:v.firstSeen)||I,status:((x=Oe[ne])==null?void 0:x.status)||"inactive",batteryData:(T=Oe[ne])!=null&&T.batteryData||(ie=(W=Oe[ne])==null?void 0:W.latestData)!=null&&ie.voltage?{voltage:(Ze=(_e=Oe[ne])==null?void 0:_e.latestData)==null?void 0:Ze.voltage}:null,buttonEvents:[...((It=Oe[ne])==null?void 0:It.buttonEvents)||[],{button:ve,program:ue||null,timestamp:I}].slice(-10),assignedTo:((Ke=Oe[ne])==null?void 0:Ke.assignedTo)||null,assignmentTime:((kt=Oe[ne])==null?void 0:kt.assignmentTime)||null}}}),w(Oe=>[...Array.isArray(Oe)?Oe:[],{timestamp:I,data:U}]),setTimeout(()=>Ln(),100);const Ct=Xk(ue);e(Oe=>({...Oe,[ne]:Date.now()+Ct}))}else{const ve=Ir(U),ue=Ao(U);A(Ie=>{var Ct,Oe,u,v,x,T,W,ie;return{...Ie,[ve]:{...Ie[ve],deviceId:ve,lastSeen:I,dataCount:(((Ct=Ie[ve])==null?void 0:Ct.dataCount)||0)+1,latestData:ue,rawData:U,firstSeen:((Oe=Ie[ve])==null?void 0:Oe.firstSeen)||I,status:((u=Ie[ve])==null?void 0:u.status)||"inactive",batteryData:((v=Ie[ve])==null?void 0:v.batteryData)||null,lastBatteryTime:((x=Ie[ve])==null?void 0:x.lastBatteryTime)||I,buttonEvents:((T=Ie[ve])==null?void 0:T.buttonEvents)||[],assignedTo:((W=Ie[ve])==null?void 0:W.assignedTo)||null,assignmentTime:((ie=Ie[ve])==null?void 0:ie.assignmentTime)||null}}}),w(Ie=>[...Array.isArray(Ie)?Ie:[],{timestamp:I,data:U}]),setTimeout(()=>Ln(),100)}}}},Gi=()=>{window.confirm("Are you sure you want to clear all robot data and received data? This cannot be undone.")&&(w([]),A({}))},Ia=()=>{window.confirm("Are you sure you want to clear all robots? This cannot be undone.")&&(A({}),be(new Set),R(_=>({..._,robots:{},completedRobots:new Set})))},Wn=[{id:"lesson1",name:"I Feel"},{id:"lesson2",name:"Hungry, Hungry Robot"},{id:"lesson3",name:"Grid Challenges"},{id:"lesson4",name:"Duck Duck Robot"}],[vi,ai]=C.useState(()=>{let _=[];try{const U=localStorage.getItem("roversaLessons");if(U){const D=JSON.parse(U);Array.isArray(D)&&(_=D.map(ne=>({id:ne.id,name:ne.title||ne.name||"",link:ne.link||""})))}}catch{}const I=[...Wn];return _.forEach(U=>{I.some(D=>D.id===U.id)||I.push(U)}),[{id:"none",name:"None"},...I]}),[ze,cs]=C.useState("none"),[Xe,bt]=C.useState(()=>{const _={};return vi.forEach(I=>{_[I.id]=new Set}),_}),[nn,Wt]=C.useState("none"),[gn,ka]=C.useState([]);C.useEffect(()=>{bt(_=>{const I={..._};return vi.forEach(U=>{I[U.id]||(I[U.id]=new Set)}),Object.keys(I).forEach(U=>{vi.some(D=>D.id===U)||delete I[U]}),I})},[vi]),C.useEffect(()=>{const _=I=>{if(I.key==="roversaLessons"){let U=[];try{const ne=localStorage.getItem("roversaLessons");if(ne){const ve=JSON.parse(ne);Array.isArray(ve)&&(U=ve.map(ue=>({id:ue.id,name:ue.title||ue.name||"",link:ue.link||""})))}}catch{}const D=[...Wn];U.forEach(ne=>{D.some(ve=>ve.id===ne.id)||D.push(ne)}),ai([{id:"none",name:"None"},...D])}};return window.addEventListener("storage",_),()=>window.removeEventListener("storage",_)},[]);const Il=_=>{bt(I=>{const U={...I},D=new Set(U[ze]);if(D.has(_)?D.delete(_):D.add(_),U[ze]=D,L&&L.id){const ne=Object.fromEntries(Object.entries(U).map(([ue,Ie])=>[ue,Array.from(Ie)])),ve={...L,lessonCompletions:ne};Vt(Ce).then(async ue=>{const Ie=ue.findIndex(u=>String(u.id)===String(L.id));Ie>=0?ue[Ie]=ve:ue.push(ve),await kn(Ce,ue);const Oe=(await Vt(Ce)).find(u=>String(u.id)===String(L.id));Oe&&Oe.lessonCompletions&&bt(Object.fromEntries(Object.entries(Oe.lessonCompletions).map(([u,v])=>[u,new Set(v)])))})}return U})},xi=C.useCallback(()=>{if(!L){console.error("Cannot pause session: sessionData is null");return}const _={...L,name:ee,status:"paused",robots:S,receivedData:y,sessionNotes:it,pausedAt:new Date().toISOString()};Vt(Ce).then(I=>{const U=I.findIndex(D=>String(D.id)===String(L.id));U>=0?I[U]=_:I.push(_),kn(Ce,I),Q("paused"),pe(_),xe(!1),R({robots:S,receivedData:y,sessionName:ee,sessionNotes:it,completedRobots:K,lessonCompletions:Object.fromEntries(Object.entries(Xe).map(([D,ne])=>[D,Array.from(ne)]))})})},[L,ee,S,y,it]),[Eo,bi]=C.useState(!1),Wi=()=>{bi(!0)},Xi=()=>{if(p&&Hs(),!L){console.error("Cannot end session: sessionData is null");return}const _={...L,name:ee,status:"ended",robots:S,receivedData:y,completedRobots:Array.from(K),lessonCompletions:Object.fromEntries(Object.entries(Xe).map(([I,U])=>[I,Array.from(U)])),sessionNotes:it,endedAt:new Date().toISOString()};Vt(Ce).then(I=>{const U=I.findIndex(D=>String(D.id)===String(L.id));U>=0?I[U]=_:I.push(_),kn(Ce,I),Q("ended"),pe(_),xe(!1),R({robots:S,receivedData:y,sessionName:ee,sessionNotes:it,completedRobots:K,lessonCompletions:Object.fromEntries(Object.entries(Xe).map(([D,ne])=>[D,Array.from(ne)]))})})},oi=()=>{if(!L){console.error("Cannot resume session: sessionData is null");return}const _={...L,name:ee,status:"active",robots:S,receivedData:y,completedRobots:Array.from(K),lessonCompletions:Object.fromEntries(Object.entries(Xe).map(([I,U])=>[I,Array.from(U)])),sessionNotes:it,resumedAt:new Date().toISOString()};Vt(Ce).then(I=>{const U=I.findIndex(D=>String(D.id)===String(L.id));U>=0?I[U]=_:I.push(_),kn(Ce,I),Q("active"),pe(_),xe(!1),R({robots:S,receivedData:y,sessionName:ee,sessionNotes:it,completedRobots:K,lessonCompletions:Object.fromEntries(Object.entries(Xe).map(([D,ne])=>[D,Array.from(ne)]))})})},_i=()=>{Ri(!0)},En=_=>{Gt(_),qn(!0)},Mt=_=>y.filter(I=>{const U=I.data.split(" ");return U.length>=1?U[0]===_:Ir(I.data)===_}),qs=_=>{const I=S[_];return!I||!I.buttonEvents?[]:I.buttonEvents.filter(U=>U.program&&U.program.trim()).map(U=>({deviceId:_,robotName:I.assignedTo?I.assignedTo.name:_,button:U.button,program:U.program,timestamp:U.timestamp,robot:I})).sort((U,D)=>new Date(D.timestamp)-new Date(U.timestamp))},Cr=_=>{const I=qs(_);return I.length>0?I[0]:null},Kn=_=>y.filter(I=>{const U=I.data.split(" ");return U.length>=1?U[0]===_:Ir(I.data)===_});C.useEffect(()=>{const _=Dt.onAuthStateChanged(async I=>{if(!I)return;const U=Yt(Qt,"users",I.uid,"appdata","lessons"),D=await jn(U);let ne=[];D.exists()&&(ne=(D.data().lessons||[]).map(ue=>({id:ue.id,name:ue.title||ue.name||"",link:ue.link||""}))),ka(ne)});return()=>_()},[]),C.useEffect(()=>{if(gn)if(L&&L.classroomId){const _=ye(L.classroomId);if(_){const U=(_.lessons||[]).map(ne=>ne.id),D=gn.filter(ne=>U.includes(ne.id));ai([{id:"none",name:"None"},...D])}else{const I=[...Wn];gn.forEach(U=>{I.some(D=>D.id===U.id)||I.push(U)}),ai([{id:"none",name:"None"},...I])}}else{const _=[...Wn];gn.forEach(I=>{_.some(U=>U.id===I.id)||_.push(I)}),ai([{id:"none",name:"None"},..._])}},[L,k,gn]),C.useEffect(()=>{L&&pe(_=>({..._,robots:S,receivedData:y,completedRobots:Array.from(K)}))},[S,y,K,L==null?void 0:L.id]),C.useEffect(()=>{q==="active"&&ee&&Ln()},[ee]),C.useEffect(()=>{if(!p)return;let _=!1,I="";return(async()=>{await new Promise(ne=>setTimeout(ne,1e3));const D=Uk();for(;!_;)try{const{value:ne,done:ve}=await D.read();if(ve)break;if(ne){I+=ne;const ue=I.split(`
`);I=ue.pop();for(let Ie of ue)_||qi(Ie)}}catch(ne){console.error("Error reading serial data:",ne);break}})(),()=>{_=!0}},[p]),C.useEffect(()=>{const _=setInterval(()=>{const I=new Date;A(U=>{let D=!1;const ne={...U};return Object.keys(ne).forEach(ve=>{const ue=ne[ve];let Ie=ue.lastBatteryTime?new Date(ue.lastBatteryTime):null;Ie&&isNaN(Ie.getTime())&&(Ie=Date.parse(ue.lastBatteryTime)?new Date(Date.parse(ue.lastBatteryTime)):null);let Ct=ue.firstBatteryTime?new Date(ue.firstBatteryTime):null;Ct&&isNaN(Ct.getTime())&&(Ct=Date.parse(ue.batteryData.timestamp)?new Date(Date.parse(ue.batteryData.timestamp)):null);let Oe=null;if(ue.buttonEvents&&ue.buttonEvents.length>0)for(let v=ue.buttonEvents.length-1;v>=0;v--){const x=ue.buttonEvents[v];if(x&&x.timestamp){const T=new Date(x.timestamp);if(!isNaN(T.getTime())){Oe=T;break}}}console.log("Status check",ve,{lastBatteryTime:ue.lastBatteryTime,parsed:ue.lastBatteryTime?new Date(ue.lastBatteryTime):null,now:I,diff:ue.lastBatteryTime?(I-new Date(ue.lastBatteryTime))/1e3:null,firstBatteryTime:ue.firstBatteryTime,parsedFirst:ue.firstBatteryTime?new Date(ue.firstBatteryTime):null,lastProgramTime:ue.buttonEvents&&ue.buttonEvents.length>0?ue.buttonEvents[ue.buttonEvents.length-1].timestamp:null});const u=Wk({lastBatteryTime:Ie,firstBatteryTime:Ct,lastProgramTime:Oe},I);ue.status!==u&&(ne[ve]={...ue,status:u},D=!0)}),D?ne:U})},2e3);return()=>clearInterval(_)},[]),C.useEffect(()=>{const _=setInterval(()=>{q==="active"&&L&&Ln()},5e3);return()=>clearInterval(_)},[q,L==null?void 0:L.id]),C.useEffect(()=>{const _=I=>{q==="active"&&L&&L.id&&localStorage.setItem("unsavedSession",JSON.stringify({...L,name:ee,status:q,robots:S,receivedData:y,completedRobots:Array.from(K),lessonCompletions:Object.fromEntries(Object.entries(Xe).map(([U,D])=>[U,Array.from(D)])),sessionNotes:it,lastUpdated:new Date().toISOString()}))};return window.addEventListener("beforeunload",_),()=>{window.removeEventListener("beforeunload",_)}},[q,L,ee,S,y,K,Xe,it]),C.useEffect(()=>{ln.current&&q==="active"&&L&&L.id&&Vt(Ce).then(_=>{const I=_.findIndex(U=>String(U.id)===String(L.id));I>=0&&_[I].status==="active"&&(_[I]={...L,name:ee,status:q,robots:S,receivedData:y,completedRobots:Array.from(K),lessonCompletions:Object.fromEntries(Object.entries(Xe).map(([U,D])=>[U,Array.from(D)])),sessionNotes:it},kn(Ce,_))})},[ee,q,L==null?void 0:L.id]);const Ln=()=>{try{(q==="active"||q==="paused"||q==="ended")&&L&&L.id&&Vt(Ce).then(_=>{const I={...L,name:ee,status:q,robots:S,receivedData:y,sessionNotes:it,completedRobots:Array.from(K),lessonCompletions:Object.fromEntries(Object.entries(Xe).map(([D,ne])=>[D,Array.from(ne)])),lastUpdated:new Date().toISOString()},U=_.findIndex(D=>String(D.id)===String(L.id));U>=0?_[U]=I:_.push(I),kn(Ce,_),R({robots:S,receivedData:y,sessionName:ee,sessionNotes:it,completedRobots:K,lessonCompletions:Object.fromEntries(Object.entries(Xe).map(([D,ne])=>[D,Array.from(ne)]))})})}catch(_){console.error("Error in autosaveSession:",_)}},Ir=_=>{const I=/[0-9A-Fa-f]{8,}/g,U=_.match(I);if(U&&U.length>0)return U[0].toUpperCase();const D=/(?:device|id)[:\s]*([0-9A-Fa-f]+)/i,ne=_.match(D);if(ne)return ne[1].toUpperCase();const ve=/[0-9A-Fa-f]{4,}/g,ue=_.match(ve);return ue&&ue.length>0?ue[0].toUpperCase():`UNKNOWN_${_.slice(0,8).replace(/[^0-9A-Za-z]/g,"")}`},Ao=_=>{const I=_.split(/[,\s]+/),U={};return I.forEach((D,ne)=>{if(D.includes("=")){const[ve,ue]=D.split("=");U[ve.trim()]=ue.trim()}else if(D.includes(":")){const[ve,ue]=D.split(":");U[ve.trim()]=ue.trim()}else ne===0&&!D.match(/[0-9A-Fa-f]{4,}/)?U.command=D:isNaN(D)||(U[`value${ne}`]=parseFloat(D))}),U},wi=()=>{if(!B.trim())return S;const _=B.toLowerCase(),I={};return Object.entries(S).forEach(([U,D])=>{if(U.toLowerCase().includes(_)){I[U]=D;return}if(D.assignedTo){if(D.assignedTo.name.toLowerCase().includes(_)){I[U]=D;return}if(D.assignedTo.email&&D.assignedTo.email.toLowerCase().includes(_)){I[U]=D;return}if(D.assignedTo.studentCount&&D.assignedTo.studentCount.toString().includes(_)){I[U]=D;return}}}),I},To=async(_,I)=>{if(!(L!=null&&L.classroomId))return;const U=ye(L.classroomId);if(!U)return;const D=U.students.find(ve=>ve.id===I);if(!D)return;const ne={...S,[_]:{...S[_],assignedTo:{type:"student",id:D.id,name:D.name,email:D.email},assignmentTime:new Date().toISOString()}};if(A(ne),L&&L.id){const ve={...L,robots:ne};Vt(Ce).then(async ue=>{const Ie=ue.findIndex(u=>String(u.id)===String(L.id));Ie>=0?ue[Ie]=ve:ue.push(ve),await kn(Ce,ue);const Oe=(await Vt(Ce)).find(u=>String(u.id)===String(L.id));Oe&&A(Oe.robots||{})})}},us=async(_,I)=>{if(!(L!=null&&L.classroomId))return;const U=ye(L.classroomId);if(!U)return;const D=U.groups.find(ve=>ve.id===I);if(!D)return;const ne={...S,[_]:{...S[_],assignedTo:{type:"group",id:D.id,name:D.name,studentCount:D.students.length},assignmentTime:new Date().toISOString()}};if(A(ne),L&&L.id){const ve={...L,robots:ne};Vt(Ce).then(async ue=>{const Ie=ue.findIndex(u=>String(u.id)===String(L.id));Ie>=0?ue[Ie]=ve:ue.push(ve),await kn(Ce,ue);const Oe=(await Vt(Ce)).find(u=>String(u.id)===String(L.id));Oe&&A(Oe.robots||{})})}},li=_=>{const I={...S,[_]:{...S[_],assignedTo:null,assignmentTime:null}};A(I)},cn=_=>{const I=new Set(me);I.has(_)?I.delete(_):I.add(_),re(I)},Gs=()=>{me.size>0&&O(!0)},Na=_=>_&&_.length>12?_.slice(0,12)+"...":_,Si=async(_,I,U,D={})=>{const ne={...S};if(me.forEach(ve=>{ne[ve]={...ne[ve],assignedTo:{type:_,id:I,name:U,...D},assignmentTime:new Date().toISOString()}}),A(ne),re(new Set),setIsTagSelectionMode(!1),O(!1),L&&L.id){const ve={...L,robots:ne};Vt(Ce).then(async ue=>{const Ie=ue.findIndex(u=>String(u.id)===String(L.id));Ie>=0?ue[Ie]=ve:ue.push(ve),await kn(Ce,ue);const Oe=(await Vt(Ce)).find(u=>String(u.id)===String(L.id));Oe&&A(Oe.robots||{})})}},kr=_=>{if(!N)return;const I=N.students.find(U=>U.id===_);I&&Si("student",I.id,I.name,{email:I.email})},Nr=_=>{if(!N)return;const I=N.groups.find(U=>U.id===_);I&&Si("group",I.id,I.name,{studentCount:I.students.length})},ja=async()=>{const _={...S};if(me.forEach(I=>{_[I]={..._[I],assignedTo:null,assignmentTime:null}}),A(_),re(new Set),setIsTagSelectionMode(!1),O(!1),L&&L.id){const I={...L,robots:_};Vt(Ce).then(async U=>{const D=U.findIndex(ue=>String(ue.id)===String(L.id));D>=0?U[D]=I:U.push(I),await kn(Ce,U);const ve=(await Vt(Ce)).find(ue=>String(ue.id)===String(L.id));ve&&A(ve.robots||{})})}},Ws=_=>{if(!_)return null;const I=_.toLowerCase().split(" "),U=[];return I.forEach((D,ne)=>{let ve=null;switch(D.trim()){case"forward":ve=Bk;break;case"right":ve=zk;break;case"reverse":ve=Fk;break;case"left":ve=Hk;break;case"play":ve=Dm;break;case"test":ve=Om;break;default:U.push(d.jsx("span",{style:{display:"inline-block",padding:"4px 8px",background:"#f0f0f0",borderRadius:"4px",fontSize:"0.75rem",margin:"0 2px",fontFamily:"monospace",color:"#666"},children:D},ne));return}ve&&U.push(d.jsx("img",{src:ve,alt:D,style:{width:"24px",height:"24px",margin:"0 2px",verticalAlign:"middle",objectFit:"contain",scale:10}},ne))}),U},yn=async()=>{try{if((q==="active"||q==="paused"||q==="ended")&&L&&L.id){const _=await Vt(Ce),I={...L,name:ee,status:q,robots:S,receivedData:y,completedRobots:Array.from(K),lessonCompletions:Object.fromEntries(Object.entries(Xe).map(([D,ne])=>[D,Array.from(ne)])),sessionNotes:it,lastUpdated:new Date().toISOString()},U=_.findIndex(D=>String(D.id)===String(L.id));U>=0?_[U]=I:_.push(I),await kn(Ce,_),xe(!1),R({robots:S,receivedData:y,sessionName:ee,sessionNotes:it,completedRobots:K,lessonCompletions:Object.fromEntries(Object.entries(Xe).map(([D,ne])=>[D,Array.from(ne)]))})}}catch(_){console.error("Error saving session:",_)}},Da=d.jsx("div",{className:"robot-cards-container",style:{display:"flex",flexDirection:"column",gap:"32px",width:"100%",overflow:"visible",paddingTop:"32px"},children:(()=>{const I=(()=>{if(!p)return Object.entries(wi());const U=Object.entries(wi());return[...U.filter(([D,ne])=>ne.status==="inactive"),...U.filter(([D,ne])=>ne.status!=="inactive")]})();return I.length>0?I.map(([U,D],ne)=>{var Ie,Ct,Oe,u,v,x,T,W,ie,_e,Ze,It,Ke,kt;let ve=null;if(D.batteryData&&D.batteryData.voltage)ve=D.batteryData.voltage;else if(D.latestData){const ke=Object.keys(D.latestData);for(const _t of["vbat","battery","voltage"])if(D.latestData[_t]&&!isNaN(parseFloat(D.latestData[_t]))){ve=parseFloat(D.latestData[_t]);break}if(ve===null)for(const _t of ke){const gt=parseFloat(D.latestData[_t]);if(!isNaN(gt)&&gt>=3&&gt<=4.3){ve=gt;break}}}const ue=i[D.deviceId]&&i[D.deviceId]>Date.now();return d.jsxs("div",{className:`robot-card ${F===D.deviceId?"selected":""} ${me.has(D.deviceId)?"tag-selected":""} ${(Ie=Xe[ze])!=null&&Ie.has(D.deviceId)?"completed":""} fade-in-scale animate-on-mount-delay-${Math.min(8+ne,12)}`,onClick:()=>En(D.deviceId),style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"flex-start",padding:"20px 24px 36px 24px",background:Fi===D.deviceId?"#e3eafe":(Ct=Xe[ze])!=null&&Ct.has(D.deviceId)?"#f8f9ff":"#fff",borderRadius:"16px",boxShadow:(Oe=Xe[ze])!=null&&Oe.has(D.deviceId)?"0 4px 20px rgba(65, 105, 225, 0.15)":"0 2px 12px rgba(65, 105, 225, 0.08)",border:me.has(D.deviceId)?"2px solid #4169e1":"2px solid #e0e0e0",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",cursor:"pointer",position:"relative",overflow:"visible",gap:"18px",minHeight:"180px",height:"180px"},children:[d.jsx("div",{style:{position:"absolute",top:0,left:-2,zIndex:20,background:p?ue?"#ffc107":D.status==="inactive_battery"?"#b0b0b0":D.status==="active"?"#28a745":D.status==="idle"?"#333":"#dc3545":"#b0b0b0",color:"#fff",fontWeight:700,fontSize:"0.85rem",padding:"7px 22px 7px 18px",borderTopLeftRadius:"16px",borderTopRightRadius:"16px",borderBottomLeftRadius:"16px",borderBottomRightRadius:"16px",boxShadow:"0 2px 8px rgba(0,0,0,0.08)",letterSpacing:"0.02em",minWidth:"70px",textAlign:"center",border:"2px solid #e1e1e0",transform:"translateY(-60%)",pointerEvents:"none"},children:p?ue?"Running program":D.status==="inactive_battery"?"Powered off":D.status==="active"?"Active":D.status==="idle"?"Idle":"Inactive":"Waiting for connection..."}),d.jsx("div",{style:{position:"absolute",top:"20px",right:"12px",zIndex:10},onClick:ke=>ke.stopPropagation(),children:d.jsxs("div",{className:"dropdown",children:[d.jsx("button",{className:"dropdown-toggle",onClick:ke=>{ke.stopPropagation();const gt=ke.target.closest(".dropdown").querySelector(".dropdown-menu");gt.style.display=gt.style.display==="block"?"none":"block"},style:{background:"#f0f0f0",border:"none",cursor:"pointer",padding:"4px",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",color:"#333",transition:"all 0.2s ease",outline:"none"},children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"16px",height:"16px"},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM12.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM18.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z"})})}),d.jsx("div",{className:"dropdown-menu",style:{display:"none",position:"absolute",top:"100%",right:"0",background:"#fff",border:"1px solid #e0e0e0",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",zIndex:1e3,minWidth:"140px",padding:"4px 0"},children:d.jsxs("button",{onClick:ke=>{if(ke.stopPropagation(),window.confirm(`Are you sure you want to delete robot ${D.deviceId}? This cannot be undone.`)){const _t={...S};delete _t[D.deviceId],A(_t),K.has(D.deviceId)&&be(gt=>{const Tn=new Set(gt);return Tn.delete(D.deviceId),Tn})}ke.target.closest(".dropdown-menu").style.display="none"},style:{width:"100%",padding:"8px 12px",background:"none",border:"none",cursor:"pointer",fontSize:"12px",fontWeight:"400",color:"#dc3545",textAlign:"left",display:"flex",alignItems:"center",gap:"8px",transition:"background-color 0.2s",outline:"none"},onMouseEnter:ke=>ke.target.style.backgroundColor="#fff5f5",onMouseLeave:ke=>ke.target.style.backgroundColor="transparent",children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"14px",height:"14px"},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})}),"Delete Robot"]})})]})}),d.jsxs("div",{style:{display:"flex",flexDirection:"row",alignItems:"flex-start",flex:1,minWidth:0,gap:"18px"},children:[d.jsx("div",{onClick:ke=>{ke.stopPropagation(),cn(D.deviceId)},style:{marginRight:"0",zIndex:5,display:"flex",alignItems:"center",justifyContent:"center",alignSelf:"center",padding:"6px",borderRadius:"6px",cursor:"pointer",minWidth:"25px",minHeight:"25px",boxSizing:"border-box",userSelect:"none",width:"28px",height:"28px",border:me.has(D.deviceId)?"2px solid #4169e1":"2px solid #e0e0e0",backgroundColor:me.has(D.deviceId)?"#4169e1":"transparent",transition:"all 0.2s ease"},children:me.has(D.deviceId)&&d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:3.5,stroke:"currentColor",style:{width:25,height:25,color:"#fff"},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"})})}),d.jsx("img",{src:xx,alt:"Robot",style:{width:"60px",height:"70px",marginRight:"0",opacity:(u=Xe[ze])!=null&&u.has(D.deviceId)?"0.8":"1",transition:"opacity 0.3s ease"}}),d.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:"12px",minWidth:0},children:[d.jsxs("div",{style:{display:"flex",alignItems:"flex-end",gap:"6px"},children:[d.jsx("span",{className:"robot-card-device-id",onClick:ke=>ke.stopPropagation(),style:{fontWeight:(v=Xe[ze])!=null&&v.has(D.deviceId)?"600":"500",color:(x=Xe[ze])!=null&&x.has(D.deviceId)?"#4169e1":"#222",transition:"all 0.3s ease",minHeight:"22px",display:"inline-flex",alignItems:"center"},children:D.deviceId}),D.assignedTo?d.jsxs("span",{style:{minWidth:"120px",minHeight:"22px",maxWidth:"200px",display:"inline-flex",alignItems:"center",background:(T=Xe[ze])!=null&&T.has(D.deviceId)?"#e3eafe":"#f8f9fa",borderRadius:"12px",fontSize:"12px",color:(W=Xe[ze])!=null&&W.has(D.deviceId)?"#4169e1":"#666",fontWeight:"500",border:me.has(D.deviceId)?"1px solid #4169e1":"1px solid #e0e0e0",boxSizing:"border-box",boxShadow:(ie=Xe[ze])!=null&&ie.has(D.deviceId)?"0 2px 8px rgba(39, 75, 181, 0.08)":"0 1px 4px rgba(65, 105, 225, 0.08)",padding:"3px 10px",cursor:"default",gap:"8px"},children:[d.jsx("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",flex:1},children:D.assignedTo.type==="student"?`${Na(D.assignedTo.name)}`:`${Na(D.assignedTo.name)} (${D.assignedTo.studentCount} students)`}),d.jsx("button",{onClick:ke=>{ke.stopPropagation(),li(D.deviceId)},title:"Remove tag",style:{background:"none",border:"none",color:(_e=Xe[ze])!=null&&_e.has(D.deviceId)?"#4169e1":"#888",fontWeight:"bold",fontSize:"14px",cursor:"pointer",padding:0,lineHeight:1,display:"flex",alignItems:"center",opacity:.6,transition:"opacity 0.2s"},className:"remove-tag-x",onMouseEnter:ke=>ke.target.style.opacity=1,onMouseLeave:ke=>ke.target.style.opacity=.6,children:""})]}):d.jsx("span",{style:{minWidth:"120px",minHeight:"22px",maxWidth:"200px",display:"inline-flex",alignItems:"center",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",background:"transparent",borderRadius:"12px",fontSize:"12px",border:"1px solid transparent",boxSizing:"border-box",boxShadow:"none",padding:"3px 10px",cursor:"default"}})]}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",marginTop:"0",flexWrap:"wrap",rowGap:"8px",paddingLeft:"0px",marginLeft:"-6px"},children:[ze!=="none"&&d.jsxs("button",{onClick:ke=>{ke.stopPropagation(),Il(D.deviceId)},style:{padding:"6px 12px",background:(Ze=Xe[ze])!=null&&Ze.has(D.deviceId)?"#274bb5":"#4169e1",border:"none",borderRadius:"6px",cursor:"pointer",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",display:"flex",alignItems:"center",gap:"6px",fontSize:"12px",fontWeight:"500",color:"#fff",height:"32px",minWidth:"100px",boxShadow:(It=Xe[ze])!=null&&It.has(D.deviceId)?"0 2px 8px rgba(39, 75, 181, 0.3)":"0 1px 4px rgba(65, 105, 225, 0.2)"},title:(Ke=Xe[ze])!=null&&Ke.has(D.deviceId)?"Mark as incomplete":"Mark as done",children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"14px",height:"14px"},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),(kt=Xe[ze])!=null&&kt.has(D.deviceId)?"Undo Done":"Mark as Done"]}),L&&L.classroomId&&(ye(L.classroomId)?d.jsxs("button",{onClick:ke=>{ke.stopPropagation(),ae(D.deviceId),qe(!0)},style:{padding:"6px 12px",background:"#a259e1",border:"none",borderRadius:"6px",cursor:"pointer",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",display:"flex",alignItems:"center",gap:"8px",fontSize:"12px",fontWeight:"500",color:"#fff",height:"32px",minWidth:"100px",boxShadow:"0 1px 4px rgba(162, 89, 225, 0.2)"},title:"Edit robot tags",children:[d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"14px",height:"14px"},children:[d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.568 3H5.25A2.25 2.25 0 0 0 3 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.732.699 2.431 0l4.318-4.318c.699-.699.699-1.732 0-2.431L9.568 3Z"}),d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 6h.008v.008H6V6Z"})]}),"Assign"]}):d.jsxs("button",{disabled:!0,style:{padding:"6px 12px",background:"#e0e0e0",border:"none",borderRadius:"6px",cursor:"not-allowed",display:"flex",alignItems:"center",gap:"8px",fontSize:"12px",fontWeight:"500",color:"#888",height:"32px",minWidth:"100px",boxShadow:"none"},title:"Classroom data not loaded",children:[d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"14px",height:"14px"},children:[d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.568 3H5.25A2.25 2.25 0 0 0 3 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.732.699 2.431 0l4.318-4.318c.699-.699.699-1.732 0-2.431L9.568 3Z"}),d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 6h.008v.008H6V6Z"})]}),"Assign (classroom unavailable)"]}))]})]})]}),d.jsx("div",{style:{minWidth:0,display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"flex-end",marginRight:"200px"},children:(()=>{const ke=Cr(D.deviceId);return ke?d.jsxs("div",{style:{background:"#f8f9fa",borderRadius:"8px",padding:"12px",border:"1px solid #e0e0e0",width:"250px",marginBottom:"0"},children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[d.jsx("span",{style:{fontSize:"0.75rem",fontWeight:"600",color:"#4169e1"},children:"Latest Program"}),ke.button==="PLAY"?d.jsx("img",{src:Dm,alt:"Play",style:{width:20,height:20,verticalAlign:"middle"}}):ke.button==="TEST"?d.jsx("img",{src:Om,alt:"Test",style:{width:20,height:20,verticalAlign:"middle"}}):d.jsx("span",{style:{fontSize:"0.65rem",color:"#666",background:"#e3eafe",padding:"1px 4px",borderRadius:"3px",fontWeight:"500"},children:ke.button})]}),d.jsx("span",{style:{fontSize:"0.65rem",color:"#888"},children:_c(ke.timestamp)})]}),d.jsx("div",{style:{background:"#fff",padding:"6px 8px",borderRadius:"4px",border:"1px solid #e0e0e0",fontFamily:"monospace",fontSize:"0.75rem",color:"#333",wordBreak:"break-word",marginBottom:"8px",maxHeight:"60px",overflow:"hidden",display:"flex",flexWrap:"nowrap",gap:"4px",alignItems:"center"},children:Ws(ke.program)}),d.jsx("div",{style:{display:"flex",gap:"6px",justifyContent:"flex-end"},children:d.jsx("button",{onClick:_t=>{_t.stopPropagation(),fs(ke),Ks(ke.program),Yn(!0)},style:{padding:"3px 6px",background:"#4169e1",color:"white",border:"none",borderRadius:"3px",cursor:"pointer",fontSize:"0.65rem",fontWeight:"500",fontFamily:"var(--font-body)",transition:"background 0.2s ease"},onMouseEnter:_t=>_t.target.style.background="#274bb5",onMouseLeave:_t=>_t.target.style.background="#4169e1",children:"View Program"})})]}):d.jsx("div",{style:{background:"transparent",borderRadius:"8px",padding:"12px",border:"1px solid transparent",width:"250px",minHeight:"110px",marginBottom:"0"}})})()}),d.jsx("div",{style:{position:"absolute",left:0,right:0,bottom:0},children:d.jsx(Gk,{voltage:ve,cardHeight:60})})]},D.deviceId)}):B.trim()?d.jsxs("div",{className:"fade-in-scale animate-on-mount-delay-8",style:{textAlign:"center",padding:"40px",color:"#666",background:"#fff",borderRadius:"12px",border:"2px dashed #e0e0e0"},children:['No robots found matching "',B,'". Try a different search term.']}):d.jsx("div",{className:"fade-in-scale animate-on-mount-delay-8",style:{textAlign:"center",padding:"40px",color:"#666",background:"#fff",borderRadius:"12px",border:"2px dashed #e0e0e0"},children:"No robots detected yet. Connect to micro:bit and send some data."})})()}),Ro=we.trim()?y.filter(_=>_.data.toLowerCase().includes(we.toLowerCase())||_.timestamp.toLowerCase().includes(we.toLowerCase())):y,jr=d.jsx("div",{className:"data-container fade-in-scale animate-on-mount-delay-5",style:{marginTop:16},children:Ro.length>0?Ro.map((_,I)=>d.jsxs("div",{className:"data-item",children:[d.jsx("span",{className:"timestamp",children:_c(_.timestamp)}),d.jsx("span",{className:"data",children:_.data})]},I)):d.jsxs("div",{className:"data-item",children:["No data received",we?" matching your search":""," yet"]})}),Oa=F&&d.jsxs("div",{className:"session-info fade-in-scale animate-on-mount-delay-4",children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:20},children:[d.jsxs("h2",{children:["Robot Data: ",F]}),d.jsx("button",{className:"clear-data-btn fade-in-scale animate-on-mount-delay-5",onClick:()=>G(null),children:" Back to Robots"})]}),d.jsx("div",{className:"data-container fade-in-scale animate-on-mount-delay-6",style:{marginTop:16},children:Mt(F).length>0?Mt(F).map((_,I)=>d.jsxs("div",{className:"data-item",children:[d.jsx("span",{className:"timestamp",children:_c(_.timestamp)}),d.jsx("span",{className:"data",children:_.data})]},I)):d.jsx("div",{className:"data-item",children:"No data received from this robot yet"})})]}),Xs=Array.from(me).every(_=>K.has(_)),[ds,Xt]=C.useState(""),[vn,Zs]=C.useState("");C.useEffect(()=>(Hi?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[Hi]);const[hs,Yn]=C.useState(!1),[Qe,fs]=C.useState(null),[He,Ei]=C.useState({x:2,y:2,dir:0,step:0,gridSize:5,offsetX:0,offsetY:0,robotScale:1,history:[{x:2,y:2,dir:0}],playing:!1}),ms=C.useRef(null),Ai=_=>_?_.trim().split(/\s+/).map(I=>I.toLowerCase()):[],Ks=_=>{Ei({x:2,y:2,dir:0,step:0,gridSize:5,offsetX:0,offsetY:0,robotScale:1,history:[{x:2,y:2,dir:0}],playing:!1})},Co=(_,I)=>{let{x:U,y:D,dir:ne,gridSize:ve,offsetX:ue,offsetY:Ie,robotScale:Ct}=_,Oe=ne,u=U,v=D,x=ve,T=ue,W=Ie,ie=Ct;I==="forward"?(ne===0&&(v-=1),ne===1&&(u+=1),ne===2&&(v+=1),ne===3&&(u-=1)):I==="reverse"?(ne===0&&(v+=1),ne===1&&(u-=1),ne===2&&(v-=1),ne===3&&(u+=1)):I==="right"?Oe=(ne+1)%4:I==="left"&&(Oe=(ne+3)%4);const _e=-ue,Ze=ve-1-ue,It=-Ie,Ke=ve-1-Ie;let kt=!1;if((u<_e||u>Ze||v<It||v>Ke)&&(kt=!0),kt){x=ve+2;let ke=u,_t=u,gt=v,Tn=v;for(const er of _.history)ke=Math.min(ke,er.x),_t=Math.max(_t,er.x),gt=Math.min(gt,er.y),Tn=Math.max(Tn,er.y);T=Math.floor((x-1)/2)-Math.floor((_t+ke)/2),W=Math.floor((x-1)/2)-Math.floor((Tn+gt)/2),x/Math.max(_.gridSize,5)>1&&(ie=Ct*.85)}return{..._,x:u,y:v,dir:Oe,gridSize:x,offsetX:T,offsetY:W,robotScale:ie,history:[..._.history,{x:u,y:v,dir:Oe}]}},Ma=(_=!0)=>{if(!Qe)return;const I=Ai(Qe.program);Ei(U=>{let D=U.step;if(_&&D<I.length)return{...Co(U,I[D]),step:D+1,playing:U.playing};if(!_&&D>0){let ne={x:2,y:2,dir:0,step:0,gridSize:5,offsetX:0,offsetY:0,robotScale:1,history:[{x:2,y:2,dir:0}],playing:!1};for(let ve=0;ve<D-1;++ve)ne=Co(ne,I[ve]),ne.step=ve+1;return{...ne,playing:!1}}return U})},Dr=()=>{Ei(_=>({..._,playing:!_.playing}))};C.useEffect(()=>{if(He.playing&&Qe){if(He.step>=Ai(Qe.program).length){Ei(_=>({..._,playing:!1}));return}ms.current=setTimeout(()=>{Ma(!0)},1500)}else ms.current&&clearTimeout(ms.current);return()=>{ms.current&&clearTimeout(ms.current)}},[He.playing,He.step,Qe]);const[,Zi]=C.useState(0);C.useEffect(()=>{const _=setInterval(()=>{Zi(I=>I+1)},500);return()=>clearInterval(_)},[]);const[Qn,$n]=C.useState(!1),[ps,gs]=C.useState(!1),Ti=()=>{Vt(Ce).then(_=>{if(_.find(U=>U.status==="active"&&String(U.id)!==String(L==null?void 0:L.id))){gs(!0),$n(!0);return}oi()})},[Io,Ri]=C.useState(!1),[Jn,An]=C.useState(!1),ys=C.useRef(Date.now()),un=C.useRef(null),Ki=()=>{ys.current=Date.now(),Jn&&An(!1)};C.useEffect(()=>{Ki()},[S,y,K,ee]),C.useEffect(()=>{if(q!=="active")return;const _=()=>{Ki()};return document.addEventListener("click",_),document.addEventListener("keydown",_),document.addEventListener("mousemove",_),document.addEventListener("scroll",_),()=>{document.removeEventListener("click",_),document.removeEventListener("keydown",_),document.removeEventListener("mousemove",_),document.removeEventListener("scroll",_)}},[q]),C.useEffect(()=>{if(q!=="active"){console.log("Session not active, clearing inactivity timer"),un.current&&clearTimeout(un.current);return}console.log("Starting inactivity timer for active session"),un.current&&clearTimeout(un.current);const _=()=>{const U=Date.now()-ys.current;console.log("Checking inactivity, elapsed:",U,"ms"),U>=10*60*1e3?(console.log("Inactivity detected, pausing session"),xi(),An(!0)):(console.log("Still active, checking again in 1 minute"),un.current=setTimeout(_,60*1e3))};return un.current=setTimeout(_,60*1e3),()=>{un.current&&(console.log("Clearing inactivity timer"),clearTimeout(un.current))}},[q,xi]),C.useEffect(()=>{q!=="paused"&&An(!1)},[q]);const[Yi,vs]=C.useState(!1),$t={lesson1:"https://docs.google.com/document/d/15hDBUGjhOFpLSPmmkFJMXMcShzhLqdaBW9WTI3UOFXs/edit?tab=t.0#heading=h.a6lqxihc6dhl",lesson2:"https://docs.google.com/document/d/13E9Lz6l0eP4ZT-kJBxJST35SX4427fOw6XLlfcZpwm0/edit?tab=t.0#heading=h.a6lqxihc6dhl",lesson3:"https://docs.google.com/document/d/1qHoE0t6diltiHJbYG4hKiGGIJOQFLw3rRNMmLgWc-1E/edit?tab=t.0#heading=h.a6lqxihc6dhl",lesson4:"https://docs.google.com/document/d/14jte14tL0Txgm1CdY9kZsbov0lZDoqv7UyhECFW8ioI/edit?tab=t.0#heading=h.a6lqxihc6dhl"},[Ci,xs]=C.useState(!1),[Bt,ft]=C.useState(null);C.useEffect(()=>{const _=I=>{q==="active"&&L&&L.id&&localStorage.setItem("unsavedSession",JSON.stringify({...L,name:ee,status:q,robots:S,receivedData:y,completedRobots:Array.from(K),lessonCompletions:Object.fromEntries(Object.entries(Xe).map(([U,D])=>[U,Array.from(D)])),sessionNotes:it,lastUpdated:new Date().toISOString()}))};return window.addEventListener("beforeunload",_),()=>{window.removeEventListener("beforeunload",_)}},[q,L,ee,S,y,K,Xe,it]),C.useEffect(()=>()=>{vx(),g(!1)},[]);const[La,Ii]=C.useState(!1),[kl,bs]=C.useState(null);C.useEffect(()=>{const _=localStorage.getItem("unsavedSession");if(_&&Ce){const I=JSON.parse(_);Vt(Ce).then(U=>{const D=U.findIndex(ne=>String(ne.id)===String(I.id));D>=0?U[D]=I:U.push(I),kn(Ce,U),localStorage.removeItem("unsavedSession")})}},[Ce]);const _s=_=>{if(!$e.current)return;const U=window.getSelection();if(!(!U.rangeCount||U.getRangeAt(0).collapsed))switch(Mn(D=>({...D,[_]:!D[_]})),_){case"bold":document.execCommand("bold",!1,null);break;case"italic":document.execCommand("italic",!1,null);break;case"underline":document.execCommand("underline",!1,null);break;default:return}},ki=_=>{if(!$e.current)return;const U=window.getSelection();!U.rangeCount||U.getRangeAt(0).collapsed||(Mn(D=>({...D,color:_})),document.execCommand("foreColor",!1,_))},Ys=()=>{if(!$e.current)return;const I=window.getSelection(),U=I.rangeCount>0&&!I.getRangeAt(0).collapsed;Et(U),U&&Mn({bold:document.queryCommandState("bold"),italic:document.queryCommandState("italic"),underline:document.queryCommandState("underline"),color:Ut.color})},ei=()=>{},ko=()=>{},Nl=()=>{const _=window.getSelection(),I=_&&_.toString().length>0;Et(I),Mn(I?{bold:document.queryCommandState("bold"),italic:document.queryCommandState("italic"),underline:document.queryCommandState("underline"),color:Ut.color}:{bold:!1,italic:!1,underline:!1,color:Ut.color})},ws=()=>{const _=window.getSelection(),I=_&&_.toString().length>0;Et(I),Mn(I?{bold:document.queryCommandState("bold"),italic:document.queryCommandState("italic"),underline:document.queryCommandState("underline"),color:Ut.color}:{bold:!1,italic:!1,underline:!1,color:Ut.color})};C.useEffect(()=>(document.addEventListener("selectionchange",ws),()=>{document.removeEventListener("selectionchange",ws)}),[]);const Or=_=>{const I=$e.current;I&&(Tr(I.innerHTML),(q==="active"||q==="paused"||q==="ended")&&L&&L.id&&Ln())},Va=_=>{if(_.key.length===1){if(!$e.current)return;const U=window.getSelection();if(U.rangeCount>0){const D=U.getRangeAt(0);if(D.collapsed){const ne=D.startContainer,ve=D.startOffset;if(ne.nodeType===Node.TEXT_NODE&&ve===ne.length){const ue=ne.parentElement;ue&&(ue.tagName==="B"||ue.tagName==="I"||ue.tagName==="U"||ue.style.color)&&document.execCommand("removeFormat",!1,null)}}}}};return C.useEffect(()=>{const _=$e.current;_?(console.log("Setting innerHTML:",it),console.log("Current editor.innerHTML:",_.innerHTML),console.log("Active tab:",Pt),it!==_.innerHTML&&(_.innerHTML=it,console.log("Updated editor.innerHTML to:",it))):console.log("Editor not found, activeTab:",Pt)},[it,Pt]),d.jsxs("div",{className:"dashboard-container",children:[d.jsx(cu,{className:"slide-in-from-left"}),d.jsxs("div",{className:"main-content slide-in-from-bottom",children:[d.jsx("div",{className:"top-bar slide-in-from-top",children:d.jsxs("div",{className:"session-header",children:[d.jsx("button",{className:"back-btn fade-in-scale animate-on-mount-delay-1",onClick:async()=>{if(q==="active"&&de){ft(()=>async()=>{n("/sessions",{replace:!0});try{await Gn()}catch(_){console.error("Error in background cleanup:",_)}}),xs(!0);return}n("/sessions",{replace:!0});try{await Gn()}catch(_){console.error("Error in background cleanup:",_)}},children:"Sessions"}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:20,flex:1},children:[d.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:10,flex:1},children:[d.jsx("div",{style:{fontFamily:"Space Mono, monospace",fontSize:"0.9rem",fontWeight:"600",color:"#666",textTransform:"uppercase",letterSpacing:"0.5px",textDecoration:"underline",textUnderlineOffset:"6px"},children:"Session Name"}),d.jsx("input",{type:"text",value:ee,onChange:_=>$(_.target.value),className:"session-title-input animate-on-mount-delay-2",onFocus:_=>_.target.style.borderColor="#4169e1",onBlur:_=>_.target.style.borderColor="#e0e0e0",disabled:q==="ended",placeholder:"Enter session name...",style:{border:"1.5px solid #e0e0e0",borderRadius:"8px",padding:"12px 16px",fontSize:"1.1rem",fontWeight:"600",background:"#fff",color:"#222",transition:"border-color 0.2s ease",outline:"none",width:"100%",height:"40px",maxWidth:"250px"}})]}),d.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:10},children:[d.jsx("div",{style:{fontFamily:"Space Mono, monospace",fontSize:"0.9rem",fontWeight:"600",color:"#666",textTransform:"uppercase",letterSpacing:"0.5px",textDecoration:"underline",textUnderlineOffset:"6px"},children:"Session Controls"}),d.jsxs("div",{style:{display:"flex",gap:12},children:[(q==="active"||q==="paused"||q==="ended")&&d.jsxs(d.Fragment,{children:[d.jsxs("button",{className:"session-btn save-btn fade-in-scale animate-on-mount-delay-4",onClick:yn,disabled:!de,style:{opacity:de?1:.5,cursor:de?"pointer":"not-allowed",transition:"all 0.3s ease",background:de?"#4169e1":"#9ca3af",color:de?"#fff":"#6b7280",border:de?"none":"1px solid #d1d5db",boxShadow:de?"0 2px 8px rgba(65, 105, 225, 0.2)":"none"},children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"18px",height:"18px"},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 3.75V16.5L12 14.25 7.5 16.5V3.75m9 0H18A2.25 2.25 0 0 1 20.25 6v12A2.25 2.25 0 0 1 18 20.25H6A2.25 2.25 0 0 1 3.75 18V6A2.25 2.25 0 0 1 6 3.75h1.5m9 0h-9"})}),de?"Save":"Saved"]}),q==="active"&&d.jsxs(d.Fragment,{children:[d.jsxs("button",{className:"session-btn pause-btn fade-in-scale animate-on-mount-delay-5",onClick:xi,children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"18px",height:"18px"},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25v13.5m-7.5-13.5v13.5"})}),"Pause"]}),d.jsxs("button",{className:"session-btn end-btn fade-in-scale animate-on-mount-delay-6",onClick:Wi,children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"18px",height:"18px"},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 7.5A2.25 2.25 0 0 1 7.5 5.25h9a2.25 2.25 0 0 1 2.25 2.25v9a2.25 2.25 0 0 1-2.25 2.25h-9a2.25 2.25 0 0 1-2.25-2.25v-9Z"})}),"End"]})]}),q==="paused"&&d.jsxs(d.Fragment,{children:[d.jsxs("button",{className:"session-btn resume-btn fade-in-scale animate-on-mount-delay-5",onClick:Ti,children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"18px",height:"18px"},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347c-.75.412-1.667-.13-1.667-.986V5.653Z"})}),"Resume"]}),d.jsxs("button",{className:"session-btn end-btn fade-in-scale animate-on-mount-delay-6",onClick:Wi,children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"18px",height:"18px"},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 7.5A2.25 2.25 0 0 1 7.5 5.25h9a2.25 2.25 0 0 1 2.25 2.25v9a2.25 2.25 0 0 1-2.25 2.25h-9a2.25 2.25 0 0 1-2.25-2.25v-9Z"})}),"End"]})]})]}),q==="ended"&&d.jsxs("button",{className:"session-btn delete-btn fade-in-scale animate-on-mount-delay-4",onClick:_i,children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"18px",height:"18px"},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})}),"Delete Session"]})]})]})]})]})}),L?d.jsxs("div",{className:"session-view-content",children:[d.jsxs("div",{className:"session-tabs fade-in-scale animate-on-mount-delay-1",style:{display:"flex",borderBottom:"2px solid #f0f0f0",marginBottom:"24px",gap:"0"},children:[d.jsx("button",{onClick:()=>yi("main"),style:{flex:1,padding:"12px 24px",border:"none",background:Pt==="main"?"#4169e1":"transparent",color:Pt==="main"?"white":"#666",cursor:"pointer",fontSize:"16px",fontWeight:"600",borderRadius:"8px 8px 0 0",transition:"all 0.2s ease",borderBottom:Pt==="main"?"2px solid #4169e1":"2px solid transparent"},children:"Session"}),d.jsx("button",{onClick:()=>yi("notes"),style:{flex:1,padding:"12px 24px",border:"none",background:Pt==="notes"?"#4169e1":"transparent",color:Pt==="notes"?"white":"#666",cursor:"pointer",fontSize:"16px",fontWeight:"600",borderRadius:"8px 8px 0 0",transition:"all 0.2s ease",borderBottom:Pt==="notes"?"2px solid #4169e1":"2px solid transparent"},children:"Notes"}),d.jsx("button",{onClick:()=>yi("settings"),style:{flex:1,padding:"12px 24px",border:"none",background:Pt==="settings"?"#4169e1":"transparent",color:Pt==="settings"?"white":"#666",cursor:"pointer",fontSize:"16px",fontWeight:"600",borderRadius:"8px 8px 0 0",transition:"all 0.2s ease",borderBottom:Pt==="settings"?"2px solid #4169e1":"2px solid transparent"},children:"Settings"})]}),Pt==="main"&&d.jsxs("div",{className:"tab-content fade-in-scale animate-on-mount-delay-2",children:[d.jsxs("div",{className:"session-section fade-in-scale animate-on-mount-delay-1",children:[d.jsxs("div",{className:"section-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer"},onClick:()=>Se("connection"),children:[d.jsx("h2",{children:"Connection"}),d.jsx("button",{onClick:_=>{_.stopPropagation(),Se("connection")},style:{background:"none",border:"none",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"background-color 0.2s",display:"flex",alignItems:"center",justifyContent:"center",outline:"none"},onMouseEnter:_=>_.target.style.backgroundColor="#f0f0f0",onMouseLeave:_=>_.target.style.backgroundColor="transparent",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"20px",height:"20px",transform:nt.connection?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s"},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})})})]}),!nt.connection&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{style:{marginBottom:"12px",padding:"8px 0px",backgroundColor:"transparent",borderRadius:"6px",border:"none",display:"flex",alignItems:"center",gap:"8px"},children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"16px",height:"16px",color:"#666",flexShrink:0},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.625 9.75a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H8.25m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H12m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0h-.375m-13.5 3.01c0 1.6 1.123 2.994 2.707 3.227 1.087.16 2.185.283 3.293.369V21l4.184-4.183a1.14 1.14 0 0 1 .778-.332 48.294 48.294 0 0 0 5.83-.498c1.585-.233 2.708-1.626 2.708-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0 0 12 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018Z"})}),d.jsx("p",{style:{margin:0,color:"#666",fontSize:"12px",lineHeight:"1.4",fontFamily:"Space Mono, monospace"},children:"Plug in your receiver micro:bit to your computer and click the button below to connect."})]}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16},children:[d.jsxs("button",{className:`connection-btn ${p?"disconnect":"connect"} fade-in-scale animate-on-mount-delay-2`,onClick:p?Hs:Ca,disabled:q==="ended"||q==="paused",children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"18px",height:"18px"},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.288 15.038a5.25 5.25 0 0 1 7.424 0M5.106 11.856c3.807-3.808 9.98-3.808 13.788 0M1.924 8.674c5.565-5.565 14.587-5.565 20.152 0M12.53 18.22l-.53.53-.53-.53a.75.75 0 0 1 1.06 0Z"})}),p?"Disconnect":"Connect"]}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[d.jsx("div",{className:`status-dot ${p?"connected":""} animate-on-mount-delay-3`,style:{width:"12px",height:"12px",borderRadius:"50%",backgroundColor:p?"#4CAF50":"#b0b0b0",transition:"background-color 0.3s ease"}}),d.jsx("span",{style:{color:"#666",fontSize:"14px"},children:p?"Connected to micro:bit":"Not connected"})]})]})]})]}),d.jsxs("div",{className:"session-section fade-in-scale animate-on-mount-delay-2",children:[d.jsxs("div",{className:"section-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer"},onClick:()=>Se("lessonProgress"),children:[d.jsx("h2",{children:"Lesson Progress"}),d.jsx("button",{onClick:_=>{_.stopPropagation(),Se("lessonProgress")},style:{background:"none",border:"none",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"background-color 0.2s",display:"flex",alignItems:"center",justifyContent:"center",outline:"none"},onMouseEnter:_=>_.target.style.backgroundColor="#f0f0f0",onMouseLeave:_=>_.target.style.backgroundColor="transparent",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"20px",height:"20px",transform:nt.lessonProgress?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s"},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})})})]}),!nt.lessonProgress&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{style:{marginBottom:"12px",padding:"8px 0px",backgroundColor:"transparent",borderRadius:"6px",border:"none",display:"flex",alignItems:"center",gap:"8px"},children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"16px",height:"16px",color:"#666",flexShrink:0},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.625 9.75a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H8.25m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H12m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0h-.375m-13.5 3.01c0 1.6 1.123 2.994 2.707 3.227 1.087.16 2.185.283 3.293.369V21l4.184-4.183a1.14 1.14 0 0 1 .778-.332 48.294 48.294 0 0 0 5.83-.498c1.585-.233 2.708-1.626 2.708-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0 0 12 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018Z"})}),d.jsx("p",{style:{margin:0,color:"#666",fontSize:"12px",lineHeight:"1.4",fontFamily:"Space Mono, monospace"},children:"Select a lesson and track your students' progress. When you mark a student as complete, the progress bar will update."})]}),d.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:16,gap:16},children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"lesson-select",style:{fontWeight:600,marginRight:12},children:"Select Lesson:"}),d.jsx("select",{id:"lesson-select",value:ze,onChange:_=>{cs(_.target.value),Wt(_.target.value)},style:{padding:"6px 12px",borderRadius:6,border:"1px solid #e0e0e0",fontSize:14,fontFamily:"Space Mono, monospace",width:"200px",minWidth:"200px"},children:vi.map(_=>d.jsx("option",{value:_.id,style:{fontFamily:"Space Mono, monospace"},children:_.name},_.id))})]}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[d.jsx("button",{style:{padding:"8px 18px",borderRadius:8,background:"#4169e1",color:"#fff",fontWeight:600,fontSize:15,border:"none",boxShadow:"0 2px 8px rgba(65, 105, 225, 0.10)",cursor:"pointer",marginBottom:0},onClick:()=>vs(!0),children:"Lesson History"}),d.jsx("button",{style:{padding:"8px 12px",borderRadius:8,background:ze==="none"||!$t[ze]?"#e0e0e0":"#f7f7f7",color:ze==="none"||!$t[ze]?"#b0b0b0":"#444",fontWeight:600,fontSize:15,border:"1.5px solid #d0d0d0",boxShadow:"0 2px 8px rgba(65, 105, 225, 0.04)",cursor:ze==="none"||!$t[ze]?"not-allowed":"pointer",marginBottom:0,display:"flex",alignItems:"center",gap:6,transition:"background 0.2s, color 0.2s, border 0.2s"},disabled:ze==="none"||!$t[ze],title:ze==="none"||!$t[ze]?"Select a lesson with a link to pop out":"Open lesson link in new window",onMouseEnter:_=>{ze==="none"||!$t[ze]||(_.target.style.background="#ededed",_.target.style.color="#222",_.target.style.borderColor="#b0b0b0")},onMouseLeave:_=>{ze==="none"||!$t[ze]||(_.target.style.background="#f7f7f7",_.target.style.color="#444",_.target.style.borderColor="#d0d0d0")},onClick:()=>{ze==="none"||!$t[ze]||window.open($t[ze],"_blank","toolbar=yes,scrollbars=yes,resizable=yes,top=0,left=0,width="+window.screen.width+",height="+window.screen.height)},children:d.jsxs("span",{style:{display:"flex",alignItems:"center",gap:4,background:ze==="none"||!$t[ze]?"#e0e0e0":"#f7f7f7",borderRadius:6,padding:"0 2px",transition:"background 0.2s, color 0.2s, border 0.2s"},children:["Pop out",d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"20px",height:"20px",marginLeft:4},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"})})]})})]})]}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"20px",padding:"20px 0"},children:[d.jsx("div",{style:{flex:1,height:"32px",background:"#f8f9fa",borderRadius:"16px",overflow:"hidden",position:"relative",border:"2px solid #e0e0e0"},children:d.jsx("div",{style:{height:"100%",background:"linear-gradient(90deg, #4169e1 0%, #274bb5 100%)",borderRadius:"14px",width:`${Object.keys(S).length>0?(((Qs=Xe[ze])==null?void 0:Qs.size)||0)/Object.keys(S).length*100:0}%`,transition:"width 0.5s cubic-bezier(0.4, 0, 0.2, 1)",position:"absolute",left:0,top:0,boxShadow:"0 2px 8px rgba(65, 105, 225, 0.2)"}})}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",fontSize:"16px",fontWeight:"600"},children:[d.jsx("span",{style:{color:"#4169e1"},children:((Pa=Xe[ze])==null?void 0:Pa.size)||0}),d.jsx("span",{style:{color:"#666"},children:"/"}),d.jsx("span",{style:{color:"#222"},children:Object.keys(S).length}),d.jsxs("span",{style:{color:"#666",fontSize:"14px"},children:["(",Object.keys(S).length>0?Math.round(((($s=Xe[ze])==null?void 0:$s.size)||0)/Object.keys(S).length*100):0,"%)"]})]})]}),d.jsxs("div",{style:{display:"flex",gap:"16px",alignItems:"center",marginTop:"8px",marginLeft:"2px",fontSize:"14px",color:"#666"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[d.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"50%",background:"#4169e1"}}),d.jsx("span",{children:"Completed"})]}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[d.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"50%",background:"#e0e0e0"}}),d.jsx("span",{children:"In Progress"})]})]})]})]}),d.jsxs("div",{className:"session-section fade-in-scale animate-on-mount-delay-3",style:{minWidth:0,height:nt.robotsAndPrograms?"auto":"600px",overflow:"hidden"},children:[d.jsxs("div",{className:"section-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer"},onClick:()=>Se("robotsAndPrograms"),children:[d.jsx("h2",{children:"Robots"}),d.jsx("button",{onClick:_=>{_.stopPropagation(),Se("robotsAndPrograms")},style:{background:"none",border:"none",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"background-color 0.2s",display:"flex",alignItems:"center",justifyContent:"center",outline:"none"},onMouseEnter:_=>_.target.style.backgroundColor="#f0f0f0",onMouseLeave:_=>_.target.style.backgroundColor="transparent",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"20px",height:"20px",transform:nt.robotsAndPrograms?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s"},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})})})]}),!nt.robotsAndPrograms&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{style:{marginBottom:"12px",padding:"8px 0px",backgroundColor:"transparent",borderRadius:"6px",border:"none",display:"flex",alignItems:"center",gap:"8px"},children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"16px",height:"16px",color:"#666",flexShrink:0},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.625 9.75a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H8.25m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H12m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0h-.375m-13.5 3.01c0 1.6 1.123 2.994 2.707 3.227 1.087.16 2.185.283 3.293.369V21l4.184-4.183a1.14 1.14 0 0 1 .778-.332 48.294 48.294 0 0 0 5.83-.498c1.585-.233 2.708-1.626 2.708-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0 0 12 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018Z"})}),d.jsx("p",{style:{margin:0,color:"#666",fontSize:"12px",lineHeight:"1.4",fontFamily:"Space Mono, monospace"},children:"Once you have connected your micro:bit, robots that have sent data will appear here."})]}),d.jsx("div",{style:{minWidth:0,height:"calc(100% - 60px)",overflow:"hidden"},children:d.jsxs("div",{style:{minWidth:0,height:"100%",overflow:"hidden",display:"flex",flexDirection:"column"},children:[d.jsx("div",{style:{marginBottom:"20px",flexShrink:0},children:d.jsxs("h3",{style:{fontSize:"1.1rem",fontWeight:"600",color:"#222",marginBottom:"0px"},children:["Robots (",(()=>{const _=wi(),I=Object.keys(S).length,U=Object.keys(_).length;return B.trim()?`${U} of ${I}`:I})(),")"]})}),d.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px",marginBottom:"20px",padding:"12px 0",flexShrink:0},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",flexWrap:"wrap"},children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"16px",height:"16px",color:"#666"},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})}),d.jsx("input",{type:"text",placeholder:"Search robots by ID or tags...",value:B,onChange:_=>oe(_.target.value),style:{padding:"8px 12px",border:"1px solid #e0e0e0",borderRadius:"6px",fontSize:"14px",width:"290px",outline:"none",transition:"border-color 0.2s"},onFocus:_=>_.target.style.borderColor="#4169e1",onBlur:_=>_.target.style.borderColor="#e0e0e0"}),Object.keys(S).length>0&&d.jsx("button",{className:"clear-data-btn fade-in-scale animate-on-mount-delay-7",onClick:Ia,style:{padding:"8px 12px",height:"36px",fontSize:"14px",display:"flex",alignItems:"center",justifyContent:"center"},children:"Clear Robots"}),(()=>{const _=wi(),I=Object.keys(_);return I.length>0&&d.jsx("button",{className:"clear-data-btn fade-in-scale animate-on-mount-delay-6",onClick:()=>{const U=I.length>0&&I.every(D=>me.has(D));re(U?new Set:new Set(I))},style:{padding:"8px 12px",height:"36px",fontSize:"14px",display:"flex",alignItems:"center",justifyContent:"center"},children:I.length>0&&I.every(D=>me.has(D))?"Deselect All":"Select All"})})()]}),me.size>0&&d.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:"8px"},children:[d.jsxs("button",{className:"fade-in-scale animate-on-mount-delay-4",style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"14px",padding:"8px 12px",height:"36px",background:"#dc3545",color:"#fff",border:"none",borderRadius:"6px",boxShadow:"0 2px 8px rgba(220, 53, 69, 0.15)",cursor:"pointer",transition:"background 0.2s"},onClick:()=>{if(!window.confirm(`Are you sure you want to delete the selected robot${me.size>1?"s":""}? This cannot be undone.`))return;const _={...S};me.forEach(I=>{delete _[I]}),A(_),re(new Set)},children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"14px",height:"14px"},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})}),"Delete Selected"]}),ze!=="none"&&d.jsxs("button",{className:"fade-in-scale animate-on-mount-delay-5",style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"14px",padding:"8px 12px",height:"36px",background:"#4169e1",color:"#fff",border:"none",borderRadius:"6px",boxShadow:"0 2px 8px rgba(65, 105, 225, 0.15)",cursor:"pointer",transition:"background 0.2s"},onClick:()=>{be(_=>{const I=new Set(_);return Array.from(me).every(D=>K.has(D))?me.forEach(D=>I.delete(D)):me.forEach(D=>I.add(D)),I})},children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"14px",height:"14px"},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),Xs?"Undo Done":"Mark as Done"]}),N&&d.jsxs("button",{className:"fade-in-scale animate-on-mount-delay-5",onClick:Gs,style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"14px",padding:"8px 12px",height:"36px",background:"#a259e1",color:"#fff",border:"none",borderRadius:"6px",boxShadow:"0 2px 8px rgba(162, 89, 225, 0.15)",cursor:"pointer",transition:"background 0.2s"},children:[d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"14px",height:"14px"},children:[d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.568 3H5.25A2.25 2.25 0 0 0 3 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.732.699 2.431 0l4.318-4.318c.699-.699.699-1.732 0-2.431L9.568 3Z"}),d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 6h.008v.008H6V6Z"})]}),"Assign"]})]})]}),d.jsxs("div",{style:{flex:1,overflow:"auto"},children:[!F&&Da,Oa]})]})})]})]}),d.jsxs("div",{className:"session-section fade-in-scale animate-on-mount-delay-4",children:[d.jsxs("div",{className:"section-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer"},onClick:()=>Se("dataReceived"),children:[d.jsxs("h2",{children:["Logs (",y.length,")"]}),d.jsx("button",{onClick:_=>{_.stopPropagation(),Se("dataReceived")},style:{background:"none",border:"none",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"background-color 0.2s",display:"flex",alignItems:"center",justifyContent:"center",outline:"none"},onMouseEnter:_=>_.target.style.backgroundColor="#f0f0f0",onMouseLeave:_=>_.target.style.backgroundColor="transparent",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"20px",height:"20px",transform:nt.dataReceived?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s"},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})})})]}),!nt.dataReceived&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{style:{marginBottom:"12px",padding:"8px 0px",backgroundColor:"transparent",borderRadius:"6px",border:"none",display:"flex",alignItems:"center",gap:"8px"},children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"16px",height:"16px",color:"#666",flexShrink:0},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.625 9.75a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H8.25m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H12m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0h-.375m-13.5 3.01c0 1.6 1.123 2.994 2.707 3.227 1.087.16 2.185.283 3.293.369V21l4.184-4.183a1.14 1.14 0 0 1 .778-.332 48.294 48.294 0 0 0 5.83-.498c1.585-.233 2.708-1.626 2.708-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0 0 12 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018Z"})}),d.jsx("p",{style:{margin:0,color:"#666",fontSize:"12px",lineHeight:"1.4",fontFamily:"Space Mono, monospace"},children:"View data being sent to your receiver micro:bit in real-time."})]}),d.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"16px",marginBottom:"12px"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"16px",height:"16px",color:"#666"},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})}),d.jsx("input",{type:"text",placeholder:"Search logs...",value:we,onChange:_=>Re(_.target.value),style:{padding:"8px 12px",border:"1px solid #e0e0e0",borderRadius:"6px",fontSize:"14px",width:"300px",outline:"none",transition:"border-color 0.2s"},onFocus:_=>_.target.style.borderColor="#4169e1",onBlur:_=>_.target.style.borderColor="#e0e0e0"})]}),y.length>0&&d.jsx("button",{className:"clear-data-btn fade-in-scale animate-on-mount-delay-5",onClick:Gi,style:{padding:"8px 12px",height:"36px",fontSize:"14px",display:"flex",alignItems:"center",justifyContent:"center"},children:"Clear Data"})]}),jr]})]})]}),Pt==="notes"&&d.jsx("div",{className:"tab-content fade-in-scale animate-on-mount-delay-2",children:d.jsxs("div",{style:{padding:"24px"},children:[d.jsx("h2",{style:{marginBottom:"24px",color:"#222",fontWeight:"700"},children:"Session Notes"}),d.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"16px",padding:"12px",backgroundColor:"#f8f9fa",borderRadius:"8px",border:"1px solid #e9ecef"},children:[d.jsx("button",{onClick:()=>pt&&_s("bold"),disabled:!pt,style:{padding:"8px 12px",border:"1px solid #dee2e6",borderRadius:"6px",background:Ut.bold?"#4169e1":"#fff",color:pt?Ut.bold?"#fff":"#495057":"#ccc",cursor:pt?"pointer":"not-allowed",fontWeight:"bold",fontSize:"14px",transition:"all 0.2s ease",opacity:pt?1:.5},title:pt?"Bold (Ctrl+B)":"Select text to format",children:"B"}),d.jsx("button",{onClick:()=>pt&&_s("italic"),disabled:!pt,style:{padding:"8px 12px",border:"1px solid #dee2e6",borderRadius:"6px",background:Ut.italic?"#4169e1":"#fff",color:pt?Ut.italic?"#fff":"#495057":"#ccc",cursor:pt?"pointer":"not-allowed",fontStyle:"italic",fontSize:"14px",transition:"all 0.2s ease",opacity:pt?1:.5},title:pt?"Italic (Ctrl+I)":"Select text to format",children:"I"}),d.jsx("button",{onClick:()=>pt&&_s("underline"),disabled:!pt,style:{padding:"8px 12px",border:"1px solid #dee2e6",borderRadius:"6px",background:Ut.underline?"#4169e1":"#fff",color:pt?Ut.underline?"#fff":"#495057":"#ccc",cursor:pt?"pointer":"not-allowed",textDecoration:"underline",fontSize:"14px",transition:"all 0.2s ease",opacity:pt?1:.5},title:pt?"Underline (Ctrl+U)":"Select text to format",children:"U"}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[d.jsx("span",{style:{fontSize:"14px",color:pt?"#495057":"#ccc"},children:"Color:"}),d.jsx("div",{style:{display:"flex",gap:"4px"},children:["#000000","#FF0000","#FFA500","#FFD700","#228B22","#0000FF","#800080"].map(_=>d.jsx("button",{onClick:()=>pt&&ki(_),disabled:!pt,style:{width:"24px",height:"24px",backgroundColor:_,border:Ut.color===_?"2px solid #333":"1px solid #dee2e6",borderRadius:"1000px",cursor:pt?"pointer":"not-allowed",opacity:pt?1:.5,transition:"all 0.2s ease"},title:pt?`Change text color to ${_}`:"Select text to change color"},_))})]})]}),d.jsx("div",{ref:$e,contentEditable:!0,onInput:Or,onKeyDown:Va,onFocus:ei,onBlur:Ys,onKeyUp:ko,onMouseUp:Nl,placeholder:"Enter your notes here...",style:{width:"100%",minHeight:"300px",padding:"16px",border:"1px solid #e0e0e0",borderRadius:"8px",fontSize:"14px",lineHeight:"1.6",fontFamily:"inherit",color:Ut.color,backgroundColor:"#fff",boxShadow:"inset 0 1px 3px rgba(0,0,0,0.1)",outline:"none",overflowY:"auto",wordWrap:"break-word"}}),d.jsxs("div",{style:{marginTop:"12px",padding:"12px",backgroundColor:"#f8f9fa",borderRadius:"6px",fontSize:"13px",color:"#6c757d"},children:[d.jsx("strong",{children:"Tip:"})," Select text and use the toolbar above to apply formatting."]})]})}),Pt==="settings"&&d.jsx("div",{className:"tab-content fade-in-scale animate-on-mount-delay-2",children:d.jsxs("div",{style:{padding:"24px"},children:[d.jsx("h2",{style:{marginBottom:"24px",color:"#222",fontWeight:"700"},children:"Session Settings"}),d.jsxs("div",{style:{marginBottom:"32px",padding:"24px",backgroundColor:"#f8f9fa",borderRadius:"12px",border:"1px solid #e9ecef"},children:[d.jsx("h3",{style:{marginBottom:"16px",color:"#222",fontWeight:"600"},children:"Classroom"}),d.jsxs("p",{style:{color:"#666",fontSize:"14px",marginBottom:"20px",lineHeight:"1.5"},children:["Change the classroom associated with this session. When you apply the change, ",d.jsx("strong",{children:"all robot assignments will be cleared."}),' Select a new classroom and click "Apply Classroom Change" to confirm.']}),d.jsxs("div",{style:{marginBottom:"16px"},children:[d.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",color:"#333"}}),L!=null&&L.classroomId?d.jsxs("div",{style:{display:"inline-block",padding:"8px 12px",backgroundColor:((No=ye(L.classroomId))==null?void 0:No.color)||"#4169e1",color:"#fff",borderRadius:"6px",fontSize:"14px",fontWeight:"500"},children:["Current Classroom: ",(Mr=ye(L.classroomId))==null?void 0:Mr.name]}):d.jsx("div",{style:{display:"inline-block",padding:"8px 12px",backgroundColor:"#e0e0e0",color:"#666",borderRadius:"6px",fontSize:"14px",fontWeight:"500"},children:"No classroom assigned"})]}),d.jsxs("div",{style:{marginBottom:"16px"},children:[d.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",color:"#333"},children:"Change to:"}),d.jsxs("select",{value:de&&(N==null?void 0:N.id)||"",onChange:_=>Ne(_.target.value||null),style:{width:"100%",padding:"12px 16px",border:"1px solid #e0e0e0",borderRadius:"8px",fontSize:"14px",backgroundColor:"#fff",color:"#222",fontFamily:"Space Mono, monospace"},children:[d.jsx("option",{value:"",children:de?(N==null?void 0:N.name)||"No classroom":"Select Classroom..."}),d.jsx("option",{value:"no-classroom",children:"No classroom"}),k.map(_=>d.jsx("option",{value:_.id,children:_.name},_.id))]})]}),d.jsx("div",{style:{marginTop:"12px"},children:d.jsx("button",{onClick:ot,disabled:!de,style:{width:"100%",padding:"12px 16px",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:de?"pointer":"not-allowed",backgroundColor:de?"#4169e1":"#e0e0e0",color:de?"#fff":"#888",fontFamily:"Space Mono, monospace",transition:"all 0.2s ease"},children:de?"Apply Classroom Change":"No Changes to Apply"})})]})]})})]}):d.jsx("div",{className:"session-view-content",children:d.jsx("div",{style:{textAlign:"center",padding:"50px",color:"#666"},children:"Loading session..."})})]}),j&&tt&&(L==null?void 0:L.classroomId)&&d.jsx("div",{className:"modal-overlay",onClick:()=>qe(!1),children:d.jsxs("div",{className:"modal-content",onClick:_=>_.stopPropagation(),style:{maxWidth:"500px"},children:[d.jsxs("div",{className:"modal-header",children:[d.jsxs("h2",{children:["Assign Robot: ",tt]}),d.jsx("button",{className:"modal-close",onClick:()=>qe(!1),children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"20",height:"20",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),d.jsxs("div",{className:"modal-body",children:[d.jsxs("div",{style:{marginBottom:"20px"},children:[d.jsx("h3",{style:{marginBottom:"10px",color:"#222"},children:"Assign to Student"}),d.jsxs("select",{onChange:_=>{_.target.value&&(To(tt,_.target.value),qe(!1))},defaultValue:"",style:{width:"100%",padding:"8px 12px",border:"1px solid #e0e0e0",borderRadius:"6px",fontSize:"14px",fontFamily:"monospace"},children:[d.jsx("option",{value:"",children:"Select a student..."}),(Ua=(Ss=ye(L.classroomId))==null?void 0:Ss.students)==null?void 0:Ua.map(_=>d.jsxs("option",{value:_.id,children:[_.name," (",_.email,")"]},_.id))]})]}),d.jsxs("div",{style:{marginBottom:"20px"},children:[d.jsx("h3",{style:{marginBottom:"10px",color:"#222"},children:"Assign to Group"}),d.jsxs("select",{onChange:_=>{_.target.value&&(us(tt,_.target.value),qe(!1))},defaultValue:"",style:{width:"100%",padding:"8px 12px",border:"1px solid #e0e0e0",borderRadius:"6px",fontSize:"14px",fontFamily:"monospace"},children:[d.jsx("option",{value:"",children:"Select a group..."}),(Lr=(Ba=ye(L.classroomId))==null?void 0:Ba.groups)==null?void 0:Lr.map(_=>d.jsxs("option",{value:_.id,children:[_.name," (",_.students.length," students)"]},_.id))]})]}),((Es=S[tt])==null?void 0:Es.assignedTo)&&d.jsxs("div",{style:{marginTop:"20px",padding:"12px",background:"#fff3cd",borderRadius:"6px",border:"1px solid #ffeaa7"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"8px"},children:[d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"16px",height:"16px",marginRight:"6px"},children:[d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.568 3H5.25A2.25 2.25 0 0 0 3 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 0 0 5.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 0 0 9.568 3Z"}),d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 6h.008v.008H6V6Z"})]}),d.jsxs("p",{style:{margin:"0",color:"#856404"},children:["Currently assigned to: ",S[tt].assignedTo.name]})]}),d.jsx("button",{onClick:()=>{li(tt),qe(!1)},style:{background:"#dc3545",color:"white",marginLeft:"auto",border:"none",padding:"6px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"12px",fontFamily:"monospace"},children:"Unassign Robot"})]})]}),d.jsx("div",{className:"modal-footer",children:d.jsx("button",{className:"btn-secondary",onClick:()=>qe(!1),children:"Cancel"})})]})}),Ae&&(L==null?void 0:L.classroomId)&&d.jsx("div",{className:"modal-overlay",onClick:()=>O(!1),children:d.jsxs("div",{className:"modal-content",onClick:_=>_.stopPropagation(),style:{maxWidth:"500px"},children:[d.jsxs("div",{className:"modal-header",children:[d.jsxs("h2",{children:["Assign ",me.size," Robot",me.size!==1?"s":""]}),d.jsx("button",{className:"modal-close",onClick:()=>O(!1),children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"20",height:"20",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),d.jsx("div",{className:"modal-body",children:ye(L.classroomId)?d.jsxs(d.Fragment,{children:[d.jsxs("div",{style:{marginBottom:"20px"},children:[d.jsx("h3",{style:{marginBottom:"10px",color:"#222"},children:"Assign to Student"}),d.jsxs("select",{onChange:_=>{_.target.value&&kr(_.target.value)},defaultValue:"",style:{width:"100%",padding:"8px 12px",border:"1px solid #e0e0e0",borderRadius:"6px",fontSize:"14px",fontFamily:"monospace"},children:[d.jsx("option",{value:"",children:"Select a student..."}),(Js=(za=ye(L.classroomId))==null?void 0:za.students)==null?void 0:Js.map(_=>d.jsxs("option",{value:_.id,children:[_.name," (",_.email,")"]},_.id))]})]}),d.jsxs("div",{style:{marginBottom:"20px"},children:[d.jsx("h3",{style:{marginBottom:"10px",color:"#222"},children:"Assign to Group"}),d.jsxs("select",{onChange:_=>{_.target.value&&Nr(_.target.value)},defaultValue:"",style:{width:"100%",padding:"8px 12px",border:"1px solid #e0e0e0",borderRadius:"6px",fontSize:"14px",fontFamily:"monospace"},children:[d.jsx("option",{value:"",children:"Select a group..."}),(Vr=(Fa=ye(L.classroomId))==null?void 0:Fa.groups)==null?void 0:Vr.map(_=>d.jsxs("option",{value:_.id,children:[_.name," (",_.students.length," students)"]},_.id))]})]}),d.jsxs("div",{style:{marginTop:"20px",padding:"12px",background:"#fff3cd",borderRadius:"6px",border:"1px solid #ffeaa7"},children:[d.jsx("h4",{style:{margin:"0 0 8px 0",color:"#856404"},children:"Remove Assignments"}),d.jsxs("p",{style:{margin:"0",color:"#856404"},children:["Remove assignments from ",me.size," selected robot",me.size!==1?"s":""]}),d.jsx("button",{onClick:ja,style:{marginTop:"8px",background:"#dc3545",color:"white",border:"none",padding:"6px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Remove Assignments"})]})]}):d.jsx("div",{style:{color:"#dc3545",fontWeight:500,padding:"24px 0",textAlign:"center"},children:"Please select a classroom to tag robots."})}),d.jsx("div",{className:"modal-footer",children:d.jsx("button",{className:"btn-secondary",onClick:()=>O(!1),children:"Cancel"})})]})}),Hn&&pn&&d.jsx("div",{className:"modal-overlay",onClick:()=>qn(!1),children:d.jsxs("div",{className:"modal-content",onClick:_=>_.stopPropagation(),style:{maxWidth:"800px",maxHeight:"80vh",overflow:"hidden",display:"flex",flexDirection:"column"},children:[d.jsxs("div",{className:"modal-header",children:[d.jsxs("h2",{children:["Robot Details: ",pn]}),d.jsx("button",{className:"modal-close",onClick:()=>qn(!1),children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"20",height:"20",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),d.jsx("div",{className:"modal-body",style:{flex:1,overflow:"hidden",display:"flex",flexDirection:"column"},children:d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"24px",height:"100%",overflow:"hidden"},children:[d.jsxs("div",{style:{display:"flex",flexDirection:"column",overflow:"hidden"},children:[d.jsxs("h3",{style:{marginBottom:"16px",fontSize:"1.1rem",fontWeight:"600",color:"#222"},children:["Recent Programs (",qs(pn).length,")"]}),d.jsx("input",{type:"text",placeholder:"Search recent programs...",value:ds,onChange:_=>Xt(_.target.value),style:{marginBottom:"10px",padding:"8px 12px",border:"1px solid #e0e0e0",borderRadius:"6px",fontSize:"14px",fontFamily:"Space Mono, monospace"}}),d.jsx("div",{style:{flex:1,overflow:"auto",paddingRight:"8px"},children:(()=>{const _=qs(pn),I=ds.trim()?_.filter(U=>U.program.toLowerCase().includes(ds.toLowerCase())||U.button.toLowerCase().includes(ds.toLowerCase())||U.robotName&&U.robotName.toLowerCase().includes(ds.toLowerCase())||U.timestamp.toLowerCase().includes(ds.toLowerCase())):_;return I.length===0?d.jsx("div",{style:{textAlign:"center",padding:"40px 20px",color:"#666",fontStyle:"italic"},children:"No programs found"}):I.slice(0,10).map((U,D)=>d.jsxs("div",{style:{background:"#f8f9fa",borderRadius:"12px",padding:"16px",marginBottom:"12px",border:"1px solid #e0e0e0",transition:"all 0.2s ease"},children:[d.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"8px"},children:d.jsxs("div",{style:{flex:1},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[d.jsx("span",{style:{fontSize:"0.85rem",fontWeight:"600",color:"#4169e1",fontFamily:"monospace"},children:U.deviceId}),U.button==="PLAY"?d.jsx("img",{src:Dm,alt:"Play",style:{width:18,height:18,verticalAlign:"middle"}}):U.button==="TEST"?d.jsx("img",{src:Om,alt:"Test",style:{width:18,height:18,verticalAlign:"middle"}}):d.jsx("span",{style:{fontSize:"0.75rem",color:"#666",background:"#e3eafe",padding:"2px 6px",borderRadius:"4px",fontWeight:"500"},children:U.button})]}),d.jsx("div",{style:{fontSize:"0.8rem",color:"#888",marginBottom:"8px"},children:_c(U.timestamp)})]})}),d.jsx("div",{style:{background:"#fff",padding:"8px 12px",borderRadius:"6px",border:"1px solid #e0e0e0",fontFamily:"monospace",fontSize:"0.85rem",color:"#333",wordBreak:"break-word",marginBottom:"8px"},children:Ws(U.program)}),d.jsx("div",{style:{display:"flex",gap:"8px",justifyContent:"flex-end"},children:d.jsx("button",{onClick:ne=>{ne.stopPropagation(),fs(U),Ks(U.program),Yn(!0)},style:{padding:"4px 8px",background:"#4169e1",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.75rem",fontWeight:"500",fontFamily:"var(--font-body)",transition:"background 0.2s ease"},onMouseEnter:ne=>ne.target.style.background="#274bb5",onMouseLeave:ne=>ne.target.style.background="#4169e1",children:"View Program"})})]},`${U.deviceId}-${U.timestamp}-${D}`))})()})]}),d.jsxs("div",{style:{display:"flex",flexDirection:"column",overflow:"hidden"},children:[d.jsxs("h3",{style:{marginBottom:"16px",fontSize:"1.1rem",fontWeight:"600",color:"#222"},children:["Logs (",Kn(pn).length,")"]}),d.jsx("input",{type:"text",placeholder:"Search logs...",value:vn,onChange:_=>Zs(_.target.value),style:{marginBottom:"10px",padding:"8px 12px",border:"1px solid #e0e0e0",borderRadius:"6px",fontSize:"14px",fontFamily:"Space Mono, monospace"}}),d.jsx("div",{style:{flex:1,overflow:"auto",paddingRight:"8px"},children:(()=>{const _=Kn(pn),I=vn.trim()?_.filter(U=>U.data.toLowerCase().includes(vn.toLowerCase())||U.timestamp.toLowerCase().includes(vn.toLowerCase())):_;return I.length===0?d.jsx("div",{style:{textAlign:"center",padding:"40px 20px",color:"#666",fontStyle:"italic"},children:"No logs found"}):I.map((U,D)=>d.jsxs("div",{style:{background:"#f8f9fa",borderRadius:"8px",padding:"12px",marginBottom:"8px",border:"1px solid #e0e0e0",fontSize:"0.85rem"},children:[d.jsx("div",{style:{fontSize:"0.75rem",color:"#888",marginBottom:"4px",fontFamily:"monospace"},children:_c(U.timestamp)}),d.jsx("div",{style:{color:"#333",fontFamily:"monospace",wordBreak:"break-word"},children:U.data})]},D))})()})]})]})}),d.jsx("div",{className:"modal-footer",children:d.jsx("button",{className:"btn-secondary",onClick:()=>qn(!1),children:"Close"})})]})}),Hi&&d.jsx("div",{className:"serial-popup-overlay fade-in",style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.55)",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"flex-end",paddingRight:"23vw",paddingBottom:"20vh",transition:"background 0.4s cubic-bezier(0.4,0,0.2,1)"},children:d.jsx("img",{src:qk,alt:"Connection Graphic",className:"connection-bounce",style:{width:450,height:450,objectFit:"contain",borderRadius:16,boxShadow:"0 2px 12px rgba(65,105,225,0.10)",maxWidth:"90vw",maxHeight:"90vh",transition:"opacity 0.4s cubic-bezier(0.4,0,0.2,1)"}})}),hs&&Qe&&d.jsx("div",{className:"modal-overlay",onClick:()=>Yn(!1),children:d.jsxs("div",{className:"modal-content",onClick:_=>_.stopPropagation(),style:{maxWidth:"600px",maxHeight:"90vh",overflow:"hidden",display:"flex",flexDirection:"column",alignItems:"center"},children:[d.jsxs("div",{className:"modal-header",style:{width:"100%"},children:[d.jsx("h2",{children:"View Program"}),d.jsx("button",{className:"modal-close",onClick:()=>Yn(!1),children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"20",height:"20",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),d.jsx("div",{style:{display:"flex",gap:8,margin:"12px 0",flexWrap:"wrap",justifyContent:"center"},children:Ai(Qe.program).map((_,I)=>d.jsx("span",{style:{fontWeight:I===He.step?700:400,color:I===He.step?"#4169e1":"#333",fontFamily:"monospace",fontSize:"1rem",opacity:I===He.step?1:.6,padding:"2px 6px",borderRadius:"4px",background:I===He.step?"#e3eafe":"transparent",transition:"all 0.2s"},children:_},I))}),d.jsxs("div",{style:{position:"relative",width:320,height:320,margin:"0 auto",background:"transparent",display:"flex",alignItems:"center",justifyContent:"center"},children:[d.jsx("svg",{width:320,height:320,style:{position:"absolute",top:0,left:0,zIndex:1},children:Array.from({length:He.gridSize}).map((_,I)=>Array.from({length:He.gridSize}).map((U,D)=>d.jsx("circle",{cx:32+D*(256/(He.gridSize-1)),cy:32+I*(256/(He.gridSize-1)),r:4*He.robotScale,fill:"#bbb",opacity:.5},`dot-${I}-${D}`)))}),d.jsx("img",{src:xx,alt:"Robot",className:"program-animation-robot",style:{left:32+(He.x+He.offsetX)*(256/(He.gridSize-1))-30*He.robotScale,top:32+(He.y+He.offsetY)*(256/(He.gridSize-1))-35*He.robotScale,width:60*He.robotScale,height:70*He.robotScale,zIndex:2,transform:`rotate(${He.dir*90}deg)`}})]}),d.jsxs("div",{style:{display:"flex",gap:16,marginTop:24,alignItems:"center",justifyContent:"center"},children:[d.jsx("button",{onClick:()=>Ma(!1),disabled:He.step===0,style:{padding:8,borderRadius:8,border:"1px solid #ccc",background:"#f7f9fb",cursor:He.step===0?"not-allowed":"pointer"},children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:28,height:28,opacity:He.step===0?.4:1},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 16.811c0 .864-.933 1.406-1.683.977l-7.108-4.061a1.125 1.125 0 0 1 0-1.954l7.108-4.061A1.125 1.125 0 0 1 21 8.689v8.122ZM11.25 16.811c0 .864-.933 1.406-1.683.977l-7.108-4.061a1.125 1.125 0 0 1 0-1.954l7.108-4.061a1.125 1.125 0 0 1 1.683.977v8.122Z"})})}),d.jsx("button",{onClick:Dr,style:{padding:8,borderRadius:8,border:"1px solid #4169e1",background:He.playing?"#e3eafe":"#4169e1",color:He.playing?"#4169e1":"#fff",fontWeight:700,fontSize:18,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:He.playing?d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:28,height:28},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25v13.5m-7.5-13.5v13.5"})}):d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:28,height:28},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347a1.125 1.125 0 0 1-1.667-.986V5.653Z"})})}),d.jsx("button",{onClick:()=>Ma(!0),disabled:He.step>=Ai(Qe.program).length,style:{padding:8,borderRadius:8,border:"1px solid #ccc",background:"#f7f9fb",cursor:He.step>=Ai(Qe.program).length?"not-allowed":"pointer"},children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:28,height:28,opacity:He.step>=Ai(Qe.program).length?.4:1},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 8.689c0-.864.933-1.406 1.683-.977l7.108 4.061a1.125 1.125 0 0 1 0 1.954l-7.108 4.061A1.125 1.125 0 0 1 3 16.811V8.69ZM12.75 8.689c0-.864.933-1.406 1.683-.977l7.108 4.061a1.125 1.125 0 0 1 0 1.954l-7.108 4.061a1.125 1.125 0 0 1-1.683-.977V8.69Z"})})}),d.jsx("button",{onClick:()=>{Ks(Qe.program)},style:{padding:8,borderRadius:8,border:"1px solid #ccc",background:"#fff",color:"#4169e1",fontWeight:700,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:28,height:28},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"})})})]})]})}),Qn&&d.jsx("div",{className:"modal-overlay",onClick:()=>{$n(!1),gs(!1)},children:d.jsxs("div",{className:"modal-content",onClick:_=>_.stopPropagation(),children:[d.jsx("div",{className:"modal-header",children:d.jsx("h2",{children:"Active Session Detected"})}),d.jsx("div",{className:"modal-body",children:d.jsx("p",{children:"There is already an active running session. If you resume this session, the active session will be paused. Proceed?"})}),d.jsxs("div",{className:"modal-footer",children:[d.jsx("button",{className:"btn-secondary",onClick:()=>{$n(!1),gs(!1)},children:"Cancel"}),d.jsx("button",{className:"btn-primary",onClick:()=>{Vt(Ce).then(_=>{const I=_.map(U=>U.status==="active"&&String(U.id)!==String(L==null?void 0:L.id)?{...U,status:"paused"}:U);kn(Ce,I),$n(!1),gs(!1),oi()})},children:"Proceed"})]})]})}),Eo&&d.jsx("div",{className:"modal-overlay",onClick:()=>bi(!1),children:d.jsxs("div",{className:"modal-content",onClick:_=>_.stopPropagation(),children:[d.jsx("div",{className:"modal-header",children:d.jsx("h2",{children:"End Session"})}),d.jsx("div",{className:"modal-body",children:d.jsx("p",{children:"Are you sure you want to end this session? This action cannot be undone."})}),d.jsxs("div",{className:"modal-footer",children:[d.jsx("button",{className:"btn-secondary",onClick:()=>bi(!1),children:"Cancel"}),d.jsx("button",{className:"btn-primary",style:{background:"#dc3545",borderColor:"#dc3545"},onClick:()=>{bi(!1),Xi()},children:"End Session"})]})]})}),Io&&d.jsx("div",{className:"modal-overlay",onClick:()=>Ri(!1),children:d.jsxs("div",{className:"modal-content",onClick:_=>_.stopPropagation(),children:[d.jsx("div",{className:"modal-header",children:d.jsx("h2",{children:"Delete Session"})}),d.jsx("div",{className:"modal-body",children:d.jsx("p",{children:"Are you sure you want to delete this session? This action cannot be undone."})}),d.jsxs("div",{className:"modal-footer",children:[d.jsx("button",{className:"btn-secondary",onClick:()=>Ri(!1),children:"Cancel"}),d.jsx("button",{className:"btn-primary",style:{background:"#dc3545",borderColor:"#dc3545"},onClick:()=>{L&&Vt(Ce).then(_=>{const I=_.filter(U=>String(U.id)!==String(L.id));kn(Ce,I),Ri(!1),n("/sessions")})},children:"Delete"})]})]})}),Jn&&d.jsx("div",{className:"modal-overlay",onClick:()=>An(!1),children:d.jsxs("div",{className:"modal-content",onClick:_=>_.stopPropagation(),children:[d.jsx("div",{style:{marginBottom:0,textAlign:"center"},children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:60,height:60,color:"#4169e1",margin:"0 auto"},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})})}),d.jsx("div",{className:"modal-header",style:{display:"block",textAlign:"center",justifyContent:"center"},children:d.jsx("h2",{children:"Session Paused"})}),d.jsx("div",{className:"modal-body",style:{marginBottom:0,textAlign:"center"},children:d.jsx("p",{children:"Since you've been inactive for a while, your session has been paused."})}),d.jsx("div",{className:"modal-footer",style:{display:"block",marginBottom:0,textAlign:"center"},children:d.jsx("p",{style:{marginTop:0,marginBottom:0,fontSize:14,color:"#808080",textAlign:"center"},children:"Click anywhere to dismiss"})})]})}),Yi&&d.jsx("div",{className:"modal-overlay",onClick:()=>vs(!1),children:d.jsxs("div",{className:"modal-content",onClick:_=>_.stopPropagation(),style:{maxWidth:"700px",maxHeight:"80vh",overflow:"auto"},children:[d.jsxs("div",{className:"modal-header",children:[d.jsx("h2",{children:"Lesson Completion History"}),d.jsx("button",{className:"modal-close",onClick:()=>vs(!1),children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"20",height:"20",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),d.jsxs("div",{className:"modal-body",children:[d.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:15},children:[d.jsx("thead",{children:d.jsxs("tr",{style:{background:"#f8f9fa"},children:[d.jsx("th",{style:{textAlign:"left",padding:"8px",borderBottom:"2px solid #e0e0e0"},children:"Lesson"}),d.jsx("th",{style:{textAlign:"left",padding:"8px",borderBottom:"2px solid #e0e0e0"},children:"Completed Robots"})]})}),d.jsx("tbody",{children:vi.filter(_=>_.id!=="none").filter(_=>Xe[_.id]&&Xe[_.id].size>0).map(_=>d.jsxs("tr",{children:[d.jsx("td",{style:{padding:"8px",borderBottom:"1px solid #e0e0e0",fontWeight:600},children:_.name}),d.jsx("td",{style:{padding:"8px",borderBottom:"1px solid #e0e0e0"},children:d.jsx("ul",{style:{margin:0,paddingLeft:18},children:Array.from(Xe[_.id]).map(I=>{const U=S[I];let D="";return U!=null&&U.assignedTo&&(D=U.assignedTo.type==="student"?U.assignedTo.name:`${U.assignedTo.name} (Group)`),d.jsxs("li",{style:{marginBottom:2},children:[d.jsx("span",{style:{fontFamily:"Space Mono, monospace",fontWeight:600},children:I}),D&&d.jsxs("span",{style:{color:"#4169e1",marginLeft:8,fontWeight:500,fontSize:13},children:["[",D,"]"]})]},I)})})})]},_.id))})]}),d.jsx("div",{style:{marginTop:"20px",padding:"15px",backgroundColor:"#f8f9fa",borderRadius:"8px",border:"1px solid #e0e0e0"},children:d.jsx("p",{style:{margin:0,color:"#666",fontSize:"14px",lineHeight:"1.5"},children:"Tip: Lessons with no completed robots are not shown here."})})]}),d.jsx("div",{className:"modal-footer",children:d.jsx("button",{className:"btn-secondary",onClick:()=>vs(!1),children:"Close"})})]})}),Ci&&d.jsx("div",{className:"modal-overlay",onClick:()=>xs(!1),children:d.jsxs("div",{className:"modal-content",onClick:_=>_.stopPropagation(),style:{maxWidth:"420px"},children:[d.jsx("div",{className:"modal-header",children:d.jsx("h2",{children:"Unsaved Changes"})}),d.jsx("div",{className:"modal-body",children:d.jsx("p",{children:"Wait! You have unsaved data you're leaving behind..."})}),d.jsxs("div",{className:"modal-footer",style:{display:"flex",gap:12,justifyContent:"flex-end"},children:[d.jsx("button",{className:"btn-secondary",onClick:async()=>{xs(!1),Bt&&await Bt()},children:"Leave"}),d.jsx("button",{className:"btn-primary",style:{background:"#4169e1",borderColor:"#4169e1"},onClick:async()=>{await yn(),xs(!1),Bt&&await Bt()},children:"Save"})]})]})})]})}function Kk(){const i=Fs(),[e,n]=C.useState(null),[r,o]=C.useState([]),[c,f]=C.useState(!1),[p,g]=C.useState(!1),[y,w]=C.useState(!1),[S,A]=C.useState(null),[F,G]=C.useState(""),[q,Q]=C.useState(""),[ee,$]=C.useState(""),[L,pe]=C.useState(""),[de,xe]=C.useState("#4169e1"),[V,R]=C.useState("blue"),[k,M]=C.useState(null),[N,z]=C.useState(null),[j,qe]=C.useState(""),[tt,ae]=C.useState(!1),[me,re]=C.useState(null),[Ae,O]=C.useState([]),[B,oe]=C.useState(""),[K,be]=C.useState(null),[we,Re]=C.useState(null),nt={blue:{name:"Blue",primary:"#4169e1",dark:"#4f7ad6",light:"#6b8cff"},red:{name:"Red",primary:"#dc3545",dark:"#d95c63",light:"#ff6b6b"},green:{name:"Green",primary:"#28a745",dark:"#4bbf6b",light:"#6bff8c"},orange:{name:"Orange",primary:"#fd7e14",dark:"#ff9c4a",light:"#ffb366"},purple:{name:"Purple",primary:"#6f42c1",dark:"#8d6fd1",light:"#b366ff"},teal:{name:"Teal",primary:"#20c997",dark:"#4fd6b0",light:"#6bffd9"},pink:{name:"Pink",primary:"#e83e8c",dark:"#e86fa7",light:"#ff6bb3"},indigo:{name:"Indigo",primary:"#6610f2",dark:"#7c4dff",light:"#9d66ff"}};C.useEffect(()=>{xe(nt[V].primary)},[V]),C.useEffect(()=>{S&&qe(S.name)},[S]);const vt=Z=>{qe(Z.target.value)},Hn=async()=>{if(!S||!j.trim()||j===S.name)return;const Z=r.map(ye=>ye.id===S.id?{...ye,name:j}:ye);await Gt(e,Z),o(Z),A({...S,name:j})},qn=Z=>{Z.key==="Enter"&&(Z.preventDefault(),Hn(),Z.target.blur())},pn=async Z=>{if(!Z)return;const ye=Yt(Qt,"users",Z.uid,"appdata","classrooms"),Se=await jn(ye);Se.exists()?o(Se.data().classrooms||[]):o([])},Gt=async(Z,ye)=>{if(!Z)return;const Se=Yt(Qt,"users",Z.uid,"appdata","classrooms");await es(Se,{classrooms:ye})},Fi=(Z,ye)=>{be(ye),Z.dataTransfer.effectAllowed="move",Z.dataTransfer.setData("text/html","")},ls=(Z,ye)=>{Z.preventDefault(),Z.dataTransfer.dropEffect="move",K&&K.id!==ye.id&&Re(ye)},Ar=Z=>{Re(null)},Ta=async(Z,ye)=>{if(Z.preventDefault(),!K||K.id===ye.id){be(null),Re(null);return}const Se=r.findIndex(Be=>Be.id===K.id),Ne=r.findIndex(Be=>Be.id===ye.id),ot=[...r],[ut]=ot.splice(Se,1);ot.splice(Ne,0,ut),o(ot),await Gt(e,ot),be(null),Re(null)},Ce=()=>{be(null),Re(null)},Ra=async Z=>{if(!Z)return;const ye=Yt(Qt,"users",Z.uid,"appdata","lessons"),Se=await jn(ye);Se.exists()?O(Se.data().lessons||[]):O([])},Pt=async(Z,ye)=>{const Se=Ae.find(ot=>ot.id===ye);if(!Se)return;const Ne=r.map(ot=>{if(ot.id===Z){const ut=ot.lessons||[];if(!ut.find(Be=>Be.id===ye))return{...ot,lessons:[...ut,Se]}}return ot});await Gt(e,Ne),o(Ne),(S==null?void 0:S.id)===Z&&A(Ne.find(ot=>ot.id===Z))},yi=async(Z,ye)=>{const Se=r.map(Ne=>{if(Ne.id===Z){const ot=Ne.lessons||[];return{...Ne,lessons:ot.filter(ut=>ut.id!==ye)}}return Ne});await Gt(e,Se),o(Se),(S==null?void 0:S.id)===Z&&A(Se.find(Ne=>Ne.id===Z))},it=async()=>{if(!F.trim())return;const Z=Dt.currentUser,ye=Yt(Qt,"users",Z.uid,"appdata","classrooms"),Se=await jn(ye);let Ne=[];Se.exists()&&(Ne=Se.data().classrooms||[]);const ut=[{id:Date.now().toString(),name:F,color:de,createdAt:new Date().toISOString(),createdBy:Z.email,students:[],groups:[]},...Ne];await Gt(Z,ut),o(ut),f(!1),G(""),xe("#4169e1"),R("blue")},Tr=async()=>{if(!q.trim())return;const Z={id:Date.now().toString(),name:q,email:L.trim()||null,addedAt:new Date().toISOString()},ye=r.map(Se=>Se.id===S.id?{...Se,students:[...Se.students,Z]}:Se);await Gt(e,ye),o(ye),g(!1),Q(""),pe(""),A(ye.find(Se=>Se.id===S.id))},Ut=async()=>{if(!ee.trim())return;const Z={id:Date.now().toString(),name:ee,students:[],createdAt:new Date().toISOString()},ye=r.map(Se=>Se.id===S.id?{...Se,groups:[...Se.groups,Z]}:Se);await Gt(e,ye),o(ye),w(!1),$(""),A(ye.find(Se=>Se.id===S.id))},Mn=async(Z,ye)=>{const Se=r.map(Ne=>{if(Ne.id===S.id){const ot=Ne.groups.map(ut=>{if(ut.id===Z){const Be=Ne.students.find(Gn=>Gn.id===ye);if(Be&&!ut.students.find(Gn=>Gn.id===ye))return{...ut,students:[...ut.students,Be]}}return ut});return{...Ne,groups:ot}}return Ne});await Gt(e,Se),o(Se),A(Se.find(Ne=>Ne.id===S.id))},pt=async(Z,ye)=>{const Se=r.map(Ne=>{if(Ne.id===S.id){const ot=Ne.groups.map(ut=>ut.id===Z?{...ut,students:ut.students.filter(Be=>Be.id!==ye)}:ut);return{...Ne,groups:ot}}return Ne});await Gt(e,Se),o(Se),A(Se.find(Ne=>Ne.id===S.id))},Et=Z=>{re(Z),ae(!0)},$e=async(Z,ye)=>{if(confirm("Are you sure you want to remove this student? This action cannot be undone.")){const Se=r.map(Ne=>{if(Ne.id===Z){const ot=Ne.students.filter(Be=>Be.id!==ye),ut=Ne.groups.map(Be=>({...Be,students:Be.students.filter(Gn=>Gn.id!==ye)}));return{...Ne,students:ot,groups:ut}}return Ne});await Gt(e,Se),o(Se),(S==null?void 0:S.id)===Z&&A(Se.find(Ne=>Ne.id===Z))}},ln=async(Z,ye)=>{if(confirm("Are you sure you want to delete this group? This action cannot be undone.")){const Se=r.map(Ne=>Ne.id===Z?{...Ne,groups:Ne.groups.filter(ot=>ot.id!==ye)}:Ne);await Gt(e,Se),o(Se),(S==null?void 0:S.id)===Z&&A(Se.find(Ne=>Ne.id===Z))}};return C.useEffect(()=>{const Z=Dt.onAuthStateChanged(ye=>{ye?(n(ye),pn(ye),Ra(ye)):i("/login")});return()=>Z()},[i]),C.useEffect(()=>{if(N===null)return;const Z=()=>z(null);return window.addEventListener("click",Z),()=>window.removeEventListener("click",Z)},[N]),d.jsxs("div",{className:"dashboard-container",children:[d.jsx(cu,{className:"slide-in-from-left"}),d.jsxs("div",{className:"main-content slide-in-from-bottom",children:[d.jsxs("div",{className:"top-bar slide-in-from-top",style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:24,marginBottom:32},children:[d.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[d.jsx("h1",{style:{margin:0,fontSize:"2rem",fontWeight:700,color:"#222"},children:"Classrooms"}),d.jsx("span",{style:{fontSize:"0.9rem",color:"#666",fontWeight:"400",fontFamily:"Space Mono, monospace"},children:"Create a classroom to organize students and groups for sessions"})]}),d.jsxs("button",{className:"create-classroom-btn fade-in-scale animate-on-mount-delay-1",onClick:()=>f(!0),children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",width:"20",height:"20",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),"Create Classroom"]})]}),d.jsxs("div",{className:"classrooms-content",children:[r.length>0&&d.jsx("div",{style:{marginBottom:24,display:"flex",width:"45%"},children:d.jsxs("div",{style:{display:"flex",alignItems:"center",background:"#fff",borderRadius:8,border:"1.5px solid #e0e0e0",boxShadow:"0 1px 4px rgba(65,105,225,0.04)",width:"100%",maxWidth:"100%"},children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:20,height:20,color:"#666",marginLeft:14,marginRight:8},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})}),d.jsx("input",{type:"text",placeholder:"Search classrooms by name...",value:B,onChange:Z=>oe(Z.target.value),style:{padding:"10px 16px",border:"none",outline:"none",fontSize:"1rem",width:"100%",background:"transparent",color:"#222",borderRadius:8}})]})}),r.length===0?d.jsxs("div",{className:"empty-state animate-on-mount-delay-2",children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"#b0b0b0",width:"60",height:"60",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"})}),d.jsx("h3",{children:"No Classrooms Yet"}),d.jsx("p",{children:"Create your first classroom to start managing students and groups"})]}):d.jsxs("div",{className:"classrooms-grid",children:[r.filter(Z=>Z.name.toLowerCase().includes(B.toLowerCase())).map((Z,ye)=>{var ut;const Se=Be=>{Be.stopPropagation(),z(N===Z.id?null:Z.id)},Ne=Be=>{Be.stopPropagation(),z(null),A(Z)},ot=Be=>{Be.stopPropagation(),z(null),Et(Z.id)};return d.jsxs("div",{className:`classroom-card fade-in-scale animate-on-mount-delay-${2+ye} ${(K==null?void 0:K.id)===Z.id?"dragging":""} ${(we==null?void 0:we.id)===Z.id?"drag-over":""}`,onClick:()=>A(Z),style:{cursor:"pointer",position:"relative",opacity:(K==null?void 0:K.id)===Z.id?.5:1,transform:(K==null?void 0:K.id)===Z.id?"rotate(5deg)":"none"},draggable:!0,onDragStart:Be=>Fi(Be,Z),onDragOver:Be=>ls(Be,Z),onDragLeave:Ar,onDrop:Be=>Ta(Be,Z),onDragEnd:Ce,children:[d.jsx("div",{className:"classroom-card-header-bar",style:{background:`${(ut=nt[Object.keys(nt).find(Be=>nt[Be].primary===Z.color)||"blue"])==null?void 0:ut.primary}`,position:"relative"},children:d.jsx("button",{className:"classroom-card-menu-btn",onClick:Se,style:{position:"absolute",top:8,right:8,background:"none",border:"none",cursor:"pointer",zIndex:20,padding:2},onMouseDown:Be=>Be.stopPropagation(),children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"#fff",width:"22",height:"22",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM12.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM18.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z"})})})}),N===Z.id&&d.jsxs("div",{className:"classroom-card-menu",style:{position:"absolute",top:38,right:8,background:"#fff",border:"1px solid #e0e0e0",borderRadius:8,boxShadow:"0 4px 16px rgba(0,0,0,0.10)",zIndex:1e4,minWidth:100,padding:"4px 0"},onClick:Be=>Be.stopPropagation(),children:[d.jsxs("button",{className:"menu-item",onClick:Ne,style:{width:"100%",padding:"4px 8px",background:"none",border:"none",textAlign:"left",cursor:"pointer",fontSize:"13px",fontWeight:400,color:"#222",display:"flex",alignItems:"center",gap:6},children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"16",height:"16",style:{minWidth:16},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"})}),"Edit"]}),d.jsxs("button",{className:"menu-item",onClick:ot,style:{width:"100%",padding:"4px 8px",background:"none",border:"none",textAlign:"left",color:"#dc3545",cursor:"pointer",fontSize:"13px",fontWeight:400,display:"flex",alignItems:"center",gap:6},children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"16",height:"16",style:{minWidth:16},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})}),"Delete"]})]}),d.jsx("span",{className:"classroom-card-avatar",style:{background:Z.color||"#4169e1",border:"4px solid #fff"},children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"28",height:"28",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"})})}),d.jsx("div",{className:"classroom-card-content",children:d.jsxs("div",{className:"classroom-info",children:[d.jsx("div",{className:"classroom-title",children:d.jsx("h3",{children:Z.name})}),d.jsxs("p",{children:[Z.students.length," students  ",Z.groups.length," groups"]})]})})]},Z.id)}),r.filter(Z=>Z.name.toLowerCase().includes(B.toLowerCase())).length===0&&B&&d.jsxs("div",{className:"empty-state animate-on-mount-delay-2",style:{gridColumn:"1 / -1",textAlign:"center",padding:40,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%"},children:[d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"#b0b0b0",width:"70",height:"70",style:{marginBottom:0},children:[d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6l4 2"}),d.jsx("circle",{cx:"12",cy:"12",r:"9",stroke:"#b0b0b0",strokeWidth:"1.5",fill:"none"})]}),d.jsx("h3",{style:{color:"#888",fontWeight:500,margin:"12px 0 8px 0"},children:"No Classrooms Found"}),d.jsx("p",{style:{color:"#bbb",margin:0},children:"Try using a different query..."})]})]})]})]}),c&&d.jsx("div",{className:"modal-overlay fade-in-scale",onClick:()=>f(!1),children:d.jsxs("div",{className:"modal-content create-classroom-modal",onClick:Z=>Z.stopPropagation(),children:[d.jsxs("div",{className:"modal-header",children:[d.jsx("h2",{children:"Create New Classroom"}),d.jsx("button",{className:"modal-close",onClick:()=>f(!1),children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"20",height:"20",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),d.jsxs("div",{className:"modal-body",children:[d.jsxs("div",{className:"form-group",children:[d.jsxs("label",{children:["Classroom Name ",d.jsx("span",{style:{color:"red"},children:"*"})]}),d.jsx("input",{type:"text",value:F,onChange:Z=>G(Z.target.value),placeholder:"Enter classroom name",onKeyPress:Z=>Z.key==="Enter"&&it()})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Theme"}),d.jsx("div",{className:"theme-buttons",children:Object.entries(nt).map(([Z,ye])=>d.jsx("button",{className:`theme-button ${V===Z?"selected":""}`,style:{background:`linear-gradient(to bottom, ${ye.dark} 0%, ${ye.dark} 50%, ${ye.light} 50%, ${ye.light} 100%)`},onClick:()=>R(Z),title:ye.name,"aria-label":`Select ${ye.name} theme`},Z))})]})]}),d.jsxs("div",{className:"modal-footer",children:[d.jsx("button",{className:"btn-secondary",onClick:()=>f(!1),children:"Cancel"}),d.jsx("button",{className:"btn-primary",style:{background:F.trim()?"#4169e1":"#e0e0e0",borderColor:F.trim()?"#4169e1":"#e0e0e0",color:F.trim()?"#fff":"#b0b0b0",cursor:F.trim()?"pointer":"not-allowed",fontFamily:"Space Mono, monospace"},onClick:it,disabled:!F.trim(),children:"Create"})]})]})}),S&&d.jsx("div",{className:"modal-overlay fade-in-scale",onClick:()=>A(null),children:d.jsxs("div",{className:"modal-content classroom-detail-modal",onClick:Z=>Z.stopPropagation(),children:[d.jsxs("div",{className:"modal-header",children:[d.jsx("div",{className:"classroom-header-info",children:d.jsx("input",{type:"text",value:j,onChange:vt,onKeyDown:qn,className:"classroom-name-input",onFocus:Z=>Z.target.style.borderColor="#4169e1",onBlur:Z=>{Z.target.style.borderColor="#e0e0e0",Hn()},placeholder:"Enter classroom name...",maxLength:60,style:{border:"1.5px solid #e0e0e0",borderRadius:"8px",padding:"12px 16px",fontSize:"1.4rem",fontWeight:"600",background:"#fff",color:"#222",transition:"border-color 0.2s ease",outline:"none",width:"100%",height:"45px",maxWidth:"250px",marginTop:"-10px",marginBottom:"0px"}})}),d.jsx("button",{className:"modal-close",onClick:()=>A(null),children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"20",height:"20",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),d.jsx("div",{className:"modal-body",children:d.jsx("div",{className:"classroom-detail-tabs",children:d.jsxs("div",{className:"tab-content",children:[d.jsxs("div",{className:"section",children:[d.jsxs("div",{className:"section-header",children:[d.jsx("h3",{children:"Students"}),d.jsxs("button",{className:"add-btn",onClick:()=>g(!0),children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",width:"16",height:"16",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),"Add Student"]})]}),d.jsx("div",{className:"students-list",children:S.students.length===0?d.jsx("div",{className:"empty-list",children:d.jsx("p",{children:"No students added yet"})}):S.students.map(Z=>d.jsxs("div",{className:"student-item",draggable:!0,onDragStart:ye=>{ye.dataTransfer.setData("studentId",Z.id)},children:[d.jsxs("div",{className:"student-info",children:[d.jsx("div",{className:"student-avatar",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"16",height:"16",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"})})}),d.jsxs("div",{className:"student-details",children:[d.jsx("span",{className:"student-name",children:Z.name}),d.jsx("span",{className:"student-email",children:Z.email})]})]}),d.jsx("button",{className:"remove-btn",onClick:()=>$e(S.id,Z.id),children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"14",height:"14",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]},Z.id))})]}),d.jsxs("div",{className:"section",children:[d.jsxs("div",{className:"section-header",children:[d.jsx("h3",{children:"Groups"}),d.jsxs("button",{className:"add-btn",onClick:()=>w(!0),children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",width:"16",height:"16",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),"Add Group"]})]}),d.jsx("div",{className:"groups-list",children:S.groups.length===0?d.jsx("div",{className:"empty-list",children:d.jsx("p",{children:"No groups created yet"})}):S.groups.map(Z=>d.jsxs("div",{className:`group-item${k===Z.id?" drag-over":""}`,onDragOver:ye=>ye.preventDefault(),onDragEnter:()=>M(Z.id),onDragLeave:()=>M(null),onDrop:ye=>{M(null);const Se=ye.dataTransfer.getData("studentId");Se&&Mn(Z.id,Se)},children:[d.jsxs("div",{className:"group-header",children:[d.jsx("h4",{children:Z.name}),d.jsx("button",{className:"remove-btn",onClick:()=>ln(S.id,Z.id),children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"14",height:"14",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),d.jsx("div",{className:"group-students",children:Z.students.length===0?d.jsx("p",{className:"no-students",children:"No students in this group"}):Z.students.map(ye=>d.jsxs("div",{className:"group-student",children:[d.jsx("span",{children:ye.name}),d.jsx("button",{className:"remove-student-btn",onClick:()=>pt(Z.id,ye.id),children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"12",height:"12",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]},ye.id))}),S.students.length>0&&d.jsx("div",{className:"add-to-group",children:d.jsxs("select",{onChange:ye=>{ye.target.value&&(Mn(Z.id,ye.target.value),ye.target.value="")},defaultValue:"",style:{fontFamily:"Space Mono, monospace"},children:[d.jsx("option",{value:"",children:"Add student to group..."}),S.students.filter(ye=>!Z.students.find(Se=>Se.id===ye.id)).map(ye=>d.jsx("option",{value:ye.id,children:ye.name},ye.id))]})})]},Z.id))})]}),d.jsxs("div",{className:"section",children:[d.jsx("div",{className:"section-header",children:d.jsx("h3",{children:"Lessons"})}),d.jsxs("div",{className:"lessons-list",children:[(S.lessons||[]).length===0?d.jsx("div",{className:"empty-list",children:d.jsx("p",{children:"No lessons assigned to this classroom"})}):S.lessons.map(Z=>d.jsxs("div",{className:"lesson-item",children:[d.jsxs("div",{className:"lesson-info",children:[d.jsx("div",{className:"lesson-avatar",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"16",height:"16",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"})})}),d.jsxs("div",{className:"lesson-details",children:[d.jsx("span",{className:"lesson-name",children:Z.title}),d.jsx("span",{className:"lesson-overview",children:Z.overview}),d.jsx("span",{className:"lesson-age",children:Z.age})]})]}),d.jsx("button",{className:"remove-btn",onClick:()=>yi(S.id,Z.id),children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"14",height:"14",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]},Z.id)),Ae.length>0&&d.jsx("div",{className:"add-to-lessons",children:d.jsxs("select",{onChange:Z=>{Z.target.value&&(Pt(S.id,Z.target.value),Z.target.value="")},defaultValue:"",style:{fontFamily:"Space Mono, monospace"},children:[d.jsx("option",{value:"",children:"Add lesson to classroom..."}),Ae.filter(Z=>!(S.lessons||[]).find(ye=>ye.id===Z.id)).map(Z=>d.jsx("option",{value:Z.id,children:Z.title},Z.id))]})})]})]})]})})})]})}),p&&d.jsx("div",{className:"modal-overlay fade-in-scale",onClick:()=>g(!1),children:d.jsxs("div",{className:"modal-content",onClick:Z=>Z.stopPropagation(),children:[d.jsxs("div",{className:"modal-header",children:[d.jsx("h2",{children:"Add Student"}),d.jsx("button",{className:"modal-close",onClick:()=>g(!1),children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"20",height:"20",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),d.jsxs("div",{className:"modal-body",children:[d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Student Name"}),d.jsx("input",{type:"text",value:q,onChange:Z=>Q(Z.target.value),placeholder:"Enter student name"})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Email"}),d.jsx("input",{type:"email",value:L,onChange:Z=>pe(Z.target.value),placeholder:"Enter student email (optional)"})]})]}),d.jsxs("div",{className:"modal-footer",children:[d.jsx("button",{className:"btn-secondary",onClick:()=>g(!1),children:"Cancel"}),d.jsx("button",{className:"btn-primary",onClick:Tr,children:"Add Student"})]})]})}),y&&d.jsx("div",{className:"modal-overlay fade-in-scale",onClick:()=>w(!1),children:d.jsxs("div",{className:"modal-content",onClick:Z=>Z.stopPropagation(),children:[d.jsxs("div",{className:"modal-header",children:[d.jsx("h2",{children:"Add Group"}),d.jsx("button",{className:"modal-close",onClick:()=>w(!1),children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"20",height:"20",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),d.jsx("div",{className:"modal-body",children:d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Group Name"}),d.jsx("input",{type:"text",value:ee,onChange:Z=>$(Z.target.value),placeholder:"Enter group name",onKeyPress:Z=>Z.key==="Enter"&&Ut()})]})}),d.jsxs("div",{className:"modal-footer",children:[d.jsx("button",{className:"btn-secondary",onClick:()=>w(!1),children:"Cancel"}),d.jsx("button",{className:"btn-primary",onClick:Ut,children:"Add Group"})]})]})}),tt&&d.jsx("div",{className:"modal-overlay",onClick:()=>ae(!1),children:d.jsxs("div",{className:"modal-content",onClick:Z=>Z.stopPropagation(),children:[d.jsx("div",{className:"modal-header",children:d.jsx("h2",{children:"Delete Classroom"})}),d.jsx("div",{className:"modal-body",children:d.jsx("p",{children:"Are you sure you want to delete this classroom? This action cannot be undone."})}),d.jsxs("div",{className:"modal-footer",children:[d.jsx("button",{className:"btn-secondary",onClick:()=>ae(!1),children:"Cancel"}),d.jsx("button",{className:"btn-primary",style:{background:"#dc3545",borderColor:"#dc3545"},onClick:()=>{if(!me)return;const Z=r.filter(ye=>ye.id!==me);Gt(e,Z),o(Z),(S==null?void 0:S.id)===me&&A(null),ae(!1),re(null)},children:"Delete"})]})]})})]})}const Yk=`
.session-view-content .lesson-details-title {
  font-family: 'Sniglet', serif !important;
  font-weight: 500 !important;
}
`,aa=[{id:"lesson1",title:"I Feel",overview:"Code Roversa to move on a grid toward an emotion based on a scenario.",age:"Pre-K - 2nd",link:"https://docs.google.com/document/d/15hDBUGjhOFpLSPmmkFJMXMcShzhLqdaBW9WTI3UOFXs/edit?tab=t.0#heading=h.a6lqxihc6dhl"},{id:"lesson2",title:"Hungry, Hungry Robot",overview:"Code Roversa to move on a grid to bring a story to life.",age:"Pre-K - 2nd",link:"https://docs.google.com/document/d/13E9Lz6l0eP4ZT-kJBxJST35SX4427fOw6XLlfcZpwm0/edit?tab=t.0#heading=h.a6lqxihc6dhl"},{id:"lesson3",title:"Grid Challenges",overview:"Code Roversa to move on a grid toward certain objectives.",age:"3rd - 5th",link:"https://docs.google.com/document/d/1qHoE0t6diltiHJbYG4hKiGGIJOQFLw3rRNMmLgWc-1E/edit?tab=t.0#heading=h.a6lqxihc6dhl"},{id:"lesson4",title:"Duck Duck Robot",overview:"Match numerals to number of obejcts and solve number facts by coding Roversa to the correct answer.",age:"Pre-K - 2nd",link:"https://docs.google.com/document/d/14jte14tL0Txgm1CdY9kZsbov0lZDoqv7UyhECFW8ioI/edit?tab=t.0#heading=h.a6lqxihc6dhl"}],bx=aa.map(i=>i.id);function so(i){if(!i)return!1;try{return new URL(i),!0}catch{return!1}}function Qk(){const[i,e]=C.useState(aa[0].id),[n,r]=C.useState(""),[o,c]=C.useState([]),[f,p]=C.useState(!1),[g,y]=C.useState({title:"",overview:"",age:"",link:""}),[w,S]=C.useState(!1),[A,F]=C.useState(null),[G,q]=C.useState(!1),[Q,ee]=C.useState(null),[$,L]=C.useState([]),[pe,de]=C.useState([]),[xe,V]=C.useState(""),[R,k]=C.useState([]),M=o.filter(B=>B.title.toLowerCase().includes(n.toLowerCase())||B.overview.toLowerCase().includes(n.toLowerCase())),N=M.find(B=>B.id===i)||M[0],z=Fs();Cc.useEffect(()=>{!N&&M.length>0&&e(M[0].id)},[n]);const j=async B=>{if(!B)return;const oe=Yt(Qt,"users",B.uid,"appdata","lessons"),K=await jn(oe);if(K.exists()){const be=K.data().lessons||[];be.length===0?(await es(oe,{lessons:[...aa]}),c([...aa])):c(be)}else await es(oe,{lessons:[...aa]}),c([...aa])},qe=async(B,oe)=>{if(!B)return;const K=Yt(Qt,"users",B.uid,"appdata","lessons");await es(K,{lessons:oe})},tt=async B=>{if(!B)return;const oe=Yt(Qt,"users",B.uid,"appdata","classrooms"),K=await jn(oe);K.exists()?L(K.data().classrooms||[]):L([])},ae=async(B,oe)=>{if(!B)return;const K=Yt(Qt,"users",B.uid,"appdata","classrooms");await es(K,{classrooms:oe})},me=async()=>{if(!Q)return;const B=$.map(oe=>{const K=(oe.lessons||[]).find(Re=>Re.id===Q.id),be=pe.includes(oe.id),we=R.includes(oe.id);return be&&!K?{...oe,lessons:[...oe.lessons||[],Q]}:we&&K?{...oe,lessons:(oe.lessons||[]).filter(Re=>Re.id!==Q.id)}:oe});await ae(Dt.currentUser,B),L(B),q(!1),ee(null),de([]),k([])},re=B=>{ee(B),de([]),k([]),q(!0)};Cc.useEffect(()=>{const B=Dt.onAuthStateChanged(oe=>{oe?(j(oe),tt(oe)):z("/login")});return()=>B()},[z]),Cc.useEffect(()=>{},[o]);const Ae=async()=>{if(!g.title.trim())return;const B=Dt.currentUser,oe=Yt(Qt,"users",B.uid,"appdata","lessons"),K=await jn(oe);let be=[];K.exists()?(be=K.data().lessons||[],be.length===0&&(be=[...aa])):be=[...aa];const we="lesson"+Date.now(),Re=[...be,{id:we,title:g.title,overview:g.overview,age:g.age,link:g.link}];await es(oe,{lessons:Re}),c(Re),e(we),p(!1),y({title:"",overview:"",age:"",link:""})},O=async B=>{var be;const oe=Dt.currentUser,K=o.filter(we=>we.id!==B);if(await qe(oe,K),c(K),i===B){const we=((be=K[0])==null?void 0:be.id)||"";e(we)}S(!1),F(null)};return d.jsxs(d.Fragment,{children:[d.jsx("style",{children:Yk}),d.jsxs("div",{className:"dashboard-container",children:[d.jsx(cu,{className:"slide-in-from-left"}),d.jsxs("div",{className:"main-content slide-in-from-bottom",children:[d.jsxs("div",{className:"top-bar slide-in-from-top",style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[d.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[d.jsx("h1",{className:"dashboard-welcome",style:{fontFamily:"Bevan, serif",fontWeight:400,margin:0},children:"Lessons"}),d.jsx("span",{style:{fontSize:"0.9rem",color:"#666",fontWeight:"400",fontFamily:"Space Mono, monospace"},children:"Choose or create a lesson for use in your classroom and related sessions"})]}),d.jsxs("button",{className:"create-classroom-btn",onClick:()=>p(!0),children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",width:"20",height:"20",style:{minWidth:20},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),"Create Lesson"]})]}),d.jsxs("div",{className:"session-view-content",style:{background:"white",borderRadius:18,boxShadow:"0 4px 24px rgba(65, 105, 225, 0.08)",padding:32,display:"flex",gap:32},children:[d.jsxs("div",{style:{minWidth:280,maxWidth:320,borderRight:"2px solid #e0e0e0",paddingRight:24},children:[d.jsxs("div",{style:{position:"relative",marginBottom:18},children:[d.jsx("span",{style:{position:"absolute",left:14,top:"50%",transform:"translateY(-50%)",pointerEvents:"none",zIndex:2,background:"transparent"},children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"#666",style:{width:20,height:20,background:"transparent",display:"block"},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})})}),d.jsx("input",{type:"text",placeholder:"Search lessons...",value:n,onChange:B=>r(B.target.value),style:{width:"100%",padding:"10px 14px 10px 40px",borderRadius:8,border:"1.5px solid #e0e0e0",fontSize:16,outline:"none",transition:"border 0.2s"},onFocus:B=>B.target.style.borderColor="#4169e1",onBlur:B=>B.target.style.borderColor="#e0e0e0"})]}),M.length===0&&d.jsx("div",{style:{color:"#888",fontStyle:"italic",marginTop:24},children:"No lessons found."}),M.map(B=>d.jsx($k,{lesson:B,isActive:i===B.id,onClick:()=>e(B.id),onDelete:()=>{F(B),S(!0)},canDelete:!bx.includes(B.id)},B.id))]}),d.jsx("div",{className:"slide-in-from-bottom",style:{flex:1,padding:24,background:"#f7f9fb",borderRadius:12,minHeight:220,position:"relative"},children:N?d.jsxs(d.Fragment,{children:[!bx.includes(N.id)&&d.jsxs("button",{onClick:()=>{F(N),S(!0)},title:"Delete lesson",style:{position:"absolute",right:30,top:27,display:"inline-flex",alignItems:"center",gap:6,padding:"6px 12px",background:"transparent",color:"#dc3545",border:"1px solid #dc3545",borderRadius:6,cursor:"pointer",fontSize:13,fontWeight:600,transition:"background 0.2s, border-color 0.2s, color 0.2s",zIndex:2},onMouseEnter:B=>{B.target.style.background="#dc3545",B.target.style.color="#fff"},onMouseLeave:B=>{B.target.style.background="transparent",B.target.style.color="#dc3545"},children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:16,height:16},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})}),"Delete"]}),d.jsx("h2",{className:"lesson-details-title",style:{color:"#4169e1",fontWeight:700,marginBottom:12},children:N.title}),d.jsxs("div",{style:{marginBottom:18,fontSize:16,color:"#444"},children:[d.jsx("strong",{children:"Overview:"})," ",N.overview]}),d.jsxs("div",{style:{marginBottom:18,fontSize:16,color:"#444"},children:[d.jsx("strong",{children:"Grade Levels:"})," ",N.age]}),d.jsx("a",{href:so(N.link)?N.link:void 0,target:"_blank",rel:"noopener noreferrer",style:{display:"inline-block",padding:"10px 28px",background:so(N.link)?"#4169e1":"#e0e0e0",color:so(N.link)?"#fff":"#b0b0b0",borderRadius:8,fontWeight:600,fontSize:16,textDecoration:"none",boxShadow:"0 2px 8px rgba(65, 105, 225, 0.10)",marginTop:8,marginRight:12,transition:"background 0.2s",cursor:so(N.link)?"pointer":"not-allowed",pointerEvents:so(N.link)?"auto":"none"},tabIndex:so(N.link)?0:-1,"aria-disabled":!so(N.link),children:d.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:10},children:["View Lesson",d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:22,height:22,marginLeft:0,display:"inline-block"},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"})})]})}),d.jsx("button",{onClick:()=>re(N),style:{display:"inline-block",padding:"10px 28px",background:"#6f42c1",color:"#fff",borderRadius:8,fontWeight:600,fontSize:16,border:"none",boxShadow:"0 2px 8px rgba(111, 66, 193, 0.10)",marginTop:8,transition:"background 0.2s",cursor:"pointer",transform:"translateY(0)"},onMouseEnter:B=>B.target.style.transform="translateY(0)",onMouseLeave:B=>B.target.style.transform="translateY(0)",children:d.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:10},children:["Assign to Classroom",d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:22,height:22,marginLeft:0,display:"inline-block"},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"})})]})})]}):d.jsx("div",{style:{color:"#888",fontStyle:"italic",marginTop:24},children:"No lesson selected."})},i)]})]}),f&&d.jsx("div",{className:"modal-overlay",onClick:()=>p(!1),children:d.jsxs("div",{className:"modal-content",onClick:B=>B.stopPropagation(),style:{maxWidth:480,paddingTop:18},children:[d.jsxs("div",{className:"modal-header",style:{marginBottom:8},children:[d.jsx("h2",{children:"Create Lesson"}),d.jsx("button",{className:"modal-close",onClick:()=>p(!1),children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"20",height:"20",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),d.jsxs("div",{className:"modal-body",children:[d.jsxs("div",{style:{marginBottom:18},children:[d.jsxs("label",{style:{fontWeight:600,color:"#4169e1",marginBottom:6,display:"block",fontFamily:"Space Mono, monospace"},children:["Lesson Name ",d.jsx("span",{style:{color:"red"},children:"*"})]}),d.jsx("input",{type:"text",value:g.title,onChange:B=>y({...g,title:B.target.value}),placeholder:"Enter lesson name",style:{width:"100%",padding:"10px 12px",borderRadius:8,border:"1.5px solid #e0e0e0",fontSize:16,marginBottom:8,fontFamily:"Space Mono, monospace"},required:!0})]}),d.jsxs("div",{style:{marginBottom:18},children:[d.jsx("label",{style:{fontWeight:600,color:"#4169e1",marginBottom:6,display:"block",fontFamily:"Space Mono, monospace"},children:"Overview"}),d.jsx("textarea",{value:g.overview,onChange:B=>y({...g,overview:B.target.value}),placeholder:"Enter lesson overview",style:{width:"100%",padding:"10px 12px",borderRadius:8,border:"1.5px solid #e0e0e0",fontSize:16,minHeight:60,resize:"vertical",fontFamily:"Space Mono, monospace"}})]}),d.jsxs("div",{style:{marginBottom:18},children:[d.jsx("label",{style:{fontWeight:600,color:"#4169e1",marginBottom:6,display:"block",fontFamily:"Space Mono, monospace"},children:"Grade Levels"}),d.jsx("input",{type:"text",value:g.age,onChange:B=>y({...g,age:B.target.value}),placeholder:"Enter grade levels",style:{width:"100%",padding:"10px 12px",borderRadius:8,border:"1.5px solid #e0e0e0",fontSize:16,fontFamily:"Space Mono, monospace"}})]}),d.jsxs("div",{style:{marginBottom:18},children:[d.jsx("label",{style:{fontWeight:600,color:"#4169e1",marginBottom:6,display:"block",fontFamily:"Space Mono, monospace"},children:"Lesson Link"}),d.jsx("input",{type:"text",value:g.link,onChange:B=>y({...g,link:B.target.value}),placeholder:"Enter lesson link",style:{width:"100%",padding:"10px 12px",borderRadius:8,border:"1.5px solid #e0e0e0",fontSize:16,fontFamily:"Space Mono, monospace"}})]})]}),d.jsxs("div",{className:"modal-footer",style:{display:"flex",gap:12,justifyContent:"flex-end"},children:[d.jsx("button",{className:"btn-secondary",onClick:()=>p(!1),children:"Cancel"}),d.jsx("button",{className:"btn-primary",style:{background:g.title.trim()?"#4169e1":"#e0e0e0",borderColor:g.title.trim()?"#4169e1":"#e0e0e0",color:g.title.trim()?"#fff":"#b0b0b0",cursor:g.title.trim()?"pointer":"not-allowed",fontFamily:"Space Mono, monospace"},onClick:Ae,disabled:!g.title.trim(),children:"Create"})]})]})}),w&&A&&d.jsx("div",{className:"modal-overlay",onClick:()=>S(!1),children:d.jsxs("div",{className:"modal-content",onClick:B=>B.stopPropagation(),style:{maxWidth:420},children:[d.jsx("div",{className:"modal-header",children:d.jsx("h2",{children:"Delete Lesson"})}),d.jsx("div",{className:"modal-body",children:d.jsxs("p",{children:["Are you sure you want to delete the lesson ",d.jsx("b",{children:A.title}),"? This action cannot be undone."]})}),d.jsxs("div",{className:"modal-footer",style:{display:"flex",gap:12,justifyContent:"flex-end"},children:[d.jsx("button",{className:"btn-secondary",onClick:()=>S(!1),children:"Cancel"}),d.jsx("button",{className:"btn-primary",style:{background:"#dc3545",borderColor:"#dc3545"},onClick:()=>O(A.id),children:"Delete"})]})]})}),G&&Q&&d.jsx("div",{className:"modal-overlay",onClick:()=>q(!1),children:d.jsxs("div",{className:"modal-content",onClick:B=>B.stopPropagation(),style:{maxWidth:"480px",width:"480px",height:"600px",display:"flex",flexDirection:"column"},children:[d.jsxs("div",{className:"modal-header",children:[d.jsx("h2",{children:"Assign Lesson to Classrooms"}),d.jsx("button",{className:"modal-close",onClick:()=>q(!1),children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"20",height:"20",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),d.jsxs("div",{className:"modal-body",style:{flex:1,overflow:"hidden",display:"flex",flexDirection:"column"},children:[d.jsx("div",{style:{marginBottom:20,marginTop:-20},children:pe.length>0||R.length>0?d.jsxs("div",{style:{padding:"8px 12px",backgroundColor:"#4169e1",color:"#fff",borderRadius:6,fontSize:14,fontWeight:600,textAlign:"center"},children:[pe.length>0&&`${pe.length} to assign`,pe.length>0&&R.length>0&&"  ",R.length>0&&`${R.length} to unassign`]}):d.jsx("p",{style:{color:"#666",fontSize:14},children:"Select the classrooms you want to assign this lesson to:"})}),$.length===0?d.jsx("div",{style:{textAlign:"center",padding:"20px",color:"#888"},children:d.jsx("p",{children:"No classrooms found. Create a classroom first to assign lessons."})}):d.jsxs(d.Fragment,{children:[d.jsxs("div",{style:{marginBottom:16,position:"relative",marginTop:-10},children:[d.jsx("span",{style:{position:"absolute",left:14,top:"50%",transform:"translateY(-50%)",pointerEvents:"none",zIndex:2,display:"flex",alignItems:"center"},children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"#666",style:{width:18,height:18},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})})}),d.jsx("input",{type:"text",placeholder:"Search classrooms...",value:xe,onChange:B=>V(B.target.value),style:{width:"100%",padding:"10px 14px 10px 40px",borderRadius:8,border:"1.5px solid #e0e0e0",fontSize:14,outline:"none",transition:"border 0.2s",fontFamily:"Space Mono, monospace"},onFocus:B=>B.target.style.borderColor="#4169e1",onBlur:B=>B.target.style.borderColor="#e0e0e0"})]}),d.jsxs("div",{style:{maxHeight:"170px",overflowY:"auto",flex:1},children:[$.filter(B=>B.name.toLowerCase().includes(xe.toLowerCase())).sort((B,oe)=>{const K=(B.lessons||[]).find(we=>we.id===Q.id),be=(oe.lessons||[]).find(we=>we.id===Q.id);return K&&!be?-1:!K&&be?1:B.name.localeCompare(oe.name)}).map(B=>{var K,be;const oe=(B.lessons||[]).find(we=>we.id===Q.id);return d.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"12px 16px",border:"1px solid #e0e0e0",borderRadius:8,marginBottom:8,background:B.color||"#4169e1",color:"#fff",opacity:oe?.9:1,height:"60px"},children:[d.jsx("div",{onClick:we=>{if(we.target.closest("input"))return;(oe?!R.includes(B.id):pe.includes(B.id))?oe?k([...R,B.id]):de(pe.filter(nt=>nt!==B.id)):(oe||de([...pe,B.id]),k(R.filter(nt=>nt!==B.id)))},style:{width:"20px",height:"20px",border:"2px solid #fff",borderRadius:"4px",marginRight:12,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",backgroundColor:(oe?!R.includes(B.id):pe.includes(B.id))?"#fff":"transparent",transition:"all 0.2s ease"},children:(oe?!R.includes(B.id):pe.includes(B.id))&&d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:14,height:14,color:B.color||"#4169e1"},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"})})}),d.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",justifyContent:"center",height:"100%",padding:"0px 0"},children:[d.jsx("div",{style:{fontWeight:600,marginBottom:4},children:B.name}),d.jsxs("div",{style:{fontSize:12,color:"rgba(255,255,255,0.8)"},children:[((K=B.students)==null?void 0:K.length)||0," students  ",((be=B.groups)==null?void 0:be.length)||0," groups"]})]})]},B.id)}),$.filter(B=>B.name.toLowerCase().includes(xe.toLowerCase())).length===0&&xe&&d.jsx("div",{style:{textAlign:"center",padding:"20px",color:"#888"},children:d.jsxs("p",{children:['No classrooms found matching "',xe,'"']})})]})]})]}),d.jsxs("div",{className:"modal-footer",style:{display:"flex",gap:12,justifyContent:"flex-end"},children:[d.jsx("button",{className:"btn-secondary",onClick:()=>q(!1),children:"Cancel"}),d.jsx("button",{className:"btn-primary",style:{background:pe.length>0||R.length>0?"#28a745":"#e0e0e0",borderColor:pe.length>0||R.length>0?"#28a745":"#e0e0e0",color:pe.length>0||R.length>0?"#fff":"#b0b0b0",cursor:pe.length>0||R.length>0?"pointer":"not-allowed"},onClick:me,disabled:pe.length===0&&R.length===0,children:"Apply Changes"})]})]})})]})]})}function $k({lesson:i,isActive:e,onClick:n,onDelete:r,canDelete:o}){const[c,f]=Cc.useState(!1),p=i.title.length>14?i.title.slice(0,14)+"":i.title;return d.jsxs("div",{style:{position:"relative",display:"flex",alignItems:"center"},onMouseEnter:()=>f(!0),onMouseLeave:()=>f(!1),children:[d.jsx("button",{onClick:n,className:e?"active":"",style:{width:"100%",textAlign:"left",padding:"16px 18px",marginBottom:8,border:"none",borderRadius:10,background:e?"#f0f4ff":"none",color:e?"#4169e1":"#222",fontWeight:700,fontSize:17,cursor:"pointer",transition:"background 0.2s, color 0.2s",outline:"none",boxShadow:e?"0 2px 8px rgba(65, 105, 225, 0.08)":"none",borderLeft:e?"4px solid #4169e1":"4px solid transparent",display:"block",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:p}),o&&c&&d.jsx("button",{onClick:r,title:"Delete lesson",style:{position:"absolute",right:30,top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",padding:0,margin:0,zIndex:2,color:"#4169e1",opacity:1,transition:"color 0.2s"},children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:16,height:16},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})})})]})}function Jk(){const i=as(),e=C.useRef(i);return C.useEffect(()=>{const n=e.current.pathname.match(/^\/sessions\/[^/]+$/),r=i.pathname.match(/^\/sessions\/[^/]+$/);n&&!r&&window.location.reload(),e.current=i},[i]),d.jsxs(sE,{children:[d.jsx(mr,{path:"/",element:d.jsx(wk,{})}),d.jsx(mr,{path:"/login",element:d.jsx(Sk,{})}),d.jsx(mr,{path:"/signup",element:d.jsx(Ek,{})}),d.jsx(mr,{path:"/dashboard",element:d.jsx(Mk,{})}),d.jsx(mr,{path:"/sessions",element:d.jsx(Lk,{})}),d.jsx(mr,{path:"/sessions/:sessionId",element:d.jsx(Zk,{})}),d.jsx(mr,{path:"/classrooms",element:d.jsx(Kk,{})}),d.jsx(mr,{path:"/lessons",element:d.jsx(Qk,{})})]})}function eN(){return d.jsx(CE,{children:d.jsx("div",{className:"App",children:d.jsx(Jk,{})})})}hS.createRoot(document.getElementById("root")).render(d.jsx(Cc.StrictMode,{children:d.jsx(eN,{})}));
