(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const h of c.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&r(h)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();function v_(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var um={exports:{}},rc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _v;function tE(){if(_v)return rc;_v=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,o,c){var h=null;if(c!==void 0&&(h=""+c),o.key!==void 0&&(h=""+o.key),"key"in o){c={};for(var p in o)p!=="key"&&(c[p]=o[p])}else c=o;return o=c.ref,{$$typeof:i,type:r,key:h,ref:o!==void 0?o:null,props:c}}return rc.Fragment=e,rc.jsx=n,rc.jsxs=n,rc}var bv;function nE(){return bv||(bv=1,um.exports=tE()),um.exports}var f=nE(),dm={exports:{}},Ge={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wv;function iE(){if(wv)return Ge;wv=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),h=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),x=Symbol.iterator;function A(j){return j===null||typeof j!="object"?null:(j=x&&j[x]||j["@@iterator"],typeof j=="function"?j:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z=Object.assign,H={};function Y(j,se,ge){this.props=j,this.context=se,this.refs=H,this.updater=ge||P}Y.prototype.isReactComponent={},Y.prototype.setState=function(j,se){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,se,"setState")},Y.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function $(){}$.prototype=Y.prototype;function Z(j,se,ge){this.props=j,this.context=se,this.refs=H,this.updater=ge||P}var X=Z.prototype=new $;X.constructor=Z,z(X,Y.prototype),X.isPureReactComponent=!0;var te=Array.isArray,le={H:null,A:null,T:null,S:null,V:null},pe=Object.prototype.hasOwnProperty;function k(j,se,ge,ce,we,Ie){return ge=Ie.ref,{$$typeof:i,type:j,key:se,ref:ge!==void 0?ge:null,props:Ie}}function R(j,se){return k(j.type,se,void 0,void 0,void 0,j.props)}function C(j){return typeof j=="object"&&j!==null&&j.$$typeof===i}function M(j){var se={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(ge){return se[ge]})}var D=/\/+/g;function L(j,se){return typeof j=="object"&&j!==null&&j.key!=null?M(""+j.key):se.toString(36)}function N(){}function ze(j){switch(j.status){case"fulfilled":return j.value;case"rejected":throw j.reason;default:switch(typeof j.status=="string"?j.then(N,N):(j.status="pending",j.then(function(se){j.status==="pending"&&(j.status="fulfilled",j.value=se)},function(se){j.status==="pending"&&(j.status="rejected",j.reason=se)})),j.status){case"fulfilled":return j.value;case"rejected":throw j.reason}}throw j}function Qe(j,se,ge,ce,we){var Ie=typeof j;(Ie==="undefined"||Ie==="boolean")&&(j=null);var ke=!1;if(j===null)ke=!0;else switch(Ie){case"bigint":case"string":case"number":ke=!0;break;case"object":switch(j.$$typeof){case i:case e:ke=!0;break;case w:return ke=j._init,Qe(ke(j._payload),se,ge,ce,we)}}if(ke)return we=we(j),ke=ce===""?"."+L(j,0):ce,te(we)?(ge="",ke!=null&&(ge=ke.replace(D,"$&/")+"/"),Qe(we,se,ge,"",function(qn){return qn})):we!=null&&(C(we)&&(we=R(we,ge+(we.key==null||j&&j.key===we.key?"":(""+we.key).replace(D,"$&/")+"/")+ke)),se.push(we)),1;ke=0;var lt=ce===""?".":ce+":";if(te(j))for(var dt=0;dt<j.length;dt++)ce=j[dt],Ie=lt+L(ce,dt),ke+=Qe(ce,se,ge,Ie,we);else if(dt=A(j),typeof dt=="function")for(j=dt.call(j),dt=0;!(ce=j.next()).done;)ce=ce.value,Ie=lt+L(ce,dt++),ke+=Qe(ce,se,ge,Ie,we);else if(Ie==="object"){if(typeof j.then=="function")return Qe(ze(j),se,ge,ce,we);throw se=String(j),Error("Objects are not valid as a React child (found: "+(se==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":se)+"). If you meant to render a collection of children, use an array instead.")}return ke}function ie(j,se,ge){if(j==null)return j;var ce=[],we=0;return Qe(j,ce,"","",function(Ie){return se.call(ge,Ie,we++)}),ce}function fe(j){if(j._status===-1){var se=j._result;se=se(),se.then(function(ge){(j._status===0||j._status===-1)&&(j._status=1,j._result=ge)},function(ge){(j._status===0||j._status===-1)&&(j._status=2,j._result=ge)}),j._status===-1&&(j._status=0,j._result=se)}if(j._status===1)return j._result.default;throw j._result}var ne=typeof reportError=="function"?reportError:function(j){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var se=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof j=="object"&&j!==null&&typeof j.message=="string"?String(j.message):String(j),error:j});if(!window.dispatchEvent(se))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",j);return}console.error(j)};function be(){}return Ge.Children={map:ie,forEach:function(j,se,ge){ie(j,function(){se.apply(this,arguments)},ge)},count:function(j){var se=0;return ie(j,function(){se++}),se},toArray:function(j){return ie(j,function(se){return se})||[]},only:function(j){if(!C(j))throw Error("React.Children.only expected to receive a single React element child.");return j}},Ge.Component=Y,Ge.Fragment=n,Ge.Profiler=o,Ge.PureComponent=Z,Ge.StrictMode=r,Ge.Suspense=g,Ge.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=le,Ge.__COMPILER_RUNTIME={__proto__:null,c:function(j){return le.H.useMemoCache(j)}},Ge.cache=function(j){return function(){return j.apply(null,arguments)}},Ge.cloneElement=function(j,se,ge){if(j==null)throw Error("The argument must be a React element, but you passed "+j+".");var ce=z({},j.props),we=j.key,Ie=void 0;if(se!=null)for(ke in se.ref!==void 0&&(Ie=void 0),se.key!==void 0&&(we=""+se.key),se)!pe.call(se,ke)||ke==="key"||ke==="__self"||ke==="__source"||ke==="ref"&&se.ref===void 0||(ce[ke]=se[ke]);var ke=arguments.length-2;if(ke===1)ce.children=ge;else if(1<ke){for(var lt=Array(ke),dt=0;dt<ke;dt++)lt[dt]=arguments[dt+2];ce.children=lt}return k(j.type,we,void 0,void 0,Ie,ce)},Ge.createContext=function(j){return j={$$typeof:h,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null},j.Provider=j,j.Consumer={$$typeof:c,_context:j},j},Ge.createElement=function(j,se,ge){var ce,we={},Ie=null;if(se!=null)for(ce in se.key!==void 0&&(Ie=""+se.key),se)pe.call(se,ce)&&ce!=="key"&&ce!=="__self"&&ce!=="__source"&&(we[ce]=se[ce]);var ke=arguments.length-2;if(ke===1)we.children=ge;else if(1<ke){for(var lt=Array(ke),dt=0;dt<ke;dt++)lt[dt]=arguments[dt+2];we.children=lt}if(j&&j.defaultProps)for(ce in ke=j.defaultProps,ke)we[ce]===void 0&&(we[ce]=ke[ce]);return k(j,Ie,void 0,void 0,null,we)},Ge.createRef=function(){return{current:null}},Ge.forwardRef=function(j){return{$$typeof:p,render:j}},Ge.isValidElement=C,Ge.lazy=function(j){return{$$typeof:w,_payload:{_status:-1,_result:j},_init:fe}},Ge.memo=function(j,se){return{$$typeof:y,type:j,compare:se===void 0?null:se}},Ge.startTransition=function(j){var se=le.T,ge={};le.T=ge;try{var ce=j(),we=le.S;we!==null&&we(ge,ce),typeof ce=="object"&&ce!==null&&typeof ce.then=="function"&&ce.then(be,ne)}catch(Ie){ne(Ie)}finally{le.T=se}},Ge.unstable_useCacheRefresh=function(){return le.H.useCacheRefresh()},Ge.use=function(j){return le.H.use(j)},Ge.useActionState=function(j,se,ge){return le.H.useActionState(j,se,ge)},Ge.useCallback=function(j,se){return le.H.useCallback(j,se)},Ge.useContext=function(j){return le.H.useContext(j)},Ge.useDebugValue=function(){},Ge.useDeferredValue=function(j,se){return le.H.useDeferredValue(j,se)},Ge.useEffect=function(j,se,ge){var ce=le.H;if(typeof ge=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ce.useEffect(j,se)},Ge.useId=function(){return le.H.useId()},Ge.useImperativeHandle=function(j,se,ge){return le.H.useImperativeHandle(j,se,ge)},Ge.useInsertionEffect=function(j,se){return le.H.useInsertionEffect(j,se)},Ge.useLayoutEffect=function(j,se){return le.H.useLayoutEffect(j,se)},Ge.useMemo=function(j,se){return le.H.useMemo(j,se)},Ge.useOptimistic=function(j,se){return le.H.useOptimistic(j,se)},Ge.useReducer=function(j,se,ge){return le.H.useReducer(j,se,ge)},Ge.useRef=function(j){return le.H.useRef(j)},Ge.useState=function(j){return le.H.useState(j)},Ge.useSyncExternalStore=function(j,se,ge){return le.H.useSyncExternalStore(j,se,ge)},Ge.useTransition=function(){return le.H.useTransition()},Ge.version="19.1.0",Ge}var xv;function lp(){return xv||(xv=1,dm.exports=iE()),dm.exports}var I=lp();const gc=v_(I);var hm={exports:{}},ac={},fm={exports:{}},mm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ev;function sE(){return Ev||(Ev=1,function(i){function e(ie,fe){var ne=ie.length;ie.push(fe);e:for(;0<ne;){var be=ne-1>>>1,j=ie[be];if(0<o(j,fe))ie[be]=fe,ie[ne]=j,ne=be;else break e}}function n(ie){return ie.length===0?null:ie[0]}function r(ie){if(ie.length===0)return null;var fe=ie[0],ne=ie.pop();if(ne!==fe){ie[0]=ne;e:for(var be=0,j=ie.length,se=j>>>1;be<se;){var ge=2*(be+1)-1,ce=ie[ge],we=ge+1,Ie=ie[we];if(0>o(ce,ne))we<j&&0>o(Ie,ce)?(ie[be]=Ie,ie[we]=ne,be=we):(ie[be]=ce,ie[ge]=ne,be=ge);else if(we<j&&0>o(Ie,ne))ie[be]=Ie,ie[we]=ne,be=we;else break e}}return fe}function o(ie,fe){var ne=ie.sortIndex-fe.sortIndex;return ne!==0?ne:ie.id-fe.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;i.unstable_now=function(){return c.now()}}else{var h=Date,p=h.now();i.unstable_now=function(){return h.now()-p}}var g=[],y=[],w=1,x=null,A=3,P=!1,z=!1,H=!1,Y=!1,$=typeof setTimeout=="function"?setTimeout:null,Z=typeof clearTimeout=="function"?clearTimeout:null,X=typeof setImmediate<"u"?setImmediate:null;function te(ie){for(var fe=n(y);fe!==null;){if(fe.callback===null)r(y);else if(fe.startTime<=ie)r(y),fe.sortIndex=fe.expirationTime,e(g,fe);else break;fe=n(y)}}function le(ie){if(H=!1,te(ie),!z)if(n(g)!==null)z=!0,pe||(pe=!0,L());else{var fe=n(y);fe!==null&&Qe(le,fe.startTime-ie)}}var pe=!1,k=-1,R=5,C=-1;function M(){return Y?!0:!(i.unstable_now()-C<R)}function D(){if(Y=!1,pe){var ie=i.unstable_now();C=ie;var fe=!0;try{e:{z=!1,H&&(H=!1,Z(k),k=-1),P=!0;var ne=A;try{t:{for(te(ie),x=n(g);x!==null&&!(x.expirationTime>ie&&M());){var be=x.callback;if(typeof be=="function"){x.callback=null,A=x.priorityLevel;var j=be(x.expirationTime<=ie);if(ie=i.unstable_now(),typeof j=="function"){x.callback=j,te(ie),fe=!0;break t}x===n(g)&&r(g),te(ie)}else r(g);x=n(g)}if(x!==null)fe=!0;else{var se=n(y);se!==null&&Qe(le,se.startTime-ie),fe=!1}}break e}finally{x=null,A=ne,P=!1}fe=void 0}}finally{fe?L():pe=!1}}}var L;if(typeof X=="function")L=function(){X(D)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,ze=N.port2;N.port1.onmessage=D,L=function(){ze.postMessage(null)}}else L=function(){$(D,0)};function Qe(ie,fe){k=$(function(){ie(i.unstable_now())},fe)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(ie){ie.callback=null},i.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<ie?Math.floor(1e3/ie):5},i.unstable_getCurrentPriorityLevel=function(){return A},i.unstable_next=function(ie){switch(A){case 1:case 2:case 3:var fe=3;break;default:fe=A}var ne=A;A=fe;try{return ie()}finally{A=ne}},i.unstable_requestPaint=function(){Y=!0},i.unstable_runWithPriority=function(ie,fe){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var ne=A;A=ie;try{return fe()}finally{A=ne}},i.unstable_scheduleCallback=function(ie,fe,ne){var be=i.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?be+ne:be):ne=be,ie){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=ne+j,ie={id:w++,callback:fe,priorityLevel:ie,startTime:ne,expirationTime:j,sortIndex:-1},ne>be?(ie.sortIndex=ne,e(y,ie),n(g)===null&&ie===n(y)&&(H?(Z(k),k=-1):H=!0,Qe(le,ne-be))):(ie.sortIndex=j,e(g,ie),z||P||(z=!0,pe||(pe=!0,L()))),ie},i.unstable_shouldYield=M,i.unstable_wrapCallback=function(ie){var fe=A;return function(){var ne=A;A=fe;try{return ie.apply(this,arguments)}finally{A=ne}}}}(mm)),mm}var Sv;function rE(){return Sv||(Sv=1,fm.exports=sE()),fm.exports}var pm={exports:{}},Dn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Av;function aE(){if(Av)return Dn;Av=1;var i=lp();function e(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var w=2;w<arguments.length;w++)y+="&args[]="+encodeURIComponent(arguments[w])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(g,y,w){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:x==null?null:""+x,children:g,containerInfo:y,implementation:w}}var h=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Dn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Dn.createPortal=function(g,y){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return c(g,y,null,w)},Dn.flushSync=function(g){var y=h.T,w=r.p;try{if(h.T=null,r.p=2,g)return g()}finally{h.T=y,r.p=w,r.d.f()}},Dn.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,r.d.C(g,y))},Dn.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},Dn.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var w=y.as,x=p(w,y.crossOrigin),A=typeof y.integrity=="string"?y.integrity:void 0,P=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;w==="style"?r.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:x,integrity:A,fetchPriority:P}):w==="script"&&r.d.X(g,{crossOrigin:x,integrity:A,fetchPriority:P,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Dn.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var w=p(y.as,y.crossOrigin);r.d.M(g,{crossOrigin:w,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&r.d.M(g)},Dn.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var w=y.as,x=p(w,y.crossOrigin);r.d.L(g,w,{crossOrigin:x,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Dn.preloadModule=function(g,y){if(typeof g=="string")if(y){var w=p(y.as,y.crossOrigin);r.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:w,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else r.d.m(g)},Dn.requestFormReset=function(g){r.d.r(g)},Dn.unstable_batchedUpdates=function(g,y){return g(y)},Dn.useFormState=function(g,y,w){return h.H.useFormState(g,y,w)},Dn.useFormStatus=function(){return h.H.useHostTransitionStatus()},Dn.version="19.1.0",Dn}var Tv;function __(){if(Tv)return pm.exports;Tv=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),pm.exports=aE(),pm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rv;function oE(){if(Rv)return ac;Rv=1;var i=rE(),e=lp(),n=__();function r(t){var s="https://react.dev/errors/"+t;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var s=t,a=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(a=s.return),t=s.return;while(t)}return s.tag===3?a:null}function h(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function p(t){if(c(t)!==t)throw Error(r(188))}function g(t){var s=t.alternate;if(!s){if(s=c(t),s===null)throw Error(r(188));return s!==t?null:t}for(var a=t,l=s;;){var d=a.return;if(d===null)break;var m=d.alternate;if(m===null){if(l=d.return,l!==null){a=l;continue}break}if(d.child===m.child){for(m=d.child;m;){if(m===a)return p(d),t;if(m===l)return p(d),s;m=m.sibling}throw Error(r(188))}if(a.return!==l.return)a=d,l=m;else{for(var b=!1,S=d.child;S;){if(S===a){b=!0,a=d,l=m;break}if(S===l){b=!0,l=d,a=m;break}S=S.sibling}if(!b){for(S=m.child;S;){if(S===a){b=!0,a=m,l=d;break}if(S===l){b=!0,l=m,a=d;break}S=S.sibling}if(!b)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?t:s}function y(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t;for(t=t.child;t!==null;){if(s=y(t),s!==null)return s;t=t.sibling}return null}var w=Object.assign,x=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),P=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),H=Symbol.for("react.strict_mode"),Y=Symbol.for("react.profiler"),$=Symbol.for("react.provider"),Z=Symbol.for("react.consumer"),X=Symbol.for("react.context"),te=Symbol.for("react.forward_ref"),le=Symbol.for("react.suspense"),pe=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function L(t){return t===null||typeof t!="object"?null:(t=D&&t[D]||t["@@iterator"],typeof t=="function"?t:null)}var N=Symbol.for("react.client.reference");function ze(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===N?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case z:return"Fragment";case Y:return"Profiler";case H:return"StrictMode";case le:return"Suspense";case pe:return"SuspenseList";case C:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case P:return"Portal";case X:return(t.displayName||"Context")+".Provider";case Z:return(t._context.displayName||"Context")+".Consumer";case te:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case k:return s=t.displayName||null,s!==null?s:ze(t.type)||"Memo";case R:s=t._payload,t=t._init;try{return ze(t(s))}catch{}}return null}var Qe=Array.isArray,ie=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fe=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne={pending:!1,data:null,method:null,action:null},be=[],j=-1;function se(t){return{current:t}}function ge(t){0>j||(t.current=be[j],be[j]=null,j--)}function ce(t,s){j++,be[j]=t.current,t.current=s}var we=se(null),Ie=se(null),ke=se(null),lt=se(null);function dt(t,s){switch(ce(ke,s),ce(Ie,t),ce(we,null),s.nodeType){case 9:case 11:t=(t=s.documentElement)&&(t=t.namespaceURI)?Wy(t):0;break;default:if(t=s.tagName,s=s.namespaceURI)s=Wy(s),t=Zy(s,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}ge(we),ce(we,t)}function qn(){ge(we),ge(Ie),ge(ke)}function Vn(t){t.memoizedState!==null&&ce(lt,t);var s=we.current,a=Zy(s,t.type);s!==a&&(ce(Ie,t),ce(we,a))}function un(t){Ie.current===t&&(ge(we),ge(Ie)),lt.current===t&&(ge(lt),ec._currentValue=ne)}var de=Object.prototype.hasOwnProperty,ve=i.unstable_scheduleCallback,De=i.unstable_cancelCallback,qe=i.unstable_shouldYield,In=i.unstable_requestPaint,$e=i.unstable_now,wt=i.unstable_getCurrentPriorityLevel,oi=i.unstable_ImmediatePriority,Pn=i.unstable_UserBlockingPriority,Ms=i.unstable_NormalPriority,so=i.unstable_LowPriority,Pi=i.unstable_IdlePriority,Ls=i.log,ha=i.unstable_setDisableYieldValue,Ct=null,rt=null;function Un(t){if(typeof Ls=="function"&&ha(t),rt&&typeof rt.setStrictMode=="function")try{rt.setStrictMode(Ct,t)}catch{}}var dn=Math.clz32?Math.clz32:Gn,ro=Math.log,ao=Math.LN2;function Gn(t){return t>>>=0,t===0?32:31-(ro(t)/ao|0)|0}var Vs=256,Oe=4194304;function li(t){var s=t&42;if(s!==0)return s;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function mt(t,s,a){var l=t.pendingLanes;if(l===0)return 0;var d=0,m=t.suspendedLanes,b=t.pingedLanes;t=t.warmLanes;var S=l&134217727;return S!==0?(l=S&~m,l!==0?d=li(l):(b&=S,b!==0?d=li(b):a||(a=S&~t,a!==0&&(d=li(a))))):(S=l&~m,S!==0?d=li(S):b!==0?d=li(b):a||(a=l&~t,a!==0&&(d=li(a)))),d===0?0:s!==0&&s!==d&&(s&m)===0&&(m=d&-d,a=s&-s,m>=a||m===32&&(a&4194048)!==0)?s:d}function rs(t,s){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&s)===0}function oo(t,s){switch(t){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fa(){var t=Vs;return Vs<<=1,(Vs&4194048)===0&&(Vs=256),t}function ma(){var t=Oe;return Oe<<=1,(Oe&62914560)===0&&(Oe=4194304),t}function ci(t){for(var s=[],a=0;31>a;a++)s.push(t);return s}function Ui(t,s){t.pendingLanes|=s,s!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function as(t,s,a,l,d,m){var b=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var S=t.entanglements,O=t.expirationTimes,K=t.hiddenUpdates;for(a=b&~a;0<a;){var ae=31-dn(a),ue=1<<ae;S[ae]=0,O[ae]=-1;var Q=K[ae];if(Q!==null)for(K[ae]=null,ae=0;ae<Q.length;ae++){var J=Q[ae];J!==null&&(J.lane&=-536870913)}a&=~ue}l!==0&&ui(t,l,0),m!==0&&d===0&&t.tag!==0&&(t.suspendedLanes|=m&~(b&~s))}function ui(t,s,a){t.pendingLanes|=s,t.suspendedLanes&=~s;var l=31-dn(s);t.entangledLanes|=s,t.entanglements[l]=t.entanglements[l]|1073741824|a&4194090}function pa(t,s){var a=t.entangledLanes|=s;for(t=t.entanglements;a;){var l=31-dn(a),d=1<<l;d&s|t[l]&s&&(t[l]|=s),a&=~d}}function Bi(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function _r(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function os(){var t=fe.p;return t!==0?t:(t=window.event,t===void 0?32:fv(t.type))}function ga(t,s){var a=fe.p;try{return fe.p=t,s()}finally{fe.p=a}}var yt=Math.random().toString(36).slice(2),Ft="__reactFiber$"+yt,kt="__reactProps$"+yt,en="__reactContainer$"+yt,Ps="__reactEvents$"+yt,fl="__reactListeners$"+yt,di="__reactHandles$"+yt,lo="__reactResources$"+yt,Us="__reactMarker$"+yt;function zi(t){delete t[Ft],delete t[kt],delete t[Ps],delete t[fl],delete t[di]}function Fi(t){var s=t[Ft];if(s)return s;for(var a=t.parentNode;a;){if(s=a[en]||a[Ft]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(t=$y(t);t!==null;){if(a=t[Ft])return a;t=$y(t)}return s}t=a,a=t.parentNode}return null}function xi(t){if(t=t[Ft]||t[en]){var s=t.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return t}return null}function hi(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t.stateNode;throw Error(r(33))}function hn(t){var s=t[lo];return s||(s=t[lo]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Dt(t){t[Us]=!0}var ya=new Set,br={};function Xn(t,s){Ei(t,s),Ei(t+"Capture",s)}function Ei(t,s){for(br[t]=s,t=0;t<s.length;t++)ya.add(s[t])}var co=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),va={},Bs={};function uo(t){return de.call(Bs,t)?!0:de.call(va,t)?!1:co.test(t)?Bs[t]=!0:(va[t]=!0,!1)}function ls(t,s,a){if(uo(s))if(a===null)t.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(s);return;case"boolean":var l=s.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(s);return}}t.setAttribute(s,""+a)}}function bn(t,s,a){if(a===null)t.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttribute(s,""+a)}}function tn(t,s,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(s,a,""+l)}}var Si,ho;function Hi(t){if(Si===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);Si=s&&s[1]||"",ho=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Si+t+ho}var qi=!1;function fn(t,s){if(!t||qi)return"";qi=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(s){var ue=function(){throw Error()};if(Object.defineProperty(ue.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ue,[])}catch(J){var Q=J}Reflect.construct(t,[],ue)}else{try{ue.call()}catch(J){Q=J}t.call(ue.prototype)}}else{try{throw Error()}catch(J){Q=J}(ue=t())&&typeof ue.catch=="function"&&ue.catch(function(){})}}catch(J){if(J&&Q&&typeof J.stack=="string")return[J.stack,Q.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=l.DetermineComponentFrameRoot(),b=m[0],S=m[1];if(b&&S){var O=b.split(`
`),K=S.split(`
`);for(d=l=0;l<O.length&&!O[l].includes("DetermineComponentFrameRoot");)l++;for(;d<K.length&&!K[d].includes("DetermineComponentFrameRoot");)d++;if(l===O.length||d===K.length)for(l=O.length-1,d=K.length-1;1<=l&&0<=d&&O[l]!==K[d];)d--;for(;1<=l&&0<=d;l--,d--)if(O[l]!==K[d]){if(l!==1||d!==1)do if(l--,d--,0>d||O[l]!==K[d]){var ae=`
`+O[l].replace(" at new "," at ");return t.displayName&&ae.includes("<anonymous>")&&(ae=ae.replace("<anonymous>",t.displayName)),ae}while(1<=l&&0<=d);break}}}finally{qi=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Hi(a):""}function wr(t){switch(t.tag){case 26:case 27:case 5:return Hi(t.type);case 16:return Hi("Lazy");case 13:return Hi("Suspense");case 19:return Hi("SuspenseList");case 0:case 15:return fn(t.type,!1);case 11:return fn(t.type.render,!1);case 1:return fn(t.type,!0);case 31:return Hi("Activity");default:return""}}function ct(t){try{var s="";do s+=wr(t),t=t.return;while(t);return s}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function Wt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Gi(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function cs(t){var s=Gi(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,s),l=""+t[s];if(!t.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,m=a.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return d.call(this)},set:function(b){l=""+b,m.call(this,b)}}),Object.defineProperty(t,s,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(b){l=""+b},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function us(t){t._valueTracker||(t._valueTracker=cs(t))}function xr(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var a=s.getValue(),l="";return t&&(l=Gi(t)?t.checked?"true":"false":t.value),t=l,t!==a?(s.setValue(t),!0):!1}function Xi(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var ml=/[\n"\\]/g;function Vt(t){return t.replace(ml,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Bn(t,s,a,l,d,m,b,S){t.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?t.type=b:t.removeAttribute("type"),s!=null?b==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+Wt(s)):t.value!==""+Wt(s)&&(t.value=""+Wt(s)):b!=="submit"&&b!=="reset"||t.removeAttribute("value"),s!=null?zs(t,b,Wt(s)):a!=null?zs(t,b,Wt(a)):l!=null&&t.removeAttribute("value"),d==null&&m!=null&&(t.defaultChecked=!!m),d!=null&&(t.checked=d&&typeof d!="function"&&typeof d!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?t.name=""+Wt(S):t.removeAttribute("name")}function Ai(t,s,a,l,d,m,b,S){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),s!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||s!=null))return;a=a!=null?""+Wt(a):"",s=s!=null?""+Wt(s):a,S||s===t.value||(t.value=s),t.defaultValue=s}l=l??d,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=S?t.checked:!!l,t.defaultChecked=!!l,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(t.name=b)}function zs(t,s,a){s==="number"&&Xi(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Wn(t,s,a,l){if(t=t.options,s){s={};for(var d=0;d<a.length;d++)s["$"+a[d]]=!0;for(a=0;a<t.length;a++)d=s.hasOwnProperty("$"+t[a].value),t[a].selected!==d&&(t[a].selected=d),d&&l&&(t[a].defaultSelected=!0)}else{for(a=""+Wt(a),s=null,d=0;d<t.length;d++){if(t[d].value===a){t[d].selected=!0,l&&(t[d].defaultSelected=!0);return}s!==null||t[d].disabled||(s=t[d])}s!==null&&(s.selected=!0)}}function ht(t,s,a){if(s!=null&&(s=""+Wt(s),s!==t.value&&(t.value=s),a==null)){t.defaultValue!==s&&(t.defaultValue=s);return}t.defaultValue=a!=null?""+Wt(a):""}function Fs(t,s,a,l){if(s==null){if(l!=null){if(a!=null)throw Error(r(92));if(Qe(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),s=a}a=Wt(s),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l)}function wn(t,s){if(s){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=s;return}}t.textContent=s}var ds=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Hs(t,s,a){var l=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="":l?t.setProperty(s,a):typeof a!="number"||a===0||ds.has(s)?s==="float"?t.cssFloat=a:t[s]=(""+a).trim():t[s]=a+"px"}function Er(t,s,a){if(s!=null&&typeof s!="object")throw Error(r(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||s!=null&&s.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var d in s)l=s[d],s.hasOwnProperty(d)&&a[d]!==l&&Hs(t,d,l)}else for(var m in s)s.hasOwnProperty(m)&&Hs(t,m,s[m])}function Zn(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fo=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),pl=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Wi(t){return pl.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var Zt=null;function Kn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Yn=null,Qn=null;function _a(t){var s=xi(t);if(s&&(t=s.stateNode)){var a=t[kt]||null;e:switch(t=s.stateNode,s.type){case"input":if(Bn(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Vt(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var l=a[s];if(l!==t&&l.form===t.form){var d=l[kt]||null;if(!d)throw Error(r(90));Bn(l,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(s=0;s<a.length;s++)l=a[s],l.form===t.form&&xr(l)}break e;case"textarea":ht(t,a.value,a.defaultValue);break e;case"select":s=a.value,s!=null&&Wn(t,!!a.multiple,s,!1)}}}var fi=!1;function ba(t,s,a){if(fi)return t(s,a);fi=!0;try{var l=t(s);return l}finally{if(fi=!1,(Yn!==null||Qn!==null)&&(zu(),Yn&&(s=Yn,t=Qn,Qn=Yn=null,_a(s),t)))for(s=0;s<t.length;s++)_a(t[s])}}function hs(t,s){var a=t.stateNode;if(a===null)return null;var l=a[kt]||null;if(l===null)return null;a=l[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(r(231,s,typeof a));return a}var $n=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),E=!1;if($n)try{var V={};Object.defineProperty(V,"passive",{get:function(){E=!0}}),window.addEventListener("test",V,V),window.removeEventListener("test",V,V)}catch{E=!1}var F=null,B=null,re=null;function Ee(){if(re)return re;var t,s=B,a=s.length,l,d="value"in F?F.value:F.textContent,m=d.length;for(t=0;t<a&&s[t]===d[t];t++);var b=a-t;for(l=1;l<=b&&s[a-l]===d[m-l];l++);return re=d.slice(t,1<l?1-l:void 0)}function Ce(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function Fe(){return!0}function St(){return!1}function Re(t){function s(a,l,d,m,b){this._reactName=a,this._targetInst=d,this.type=l,this.nativeEvent=m,this.target=b,this.currentTarget=null;for(var S in t)t.hasOwnProperty(S)&&(a=t[S],this[S]=a?a(m):m[S]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Fe:St,this.isPropagationStopped=St,this}return w(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Fe)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Fe)},persist:function(){},isPersistent:Fe}),s}var Se={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},At=Re(Se),It=w({},Se,{view:0,detail:0}),Kt=Re(It),nn,Ht,Pt,Nn=w({},It,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ea,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Pt&&(Pt&&t.type==="mousemove"?(nn=t.screenX-Pt.screenX,Ht=t.screenY-Pt.screenY):Ht=nn=0,Pt=t),nn)},movementY:function(t){return"movementY"in t?t.movementY:Ht}}),xt=Re(Nn),wa=w({},Nn,{dataTransfer:0}),mo=Re(wa),fs=w({},It,{relatedTarget:0}),qs=Re(fs),He=w({},Se,{animationName:0,elapsedTime:0,pseudoElement:0}),Ut=Re(He),Jn=w({},Se,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Gs=Re(Jn),vh=w({},Se,{data:0}),gl=Re(vh),xa={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$c={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Jc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yl(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=Jc[t])?!!s[t]:!1}function Ea(){return yl}var eu=w({},It,{key:function(t){if(t.key){var s=xa[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=Ce(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?$c[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ea,charCode:function(t){return t.type==="keypress"?Ce(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ce(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),po=Re(eu),tu=w({},Nn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),vl=Re(tu),Xs=w({},It,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ea}),nu=Re(Xs),iu=w({},Se,{propertyName:0,elapsedTime:0,pseudoElement:0}),su=Re(iu),ru=w({},Nn,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),go=Re(ru),zn=w({},Se,{newState:0,oldState:0}),au=Re(zn),ou=[9,13,27,32],ms=$n&&"CompositionEvent"in window,u=null;$n&&"documentMode"in document&&(u=document.documentMode);var v=$n&&"TextEvent"in window&&!u,_=$n&&(!ms||u&&8<u&&11>=u),T=" ",G=!1;function ee(t,s){switch(t){case"keyup":return ou.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ye(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var tt=!1;function sn(t,s){switch(t){case"compositionend":return ye(s);case"keypress":return s.which!==32?null:(G=!0,T);case"textInput":return t=s.data,t===T&&G?null:t;default:return null}}function nt(t,s){if(tt)return t==="compositionend"||!ms&&ee(t,s)?(t=Ee(),re=B=F=null,tt=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return _&&s.locale!=="ko"?null:s.data;default:return null}}var mn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rn(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!mn[t.type]:s==="textarea"}function Ws(t,s,a,l){Yn?Qn?Qn.push(l):Qn=[l]:Yn=l,s=Wu(s,"onChange"),0<s.length&&(a=new At("onChange","change",null,a,l),t.push({event:a,listeners:s}))}var xn=null,ps=null;function _l(t){Fy(t,0)}function lu(t){var s=hi(t);if(xr(s))return t}function cg(t,s){if(t==="change")return s}var ug=!1;if($n){var _h;if($n){var bh="oninput"in document;if(!bh){var dg=document.createElement("div");dg.setAttribute("oninput","return;"),bh=typeof dg.oninput=="function"}_h=bh}else _h=!1;ug=_h&&(!document.documentMode||9<document.documentMode)}function hg(){xn&&(xn.detachEvent("onpropertychange",fg),ps=xn=null)}function fg(t){if(t.propertyName==="value"&&lu(ps)){var s=[];Ws(s,ps,t,Kn(t)),ba(_l,s)}}function k2(t,s,a){t==="focusin"?(hg(),xn=s,ps=a,xn.attachEvent("onpropertychange",fg)):t==="focusout"&&hg()}function D2(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return lu(ps)}function j2(t,s){if(t==="click")return lu(s)}function O2(t,s){if(t==="input"||t==="change")return lu(s)}function M2(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var mi=typeof Object.is=="function"?Object.is:M2;function bl(t,s){if(mi(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var a=Object.keys(t),l=Object.keys(s);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var d=a[l];if(!de.call(s,d)||!mi(t[d],s[d]))return!1}return!0}function mg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function pg(t,s){var a=mg(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=s&&l>=s)return{node:a,offset:s-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=mg(a)}}function gg(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?gg(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function yg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var s=Xi(t.document);s instanceof t.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)t=s.contentWindow;else break;s=Xi(t.document)}return s}function wh(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}var L2=$n&&"documentMode"in document&&11>=document.documentMode,yo=null,xh=null,wl=null,Eh=!1;function vg(t,s,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Eh||yo==null||yo!==Xi(l)||(l=yo,"selectionStart"in l&&wh(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),wl&&bl(wl,l)||(wl=l,l=Wu(xh,"onSelect"),0<l.length&&(s=new At("onSelect","select",null,s,a),t.push({event:s,listeners:l}),s.target=yo)))}function Sa(t,s){var a={};return a[t.toLowerCase()]=s.toLowerCase(),a["Webkit"+t]="webkit"+s,a["Moz"+t]="moz"+s,a}var vo={animationend:Sa("Animation","AnimationEnd"),animationiteration:Sa("Animation","AnimationIteration"),animationstart:Sa("Animation","AnimationStart"),transitionrun:Sa("Transition","TransitionRun"),transitionstart:Sa("Transition","TransitionStart"),transitioncancel:Sa("Transition","TransitionCancel"),transitionend:Sa("Transition","TransitionEnd")},Sh={},_g={};$n&&(_g=document.createElement("div").style,"AnimationEvent"in window||(delete vo.animationend.animation,delete vo.animationiteration.animation,delete vo.animationstart.animation),"TransitionEvent"in window||delete vo.transitionend.transition);function Aa(t){if(Sh[t])return Sh[t];if(!vo[t])return t;var s=vo[t],a;for(a in s)if(s.hasOwnProperty(a)&&a in _g)return Sh[t]=s[a];return t}var bg=Aa("animationend"),wg=Aa("animationiteration"),xg=Aa("animationstart"),V2=Aa("transitionrun"),P2=Aa("transitionstart"),U2=Aa("transitioncancel"),Eg=Aa("transitionend"),Sg=new Map,Ah="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ah.push("scrollEnd");function Zi(t,s){Sg.set(t,s),Xn(s,[t])}var Ag=new WeakMap;function Ti(t,s){if(typeof t=="object"&&t!==null){var a=Ag.get(t);return a!==void 0?a:(s={value:t,source:s,stack:ct(s)},Ag.set(t,s),s)}return{value:t,source:s,stack:ct(s)}}var Ri=[],_o=0,Th=0;function cu(){for(var t=_o,s=Th=_o=0;s<t;){var a=Ri[s];Ri[s++]=null;var l=Ri[s];Ri[s++]=null;var d=Ri[s];Ri[s++]=null;var m=Ri[s];if(Ri[s++]=null,l!==null&&d!==null){var b=l.pending;b===null?d.next=d:(d.next=b.next,b.next=d),l.pending=d}m!==0&&Tg(a,d,m)}}function uu(t,s,a,l){Ri[_o++]=t,Ri[_o++]=s,Ri[_o++]=a,Ri[_o++]=l,Th|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Rh(t,s,a,l){return uu(t,s,a,l),du(t)}function bo(t,s){return uu(t,null,null,s),du(t)}function Tg(t,s,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var d=!1,m=t.return;m!==null;)m.childLanes|=a,l=m.alternate,l!==null&&(l.childLanes|=a),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(d=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,d&&s!==null&&(d=31-dn(a),t=m.hiddenUpdates,l=t[d],l===null?t[d]=[s]:l.push(s),s.lane=a|536870912),m):null}function du(t){if(50<Xl)throw Xl=0,Of=null,Error(r(185));for(var s=t.return;s!==null;)t=s,s=t.return;return t.tag===3?t.stateNode:null}var wo={};function B2(t,s,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pi(t,s,a,l){return new B2(t,s,a,l)}function Ch(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Zs(t,s){var a=t.alternate;return a===null?(a=pi(t.tag,s,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=s,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,s=t.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Rg(t,s){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=s,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,s=a.dependencies,t.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),t}function hu(t,s,a,l,d,m){var b=0;if(l=t,typeof t=="function")Ch(t)&&(b=1);else if(typeof t=="string")b=Fx(t,a,we.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case C:return t=pi(31,a,s,d),t.elementType=C,t.lanes=m,t;case z:return Ta(a.children,d,m,s);case H:b=8,d|=24;break;case Y:return t=pi(12,a,s,d|2),t.elementType=Y,t.lanes=m,t;case le:return t=pi(13,a,s,d),t.elementType=le,t.lanes=m,t;case pe:return t=pi(19,a,s,d),t.elementType=pe,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case $:case X:b=10;break e;case Z:b=9;break e;case te:b=11;break e;case k:b=14;break e;case R:b=16,l=null;break e}b=29,a=Error(r(130,t===null?"null":typeof t,"")),l=null}return s=pi(b,a,s,d),s.elementType=t,s.type=l,s.lanes=m,s}function Ta(t,s,a,l){return t=pi(7,t,l,s),t.lanes=a,t}function Ih(t,s,a){return t=pi(6,t,null,s),t.lanes=a,t}function Nh(t,s,a){return s=pi(4,t.children!==null?t.children:[],t.key,s),s.lanes=a,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}var xo=[],Eo=0,fu=null,mu=0,Ci=[],Ii=0,Ra=null,Ks=1,Ys="";function Ca(t,s){xo[Eo++]=mu,xo[Eo++]=fu,fu=t,mu=s}function Cg(t,s,a){Ci[Ii++]=Ks,Ci[Ii++]=Ys,Ci[Ii++]=Ra,Ra=t;var l=Ks;t=Ys;var d=32-dn(l)-1;l&=~(1<<d),a+=1;var m=32-dn(s)+d;if(30<m){var b=d-d%5;m=(l&(1<<b)-1).toString(32),l>>=b,d-=b,Ks=1<<32-dn(s)+d|a<<d|l,Ys=m+t}else Ks=1<<m|a<<d|l,Ys=t}function kh(t){t.return!==null&&(Ca(t,1),Cg(t,1,0))}function Dh(t){for(;t===fu;)fu=xo[--Eo],xo[Eo]=null,mu=xo[--Eo],xo[Eo]=null;for(;t===Ra;)Ra=Ci[--Ii],Ci[Ii]=null,Ys=Ci[--Ii],Ci[Ii]=null,Ks=Ci[--Ii],Ci[Ii]=null}var Fn=null,Bt=null,ut=!1,Ia=null,gs=!1,jh=Error(r(519));function Na(t){var s=Error(r(418,""));throw Sl(Ti(s,t)),jh}function Ig(t){var s=t.stateNode,a=t.type,l=t.memoizedProps;switch(s[Ft]=t,s[kt]=l,a){case"dialog":Ye("cancel",s),Ye("close",s);break;case"iframe":case"object":case"embed":Ye("load",s);break;case"video":case"audio":for(a=0;a<Zl.length;a++)Ye(Zl[a],s);break;case"source":Ye("error",s);break;case"img":case"image":case"link":Ye("error",s),Ye("load",s);break;case"details":Ye("toggle",s);break;case"input":Ye("invalid",s),Ai(s,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),us(s);break;case"select":Ye("invalid",s);break;case"textarea":Ye("invalid",s),Fs(s,l.value,l.defaultValue,l.children),us(s)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||l.suppressHydrationWarning===!0||Xy(s.textContent,a)?(l.popover!=null&&(Ye("beforetoggle",s),Ye("toggle",s)),l.onScroll!=null&&Ye("scroll",s),l.onScrollEnd!=null&&Ye("scrollend",s),l.onClick!=null&&(s.onclick=Zu),s=!0):s=!1,s||Na(t)}function Ng(t){for(Fn=t.return;Fn;)switch(Fn.tag){case 5:case 13:gs=!1;return;case 27:case 3:gs=!0;return;default:Fn=Fn.return}}function xl(t){if(t!==Fn)return!1;if(!ut)return Ng(t),ut=!0,!1;var s=t.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Yf(t.type,t.memoizedProps)),a=!a),a&&Bt&&Na(t),Ng(t),s===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));e:{for(t=t.nextSibling,s=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(s===0){Bt=Yi(t.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++;t=t.nextSibling}Bt=null}}else s===27?(s=Bt,Ur(t.type)?(t=em,em=null,Bt=t):Bt=s):Bt=Fn?Yi(t.stateNode.nextSibling):null;return!0}function El(){Bt=Fn=null,ut=!1}function kg(){var t=Ia;return t!==null&&(ni===null?ni=t:ni.push.apply(ni,t),Ia=null),t}function Sl(t){Ia===null?Ia=[t]:Ia.push(t)}var Oh=se(null),ka=null,Qs=null;function Sr(t,s,a){ce(Oh,s._currentValue),s._currentValue=a}function $s(t){t._currentValue=Oh.current,ge(Oh)}function Mh(t,s,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,l!==null&&(l.childLanes|=s)):l!==null&&(l.childLanes&s)!==s&&(l.childLanes|=s),t===a)break;t=t.return}}function Lh(t,s,a,l){var d=t.child;for(d!==null&&(d.return=t);d!==null;){var m=d.dependencies;if(m!==null){var b=d.child;m=m.firstContext;e:for(;m!==null;){var S=m;m=d;for(var O=0;O<s.length;O++)if(S.context===s[O]){m.lanes|=a,S=m.alternate,S!==null&&(S.lanes|=a),Mh(m.return,a,t),l||(b=null);break e}m=S.next}}else if(d.tag===18){if(b=d.return,b===null)throw Error(r(341));b.lanes|=a,m=b.alternate,m!==null&&(m.lanes|=a),Mh(b,a,t),b=null}else b=d.child;if(b!==null)b.return=d;else for(b=d;b!==null;){if(b===t){b=null;break}if(d=b.sibling,d!==null){d.return=b.return,b=d;break}b=b.return}d=b}}function Al(t,s,a,l){t=null;for(var d=s,m=!1;d!==null;){if(!m){if((d.flags&524288)!==0)m=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var b=d.alternate;if(b===null)throw Error(r(387));if(b=b.memoizedProps,b!==null){var S=d.type;mi(d.pendingProps.value,b.value)||(t!==null?t.push(S):t=[S])}}else if(d===lt.current){if(b=d.alternate,b===null)throw Error(r(387));b.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(t!==null?t.push(ec):t=[ec])}d=d.return}t!==null&&Lh(s,t,a,l),s.flags|=262144}function pu(t){for(t=t.firstContext;t!==null;){if(!mi(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Da(t){ka=t,Qs=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function kn(t){return Dg(ka,t)}function gu(t,s){return ka===null&&Da(t),Dg(t,s)}function Dg(t,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},Qs===null){if(t===null)throw Error(r(308));Qs=s,t.dependencies={lanes:0,firstContext:s},t.flags|=524288}else Qs=Qs.next=s;return a}var z2=typeof AbortController<"u"?AbortController:function(){var t=[],s=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){s.aborted=!0,t.forEach(function(a){return a()})}},F2=i.unstable_scheduleCallback,H2=i.unstable_NormalPriority,an={$$typeof:X,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Vh(){return{controller:new z2,data:new Map,refCount:0}}function Tl(t){t.refCount--,t.refCount===0&&F2(H2,function(){t.controller.abort()})}var Rl=null,Ph=0,So=0,Ao=null;function q2(t,s){if(Rl===null){var a=Rl=[];Ph=0,So=zf(),Ao={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Ph++,s.then(jg,jg),s}function jg(){if(--Ph===0&&Rl!==null){Ao!==null&&(Ao.status="fulfilled");var t=Rl;Rl=null,So=0,Ao=null;for(var s=0;s<t.length;s++)(0,t[s])()}}function G2(t,s){var a=[],l={status:"pending",value:null,reason:null,then:function(d){a.push(d)}};return t.then(function(){l.status="fulfilled",l.value=s;for(var d=0;d<a.length;d++)(0,a[d])(s)},function(d){for(l.status="rejected",l.reason=d,d=0;d<a.length;d++)(0,a[d])(void 0)}),l}var Og=ie.S;ie.S=function(t,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&q2(t,s),Og!==null&&Og(t,s)};var ja=se(null);function Uh(){var t=ja.current;return t!==null?t:Tt.pooledCache}function yu(t,s){s===null?ce(ja,ja.current):ce(ja,s.pool)}function Mg(){var t=Uh();return t===null?null:{parent:an._currentValue,pool:t}}var Cl=Error(r(460)),Lg=Error(r(474)),vu=Error(r(542)),Bh={then:function(){}};function Vg(t){return t=t.status,t==="fulfilled"||t==="rejected"}function _u(){}function Pg(t,s,a){switch(a=t[a],a===void 0?t.push(s):a!==s&&(s.then(_u,_u),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,Bg(t),t;default:if(typeof s.status=="string")s.then(_u,_u);else{if(t=Tt,t!==null&&100<t.shellSuspendCounter)throw Error(r(482));t=s,t.status="pending",t.then(function(l){if(s.status==="pending"){var d=s;d.status="fulfilled",d.value=l}},function(l){if(s.status==="pending"){var d=s;d.status="rejected",d.reason=l}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,Bg(t),t}throw Il=s,Cl}}var Il=null;function Ug(){if(Il===null)throw Error(r(459));var t=Il;return Il=null,t}function Bg(t){if(t===Cl||t===vu)throw Error(r(483))}var Ar=!1;function zh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Fh(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Tr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Rr(t,s,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(pt&2)!==0){var d=l.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),l.pending=s,s=du(t),Tg(t,null,a),s}return uu(t,l,s,a),du(t)}function Nl(t,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var l=s.lanes;l&=t.pendingLanes,a|=l,s.lanes=a,pa(t,a)}}function Hh(t,s){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var d=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var b={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?d=m=b:m=m.next=b,a=a.next}while(a!==null);m===null?d=m=s:m=m.next=s}else d=m=s;a={baseState:l.baseState,firstBaseUpdate:d,lastBaseUpdate:m,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=s:t.next=s,a.lastBaseUpdate=s}var qh=!1;function kl(){if(qh){var t=Ao;if(t!==null)throw t}}function Dl(t,s,a,l){qh=!1;var d=t.updateQueue;Ar=!1;var m=d.firstBaseUpdate,b=d.lastBaseUpdate,S=d.shared.pending;if(S!==null){d.shared.pending=null;var O=S,K=O.next;O.next=null,b===null?m=K:b.next=K,b=O;var ae=t.alternate;ae!==null&&(ae=ae.updateQueue,S=ae.lastBaseUpdate,S!==b&&(S===null?ae.firstBaseUpdate=K:S.next=K,ae.lastBaseUpdate=O))}if(m!==null){var ue=d.baseState;b=0,ae=K=O=null,S=m;do{var Q=S.lane&-536870913,J=Q!==S.lane;if(J?(it&Q)===Q:(l&Q)===Q){Q!==0&&Q===So&&(qh=!0),ae!==null&&(ae=ae.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var Pe=t,je=S;Q=s;var bt=a;switch(je.tag){case 1:if(Pe=je.payload,typeof Pe=="function"){ue=Pe.call(bt,ue,Q);break e}ue=Pe;break e;case 3:Pe.flags=Pe.flags&-65537|128;case 0:if(Pe=je.payload,Q=typeof Pe=="function"?Pe.call(bt,ue,Q):Pe,Q==null)break e;ue=w({},ue,Q);break e;case 2:Ar=!0}}Q=S.callback,Q!==null&&(t.flags|=64,J&&(t.flags|=8192),J=d.callbacks,J===null?d.callbacks=[Q]:J.push(Q))}else J={lane:Q,tag:S.tag,payload:S.payload,callback:S.callback,next:null},ae===null?(K=ae=J,O=ue):ae=ae.next=J,b|=Q;if(S=S.next,S===null){if(S=d.shared.pending,S===null)break;J=S,S=J.next,J.next=null,d.lastBaseUpdate=J,d.shared.pending=null}}while(!0);ae===null&&(O=ue),d.baseState=O,d.firstBaseUpdate=K,d.lastBaseUpdate=ae,m===null&&(d.shared.lanes=0),Mr|=b,t.lanes=b,t.memoizedState=ue}}function zg(t,s){if(typeof t!="function")throw Error(r(191,t));t.call(s)}function Fg(t,s){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)zg(a[t],s)}var To=se(null),bu=se(0);function Hg(t,s){t=rr,ce(bu,t),ce(To,s),rr=t|s.baseLanes}function Gh(){ce(bu,rr),ce(To,To.current)}function Xh(){rr=bu.current,ge(To),ge(bu)}var Cr=0,Xe=null,vt=null,Yt=null,wu=!1,Ro=!1,Oa=!1,xu=0,jl=0,Co=null,X2=0;function qt(){throw Error(r(321))}function Wh(t,s){if(s===null)return!1;for(var a=0;a<s.length&&a<t.length;a++)if(!mi(t[a],s[a]))return!1;return!0}function Zh(t,s,a,l,d,m){return Cr=m,Xe=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,ie.H=t===null||t.memoizedState===null?T0:R0,Oa=!1,m=a(l,d),Oa=!1,Ro&&(m=Gg(s,a,l,d)),qg(t),m}function qg(t){ie.H=Cu;var s=vt!==null&&vt.next!==null;if(Cr=0,Yt=vt=Xe=null,wu=!1,jl=0,Co=null,s)throw Error(r(300));t===null||pn||(t=t.dependencies,t!==null&&pu(t)&&(pn=!0))}function Gg(t,s,a,l){Xe=t;var d=0;do{if(Ro&&(Co=null),jl=0,Ro=!1,25<=d)throw Error(r(301));if(d+=1,Yt=vt=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}ie.H=J2,m=s(a,l)}while(Ro);return m}function W2(){var t=ie.H,s=t.useState()[0];return s=typeof s.then=="function"?Ol(s):s,t=t.useState()[0],(vt!==null?vt.memoizedState:null)!==t&&(Xe.flags|=1024),s}function Kh(){var t=xu!==0;return xu=0,t}function Yh(t,s,a){s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~a}function Qh(t){if(wu){for(t=t.memoizedState;t!==null;){var s=t.queue;s!==null&&(s.pending=null),t=t.next}wu=!1}Cr=0,Yt=vt=Xe=null,Ro=!1,jl=xu=0,Co=null}function ei(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Yt===null?Xe.memoizedState=Yt=t:Yt=Yt.next=t,Yt}function Qt(){if(vt===null){var t=Xe.alternate;t=t!==null?t.memoizedState:null}else t=vt.next;var s=Yt===null?Xe.memoizedState:Yt.next;if(s!==null)Yt=s,vt=t;else{if(t===null)throw Xe.alternate===null?Error(r(467)):Error(r(310));vt=t,t={memoizedState:vt.memoizedState,baseState:vt.baseState,baseQueue:vt.baseQueue,queue:vt.queue,next:null},Yt===null?Xe.memoizedState=Yt=t:Yt=Yt.next=t}return Yt}function $h(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ol(t){var s=jl;return jl+=1,Co===null&&(Co=[]),t=Pg(Co,t,s),s=Xe,(Yt===null?s.memoizedState:Yt.next)===null&&(s=s.alternate,ie.H=s===null||s.memoizedState===null?T0:R0),t}function Eu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Ol(t);if(t.$$typeof===X)return kn(t)}throw Error(r(438,String(t)))}function Jh(t){var s=null,a=Xe.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var l=Xe.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(s={data:l.data.map(function(d){return d.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=$h(),Xe.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(t),l=0;l<t;l++)a[l]=M;return s.index++,a}function Js(t,s){return typeof s=="function"?s(t):s}function Su(t){var s=Qt();return ef(s,vt,t)}function ef(t,s,a){var l=t.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var d=t.baseQueue,m=l.pending;if(m!==null){if(d!==null){var b=d.next;d.next=m.next,m.next=b}s.baseQueue=d=m,l.pending=null}if(m=t.baseState,d===null)t.memoizedState=m;else{s=d.next;var S=b=null,O=null,K=s,ae=!1;do{var ue=K.lane&-536870913;if(ue!==K.lane?(it&ue)===ue:(Cr&ue)===ue){var Q=K.revertLane;if(Q===0)O!==null&&(O=O.next={lane:0,revertLane:0,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),ue===So&&(ae=!0);else if((Cr&Q)===Q){K=K.next,Q===So&&(ae=!0);continue}else ue={lane:0,revertLane:K.revertLane,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},O===null?(S=O=ue,b=m):O=O.next=ue,Xe.lanes|=Q,Mr|=Q;ue=K.action,Oa&&a(m,ue),m=K.hasEagerState?K.eagerState:a(m,ue)}else Q={lane:ue,revertLane:K.revertLane,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},O===null?(S=O=Q,b=m):O=O.next=Q,Xe.lanes|=ue,Mr|=ue;K=K.next}while(K!==null&&K!==s);if(O===null?b=m:O.next=S,!mi(m,t.memoizedState)&&(pn=!0,ae&&(a=Ao,a!==null)))throw a;t.memoizedState=m,t.baseState=b,t.baseQueue=O,l.lastRenderedState=m}return d===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function tf(t){var s=Qt(),a=s.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=t;var l=a.dispatch,d=a.pending,m=s.memoizedState;if(d!==null){a.pending=null;var b=d=d.next;do m=t(m,b.action),b=b.next;while(b!==d);mi(m,s.memoizedState)||(pn=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),a.lastRenderedState=m}return[m,l]}function Xg(t,s,a){var l=Xe,d=Qt(),m=ut;if(m){if(a===void 0)throw Error(r(407));a=a()}else a=s();var b=!mi((vt||d).memoizedState,a);b&&(d.memoizedState=a,pn=!0),d=d.queue;var S=Kg.bind(null,l,d,t);if(Ml(2048,8,S,[t]),d.getSnapshot!==s||b||Yt!==null&&Yt.memoizedState.tag&1){if(l.flags|=2048,Io(9,Au(),Zg.bind(null,l,d,a,s),null),Tt===null)throw Error(r(349));m||(Cr&124)!==0||Wg(l,s,a)}return a}function Wg(t,s,a){t.flags|=16384,t={getSnapshot:s,value:a},s=Xe.updateQueue,s===null?(s=$h(),Xe.updateQueue=s,s.stores=[t]):(a=s.stores,a===null?s.stores=[t]:a.push(t))}function Zg(t,s,a,l){s.value=a,s.getSnapshot=l,Yg(s)&&Qg(t)}function Kg(t,s,a){return a(function(){Yg(s)&&Qg(t)})}function Yg(t){var s=t.getSnapshot;t=t.value;try{var a=s();return!mi(t,a)}catch{return!0}}function Qg(t){var s=bo(t,2);s!==null&&bi(s,t,2)}function nf(t){var s=ei();if(typeof t=="function"){var a=t;if(t=a(),Oa){Un(!0);try{a()}finally{Un(!1)}}}return s.memoizedState=s.baseState=t,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Js,lastRenderedState:t},s}function $g(t,s,a,l){return t.baseState=a,ef(t,vt,typeof l=="function"?l:Js)}function Z2(t,s,a,l,d){if(Ru(t))throw Error(r(485));if(t=s.action,t!==null){var m={payload:d,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){m.listeners.push(b)}};ie.T!==null?a(!0):m.isTransition=!1,l(m),a=s.pending,a===null?(m.next=s.pending=m,Jg(s,m)):(m.next=a.next,s.pending=a.next=m)}}function Jg(t,s){var a=s.action,l=s.payload,d=t.state;if(s.isTransition){var m=ie.T,b={};ie.T=b;try{var S=a(d,l),O=ie.S;O!==null&&O(b,S),e0(t,s,S)}catch(K){sf(t,s,K)}finally{ie.T=m}}else try{m=a(d,l),e0(t,s,m)}catch(K){sf(t,s,K)}}function e0(t,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){t0(t,s,l)},function(l){return sf(t,s,l)}):t0(t,s,a)}function t0(t,s,a){s.status="fulfilled",s.value=a,n0(s),t.state=a,s=t.pending,s!==null&&(a=s.next,a===s?t.pending=null:(a=a.next,s.next=a,Jg(t,a)))}function sf(t,s,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do s.status="rejected",s.reason=a,n0(s),s=s.next;while(s!==l)}t.action=null}function n0(t){t=t.listeners;for(var s=0;s<t.length;s++)(0,t[s])()}function i0(t,s){return s}function s0(t,s){if(ut){var a=Tt.formState;if(a!==null){e:{var l=Xe;if(ut){if(Bt){t:{for(var d=Bt,m=gs;d.nodeType!==8;){if(!m){d=null;break t}if(d=Yi(d.nextSibling),d===null){d=null;break t}}m=d.data,d=m==="F!"||m==="F"?d:null}if(d){Bt=Yi(d.nextSibling),l=d.data==="F!";break e}}Na(l)}l=!1}l&&(s=a[0])}}return a=ei(),a.memoizedState=a.baseState=s,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i0,lastRenderedState:s},a.queue=l,a=E0.bind(null,Xe,l),l.dispatch=a,l=nf(!1),m=cf.bind(null,Xe,!1,l.queue),l=ei(),d={state:s,dispatch:null,action:t,pending:null},l.queue=d,a=Z2.bind(null,Xe,d,m,a),d.dispatch=a,l.memoizedState=t,[s,a,!1]}function r0(t){var s=Qt();return a0(s,vt,t)}function a0(t,s,a){if(s=ef(t,s,i0)[0],t=Su(Js)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var l=Ol(s)}catch(b){throw b===Cl?vu:b}else l=s;s=Qt();var d=s.queue,m=d.dispatch;return a!==s.memoizedState&&(Xe.flags|=2048,Io(9,Au(),K2.bind(null,d,a),null)),[l,m,t]}function K2(t,s){t.action=s}function o0(t){var s=Qt(),a=vt;if(a!==null)return a0(s,a,t);Qt(),s=s.memoizedState,a=Qt();var l=a.queue.dispatch;return a.memoizedState=t,[s,l,!1]}function Io(t,s,a,l){return t={tag:t,create:a,deps:l,inst:s,next:null},s=Xe.updateQueue,s===null&&(s=$h(),Xe.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,s.lastEffect=t),t}function Au(){return{destroy:void 0,resource:void 0}}function l0(){return Qt().memoizedState}function Tu(t,s,a,l){var d=ei();l=l===void 0?null:l,Xe.flags|=t,d.memoizedState=Io(1|s,Au(),a,l)}function Ml(t,s,a,l){var d=Qt();l=l===void 0?null:l;var m=d.memoizedState.inst;vt!==null&&l!==null&&Wh(l,vt.memoizedState.deps)?d.memoizedState=Io(s,m,a,l):(Xe.flags|=t,d.memoizedState=Io(1|s,m,a,l))}function c0(t,s){Tu(8390656,8,t,s)}function u0(t,s){Ml(2048,8,t,s)}function d0(t,s){return Ml(4,2,t,s)}function h0(t,s){return Ml(4,4,t,s)}function f0(t,s){if(typeof s=="function"){t=t();var a=s(t);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function m0(t,s,a){a=a!=null?a.concat([t]):null,Ml(4,4,f0.bind(null,s,t),a)}function rf(){}function p0(t,s){var a=Qt();s=s===void 0?null:s;var l=a.memoizedState;return s!==null&&Wh(s,l[1])?l[0]:(a.memoizedState=[t,s],t)}function g0(t,s){var a=Qt();s=s===void 0?null:s;var l=a.memoizedState;if(s!==null&&Wh(s,l[1]))return l[0];if(l=t(),Oa){Un(!0);try{t()}finally{Un(!1)}}return a.memoizedState=[l,s],l}function af(t,s,a){return a===void 0||(Cr&1073741824)!==0?t.memoizedState=s:(t.memoizedState=a,t=_y(),Xe.lanes|=t,Mr|=t,a)}function y0(t,s,a,l){return mi(a,s)?a:To.current!==null?(t=af(t,a,l),mi(t,s)||(pn=!0),t):(Cr&42)===0?(pn=!0,t.memoizedState=a):(t=_y(),Xe.lanes|=t,Mr|=t,s)}function v0(t,s,a,l,d){var m=fe.p;fe.p=m!==0&&8>m?m:8;var b=ie.T,S={};ie.T=S,cf(t,!1,s,a);try{var O=d(),K=ie.S;if(K!==null&&K(S,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var ae=G2(O,l);Ll(t,s,ae,_i(t))}else Ll(t,s,l,_i(t))}catch(ue){Ll(t,s,{then:function(){},status:"rejected",reason:ue},_i())}finally{fe.p=m,ie.T=b}}function Y2(){}function of(t,s,a,l){if(t.tag!==5)throw Error(r(476));var d=_0(t).queue;v0(t,d,s,ne,a===null?Y2:function(){return b0(t),a(l)})}function _0(t){var s=t.memoizedState;if(s!==null)return s;s={memoizedState:ne,baseState:ne,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Js,lastRenderedState:ne},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Js,lastRenderedState:a},next:null},t.memoizedState=s,t=t.alternate,t!==null&&(t.memoizedState=s),s}function b0(t){var s=_0(t).next.queue;Ll(t,s,{},_i())}function lf(){return kn(ec)}function w0(){return Qt().memoizedState}function x0(){return Qt().memoizedState}function Q2(t){for(var s=t.return;s!==null;){switch(s.tag){case 24:case 3:var a=_i();t=Tr(a);var l=Rr(s,t,a);l!==null&&(bi(l,s,a),Nl(l,s,a)),s={cache:Vh()},t.payload=s;return}s=s.return}}function $2(t,s,a){var l=_i();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Ru(t)?S0(s,a):(a=Rh(t,s,a,l),a!==null&&(bi(a,t,l),A0(a,s,l)))}function E0(t,s,a){var l=_i();Ll(t,s,a,l)}function Ll(t,s,a,l){var d={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Ru(t))S0(s,d);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var b=s.lastRenderedState,S=m(b,a);if(d.hasEagerState=!0,d.eagerState=S,mi(S,b))return uu(t,s,d,0),Tt===null&&cu(),!1}catch{}finally{}if(a=Rh(t,s,d,l),a!==null)return bi(a,t,l),A0(a,s,l),!0}return!1}function cf(t,s,a,l){if(l={lane:2,revertLane:zf(),action:l,hasEagerState:!1,eagerState:null,next:null},Ru(t)){if(s)throw Error(r(479))}else s=Rh(t,a,l,2),s!==null&&bi(s,t,2)}function Ru(t){var s=t.alternate;return t===Xe||s!==null&&s===Xe}function S0(t,s){Ro=wu=!0;var a=t.pending;a===null?s.next=s:(s.next=a.next,a.next=s),t.pending=s}function A0(t,s,a){if((a&4194048)!==0){var l=s.lanes;l&=t.pendingLanes,a|=l,s.lanes=a,pa(t,a)}}var Cu={readContext:kn,use:Eu,useCallback:qt,useContext:qt,useEffect:qt,useImperativeHandle:qt,useLayoutEffect:qt,useInsertionEffect:qt,useMemo:qt,useReducer:qt,useRef:qt,useState:qt,useDebugValue:qt,useDeferredValue:qt,useTransition:qt,useSyncExternalStore:qt,useId:qt,useHostTransitionStatus:qt,useFormState:qt,useActionState:qt,useOptimistic:qt,useMemoCache:qt,useCacheRefresh:qt},T0={readContext:kn,use:Eu,useCallback:function(t,s){return ei().memoizedState=[t,s===void 0?null:s],t},useContext:kn,useEffect:c0,useImperativeHandle:function(t,s,a){a=a!=null?a.concat([t]):null,Tu(4194308,4,f0.bind(null,s,t),a)},useLayoutEffect:function(t,s){return Tu(4194308,4,t,s)},useInsertionEffect:function(t,s){Tu(4,2,t,s)},useMemo:function(t,s){var a=ei();s=s===void 0?null:s;var l=t();if(Oa){Un(!0);try{t()}finally{Un(!1)}}return a.memoizedState=[l,s],l},useReducer:function(t,s,a){var l=ei();if(a!==void 0){var d=a(s);if(Oa){Un(!0);try{a(s)}finally{Un(!1)}}}else d=s;return l.memoizedState=l.baseState=d,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:d},l.queue=t,t=t.dispatch=$2.bind(null,Xe,t),[l.memoizedState,t]},useRef:function(t){var s=ei();return t={current:t},s.memoizedState=t},useState:function(t){t=nf(t);var s=t.queue,a=E0.bind(null,Xe,s);return s.dispatch=a,[t.memoizedState,a]},useDebugValue:rf,useDeferredValue:function(t,s){var a=ei();return af(a,t,s)},useTransition:function(){var t=nf(!1);return t=v0.bind(null,Xe,t.queue,!0,!1),ei().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,s,a){var l=Xe,d=ei();if(ut){if(a===void 0)throw Error(r(407));a=a()}else{if(a=s(),Tt===null)throw Error(r(349));(it&124)!==0||Wg(l,s,a)}d.memoizedState=a;var m={value:a,getSnapshot:s};return d.queue=m,c0(Kg.bind(null,l,m,t),[t]),l.flags|=2048,Io(9,Au(),Zg.bind(null,l,m,a,s),null),a},useId:function(){var t=ei(),s=Tt.identifierPrefix;if(ut){var a=Ys,l=Ks;a=(l&~(1<<32-dn(l)-1)).toString(32)+a,s=""+s+"R"+a,a=xu++,0<a&&(s+="H"+a.toString(32)),s+=""}else a=X2++,s=""+s+"r"+a.toString(32)+"";return t.memoizedState=s},useHostTransitionStatus:lf,useFormState:s0,useActionState:s0,useOptimistic:function(t){var s=ei();s.memoizedState=s.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=cf.bind(null,Xe,!0,a),a.dispatch=s,[t,s]},useMemoCache:Jh,useCacheRefresh:function(){return ei().memoizedState=Q2.bind(null,Xe)}},R0={readContext:kn,use:Eu,useCallback:p0,useContext:kn,useEffect:u0,useImperativeHandle:m0,useInsertionEffect:d0,useLayoutEffect:h0,useMemo:g0,useReducer:Su,useRef:l0,useState:function(){return Su(Js)},useDebugValue:rf,useDeferredValue:function(t,s){var a=Qt();return y0(a,vt.memoizedState,t,s)},useTransition:function(){var t=Su(Js)[0],s=Qt().memoizedState;return[typeof t=="boolean"?t:Ol(t),s]},useSyncExternalStore:Xg,useId:w0,useHostTransitionStatus:lf,useFormState:r0,useActionState:r0,useOptimistic:function(t,s){var a=Qt();return $g(a,vt,t,s)},useMemoCache:Jh,useCacheRefresh:x0},J2={readContext:kn,use:Eu,useCallback:p0,useContext:kn,useEffect:u0,useImperativeHandle:m0,useInsertionEffect:d0,useLayoutEffect:h0,useMemo:g0,useReducer:tf,useRef:l0,useState:function(){return tf(Js)},useDebugValue:rf,useDeferredValue:function(t,s){var a=Qt();return vt===null?af(a,t,s):y0(a,vt.memoizedState,t,s)},useTransition:function(){var t=tf(Js)[0],s=Qt().memoizedState;return[typeof t=="boolean"?t:Ol(t),s]},useSyncExternalStore:Xg,useId:w0,useHostTransitionStatus:lf,useFormState:o0,useActionState:o0,useOptimistic:function(t,s){var a=Qt();return vt!==null?$g(a,vt,t,s):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Jh,useCacheRefresh:x0},No=null,Vl=0;function Iu(t){var s=Vl;return Vl+=1,No===null&&(No=[]),Pg(No,t,s)}function Pl(t,s){s=s.props.ref,t.ref=s!==void 0?s:null}function Nu(t,s){throw s.$$typeof===x?Error(r(525)):(t=Object.prototype.toString.call(s),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t)))}function C0(t){var s=t._init;return s(t._payload)}function I0(t){function s(q,U){if(t){var W=q.deletions;W===null?(q.deletions=[U],q.flags|=16):W.push(U)}}function a(q,U){if(!t)return null;for(;U!==null;)s(q,U),U=U.sibling;return null}function l(q){for(var U=new Map;q!==null;)q.key!==null?U.set(q.key,q):U.set(q.index,q),q=q.sibling;return U}function d(q,U){return q=Zs(q,U),q.index=0,q.sibling=null,q}function m(q,U,W){return q.index=W,t?(W=q.alternate,W!==null?(W=W.index,W<U?(q.flags|=67108866,U):W):(q.flags|=67108866,U)):(q.flags|=1048576,U)}function b(q){return t&&q.alternate===null&&(q.flags|=67108866),q}function S(q,U,W,oe){return U===null||U.tag!==6?(U=Ih(W,q.mode,oe),U.return=q,U):(U=d(U,W),U.return=q,U)}function O(q,U,W,oe){var xe=W.type;return xe===z?ae(q,U,W.props.children,oe,W.key):U!==null&&(U.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===R&&C0(xe)===U.type)?(U=d(U,W.props),Pl(U,W),U.return=q,U):(U=hu(W.type,W.key,W.props,null,q.mode,oe),Pl(U,W),U.return=q,U)}function K(q,U,W,oe){return U===null||U.tag!==4||U.stateNode.containerInfo!==W.containerInfo||U.stateNode.implementation!==W.implementation?(U=Nh(W,q.mode,oe),U.return=q,U):(U=d(U,W.children||[]),U.return=q,U)}function ae(q,U,W,oe,xe){return U===null||U.tag!==7?(U=Ta(W,q.mode,oe,xe),U.return=q,U):(U=d(U,W),U.return=q,U)}function ue(q,U,W){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return U=Ih(""+U,q.mode,W),U.return=q,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case A:return W=hu(U.type,U.key,U.props,null,q.mode,W),Pl(W,U),W.return=q,W;case P:return U=Nh(U,q.mode,W),U.return=q,U;case R:var oe=U._init;return U=oe(U._payload),ue(q,U,W)}if(Qe(U)||L(U))return U=Ta(U,q.mode,W,null),U.return=q,U;if(typeof U.then=="function")return ue(q,Iu(U),W);if(U.$$typeof===X)return ue(q,gu(q,U),W);Nu(q,U)}return null}function Q(q,U,W,oe){var xe=U!==null?U.key:null;if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return xe!==null?null:S(q,U,""+W,oe);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case A:return W.key===xe?O(q,U,W,oe):null;case P:return W.key===xe?K(q,U,W,oe):null;case R:return xe=W._init,W=xe(W._payload),Q(q,U,W,oe)}if(Qe(W)||L(W))return xe!==null?null:ae(q,U,W,oe,null);if(typeof W.then=="function")return Q(q,U,Iu(W),oe);if(W.$$typeof===X)return Q(q,U,gu(q,W),oe);Nu(q,W)}return null}function J(q,U,W,oe,xe){if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return q=q.get(W)||null,S(U,q,""+oe,xe);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case A:return q=q.get(oe.key===null?W:oe.key)||null,O(U,q,oe,xe);case P:return q=q.get(oe.key===null?W:oe.key)||null,K(U,q,oe,xe);case R:var Ze=oe._init;return oe=Ze(oe._payload),J(q,U,W,oe,xe)}if(Qe(oe)||L(oe))return q=q.get(W)||null,ae(U,q,oe,xe,null);if(typeof oe.then=="function")return J(q,U,W,Iu(oe),xe);if(oe.$$typeof===X)return J(q,U,W,gu(U,oe),xe);Nu(U,oe)}return null}function Pe(q,U,W,oe){for(var xe=null,Ze=null,Ae=U,Me=U=0,yn=null;Ae!==null&&Me<W.length;Me++){Ae.index>Me?(yn=Ae,Ae=null):yn=Ae.sibling;var ot=Q(q,Ae,W[Me],oe);if(ot===null){Ae===null&&(Ae=yn);break}t&&Ae&&ot.alternate===null&&s(q,Ae),U=m(ot,U,Me),Ze===null?xe=ot:Ze.sibling=ot,Ze=ot,Ae=yn}if(Me===W.length)return a(q,Ae),ut&&Ca(q,Me),xe;if(Ae===null){for(;Me<W.length;Me++)Ae=ue(q,W[Me],oe),Ae!==null&&(U=m(Ae,U,Me),Ze===null?xe=Ae:Ze.sibling=Ae,Ze=Ae);return ut&&Ca(q,Me),xe}for(Ae=l(Ae);Me<W.length;Me++)yn=J(Ae,q,Me,W[Me],oe),yn!==null&&(t&&yn.alternate!==null&&Ae.delete(yn.key===null?Me:yn.key),U=m(yn,U,Me),Ze===null?xe=yn:Ze.sibling=yn,Ze=yn);return t&&Ae.forEach(function(qr){return s(q,qr)}),ut&&Ca(q,Me),xe}function je(q,U,W,oe){if(W==null)throw Error(r(151));for(var xe=null,Ze=null,Ae=U,Me=U=0,yn=null,ot=W.next();Ae!==null&&!ot.done;Me++,ot=W.next()){Ae.index>Me?(yn=Ae,Ae=null):yn=Ae.sibling;var qr=Q(q,Ae,ot.value,oe);if(qr===null){Ae===null&&(Ae=yn);break}t&&Ae&&qr.alternate===null&&s(q,Ae),U=m(qr,U,Me),Ze===null?xe=qr:Ze.sibling=qr,Ze=qr,Ae=yn}if(ot.done)return a(q,Ae),ut&&Ca(q,Me),xe;if(Ae===null){for(;!ot.done;Me++,ot=W.next())ot=ue(q,ot.value,oe),ot!==null&&(U=m(ot,U,Me),Ze===null?xe=ot:Ze.sibling=ot,Ze=ot);return ut&&Ca(q,Me),xe}for(Ae=l(Ae);!ot.done;Me++,ot=W.next())ot=J(Ae,q,Me,ot.value,oe),ot!==null&&(t&&ot.alternate!==null&&Ae.delete(ot.key===null?Me:ot.key),U=m(ot,U,Me),Ze===null?xe=ot:Ze.sibling=ot,Ze=ot);return t&&Ae.forEach(function(eE){return s(q,eE)}),ut&&Ca(q,Me),xe}function bt(q,U,W,oe){if(typeof W=="object"&&W!==null&&W.type===z&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case A:e:{for(var xe=W.key;U!==null;){if(U.key===xe){if(xe=W.type,xe===z){if(U.tag===7){a(q,U.sibling),oe=d(U,W.props.children),oe.return=q,q=oe;break e}}else if(U.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===R&&C0(xe)===U.type){a(q,U.sibling),oe=d(U,W.props),Pl(oe,W),oe.return=q,q=oe;break e}a(q,U);break}else s(q,U);U=U.sibling}W.type===z?(oe=Ta(W.props.children,q.mode,oe,W.key),oe.return=q,q=oe):(oe=hu(W.type,W.key,W.props,null,q.mode,oe),Pl(oe,W),oe.return=q,q=oe)}return b(q);case P:e:{for(xe=W.key;U!==null;){if(U.key===xe)if(U.tag===4&&U.stateNode.containerInfo===W.containerInfo&&U.stateNode.implementation===W.implementation){a(q,U.sibling),oe=d(U,W.children||[]),oe.return=q,q=oe;break e}else{a(q,U);break}else s(q,U);U=U.sibling}oe=Nh(W,q.mode,oe),oe.return=q,q=oe}return b(q);case R:return xe=W._init,W=xe(W._payload),bt(q,U,W,oe)}if(Qe(W))return Pe(q,U,W,oe);if(L(W)){if(xe=L(W),typeof xe!="function")throw Error(r(150));return W=xe.call(W),je(q,U,W,oe)}if(typeof W.then=="function")return bt(q,U,Iu(W),oe);if(W.$$typeof===X)return bt(q,U,gu(q,W),oe);Nu(q,W)}return typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint"?(W=""+W,U!==null&&U.tag===6?(a(q,U.sibling),oe=d(U,W),oe.return=q,q=oe):(a(q,U),oe=Ih(W,q.mode,oe),oe.return=q,q=oe),b(q)):a(q,U)}return function(q,U,W,oe){try{Vl=0;var xe=bt(q,U,W,oe);return No=null,xe}catch(Ae){if(Ae===Cl||Ae===vu)throw Ae;var Ze=pi(29,Ae,null,q.mode);return Ze.lanes=oe,Ze.return=q,Ze}finally{}}}var ko=I0(!0),N0=I0(!1),Ni=se(null),ys=null;function Ir(t){var s=t.alternate;ce(on,on.current&1),ce(Ni,t),ys===null&&(s===null||To.current!==null||s.memoizedState!==null)&&(ys=t)}function k0(t){if(t.tag===22){if(ce(on,on.current),ce(Ni,t),ys===null){var s=t.alternate;s!==null&&s.memoizedState!==null&&(ys=t)}}else Nr()}function Nr(){ce(on,on.current),ce(Ni,Ni.current)}function er(t){ge(Ni),ys===t&&(ys=null),ge(on)}var on=se(0);function ku(t){for(var s=t;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Jf(a)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function uf(t,s,a,l){s=t.memoizedState,a=a(l,s),a=a==null?s:w({},s,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var df={enqueueSetState:function(t,s,a){t=t._reactInternals;var l=_i(),d=Tr(l);d.payload=s,a!=null&&(d.callback=a),s=Rr(t,d,l),s!==null&&(bi(s,t,l),Nl(s,t,l))},enqueueReplaceState:function(t,s,a){t=t._reactInternals;var l=_i(),d=Tr(l);d.tag=1,d.payload=s,a!=null&&(d.callback=a),s=Rr(t,d,l),s!==null&&(bi(s,t,l),Nl(s,t,l))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var a=_i(),l=Tr(a);l.tag=2,s!=null&&(l.callback=s),s=Rr(t,l,a),s!==null&&(bi(s,t,a),Nl(s,t,a))}};function D0(t,s,a,l,d,m,b){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,m,b):s.prototype&&s.prototype.isPureReactComponent?!bl(a,l)||!bl(d,m):!0}function j0(t,s,a,l){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,l),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,l),s.state!==t&&df.enqueueReplaceState(s,s.state,null)}function Ma(t,s){var a=s;if("ref"in s){a={};for(var l in s)l!=="ref"&&(a[l]=s[l])}if(t=t.defaultProps){a===s&&(a=w({},a));for(var d in t)a[d]===void 0&&(a[d]=t[d])}return a}var Du=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function O0(t){Du(t)}function M0(t){console.error(t)}function L0(t){Du(t)}function ju(t,s){try{var a=t.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(l){setTimeout(function(){throw l})}}function V0(t,s,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function hf(t,s,a){return a=Tr(a),a.tag=3,a.payload={element:null},a.callback=function(){ju(t,s)},a}function P0(t){return t=Tr(t),t.tag=3,t}function U0(t,s,a,l){var d=a.type.getDerivedStateFromError;if(typeof d=="function"){var m=l.value;t.payload=function(){return d(m)},t.callback=function(){V0(s,a,l)}}var b=a.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(t.callback=function(){V0(s,a,l),typeof d!="function"&&(Lr===null?Lr=new Set([this]):Lr.add(this));var S=l.stack;this.componentDidCatch(l.value,{componentStack:S!==null?S:""})})}function ex(t,s,a,l,d){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(s=a.alternate,s!==null&&Al(s,a,d,!0),a=Ni.current,a!==null){switch(a.tag){case 13:return ys===null?Lf():a.alternate===null&&zt===0&&(zt=3),a.flags&=-257,a.flags|=65536,a.lanes=d,l===Bh?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([l]):s.add(l),Pf(t,l,d)),!1;case 22:return a.flags|=65536,l===Bh?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([l]):a.add(l)),Pf(t,l,d)),!1}throw Error(r(435,a.tag))}return Pf(t,l,d),Lf(),!1}if(ut)return s=Ni.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=d,l!==jh&&(t=Error(r(422),{cause:l}),Sl(Ti(t,a)))):(l!==jh&&(s=Error(r(423),{cause:l}),Sl(Ti(s,a))),t=t.current.alternate,t.flags|=65536,d&=-d,t.lanes|=d,l=Ti(l,a),d=hf(t.stateNode,l,d),Hh(t,d),zt!==4&&(zt=2)),!1;var m=Error(r(520),{cause:l});if(m=Ti(m,a),Gl===null?Gl=[m]:Gl.push(m),zt!==4&&(zt=2),s===null)return!0;l=Ti(l,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,t=d&-d,a.lanes|=t,t=hf(a.stateNode,l,t),Hh(a,t),!1;case 1:if(s=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Lr===null||!Lr.has(m))))return a.flags|=65536,d&=-d,a.lanes|=d,d=P0(d),U0(d,t,a,l),Hh(a,d),!1}a=a.return}while(a!==null);return!1}var B0=Error(r(461)),pn=!1;function En(t,s,a,l){s.child=t===null?N0(s,null,a,l):ko(s,t.child,a,l)}function z0(t,s,a,l,d){a=a.render;var m=s.ref;if("ref"in l){var b={};for(var S in l)S!=="ref"&&(b[S]=l[S])}else b=l;return Da(s),l=Zh(t,s,a,b,m,d),S=Kh(),t!==null&&!pn?(Yh(t,s,d),tr(t,s,d)):(ut&&S&&kh(s),s.flags|=1,En(t,s,l,d),s.child)}function F0(t,s,a,l,d){if(t===null){var m=a.type;return typeof m=="function"&&!Ch(m)&&m.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=m,H0(t,s,m,l,d)):(t=hu(a.type,null,l,s,s.mode,d),t.ref=s.ref,t.return=s,s.child=t)}if(m=t.child,!bf(t,d)){var b=m.memoizedProps;if(a=a.compare,a=a!==null?a:bl,a(b,l)&&t.ref===s.ref)return tr(t,s,d)}return s.flags|=1,t=Zs(m,l),t.ref=s.ref,t.return=s,s.child=t}function H0(t,s,a,l,d){if(t!==null){var m=t.memoizedProps;if(bl(m,l)&&t.ref===s.ref)if(pn=!1,s.pendingProps=l=m,bf(t,d))(t.flags&131072)!==0&&(pn=!0);else return s.lanes=t.lanes,tr(t,s,d)}return ff(t,s,a,l,d)}function q0(t,s,a){var l=s.pendingProps,d=l.children,m=t!==null?t.memoizedState:null;if(l.mode==="hidden"){if((s.flags&128)!==0){if(l=m!==null?m.baseLanes|a:a,t!==null){for(d=s.child=t.child,m=0;d!==null;)m=m|d.lanes|d.childLanes,d=d.sibling;s.childLanes=m&~l}else s.childLanes=0,s.child=null;return G0(t,s,l,a)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},t!==null&&yu(s,m!==null?m.cachePool:null),m!==null?Hg(s,m):Gh(),k0(s);else return s.lanes=s.childLanes=536870912,G0(t,s,m!==null?m.baseLanes|a:a,a)}else m!==null?(yu(s,m.cachePool),Hg(s,m),Nr(),s.memoizedState=null):(t!==null&&yu(s,null),Gh(),Nr());return En(t,s,d,a),s.child}function G0(t,s,a,l){var d=Uh();return d=d===null?null:{parent:an._currentValue,pool:d},s.memoizedState={baseLanes:a,cachePool:d},t!==null&&yu(s,null),Gh(),k0(s),t!==null&&Al(t,s,l,!0),null}function Ou(t,s){var a=s.ref;if(a===null)t!==null&&t.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(t===null||t.ref!==a)&&(s.flags|=4194816)}}function ff(t,s,a,l,d){return Da(s),a=Zh(t,s,a,l,void 0,d),l=Kh(),t!==null&&!pn?(Yh(t,s,d),tr(t,s,d)):(ut&&l&&kh(s),s.flags|=1,En(t,s,a,d),s.child)}function X0(t,s,a,l,d,m){return Da(s),s.updateQueue=null,a=Gg(s,l,a,d),qg(t),l=Kh(),t!==null&&!pn?(Yh(t,s,m),tr(t,s,m)):(ut&&l&&kh(s),s.flags|=1,En(t,s,a,m),s.child)}function W0(t,s,a,l,d){if(Da(s),s.stateNode===null){var m=wo,b=a.contextType;typeof b=="object"&&b!==null&&(m=kn(b)),m=new a(l,m),s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=df,s.stateNode=m,m._reactInternals=s,m=s.stateNode,m.props=l,m.state=s.memoizedState,m.refs={},zh(s),b=a.contextType,m.context=typeof b=="object"&&b!==null?kn(b):wo,m.state=s.memoizedState,b=a.getDerivedStateFromProps,typeof b=="function"&&(uf(s,a,b,l),m.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(b=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),b!==m.state&&df.enqueueReplaceState(m,m.state,null),Dl(s,l,m,d),kl(),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308),l=!0}else if(t===null){m=s.stateNode;var S=s.memoizedProps,O=Ma(a,S);m.props=O;var K=m.context,ae=a.contextType;b=wo,typeof ae=="object"&&ae!==null&&(b=kn(ae));var ue=a.getDerivedStateFromProps;ae=typeof ue=="function"||typeof m.getSnapshotBeforeUpdate=="function",S=s.pendingProps!==S,ae||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(S||K!==b)&&j0(s,m,l,b),Ar=!1;var Q=s.memoizedState;m.state=Q,Dl(s,l,m,d),kl(),K=s.memoizedState,S||Q!==K||Ar?(typeof ue=="function"&&(uf(s,a,ue,l),K=s.memoizedState),(O=Ar||D0(s,a,O,l,Q,K,b))?(ae||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(s.flags|=4194308)):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=l,s.memoizedState=K),m.props=l,m.state=K,m.context=b,l=O):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),l=!1)}else{m=s.stateNode,Fh(t,s),b=s.memoizedProps,ae=Ma(a,b),m.props=ae,ue=s.pendingProps,Q=m.context,K=a.contextType,O=wo,typeof K=="object"&&K!==null&&(O=kn(K)),S=a.getDerivedStateFromProps,(K=typeof S=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(b!==ue||Q!==O)&&j0(s,m,l,O),Ar=!1,Q=s.memoizedState,m.state=Q,Dl(s,l,m,d),kl();var J=s.memoizedState;b!==ue||Q!==J||Ar||t!==null&&t.dependencies!==null&&pu(t.dependencies)?(typeof S=="function"&&(uf(s,a,S,l),J=s.memoizedState),(ae=Ar||D0(s,a,ae,l,Q,J,O)||t!==null&&t.dependencies!==null&&pu(t.dependencies))?(K||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(l,J,O),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(l,J,O)),typeof m.componentDidUpdate=="function"&&(s.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof m.componentDidUpdate!="function"||b===t.memoizedProps&&Q===t.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&Q===t.memoizedState||(s.flags|=1024),s.memoizedProps=l,s.memoizedState=J),m.props=l,m.state=J,m.context=O,l=ae):(typeof m.componentDidUpdate!="function"||b===t.memoizedProps&&Q===t.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&Q===t.memoizedState||(s.flags|=1024),l=!1)}return m=l,Ou(t,s),l=(s.flags&128)!==0,m||l?(m=s.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:m.render(),s.flags|=1,t!==null&&l?(s.child=ko(s,t.child,null,d),s.child=ko(s,null,a,d)):En(t,s,a,d),s.memoizedState=m.state,t=s.child):t=tr(t,s,d),t}function Z0(t,s,a,l){return El(),s.flags|=256,En(t,s,a,l),s.child}var mf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function pf(t){return{baseLanes:t,cachePool:Mg()}}function gf(t,s,a){return t=t!==null?t.childLanes&~a:0,s&&(t|=ki),t}function K0(t,s,a){var l=s.pendingProps,d=!1,m=(s.flags&128)!==0,b;if((b=m)||(b=t!==null&&t.memoizedState===null?!1:(on.current&2)!==0),b&&(d=!0,s.flags&=-129),b=(s.flags&32)!==0,s.flags&=-33,t===null){if(ut){if(d?Ir(s):Nr(),ut){var S=Bt,O;if(O=S){e:{for(O=S,S=gs;O.nodeType!==8;){if(!S){S=null;break e}if(O=Yi(O.nextSibling),O===null){S=null;break e}}S=O}S!==null?(s.memoizedState={dehydrated:S,treeContext:Ra!==null?{id:Ks,overflow:Ys}:null,retryLane:536870912,hydrationErrors:null},O=pi(18,null,null,0),O.stateNode=S,O.return=s,s.child=O,Fn=s,Bt=null,O=!0):O=!1}O||Na(s)}if(S=s.memoizedState,S!==null&&(S=S.dehydrated,S!==null))return Jf(S)?s.lanes=32:s.lanes=536870912,null;er(s)}return S=l.children,l=l.fallback,d?(Nr(),d=s.mode,S=Mu({mode:"hidden",children:S},d),l=Ta(l,d,a,null),S.return=s,l.return=s,S.sibling=l,s.child=S,d=s.child,d.memoizedState=pf(a),d.childLanes=gf(t,b,a),s.memoizedState=mf,l):(Ir(s),yf(s,S))}if(O=t.memoizedState,O!==null&&(S=O.dehydrated,S!==null)){if(m)s.flags&256?(Ir(s),s.flags&=-257,s=vf(t,s,a)):s.memoizedState!==null?(Nr(),s.child=t.child,s.flags|=128,s=null):(Nr(),d=l.fallback,S=s.mode,l=Mu({mode:"visible",children:l.children},S),d=Ta(d,S,a,null),d.flags|=2,l.return=s,d.return=s,l.sibling=d,s.child=l,ko(s,t.child,null,a),l=s.child,l.memoizedState=pf(a),l.childLanes=gf(t,b,a),s.memoizedState=mf,s=d);else if(Ir(s),Jf(S)){if(b=S.nextSibling&&S.nextSibling.dataset,b)var K=b.dgst;b=K,l=Error(r(419)),l.stack="",l.digest=b,Sl({value:l,source:null,stack:null}),s=vf(t,s,a)}else if(pn||Al(t,s,a,!1),b=(a&t.childLanes)!==0,pn||b){if(b=Tt,b!==null&&(l=a&-a,l=(l&42)!==0?1:Bi(l),l=(l&(b.suspendedLanes|a))!==0?0:l,l!==0&&l!==O.retryLane))throw O.retryLane=l,bo(t,l),bi(b,t,l),B0;S.data==="$?"||Lf(),s=vf(t,s,a)}else S.data==="$?"?(s.flags|=192,s.child=t.child,s=null):(t=O.treeContext,Bt=Yi(S.nextSibling),Fn=s,ut=!0,Ia=null,gs=!1,t!==null&&(Ci[Ii++]=Ks,Ci[Ii++]=Ys,Ci[Ii++]=Ra,Ks=t.id,Ys=t.overflow,Ra=s),s=yf(s,l.children),s.flags|=4096);return s}return d?(Nr(),d=l.fallback,S=s.mode,O=t.child,K=O.sibling,l=Zs(O,{mode:"hidden",children:l.children}),l.subtreeFlags=O.subtreeFlags&65011712,K!==null?d=Zs(K,d):(d=Ta(d,S,a,null),d.flags|=2),d.return=s,l.return=s,l.sibling=d,s.child=l,l=d,d=s.child,S=t.child.memoizedState,S===null?S=pf(a):(O=S.cachePool,O!==null?(K=an._currentValue,O=O.parent!==K?{parent:K,pool:K}:O):O=Mg(),S={baseLanes:S.baseLanes|a,cachePool:O}),d.memoizedState=S,d.childLanes=gf(t,b,a),s.memoizedState=mf,l):(Ir(s),a=t.child,t=a.sibling,a=Zs(a,{mode:"visible",children:l.children}),a.return=s,a.sibling=null,t!==null&&(b=s.deletions,b===null?(s.deletions=[t],s.flags|=16):b.push(t)),s.child=a,s.memoizedState=null,a)}function yf(t,s){return s=Mu({mode:"visible",children:s},t.mode),s.return=t,t.child=s}function Mu(t,s){return t=pi(22,t,null,s),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function vf(t,s,a){return ko(s,t.child,null,a),t=yf(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function Y0(t,s,a){t.lanes|=s;var l=t.alternate;l!==null&&(l.lanes|=s),Mh(t.return,s,a)}function _f(t,s,a,l,d){var m=t.memoizedState;m===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:d}:(m.isBackwards=s,m.rendering=null,m.renderingStartTime=0,m.last=l,m.tail=a,m.tailMode=d)}function Q0(t,s,a){var l=s.pendingProps,d=l.revealOrder,m=l.tail;if(En(t,s,l.children,a),l=on.current,(l&2)!==0)l=l&1|2,s.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Y0(t,a,s);else if(t.tag===19)Y0(t,a,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch(ce(on,l),d){case"forwards":for(a=s.child,d=null;a!==null;)t=a.alternate,t!==null&&ku(t)===null&&(d=a),a=a.sibling;a=d,a===null?(d=s.child,s.child=null):(d=a.sibling,a.sibling=null),_f(s,!1,d,a,m);break;case"backwards":for(a=null,d=s.child,s.child=null;d!==null;){if(t=d.alternate,t!==null&&ku(t)===null){s.child=d;break}t=d.sibling,d.sibling=a,a=d,d=t}_f(s,!0,a,null,m);break;case"together":_f(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function tr(t,s,a){if(t!==null&&(s.dependencies=t.dependencies),Mr|=s.lanes,(a&s.childLanes)===0)if(t!==null){if(Al(t,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(t!==null&&s.child!==t.child)throw Error(r(153));if(s.child!==null){for(t=s.child,a=Zs(t,t.pendingProps),s.child=a,a.return=s;t.sibling!==null;)t=t.sibling,a=a.sibling=Zs(t,t.pendingProps),a.return=s;a.sibling=null}return s.child}function bf(t,s){return(t.lanes&s)!==0?!0:(t=t.dependencies,!!(t!==null&&pu(t)))}function tx(t,s,a){switch(s.tag){case 3:dt(s,s.stateNode.containerInfo),Sr(s,an,t.memoizedState.cache),El();break;case 27:case 5:Vn(s);break;case 4:dt(s,s.stateNode.containerInfo);break;case 10:Sr(s,s.type,s.memoizedProps.value);break;case 13:var l=s.memoizedState;if(l!==null)return l.dehydrated!==null?(Ir(s),s.flags|=128,null):(a&s.child.childLanes)!==0?K0(t,s,a):(Ir(s),t=tr(t,s,a),t!==null?t.sibling:null);Ir(s);break;case 19:var d=(t.flags&128)!==0;if(l=(a&s.childLanes)!==0,l||(Al(t,s,a,!1),l=(a&s.childLanes)!==0),d){if(l)return Q0(t,s,a);s.flags|=128}if(d=s.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),ce(on,on.current),l)break;return null;case 22:case 23:return s.lanes=0,q0(t,s,a);case 24:Sr(s,an,t.memoizedState.cache)}return tr(t,s,a)}function $0(t,s,a){if(t!==null)if(t.memoizedProps!==s.pendingProps)pn=!0;else{if(!bf(t,a)&&(s.flags&128)===0)return pn=!1,tx(t,s,a);pn=(t.flags&131072)!==0}else pn=!1,ut&&(s.flags&1048576)!==0&&Cg(s,mu,s.index);switch(s.lanes=0,s.tag){case 16:e:{t=s.pendingProps;var l=s.elementType,d=l._init;if(l=d(l._payload),s.type=l,typeof l=="function")Ch(l)?(t=Ma(l,t),s.tag=1,s=W0(null,s,l,t,a)):(s.tag=0,s=ff(null,s,l,t,a));else{if(l!=null){if(d=l.$$typeof,d===te){s.tag=11,s=z0(null,s,l,t,a);break e}else if(d===k){s.tag=14,s=F0(null,s,l,t,a);break e}}throw s=ze(l)||l,Error(r(306,s,""))}}return s;case 0:return ff(t,s,s.type,s.pendingProps,a);case 1:return l=s.type,d=Ma(l,s.pendingProps),W0(t,s,l,d,a);case 3:e:{if(dt(s,s.stateNode.containerInfo),t===null)throw Error(r(387));l=s.pendingProps;var m=s.memoizedState;d=m.element,Fh(t,s),Dl(s,l,null,a);var b=s.memoizedState;if(l=b.cache,Sr(s,an,l),l!==m.cache&&Lh(s,[an],a,!0),kl(),l=b.element,m.isDehydrated)if(m={element:l,isDehydrated:!1,cache:b.cache},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){s=Z0(t,s,l,a);break e}else if(l!==d){d=Ti(Error(r(424)),s),Sl(d),s=Z0(t,s,l,a);break e}else{switch(t=s.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Bt=Yi(t.firstChild),Fn=s,ut=!0,Ia=null,gs=!0,a=N0(s,null,l,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(El(),l===d){s=tr(t,s,a);break e}En(t,s,l,a)}s=s.child}return s;case 26:return Ou(t,s),t===null?(a=nv(s.type,null,s.pendingProps,null))?s.memoizedState=a:ut||(a=s.type,t=s.pendingProps,l=Ku(ke.current).createElement(a),l[Ft]=s,l[kt]=t,An(l,a,t),Dt(l),s.stateNode=l):s.memoizedState=nv(s.type,t.memoizedProps,s.pendingProps,t.memoizedState),null;case 27:return Vn(s),t===null&&ut&&(l=s.stateNode=Jy(s.type,s.pendingProps,ke.current),Fn=s,gs=!0,d=Bt,Ur(s.type)?(em=d,Bt=Yi(l.firstChild)):Bt=d),En(t,s,s.pendingProps.children,a),Ou(t,s),t===null&&(s.flags|=4194304),s.child;case 5:return t===null&&ut&&((d=l=Bt)&&(l=Ix(l,s.type,s.pendingProps,gs),l!==null?(s.stateNode=l,Fn=s,Bt=Yi(l.firstChild),gs=!1,d=!0):d=!1),d||Na(s)),Vn(s),d=s.type,m=s.pendingProps,b=t!==null?t.memoizedProps:null,l=m.children,Yf(d,m)?l=null:b!==null&&Yf(d,b)&&(s.flags|=32),s.memoizedState!==null&&(d=Zh(t,s,W2,null,null,a),ec._currentValue=d),Ou(t,s),En(t,s,l,a),s.child;case 6:return t===null&&ut&&((t=a=Bt)&&(a=Nx(a,s.pendingProps,gs),a!==null?(s.stateNode=a,Fn=s,Bt=null,t=!0):t=!1),t||Na(s)),null;case 13:return K0(t,s,a);case 4:return dt(s,s.stateNode.containerInfo),l=s.pendingProps,t===null?s.child=ko(s,null,l,a):En(t,s,l,a),s.child;case 11:return z0(t,s,s.type,s.pendingProps,a);case 7:return En(t,s,s.pendingProps,a),s.child;case 8:return En(t,s,s.pendingProps.children,a),s.child;case 12:return En(t,s,s.pendingProps.children,a),s.child;case 10:return l=s.pendingProps,Sr(s,s.type,l.value),En(t,s,l.children,a),s.child;case 9:return d=s.type._context,l=s.pendingProps.children,Da(s),d=kn(d),l=l(d),s.flags|=1,En(t,s,l,a),s.child;case 14:return F0(t,s,s.type,s.pendingProps,a);case 15:return H0(t,s,s.type,s.pendingProps,a);case 19:return Q0(t,s,a);case 31:return l=s.pendingProps,a=s.mode,l={mode:l.mode,children:l.children},t===null?(a=Mu(l,a),a.ref=s.ref,s.child=a,a.return=s,s=a):(a=Zs(t.child,l),a.ref=s.ref,s.child=a,a.return=s,s=a),s;case 22:return q0(t,s,a);case 24:return Da(s),l=kn(an),t===null?(d=Uh(),d===null&&(d=Tt,m=Vh(),d.pooledCache=m,m.refCount++,m!==null&&(d.pooledCacheLanes|=a),d=m),s.memoizedState={parent:l,cache:d},zh(s),Sr(s,an,d)):((t.lanes&a)!==0&&(Fh(t,s),Dl(s,null,null,a),kl()),d=t.memoizedState,m=s.memoizedState,d.parent!==l?(d={parent:l,cache:l},s.memoizedState=d,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=d),Sr(s,an,l)):(l=m.cache,Sr(s,an,l),l!==d.cache&&Lh(s,[an],a,!0))),En(t,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function nr(t){t.flags|=4}function J0(t,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!ov(s)){if(s=Ni.current,s!==null&&((it&4194048)===it?ys!==null:(it&62914560)!==it&&(it&536870912)===0||s!==ys))throw Il=Bh,Lg;t.flags|=8192}}function Lu(t,s){s!==null&&(t.flags|=4),t.flags&16384&&(s=t.tag!==22?ma():536870912,t.lanes|=s,Mo|=s)}function Ul(t,s){if(!ut)switch(t.tailMode){case"hidden":s=t.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function jt(t){var s=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(s)for(var d=t.child;d!==null;)a|=d.lanes|d.childLanes,l|=d.subtreeFlags&65011712,l|=d.flags&65011712,d.return=t,d=d.sibling;else for(d=t.child;d!==null;)a|=d.lanes|d.childLanes,l|=d.subtreeFlags,l|=d.flags,d.return=t,d=d.sibling;return t.subtreeFlags|=l,t.childLanes=a,s}function nx(t,s,a){var l=s.pendingProps;switch(Dh(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jt(s),null;case 1:return jt(s),null;case 3:return a=s.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),$s(an),qn(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(xl(s)?nr(s):t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,kg())),jt(s),null;case 26:return a=s.memoizedState,t===null?(nr(s),a!==null?(jt(s),J0(s,a)):(jt(s),s.flags&=-16777217)):a?a!==t.memoizedState?(nr(s),jt(s),J0(s,a)):(jt(s),s.flags&=-16777217):(t.memoizedProps!==l&&nr(s),jt(s),s.flags&=-16777217),null;case 27:un(s),a=ke.current;var d=s.type;if(t!==null&&s.stateNode!=null)t.memoizedProps!==l&&nr(s);else{if(!l){if(s.stateNode===null)throw Error(r(166));return jt(s),null}t=we.current,xl(s)?Ig(s):(t=Jy(d,l,a),s.stateNode=t,nr(s))}return jt(s),null;case 5:if(un(s),a=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==l&&nr(s);else{if(!l){if(s.stateNode===null)throw Error(r(166));return jt(s),null}if(t=we.current,xl(s))Ig(s);else{switch(d=Ku(ke.current),t){case 1:t=d.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=d.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=d.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=d.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=d.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?d.createElement("select",{is:l.is}):d.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?d.createElement(a,{is:l.is}):d.createElement(a)}}t[Ft]=s,t[kt]=l;e:for(d=s.child;d!==null;){if(d.tag===5||d.tag===6)t.appendChild(d.stateNode);else if(d.tag!==4&&d.tag!==27&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===s)break e;for(;d.sibling===null;){if(d.return===null||d.return===s)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}s.stateNode=t;e:switch(An(t,a,l),a){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&nr(s)}}return jt(s),s.flags&=-16777217,null;case 6:if(t&&s.stateNode!=null)t.memoizedProps!==l&&nr(s);else{if(typeof l!="string"&&s.stateNode===null)throw Error(r(166));if(t=ke.current,xl(s)){if(t=s.stateNode,a=s.memoizedProps,l=null,d=Fn,d!==null)switch(d.tag){case 27:case 5:l=d.memoizedProps}t[Ft]=s,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Xy(t.nodeValue,a)),t||Na(s)}else t=Ku(t).createTextNode(l),t[Ft]=s,s.stateNode=t}return jt(s),null;case 13:if(l=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(d=xl(s),l!==null&&l.dehydrated!==null){if(t===null){if(!d)throw Error(r(318));if(d=s.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(317));d[Ft]=s}else El(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;jt(s),d=!1}else d=kg(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=d),d=!0;if(!d)return s.flags&256?(er(s),s):(er(s),null)}if(er(s),(s.flags&128)!==0)return s.lanes=a,s;if(a=l!==null,t=t!==null&&t.memoizedState!==null,a){l=s.child,d=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(d=l.alternate.memoizedState.cachePool.pool);var m=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==d&&(l.flags|=2048)}return a!==t&&a&&(s.child.flags|=8192),Lu(s,s.updateQueue),jt(s),null;case 4:return qn(),t===null&&Gf(s.stateNode.containerInfo),jt(s),null;case 10:return $s(s.type),jt(s),null;case 19:if(ge(on),d=s.memoizedState,d===null)return jt(s),null;if(l=(s.flags&128)!==0,m=d.rendering,m===null)if(l)Ul(d,!1);else{if(zt!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(m=ku(t),m!==null){for(s.flags|=128,Ul(d,!1),t=m.updateQueue,s.updateQueue=t,Lu(s,t),s.subtreeFlags=0,t=a,a=s.child;a!==null;)Rg(a,t),a=a.sibling;return ce(on,on.current&1|2),s.child}t=t.sibling}d.tail!==null&&$e()>Uu&&(s.flags|=128,l=!0,Ul(d,!1),s.lanes=4194304)}else{if(!l)if(t=ku(m),t!==null){if(s.flags|=128,l=!0,t=t.updateQueue,s.updateQueue=t,Lu(s,t),Ul(d,!0),d.tail===null&&d.tailMode==="hidden"&&!m.alternate&&!ut)return jt(s),null}else 2*$e()-d.renderingStartTime>Uu&&a!==536870912&&(s.flags|=128,l=!0,Ul(d,!1),s.lanes=4194304);d.isBackwards?(m.sibling=s.child,s.child=m):(t=d.last,t!==null?t.sibling=m:s.child=m,d.last=m)}return d.tail!==null?(s=d.tail,d.rendering=s,d.tail=s.sibling,d.renderingStartTime=$e(),s.sibling=null,t=on.current,ce(on,l?t&1|2:t&1),s):(jt(s),null);case 22:case 23:return er(s),Xh(),l=s.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(s.flags|=8192):l&&(s.flags|=8192),l?(a&536870912)!==0&&(s.flags&128)===0&&(jt(s),s.subtreeFlags&6&&(s.flags|=8192)):jt(s),a=s.updateQueue,a!==null&&Lu(s,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),l!==a&&(s.flags|=2048),t!==null&&ge(ja),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),$s(an),jt(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function ix(t,s){switch(Dh(s),s.tag){case 1:return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return $s(an),qn(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 26:case 27:case 5:return un(s),null;case 13:if(er(s),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(r(340));El()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return ge(on),null;case 4:return qn(),null;case 10:return $s(s.type),null;case 22:case 23:return er(s),Xh(),t!==null&&ge(ja),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 24:return $s(an),null;case 25:return null;default:return null}}function ey(t,s){switch(Dh(s),s.tag){case 3:$s(an),qn();break;case 26:case 27:case 5:un(s);break;case 4:qn();break;case 13:er(s);break;case 19:ge(on);break;case 10:$s(s.type);break;case 22:case 23:er(s),Xh(),t!==null&&ge(ja);break;case 24:$s(an)}}function Bl(t,s){try{var a=s.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var d=l.next;a=d;do{if((a.tag&t)===t){l=void 0;var m=a.create,b=a.inst;l=m(),b.destroy=l}a=a.next}while(a!==d)}}catch(S){Et(s,s.return,S)}}function kr(t,s,a){try{var l=s.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var m=d.next;l=m;do{if((l.tag&t)===t){var b=l.inst,S=b.destroy;if(S!==void 0){b.destroy=void 0,d=s;var O=a,K=S;try{K()}catch(ae){Et(d,O,ae)}}}l=l.next}while(l!==m)}}catch(ae){Et(s,s.return,ae)}}function ty(t){var s=t.updateQueue;if(s!==null){var a=t.stateNode;try{Fg(s,a)}catch(l){Et(t,t.return,l)}}}function ny(t,s,a){a.props=Ma(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){Et(t,s,l)}}function zl(t,s){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(d){Et(t,s,d)}}function vs(t,s){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(d){Et(t,s,d)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(d){Et(t,s,d)}else a.current=null}function iy(t){var s=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(d){Et(t,t.return,d)}}function wf(t,s,a){try{var l=t.stateNode;Sx(l,t.type,a,s),l[kt]=s}catch(d){Et(t,t.return,d)}}function sy(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Ur(t.type)||t.tag===4}function xf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||sy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Ur(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ef(t,s,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(t),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Zu));else if(l!==4&&(l===27&&Ur(t.type)&&(a=t.stateNode,s=null),t=t.child,t!==null))for(Ef(t,s,a),t=t.sibling;t!==null;)Ef(t,s,a),t=t.sibling}function Vu(t,s,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,s?a.insertBefore(t,s):a.appendChild(t);else if(l!==4&&(l===27&&Ur(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Vu(t,s,a),t=t.sibling;t!==null;)Vu(t,s,a),t=t.sibling}function ry(t){var s=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,d=s.attributes;d.length;)s.removeAttributeNode(d[0]);An(s,l,a),s[Ft]=t,s[kt]=a}catch(m){Et(t,t.return,m)}}var ir=!1,Gt=!1,Sf=!1,ay=typeof WeakSet=="function"?WeakSet:Set,gn=null;function sx(t,s){if(t=t.containerInfo,Zf=td,t=yg(t),wh(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var d=l.anchorOffset,m=l.focusNode;l=l.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var b=0,S=-1,O=-1,K=0,ae=0,ue=t,Q=null;t:for(;;){for(var J;ue!==a||d!==0&&ue.nodeType!==3||(S=b+d),ue!==m||l!==0&&ue.nodeType!==3||(O=b+l),ue.nodeType===3&&(b+=ue.nodeValue.length),(J=ue.firstChild)!==null;)Q=ue,ue=J;for(;;){if(ue===t)break t;if(Q===a&&++K===d&&(S=b),Q===m&&++ae===l&&(O=b),(J=ue.nextSibling)!==null)break;ue=Q,Q=ue.parentNode}ue=J}a=S===-1||O===-1?null:{start:S,end:O}}else a=null}a=a||{start:0,end:0}}else a=null;for(Kf={focusedElem:t,selectionRange:a},td=!1,gn=s;gn!==null;)if(s=gn,t=s.child,(s.subtreeFlags&1024)!==0&&t!==null)t.return=s,gn=t;else for(;gn!==null;){switch(s=gn,m=s.alternate,t=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,a=s,d=m.memoizedProps,m=m.memoizedState,l=a.stateNode;try{var Pe=Ma(a.type,d,a.elementType===a.type);t=l.getSnapshotBeforeUpdate(Pe,m),l.__reactInternalSnapshotBeforeUpdate=t}catch(je){Et(a,a.return,je)}}break;case 3:if((t&1024)!==0){if(t=s.stateNode.containerInfo,a=t.nodeType,a===9)$f(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":$f(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(r(163))}if(t=s.sibling,t!==null){t.return=s.return,gn=t;break}gn=s.return}}function oy(t,s,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Dr(t,a),l&4&&Bl(5,a);break;case 1:if(Dr(t,a),l&4)if(t=a.stateNode,s===null)try{t.componentDidMount()}catch(b){Et(a,a.return,b)}else{var d=Ma(a.type,s.memoizedProps);s=s.memoizedState;try{t.componentDidUpdate(d,s,t.__reactInternalSnapshotBeforeUpdate)}catch(b){Et(a,a.return,b)}}l&64&&ty(a),l&512&&zl(a,a.return);break;case 3:if(Dr(t,a),l&64&&(t=a.updateQueue,t!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{Fg(t,s)}catch(b){Et(a,a.return,b)}}break;case 27:s===null&&l&4&&ry(a);case 26:case 5:Dr(t,a),s===null&&l&4&&iy(a),l&512&&zl(a,a.return);break;case 12:Dr(t,a);break;case 13:Dr(t,a),l&4&&uy(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=fx.bind(null,a),kx(t,a))));break;case 22:if(l=a.memoizedState!==null||ir,!l){s=s!==null&&s.memoizedState!==null||Gt,d=ir;var m=Gt;ir=l,(Gt=s)&&!m?jr(t,a,(a.subtreeFlags&8772)!==0):Dr(t,a),ir=d,Gt=m}break;case 30:break;default:Dr(t,a)}}function ly(t){var s=t.alternate;s!==null&&(t.alternate=null,ly(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&zi(s)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Nt=null,ti=!1;function sr(t,s,a){for(a=a.child;a!==null;)cy(t,s,a),a=a.sibling}function cy(t,s,a){if(rt&&typeof rt.onCommitFiberUnmount=="function")try{rt.onCommitFiberUnmount(Ct,a)}catch{}switch(a.tag){case 26:Gt||vs(a,s),sr(t,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Gt||vs(a,s);var l=Nt,d=ti;Ur(a.type)&&(Nt=a.stateNode,ti=!1),sr(t,s,a),Yl(a.stateNode),Nt=l,ti=d;break;case 5:Gt||vs(a,s);case 6:if(l=Nt,d=ti,Nt=null,sr(t,s,a),Nt=l,ti=d,Nt!==null)if(ti)try{(Nt.nodeType===9?Nt.body:Nt.nodeName==="HTML"?Nt.ownerDocument.body:Nt).removeChild(a.stateNode)}catch(m){Et(a,s,m)}else try{Nt.removeChild(a.stateNode)}catch(m){Et(a,s,m)}break;case 18:Nt!==null&&(ti?(t=Nt,Qy(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),sc(t)):Qy(Nt,a.stateNode));break;case 4:l=Nt,d=ti,Nt=a.stateNode.containerInfo,ti=!0,sr(t,s,a),Nt=l,ti=d;break;case 0:case 11:case 14:case 15:Gt||kr(2,a,s),Gt||kr(4,a,s),sr(t,s,a);break;case 1:Gt||(vs(a,s),l=a.stateNode,typeof l.componentWillUnmount=="function"&&ny(a,s,l)),sr(t,s,a);break;case 21:sr(t,s,a);break;case 22:Gt=(l=Gt)||a.memoizedState!==null,sr(t,s,a),Gt=l;break;default:sr(t,s,a)}}function uy(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{sc(t)}catch(a){Et(s,s.return,a)}}function rx(t){switch(t.tag){case 13:case 19:var s=t.stateNode;return s===null&&(s=t.stateNode=new ay),s;case 22:return t=t.stateNode,s=t._retryCache,s===null&&(s=t._retryCache=new ay),s;default:throw Error(r(435,t.tag))}}function Af(t,s){var a=rx(t);s.forEach(function(l){var d=mx.bind(null,t,l);a.has(l)||(a.add(l),l.then(d,d))})}function gi(t,s){var a=s.deletions;if(a!==null)for(var l=0;l<a.length;l++){var d=a[l],m=t,b=s,S=b;e:for(;S!==null;){switch(S.tag){case 27:if(Ur(S.type)){Nt=S.stateNode,ti=!1;break e}break;case 5:Nt=S.stateNode,ti=!1;break e;case 3:case 4:Nt=S.stateNode.containerInfo,ti=!0;break e}S=S.return}if(Nt===null)throw Error(r(160));cy(m,b,d),Nt=null,ti=!1,m=d.alternate,m!==null&&(m.return=null),d.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)dy(s,t),s=s.sibling}var Ki=null;function dy(t,s){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:gi(s,t),yi(t),l&4&&(kr(3,t,t.return),Bl(3,t),kr(5,t,t.return));break;case 1:gi(s,t),yi(t),l&512&&(Gt||a===null||vs(a,a.return)),l&64&&ir&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var d=Ki;if(gi(s,t),yi(t),l&512&&(Gt||a===null||vs(a,a.return)),l&4){var m=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,d=d.ownerDocument||d;t:switch(l){case"title":m=d.getElementsByTagName("title")[0],(!m||m[Us]||m[Ft]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=d.createElement(l),d.head.insertBefore(m,d.querySelector("head > title"))),An(m,l,a),m[Ft]=t,Dt(m),l=m;break e;case"link":var b=rv("link","href",d).get(l+(a.href||""));if(b){for(var S=0;S<b.length;S++)if(m=b[S],m.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){b.splice(S,1);break t}}m=d.createElement(l),An(m,l,a),d.head.appendChild(m);break;case"meta":if(b=rv("meta","content",d).get(l+(a.content||""))){for(S=0;S<b.length;S++)if(m=b[S],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){b.splice(S,1);break t}}m=d.createElement(l),An(m,l,a),d.head.appendChild(m);break;default:throw Error(r(468,l))}m[Ft]=t,Dt(m),l=m}t.stateNode=l}else av(d,t.type,t.stateNode);else t.stateNode=sv(d,l,t.memoizedProps);else m!==l?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,l===null?av(d,t.type,t.stateNode):sv(d,l,t.memoizedProps)):l===null&&t.stateNode!==null&&wf(t,t.memoizedProps,a.memoizedProps)}break;case 27:gi(s,t),yi(t),l&512&&(Gt||a===null||vs(a,a.return)),a!==null&&l&4&&wf(t,t.memoizedProps,a.memoizedProps);break;case 5:if(gi(s,t),yi(t),l&512&&(Gt||a===null||vs(a,a.return)),t.flags&32){d=t.stateNode;try{wn(d,"")}catch(J){Et(t,t.return,J)}}l&4&&t.stateNode!=null&&(d=t.memoizedProps,wf(t,d,a!==null?a.memoizedProps:d)),l&1024&&(Sf=!0);break;case 6:if(gi(s,t),yi(t),l&4){if(t.stateNode===null)throw Error(r(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(J){Et(t,t.return,J)}}break;case 3:if($u=null,d=Ki,Ki=Yu(s.containerInfo),gi(s,t),Ki=d,yi(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{sc(s.containerInfo)}catch(J){Et(t,t.return,J)}Sf&&(Sf=!1,hy(t));break;case 4:l=Ki,Ki=Yu(t.stateNode.containerInfo),gi(s,t),yi(t),Ki=l;break;case 12:gi(s,t),yi(t);break;case 13:gi(s,t),yi(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(kf=$e()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Af(t,l)));break;case 22:d=t.memoizedState!==null;var O=a!==null&&a.memoizedState!==null,K=ir,ae=Gt;if(ir=K||d,Gt=ae||O,gi(s,t),Gt=ae,ir=K,yi(t),l&8192)e:for(s=t.stateNode,s._visibility=d?s._visibility&-2:s._visibility|1,d&&(a===null||O||ir||Gt||La(t)),a=null,s=t;;){if(s.tag===5||s.tag===26){if(a===null){O=a=s;try{if(m=O.stateNode,d)b=m.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{S=O.stateNode;var ue=O.memoizedProps.style,Q=ue!=null&&ue.hasOwnProperty("display")?ue.display:null;S.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(J){Et(O,O.return,J)}}}else if(s.tag===6){if(a===null){O=s;try{O.stateNode.nodeValue=d?"":O.memoizedProps}catch(J){Et(O,O.return,J)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===t)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Af(t,a))));break;case 19:gi(s,t),yi(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Af(t,l)));break;case 30:break;case 21:break;default:gi(s,t),yi(t)}}function yi(t){var s=t.flags;if(s&2){try{for(var a,l=t.return;l!==null;){if(sy(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var d=a.stateNode,m=xf(t);Vu(t,m,d);break;case 5:var b=a.stateNode;a.flags&32&&(wn(b,""),a.flags&=-33);var S=xf(t);Vu(t,S,b);break;case 3:case 4:var O=a.stateNode.containerInfo,K=xf(t);Ef(t,K,O);break;default:throw Error(r(161))}}catch(ae){Et(t,t.return,ae)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function hy(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var s=t;hy(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),t=t.sibling}}function Dr(t,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)oy(t,s.alternate,s),s=s.sibling}function La(t){for(t=t.child;t!==null;){var s=t;switch(s.tag){case 0:case 11:case 14:case 15:kr(4,s,s.return),La(s);break;case 1:vs(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&ny(s,s.return,a),La(s);break;case 27:Yl(s.stateNode);case 26:case 5:vs(s,s.return),La(s);break;case 22:s.memoizedState===null&&La(s);break;case 30:La(s);break;default:La(s)}t=t.sibling}}function jr(t,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var l=s.alternate,d=t,m=s,b=m.flags;switch(m.tag){case 0:case 11:case 15:jr(d,m,a),Bl(4,m);break;case 1:if(jr(d,m,a),l=m,d=l.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(K){Et(l,l.return,K)}if(l=m,d=l.updateQueue,d!==null){var S=l.stateNode;try{var O=d.shared.hiddenCallbacks;if(O!==null)for(d.shared.hiddenCallbacks=null,d=0;d<O.length;d++)zg(O[d],S)}catch(K){Et(l,l.return,K)}}a&&b&64&&ty(m),zl(m,m.return);break;case 27:ry(m);case 26:case 5:jr(d,m,a),a&&l===null&&b&4&&iy(m),zl(m,m.return);break;case 12:jr(d,m,a);break;case 13:jr(d,m,a),a&&b&4&&uy(d,m);break;case 22:m.memoizedState===null&&jr(d,m,a),zl(m,m.return);break;case 30:break;default:jr(d,m,a)}s=s.sibling}}function Tf(t,s){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(t=s.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&Tl(a))}function Rf(t,s){t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&Tl(t))}function _s(t,s,a,l){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)fy(t,s,a,l),s=s.sibling}function fy(t,s,a,l){var d=s.flags;switch(s.tag){case 0:case 11:case 15:_s(t,s,a,l),d&2048&&Bl(9,s);break;case 1:_s(t,s,a,l);break;case 3:_s(t,s,a,l),d&2048&&(t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&Tl(t)));break;case 12:if(d&2048){_s(t,s,a,l),t=s.stateNode;try{var m=s.memoizedProps,b=m.id,S=m.onPostCommit;typeof S=="function"&&S(b,s.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(O){Et(s,s.return,O)}}else _s(t,s,a,l);break;case 13:_s(t,s,a,l);break;case 23:break;case 22:m=s.stateNode,b=s.alternate,s.memoizedState!==null?m._visibility&2?_s(t,s,a,l):Fl(t,s):m._visibility&2?_s(t,s,a,l):(m._visibility|=2,Do(t,s,a,l,(s.subtreeFlags&10256)!==0)),d&2048&&Tf(b,s);break;case 24:_s(t,s,a,l),d&2048&&Rf(s.alternate,s);break;default:_s(t,s,a,l)}}function Do(t,s,a,l,d){for(d=d&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var m=t,b=s,S=a,O=l,K=b.flags;switch(b.tag){case 0:case 11:case 15:Do(m,b,S,O,d),Bl(8,b);break;case 23:break;case 22:var ae=b.stateNode;b.memoizedState!==null?ae._visibility&2?Do(m,b,S,O,d):Fl(m,b):(ae._visibility|=2,Do(m,b,S,O,d)),d&&K&2048&&Tf(b.alternate,b);break;case 24:Do(m,b,S,O,d),d&&K&2048&&Rf(b.alternate,b);break;default:Do(m,b,S,O,d)}s=s.sibling}}function Fl(t,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=t,l=s,d=l.flags;switch(l.tag){case 22:Fl(a,l),d&2048&&Tf(l.alternate,l);break;case 24:Fl(a,l),d&2048&&Rf(l.alternate,l);break;default:Fl(a,l)}s=s.sibling}}var Hl=8192;function jo(t){if(t.subtreeFlags&Hl)for(t=t.child;t!==null;)my(t),t=t.sibling}function my(t){switch(t.tag){case 26:jo(t),t.flags&Hl&&t.memoizedState!==null&&qx(Ki,t.memoizedState,t.memoizedProps);break;case 5:jo(t);break;case 3:case 4:var s=Ki;Ki=Yu(t.stateNode.containerInfo),jo(t),Ki=s;break;case 22:t.memoizedState===null&&(s=t.alternate,s!==null&&s.memoizedState!==null?(s=Hl,Hl=16777216,jo(t),Hl=s):jo(t));break;default:jo(t)}}function py(t){var s=t.alternate;if(s!==null&&(t=s.child,t!==null)){s.child=null;do s=t.sibling,t.sibling=null,t=s;while(t!==null)}}function ql(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];gn=l,yy(l,t)}py(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)gy(t),t=t.sibling}function gy(t){switch(t.tag){case 0:case 11:case 15:ql(t),t.flags&2048&&kr(9,t,t.return);break;case 3:ql(t);break;case 12:ql(t);break;case 22:var s=t.stateNode;t.memoizedState!==null&&s._visibility&2&&(t.return===null||t.return.tag!==13)?(s._visibility&=-3,Pu(t)):ql(t);break;default:ql(t)}}function Pu(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];gn=l,yy(l,t)}py(t)}for(t=t.child;t!==null;){switch(s=t,s.tag){case 0:case 11:case 15:kr(8,s,s.return),Pu(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,Pu(s));break;default:Pu(s)}t=t.sibling}}function yy(t,s){for(;gn!==null;){var a=gn;switch(a.tag){case 0:case 11:case 15:kr(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Tl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,gn=l;else e:for(a=t;gn!==null;){l=gn;var d=l.sibling,m=l.return;if(ly(l),l===a){gn=null;break e}if(d!==null){d.return=m,gn=d;break e}gn=m}}}var ax={getCacheForType:function(t){var s=kn(an),a=s.data.get(t);return a===void 0&&(a=t(),s.data.set(t,a)),a}},ox=typeof WeakMap=="function"?WeakMap:Map,pt=0,Tt=null,Ke=null,it=0,gt=0,vi=null,Or=!1,Oo=!1,Cf=!1,rr=0,zt=0,Mr=0,Va=0,If=0,ki=0,Mo=0,Gl=null,ni=null,Nf=!1,kf=0,Uu=1/0,Bu=null,Lr=null,Sn=0,Vr=null,Lo=null,Vo=0,Df=0,jf=null,vy=null,Xl=0,Of=null;function _i(){if((pt&2)!==0&&it!==0)return it&-it;if(ie.T!==null){var t=So;return t!==0?t:zf()}return os()}function _y(){ki===0&&(ki=(it&536870912)===0||ut?fa():536870912);var t=Ni.current;return t!==null&&(t.flags|=32),ki}function bi(t,s,a){(t===Tt&&(gt===2||gt===9)||t.cancelPendingCommit!==null)&&(Po(t,0),Pr(t,it,ki,!1)),Ui(t,a),((pt&2)===0||t!==Tt)&&(t===Tt&&((pt&2)===0&&(Va|=a),zt===4&&Pr(t,it,ki,!1)),bs(t))}function by(t,s,a){if((pt&6)!==0)throw Error(r(327));var l=!a&&(s&124)===0&&(s&t.expiredLanes)===0||rs(t,s),d=l?ux(t,s):Vf(t,s,!0),m=l;do{if(d===0){Oo&&!l&&Pr(t,s,0,!1);break}else{if(a=t.current.alternate,m&&!lx(a)){d=Vf(t,s,!1),m=!1;continue}if(d===2){if(m=s,t.errorRecoveryDisabledLanes&m)var b=0;else b=t.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){s=b;e:{var S=t;d=Gl;var O=S.current.memoizedState.isDehydrated;if(O&&(Po(S,b).flags|=256),b=Vf(S,b,!1),b!==2){if(Cf&&!O){S.errorRecoveryDisabledLanes|=m,Va|=m,d=4;break e}m=ni,ni=d,m!==null&&(ni===null?ni=m:ni.push.apply(ni,m))}d=b}if(m=!1,d!==2)continue}}if(d===1){Po(t,0),Pr(t,s,0,!0);break}e:{switch(l=t,m=d,m){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:Pr(l,s,ki,!Or);break e;case 2:ni=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(d=kf+300-$e(),10<d)){if(Pr(l,s,ki,!Or),mt(l,0,!0)!==0)break e;l.timeoutHandle=Ky(wy.bind(null,l,a,ni,Bu,Nf,s,ki,Va,Mo,Or,m,2,-0,0),d);break e}wy(l,a,ni,Bu,Nf,s,ki,Va,Mo,Or,m,0,-0,0)}}break}while(!0);bs(t)}function wy(t,s,a,l,d,m,b,S,O,K,ae,ue,Q,J){if(t.timeoutHandle=-1,ue=s.subtreeFlags,(ue&8192||(ue&16785408)===16785408)&&(Jl={stylesheets:null,count:0,unsuspend:Hx},my(s),ue=Gx(),ue!==null)){t.cancelPendingCommit=ue(Cy.bind(null,t,s,m,a,l,d,b,S,O,ae,1,Q,J)),Pr(t,m,b,!K);return}Cy(t,s,m,a,l,d,b,S,O)}function lx(t){for(var s=t;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var d=a[l],m=d.getSnapshot;d=d.value;try{if(!mi(m(),d))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Pr(t,s,a,l){s&=~If,s&=~Va,t.suspendedLanes|=s,t.pingedLanes&=~s,l&&(t.warmLanes|=s),l=t.expirationTimes;for(var d=s;0<d;){var m=31-dn(d),b=1<<m;l[m]=-1,d&=~b}a!==0&&ui(t,a,s)}function zu(){return(pt&6)===0?(Wl(0),!1):!0}function Mf(){if(Ke!==null){if(gt===0)var t=Ke.return;else t=Ke,Qs=ka=null,Qh(t),No=null,Vl=0,t=Ke;for(;t!==null;)ey(t.alternate,t),t=t.return;Ke=null}}function Po(t,s){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,Tx(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Mf(),Tt=t,Ke=a=Zs(t.current,null),it=s,gt=0,vi=null,Or=!1,Oo=rs(t,s),Cf=!1,Mo=ki=If=Va=Mr=zt=0,ni=Gl=null,Nf=!1,(s&8)!==0&&(s|=s&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=s;0<l;){var d=31-dn(l),m=1<<d;s|=t[d],l&=~m}return rr=s,cu(),a}function xy(t,s){Xe=null,ie.H=Cu,s===Cl||s===vu?(s=Ug(),gt=3):s===Lg?(s=Ug(),gt=4):gt=s===B0?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,vi=s,Ke===null&&(zt=1,ju(t,Ti(s,t.current)))}function Ey(){var t=ie.H;return ie.H=Cu,t===null?Cu:t}function Sy(){var t=ie.A;return ie.A=ax,t}function Lf(){zt=4,Or||(it&4194048)!==it&&Ni.current!==null||(Oo=!0),(Mr&134217727)===0&&(Va&134217727)===0||Tt===null||Pr(Tt,it,ki,!1)}function Vf(t,s,a){var l=pt;pt|=2;var d=Ey(),m=Sy();(Tt!==t||it!==s)&&(Bu=null,Po(t,s)),s=!1;var b=zt;e:do try{if(gt!==0&&Ke!==null){var S=Ke,O=vi;switch(gt){case 8:Mf(),b=6;break e;case 3:case 2:case 9:case 6:Ni.current===null&&(s=!0);var K=gt;if(gt=0,vi=null,Uo(t,S,O,K),a&&Oo){b=0;break e}break;default:K=gt,gt=0,vi=null,Uo(t,S,O,K)}}cx(),b=zt;break}catch(ae){xy(t,ae)}while(!0);return s&&t.shellSuspendCounter++,Qs=ka=null,pt=l,ie.H=d,ie.A=m,Ke===null&&(Tt=null,it=0,cu()),b}function cx(){for(;Ke!==null;)Ay(Ke)}function ux(t,s){var a=pt;pt|=2;var l=Ey(),d=Sy();Tt!==t||it!==s?(Bu=null,Uu=$e()+500,Po(t,s)):Oo=rs(t,s);e:do try{if(gt!==0&&Ke!==null){s=Ke;var m=vi;t:switch(gt){case 1:gt=0,vi=null,Uo(t,s,m,1);break;case 2:case 9:if(Vg(m)){gt=0,vi=null,Ty(s);break}s=function(){gt!==2&&gt!==9||Tt!==t||(gt=7),bs(t)},m.then(s,s);break e;case 3:gt=7;break e;case 4:gt=5;break e;case 7:Vg(m)?(gt=0,vi=null,Ty(s)):(gt=0,vi=null,Uo(t,s,m,7));break;case 5:var b=null;switch(Ke.tag){case 26:b=Ke.memoizedState;case 5:case 27:var S=Ke;if(!b||ov(b)){gt=0,vi=null;var O=S.sibling;if(O!==null)Ke=O;else{var K=S.return;K!==null?(Ke=K,Fu(K)):Ke=null}break t}}gt=0,vi=null,Uo(t,s,m,5);break;case 6:gt=0,vi=null,Uo(t,s,m,6);break;case 8:Mf(),zt=6;break e;default:throw Error(r(462))}}dx();break}catch(ae){xy(t,ae)}while(!0);return Qs=ka=null,ie.H=l,ie.A=d,pt=a,Ke!==null?0:(Tt=null,it=0,cu(),zt)}function dx(){for(;Ke!==null&&!qe();)Ay(Ke)}function Ay(t){var s=$0(t.alternate,t,rr);t.memoizedProps=t.pendingProps,s===null?Fu(t):Ke=s}function Ty(t){var s=t,a=s.alternate;switch(s.tag){case 15:case 0:s=X0(a,s,s.pendingProps,s.type,void 0,it);break;case 11:s=X0(a,s,s.pendingProps,s.type.render,s.ref,it);break;case 5:Qh(s);default:ey(a,s),s=Ke=Rg(s,rr),s=$0(a,s,rr)}t.memoizedProps=t.pendingProps,s===null?Fu(t):Ke=s}function Uo(t,s,a,l){Qs=ka=null,Qh(s),No=null,Vl=0;var d=s.return;try{if(ex(t,d,s,a,it)){zt=1,ju(t,Ti(a,t.current)),Ke=null;return}}catch(m){if(d!==null)throw Ke=d,m;zt=1,ju(t,Ti(a,t.current)),Ke=null;return}s.flags&32768?(ut||l===1?t=!0:Oo||(it&536870912)!==0?t=!1:(Or=t=!0,(l===2||l===9||l===3||l===6)&&(l=Ni.current,l!==null&&l.tag===13&&(l.flags|=16384))),Ry(s,t)):Fu(s)}function Fu(t){var s=t;do{if((s.flags&32768)!==0){Ry(s,Or);return}t=s.return;var a=nx(s.alternate,s,rr);if(a!==null){Ke=a;return}if(s=s.sibling,s!==null){Ke=s;return}Ke=s=t}while(s!==null);zt===0&&(zt=5)}function Ry(t,s){do{var a=ix(t.alternate,t);if(a!==null){a.flags&=32767,Ke=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(t=t.sibling,t!==null)){Ke=t;return}Ke=t=a}while(t!==null);zt=6,Ke=null}function Cy(t,s,a,l,d,m,b,S,O){t.cancelPendingCommit=null;do Hu();while(Sn!==0);if((pt&6)!==0)throw Error(r(327));if(s!==null){if(s===t.current)throw Error(r(177));if(m=s.lanes|s.childLanes,m|=Th,as(t,a,m,b,S,O),t===Tt&&(Ke=Tt=null,it=0),Lo=s,Vr=t,Vo=a,Df=m,jf=d,vy=l,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,px(Ms,function(){return jy(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||l){l=ie.T,ie.T=null,d=fe.p,fe.p=2,b=pt,pt|=4;try{sx(t,s,a)}finally{pt=b,fe.p=d,ie.T=l}}Sn=1,Iy(),Ny(),ky()}}function Iy(){if(Sn===1){Sn=0;var t=Vr,s=Lo,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=ie.T,ie.T=null;var l=fe.p;fe.p=2;var d=pt;pt|=4;try{dy(s,t);var m=Kf,b=yg(t.containerInfo),S=m.focusedElem,O=m.selectionRange;if(b!==S&&S&&S.ownerDocument&&gg(S.ownerDocument.documentElement,S)){if(O!==null&&wh(S)){var K=O.start,ae=O.end;if(ae===void 0&&(ae=K),"selectionStart"in S)S.selectionStart=K,S.selectionEnd=Math.min(ae,S.value.length);else{var ue=S.ownerDocument||document,Q=ue&&ue.defaultView||window;if(Q.getSelection){var J=Q.getSelection(),Pe=S.textContent.length,je=Math.min(O.start,Pe),bt=O.end===void 0?je:Math.min(O.end,Pe);!J.extend&&je>bt&&(b=bt,bt=je,je=b);var q=pg(S,je),U=pg(S,bt);if(q&&U&&(J.rangeCount!==1||J.anchorNode!==q.node||J.anchorOffset!==q.offset||J.focusNode!==U.node||J.focusOffset!==U.offset)){var W=ue.createRange();W.setStart(q.node,q.offset),J.removeAllRanges(),je>bt?(J.addRange(W),J.extend(U.node,U.offset)):(W.setEnd(U.node,U.offset),J.addRange(W))}}}}for(ue=[],J=S;J=J.parentNode;)J.nodeType===1&&ue.push({element:J,left:J.scrollLeft,top:J.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<ue.length;S++){var oe=ue[S];oe.element.scrollLeft=oe.left,oe.element.scrollTop=oe.top}}td=!!Zf,Kf=Zf=null}finally{pt=d,fe.p=l,ie.T=a}}t.current=s,Sn=2}}function Ny(){if(Sn===2){Sn=0;var t=Vr,s=Lo,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=ie.T,ie.T=null;var l=fe.p;fe.p=2;var d=pt;pt|=4;try{oy(t,s.alternate,s)}finally{pt=d,fe.p=l,ie.T=a}}Sn=3}}function ky(){if(Sn===4||Sn===3){Sn=0,In();var t=Vr,s=Lo,a=Vo,l=vy;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Sn=5:(Sn=0,Lo=Vr=null,Dy(t,t.pendingLanes));var d=t.pendingLanes;if(d===0&&(Lr=null),_r(a),s=s.stateNode,rt&&typeof rt.onCommitFiberRoot=="function")try{rt.onCommitFiberRoot(Ct,s,void 0,(s.current.flags&128)===128)}catch{}if(l!==null){s=ie.T,d=fe.p,fe.p=2,ie.T=null;try{for(var m=t.onRecoverableError,b=0;b<l.length;b++){var S=l[b];m(S.value,{componentStack:S.stack})}}finally{ie.T=s,fe.p=d}}(Vo&3)!==0&&Hu(),bs(t),d=t.pendingLanes,(a&4194090)!==0&&(d&42)!==0?t===Of?Xl++:(Xl=0,Of=t):Xl=0,Wl(0)}}function Dy(t,s){(t.pooledCacheLanes&=s)===0&&(s=t.pooledCache,s!=null&&(t.pooledCache=null,Tl(s)))}function Hu(t){return Iy(),Ny(),ky(),jy()}function jy(){if(Sn!==5)return!1;var t=Vr,s=Df;Df=0;var a=_r(Vo),l=ie.T,d=fe.p;try{fe.p=32>a?32:a,ie.T=null,a=jf,jf=null;var m=Vr,b=Vo;if(Sn=0,Lo=Vr=null,Vo=0,(pt&6)!==0)throw Error(r(331));var S=pt;if(pt|=4,gy(m.current),fy(m,m.current,b,a),pt=S,Wl(0,!1),rt&&typeof rt.onPostCommitFiberRoot=="function")try{rt.onPostCommitFiberRoot(Ct,m)}catch{}return!0}finally{fe.p=d,ie.T=l,Dy(t,s)}}function Oy(t,s,a){s=Ti(a,s),s=hf(t.stateNode,s,2),t=Rr(t,s,2),t!==null&&(Ui(t,2),bs(t))}function Et(t,s,a){if(t.tag===3)Oy(t,t,a);else for(;s!==null;){if(s.tag===3){Oy(s,t,a);break}else if(s.tag===1){var l=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Lr===null||!Lr.has(l))){t=Ti(a,t),a=P0(2),l=Rr(s,a,2),l!==null&&(U0(a,l,s,t),Ui(l,2),bs(l));break}}s=s.return}}function Pf(t,s,a){var l=t.pingCache;if(l===null){l=t.pingCache=new ox;var d=new Set;l.set(s,d)}else d=l.get(s),d===void 0&&(d=new Set,l.set(s,d));d.has(a)||(Cf=!0,d.add(a),t=hx.bind(null,t,s,a),s.then(t,t))}function hx(t,s,a){var l=t.pingCache;l!==null&&l.delete(s),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,Tt===t&&(it&a)===a&&(zt===4||zt===3&&(it&62914560)===it&&300>$e()-kf?(pt&2)===0&&Po(t,0):If|=a,Mo===it&&(Mo=0)),bs(t)}function My(t,s){s===0&&(s=ma()),t=bo(t,s),t!==null&&(Ui(t,s),bs(t))}function fx(t){var s=t.memoizedState,a=0;s!==null&&(a=s.retryLane),My(t,a)}function mx(t,s){var a=0;switch(t.tag){case 13:var l=t.stateNode,d=t.memoizedState;d!==null&&(a=d.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(s),My(t,a)}function px(t,s){return ve(t,s)}var qu=null,Bo=null,Uf=!1,Gu=!1,Bf=!1,Pa=0;function bs(t){t!==Bo&&t.next===null&&(Bo===null?qu=Bo=t:Bo=Bo.next=t),Gu=!0,Uf||(Uf=!0,yx())}function Wl(t,s){if(!Bf&&Gu){Bf=!0;do for(var a=!1,l=qu;l!==null;){if(t!==0){var d=l.pendingLanes;if(d===0)var m=0;else{var b=l.suspendedLanes,S=l.pingedLanes;m=(1<<31-dn(42|t)+1)-1,m&=d&~(b&~S),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(a=!0,Uy(l,m))}else m=it,m=mt(l,l===Tt?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(m&3)===0||rs(l,m)||(a=!0,Uy(l,m));l=l.next}while(a);Bf=!1}}function gx(){Ly()}function Ly(){Gu=Uf=!1;var t=0;Pa!==0&&(Ax()&&(t=Pa),Pa=0);for(var s=$e(),a=null,l=qu;l!==null;){var d=l.next,m=Vy(l,s);m===0?(l.next=null,a===null?qu=d:a.next=d,d===null&&(Bo=a)):(a=l,(t!==0||(m&3)!==0)&&(Gu=!0)),l=d}Wl(t)}function Vy(t,s){for(var a=t.suspendedLanes,l=t.pingedLanes,d=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var b=31-dn(m),S=1<<b,O=d[b];O===-1?((S&a)===0||(S&l)!==0)&&(d[b]=oo(S,s)):O<=s&&(t.expiredLanes|=S),m&=~S}if(s=Tt,a=it,a=mt(t,t===s?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===s&&(gt===2||gt===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&De(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||rs(t,a)){if(s=a&-a,s===t.callbackPriority)return s;switch(l!==null&&De(l),_r(a)){case 2:case 8:a=Pn;break;case 32:a=Ms;break;case 268435456:a=Pi;break;default:a=Ms}return l=Py.bind(null,t),a=ve(a,l),t.callbackPriority=s,t.callbackNode=a,s}return l!==null&&l!==null&&De(l),t.callbackPriority=2,t.callbackNode=null,2}function Py(t,s){if(Sn!==0&&Sn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Hu()&&t.callbackNode!==a)return null;var l=it;return l=mt(t,t===Tt?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(by(t,l,s),Vy(t,$e()),t.callbackNode!=null&&t.callbackNode===a?Py.bind(null,t):null)}function Uy(t,s){if(Hu())return null;by(t,s,!0)}function yx(){Rx(function(){(pt&6)!==0?ve(oi,gx):Ly()})}function zf(){return Pa===0&&(Pa=fa()),Pa}function By(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Wi(""+t)}function zy(t,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,t.id&&a.setAttribute("form",t.id),s.parentNode.insertBefore(a,s),t=new FormData(t),a.parentNode.removeChild(a),t}function vx(t,s,a,l,d){if(s==="submit"&&a&&a.stateNode===d){var m=By((d[kt]||null).action),b=l.submitter;b&&(s=(s=b[kt]||null)?By(s.formAction):b.getAttribute("formAction"),s!==null&&(m=s,b=null));var S=new At("action","action",null,l,d);t.push({event:S,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Pa!==0){var O=b?zy(d,b):new FormData(d);of(a,{pending:!0,data:O,method:d.method,action:m},null,O)}}else typeof m=="function"&&(S.preventDefault(),O=b?zy(d,b):new FormData(d),of(a,{pending:!0,data:O,method:d.method,action:m},m,O))},currentTarget:d}]})}}for(var Ff=0;Ff<Ah.length;Ff++){var Hf=Ah[Ff],_x=Hf.toLowerCase(),bx=Hf[0].toUpperCase()+Hf.slice(1);Zi(_x,"on"+bx)}Zi(bg,"onAnimationEnd"),Zi(wg,"onAnimationIteration"),Zi(xg,"onAnimationStart"),Zi("dblclick","onDoubleClick"),Zi("focusin","onFocus"),Zi("focusout","onBlur"),Zi(V2,"onTransitionRun"),Zi(P2,"onTransitionStart"),Zi(U2,"onTransitionCancel"),Zi(Eg,"onTransitionEnd"),Ei("onMouseEnter",["mouseout","mouseover"]),Ei("onMouseLeave",["mouseout","mouseover"]),Ei("onPointerEnter",["pointerout","pointerover"]),Ei("onPointerLeave",["pointerout","pointerover"]),Xn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Xn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Xn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Xn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Xn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Xn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wx=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Zl));function Fy(t,s){s=(s&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],d=l.event;l=l.listeners;e:{var m=void 0;if(s)for(var b=l.length-1;0<=b;b--){var S=l[b],O=S.instance,K=S.currentTarget;if(S=S.listener,O!==m&&d.isPropagationStopped())break e;m=S,d.currentTarget=K;try{m(d)}catch(ae){Du(ae)}d.currentTarget=null,m=O}else for(b=0;b<l.length;b++){if(S=l[b],O=S.instance,K=S.currentTarget,S=S.listener,O!==m&&d.isPropagationStopped())break e;m=S,d.currentTarget=K;try{m(d)}catch(ae){Du(ae)}d.currentTarget=null,m=O}}}}function Ye(t,s){var a=s[Ps];a===void 0&&(a=s[Ps]=new Set);var l=t+"__bubble";a.has(l)||(Hy(s,t,2,!1),a.add(l))}function qf(t,s,a){var l=0;s&&(l|=4),Hy(a,t,l,s)}var Xu="_reactListening"+Math.random().toString(36).slice(2);function Gf(t){if(!t[Xu]){t[Xu]=!0,ya.forEach(function(a){a!=="selectionchange"&&(wx.has(a)||qf(a,!1,t),qf(a,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[Xu]||(s[Xu]=!0,qf("selectionchange",!1,s))}}function Hy(t,s,a,l){switch(fv(s)){case 2:var d=Zx;break;case 8:d=Kx;break;default:d=rm}a=d.bind(null,s,a,t),d=void 0,!E||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(d=!0),l?d!==void 0?t.addEventListener(s,a,{capture:!0,passive:d}):t.addEventListener(s,a,!0):d!==void 0?t.addEventListener(s,a,{passive:d}):t.addEventListener(s,a,!1)}function Xf(t,s,a,l,d){var m=l;if((s&1)===0&&(s&2)===0&&l!==null)e:for(;;){if(l===null)return;var b=l.tag;if(b===3||b===4){var S=l.stateNode.containerInfo;if(S===d)break;if(b===4)for(b=l.return;b!==null;){var O=b.tag;if((O===3||O===4)&&b.stateNode.containerInfo===d)return;b=b.return}for(;S!==null;){if(b=Fi(S),b===null)return;if(O=b.tag,O===5||O===6||O===26||O===27){l=m=b;continue e}S=S.parentNode}}l=l.return}ba(function(){var K=m,ae=Kn(a),ue=[];e:{var Q=Sg.get(t);if(Q!==void 0){var J=At,Pe=t;switch(t){case"keypress":if(Ce(a)===0)break e;case"keydown":case"keyup":J=po;break;case"focusin":Pe="focus",J=qs;break;case"focusout":Pe="blur",J=qs;break;case"beforeblur":case"afterblur":J=qs;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":J=xt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":J=mo;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":J=nu;break;case bg:case wg:case xg:J=Ut;break;case Eg:J=su;break;case"scroll":case"scrollend":J=Kt;break;case"wheel":J=go;break;case"copy":case"cut":case"paste":J=Gs;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":J=vl;break;case"toggle":case"beforetoggle":J=au}var je=(s&4)!==0,bt=!je&&(t==="scroll"||t==="scrollend"),q=je?Q!==null?Q+"Capture":null:Q;je=[];for(var U=K,W;U!==null;){var oe=U;if(W=oe.stateNode,oe=oe.tag,oe!==5&&oe!==26&&oe!==27||W===null||q===null||(oe=hs(U,q),oe!=null&&je.push(Kl(U,oe,W))),bt)break;U=U.return}0<je.length&&(Q=new J(Q,Pe,null,a,ae),ue.push({event:Q,listeners:je}))}}if((s&7)===0){e:{if(Q=t==="mouseover"||t==="pointerover",J=t==="mouseout"||t==="pointerout",Q&&a!==Zt&&(Pe=a.relatedTarget||a.fromElement)&&(Fi(Pe)||Pe[en]))break e;if((J||Q)&&(Q=ae.window===ae?ae:(Q=ae.ownerDocument)?Q.defaultView||Q.parentWindow:window,J?(Pe=a.relatedTarget||a.toElement,J=K,Pe=Pe?Fi(Pe):null,Pe!==null&&(bt=c(Pe),je=Pe.tag,Pe!==bt||je!==5&&je!==27&&je!==6)&&(Pe=null)):(J=null,Pe=K),J!==Pe)){if(je=xt,oe="onMouseLeave",q="onMouseEnter",U="mouse",(t==="pointerout"||t==="pointerover")&&(je=vl,oe="onPointerLeave",q="onPointerEnter",U="pointer"),bt=J==null?Q:hi(J),W=Pe==null?Q:hi(Pe),Q=new je(oe,U+"leave",J,a,ae),Q.target=bt,Q.relatedTarget=W,oe=null,Fi(ae)===K&&(je=new je(q,U+"enter",Pe,a,ae),je.target=W,je.relatedTarget=bt,oe=je),bt=oe,J&&Pe)t:{for(je=J,q=Pe,U=0,W=je;W;W=zo(W))U++;for(W=0,oe=q;oe;oe=zo(oe))W++;for(;0<U-W;)je=zo(je),U--;for(;0<W-U;)q=zo(q),W--;for(;U--;){if(je===q||q!==null&&je===q.alternate)break t;je=zo(je),q=zo(q)}je=null}else je=null;J!==null&&qy(ue,Q,J,je,!1),Pe!==null&&bt!==null&&qy(ue,bt,Pe,je,!0)}}e:{if(Q=K?hi(K):window,J=Q.nodeName&&Q.nodeName.toLowerCase(),J==="select"||J==="input"&&Q.type==="file")var xe=cg;else if(rn(Q))if(ug)xe=O2;else{xe=D2;var Ze=k2}else J=Q.nodeName,!J||J.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?K&&Zn(K.elementType)&&(xe=cg):xe=j2;if(xe&&(xe=xe(t,K))){Ws(ue,xe,a,ae);break e}Ze&&Ze(t,Q,K),t==="focusout"&&K&&Q.type==="number"&&K.memoizedProps.value!=null&&zs(Q,"number",Q.value)}switch(Ze=K?hi(K):window,t){case"focusin":(rn(Ze)||Ze.contentEditable==="true")&&(yo=Ze,xh=K,wl=null);break;case"focusout":wl=xh=yo=null;break;case"mousedown":Eh=!0;break;case"contextmenu":case"mouseup":case"dragend":Eh=!1,vg(ue,a,ae);break;case"selectionchange":if(L2)break;case"keydown":case"keyup":vg(ue,a,ae)}var Ae;if(ms)e:{switch(t){case"compositionstart":var Me="onCompositionStart";break e;case"compositionend":Me="onCompositionEnd";break e;case"compositionupdate":Me="onCompositionUpdate";break e}Me=void 0}else tt?ee(t,a)&&(Me="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Me="onCompositionStart");Me&&(_&&a.locale!=="ko"&&(tt||Me!=="onCompositionStart"?Me==="onCompositionEnd"&&tt&&(Ae=Ee()):(F=ae,B="value"in F?F.value:F.textContent,tt=!0)),Ze=Wu(K,Me),0<Ze.length&&(Me=new gl(Me,t,null,a,ae),ue.push({event:Me,listeners:Ze}),Ae?Me.data=Ae:(Ae=ye(a),Ae!==null&&(Me.data=Ae)))),(Ae=v?sn(t,a):nt(t,a))&&(Me=Wu(K,"onBeforeInput"),0<Me.length&&(Ze=new gl("onBeforeInput","beforeinput",null,a,ae),ue.push({event:Ze,listeners:Me}),Ze.data=Ae)),vx(ue,t,K,a,ae)}Fy(ue,s)})}function Kl(t,s,a){return{instance:t,listener:s,currentTarget:a}}function Wu(t,s){for(var a=s+"Capture",l=[];t!==null;){var d=t,m=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||m===null||(d=hs(t,a),d!=null&&l.unshift(Kl(t,d,m)),d=hs(t,s),d!=null&&l.push(Kl(t,d,m))),t.tag===3)return l;t=t.return}return[]}function zo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function qy(t,s,a,l,d){for(var m=s._reactName,b=[];a!==null&&a!==l;){var S=a,O=S.alternate,K=S.stateNode;if(S=S.tag,O!==null&&O===l)break;S!==5&&S!==26&&S!==27||K===null||(O=K,d?(K=hs(a,m),K!=null&&b.unshift(Kl(a,K,O))):d||(K=hs(a,m),K!=null&&b.push(Kl(a,K,O)))),a=a.return}b.length!==0&&t.push({event:s,listeners:b})}var xx=/\r\n?/g,Ex=/\u0000|\uFFFD/g;function Gy(t){return(typeof t=="string"?t:""+t).replace(xx,`
`).replace(Ex,"")}function Xy(t,s){return s=Gy(s),Gy(t)===s}function Zu(){}function _t(t,s,a,l,d,m){switch(a){case"children":typeof l=="string"?s==="body"||s==="textarea"&&l===""||wn(t,l):(typeof l=="number"||typeof l=="bigint")&&s!=="body"&&wn(t,""+l);break;case"className":bn(t,"class",l);break;case"tabIndex":bn(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":bn(t,a,l);break;case"style":Er(t,l,m);break;case"data":if(s!=="object"){bn(t,"data",l);break}case"src":case"href":if(l===""&&(s!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Wi(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(s!=="input"&&_t(t,s,"name",d.name,d,null),_t(t,s,"formEncType",d.formEncType,d,null),_t(t,s,"formMethod",d.formMethod,d,null),_t(t,s,"formTarget",d.formTarget,d,null)):(_t(t,s,"encType",d.encType,d,null),_t(t,s,"method",d.method,d,null),_t(t,s,"target",d.target,d,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Wi(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=Zu);break;case"onScroll":l!=null&&Ye("scroll",t);break;case"onScrollEnd":l!=null&&Ye("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(d.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=Wi(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":Ye("beforetoggle",t),Ye("toggle",t),ls(t,"popover",l);break;case"xlinkActuate":tn(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":tn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":tn(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":tn(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":tn(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":tn(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":tn(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":tn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":tn(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":ls(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=fo.get(a)||a,ls(t,a,l))}}function Wf(t,s,a,l,d,m){switch(a){case"style":Er(t,l,m);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(d.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"children":typeof l=="string"?wn(t,l):(typeof l=="number"||typeof l=="bigint")&&wn(t,""+l);break;case"onScroll":l!=null&&Ye("scroll",t);break;case"onScrollEnd":l!=null&&Ye("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Zu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!br.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(d=a.endsWith("Capture"),s=a.slice(2,d?a.length-7:void 0),m=t[kt]||null,m=m!=null?m[a]:null,typeof m=="function"&&t.removeEventListener(s,m,d),typeof l=="function")){typeof m!="function"&&m!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(s,l,d);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):ls(t,a,l)}}}function An(t,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ye("error",t),Ye("load",t);var l=!1,d=!1,m;for(m in a)if(a.hasOwnProperty(m)){var b=a[m];if(b!=null)switch(m){case"src":l=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:_t(t,s,m,b,a,null)}}d&&_t(t,s,"srcSet",a.srcSet,a,null),l&&_t(t,s,"src",a.src,a,null);return;case"input":Ye("invalid",t);var S=m=b=d=null,O=null,K=null;for(l in a)if(a.hasOwnProperty(l)){var ae=a[l];if(ae!=null)switch(l){case"name":d=ae;break;case"type":b=ae;break;case"checked":O=ae;break;case"defaultChecked":K=ae;break;case"value":m=ae;break;case"defaultValue":S=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(r(137,s));break;default:_t(t,s,l,ae,a,null)}}Ai(t,m,S,O,K,b,d,!1),us(t);return;case"select":Ye("invalid",t),l=b=m=null;for(d in a)if(a.hasOwnProperty(d)&&(S=a[d],S!=null))switch(d){case"value":m=S;break;case"defaultValue":b=S;break;case"multiple":l=S;default:_t(t,s,d,S,a,null)}s=m,a=b,t.multiple=!!l,s!=null?Wn(t,!!l,s,!1):a!=null&&Wn(t,!!l,a,!0);return;case"textarea":Ye("invalid",t),m=d=l=null;for(b in a)if(a.hasOwnProperty(b)&&(S=a[b],S!=null))switch(b){case"value":l=S;break;case"defaultValue":d=S;break;case"children":m=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(r(91));break;default:_t(t,s,b,S,a,null)}Fs(t,l,d,m),us(t);return;case"option":for(O in a)if(a.hasOwnProperty(O)&&(l=a[O],l!=null))switch(O){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:_t(t,s,O,l,a,null)}return;case"dialog":Ye("beforetoggle",t),Ye("toggle",t),Ye("cancel",t),Ye("close",t);break;case"iframe":case"object":Ye("load",t);break;case"video":case"audio":for(l=0;l<Zl.length;l++)Ye(Zl[l],t);break;case"image":Ye("error",t),Ye("load",t);break;case"details":Ye("toggle",t);break;case"embed":case"source":case"link":Ye("error",t),Ye("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(K in a)if(a.hasOwnProperty(K)&&(l=a[K],l!=null))switch(K){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:_t(t,s,K,l,a,null)}return;default:if(Zn(s)){for(ae in a)a.hasOwnProperty(ae)&&(l=a[ae],l!==void 0&&Wf(t,s,ae,l,a,void 0));return}}for(S in a)a.hasOwnProperty(S)&&(l=a[S],l!=null&&_t(t,s,S,l,a,null))}function Sx(t,s,a,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,m=null,b=null,S=null,O=null,K=null,ae=null;for(J in a){var ue=a[J];if(a.hasOwnProperty(J)&&ue!=null)switch(J){case"checked":break;case"value":break;case"defaultValue":O=ue;default:l.hasOwnProperty(J)||_t(t,s,J,null,l,ue)}}for(var Q in l){var J=l[Q];if(ue=a[Q],l.hasOwnProperty(Q)&&(J!=null||ue!=null))switch(Q){case"type":m=J;break;case"name":d=J;break;case"checked":K=J;break;case"defaultChecked":ae=J;break;case"value":b=J;break;case"defaultValue":S=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(r(137,s));break;default:J!==ue&&_t(t,s,Q,J,l,ue)}}Bn(t,b,S,O,K,ae,m,d);return;case"select":J=b=S=Q=null;for(m in a)if(O=a[m],a.hasOwnProperty(m)&&O!=null)switch(m){case"value":break;case"multiple":J=O;default:l.hasOwnProperty(m)||_t(t,s,m,null,l,O)}for(d in l)if(m=l[d],O=a[d],l.hasOwnProperty(d)&&(m!=null||O!=null))switch(d){case"value":Q=m;break;case"defaultValue":S=m;break;case"multiple":b=m;default:m!==O&&_t(t,s,d,m,l,O)}s=S,a=b,l=J,Q!=null?Wn(t,!!a,Q,!1):!!l!=!!a&&(s!=null?Wn(t,!!a,s,!0):Wn(t,!!a,a?[]:"",!1));return;case"textarea":J=Q=null;for(S in a)if(d=a[S],a.hasOwnProperty(S)&&d!=null&&!l.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:_t(t,s,S,null,l,d)}for(b in l)if(d=l[b],m=a[b],l.hasOwnProperty(b)&&(d!=null||m!=null))switch(b){case"value":Q=d;break;case"defaultValue":J=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(r(91));break;default:d!==m&&_t(t,s,b,d,l,m)}ht(t,Q,J);return;case"option":for(var Pe in a)if(Q=a[Pe],a.hasOwnProperty(Pe)&&Q!=null&&!l.hasOwnProperty(Pe))switch(Pe){case"selected":t.selected=!1;break;default:_t(t,s,Pe,null,l,Q)}for(O in l)if(Q=l[O],J=a[O],l.hasOwnProperty(O)&&Q!==J&&(Q!=null||J!=null))switch(O){case"selected":t.selected=Q&&typeof Q!="function"&&typeof Q!="symbol";break;default:_t(t,s,O,Q,l,J)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var je in a)Q=a[je],a.hasOwnProperty(je)&&Q!=null&&!l.hasOwnProperty(je)&&_t(t,s,je,null,l,Q);for(K in l)if(Q=l[K],J=a[K],l.hasOwnProperty(K)&&Q!==J&&(Q!=null||J!=null))switch(K){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(r(137,s));break;default:_t(t,s,K,Q,l,J)}return;default:if(Zn(s)){for(var bt in a)Q=a[bt],a.hasOwnProperty(bt)&&Q!==void 0&&!l.hasOwnProperty(bt)&&Wf(t,s,bt,void 0,l,Q);for(ae in l)Q=l[ae],J=a[ae],!l.hasOwnProperty(ae)||Q===J||Q===void 0&&J===void 0||Wf(t,s,ae,Q,l,J);return}}for(var q in a)Q=a[q],a.hasOwnProperty(q)&&Q!=null&&!l.hasOwnProperty(q)&&_t(t,s,q,null,l,Q);for(ue in l)Q=l[ue],J=a[ue],!l.hasOwnProperty(ue)||Q===J||Q==null&&J==null||_t(t,s,ue,Q,l,J)}var Zf=null,Kf=null;function Ku(t){return t.nodeType===9?t:t.ownerDocument}function Wy(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Zy(t,s){if(t===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&s==="foreignObject"?0:t}function Yf(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Qf=null;function Ax(){var t=window.event;return t&&t.type==="popstate"?t===Qf?!1:(Qf=t,!0):(Qf=null,!1)}var Ky=typeof setTimeout=="function"?setTimeout:void 0,Tx=typeof clearTimeout=="function"?clearTimeout:void 0,Yy=typeof Promise=="function"?Promise:void 0,Rx=typeof queueMicrotask=="function"?queueMicrotask:typeof Yy<"u"?function(t){return Yy.resolve(null).then(t).catch(Cx)}:Ky;function Cx(t){setTimeout(function(){throw t})}function Ur(t){return t==="head"}function Qy(t,s){var a=s,l=0,d=0;do{var m=a.nextSibling;if(t.removeChild(a),m&&m.nodeType===8)if(a=m.data,a==="/$"){if(0<l&&8>l){a=l;var b=t.ownerDocument;if(a&1&&Yl(b.documentElement),a&2&&Yl(b.body),a&4)for(a=b.head,Yl(a),b=a.firstChild;b;){var S=b.nextSibling,O=b.nodeName;b[Us]||O==="SCRIPT"||O==="STYLE"||O==="LINK"&&b.rel.toLowerCase()==="stylesheet"||a.removeChild(b),b=S}}if(d===0){t.removeChild(m),sc(s);return}d--}else a==="$"||a==="$?"||a==="$!"?d++:l=a.charCodeAt(0)-48;else l=0;a=m}while(a);sc(s)}function $f(t){var s=t.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":$f(a),zi(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function Ix(t,s,a,l){for(;t.nodeType===1;){var d=a;if(t.nodeName.toLowerCase()!==s.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Us])switch(s){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==d.rel||t.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||t.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||t.getAttribute("title")!==(d.title==null?null:d.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(d.src==null?null:d.src)||t.getAttribute("type")!==(d.type==null?null:d.type)||t.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(s==="input"&&t.type==="hidden"){var m=d.name==null?null:""+d.name;if(d.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=Yi(t.nextSibling),t===null)break}return null}function Nx(t,s,a){if(s==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Yi(t.nextSibling),t===null))return null;return t}function Jf(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function kx(t,s){var a=t.ownerDocument;if(t.data!=="$?"||a.readyState==="complete")s();else{var l=function(){s(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function Yi(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return t}var em=null;function $y(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return t;s--}else a==="/$"&&s++}t=t.previousSibling}return null}function Jy(t,s,a){switch(s=Ku(a),t){case"html":if(t=s.documentElement,!t)throw Error(r(452));return t;case"head":if(t=s.head,!t)throw Error(r(453));return t;case"body":if(t=s.body,!t)throw Error(r(454));return t;default:throw Error(r(451))}}function Yl(t){for(var s=t.attributes;s.length;)t.removeAttributeNode(s[0]);zi(t)}var Di=new Map,ev=new Set;function Yu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var ar=fe.d;fe.d={f:Dx,r:jx,D:Ox,C:Mx,L:Lx,m:Vx,X:Ux,S:Px,M:Bx};function Dx(){var t=ar.f(),s=zu();return t||s}function jx(t){var s=xi(t);s!==null&&s.tag===5&&s.type==="form"?b0(s):ar.r(t)}var Fo=typeof document>"u"?null:document;function tv(t,s,a){var l=Fo;if(l&&typeof s=="string"&&s){var d=Vt(s);d='link[rel="'+t+'"][href="'+d+'"]',typeof a=="string"&&(d+='[crossorigin="'+a+'"]'),ev.has(d)||(ev.add(d),t={rel:t,crossOrigin:a,href:s},l.querySelector(d)===null&&(s=l.createElement("link"),An(s,"link",t),Dt(s),l.head.appendChild(s)))}}function Ox(t){ar.D(t),tv("dns-prefetch",t,null)}function Mx(t,s){ar.C(t,s),tv("preconnect",t,s)}function Lx(t,s,a){ar.L(t,s,a);var l=Fo;if(l&&t&&s){var d='link[rel="preload"][as="'+Vt(s)+'"]';s==="image"&&a&&a.imageSrcSet?(d+='[imagesrcset="'+Vt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(d+='[imagesizes="'+Vt(a.imageSizes)+'"]')):d+='[href="'+Vt(t)+'"]';var m=d;switch(s){case"style":m=Ho(t);break;case"script":m=qo(t)}Di.has(m)||(t=w({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:t,as:s},a),Di.set(m,t),l.querySelector(d)!==null||s==="style"&&l.querySelector(Ql(m))||s==="script"&&l.querySelector($l(m))||(s=l.createElement("link"),An(s,"link",t),Dt(s),l.head.appendChild(s)))}}function Vx(t,s){ar.m(t,s);var a=Fo;if(a&&t){var l=s&&typeof s.as=="string"?s.as:"script",d='link[rel="modulepreload"][as="'+Vt(l)+'"][href="'+Vt(t)+'"]',m=d;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=qo(t)}if(!Di.has(m)&&(t=w({rel:"modulepreload",href:t},s),Di.set(m,t),a.querySelector(d)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector($l(m)))return}l=a.createElement("link"),An(l,"link",t),Dt(l),a.head.appendChild(l)}}}function Px(t,s,a){ar.S(t,s,a);var l=Fo;if(l&&t){var d=hn(l).hoistableStyles,m=Ho(t);s=s||"default";var b=d.get(m);if(!b){var S={loading:0,preload:null};if(b=l.querySelector(Ql(m)))S.loading=5;else{t=w({rel:"stylesheet",href:t,"data-precedence":s},a),(a=Di.get(m))&&tm(t,a);var O=b=l.createElement("link");Dt(O),An(O,"link",t),O._p=new Promise(function(K,ae){O.onload=K,O.onerror=ae}),O.addEventListener("load",function(){S.loading|=1}),O.addEventListener("error",function(){S.loading|=2}),S.loading|=4,Qu(b,s,l)}b={type:"stylesheet",instance:b,count:1,state:S},d.set(m,b)}}}function Ux(t,s){ar.X(t,s);var a=Fo;if(a&&t){var l=hn(a).hoistableScripts,d=qo(t),m=l.get(d);m||(m=a.querySelector($l(d)),m||(t=w({src:t,async:!0},s),(s=Di.get(d))&&nm(t,s),m=a.createElement("script"),Dt(m),An(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(d,m))}}function Bx(t,s){ar.M(t,s);var a=Fo;if(a&&t){var l=hn(a).hoistableScripts,d=qo(t),m=l.get(d);m||(m=a.querySelector($l(d)),m||(t=w({src:t,async:!0,type:"module"},s),(s=Di.get(d))&&nm(t,s),m=a.createElement("script"),Dt(m),An(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(d,m))}}function nv(t,s,a,l){var d=(d=ke.current)?Yu(d):null;if(!d)throw Error(r(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=Ho(a.href),a=hn(d).hoistableStyles,l=a.get(s),l||(l={type:"style",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=Ho(a.href);var m=hn(d).hoistableStyles,b=m.get(t);if(b||(d=d.ownerDocument||d,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,b),(m=d.querySelector(Ql(t)))&&!m._p&&(b.instance=m,b.state.loading=5),Di.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Di.set(t,a),m||zx(d,t,a,b.state))),s&&l===null)throw Error(r(528,""));return b}if(s&&l!==null)throw Error(r(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=qo(a),a=hn(d).hoistableScripts,l=a.get(s),l||(l={type:"script",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,t))}}function Ho(t){return'href="'+Vt(t)+'"'}function Ql(t){return'link[rel="stylesheet"]['+t+"]"}function iv(t){return w({},t,{"data-precedence":t.precedence,precedence:null})}function zx(t,s,a,l){t.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=t.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),An(s,"link",a),Dt(s),t.head.appendChild(s))}function qo(t){return'[src="'+Vt(t)+'"]'}function $l(t){return"script[async]"+t}function sv(t,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var l=t.querySelector('style[data-href~="'+Vt(a.href)+'"]');if(l)return s.instance=l,Dt(l),l;var d=w({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),Dt(l),An(l,"style",d),Qu(l,a.precedence,t),s.instance=l;case"stylesheet":d=Ho(a.href);var m=t.querySelector(Ql(d));if(m)return s.state.loading|=4,s.instance=m,Dt(m),m;l=iv(a),(d=Di.get(d))&&tm(l,d),m=(t.ownerDocument||t).createElement("link"),Dt(m);var b=m;return b._p=new Promise(function(S,O){b.onload=S,b.onerror=O}),An(m,"link",l),s.state.loading|=4,Qu(m,a.precedence,t),s.instance=m;case"script":return m=qo(a.src),(d=t.querySelector($l(m)))?(s.instance=d,Dt(d),d):(l=a,(d=Di.get(m))&&(l=w({},a),nm(l,d)),t=t.ownerDocument||t,d=t.createElement("script"),Dt(d),An(d,"link",l),t.head.appendChild(d),s.instance=d);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(l=s.instance,s.state.loading|=4,Qu(l,a.precedence,t));return s.instance}function Qu(t,s,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=l.length?l[l.length-1]:null,m=d,b=0;b<l.length;b++){var S=l[b];if(S.dataset.precedence===s)m=S;else if(m!==d)break}m?m.parentNode.insertBefore(t,m.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(t,s.firstChild))}function tm(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.title==null&&(t.title=s.title)}function nm(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.integrity==null&&(t.integrity=s.integrity)}var $u=null;function rv(t,s,a){if($u===null){var l=new Map,d=$u=new Map;d.set(a,l)}else d=$u,l=d.get(a),l||(l=new Map,d.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),d=0;d<a.length;d++){var m=a[d];if(!(m[Us]||m[Ft]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var b=m.getAttribute(s)||"";b=t+b;var S=l.get(b);S?S.push(m):l.set(b,[m])}}return l}function av(t,s,a){t=t.ownerDocument||t,t.head.insertBefore(a,s==="title"?t.querySelector("head > title"):null)}function Fx(t,s,a){if(a===1||s.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return t=s.disabled,typeof s.precedence=="string"&&t==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function ov(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var Jl=null;function Hx(){}function qx(t,s,a){if(Jl===null)throw Error(r(475));var l=Jl;if(s.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var d=Ho(a.href),m=t.querySelector(Ql(d));if(m){t=m._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=Ju.bind(l),t.then(l,l)),s.state.loading|=4,s.instance=m,Dt(m);return}m=t.ownerDocument||t,a=iv(a),(d=Di.get(d))&&tm(a,d),m=m.createElement("link"),Dt(m);var b=m;b._p=new Promise(function(S,O){b.onload=S,b.onerror=O}),An(m,"link",a),s.instance=m}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(s,t),(t=s.state.preload)&&(s.state.loading&3)===0&&(l.count++,s=Ju.bind(l),t.addEventListener("load",s),t.addEventListener("error",s))}}function Gx(){if(Jl===null)throw Error(r(475));var t=Jl;return t.stylesheets&&t.count===0&&im(t,t.stylesheets),0<t.count?function(s){var a=setTimeout(function(){if(t.stylesheets&&im(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=s,function(){t.unsuspend=null,clearTimeout(a)}}:null}function Ju(){if(this.count--,this.count===0){if(this.stylesheets)im(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var ed=null;function im(t,s){t.stylesheets=null,t.unsuspend!==null&&(t.count++,ed=new Map,s.forEach(Xx,t),ed=null,Ju.call(t))}function Xx(t,s){if(!(s.state.loading&4)){var a=ed.get(t);if(a)var l=a.get(null);else{a=new Map,ed.set(t,a);for(var d=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<d.length;m++){var b=d[m];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(a.set(b.dataset.precedence,b),l=b)}l&&a.set(null,l)}d=s.instance,b=d.getAttribute("data-precedence"),m=a.get(b)||l,m===l&&a.set(null,d),a.set(b,d),this.count++,l=Ju.bind(this),d.addEventListener("load",l),d.addEventListener("error",l),m?m.parentNode.insertBefore(d,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(d,t.firstChild)),s.state.loading|=4}}var ec={$$typeof:X,Provider:null,Consumer:null,_currentValue:ne,_currentValue2:ne,_threadCount:0};function Wx(t,s,a,l,d,m,b,S){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ci(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ci(0),this.hiddenUpdates=ci(null),this.identifierPrefix=l,this.onUncaughtError=d,this.onCaughtError=m,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=S,this.incompleteTransitions=new Map}function lv(t,s,a,l,d,m,b,S,O,K,ae,ue){return t=new Wx(t,s,a,b,S,O,K,ue),s=1,m===!0&&(s|=24),m=pi(3,null,null,s),t.current=m,m.stateNode=t,s=Vh(),s.refCount++,t.pooledCache=s,s.refCount++,m.memoizedState={element:l,isDehydrated:a,cache:s},zh(m),t}function cv(t){return t?(t=wo,t):wo}function uv(t,s,a,l,d,m){d=cv(d),l.context===null?l.context=d:l.pendingContext=d,l=Tr(s),l.payload={element:a},m=m===void 0?null:m,m!==null&&(l.callback=m),a=Rr(t,l,s),a!==null&&(bi(a,t,s),Nl(a,t,s))}function dv(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<s?a:s}}function sm(t,s){dv(t,s),(t=t.alternate)&&dv(t,s)}function hv(t){if(t.tag===13){var s=bo(t,67108864);s!==null&&bi(s,t,67108864),sm(t,67108864)}}var td=!0;function Zx(t,s,a,l){var d=ie.T;ie.T=null;var m=fe.p;try{fe.p=2,rm(t,s,a,l)}finally{fe.p=m,ie.T=d}}function Kx(t,s,a,l){var d=ie.T;ie.T=null;var m=fe.p;try{fe.p=8,rm(t,s,a,l)}finally{fe.p=m,ie.T=d}}function rm(t,s,a,l){if(td){var d=am(l);if(d===null)Xf(t,s,l,nd,a),mv(t,l);else if(Qx(d,t,s,a,l))l.stopPropagation();else if(mv(t,l),s&4&&-1<Yx.indexOf(t)){for(;d!==null;){var m=xi(d);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var b=li(m.pendingLanes);if(b!==0){var S=m;for(S.pendingLanes|=2,S.entangledLanes|=2;b;){var O=1<<31-dn(b);S.entanglements[1]|=O,b&=~O}bs(m),(pt&6)===0&&(Uu=$e()+500,Wl(0))}}break;case 13:S=bo(m,2),S!==null&&bi(S,m,2),zu(),sm(m,2)}if(m=am(l),m===null&&Xf(t,s,l,nd,a),m===d)break;d=m}d!==null&&l.stopPropagation()}else Xf(t,s,l,null,a)}}function am(t){return t=Kn(t),om(t)}var nd=null;function om(t){if(nd=null,t=Fi(t),t!==null){var s=c(t);if(s===null)t=null;else{var a=s.tag;if(a===13){if(t=h(s),t!==null)return t;t=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null)}}return nd=t,null}function fv(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(wt()){case oi:return 2;case Pn:return 8;case Ms:case so:return 32;case Pi:return 268435456;default:return 32}default:return 32}}var lm=!1,Br=null,zr=null,Fr=null,tc=new Map,nc=new Map,Hr=[],Yx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function mv(t,s){switch(t){case"focusin":case"focusout":Br=null;break;case"dragenter":case"dragleave":zr=null;break;case"mouseover":case"mouseout":Fr=null;break;case"pointerover":case"pointerout":tc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":nc.delete(s.pointerId)}}function ic(t,s,a,l,d,m){return t===null||t.nativeEvent!==m?(t={blockedOn:s,domEventName:a,eventSystemFlags:l,nativeEvent:m,targetContainers:[d]},s!==null&&(s=xi(s),s!==null&&hv(s)),t):(t.eventSystemFlags|=l,s=t.targetContainers,d!==null&&s.indexOf(d)===-1&&s.push(d),t)}function Qx(t,s,a,l,d){switch(s){case"focusin":return Br=ic(Br,t,s,a,l,d),!0;case"dragenter":return zr=ic(zr,t,s,a,l,d),!0;case"mouseover":return Fr=ic(Fr,t,s,a,l,d),!0;case"pointerover":var m=d.pointerId;return tc.set(m,ic(tc.get(m)||null,t,s,a,l,d)),!0;case"gotpointercapture":return m=d.pointerId,nc.set(m,ic(nc.get(m)||null,t,s,a,l,d)),!0}return!1}function pv(t){var s=Fi(t.target);if(s!==null){var a=c(s);if(a!==null){if(s=a.tag,s===13){if(s=h(a),s!==null){t.blockedOn=s,ga(t.priority,function(){if(a.tag===13){var l=_i();l=Bi(l);var d=bo(a,l);d!==null&&bi(d,a,l),sm(a,l)}});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function id(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var a=am(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Zt=l,a.target.dispatchEvent(l),Zt=null}else return s=xi(a),s!==null&&hv(s),t.blockedOn=a,!1;s.shift()}return!0}function gv(t,s,a){id(t)&&a.delete(s)}function $x(){lm=!1,Br!==null&&id(Br)&&(Br=null),zr!==null&&id(zr)&&(zr=null),Fr!==null&&id(Fr)&&(Fr=null),tc.forEach(gv),nc.forEach(gv)}function sd(t,s){t.blockedOn===s&&(t.blockedOn=null,lm||(lm=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,$x)))}var rd=null;function yv(t){rd!==t&&(rd=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){rd===t&&(rd=null);for(var s=0;s<t.length;s+=3){var a=t[s],l=t[s+1],d=t[s+2];if(typeof l!="function"){if(om(l||a)===null)continue;break}var m=xi(a);m!==null&&(t.splice(s,3),s-=3,of(m,{pending:!0,data:d,method:a.method,action:l},l,d))}}))}function sc(t){function s(O){return sd(O,t)}Br!==null&&sd(Br,t),zr!==null&&sd(zr,t),Fr!==null&&sd(Fr,t),tc.forEach(s),nc.forEach(s);for(var a=0;a<Hr.length;a++){var l=Hr[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Hr.length&&(a=Hr[0],a.blockedOn===null);)pv(a),a.blockedOn===null&&Hr.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var d=a[l],m=a[l+1],b=d[kt]||null;if(typeof m=="function")b||yv(a);else if(b){var S=null;if(m&&m.hasAttribute("formAction")){if(d=m,b=m[kt]||null)S=b.formAction;else if(om(d)!==null)continue}else S=b.action;typeof S=="function"?a[l+1]=S:(a.splice(l,3),l-=3),yv(a)}}}function cm(t){this._internalRoot=t}ad.prototype.render=cm.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(r(409));var a=s.current,l=_i();uv(a,l,t,s,null,null)},ad.prototype.unmount=cm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;uv(t.current,2,null,t,null,null),zu(),s[en]=null}};function ad(t){this._internalRoot=t}ad.prototype.unstable_scheduleHydration=function(t){if(t){var s=os();t={blockedOn:null,target:t,priority:s};for(var a=0;a<Hr.length&&s!==0&&s<Hr[a].priority;a++);Hr.splice(a,0,t),a===0&&pv(t)}};var vv=e.version;if(vv!=="19.1.0")throw Error(r(527,vv,"19.1.0"));fe.findDOMNode=function(t){var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=g(s),t=t!==null?y(t):null,t=t===null?null:t.stateNode,t};var Jx={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:ie,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var od=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!od.isDisabled&&od.supportsFiber)try{Ct=od.inject(Jx),rt=od}catch{}}return ac.createRoot=function(t,s){if(!o(t))throw Error(r(299));var a=!1,l="",d=O0,m=M0,b=L0,S=null;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(l=s.identifierPrefix),s.onUncaughtError!==void 0&&(d=s.onUncaughtError),s.onCaughtError!==void 0&&(m=s.onCaughtError),s.onRecoverableError!==void 0&&(b=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(S=s.unstable_transitionCallbacks)),s=lv(t,1,!1,null,null,a,l,d,m,b,S,null),t[en]=s.current,Gf(t),new cm(s)},ac.hydrateRoot=function(t,s,a){if(!o(t))throw Error(r(299));var l=!1,d="",m=O0,b=M0,S=L0,O=null,K=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(b=a.onCaughtError),a.onRecoverableError!==void 0&&(S=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(O=a.unstable_transitionCallbacks),a.formState!==void 0&&(K=a.formState)),s=lv(t,1,!0,s,a??null,l,d,m,b,S,O,K),s.context=cv(null),a=s.current,l=_i(),l=Bi(l),d=Tr(l),d.callback=null,Rr(a,d,l),a=l,s.current.lanes=a,Ui(s,a),bs(s),t[en]=s.current,Gf(t),new ad(s)},ac.version="19.1.0",ac}var Cv;function lE(){if(Cv)return hm.exports;Cv=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),hm.exports=oE(),hm.exports}var cE=lE();const uE=v_(cE);var oc={},Iv;function dE(){if(Iv)return oc;Iv=1,Object.defineProperty(oc,"__esModule",{value:!0}),oc.parse=h,oc.serialize=y;const i=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,c=(()=>{const A=function(){};return A.prototype=Object.create(null),A})();function h(A,P){const z=new c,H=A.length;if(H<2)return z;const Y=(P==null?void 0:P.decode)||w;let $=0;do{const Z=A.indexOf("=",$);if(Z===-1)break;const X=A.indexOf(";",$),te=X===-1?H:X;if(Z>te){$=A.lastIndexOf(";",Z-1)+1;continue}const le=p(A,$,Z),pe=g(A,Z,le),k=A.slice(le,pe);if(z[k]===void 0){let R=p(A,Z+1,te),C=g(A,te,R);const M=Y(A.slice(R,C));z[k]=M}$=te+1}while($<H);return z}function p(A,P,z){do{const H=A.charCodeAt(P);if(H!==32&&H!==9)return P}while(++P<z);return z}function g(A,P,z){for(;P>z;){const H=A.charCodeAt(--P);if(H!==32&&H!==9)return P+1}return z}function y(A,P,z){const H=(z==null?void 0:z.encode)||encodeURIComponent;if(!i.test(A))throw new TypeError(`argument name is invalid: ${A}`);const Y=H(P);if(!e.test(Y))throw new TypeError(`argument val is invalid: ${P}`);let $=A+"="+Y;if(!z)return $;if(z.maxAge!==void 0){if(!Number.isInteger(z.maxAge))throw new TypeError(`option maxAge is invalid: ${z.maxAge}`);$+="; Max-Age="+z.maxAge}if(z.domain){if(!n.test(z.domain))throw new TypeError(`option domain is invalid: ${z.domain}`);$+="; Domain="+z.domain}if(z.path){if(!r.test(z.path))throw new TypeError(`option path is invalid: ${z.path}`);$+="; Path="+z.path}if(z.expires){if(!x(z.expires)||!Number.isFinite(z.expires.valueOf()))throw new TypeError(`option expires is invalid: ${z.expires}`);$+="; Expires="+z.expires.toUTCString()}if(z.httpOnly&&($+="; HttpOnly"),z.secure&&($+="; Secure"),z.partitioned&&($+="; Partitioned"),z.priority)switch(typeof z.priority=="string"?z.priority.toLowerCase():void 0){case"low":$+="; Priority=Low";break;case"medium":$+="; Priority=Medium";break;case"high":$+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${z.priority}`)}if(z.sameSite)switch(typeof z.sameSite=="string"?z.sameSite.toLowerCase():z.sameSite){case!0:case"strict":$+="; SameSite=Strict";break;case"lax":$+="; SameSite=Lax";break;case"none":$+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${z.sameSite}`)}return $}function w(A){if(A.indexOf("%")===-1)return A;try{return decodeURIComponent(A)}catch{return A}}function x(A){return o.call(A)==="[object Date]"}return oc}dE();var Nv="popstate";function hE(i={}){function e(o,c){let{pathname:h="/",search:p="",hash:g=""}=Ya(o.location.hash.substring(1));return!h.startsWith("/")&&!h.startsWith(".")&&(h="/"+h),Om("",{pathname:h,search:p,hash:g},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function n(o,c){let h=o.document.querySelector("base"),p="";if(h&&h.getAttribute("href")){let g=o.location.href,y=g.indexOf("#");p=y===-1?g:g.slice(0,y)}return p+"#"+(typeof c=="string"?c:Tc(c))}function r(o,c){es(o.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(c)})`)}return mE(e,n,r,i)}function Mt(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function es(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function fE(){return Math.random().toString(36).substring(2,10)}function kv(i,e){return{usr:i.state,key:i.key,idx:e}}function Om(i,e,n=null,r){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?Ya(e):e,state:n,key:e&&e.key||r||fE()}}function Tc({pathname:i="/",search:e="",hash:n=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(i+=n.charAt(0)==="#"?n:"#"+n),i}function Ya(i){let e={};if(i){let n=i.indexOf("#");n>=0&&(e.hash=i.substring(n),i=i.substring(0,n));let r=i.indexOf("?");r>=0&&(e.search=i.substring(r),i=i.substring(0,r)),i&&(e.pathname=i)}return e}function mE(i,e,n,r={}){let{window:o=document.defaultView,v5Compat:c=!1}=r,h=o.history,p="POP",g=null,y=w();y==null&&(y=0,h.replaceState({...h.state,idx:y},""));function w(){return(h.state||{idx:null}).idx}function x(){p="POP";let Y=w(),$=Y==null?null:Y-y;y=Y,g&&g({action:p,location:H.location,delta:$})}function A(Y,$){p="PUSH";let Z=Om(H.location,Y,$);n&&n(Z,Y),y=w()+1;let X=kv(Z,y),te=H.createHref(Z);try{h.pushState(X,"",te)}catch(le){if(le instanceof DOMException&&le.name==="DataCloneError")throw le;o.location.assign(te)}c&&g&&g({action:p,location:H.location,delta:1})}function P(Y,$){p="REPLACE";let Z=Om(H.location,Y,$);n&&n(Z,Y),y=w();let X=kv(Z,y),te=H.createHref(Z);h.replaceState(X,"",te),c&&g&&g({action:p,location:H.location,delta:0})}function z(Y){return pE(Y)}let H={get action(){return p},get location(){return i(o,h)},listen(Y){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(Nv,x),g=Y,()=>{o.removeEventListener(Nv,x),g=null}},createHref(Y){return e(o,Y)},createURL:z,encodeLocation(Y){let $=z(Y);return{pathname:$.pathname,search:$.search,hash:$.hash}},push:A,replace:P,go(Y){return h.go(Y)}};return H}function pE(i,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Mt(n,"No window.location.(origin|href) available to create URL");let r=typeof i=="string"?i:Tc(i);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function b_(i,e,n="/"){return gE(i,e,n,!1)}function gE(i,e,n,r){let o=typeof e=="string"?Ya(e):e,c=mr(o.pathname||"/",n);if(c==null)return null;let h=w_(i);yE(h);let p=null;for(let g=0;p==null&&g<h.length;++g){let y=CE(c);p=TE(h[g],y,r)}return p}function w_(i,e=[],n=[],r=""){let o=(c,h,p)=>{let g={relativePath:p===void 0?c.path||"":p,caseSensitive:c.caseSensitive===!0,childrenIndex:h,route:c};g.relativePath.startsWith("/")&&(Mt(g.relativePath.startsWith(r),`Absolute route path "${g.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(r.length));let y=ur([r,g.relativePath]),w=n.concat(g);c.children&&c.children.length>0&&(Mt(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),w_(c.children,e,w,y)),!(c.path==null&&!c.index)&&e.push({path:y,score:SE(y,c.index),routesMeta:w})};return i.forEach((c,h)=>{var p;if(c.path===""||!((p=c.path)!=null&&p.includes("?")))o(c,h);else for(let g of x_(c.path))o(c,h,g)}),e}function x_(i){let e=i.split("/");if(e.length===0)return[];let[n,...r]=e,o=n.endsWith("?"),c=n.replace(/\?$/,"");if(r.length===0)return o?[c,""]:[c];let h=x_(r.join("/")),p=[];return p.push(...h.map(g=>g===""?c:[c,g].join("/"))),o&&p.push(...h),p.map(g=>i.startsWith("/")&&g===""?"/":g)}function yE(i){i.sort((e,n)=>e.score!==n.score?n.score-e.score:AE(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var vE=/^:[\w-]+$/,_E=3,bE=2,wE=1,xE=10,EE=-2,Dv=i=>i==="*";function SE(i,e){let n=i.split("/"),r=n.length;return n.some(Dv)&&(r+=EE),e&&(r+=bE),n.filter(o=>!Dv(o)).reduce((o,c)=>o+(vE.test(c)?_E:c===""?wE:xE),r)}function AE(i,e){return i.length===e.length&&i.slice(0,-1).every((r,o)=>r===e[o])?i[i.length-1]-e[e.length-1]:0}function TE(i,e,n=!1){let{routesMeta:r}=i,o={},c="/",h=[];for(let p=0;p<r.length;++p){let g=r[p],y=p===r.length-1,w=c==="/"?e:e.slice(c.length)||"/",x=Cd({path:g.relativePath,caseSensitive:g.caseSensitive,end:y},w),A=g.route;if(!x&&y&&n&&!r[r.length-1].route.index&&(x=Cd({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},w)),!x)return null;Object.assign(o,x.params),h.push({params:o,pathname:ur([c,x.pathname]),pathnameBase:DE(ur([c,x.pathnameBase])),route:A}),x.pathnameBase!=="/"&&(c=ur([c,x.pathnameBase]))}return h}function Cd(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[n,r]=RE(i.path,i.caseSensitive,i.end),o=e.match(n);if(!o)return null;let c=o[0],h=c.replace(/(.)\/+$/,"$1"),p=o.slice(1);return{params:r.reduce((y,{paramName:w,isOptional:x},A)=>{if(w==="*"){let z=p[A]||"";h=c.slice(0,c.length-z.length).replace(/(.)\/+$/,"$1")}const P=p[A];return x&&!P?y[w]=void 0:y[w]=(P||"").replace(/%2F/g,"/"),y},{}),pathname:c,pathnameBase:h,pattern:i}}function RE(i,e=!1,n=!0){es(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let r=[],o="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,p,g)=>(r.push({paramName:p,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(r.push({paramName:"*"}),o+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":i!==""&&i!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),r]}function CE(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return es(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function mr(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=i.charAt(n);return r&&r!=="/"?null:i.slice(n)||"/"}function IE(i,e="/"){let{pathname:n,search:r="",hash:o=""}=typeof i=="string"?Ya(i):i;return{pathname:n?n.startsWith("/")?n:NE(n,e):e,search:jE(r),hash:OE(o)}}function NE(i,e){let n=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function gm(i,e,n,r){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function kE(i){return i.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function E_(i){let e=kE(i);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function S_(i,e,n,r=!1){let o;typeof i=="string"?o=Ya(i):(o={...i},Mt(!o.pathname||!o.pathname.includes("?"),gm("?","pathname","search",o)),Mt(!o.pathname||!o.pathname.includes("#"),gm("#","pathname","hash",o)),Mt(!o.search||!o.search.includes("#"),gm("#","search","hash",o)));let c=i===""||o.pathname==="",h=c?"/":o.pathname,p;if(h==null)p=n;else{let x=e.length-1;if(!r&&h.startsWith("..")){let A=h.split("/");for(;A[0]==="..";)A.shift(),x-=1;o.pathname=A.join("/")}p=x>=0?e[x]:"/"}let g=IE(o,p),y=h&&h!=="/"&&h.endsWith("/"),w=(c||h===".")&&n.endsWith("/");return!g.pathname.endsWith("/")&&(y||w)&&(g.pathname+="/"),g}var ur=i=>i.join("/").replace(/\/\/+/g,"/"),DE=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),jE=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,OE=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function ME(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}var A_=["POST","PUT","PATCH","DELETE"];new Set(A_);var LE=["GET",...A_];new Set(LE);var rl=I.createContext(null);rl.displayName="DataRouter";var Qd=I.createContext(null);Qd.displayName="DataRouterState";var T_=I.createContext({isTransitioning:!1});T_.displayName="ViewTransition";var VE=I.createContext(new Map);VE.displayName="Fetchers";var PE=I.createContext(null);PE.displayName="Await";var Ds=I.createContext(null);Ds.displayName="Navigation";var Pc=I.createContext(null);Pc.displayName="Location";var js=I.createContext({outlet:null,matches:[],isDataRoute:!1});js.displayName="Route";var cp=I.createContext(null);cp.displayName="RouteError";function UE(i,{relative:e}={}){Mt(Uc(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=I.useContext(Ds),{hash:o,pathname:c,search:h}=Bc(i,{relative:e}),p=c;return n!=="/"&&(p=c==="/"?n:ur([n,c])),r.createHref({pathname:p,search:h,hash:o})}function Uc(){return I.useContext(Pc)!=null}function is(){return Mt(Uc(),"useLocation() may be used only in the context of a <Router> component."),I.useContext(Pc).location}var R_="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function C_(i){I.useContext(Ds).static||I.useLayoutEffect(i)}function Os(){let{isDataRoute:i}=I.useContext(js);return i?JE():BE()}function BE(){Mt(Uc(),"useNavigate() may be used only in the context of a <Router> component.");let i=I.useContext(rl),{basename:e,navigator:n}=I.useContext(Ds),{matches:r}=I.useContext(js),{pathname:o}=is(),c=JSON.stringify(E_(r)),h=I.useRef(!1);return C_(()=>{h.current=!0}),I.useCallback((g,y={})=>{if(es(h.current,R_),!h.current)return;if(typeof g=="number"){n.go(g);return}let w=S_(g,JSON.parse(c),o,y.relative==="path");i==null&&e!=="/"&&(w.pathname=w.pathname==="/"?e:ur([e,w.pathname])),(y.replace?n.replace:n.push)(w,y.state,y)},[e,n,c,o,i])}I.createContext(null);function zE(){let{matches:i}=I.useContext(js),e=i[i.length-1];return e?e.params:{}}function Bc(i,{relative:e}={}){let{matches:n}=I.useContext(js),{pathname:r}=is(),o=JSON.stringify(E_(n));return I.useMemo(()=>S_(i,JSON.parse(o),r,e==="path"),[i,o,r,e])}function FE(i,e){return I_(i,e)}function I_(i,e,n,r){var $;Mt(Uc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=I.useContext(Ds),{matches:c}=I.useContext(js),h=c[c.length-1],p=h?h.params:{},g=h?h.pathname:"/",y=h?h.pathnameBase:"/",w=h&&h.route;{let Z=w&&w.path||"";N_(g,!w||Z.endsWith("*")||Z.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${Z}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${Z}"> to <Route path="${Z==="/"?"*":`${Z}/*`}">.`)}let x=is(),A;if(e){let Z=typeof e=="string"?Ya(e):e;Mt(y==="/"||(($=Z.pathname)==null?void 0:$.startsWith(y)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${Z.pathname}" was given in the \`location\` prop.`),A=Z}else A=x;let P=A.pathname||"/",z=P;if(y!=="/"){let Z=y.replace(/^\//,"").split("/");z="/"+P.replace(/^\//,"").split("/").slice(Z.length).join("/")}let H=b_(i,{pathname:z});es(w||H!=null,`No routes matched location "${A.pathname}${A.search}${A.hash}" `),es(H==null||H[H.length-1].route.element!==void 0||H[H.length-1].route.Component!==void 0||H[H.length-1].route.lazy!==void 0,`Matched leaf route at location "${A.pathname}${A.search}${A.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let Y=WE(H&&H.map(Z=>Object.assign({},Z,{params:Object.assign({},p,Z.params),pathname:ur([y,o.encodeLocation?o.encodeLocation(Z.pathname).pathname:Z.pathname]),pathnameBase:Z.pathnameBase==="/"?y:ur([y,o.encodeLocation?o.encodeLocation(Z.pathnameBase).pathname:Z.pathnameBase])})),c,n,r);return e&&Y?I.createElement(Pc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...A},navigationType:"POP"}},Y):Y}function HE(){let i=$E(),e=ME(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),n=i instanceof Error?i.stack:null,r="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:r},c={padding:"2px 4px",backgroundColor:r},h=null;return console.error("Error handled by React Router default ErrorBoundary:",i),h=I.createElement(I.Fragment,null,I.createElement("p",null," Hey developer "),I.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",I.createElement("code",{style:c},"ErrorBoundary")," or"," ",I.createElement("code",{style:c},"errorElement")," prop on your route.")),I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},e),n?I.createElement("pre",{style:o},n):null,h)}var qE=I.createElement(HE,null),GE=class extends I.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){console.error("React Router caught the following error during render",i,e)}render(){return this.state.error!==void 0?I.createElement(js.Provider,{value:this.props.routeContext},I.createElement(cp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function XE({routeContext:i,match:e,children:n}){let r=I.useContext(rl);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),I.createElement(js.Provider,{value:i},n)}function WE(i,e=[],n=null,r=null){if(i==null){if(!n)return null;if(n.errors)i=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)i=n.matches;else return null}let o=i,c=n==null?void 0:n.errors;if(c!=null){let g=o.findIndex(y=>y.route.id&&(c==null?void 0:c[y.route.id])!==void 0);Mt(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),o=o.slice(0,Math.min(o.length,g+1))}let h=!1,p=-1;if(n)for(let g=0;g<o.length;g++){let y=o[g];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(p=g),y.route.id){let{loaderData:w,errors:x}=n,A=y.route.loader&&!w.hasOwnProperty(y.route.id)&&(!x||x[y.route.id]===void 0);if(y.route.lazy||A){h=!0,p>=0?o=o.slice(0,p+1):o=[o[0]];break}}}return o.reduceRight((g,y,w)=>{let x,A=!1,P=null,z=null;n&&(x=c&&y.route.id?c[y.route.id]:void 0,P=y.route.errorElement||qE,h&&(p<0&&w===0?(N_("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),A=!0,z=null):p===w&&(A=!0,z=y.route.hydrateFallbackElement||null)));let H=e.concat(o.slice(0,w+1)),Y=()=>{let $;return x?$=P:A?$=z:y.route.Component?$=I.createElement(y.route.Component,null):y.route.element?$=y.route.element:$=g,I.createElement(XE,{match:y,routeContext:{outlet:g,matches:H,isDataRoute:n!=null},children:$})};return n&&(y.route.ErrorBoundary||y.route.errorElement||w===0)?I.createElement(GE,{location:n.location,revalidation:n.revalidation,component:P,error:x,children:Y(),routeContext:{outlet:null,matches:H,isDataRoute:!0}}):Y()},null)}function up(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ZE(i){let e=I.useContext(rl);return Mt(e,up(i)),e}function KE(i){let e=I.useContext(Qd);return Mt(e,up(i)),e}function YE(i){let e=I.useContext(js);return Mt(e,up(i)),e}function dp(i){let e=YE(i),n=e.matches[e.matches.length-1];return Mt(n.route.id,`${i} can only be used on routes that contain a unique "id"`),n.route.id}function QE(){return dp("useRouteId")}function $E(){var r;let i=I.useContext(cp),e=KE("useRouteError"),n=dp("useRouteError");return i!==void 0?i:(r=e.errors)==null?void 0:r[n]}function JE(){let{router:i}=ZE("useNavigate"),e=dp("useNavigate"),n=I.useRef(!1);return C_(()=>{n.current=!0}),I.useCallback(async(o,c={})=>{es(n.current,R_),n.current&&(typeof o=="number"?i.navigate(o):await i.navigate(o,{fromRouteId:e,...c}))},[i,e])}var jv={};function N_(i,e,n){!e&&!jv[i]&&(jv[i]=!0,es(!1,n))}I.memo(eS);function eS({routes:i,future:e,state:n}){return I_(i,void 0,n,e)}function or(i){Mt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function tS({basename:i="/",children:e=null,location:n,navigationType:r="POP",navigator:o,static:c=!1}){Mt(!Uc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=i.replace(/^\/*/,"/"),p=I.useMemo(()=>({basename:h,navigator:o,static:c,future:{}}),[h,o,c]);typeof n=="string"&&(n=Ya(n));let{pathname:g="/",search:y="",hash:w="",state:x=null,key:A="default"}=n,P=I.useMemo(()=>{let z=mr(g,h);return z==null?null:{location:{pathname:z,search:y,hash:w,state:x,key:A},navigationType:r}},[h,g,y,w,x,A,r]);return es(P!=null,`<Router basename="${h}"> is not able to match the URL "${g}${y}${w}" because it does not start with the basename, so the <Router> won't render anything.`),P==null?null:I.createElement(Ds.Provider,{value:p},I.createElement(Pc.Provider,{children:e,value:P}))}function nS({children:i,location:e}){return FE(Mm(i),e)}function Mm(i,e=[]){let n=[];return I.Children.forEach(i,(r,o)=>{if(!I.isValidElement(r))return;let c=[...e,o];if(r.type===I.Fragment){n.push.apply(n,Mm(r.props.children,c));return}Mt(r.type===or,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Mt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let h={id:r.props.id||c.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(h.children=Mm(r.props.children,c)),n.push(h)}),n}var pd="get",gd="application/x-www-form-urlencoded";function $d(i){return i!=null&&typeof i.tagName=="string"}function iS(i){return $d(i)&&i.tagName.toLowerCase()==="button"}function sS(i){return $d(i)&&i.tagName.toLowerCase()==="form"}function rS(i){return $d(i)&&i.tagName.toLowerCase()==="input"}function aS(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function oS(i,e){return i.button===0&&(!e||e==="_self")&&!aS(i)}var ld=null;function lS(){if(ld===null)try{new FormData(document.createElement("form"),0),ld=!1}catch{ld=!0}return ld}var cS=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ym(i){return i!=null&&!cS.has(i)?(es(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${gd}"`),null):i}function uS(i,e){let n,r,o,c,h;if(sS(i)){let p=i.getAttribute("action");r=p?mr(p,e):null,n=i.getAttribute("method")||pd,o=ym(i.getAttribute("enctype"))||gd,c=new FormData(i)}else if(iS(i)||rS(i)&&(i.type==="submit"||i.type==="image")){let p=i.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=i.getAttribute("formaction")||p.getAttribute("action");if(r=g?mr(g,e):null,n=i.getAttribute("formmethod")||p.getAttribute("method")||pd,o=ym(i.getAttribute("formenctype"))||ym(p.getAttribute("enctype"))||gd,c=new FormData(p,i),!lS()){let{name:y,type:w,value:x}=i;if(w==="image"){let A=y?`${y}.`:"";c.append(`${A}x`,"0"),c.append(`${A}y`,"0")}else y&&c.append(y,x)}}else{if($d(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=pd,r=null,o=gd,h=i}return c&&o==="text/plain"&&(h=c,c=void 0),{action:r,method:n.toLowerCase(),encType:o,formData:c,body:h}}function hp(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}async function dS(i,e){if(i.id in e)return e[i.id];try{let n=await import(i.module);return e[i.id]=n,n}catch(n){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function hS(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function fS(i,e,n){let r=await Promise.all(i.map(async o=>{let c=e.routes[o.route.id];if(c){let h=await dS(c,n);return h.links?h.links():[]}return[]}));return yS(r.flat(1).filter(hS).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function Ov(i,e,n,r,o,c){let h=(g,y)=>n[y]?g.route.id!==n[y].route.id:!0,p=(g,y)=>{var w;return n[y].pathname!==g.pathname||((w=n[y].route.path)==null?void 0:w.endsWith("*"))&&n[y].params["*"]!==g.params["*"]};return c==="assets"?e.filter((g,y)=>h(g,y)||p(g,y)):c==="data"?e.filter((g,y)=>{var x;let w=r.routes[g.route.id];if(!w||!w.hasLoader)return!1;if(h(g,y)||p(g,y))return!0;if(g.route.shouldRevalidate){let A=g.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((x=n[0])==null?void 0:x.params)||{},nextUrl:new URL(i,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof A=="boolean")return A}return!0}):[]}function mS(i,e,{includeHydrateFallback:n}={}){return pS(i.map(r=>{let o=e.routes[r.route.id];if(!o)return[];let c=[o.module];return o.clientActionModule&&(c=c.concat(o.clientActionModule)),o.clientLoaderModule&&(c=c.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(c=c.concat(o.hydrateFallbackModule)),o.imports&&(c=c.concat(o.imports)),c}).flat(1))}function pS(i){return[...new Set(i)]}function gS(i){let e={},n=Object.keys(i).sort();for(let r of n)e[r]=i[r];return e}function yS(i,e){let n=new Set;return new Set(e),i.reduce((r,o)=>{let c=JSON.stringify(gS(o));return n.has(c)||(n.add(c),r.push({key:c,link:o})),r},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var vS=new Set([100,101,204,205]);function _S(i,e){let n=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return n.pathname==="/"?n.pathname="_root.data":e&&mr(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function k_(){let i=I.useContext(rl);return hp(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function bS(){let i=I.useContext(Qd);return hp(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var fp=I.createContext(void 0);fp.displayName="FrameworkContext";function D_(){let i=I.useContext(fp);return hp(i,"You must render this element inside a <HydratedRouter> element"),i}function wS(i,e){let n=I.useContext(fp),[r,o]=I.useState(!1),[c,h]=I.useState(!1),{onFocus:p,onBlur:g,onMouseEnter:y,onMouseLeave:w,onTouchStart:x}=e,A=I.useRef(null);I.useEffect(()=>{if(i==="render"&&h(!0),i==="viewport"){let H=$=>{$.forEach(Z=>{h(Z.isIntersecting)})},Y=new IntersectionObserver(H,{threshold:.5});return A.current&&Y.observe(A.current),()=>{Y.disconnect()}}},[i]),I.useEffect(()=>{if(r){let H=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(H)}}},[r]);let P=()=>{o(!0)},z=()=>{o(!1),h(!1)};return n?i!=="intent"?[c,A,{}]:[c,A,{onFocus:lc(p,P),onBlur:lc(g,z),onMouseEnter:lc(y,P),onMouseLeave:lc(w,z),onTouchStart:lc(x,P)}]:[!1,A,{}]}function lc(i,e){return n=>{i&&i(n),n.defaultPrevented||e(n)}}function xS({page:i,...e}){let{router:n}=k_(),r=I.useMemo(()=>b_(n.routes,i,n.basename),[n.routes,i,n.basename]);return r?I.createElement(SS,{page:i,matches:r,...e}):null}function ES(i){let{manifest:e,routeModules:n}=D_(),[r,o]=I.useState([]);return I.useEffect(()=>{let c=!1;return fS(i,e,n).then(h=>{c||o(h)}),()=>{c=!0}},[i,e,n]),r}function SS({page:i,matches:e,...n}){let r=is(),{manifest:o,routeModules:c}=D_(),{basename:h}=k_(),{loaderData:p,matches:g}=bS(),y=I.useMemo(()=>Ov(i,e,g,o,r,"data"),[i,e,g,o,r]),w=I.useMemo(()=>Ov(i,e,g,o,r,"assets"),[i,e,g,o,r]),x=I.useMemo(()=>{if(i===r.pathname+r.search+r.hash)return[];let z=new Set,H=!1;if(e.forEach($=>{var X;let Z=o.routes[$.route.id];!Z||!Z.hasLoader||(!y.some(te=>te.route.id===$.route.id)&&$.route.id in p&&((X=c[$.route.id])!=null&&X.shouldRevalidate)||Z.hasClientLoader?H=!0:z.add($.route.id))}),z.size===0)return[];let Y=_S(i,h);return H&&z.size>0&&Y.searchParams.set("_routes",e.filter($=>z.has($.route.id)).map($=>$.route.id).join(",")),[Y.pathname+Y.search]},[h,p,r,o,y,e,i,c]),A=I.useMemo(()=>mS(w,o),[w,o]),P=ES(w);return I.createElement(I.Fragment,null,x.map(z=>I.createElement("link",{key:z,rel:"prefetch",as:"fetch",href:z,...n})),A.map(z=>I.createElement("link",{key:z,rel:"modulepreload",href:z,...n})),P.map(({key:z,link:H})=>I.createElement("link",{key:z,...H})))}function AS(...i){return e=>{i.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var j_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{j_&&(window.__reactRouterVersion="7.6.1")}catch{}function TS({basename:i,children:e,window:n}){let r=I.useRef();r.current==null&&(r.current=hE({window:n,v5Compat:!0}));let o=r.current,[c,h]=I.useState({action:o.action,location:o.location}),p=I.useCallback(g=>{I.startTransition(()=>h(g))},[h]);return I.useLayoutEffect(()=>o.listen(p),[o,p]),I.createElement(tS,{basename:i,children:e,location:c.location,navigationType:c.action,navigator:o})}var O_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,M_=I.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:o,reloadDocument:c,replace:h,state:p,target:g,to:y,preventScrollReset:w,viewTransition:x,...A},P){let{basename:z}=I.useContext(Ds),H=typeof y=="string"&&O_.test(y),Y,$=!1;if(typeof y=="string"&&H&&(Y=y,j_))try{let C=new URL(window.location.href),M=y.startsWith("//")?new URL(C.protocol+y):new URL(y),D=mr(M.pathname,z);M.origin===C.origin&&D!=null?y=D+M.search+M.hash:$=!0}catch{es(!1,`<Link to="${y}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let Z=UE(y,{relative:o}),[X,te,le]=wS(r,A),pe=NS(y,{replace:h,state:p,target:g,preventScrollReset:w,relative:o,viewTransition:x});function k(C){e&&e(C),C.defaultPrevented||pe(C)}let R=I.createElement("a",{...A,...le,href:Y||Z,onClick:$||c?e:k,ref:AS(P,te),target:g,"data-discover":!H&&n==="render"?"true":void 0});return X&&!H?I.createElement(I.Fragment,null,R,I.createElement(xS,{page:Z})):R});M_.displayName="Link";var RS=I.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:o=!1,style:c,to:h,viewTransition:p,children:g,...y},w){let x=Bc(h,{relative:y.relative}),A=is(),P=I.useContext(Qd),{navigator:z,basename:H}=I.useContext(Ds),Y=P!=null&&MS(x)&&p===!0,$=z.encodeLocation?z.encodeLocation(x).pathname:x.pathname,Z=A.pathname,X=P&&P.navigation&&P.navigation.location?P.navigation.location.pathname:null;n||(Z=Z.toLowerCase(),X=X?X.toLowerCase():null,$=$.toLowerCase()),X&&H&&(X=mr(X,H)||X);const te=$!=="/"&&$.endsWith("/")?$.length-1:$.length;let le=Z===$||!o&&Z.startsWith($)&&Z.charAt(te)==="/",pe=X!=null&&(X===$||!o&&X.startsWith($)&&X.charAt($.length)==="/"),k={isActive:le,isPending:pe,isTransitioning:Y},R=le?e:void 0,C;typeof r=="function"?C=r(k):C=[r,le?"active":null,pe?"pending":null,Y?"transitioning":null].filter(Boolean).join(" ");let M=typeof c=="function"?c(k):c;return I.createElement(M_,{...y,"aria-current":R,className:C,ref:w,style:M,to:h,viewTransition:p},typeof g=="function"?g(k):g)});RS.displayName="NavLink";var CS=I.forwardRef(({discover:i="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:o,state:c,method:h=pd,action:p,onSubmit:g,relative:y,preventScrollReset:w,viewTransition:x,...A},P)=>{let z=jS(),H=OS(p,{relative:y}),Y=h.toLowerCase()==="get"?"get":"post",$=typeof p=="string"&&O_.test(p),Z=X=>{if(g&&g(X),X.defaultPrevented)return;X.preventDefault();let te=X.nativeEvent.submitter,le=(te==null?void 0:te.getAttribute("formmethod"))||h;z(te||X.currentTarget,{fetcherKey:e,method:le,navigate:n,replace:o,state:c,relative:y,preventScrollReset:w,viewTransition:x})};return I.createElement("form",{ref:P,method:Y,action:H,onSubmit:r?g:Z,...A,"data-discover":!$&&i==="render"?"true":void 0})});CS.displayName="Form";function IS(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function L_(i){let e=I.useContext(rl);return Mt(e,IS(i)),e}function NS(i,{target:e,replace:n,state:r,preventScrollReset:o,relative:c,viewTransition:h}={}){let p=Os(),g=is(),y=Bc(i,{relative:c});return I.useCallback(w=>{if(oS(w,e)){w.preventDefault();let x=n!==void 0?n:Tc(g)===Tc(y);p(i,{replace:x,state:r,preventScrollReset:o,relative:c,viewTransition:h})}},[g,p,y,n,r,e,i,o,c,h])}var kS=0,DS=()=>`__${String(++kS)}__`;function jS(){let{router:i}=L_("useSubmit"),{basename:e}=I.useContext(Ds),n=QE();return I.useCallback(async(r,o={})=>{let{action:c,method:h,encType:p,formData:g,body:y}=uS(r,e);if(o.navigate===!1){let w=o.fetcherKey||DS();await i.fetch(w,n,o.action||c,{preventScrollReset:o.preventScrollReset,formData:g,body:y,formMethod:o.method||h,formEncType:o.encType||p,flushSync:o.flushSync})}else await i.navigate(o.action||c,{preventScrollReset:o.preventScrollReset,formData:g,body:y,formMethod:o.method||h,formEncType:o.encType||p,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[i,e,n])}function OS(i,{relative:e}={}){let{basename:n}=I.useContext(Ds),r=I.useContext(js);Mt(r,"useFormAction must be used inside a RouteContext");let[o]=r.matches.slice(-1),c={...Bc(i||".",{relative:e})},h=is();if(i==null){c.search=h.search;let p=new URLSearchParams(c.search),g=p.getAll("index");if(g.some(w=>w==="")){p.delete("index"),g.filter(x=>x).forEach(x=>p.append("index",x));let w=p.toString();c.search=w?`?${w}`:""}}return(!i||i===".")&&o.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(c.pathname=c.pathname==="/"?n:ur([n,c.pathname])),Tc(c)}function MS(i,e={}){let n=I.useContext(T_);Mt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=L_("useViewTransitionState"),o=Bc(i,{relative:e.relative});if(!n.isTransitioning)return!1;let c=mr(n.currentLocation.pathname,r)||n.currentLocation.pathname,h=mr(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Cd(o.pathname,h)!=null||Cd(o.pathname,c)!=null}[...vS];var LS=__();const VS=()=>{};var Mv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V_=function(i){const e=[];let n=0;for(let r=0;r<i.length;r++){let o=i.charCodeAt(r);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&r+1<i.length&&(i.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++r)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},PS=function(i){const e=[];let n=0,r=0;for(;n<i.length;){const o=i[n++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const c=i[n++];e[r++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=i[n++],h=i[n++],p=i[n++],g=((o&7)<<18|(c&63)<<12|(h&63)<<6|p&63)-65536;e[r++]=String.fromCharCode(55296+(g>>10)),e[r++]=String.fromCharCode(56320+(g&1023))}else{const c=i[n++],h=i[n++];e[r++]=String.fromCharCode((o&15)<<12|(c&63)<<6|h&63)}}return e.join("")},P_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<i.length;o+=3){const c=i[o],h=o+1<i.length,p=h?i[o+1]:0,g=o+2<i.length,y=g?i[o+2]:0,w=c>>2,x=(c&3)<<4|p>>4;let A=(p&15)<<2|y>>6,P=y&63;g||(P=64,h||(A=64)),r.push(n[w],n[x],n[A],n[P])}return r.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(V_(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):PS(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<i.length;){const c=n[i.charAt(o++)],p=o<i.length?n[i.charAt(o)]:0;++o;const y=o<i.length?n[i.charAt(o)]:64;++o;const x=o<i.length?n[i.charAt(o)]:64;if(++o,c==null||p==null||y==null||x==null)throw new US;const A=c<<2|p>>4;if(r.push(A),y!==64){const P=p<<4&240|y>>2;if(r.push(P),x!==64){const z=y<<6&192|x;r.push(z)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class US extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const BS=function(i){const e=V_(i);return P_.encodeByteArray(e,!0)},Id=function(i){return BS(i).replace(/\./g,"")},U_=function(i){try{return P_.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS=()=>zS().__FIREBASE_DEFAULTS__,HS=()=>{if(typeof process>"u"||typeof Mv>"u")return;const i=Mv.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},qS=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&U_(i[1]);return e&&JSON.parse(e)},Jd=()=>{try{return VS()||FS()||HS()||qS()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},B_=i=>{var e,n;return(n=(e=Jd())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[i]},GS=i=>{const e=B_(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},z_=()=>{var i;return(i=Jd())===null||i===void 0?void 0:i.config},F_=i=>{var e;return(e=Jd())===null||e===void 0?void 0:e[`_${i}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function al(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function H_(i){return(await fetch(i,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WS(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",o=i.iat||0,c=i.sub||i.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}}},i);return[Id(JSON.stringify(n)),Id(JSON.stringify(h)),""].join(".")}const yc={};function ZS(){const i={prod:[],emulator:[]};for(const e of Object.keys(yc))yc[e]?i.emulator.push(e):i.prod.push(e);return i}function KS(i){let e=document.getElementById(i),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),n=!0),{created:n,element:e}}let Lv=!1;function q_(i,e){if(typeof window>"u"||typeof document>"u"||!al(window.location.host)||yc[i]===e||yc[i]||Lv)return;yc[i]=e;function n(A){return`__firebase__banner__${A}`}const r="__firebase__banner",c=ZS().prod.length>0;function h(){const A=document.getElementById(r);A&&A.remove()}function p(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function g(A,P){A.setAttribute("width","24"),A.setAttribute("id",P),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function y(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{Lv=!0,h()},A}function w(A,P){A.setAttribute("id",P),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function x(){const A=KS(r),P=n("text"),z=document.getElementById(P)||document.createElement("span"),H=n("learnmore"),Y=document.getElementById(H)||document.createElement("a"),$=n("preprendIcon"),Z=document.getElementById($)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const X=A.element;p(X),w(Y,H);const te=y();g(Z,$),X.append(Z,z,Y,te),document.body.appendChild(X)}c?(z.innerText="Preview backend disconnected.",Z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,z.innerText="Preview backend running in this workspace."),z.setAttribute("id",P)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",x):x()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ln(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function YS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ln())}function QS(){var i;const e=(i=Jd())===null||i===void 0?void 0:i.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function $S(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function G_(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function JS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function eA(){const i=Ln();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function tA(){return!QS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function X_(){try{return typeof indexedDB=="object"}catch{return!1}}function W_(){return new Promise((i,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(r),i(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var c;e(((c=o.error)===null||c===void 0?void 0:c.message)||"")}}catch(n){e(n)}})}function nA(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iA="FirebaseError";class ss extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=iA,Object.setPrototypeOf(this,ss.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Qa.prototype.create)}}class Qa{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},o=`${this.service}/${e}`,c=this.errors[e],h=c?sA(c,r):"Error",p=`${this.serviceName}: ${h} (${o}).`;return new ss(o,p,r)}}function sA(i,e){return i.replace(rA,(n,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const rA=/\{\$([^}]+)}/g;function aA(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function na(i,e){if(i===e)return!0;const n=Object.keys(i),r=Object.keys(e);for(const o of n){if(!r.includes(o))return!1;const c=i[o],h=e[o];if(Vv(c)&&Vv(h)){if(!na(c,h))return!1}else if(c!==h)return!1}for(const o of r)if(!n.includes(o))return!1;return!0}function Vv(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zc(i){const e=[];for(const[n,r]of Object.entries(i))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function uc(i){const e={};return i.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[o,c]=r.split("=");e[decodeURIComponent(o)]=decodeURIComponent(c)}}),e}function dc(i){const e=i.indexOf("?");if(!e)return"";const n=i.indexOf("#",e);return i.substring(e,n>0?n:void 0)}function oA(i,e){const n=new lA(i,e);return n.subscribe.bind(n)}class lA{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let o;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");cA(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:r},o.next===void 0&&(o.next=vm),o.error===void 0&&(o.error=vm),o.complete===void 0&&(o.complete=vm);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function cA(i,e){if(typeof i!="object"||i===null)return!1;for(const n of e)if(n in i&&typeof i[n]=="function")return!0;return!1}function vm(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uA=1e3,dA=2,hA=4*60*60*1e3,fA=.5;function Pv(i,e=uA,n=dA){const r=e*Math.pow(n,i),o=Math.round(fA*r*(Math.random()-.5)*2);return Math.min(hA,r+o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hn(i){return i&&i._delegate?i._delegate:i}class ts{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ba="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new XS;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(c){if(o)return null;throw c}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(gA(e))try{this.getOrInitializeService({instanceIdentifier:Ba})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:o});r.resolve(c)}catch{}}}}clearInstance(e=Ba){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ba){return this.instances.has(e)}getOptions(e=Ba){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[c,h]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(c);r===p&&h.resolve(o)}return o}onInit(e,n){var r;const o=this.normalizeInstanceIdentifier(n),c=(r=this.onInitCallbacks.get(o))!==null&&r!==void 0?r:new Set;c.add(e),this.onInitCallbacks.set(o,c);const h=this.instances.get(o);return h&&e(h,o),()=>{c.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const o of r)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:pA(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ba){return this.component?this.component.multipleInstances?e:Ba:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function pA(i){return i===Ba?void 0:i}function gA(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new mA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Je;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Je||(Je={}));const vA={debug:Je.DEBUG,verbose:Je.VERBOSE,info:Je.INFO,warn:Je.WARN,error:Je.ERROR,silent:Je.SILENT},_A=Je.INFO,bA={[Je.DEBUG]:"log",[Je.VERBOSE]:"log",[Je.INFO]:"info",[Je.WARN]:"warn",[Je.ERROR]:"error"},wA=(i,e,...n)=>{if(e<i.logLevel)return;const r=new Date().toISOString(),o=bA[e];if(o)console[o](`[${r}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class eh{constructor(e){this.name=e,this._logLevel=_A,this._logHandler=wA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Je))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?vA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Je.DEBUG,...e),this._logHandler(this,Je.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Je.VERBOSE,...e),this._logHandler(this,Je.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Je.INFO,...e),this._logHandler(this,Je.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Je.WARN,...e),this._logHandler(this,Je.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Je.ERROR,...e),this._logHandler(this,Je.ERROR,...e)}}const xA=(i,e)=>e.some(n=>i instanceof n);let Uv,Bv;function EA(){return Uv||(Uv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function SA(){return Bv||(Bv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Z_=new WeakMap,Lm=new WeakMap,K_=new WeakMap,_m=new WeakMap,mp=new WeakMap;function AA(i){const e=new Promise((n,r)=>{const o=()=>{i.removeEventListener("success",c),i.removeEventListener("error",h)},c=()=>{n($r(i.result)),o()},h=()=>{r(i.error),o()};i.addEventListener("success",c),i.addEventListener("error",h)});return e.then(n=>{n instanceof IDBCursor&&Z_.set(n,i)}).catch(()=>{}),mp.set(e,i),e}function TA(i){if(Lm.has(i))return;const e=new Promise((n,r)=>{const o=()=>{i.removeEventListener("complete",c),i.removeEventListener("error",h),i.removeEventListener("abort",h)},c=()=>{n(),o()},h=()=>{r(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",c),i.addEventListener("error",h),i.addEventListener("abort",h)});Lm.set(i,e)}let Vm={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return Lm.get(i);if(e==="objectStoreNames")return i.objectStoreNames||K_.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return $r(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function RA(i){Vm=i(Vm)}function CA(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=i.call(bm(this),e,...n);return K_.set(r,e.sort?e.sort():[e]),$r(r)}:SA().includes(i)?function(...e){return i.apply(bm(this),e),$r(Z_.get(this))}:function(...e){return $r(i.apply(bm(this),e))}}function IA(i){return typeof i=="function"?CA(i):(i instanceof IDBTransaction&&TA(i),xA(i,EA())?new Proxy(i,Vm):i)}function $r(i){if(i instanceof IDBRequest)return AA(i);if(_m.has(i))return _m.get(i);const e=IA(i);return e!==i&&(_m.set(i,e),mp.set(e,i)),e}const bm=i=>mp.get(i);function Y_(i,e,{blocked:n,upgrade:r,blocking:o,terminated:c}={}){const h=indexedDB.open(i,e),p=$r(h);return r&&h.addEventListener("upgradeneeded",g=>{r($r(h.result),g.oldVersion,g.newVersion,$r(h.transaction),g)}),n&&h.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),p.then(g=>{c&&g.addEventListener("close",()=>c()),o&&g.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),p}const NA=["get","getKey","getAll","getAllKeys","count"],kA=["put","add","delete","clear"],wm=new Map;function zv(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(wm.get(e))return wm.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,o=kA.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(o||NA.includes(n)))return;const c=async function(h,...p){const g=this.transaction(h,o?"readwrite":"readonly");let y=g.store;return r&&(y=y.index(p.shift())),(await Promise.all([y[n](...p),o&&g.done]))[0]};return wm.set(e,c),c}RA(i=>({...i,get:(e,n,r)=>zv(e,n)||i.get(e,n,r),has:(e,n)=>!!zv(e,n)||i.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(jA(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function jA(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Pm="@firebase/app",Fv="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pr=new eh("@firebase/app"),OA="@firebase/app-compat",MA="@firebase/analytics-compat",LA="@firebase/analytics",VA="@firebase/app-check-compat",PA="@firebase/app-check",UA="@firebase/auth",BA="@firebase/auth-compat",zA="@firebase/database",FA="@firebase/data-connect",HA="@firebase/database-compat",qA="@firebase/functions",GA="@firebase/functions-compat",XA="@firebase/installations",WA="@firebase/installations-compat",ZA="@firebase/messaging",KA="@firebase/messaging-compat",YA="@firebase/performance",QA="@firebase/performance-compat",$A="@firebase/remote-config",JA="@firebase/remote-config-compat",eT="@firebase/storage",tT="@firebase/storage-compat",nT="@firebase/firestore",iT="@firebase/ai",sT="@firebase/firestore-compat",rT="firebase",aT="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Um="[DEFAULT]",oT={[Pm]:"fire-core",[OA]:"fire-core-compat",[LA]:"fire-analytics",[MA]:"fire-analytics-compat",[PA]:"fire-app-check",[VA]:"fire-app-check-compat",[UA]:"fire-auth",[BA]:"fire-auth-compat",[zA]:"fire-rtdb",[FA]:"fire-data-connect",[HA]:"fire-rtdb-compat",[qA]:"fire-fn",[GA]:"fire-fn-compat",[XA]:"fire-iid",[WA]:"fire-iid-compat",[ZA]:"fire-fcm",[KA]:"fire-fcm-compat",[YA]:"fire-perf",[QA]:"fire-perf-compat",[$A]:"fire-rc",[JA]:"fire-rc-compat",[eT]:"fire-gcs",[tT]:"fire-gcs-compat",[nT]:"fire-fst",[sT]:"fire-fst-compat",[iT]:"fire-vertex","fire-js":"fire-js",[rT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nd=new Map,lT=new Map,Bm=new Map;function Hv(i,e){try{i.container.addComponent(e)}catch(n){pr.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function Is(i){const e=i.name;if(Bm.has(e))return pr.debug(`There were multiple attempts to register component ${e}.`),!1;Bm.set(e,i);for(const n of Nd.values())Hv(n,i);for(const n of lT.values())Hv(n,i);return!0}function $a(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}function ji(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Jr=new Qa("app","Firebase",cT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ts("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Jr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ol=aT;function Q_(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Um,automaticDataCollectionEnabled:!0},e),o=r.name;if(typeof o!="string"||!o)throw Jr.create("bad-app-name",{appName:String(o)});if(n||(n=z_()),!n)throw Jr.create("no-options");const c=Nd.get(o);if(c){if(na(n,c.options)&&na(r,c.config))return c;throw Jr.create("duplicate-app",{appName:o})}const h=new yA(o);for(const g of Bm.values())h.addComponent(g);const p=new uT(n,r,h);return Nd.set(o,p),p}function pp(i=Um){const e=Nd.get(i);if(!e&&i===Um&&z_())return Q_();if(!e)throw Jr.create("no-app",{appName:i});return e}function Vi(i,e,n){var r;let o=(r=oT[i])!==null&&r!==void 0?r:i;n&&(o+=`-${n}`);const c=o.match(/\s|\//),h=e.match(/\s|\//);if(c||h){const p=[`Unable to register library "${o}" with version "${e}":`];c&&p.push(`library name "${o}" contains illegal characters (whitespace or "/")`),c&&h&&p.push("and"),h&&p.push(`version name "${e}" contains illegal characters (whitespace or "/")`),pr.warn(p.join(" "));return}Is(new ts(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dT="firebase-heartbeat-database",hT=1,Rc="firebase-heartbeat-store";let xm=null;function $_(){return xm||(xm=Y_(dT,hT,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(Rc)}catch(n){console.warn(n)}}}}).catch(i=>{throw Jr.create("idb-open",{originalErrorMessage:i.message})})),xm}async function fT(i){try{const n=(await $_()).transaction(Rc),r=await n.objectStore(Rc).get(J_(i));return await n.done,r}catch(e){if(e instanceof ss)pr.warn(e.message);else{const n=Jr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});pr.warn(n.message)}}}async function qv(i,e){try{const r=(await $_()).transaction(Rc,"readwrite");await r.objectStore(Rc).put(e,J_(i)),await r.done}catch(n){if(n instanceof ss)pr.warn(n.message);else{const r=Jr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});pr.warn(r.message)}}}function J_(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mT=1024,pT=30;class gT{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new vT(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=Gv();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(h=>h.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:o}),this._heartbeatsCache.heartbeats.length>pT){const h=_T(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){pr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Gv(),{heartbeatsToSend:r,unsentEntries:o}=yT(this._heartbeatsCache.heartbeats),c=Id(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(n){return pr.warn(n),""}}}function Gv(){return new Date().toISOString().substring(0,10)}function yT(i,e=mT){const n=[];let r=i.slice();for(const o of i){const c=n.find(h=>h.agent===o.agent);if(c){if(c.dates.push(o.date),Xv(n)>e){c.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),Xv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class vT{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return X_()?W_().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await fT(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return qv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return qv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function Xv(i){return Id(JSON.stringify({version:2,heartbeats:i})).length}function _T(i){if(i.length===0)return-1;let e=0,n=i[0].date;for(let r=1;r<i.length;r++)i[r].date<n&&(n=i[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bT(i){Is(new ts("platform-logger",e=>new DA(e),"PRIVATE")),Is(new ts("heartbeat",e=>new gT(e),"PRIVATE")),Vi(Pm,Fv,i),Vi(Pm,Fv,"esm2017"),Vi("fire-js","")}bT("");var wT="firebase",xT="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vi(wT,xT,"app");const eb="@firebase/installations",gp="0.6.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tb=1e4,nb=`w:${gp}`,ib="FIS_v2",ET="https://firebaseinstallations.googleapis.com/v1",ST=60*60*1e3,AT="installations",TT="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},qa=new Qa(AT,TT,RT);function sb(i){return i instanceof ss&&i.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rb({projectId:i}){return`${ET}/projects/${i}/installations`}function ab(i){return{token:i.token,requestStatus:2,expiresIn:IT(i.expiresIn),creationTime:Date.now()}}async function ob(i,e){const r=(await e.json()).error;return qa.create("request-failed",{requestName:i,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function lb({apiKey:i}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":i})}function CT(i,{refreshToken:e}){const n=lb(i);return n.append("Authorization",NT(e)),n}async function cb(i){const e=await i();return e.status>=500&&e.status<600?i():e}function IT(i){return Number(i.replace("s","000"))}function NT(i){return`${ib} ${i}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kT({appConfig:i,heartbeatServiceProvider:e},{fid:n}){const r=rb(i),o=lb(i),c=e.getImmediate({optional:!0});if(c){const y=await c.getHeartbeatsHeader();y&&o.append("x-firebase-client",y)}const h={fid:n,authVersion:ib,appId:i.appId,sdkVersion:nb},p={method:"POST",headers:o,body:JSON.stringify(h)},g=await cb(()=>fetch(r,p));if(g.ok){const y=await g.json();return{fid:y.fid||n,registrationStatus:2,refreshToken:y.refreshToken,authToken:ab(y.authToken)}}else throw await ob("Create Installation",g)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ub(i){return new Promise(e=>{setTimeout(e,i)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DT(i){return btoa(String.fromCharCode(...i)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jT=/^[cdef][\w-]{21}$/,zm="";function OT(){try{const i=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(i),i[0]=112+i[0]%16;const n=MT(i);return jT.test(n)?n:zm}catch{return zm}}function MT(i){return DT(i).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function th(i){return`${i.appName}!${i.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const db=new Map;function hb(i,e){const n=th(i);fb(n,e),LT(n,e)}function fb(i,e){const n=db.get(i);if(n)for(const r of n)r(e)}function LT(i,e){const n=VT();n&&n.postMessage({key:i,fid:e}),PT()}let za=null;function VT(){return!za&&"BroadcastChannel"in self&&(za=new BroadcastChannel("[Firebase] FID Change"),za.onmessage=i=>{fb(i.data.key,i.data.fid)}),za}function PT(){db.size===0&&za&&(za.close(),za=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UT="firebase-installations-database",BT=1,Ga="firebase-installations-store";let Em=null;function yp(){return Em||(Em=Y_(UT,BT,{upgrade:(i,e)=>{switch(e){case 0:i.createObjectStore(Ga)}}})),Em}async function kd(i,e){const n=th(i),o=(await yp()).transaction(Ga,"readwrite"),c=o.objectStore(Ga),h=await c.get(n);return await c.put(e,n),await o.done,(!h||h.fid!==e.fid)&&hb(i,e.fid),e}async function mb(i){const e=th(i),r=(await yp()).transaction(Ga,"readwrite");await r.objectStore(Ga).delete(e),await r.done}async function nh(i,e){const n=th(i),o=(await yp()).transaction(Ga,"readwrite"),c=o.objectStore(Ga),h=await c.get(n),p=e(h);return p===void 0?await c.delete(n):await c.put(p,n),await o.done,p&&(!h||h.fid!==p.fid)&&hb(i,p.fid),p}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vp(i){let e;const n=await nh(i.appConfig,r=>{const o=zT(r),c=FT(i,o);return e=c.registrationPromise,c.installationEntry});return n.fid===zm?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function zT(i){const e=i||{fid:OT(),registrationStatus:0};return pb(e)}function FT(i,e){if(e.registrationStatus===0){if(!navigator.onLine){const o=Promise.reject(qa.create("app-offline"));return{installationEntry:e,registrationPromise:o}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=HT(i,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:qT(i)}:{installationEntry:e}}async function HT(i,e){try{const n=await kT(i,e);return kd(i.appConfig,n)}catch(n){throw sb(n)&&n.customData.serverCode===409?await mb(i.appConfig):await kd(i.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function qT(i){let e=await Wv(i.appConfig);for(;e.registrationStatus===1;)await ub(100),e=await Wv(i.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await vp(i);return r||n}return e}function Wv(i){return nh(i,e=>{if(!e)throw qa.create("installation-not-found");return pb(e)})}function pb(i){return GT(i)?{fid:i.fid,registrationStatus:0}:i}function GT(i){return i.registrationStatus===1&&i.registrationTime+tb<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XT({appConfig:i,heartbeatServiceProvider:e},n){const r=WT(i,n),o=CT(i,n),c=e.getImmediate({optional:!0});if(c){const y=await c.getHeartbeatsHeader();y&&o.append("x-firebase-client",y)}const h={installation:{sdkVersion:nb,appId:i.appId}},p={method:"POST",headers:o,body:JSON.stringify(h)},g=await cb(()=>fetch(r,p));if(g.ok){const y=await g.json();return ab(y)}else throw await ob("Generate Auth Token",g)}function WT(i,{fid:e}){return`${rb(i)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _p(i,e=!1){let n;const r=await nh(i.appConfig,c=>{if(!gb(c))throw qa.create("not-registered");const h=c.authToken;if(!e&&YT(h))return c;if(h.requestStatus===1)return n=ZT(i,e),c;{if(!navigator.onLine)throw qa.create("app-offline");const p=$T(c);return n=KT(i,p),p}});return n?await n:r.authToken}async function ZT(i,e){let n=await Zv(i.appConfig);for(;n.authToken.requestStatus===1;)await ub(100),n=await Zv(i.appConfig);const r=n.authToken;return r.requestStatus===0?_p(i,e):r}function Zv(i){return nh(i,e=>{if(!gb(e))throw qa.create("not-registered");const n=e.authToken;return JT(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function KT(i,e){try{const n=await XT(i,e),r=Object.assign(Object.assign({},e),{authToken:n});return await kd(i.appConfig,r),n}catch(n){if(sb(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await mb(i.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await kd(i.appConfig,r)}throw n}}function gb(i){return i!==void 0&&i.registrationStatus===2}function YT(i){return i.requestStatus===2&&!QT(i)}function QT(i){const e=Date.now();return e<i.creationTime||i.creationTime+i.expiresIn<e+ST}function $T(i){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},i),{authToken:e})}function JT(i){return i.requestStatus===1&&i.requestTime+tb<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eR(i){const e=i,{installationEntry:n,registrationPromise:r}=await vp(e);return r?r.catch(console.error):_p(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tR(i,e=!1){const n=i;return await nR(n),(await _p(n,e)).token}async function nR(i){const{registrationPromise:e}=await vp(i);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iR(i){if(!i||!i.options)throw Sm("App Configuration");if(!i.name)throw Sm("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!i.options[n])throw Sm(n);return{appName:i.name,projectId:i.options.projectId,apiKey:i.options.apiKey,appId:i.options.appId}}function Sm(i){return qa.create("missing-app-config-values",{valueName:i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yb="installations",sR="installations-internal",rR=i=>{const e=i.getProvider("app").getImmediate(),n=iR(e),r=$a(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},aR=i=>{const e=i.getProvider("app").getImmediate(),n=$a(e,yb).getImmediate();return{getId:()=>eR(n),getToken:o=>tR(n,o)}};function oR(){Is(new ts(yb,rR,"PUBLIC")),Is(new ts(sR,aR,"PRIVATE"))}oR();Vi(eb,gp);Vi(eb,gp,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dd="analytics",lR="firebase_id",cR="origin",uR=60*1e3,dR="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",bp="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ai=new eh("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},wi=new Qa("analytics","Analytics",hR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fR(i){if(!i.startsWith(bp)){const e=wi.create("invalid-gtag-resource",{gtagURL:i});return ai.warn(e.message),""}return i}function vb(i){return Promise.all(i.map(e=>e.catch(n=>n)))}function mR(i,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(i,e)),n}function pR(i,e){const n=mR("firebase-js-sdk-policy",{createScriptURL:fR}),r=document.createElement("script"),o=`${bp}?l=${i}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(o):o,r.async=!0,document.head.appendChild(r)}function gR(i){let e=[];return Array.isArray(window[i])?e=window[i]:window[i]=e,e}async function yR(i,e,n,r,o,c){const h=r[o];try{if(h)await e[h];else{const g=(await vb(n)).find(y=>y.measurementId===o);g&&await e[g.appId]}}catch(p){ai.error(p)}i("config",o,c)}async function vR(i,e,n,r,o){try{let c=[];if(o&&o.send_to){let h=o.send_to;Array.isArray(h)||(h=[h]);const p=await vb(n);for(const g of h){const y=p.find(x=>x.measurementId===g),w=y&&e[y.appId];if(w)c.push(w);else{c=[];break}}}c.length===0&&(c=Object.values(e)),await Promise.all(c),i("event",r,o||{})}catch(c){ai.error(c)}}function _R(i,e,n,r){async function o(c,...h){try{if(c==="event"){const[p,g]=h;await vR(i,e,n,p,g)}else if(c==="config"){const[p,g]=h;await yR(i,e,n,r,p,g)}else if(c==="consent"){const[p,g]=h;i("consent",p,g)}else if(c==="get"){const[p,g,y]=h;i("get",p,g,y)}else if(c==="set"){const[p]=h;i("set",p)}else i(c,...h)}catch(p){ai.error(p)}}return o}function bR(i,e,n,r,o){let c=function(...h){window[r].push(arguments)};return window[o]&&typeof window[o]=="function"&&(c=window[o]),window[o]=_R(c,i,e,n),{gtagCore:c,wrappedGtag:window[o]}}function wR(i){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(bp)&&n.src.includes(i))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xR=30,ER=1e3;class SR{constructor(e={},n=ER){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const _b=new SR;function AR(i){return new Headers({Accept:"application/json","x-goog-api-key":i})}async function TR(i){var e;const{appId:n,apiKey:r}=i,o={method:"GET",headers:AR(r)},c=dR.replace("{app-id}",n),h=await fetch(c,o);if(h.status!==200&&h.status!==304){let p="";try{const g=await h.json();!((e=g.error)===null||e===void 0)&&e.message&&(p=g.error.message)}catch{}throw wi.create("config-fetch-failed",{httpStatus:h.status,responseMessage:p})}return h.json()}async function RR(i,e=_b,n){const{appId:r,apiKey:o,measurementId:c}=i.options;if(!r)throw wi.create("no-app-id");if(!o){if(c)return{measurementId:c,appId:r};throw wi.create("no-api-key")}const h=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},p=new NR;return setTimeout(async()=>{p.abort()},uR),bb({appId:r,apiKey:o,measurementId:c},h,p,e)}async function bb(i,{throttleEndTimeMillis:e,backoffCount:n},r,o=_b){var c;const{appId:h,measurementId:p}=i;try{await CR(r,e)}catch(g){if(p)return ai.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${p} provided in the "measurementId" field in the local Firebase config. [${g==null?void 0:g.message}]`),{appId:h,measurementId:p};throw g}try{const g=await TR(i);return o.deleteThrottleMetadata(h),g}catch(g){const y=g;if(!IR(y)){if(o.deleteThrottleMetadata(h),p)return ai.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${p} provided in the "measurementId" field in the local Firebase config. [${y==null?void 0:y.message}]`),{appId:h,measurementId:p};throw g}const w=Number((c=y==null?void 0:y.customData)===null||c===void 0?void 0:c.httpStatus)===503?Pv(n,o.intervalMillis,xR):Pv(n,o.intervalMillis),x={throttleEndTimeMillis:Date.now()+w,backoffCount:n+1};return o.setThrottleMetadata(h,x),ai.debug(`Calling attemptFetch again in ${w} millis`),bb(i,x,r,o)}}function CR(i,e){return new Promise((n,r)=>{const o=Math.max(e-Date.now(),0),c=setTimeout(n,o);i.addEventListener(()=>{clearTimeout(c),r(wi.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function IR(i){if(!(i instanceof ss)||!i.customData)return!1;const e=Number(i.customData.httpStatus);return e===429||e===500||e===503||e===504}class NR{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function kR(i,e,n,r,o){if(o&&o.global){i("event",n,r);return}else{const c=await e,h=Object.assign(Object.assign({},r),{send_to:c});i("event",n,h)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DR(){if(X_())try{await W_()}catch(i){return ai.warn(wi.create("indexeddb-unavailable",{errorInfo:i==null?void 0:i.toString()}).message),!1}else return ai.warn(wi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function jR(i,e,n,r,o,c,h){var p;const g=RR(i);g.then(P=>{n[P.measurementId]=P.appId,i.options.measurementId&&P.measurementId!==i.options.measurementId&&ai.warn(`The measurement ID in the local Firebase config (${i.options.measurementId}) does not match the measurement ID fetched from the server (${P.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(P=>ai.error(P)),e.push(g);const y=DR().then(P=>{if(P)return r.getId()}),[w,x]=await Promise.all([g,y]);wR(c)||pR(c,w.measurementId),o("js",new Date);const A=(p=h==null?void 0:h.config)!==null&&p!==void 0?p:{};return A[cR]="firebase",A.update=!0,x!=null&&(A[lR]=x),o("config",w.measurementId,A),w.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(e){this.app=e}_delete(){return delete vc[this.app.options.appId],Promise.resolve()}}let vc={},Kv=[];const Yv={};let Am="dataLayer",MR="gtag",Qv,wb,$v=!1;function LR(){const i=[];if(G_()&&i.push("This is a browser extension environment."),nA()||i.push("Cookies are not available."),i.length>0){const e=i.map((r,o)=>`(${o+1}) ${r}`).join(" "),n=wi.create("invalid-analytics-context",{errorInfo:e});ai.warn(n.message)}}function VR(i,e,n){LR();const r=i.options.appId;if(!r)throw wi.create("no-app-id");if(!i.options.apiKey)if(i.options.measurementId)ai.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${i.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw wi.create("no-api-key");if(vc[r]!=null)throw wi.create("already-exists",{id:r});if(!$v){gR(Am);const{wrappedGtag:c,gtagCore:h}=bR(vc,Kv,Yv,Am,MR);wb=c,Qv=h,$v=!0}return vc[r]=jR(i,Kv,Yv,e,Qv,Am,n),new OR(i)}function PR(i=pp()){i=Hn(i);const e=$a(i,Dd);return e.isInitialized()?e.getImmediate():UR(i)}function UR(i,e={}){const n=$a(i,Dd);if(n.isInitialized()){const o=n.getImmediate();if(na(e,n.getOptions()))return o;throw wi.create("already-initialized")}return n.initialize({options:e})}function BR(i,e,n,r){i=Hn(i),kR(wb,vc[i.app.options.appId],e,n,r).catch(o=>ai.error(o))}const Jv="@firebase/analytics",e1="0.10.17";function zR(){Is(new ts(Dd,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("installations-internal").getImmediate();return VR(r,o,n)},"PUBLIC")),Is(new ts("analytics-internal",i,"PRIVATE")),Vi(Jv,e1),Vi(Jv,e1,"esm2017");function i(e){try{const n=e.getProvider(Dd).getImmediate();return{logEvent:(r,o,c)=>BR(n,r,o,c)}}catch(n){throw wi.create("interop-component-reg-failed",{reason:n})}}}zR();function wp(i,e){var n={};for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&e.indexOf(r)<0&&(n[r]=i[r]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(i);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(i,r[o])&&(n[r[o]]=i[r[o]]);return n}function xb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const FR=xb,Eb=new Qa("auth","Firebase",xb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jd=new eh("@firebase/auth");function HR(i,...e){jd.logLevel<=Je.WARN&&jd.warn(`Auth (${ol}): ${i}`,...e)}function yd(i,...e){jd.logLevel<=Je.ERROR&&jd.error(`Auth (${ol}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ns(i,...e){throw xp(i,...e)}function Es(i,...e){return xp(i,...e)}function Sb(i,e,n){const r=Object.assign(Object.assign({},FR()),{[e]:n});return new Qa("auth","Firebase",r).create(e,{appName:i.name})}function dr(i){return Sb(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function xp(i,...e){if(typeof i!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=i.name),i._errorFactory.create(n,...r)}return Eb.create(i,...e)}function Le(i,e,...n){if(!i)throw xp(e,...n)}function lr(i){const e="INTERNAL ASSERTION FAILED: "+i;throw yd(e),new Error(e)}function gr(i,e){i||lr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fm(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.href)||""}function qR(){return t1()==="http:"||t1()==="https:"}function t1(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(qR()||G_()||"connection"in navigator)?navigator.onLine:!0}function XR(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(e,n){this.shortDelay=e,this.longDelay=n,gr(n>e,"Short delay should be less than long delay!"),this.isMobile=YS()||JS()}get(){return GR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ep(i,e){gr(i.emulator,"Emulator should always be set here");const{url:n}=i.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ab{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;lr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;lr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;lr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],KR=new Fc(3e4,6e4);function ua(i,e){return i.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:i.tenantId}):e}async function da(i,e,n,r,o={}){return Tb(i,o,async()=>{let c={},h={};r&&(e==="GET"?h=r:c={body:JSON.stringify(r)});const p=zc(Object.assign({key:i.config.apiKey},h)).slice(1),g=await i._getAdditionalHeaders();g["Content-Type"]="application/json",i.languageCode&&(g["X-Firebase-Locale"]=i.languageCode);const y=Object.assign({method:e,headers:g},c);return $S()||(y.referrerPolicy="no-referrer"),i.emulatorConfig&&al(i.emulatorConfig.host)&&(y.credentials="include"),Ab.fetch()(await Rb(i,i.config.apiHost,n,p),y)})}async function Tb(i,e,n){i._canInitEmulator=!1;const r=Object.assign(Object.assign({},WR),e);try{const o=new QR(i),c=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const h=await c.json();if("needConfirmation"in h)throw cd(i,"account-exists-with-different-credential",h);if(c.ok&&!("errorMessage"in h))return h;{const p=c.ok?h.errorMessage:h.error.message,[g,y]=p.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw cd(i,"credential-already-in-use",h);if(g==="EMAIL_EXISTS")throw cd(i,"email-already-in-use",h);if(g==="USER_DISABLED")throw cd(i,"user-disabled",h);const w=r[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw Sb(i,w,y);ns(i,w)}}catch(o){if(o instanceof ss)throw o;ns(i,"network-request-failed",{message:String(o)})}}async function Hc(i,e,n,r,o={}){const c=await da(i,e,n,r,o);return"mfaPendingCredential"in c&&ns(i,"multi-factor-auth-required",{_serverResponse:c}),c}async function Rb(i,e,n,r){const o=`${e}${n}?${r}`,c=i,h=c.config.emulator?Ep(i.config,o):`${i.config.apiScheme}://${o}`;return ZR.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(h).toString():h}function YR(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class QR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Es(this.auth,"network-request-failed")),KR.get())})}}function cd(i,e,n){const r={appName:i.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const o=Es(i,e,r);return o.customData._tokenResponse=n,o}function n1(i){return i!==void 0&&i.enterprise!==void 0}class $R{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return YR(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function JR(i,e){return da(i,"GET","/v2/recaptchaConfig",ua(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eC(i,e){return da(i,"POST","/v1/accounts:delete",e)}async function Od(i,e){return da(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _c(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function tC(i,e=!1){const n=Hn(i),r=await n.getIdToken(e),o=Sp(r);Le(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,h=c==null?void 0:c.sign_in_provider;return{claims:o,token:r,authTime:_c(Tm(o.auth_time)),issuedAtTime:_c(Tm(o.iat)),expirationTime:_c(Tm(o.exp)),signInProvider:h||null,signInSecondFactor:(c==null?void 0:c.sign_in_second_factor)||null}}function Tm(i){return Number(i)*1e3}function Sp(i){const[e,n,r]=i.split(".");if(e===void 0||n===void 0||r===void 0)return yd("JWT malformed, contained fewer than 3 sections"),null;try{const o=U_(n);return o?JSON.parse(o):(yd("Failed to decode base64 JWT payload"),null)}catch(o){return yd("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function i1(i){const e=Sp(i);return Le(e,"internal-error"),Le(typeof e.exp<"u","internal-error"),Le(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cc(i,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ss&&nC(r)&&i.auth.currentUser===i&&await i.auth.signOut(),r}}function nC({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const o=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=_c(this.lastLoginAt),this.creationTime=_c(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Md(i){var e;const n=i.auth,r=await i.getIdToken(),o=await Cc(i,Od(n,{idToken:r}));Le(o==null?void 0:o.users.length,n,"internal-error");const c=o.users[0];i._notifyReloadListener(c);const h=!((e=c.providerUserInfo)===null||e===void 0)&&e.length?Cb(c.providerUserInfo):[],p=rC(i.providerData,h),g=i.isAnonymous,y=!(i.email&&c.passwordHash)&&!(p!=null&&p.length),w=g?y:!1,x={uid:c.localId,displayName:c.displayName||null,photoURL:c.photoUrl||null,email:c.email||null,emailVerified:c.emailVerified||!1,phoneNumber:c.phoneNumber||null,tenantId:c.tenantId||null,providerData:p,metadata:new Hm(c.createdAt,c.lastLoginAt),isAnonymous:w};Object.assign(i,x)}async function sC(i){const e=Hn(i);await Md(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function rC(i,e){return[...i.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function Cb(i){return i.map(e=>{var{providerId:n}=e,r=wp(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aC(i,e){const n=await Tb(i,{},async()=>{const r=zc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:c}=i.config,h=await Rb(i,o,"/v1/token",`key=${c}`),p=await i._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:p,body:r};return i.emulatorConfig&&al(i.emulatorConfig.host)&&(g.credentials="include"),Ab.fetch()(h,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function oC(i,e){return da(i,"POST","/v2/accounts:revokeToken",ua(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Le(e.idToken,"internal-error"),Le(typeof e.idToken<"u","internal-error"),Le(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):i1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Le(e.length!==0,"internal-error");const n=i1(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Le(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:o,expiresIn:c}=await aC(e,n);this.updateTokensAndExpiration(r,o,Number(c))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:o,expirationTime:c}=n,h=new Yo;return r&&(Le(typeof r=="string","internal-error",{appName:e}),h.refreshToken=r),o&&(Le(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),c&&(Le(typeof c=="number","internal-error",{appName:e}),h.expirationTime=c),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Yo,this.toJSON())}_performRefresh(){return lr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gr(i,e){Le(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class $i{constructor(e){var{uid:n,auth:r,stsTokenManager:o}=e,c=wp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new iC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=c.displayName||null,this.email=c.email||null,this.emailVerified=c.emailVerified||!1,this.phoneNumber=c.phoneNumber||null,this.photoURL=c.photoURL||null,this.isAnonymous=c.isAnonymous||!1,this.tenantId=c.tenantId||null,this.providerData=c.providerData?[...c.providerData]:[],this.metadata=new Hm(c.createdAt||void 0,c.lastLoginAt||void 0)}async getIdToken(e){const n=await Cc(this,this.stsTokenManager.getToken(this.auth,e));return Le(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return tC(this,e)}reload(){return sC(this)}_assign(e){this!==e&&(Le(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new $i(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Md(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ji(this.auth.app))return Promise.reject(dr(this.auth));const e=await this.getIdToken();return await Cc(this,eC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,o,c,h,p,g,y,w;const x=(r=n.displayName)!==null&&r!==void 0?r:void 0,A=(o=n.email)!==null&&o!==void 0?o:void 0,P=(c=n.phoneNumber)!==null&&c!==void 0?c:void 0,z=(h=n.photoURL)!==null&&h!==void 0?h:void 0,H=(p=n.tenantId)!==null&&p!==void 0?p:void 0,Y=(g=n._redirectEventId)!==null&&g!==void 0?g:void 0,$=(y=n.createdAt)!==null&&y!==void 0?y:void 0,Z=(w=n.lastLoginAt)!==null&&w!==void 0?w:void 0,{uid:X,emailVerified:te,isAnonymous:le,providerData:pe,stsTokenManager:k}=n;Le(X&&k,e,"internal-error");const R=Yo.fromJSON(this.name,k);Le(typeof X=="string",e,"internal-error"),Gr(x,e.name),Gr(A,e.name),Le(typeof te=="boolean",e,"internal-error"),Le(typeof le=="boolean",e,"internal-error"),Gr(P,e.name),Gr(z,e.name),Gr(H,e.name),Gr(Y,e.name),Gr($,e.name),Gr(Z,e.name);const C=new $i({uid:X,auth:e,email:A,emailVerified:te,displayName:x,isAnonymous:le,photoURL:z,phoneNumber:P,tenantId:H,stsTokenManager:R,createdAt:$,lastLoginAt:Z});return pe&&Array.isArray(pe)&&(C.providerData=pe.map(M=>Object.assign({},M))),Y&&(C._redirectEventId=Y),C}static async _fromIdTokenResponse(e,n,r=!1){const o=new Yo;o.updateFromServerResponse(n);const c=new $i({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await Md(c),c}static async _fromGetAccountInfoResponse(e,n,r){const o=n.users[0];Le(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?Cb(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!(c!=null&&c.length),p=new Yo;p.updateFromIdToken(r);const g=new $i({uid:o.localId,auth:e,stsTokenManager:p,isAnonymous:h}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Hm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(c!=null&&c.length)};return Object.assign(g,y),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s1=new Map;function cr(i){gr(i instanceof Function,"Expected a class definition");let e=s1.get(i);return e?(gr(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,s1.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Ib.type="NONE";const r1=Ib;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vd(i,e,n){return`firebase:${i}:${e}:${n}`}class Qo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:o,name:c}=this.auth;this.fullUserKey=vd(this.userKey,o.apiKey,c),this.fullPersistenceKey=vd("persistence",o.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Od(this.auth,{idToken:e}).catch(()=>{});return n?$i._fromGetAccountInfoResponse(this.auth,n,e):null}return $i._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Qo(cr(r1),e,r);const o=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let c=o[0]||cr(r1);const h=vd(r,e.config.apiKey,e.name);let p=null;for(const y of n)try{const w=await y._get(h);if(w){let x;if(typeof w=="string"){const A=await Od(e,{idToken:w}).catch(()=>{});if(!A)break;x=await $i._fromGetAccountInfoResponse(e,A,w)}else x=$i._fromJSON(e,w);y!==c&&(p=x),c=y;break}}catch{}const g=o.filter(y=>y._shouldAllowMigration);return!c._shouldAllowMigration||!g.length?new Qo(c,e,r):(c=g[0],p&&await c._set(h,p.toJSON()),await Promise.all(n.map(async y=>{if(y!==c)try{await y._remove(h)}catch{}})),new Qo(c,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a1(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(jb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Nb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Mb(e))return"Blackberry";if(Lb(e))return"Webos";if(kb(e))return"Safari";if((e.includes("chrome/")||Db(e))&&!e.includes("edge/"))return"Chrome";if(Ob(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=i.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Nb(i=Ln()){return/firefox\//i.test(i)}function kb(i=Ln()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Db(i=Ln()){return/crios\//i.test(i)}function jb(i=Ln()){return/iemobile/i.test(i)}function Ob(i=Ln()){return/android/i.test(i)}function Mb(i=Ln()){return/blackberry/i.test(i)}function Lb(i=Ln()){return/webos/i.test(i)}function Ap(i=Ln()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function lC(i=Ln()){var e;return Ap(i)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function cC(){return eA()&&document.documentMode===10}function Vb(i=Ln()){return Ap(i)||Ob(i)||Lb(i)||Mb(i)||/windows phone/i.test(i)||jb(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pb(i,e=[]){let n;switch(i){case"Browser":n=a1(Ln());break;case"Worker":n=`${a1(Ln())}-${i}`;break;default:n=i}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ol}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=c=>new Promise((h,p)=>{try{const g=e(c);h(g)}catch(g){p(g)}});r.onAbort=n,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dC(i,e={}){return da(i,"GET","/v2/passwordPolicy",ua(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hC=6;class fC{constructor(e){var n,r,o,c;const h=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=h.minPasswordLength)!==null&&n!==void 0?n:hC,h.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=h.maxPasswordLength),h.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=h.containsLowercaseCharacter),h.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=h.containsUppercaseCharacter),h.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=h.containsNumericCharacter),h.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=h.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(c=e.forceUpgradeOnSignin)!==null&&c!==void 0?c:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,o,c,h,p;const g={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,g),this.validatePasswordCharacterOptions(e,g),g.isValid&&(g.isValid=(n=g.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),g.isValid&&(g.isValid=(r=g.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),g.isValid&&(g.isValid=(o=g.containsLowercaseLetter)!==null&&o!==void 0?o:!0),g.isValid&&(g.isValid=(c=g.containsUppercaseLetter)!==null&&c!==void 0?c:!0),g.isValid&&(g.isValid=(h=g.containsNumericCharacter)!==null&&h!==void 0?h:!0),g.isValid&&(g.isValid=(p=g.containsNonAlphanumericCharacter)!==null&&p!==void 0?p:!0),g}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,o,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(e,n,r,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new o1(this),this.idTokenSubscription=new o1(this),this.beforeStateQueue=new uC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Eb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=cr(n)),this._initializationPromise=this.queue(async()=>{var r,o,c;if(!this._deleted&&(this.persistenceManager=await Qo.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((c=this.currentUser)===null||c===void 0?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Od(this,{idToken:e}),r=await $i._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(ji(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(p=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(p,p))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let o=r,c=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,p=o==null?void 0:o._redirectEventId,g=await this.tryRedirectSignIn(e);(!h||h===p)&&(g!=null&&g.user)&&(o=g.user,c=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(c)try{await this.beforeStateQueue.runMiddleware(o)}catch(h){o=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Le(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Md(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=XR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ji(this.app))return Promise.reject(dr(this));const n=e?Hn(e):null;return n&&Le(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Le(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ji(this.app)?Promise.reject(dr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ji(this.app)?Promise.reject(dr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(cr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await dC(this),n=new fC(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Qa("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await oC(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&cr(e)||this._popupRedirectResolver;Le(n,this,"argument-error"),this.redirectPersistenceManager=await Qo.create(this,[cr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,o){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let h=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(Le(p,this,"internal-error"),p.then(()=>{h||c(this.currentUser)}),typeof n=="function"){const g=e.addObserver(n,r,o);return()=>{h=!0,g()}}else{const g=e.addObserver(n);return()=>{h=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Pb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const o=await this._getAppCheckToken();return o&&(n["X-Firebase-AppCheck"]=o),n}async _getAppCheckToken(){var e;if(ji(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&HR(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Ja(i){return Hn(i)}class o1{constructor(e){this.auth=e,this.observer=null,this.addObserver=oA(n=>this.observer=n)}get next(){return Le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ih={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function pC(i){ih=i}function Ub(i){return ih.loadJS(i)}function gC(){return ih.recaptchaEnterpriseScript}function yC(){return ih.gapiScript}function vC(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class _C{constructor(){this.enterprise=new bC}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class bC{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const wC="recaptcha-enterprise",Bb="NO_RECAPTCHA";class xC{constructor(e){this.type=wC,this.auth=Ja(e)}async verify(e="verify",n=!1){async function r(c){if(!n){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(h,p)=>{JR(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const y=new $R(g);return c.tenantId==null?c._agentRecaptchaConfig=y:c._tenantRecaptchaConfigs[c.tenantId]=y,h(y.siteKey)}}).catch(g=>{p(g)})})}function o(c,h,p){const g=window.grecaptcha;n1(g)?g.enterprise.ready(()=>{g.enterprise.execute(c,{action:e}).then(y=>{h(y)}).catch(()=>{h(Bb)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new _C().execute("siteKey",{action:"verify"}):new Promise((c,h)=>{r(this.auth).then(p=>{if(!n&&n1(window.grecaptcha))o(p,c,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let g=gC();g.length!==0&&(g+=p),Ub(g).then(()=>{o(p,c,h)}).catch(y=>{h(y)})}}).catch(p=>{h(p)})})}}async function l1(i,e,n,r=!1,o=!1){const c=new xC(i);let h;if(o)h=Bb;else try{h=await c.verify(n)}catch{h=await c.verify(n,!0)}const p=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const g=p.phoneEnrollmentInfo.phoneNumber,y=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:y,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const g=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return r?Object.assign(p,{captchaResp:h}):Object.assign(p,{captchaResponse:h}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function qm(i,e,n,r,o){var c;if(!((c=i._getRecaptchaConfig())===null||c===void 0)&&c.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const h=await l1(i,e,n,n==="getOobCode");return r(i,h)}else return r(i,e).catch(async h=>{if(h.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const p=await l1(i,e,n,n==="getOobCode");return r(i,p)}else return Promise.reject(h)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EC(i,e){const n=$a(i,"auth");if(n.isInitialized()){const o=n.getImmediate(),c=n.getOptions();if(na(c,e??{}))return o;ns(o,"already-initialized")}return n.initialize({options:e})}function SC(i,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(cr);e!=null&&e.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function AC(i,e,n){const r=Ja(i);Le(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,c=zb(e),{host:h,port:p}=TC(e),g=p===null?"":`:${p}`,y={url:`${c}//${h}${g}/`},w=Object.freeze({host:h,port:p,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){Le(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Le(na(y,r.config.emulator)&&na(w,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=y,r.emulatorConfig=w,r.settings.appVerificationDisabledForTesting=!0,al(h)?(H_(`${c}//${h}${g}`),q_("Auth",!0)):RC()}function zb(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function TC(i){const e=zb(i),n=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const c=o[1];return{host:c,port:c1(r.substr(c.length+1))}}else{const[c,h]=r.split(":");return{host:c,port:c1(h)}}}function c1(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function RC(){function i(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return lr("not implemented")}_getIdTokenResponse(e){return lr("not implemented")}_linkToIdToken(e,n){return lr("not implemented")}_getReauthenticationResolver(e){return lr("not implemented")}}async function CC(i,e){return da(i,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IC(i,e){return Hc(i,"POST","/v1/accounts:signInWithPassword",ua(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NC(i,e){return Hc(i,"POST","/v1/accounts:signInWithEmailLink",ua(i,e))}async function kC(i,e){return Hc(i,"POST","/v1/accounts:signInWithEmailLink",ua(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic extends Tp{constructor(e,n,r,o=null){super("password",r),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new Ic(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Ic(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return qm(e,n,"signInWithPassword",IC);case"emailLink":return NC(e,{email:this._email,oobCode:this._password});default:ns(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return qm(e,r,"signUpPassword",CC);case"emailLink":return kC(e,{idToken:n,email:this._email,oobCode:this._password});default:ns(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $o(i,e){return Hc(i,"POST","/v1/accounts:signInWithIdp",ua(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DC="http://localhost";class Xa extends Tp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Xa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ns("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o}=n,c=wp(n,["providerId","signInMethod"]);if(!r||!o)return null;const h=new Xa(r,o);return h.idToken=c.idToken||void 0,h.accessToken=c.accessToken||void 0,h.secret=c.secret,h.nonce=c.nonce,h.pendingToken=c.pendingToken||null,h}_getIdTokenResponse(e){const n=this.buildRequest();return $o(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,$o(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,$o(e,n)}buildRequest(){const e={requestUri:DC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=zc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jC(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function OC(i){const e=uc(dc(i)).link,n=e?uc(dc(e)).deep_link_id:null,r=uc(dc(i)).deep_link_id;return(r?uc(dc(r)).link:null)||r||n||e||i}class Rp{constructor(e){var n,r,o,c,h,p;const g=uc(dc(e)),y=(n=g.apiKey)!==null&&n!==void 0?n:null,w=(r=g.oobCode)!==null&&r!==void 0?r:null,x=jC((o=g.mode)!==null&&o!==void 0?o:null);Le(y&&w&&x,"argument-error"),this.apiKey=y,this.operation=x,this.code=w,this.continueUrl=(c=g.continueUrl)!==null&&c!==void 0?c:null,this.languageCode=(h=g.lang)!==null&&h!==void 0?h:null,this.tenantId=(p=g.tenantId)!==null&&p!==void 0?p:null}static parseLink(e){const n=OC(e);try{return new Rp(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(){this.providerId=ll.PROVIDER_ID}static credential(e,n){return Ic._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Rp.parseLink(n);return Le(r,"argument-error"),Ic._fromEmailAndCode(e,r.code,r.tenantId)}}ll.PROVIDER_ID="password";ll.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ll.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fb{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc extends Fb{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr extends qc{constructor(){super("facebook.com")}static credential(e){return Xa._fromParams({providerId:Wr.PROVIDER_ID,signInMethod:Wr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wr.credentialFromTaggedObject(e)}static credentialFromError(e){return Wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Wr.credential(e.oauthAccessToken)}catch{return null}}}Wr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Wr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr extends qc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Xa._fromParams({providerId:Zr.PROVIDER_ID,signInMethod:Zr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Zr.credentialFromTaggedObject(e)}static credentialFromError(e){return Zr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Zr.credential(n,r)}catch{return null}}}Zr.GOOGLE_SIGN_IN_METHOD="google.com";Zr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr extends qc{constructor(){super("github.com")}static credential(e){return Xa._fromParams({providerId:Kr.PROVIDER_ID,signInMethod:Kr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Kr.credentialFromTaggedObject(e)}static credentialFromError(e){return Kr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Kr.credential(e.oauthAccessToken)}catch{return null}}}Kr.GITHUB_SIGN_IN_METHOD="github.com";Kr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr extends qc{constructor(){super("twitter.com")}static credential(e,n){return Xa._fromParams({providerId:Yr.PROVIDER_ID,signInMethod:Yr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Yr.credentialFromTaggedObject(e)}static credentialFromError(e){return Yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Yr.credential(n,r)}catch{return null}}}Yr.TWITTER_SIGN_IN_METHOD="twitter.com";Yr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MC(i,e){return Hc(i,"POST","/v1/accounts:signUp",ua(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,o=!1){const c=await $i._fromIdTokenResponse(e,r,o),h=u1(r);return new Wa({user:c,providerId:h,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const o=u1(r);return new Wa({user:e,providerId:o,_tokenResponse:r,operationType:n})}}function u1(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld extends ss{constructor(e,n,r,o){var c;super(n.code,n.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,Ld.prototype),this.customData={appName:e.name,tenantId:(c=e.tenantId)!==null&&c!==void 0?c:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,o){return new Ld(e,n,r,o)}}function Hb(i,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(i):n._getIdTokenResponse(i)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Ld._fromErrorAndOperation(i,c,e,r):c})}async function LC(i,e,n=!1){const r=await Cc(i,e._linkToIdToken(i.auth,await i.getIdToken()),n);return Wa._forOperation(i,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VC(i,e,n=!1){const{auth:r}=i;if(ji(r.app))return Promise.reject(dr(r));const o="reauthenticate";try{const c=await Cc(i,Hb(r,o,e,i),n);Le(c.idToken,r,"internal-error");const h=Sp(c.idToken);Le(h,r,"internal-error");const{sub:p}=h;return Le(i.uid===p,r,"user-mismatch"),Wa._forOperation(i,o,c)}catch(c){throw(c==null?void 0:c.code)==="auth/user-not-found"&&ns(r,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qb(i,e,n=!1){if(ji(i.app))return Promise.reject(dr(i));const r="signIn",o=await Hb(i,r,e),c=await Wa._fromIdTokenResponse(i,r,o);return n||await i._updateCurrentUser(c.user),c}async function PC(i,e){return qb(Ja(i),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gb(i){const e=Ja(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function UC(i,e,n){if(ji(i.app))return Promise.reject(dr(i));const r=Ja(i),h=await qm(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",MC).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&Gb(i),g}),p=await Wa._fromIdTokenResponse(r,"signIn",h);return await r._updateCurrentUser(p.user),p}function BC(i,e,n){return ji(i.app)?Promise.reject(dr(i)):PC(Hn(i),ll.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Gb(i),r})}function zC(i,e,n,r){return Hn(i).onIdTokenChanged(e,n,r)}function FC(i,e,n){return Hn(i).beforeAuthStateChanged(e,n)}function Cp(i,e,n,r){return Hn(i).onAuthStateChanged(e,n,r)}function HC(i){return Hn(i).signOut()}const Vd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Vd,"1"),this.storage.removeItem(Vd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qC=1e3,GC=10;class Wb extends Xb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Vb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),o=this.localCache[n];r!==o&&e(n,o,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((h,p,g)=>{this.notifyListeners(h,g)});return}const r=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(r);!n&&this.localCache[r]===h||this.notifyListeners(r,h)},c=this.storage.getItem(r);cC()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,GC):o()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},qC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Wb.type="LOCAL";const XC=Wb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zb extends Xb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Zb.type="SESSION";const Kb=Zb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WC(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const r=new sh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:o,data:c}=n.data,h=this.handlersMap[o];if(!(h!=null&&h.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const p=Array.from(h).map(async y=>y(n.origin,c)),g=await WC(p);n.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:g})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}sh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ip(i="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return i+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,h;return new Promise((p,g)=>{const y=Ip("",20);o.port1.start();const w=setTimeout(()=>{g(new Error("unsupported_event"))},r);h={messageChannel:o,onMessage(x){const A=x;if(A.data.eventId===y)switch(A.data.status){case"ack":clearTimeout(w),c=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),p(A.data.response);break;default:clearTimeout(w),clearTimeout(c),g(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:y,data:n},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ss(){return window}function KC(i){Ss().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yb(){return typeof Ss().WorkerGlobalScope<"u"&&typeof Ss().importScripts=="function"}async function YC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function QC(){var i;return((i=navigator==null?void 0:navigator.serviceWorker)===null||i===void 0?void 0:i.controller)||null}function $C(){return Yb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qb="firebaseLocalStorageDb",JC=1,Pd="firebaseLocalStorage",$b="fbase_key";class Gc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function rh(i,e){return i.transaction([Pd],e?"readwrite":"readonly").objectStore(Pd)}function eI(){const i=indexedDB.deleteDatabase(Qb);return new Gc(i).toPromise()}function Gm(){const i=indexedDB.open(Qb,JC);return new Promise((e,n)=>{i.addEventListener("error",()=>{n(i.error)}),i.addEventListener("upgradeneeded",()=>{const r=i.result;try{r.createObjectStore(Pd,{keyPath:$b})}catch(o){n(o)}}),i.addEventListener("success",async()=>{const r=i.result;r.objectStoreNames.contains(Pd)?e(r):(r.close(),await eI(),e(await Gm()))})})}async function d1(i,e,n){const r=rh(i,!0).put({[$b]:e,value:n});return new Gc(r).toPromise()}async function tI(i,e){const n=rh(i,!1).get(e),r=await new Gc(n).toPromise();return r===void 0?null:r.value}function h1(i,e){const n=rh(i,!0).delete(e);return new Gc(n).toPromise()}const nI=800,iI=3;class Jb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Gm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>iI)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Yb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=sh._getInstance($C()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await YC(),!this.activeServiceWorker)return;this.sender=new ZC(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||QC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Gm();return await d1(e,Vd,"1"),await h1(e,Vd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>d1(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>tI(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>h1(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const c=rh(o,!1).getAll();return new Gc(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:c}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),nI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Jb.type="LOCAL";const sI=Jb;new Fc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rI(i,e){return e?cr(e):(Le(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np extends Tp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return $o(e,this._buildIdpRequest())}_linkToIdToken(e,n){return $o(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return $o(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function aI(i){return qb(i.auth,new Np(i),i.bypassAuthState)}function oI(i){const{auth:e,user:n}=i;return Le(n,e,"internal-error"),VC(n,new Np(i),i.bypassAuthState)}async function lI(i){const{auth:e,user:n}=i;return Le(n,e,"internal-error"),LC(n,new Np(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{constructor(e,n,r,o,c=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:o,tenantId:c,error:h,type:p}=e;if(h){this.reject(h);return}const g={auth:this.auth,requestUri:n,sessionId:r,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return aI;case"linkViaPopup":case"linkViaRedirect":return lI;case"reauthViaPopup":case"reauthViaRedirect":return oI;default:ns(this.auth,"internal-error")}}resolve(e){gr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){gr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cI=new Fc(2e3,1e4);class Ko extends ew{constructor(e,n,r,o,c){super(e,n,o,c),this.provider=r,this.authWindow=null,this.pollId=null,Ko.currentPopupAction&&Ko.currentPopupAction.cancel(),Ko.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Le(e,this.auth,"internal-error"),e}async onExecution(){gr(this.filter.length===1,"Popup operations only handle one event");const e=Ip();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Es(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Es(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ko.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Es(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,cI.get())};e()}}Ko.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uI="pendingRedirect",_d=new Map;class dI extends ew{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=_d.get(this.auth._key());if(!e){try{const r=await hI(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}_d.set(this.auth._key(),e)}return this.bypassAuthState||_d.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function hI(i,e){const n=pI(e),r=mI(i);if(!await r._isAvailable())return!1;const o=await r._get(n)==="true";return await r._remove(n),o}function fI(i,e){_d.set(i._key(),e)}function mI(i){return cr(i._redirectPersistence)}function pI(i){return vd(uI,i.config.apiKey,i.name)}async function gI(i,e,n=!1){if(ji(i.app))return Promise.reject(dr(i));const r=Ja(i),o=rI(r,e),h=await new dI(r,o,n).execute();return h&&!n&&(delete h.user._redirectEventId,await r._persistUserIfCurrent(h.user),await r._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yI=10*60*1e3;class vI{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!_I(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!tw(e)){const o=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Es(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=yI&&this.cachedEventUids.clear(),this.cachedEventUids.has(f1(e))}saveEventToCache(e){this.cachedEventUids.add(f1(e)),this.lastProcessedEventTime=Date.now()}}function f1(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function tw({type:i,error:e}){return i==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function _I(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return tw(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bI(i,e={}){return da(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,xI=/^https?/;async function EI(i){if(i.config.emulator)return;const{authorizedDomains:e}=await bI(i);for(const n of e)try{if(SI(n))return}catch{}ns(i,"unauthorized-domain")}function SI(i){const e=Fm(),{protocol:n,hostname:r}=new URL(e);if(i.startsWith("chrome-extension://")){const h=new URL(i);return h.hostname===""&&r===""?n==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&h.hostname===r}if(!xI.test(n))return!1;if(wI.test(i))return r===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AI=new Fc(3e4,6e4);function m1(){const i=Ss().___jsl;if(i!=null&&i.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let n=0;n<i.CP.length;n++)i.CP[n]=null}}function TI(i){return new Promise((e,n)=>{var r,o,c;function h(){m1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{m1(),n(Es(i,"network-request-failed"))},timeout:AI.get()})}if(!((o=(r=Ss().gapi)===null||r===void 0?void 0:r.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((c=Ss().gapi)===null||c===void 0)&&c.load)h();else{const p=vC("iframefcb");return Ss()[p]=()=>{gapi.load?h():n(Es(i,"network-request-failed"))},Ub(`${yC()}?onload=${p}`).catch(g=>n(g))}}).catch(e=>{throw bd=null,e})}let bd=null;function RI(i){return bd=bd||TI(i),bd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CI=new Fc(5e3,15e3),II="__/auth/iframe",NI="emulator/auth/iframe",kI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},DI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function jI(i){const e=i.config;Le(e.authDomain,i,"auth-domain-config-required");const n=e.emulator?Ep(e,NI):`https://${i.config.authDomain}/${II}`,r={apiKey:e.apiKey,appName:i.name,v:ol},o=DI.get(i.config.apiHost);o&&(r.eid=o);const c=i._getFrameworks();return c.length&&(r.fw=c.join(",")),`${n}?${zc(r).slice(1)}`}async function OI(i){const e=await RI(i),n=Ss().gapi;return Le(n,i,"internal-error"),e.open({where:document.body,url:jI(i),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:kI,dontclear:!0},r=>new Promise(async(o,c)=>{await r.restyle({setHideOnLeave:!1});const h=Es(i,"network-request-failed"),p=Ss().setTimeout(()=>{c(h)},CI.get());function g(){Ss().clearTimeout(p),o(r)}r.ping(g).then(g,()=>{c(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},LI=500,VI=600,PI="_blank",UI="http://localhost";class p1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function BI(i,e,n,r=LI,o=VI){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-r)/2,0).toString();let p="";const g=Object.assign(Object.assign({},MI),{width:r.toString(),height:o.toString(),top:c,left:h}),y=Ln().toLowerCase();n&&(p=Db(y)?PI:n),Nb(y)&&(e=e||UI,g.scrollbars="yes");const w=Object.entries(g).reduce((A,[P,z])=>`${A}${P}=${z},`,"");if(lC(y)&&p!=="_self")return zI(e||"",p),new p1(null);const x=window.open(e||"",p,w);Le(x,i,"popup-blocked");try{x.focus()}catch{}return new p1(x)}function zI(i,e){const n=document.createElement("a");n.href=i,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FI="__/auth/handler",HI="emulator/auth/handler",qI=encodeURIComponent("fac");async function g1(i,e,n,r,o,c){Le(i.config.authDomain,i,"auth-domain-config-required"),Le(i.config.apiKey,i,"invalid-api-key");const h={apiKey:i.config.apiKey,appName:i.name,authType:n,redirectUrl:r,v:ol,eventId:o};if(e instanceof Fb){e.setDefaultLanguage(i.languageCode),h.providerId=e.providerId||"",aA(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[w,x]of Object.entries({}))h[w]=x}if(e instanceof qc){const w=e.getScopes().filter(x=>x!=="");w.length>0&&(h.scopes=w.join(","))}i.tenantId&&(h.tid=i.tenantId);const p=h;for(const w of Object.keys(p))p[w]===void 0&&delete p[w];const g=await i._getAppCheckToken(),y=g?`#${qI}=${encodeURIComponent(g)}`:"";return`${GI(i)}?${zc(p).slice(1)}${y}`}function GI({config:i}){return i.emulator?Ep(i,HI):`https://${i.authDomain}/${FI}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rm="webStorageSupport";class XI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Kb,this._completeRedirectFn=gI,this._overrideRedirectResult=fI}async _openPopup(e,n,r,o){var c;gr((c=this.eventManagers[e._key()])===null||c===void 0?void 0:c.manager,"_initialize() not called before _openPopup()");const h=await g1(e,n,r,Fm(),o);return BI(e,h,Ip())}async _openRedirect(e,n,r,o){await this._originValidation(e);const c=await g1(e,n,r,Fm(),o);return KC(c),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:c}=this.eventManagers[n];return o?Promise.resolve(o):(gr(c,"If manager is not set, promise should be"),c)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await OI(e),r=new vI(e);return n.register("authEvent",o=>(Le(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Rm,{type:Rm},o=>{var c;const h=(c=o==null?void 0:o[0])===null||c===void 0?void 0:c[Rm];h!==void 0&&n(!!h),ns(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=EI(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Vb()||kb()||Ap()}}const WI=XI;var y1="@firebase/auth",v1="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KI(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function YI(i){Is(new ts("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:h,authDomain:p}=r.options;Le(h&&!h.includes(":"),"invalid-api-key",{appName:r.name});const g={apiKey:h,authDomain:p,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Pb(i)},y=new mC(r,o,c,g);return SC(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Is(new ts("auth-internal",e=>{const n=Ja(e.getProvider("auth").getImmediate());return(r=>new ZI(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Vi(y1,v1,KI(i)),Vi(y1,v1,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QI=5*60,$I=F_("authIdTokenMaxAge")||QI;let _1=null;const JI=i=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>$I)return;const o=n==null?void 0:n.token;_1!==o&&(_1=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function e5(i=pp()){const e=$a(i,"auth");if(e.isInitialized())return e.getImmediate();const n=EC(i,{popupRedirectResolver:WI,persistence:[sI,XC,Kb]}),r=F_("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(r,location.origin);if(location.origin===c.origin){const h=JI(c.toString());FC(n,h,()=>h(n.currentUser)),zC(n,p=>h(p))}}const o=B_("auth");return o&&AC(n,`http://${o}`),n}function t5(){var i,e;return(e=(i=document.getElementsByTagName("head"))===null||i===void 0?void 0:i[0])!==null&&e!==void 0?e:document}pC({loadJS(i){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",i),r.onload=e,r.onerror=o=>{const c=Es("internal-error");c.customData=o,n(c)},r.type="text/javascript",r.charset="UTF-8",t5().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});YI("Browser");var b1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ea,nw;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,R){function C(){}C.prototype=R.prototype,k.D=R.prototype,k.prototype=new C,k.prototype.constructor=k,k.C=function(M,D,L){for(var N=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)N[ze-2]=arguments[ze];return R.prototype[D].apply(M,N)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(k,R,C){C||(C=0);var M=Array(16);if(typeof R=="string")for(var D=0;16>D;++D)M[D]=R.charCodeAt(C++)|R.charCodeAt(C++)<<8|R.charCodeAt(C++)<<16|R.charCodeAt(C++)<<24;else for(D=0;16>D;++D)M[D]=R[C++]|R[C++]<<8|R[C++]<<16|R[C++]<<24;R=k.g[0],C=k.g[1],D=k.g[2];var L=k.g[3],N=R+(L^C&(D^L))+M[0]+3614090360&4294967295;R=C+(N<<7&4294967295|N>>>25),N=L+(D^R&(C^D))+M[1]+3905402710&4294967295,L=R+(N<<12&4294967295|N>>>20),N=D+(C^L&(R^C))+M[2]+606105819&4294967295,D=L+(N<<17&4294967295|N>>>15),N=C+(R^D&(L^R))+M[3]+3250441966&4294967295,C=D+(N<<22&4294967295|N>>>10),N=R+(L^C&(D^L))+M[4]+4118548399&4294967295,R=C+(N<<7&4294967295|N>>>25),N=L+(D^R&(C^D))+M[5]+1200080426&4294967295,L=R+(N<<12&4294967295|N>>>20),N=D+(C^L&(R^C))+M[6]+2821735955&4294967295,D=L+(N<<17&4294967295|N>>>15),N=C+(R^D&(L^R))+M[7]+4249261313&4294967295,C=D+(N<<22&4294967295|N>>>10),N=R+(L^C&(D^L))+M[8]+1770035416&4294967295,R=C+(N<<7&4294967295|N>>>25),N=L+(D^R&(C^D))+M[9]+2336552879&4294967295,L=R+(N<<12&4294967295|N>>>20),N=D+(C^L&(R^C))+M[10]+4294925233&4294967295,D=L+(N<<17&4294967295|N>>>15),N=C+(R^D&(L^R))+M[11]+2304563134&4294967295,C=D+(N<<22&4294967295|N>>>10),N=R+(L^C&(D^L))+M[12]+1804603682&4294967295,R=C+(N<<7&4294967295|N>>>25),N=L+(D^R&(C^D))+M[13]+4254626195&4294967295,L=R+(N<<12&4294967295|N>>>20),N=D+(C^L&(R^C))+M[14]+2792965006&4294967295,D=L+(N<<17&4294967295|N>>>15),N=C+(R^D&(L^R))+M[15]+1236535329&4294967295,C=D+(N<<22&4294967295|N>>>10),N=R+(D^L&(C^D))+M[1]+4129170786&4294967295,R=C+(N<<5&4294967295|N>>>27),N=L+(C^D&(R^C))+M[6]+3225465664&4294967295,L=R+(N<<9&4294967295|N>>>23),N=D+(R^C&(L^R))+M[11]+643717713&4294967295,D=L+(N<<14&4294967295|N>>>18),N=C+(L^R&(D^L))+M[0]+3921069994&4294967295,C=D+(N<<20&4294967295|N>>>12),N=R+(D^L&(C^D))+M[5]+3593408605&4294967295,R=C+(N<<5&4294967295|N>>>27),N=L+(C^D&(R^C))+M[10]+38016083&4294967295,L=R+(N<<9&4294967295|N>>>23),N=D+(R^C&(L^R))+M[15]+3634488961&4294967295,D=L+(N<<14&4294967295|N>>>18),N=C+(L^R&(D^L))+M[4]+3889429448&4294967295,C=D+(N<<20&4294967295|N>>>12),N=R+(D^L&(C^D))+M[9]+568446438&4294967295,R=C+(N<<5&4294967295|N>>>27),N=L+(C^D&(R^C))+M[14]+3275163606&4294967295,L=R+(N<<9&4294967295|N>>>23),N=D+(R^C&(L^R))+M[3]+4107603335&4294967295,D=L+(N<<14&4294967295|N>>>18),N=C+(L^R&(D^L))+M[8]+1163531501&4294967295,C=D+(N<<20&4294967295|N>>>12),N=R+(D^L&(C^D))+M[13]+2850285829&4294967295,R=C+(N<<5&4294967295|N>>>27),N=L+(C^D&(R^C))+M[2]+4243563512&4294967295,L=R+(N<<9&4294967295|N>>>23),N=D+(R^C&(L^R))+M[7]+1735328473&4294967295,D=L+(N<<14&4294967295|N>>>18),N=C+(L^R&(D^L))+M[12]+2368359562&4294967295,C=D+(N<<20&4294967295|N>>>12),N=R+(C^D^L)+M[5]+4294588738&4294967295,R=C+(N<<4&4294967295|N>>>28),N=L+(R^C^D)+M[8]+2272392833&4294967295,L=R+(N<<11&4294967295|N>>>21),N=D+(L^R^C)+M[11]+1839030562&4294967295,D=L+(N<<16&4294967295|N>>>16),N=C+(D^L^R)+M[14]+4259657740&4294967295,C=D+(N<<23&4294967295|N>>>9),N=R+(C^D^L)+M[1]+2763975236&4294967295,R=C+(N<<4&4294967295|N>>>28),N=L+(R^C^D)+M[4]+1272893353&4294967295,L=R+(N<<11&4294967295|N>>>21),N=D+(L^R^C)+M[7]+4139469664&4294967295,D=L+(N<<16&4294967295|N>>>16),N=C+(D^L^R)+M[10]+3200236656&4294967295,C=D+(N<<23&4294967295|N>>>9),N=R+(C^D^L)+M[13]+681279174&4294967295,R=C+(N<<4&4294967295|N>>>28),N=L+(R^C^D)+M[0]+3936430074&4294967295,L=R+(N<<11&4294967295|N>>>21),N=D+(L^R^C)+M[3]+3572445317&4294967295,D=L+(N<<16&4294967295|N>>>16),N=C+(D^L^R)+M[6]+76029189&4294967295,C=D+(N<<23&4294967295|N>>>9),N=R+(C^D^L)+M[9]+3654602809&4294967295,R=C+(N<<4&4294967295|N>>>28),N=L+(R^C^D)+M[12]+3873151461&4294967295,L=R+(N<<11&4294967295|N>>>21),N=D+(L^R^C)+M[15]+530742520&4294967295,D=L+(N<<16&4294967295|N>>>16),N=C+(D^L^R)+M[2]+3299628645&4294967295,C=D+(N<<23&4294967295|N>>>9),N=R+(D^(C|~L))+M[0]+4096336452&4294967295,R=C+(N<<6&4294967295|N>>>26),N=L+(C^(R|~D))+M[7]+1126891415&4294967295,L=R+(N<<10&4294967295|N>>>22),N=D+(R^(L|~C))+M[14]+2878612391&4294967295,D=L+(N<<15&4294967295|N>>>17),N=C+(L^(D|~R))+M[5]+4237533241&4294967295,C=D+(N<<21&4294967295|N>>>11),N=R+(D^(C|~L))+M[12]+1700485571&4294967295,R=C+(N<<6&4294967295|N>>>26),N=L+(C^(R|~D))+M[3]+2399980690&4294967295,L=R+(N<<10&4294967295|N>>>22),N=D+(R^(L|~C))+M[10]+4293915773&4294967295,D=L+(N<<15&4294967295|N>>>17),N=C+(L^(D|~R))+M[1]+2240044497&4294967295,C=D+(N<<21&4294967295|N>>>11),N=R+(D^(C|~L))+M[8]+1873313359&4294967295,R=C+(N<<6&4294967295|N>>>26),N=L+(C^(R|~D))+M[15]+4264355552&4294967295,L=R+(N<<10&4294967295|N>>>22),N=D+(R^(L|~C))+M[6]+2734768916&4294967295,D=L+(N<<15&4294967295|N>>>17),N=C+(L^(D|~R))+M[13]+1309151649&4294967295,C=D+(N<<21&4294967295|N>>>11),N=R+(D^(C|~L))+M[4]+4149444226&4294967295,R=C+(N<<6&4294967295|N>>>26),N=L+(C^(R|~D))+M[11]+3174756917&4294967295,L=R+(N<<10&4294967295|N>>>22),N=D+(R^(L|~C))+M[2]+718787259&4294967295,D=L+(N<<15&4294967295|N>>>17),N=C+(L^(D|~R))+M[9]+3951481745&4294967295,k.g[0]=k.g[0]+R&4294967295,k.g[1]=k.g[1]+(D+(N<<21&4294967295|N>>>11))&4294967295,k.g[2]=k.g[2]+D&4294967295,k.g[3]=k.g[3]+L&4294967295}r.prototype.u=function(k,R){R===void 0&&(R=k.length);for(var C=R-this.blockSize,M=this.B,D=this.h,L=0;L<R;){if(D==0)for(;L<=C;)o(this,k,L),L+=this.blockSize;if(typeof k=="string"){for(;L<R;)if(M[D++]=k.charCodeAt(L++),D==this.blockSize){o(this,M),D=0;break}}else for(;L<R;)if(M[D++]=k[L++],D==this.blockSize){o(this,M),D=0;break}}this.h=D,this.o+=R},r.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var R=1;R<k.length-8;++R)k[R]=0;var C=8*this.o;for(R=k.length-8;R<k.length;++R)k[R]=C&255,C/=256;for(this.u(k),k=Array(16),R=C=0;4>R;++R)for(var M=0;32>M;M+=8)k[C++]=this.g[R]>>>M&255;return k};function c(k,R){var C=p;return Object.prototype.hasOwnProperty.call(C,k)?C[k]:C[k]=R(k)}function h(k,R){this.h=R;for(var C=[],M=!0,D=k.length-1;0<=D;D--){var L=k[D]|0;M&&L==R||(C[D]=L,M=!1)}this.g=C}var p={};function g(k){return-128<=k&&128>k?c(k,function(R){return new h([R|0],0>R?-1:0)}):new h([k|0],0>k?-1:0)}function y(k){if(isNaN(k)||!isFinite(k))return x;if(0>k)return Y(y(-k));for(var R=[],C=1,M=0;k>=C;M++)R[M]=k/C|0,C*=4294967296;return new h(R,0)}function w(k,R){if(k.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(k.charAt(0)=="-")return Y(w(k.substring(1),R));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=y(Math.pow(R,8)),M=x,D=0;D<k.length;D+=8){var L=Math.min(8,k.length-D),N=parseInt(k.substring(D,D+L),R);8>L?(L=y(Math.pow(R,L)),M=M.j(L).add(y(N))):(M=M.j(C),M=M.add(y(N)))}return M}var x=g(0),A=g(1),P=g(16777216);i=h.prototype,i.m=function(){if(H(this))return-Y(this).m();for(var k=0,R=1,C=0;C<this.g.length;C++){var M=this.i(C);k+=(0<=M?M:4294967296+M)*R,R*=4294967296}return k},i.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(z(this))return"0";if(H(this))return"-"+Y(this).toString(k);for(var R=y(Math.pow(k,6)),C=this,M="";;){var D=te(C,R).g;C=$(C,D.j(R));var L=((0<C.g.length?C.g[0]:C.h)>>>0).toString(k);if(C=D,z(C))return L+M;for(;6>L.length;)L="0"+L;M=L+M}},i.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function z(k){if(k.h!=0)return!1;for(var R=0;R<k.g.length;R++)if(k.g[R]!=0)return!1;return!0}function H(k){return k.h==-1}i.l=function(k){return k=$(this,k),H(k)?-1:z(k)?0:1};function Y(k){for(var R=k.g.length,C=[],M=0;M<R;M++)C[M]=~k.g[M];return new h(C,~k.h).add(A)}i.abs=function(){return H(this)?Y(this):this},i.add=function(k){for(var R=Math.max(this.g.length,k.g.length),C=[],M=0,D=0;D<=R;D++){var L=M+(this.i(D)&65535)+(k.i(D)&65535),N=(L>>>16)+(this.i(D)>>>16)+(k.i(D)>>>16);M=N>>>16,L&=65535,N&=65535,C[D]=N<<16|L}return new h(C,C[C.length-1]&-2147483648?-1:0)};function $(k,R){return k.add(Y(R))}i.j=function(k){if(z(this)||z(k))return x;if(H(this))return H(k)?Y(this).j(Y(k)):Y(Y(this).j(k));if(H(k))return Y(this.j(Y(k)));if(0>this.l(P)&&0>k.l(P))return y(this.m()*k.m());for(var R=this.g.length+k.g.length,C=[],M=0;M<2*R;M++)C[M]=0;for(M=0;M<this.g.length;M++)for(var D=0;D<k.g.length;D++){var L=this.i(M)>>>16,N=this.i(M)&65535,ze=k.i(D)>>>16,Qe=k.i(D)&65535;C[2*M+2*D]+=N*Qe,Z(C,2*M+2*D),C[2*M+2*D+1]+=L*Qe,Z(C,2*M+2*D+1),C[2*M+2*D+1]+=N*ze,Z(C,2*M+2*D+1),C[2*M+2*D+2]+=L*ze,Z(C,2*M+2*D+2)}for(M=0;M<R;M++)C[M]=C[2*M+1]<<16|C[2*M];for(M=R;M<2*R;M++)C[M]=0;return new h(C,0)};function Z(k,R){for(;(k[R]&65535)!=k[R];)k[R+1]+=k[R]>>>16,k[R]&=65535,R++}function X(k,R){this.g=k,this.h=R}function te(k,R){if(z(R))throw Error("division by zero");if(z(k))return new X(x,x);if(H(k))return R=te(Y(k),R),new X(Y(R.g),Y(R.h));if(H(R))return R=te(k,Y(R)),new X(Y(R.g),R.h);if(30<k.g.length){if(H(k)||H(R))throw Error("slowDivide_ only works with positive integers.");for(var C=A,M=R;0>=M.l(k);)C=le(C),M=le(M);var D=pe(C,1),L=pe(M,1);for(M=pe(M,2),C=pe(C,2);!z(M);){var N=L.add(M);0>=N.l(k)&&(D=D.add(C),L=N),M=pe(M,1),C=pe(C,1)}return R=$(k,D.j(R)),new X(D,R)}for(D=x;0<=k.l(R);){for(C=Math.max(1,Math.floor(k.m()/R.m())),M=Math.ceil(Math.log(C)/Math.LN2),M=48>=M?1:Math.pow(2,M-48),L=y(C),N=L.j(R);H(N)||0<N.l(k);)C-=M,L=y(C),N=L.j(R);z(L)&&(L=A),D=D.add(L),k=$(k,N)}return new X(D,k)}i.A=function(k){return te(this,k).h},i.and=function(k){for(var R=Math.max(this.g.length,k.g.length),C=[],M=0;M<R;M++)C[M]=this.i(M)&k.i(M);return new h(C,this.h&k.h)},i.or=function(k){for(var R=Math.max(this.g.length,k.g.length),C=[],M=0;M<R;M++)C[M]=this.i(M)|k.i(M);return new h(C,this.h|k.h)},i.xor=function(k){for(var R=Math.max(this.g.length,k.g.length),C=[],M=0;M<R;M++)C[M]=this.i(M)^k.i(M);return new h(C,this.h^k.h)};function le(k){for(var R=k.g.length+1,C=[],M=0;M<R;M++)C[M]=k.i(M)<<1|k.i(M-1)>>>31;return new h(C,k.h)}function pe(k,R){var C=R>>5;R%=32;for(var M=k.g.length-C,D=[],L=0;L<M;L++)D[L]=0<R?k.i(L+C)>>>R|k.i(L+C+1)<<32-R:k.i(L+C);return new h(D,k.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,nw=r,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=y,h.fromString=w,ea=h}).apply(typeof b1<"u"?b1:typeof self<"u"?self:typeof window<"u"?window:{});var ud=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var iw,hc,sw,wd,Xm,rw,aw,ow;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,v,_){return u==Array.prototype||u==Object.prototype||(u[v]=_.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof ud=="object"&&ud];for(var v=0;v<u.length;++v){var _=u[v];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=n(this);function o(u,v){if(v)e:{var _=r;u=u.split(".");for(var T=0;T<u.length-1;T++){var G=u[T];if(!(G in _))break e;_=_[G]}u=u[u.length-1],T=_[u],v=v(T),v!=T&&v!=null&&e(_,u,{configurable:!0,writable:!0,value:v})}}function c(u,v){u instanceof String&&(u+="");var _=0,T=!1,G={next:function(){if(!T&&_<u.length){var ee=_++;return{value:v(ee,u[ee]),done:!1}}return T=!0,{done:!0,value:void 0}}};return G[Symbol.iterator]=function(){return G},G}o("Array.prototype.values",function(u){return u||function(){return c(this,function(v,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},p=this||self;function g(u){var v=typeof u;return v=v!="object"?v:u?Array.isArray(u)?"array":v:"null",v=="array"||v=="object"&&typeof u.length=="number"}function y(u){var v=typeof u;return v=="object"&&u!=null||v=="function"}function w(u,v,_){return u.call.apply(u.bind,arguments)}function x(u,v,_){if(!u)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var G=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(G,T),u.apply(v,G)}}return function(){return u.apply(v,arguments)}}function A(u,v,_){return A=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?w:x,A.apply(null,arguments)}function P(u,v){var _=Array.prototype.slice.call(arguments,1);return function(){var T=_.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function z(u,v){function _(){}_.prototype=v.prototype,u.aa=v.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(T,G,ee){for(var ye=Array(arguments.length-2),tt=2;tt<arguments.length;tt++)ye[tt-2]=arguments[tt];return v.prototype[G].apply(T,ye)}}function H(u){const v=u.length;if(0<v){const _=Array(v);for(let T=0;T<v;T++)_[T]=u[T];return _}return[]}function Y(u,v){for(let _=1;_<arguments.length;_++){const T=arguments[_];if(g(T)){const G=u.length||0,ee=T.length||0;u.length=G+ee;for(let ye=0;ye<ee;ye++)u[G+ye]=T[ye]}else u.push(T)}}class ${constructor(v,_){this.i=v,this.j=_,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function Z(u){return/^[\s\xa0]*$/.test(u)}function X(){var u=p.navigator;return u&&(u=u.userAgent)?u:""}function te(u){return te[" "](u),u}te[" "]=function(){};var le=X().indexOf("Gecko")!=-1&&!(X().toLowerCase().indexOf("webkit")!=-1&&X().indexOf("Edge")==-1)&&!(X().indexOf("Trident")!=-1||X().indexOf("MSIE")!=-1)&&X().indexOf("Edge")==-1;function pe(u,v,_){for(const T in u)v.call(_,u[T],T,u)}function k(u,v){for(const _ in u)v.call(void 0,u[_],_,u)}function R(u){const v={};for(const _ in u)v[_]=u[_];return v}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(u,v){let _,T;for(let G=1;G<arguments.length;G++){T=arguments[G];for(_ in T)u[_]=T[_];for(let ee=0;ee<C.length;ee++)_=C[ee],Object.prototype.hasOwnProperty.call(T,_)&&(u[_]=T[_])}}function D(u){var v=1;u=u.split(":");const _=[];for(;0<v&&u.length;)_.push(u.shift()),v--;return u.length&&_.push(u.join(":")),_}function L(u){p.setTimeout(()=>{throw u},0)}function N(){var u=be;let v=null;return u.g&&(v=u.g,u.g=u.g.next,u.g||(u.h=null),v.next=null),v}class ze{constructor(){this.h=this.g=null}add(v,_){const T=Qe.get();T.set(v,_),this.h?this.h.next=T:this.g=T,this.h=T}}var Qe=new $(()=>new ie,u=>u.reset());class ie{constructor(){this.next=this.g=this.h=null}set(v,_){this.h=v,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let fe,ne=!1,be=new ze,j=()=>{const u=p.Promise.resolve(void 0);fe=()=>{u.then(se)}};var se=()=>{for(var u;u=N();){try{u.h.call(u.g)}catch(_){L(_)}var v=Qe;v.j(u),100>v.h&&(v.h++,u.next=v.g,v.g=u)}ne=!1};function ge(){this.s=this.s,this.C=this.C}ge.prototype.s=!1,ge.prototype.ma=function(){this.s||(this.s=!0,this.N())},ge.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ce(u,v){this.type=u,this.g=this.target=v,this.defaultPrevented=!1}ce.prototype.h=function(){this.defaultPrevented=!0};var we=function(){if(!p.addEventListener||!Object.defineProperty)return!1;var u=!1,v=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};p.addEventListener("test",_,v),p.removeEventListener("test",_,v)}catch{}return u}();function Ie(u,v){if(ce.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=v,v=u.relatedTarget){if(le){e:{try{te(v.nodeName);var G=!0;break e}catch{}G=!1}G||(v=null)}}else _=="mouseover"?v=u.fromElement:_=="mouseout"&&(v=u.toElement);this.relatedTarget=v,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:ke[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Ie.aa.h.call(this)}}z(Ie,ce);var ke={2:"touch",3:"pen",4:"mouse"};Ie.prototype.h=function(){Ie.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var lt="closure_listenable_"+(1e6*Math.random()|0),dt=0;function qn(u,v,_,T,G){this.listener=u,this.proxy=null,this.src=v,this.type=_,this.capture=!!T,this.ha=G,this.key=++dt,this.da=this.fa=!1}function Vn(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function un(u){this.src=u,this.g={},this.h=0}un.prototype.add=function(u,v,_,T,G){var ee=u.toString();u=this.g[ee],u||(u=this.g[ee]=[],this.h++);var ye=ve(u,v,T,G);return-1<ye?(v=u[ye],_||(v.fa=!1)):(v=new qn(v,this.src,ee,!!T,G),v.fa=_,u.push(v)),v};function de(u,v){var _=v.type;if(_ in u.g){var T=u.g[_],G=Array.prototype.indexOf.call(T,v,void 0),ee;(ee=0<=G)&&Array.prototype.splice.call(T,G,1),ee&&(Vn(v),u.g[_].length==0&&(delete u.g[_],u.h--))}}function ve(u,v,_,T){for(var G=0;G<u.length;++G){var ee=u[G];if(!ee.da&&ee.listener==v&&ee.capture==!!_&&ee.ha==T)return G}return-1}var De="closure_lm_"+(1e6*Math.random()|0),qe={};function In(u,v,_,T,G){if(Array.isArray(v)){for(var ee=0;ee<v.length;ee++)In(u,v[ee],_,T,G);return null}return _=ha(_),u&&u[lt]?u.K(v,_,y(T)?!!T.capture:!1,G):$e(u,v,_,!1,T,G)}function $e(u,v,_,T,G,ee){if(!v)throw Error("Invalid event type");var ye=y(G)?!!G.capture:!!G,tt=Pi(u);if(tt||(u[De]=tt=new un(u)),_=tt.add(v,_,T,ye,ee),_.proxy)return _;if(T=wt(),_.proxy=T,T.src=u,T.listener=_,u.addEventListener)we||(G=ye),G===void 0&&(G=!1),u.addEventListener(v.toString(),T,G);else if(u.attachEvent)u.attachEvent(Ms(v.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return _}function wt(){function u(_){return v.call(u.src,u.listener,_)}const v=so;return u}function oi(u,v,_,T,G){if(Array.isArray(v))for(var ee=0;ee<v.length;ee++)oi(u,v[ee],_,T,G);else T=y(T)?!!T.capture:!!T,_=ha(_),u&&u[lt]?(u=u.i,v=String(v).toString(),v in u.g&&(ee=u.g[v],_=ve(ee,_,T,G),-1<_&&(Vn(ee[_]),Array.prototype.splice.call(ee,_,1),ee.length==0&&(delete u.g[v],u.h--)))):u&&(u=Pi(u))&&(v=u.g[v.toString()],u=-1,v&&(u=ve(v,_,T,G)),(_=-1<u?v[u]:null)&&Pn(_))}function Pn(u){if(typeof u!="number"&&u&&!u.da){var v=u.src;if(v&&v[lt])de(v.i,u);else{var _=u.type,T=u.proxy;v.removeEventListener?v.removeEventListener(_,T,u.capture):v.detachEvent?v.detachEvent(Ms(_),T):v.addListener&&v.removeListener&&v.removeListener(T),(_=Pi(v))?(de(_,u),_.h==0&&(_.src=null,v[De]=null)):Vn(u)}}}function Ms(u){return u in qe?qe[u]:qe[u]="on"+u}function so(u,v){if(u.da)u=!0;else{v=new Ie(v,this);var _=u.listener,T=u.ha||u.src;u.fa&&Pn(u),u=_.call(T,v)}return u}function Pi(u){return u=u[De],u instanceof un?u:null}var Ls="__closure_events_fn_"+(1e9*Math.random()>>>0);function ha(u){return typeof u=="function"?u:(u[Ls]||(u[Ls]=function(v){return u.handleEvent(v)}),u[Ls])}function Ct(){ge.call(this),this.i=new un(this),this.M=this,this.F=null}z(Ct,ge),Ct.prototype[lt]=!0,Ct.prototype.removeEventListener=function(u,v,_,T){oi(this,u,v,_,T)};function rt(u,v){var _,T=u.F;if(T)for(_=[];T;T=T.F)_.push(T);if(u=u.M,T=v.type||v,typeof v=="string")v=new ce(v,u);else if(v instanceof ce)v.target=v.target||u;else{var G=v;v=new ce(T,u),M(v,G)}if(G=!0,_)for(var ee=_.length-1;0<=ee;ee--){var ye=v.g=_[ee];G=Un(ye,T,!0,v)&&G}if(ye=v.g=u,G=Un(ye,T,!0,v)&&G,G=Un(ye,T,!1,v)&&G,_)for(ee=0;ee<_.length;ee++)ye=v.g=_[ee],G=Un(ye,T,!1,v)&&G}Ct.prototype.N=function(){if(Ct.aa.N.call(this),this.i){var u=this.i,v;for(v in u.g){for(var _=u.g[v],T=0;T<_.length;T++)Vn(_[T]);delete u.g[v],u.h--}}this.F=null},Ct.prototype.K=function(u,v,_,T){return this.i.add(String(u),v,!1,_,T)},Ct.prototype.L=function(u,v,_,T){return this.i.add(String(u),v,!0,_,T)};function Un(u,v,_,T){if(v=u.i.g[String(v)],!v)return!0;v=v.concat();for(var G=!0,ee=0;ee<v.length;++ee){var ye=v[ee];if(ye&&!ye.da&&ye.capture==_){var tt=ye.listener,sn=ye.ha||ye.src;ye.fa&&de(u.i,ye),G=tt.call(sn,T)!==!1&&G}}return G&&!T.defaultPrevented}function dn(u,v,_){if(typeof u=="function")_&&(u=A(u,_));else if(u&&typeof u.handleEvent=="function")u=A(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:p.setTimeout(u,v||0)}function ro(u){u.g=dn(()=>{u.g=null,u.i&&(u.i=!1,ro(u))},u.l);const v=u.h;u.h=null,u.m.apply(null,v)}class ao extends ge{constructor(v,_){super(),this.m=v,this.l=_,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:ro(this)}N(){super.N(),this.g&&(p.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Gn(u){ge.call(this),this.h=u,this.g={}}z(Gn,ge);var Vs=[];function Oe(u){pe(u.g,function(v,_){this.g.hasOwnProperty(_)&&Pn(v)},u),u.g={}}Gn.prototype.N=function(){Gn.aa.N.call(this),Oe(this)},Gn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var li=p.JSON.stringify,mt=p.JSON.parse,rs=class{stringify(u){return p.JSON.stringify(u,void 0)}parse(u){return p.JSON.parse(u,void 0)}};function oo(){}oo.prototype.h=null;function fa(u){return u.h||(u.h=u.i())}function ma(){}var ci={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ui(){ce.call(this,"d")}z(Ui,ce);function as(){ce.call(this,"c")}z(as,ce);var ui={},pa=null;function Bi(){return pa=pa||new Ct}ui.La="serverreachability";function _r(u){ce.call(this,ui.La,u)}z(_r,ce);function os(u){const v=Bi();rt(v,new _r(v))}ui.STAT_EVENT="statevent";function ga(u,v){ce.call(this,ui.STAT_EVENT,u),this.stat=v}z(ga,ce);function yt(u){const v=Bi();rt(v,new ga(v,u))}ui.Ma="timingevent";function Ft(u,v){ce.call(this,ui.Ma,u),this.size=v}z(Ft,ce);function kt(u,v){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return p.setTimeout(function(){u()},v)}function en(){this.g=!0}en.prototype.xa=function(){this.g=!1};function Ps(u,v,_,T,G,ee){u.info(function(){if(u.g)if(ee)for(var ye="",tt=ee.split("&"),sn=0;sn<tt.length;sn++){var nt=tt[sn].split("=");if(1<nt.length){var mn=nt[0];nt=nt[1];var rn=mn.split("_");ye=2<=rn.length&&rn[1]=="type"?ye+(mn+"="+nt+"&"):ye+(mn+"=redacted&")}}else ye=null;else ye=ee;return"XMLHTTP REQ ("+T+") [attempt "+G+"]: "+v+`
`+_+`
`+ye})}function fl(u,v,_,T,G,ee,ye){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+G+"]: "+v+`
`+_+`
`+ee+" "+ye})}function di(u,v,_,T){u.info(function(){return"XMLHTTP TEXT ("+v+"): "+Us(u,_)+(T?" "+T:"")})}function lo(u,v){u.info(function(){return"TIMEOUT: "+v})}en.prototype.info=function(){};function Us(u,v){if(!u.g)return v;if(!v)return null;try{var _=JSON.parse(v);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var T=_[u];if(!(2>T.length)){var G=T[1];if(Array.isArray(G)&&!(1>G.length)){var ee=G[0];if(ee!="noop"&&ee!="stop"&&ee!="close")for(var ye=1;ye<G.length;ye++)G[ye]=""}}}}return li(_)}catch{return v}}var zi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Fi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},xi;function hi(){}z(hi,oo),hi.prototype.g=function(){return new XMLHttpRequest},hi.prototype.i=function(){return{}},xi=new hi;function hn(u,v,_,T){this.j=u,this.i=v,this.l=_,this.R=T||1,this.U=new Gn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Dt}function Dt(){this.i=null,this.g="",this.h=!1}var ya={},br={};function Xn(u,v,_){u.L=1,u.v=Fs(Bn(v)),u.m=_,u.P=!0,Ei(u,null)}function Ei(u,v){u.F=Date.now(),Bs(u),u.A=Bn(u.v);var _=u.A,T=u.R;Array.isArray(T)||(T=[String(T)]),_a(_.i,"t",T),u.C=0,_=u.j.J,u.h=new Dt,u.g=su(u.j,_?v:null,!u.m),0<u.O&&(u.M=new ao(A(u.Y,u,u.g),u.O)),v=u.U,_=u.g,T=u.ca;var G="readystatechange";Array.isArray(G)||(G&&(Vs[0]=G.toString()),G=Vs);for(var ee=0;ee<G.length;ee++){var ye=In(_,G[ee],T||v.handleEvent,!1,v.h||v);if(!ye)break;v.g[ye.key]=ye}v=u.H?R(u.H):{},u.m?(u.u||(u.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,v)):(u.u="GET",u.g.ea(u.A,u.u,null,v)),os(),Ps(u.i,u.u,u.A,u.l,u.R,u.m)}hn.prototype.ca=function(u){u=u.target;const v=this.M;v&&xt(u)==3?v.j():this.Y(u)},hn.prototype.Y=function(u){try{if(u==this.g)e:{const rn=xt(this.g);var v=this.g.Ba();const Ws=this.g.Z();if(!(3>rn)&&(rn!=3||this.g&&(this.h.h||this.g.oa()||wa(this.g)))){this.J||rn!=4||v==7||(v==8||0>=Ws?os(3):os(2)),ls(this);var _=this.g.Z();this.X=_;t:if(co(this)){var T=wa(this.g);u="";var G=T.length,ee=xt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){tn(this),bn(this);var ye="";break t}this.h.i=new p.TextDecoder}for(v=0;v<G;v++)this.h.h=!0,u+=this.h.i.decode(T[v],{stream:!(ee&&v==G-1)});T.length=0,this.h.g+=u,this.C=0,ye=this.h.g}else ye=this.g.oa();if(this.o=_==200,fl(this.i,this.u,this.A,this.l,this.R,rn,_),this.o){if(this.T&&!this.K){t:{if(this.g){var tt,sn=this.g;if((tt=sn.g?sn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Z(tt)){var nt=tt;break t}}nt=null}if(_=nt)di(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Si(this,_);else{this.o=!1,this.s=3,yt(12),tn(this),bn(this);break e}}if(this.P){_=!0;let xn;for(;!this.J&&this.C<ye.length;)if(xn=va(this,ye),xn==br){rn==4&&(this.s=4,yt(14),_=!1),di(this.i,this.l,null,"[Incomplete Response]");break}else if(xn==ya){this.s=4,yt(15),di(this.i,this.l,ye,"[Invalid Chunk]"),_=!1;break}else di(this.i,this.l,xn,null),Si(this,xn);if(co(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),rn!=4||ye.length!=0||this.h.h||(this.s=1,yt(16),_=!1),this.o=this.o&&_,!_)di(this.i,this.l,ye,"[Invalid Chunked Response]"),tn(this),bn(this);else if(0<ye.length&&!this.W){this.W=!0;var mn=this.j;mn.g==this&&mn.ba&&!mn.M&&(mn.j.info("Great, no buffering proxy detected. Bytes received: "+ye.length),Ea(mn),mn.M=!0,yt(11))}}else di(this.i,this.l,ye,null),Si(this,ye);rn==4&&tn(this),this.o&&!this.J&&(rn==4?tu(this.j,this):(this.o=!1,Bs(this)))}else mo(this.g),_==400&&0<ye.indexOf("Unknown SID")?(this.s=3,yt(12)):(this.s=0,yt(13)),tn(this),bn(this)}}}catch{}finally{}};function co(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function va(u,v){var _=u.C,T=v.indexOf(`
`,_);return T==-1?br:(_=Number(v.substring(_,T)),isNaN(_)?ya:(T+=1,T+_>v.length?br:(v=v.slice(T,T+_),u.C=T+_,v)))}hn.prototype.cancel=function(){this.J=!0,tn(this)};function Bs(u){u.S=Date.now()+u.I,uo(u,u.I)}function uo(u,v){if(u.B!=null)throw Error("WatchDog timer not null");u.B=kt(A(u.ba,u),v)}function ls(u){u.B&&(p.clearTimeout(u.B),u.B=null)}hn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(lo(this.i,this.A),this.L!=2&&(os(),yt(17)),tn(this),this.s=2,bn(this)):uo(this,this.S-u)};function bn(u){u.j.G==0||u.J||tu(u.j,u)}function tn(u){ls(u);var v=u.M;v&&typeof v.ma=="function"&&v.ma(),u.M=null,Oe(u.U),u.g&&(v=u.g,u.g=null,v.abort(),v.ma())}function Si(u,v){try{var _=u.j;if(_.G!=0&&(_.g==u||wr(_.h,u))){if(!u.K&&wr(_.h,u)&&_.G==3){try{var T=_.Da.g.parse(v)}catch{T=null}if(Array.isArray(T)&&T.length==3){var G=T;if(G[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)po(_),Ut(_);else break e;yl(_),yt(18)}}else _.za=G[1],0<_.za-_.T&&37500>G[2]&&_.F&&_.v==0&&!_.C&&(_.C=kt(A(_.Za,_),6e3));if(1>=fn(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Xs(_,11)}else if((u.K||_.g==u)&&po(_),!Z(v))for(G=_.Da.g.parse(v),v=0;v<G.length;v++){let nt=G[v];if(_.T=nt[0],nt=nt[1],_.G==2)if(nt[0]=="c"){_.K=nt[1],_.ia=nt[2];const mn=nt[3];mn!=null&&(_.la=mn,_.j.info("VER="+_.la));const rn=nt[4];rn!=null&&(_.Aa=rn,_.j.info("SVER="+_.Aa));const Ws=nt[5];Ws!=null&&typeof Ws=="number"&&0<Ws&&(T=1.5*Ws,_.L=T,_.j.info("backChannelRequestTimeoutMs_="+T)),T=_;const xn=u.g;if(xn){const ps=xn.g?xn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ps){var ee=T.h;ee.g||ps.indexOf("spdy")==-1&&ps.indexOf("quic")==-1&&ps.indexOf("h2")==-1||(ee.j=ee.l,ee.g=new Set,ee.h&&(ct(ee,ee.h),ee.h=null))}if(T.D){const _l=xn.g?xn.g.getResponseHeader("X-HTTP-Session-Id"):null;_l&&(T.ya=_l,ht(T.I,T.D,_l))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),T=_;var ye=u;if(T.qa=iu(T,T.J?T.ia:null,T.W),ye.K){Wt(T.h,ye);var tt=ye,sn=T.L;sn&&(tt.I=sn),tt.B&&(ls(tt),Bs(tt)),T.g=ye}else Jc(T);0<_.i.length&&Gs(_)}else nt[0]!="stop"&&nt[0]!="close"||Xs(_,7);else _.G==3&&(nt[0]=="stop"||nt[0]=="close"?nt[0]=="stop"?Xs(_,7):He(_):nt[0]!="noop"&&_.l&&_.l.ta(nt),_.v=0)}}os(4)}catch{}}var ho=class{constructor(u,v){this.g=u,this.map=v}};function Hi(u){this.l=u||10,p.PerformanceNavigationTiming?(u=p.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(p.chrome&&p.chrome.loadTimes&&p.chrome.loadTimes()&&p.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function qi(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function fn(u){return u.h?1:u.g?u.g.size:0}function wr(u,v){return u.h?u.h==v:u.g?u.g.has(v):!1}function ct(u,v){u.g?u.g.add(v):u.h=v}function Wt(u,v){u.h&&u.h==v?u.h=null:u.g&&u.g.has(v)&&u.g.delete(v)}Hi.prototype.cancel=function(){if(this.i=Gi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Gi(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let v=u.i;for(const _ of u.g.values())v=v.concat(_.D);return v}return H(u.i)}function cs(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(g(u)){for(var v=[],_=u.length,T=0;T<_;T++)v.push(u[T]);return v}v=[],_=0;for(T in u)v[_++]=u[T];return v}function us(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(g(u)||typeof u=="string"){var v=[];u=u.length;for(var _=0;_<u;_++)v.push(_);return v}v=[],_=0;for(const T in u)v[_++]=T;return v}}}function xr(u,v){if(u.forEach&&typeof u.forEach=="function")u.forEach(v,void 0);else if(g(u)||typeof u=="string")Array.prototype.forEach.call(u,v,void 0);else for(var _=us(u),T=cs(u),G=T.length,ee=0;ee<G;ee++)v.call(void 0,T[ee],_&&_[ee],u)}var Xi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ml(u,v){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var T=u[_].indexOf("="),G=null;if(0<=T){var ee=u[_].substring(0,T);G=u[_].substring(T+1)}else ee=u[_];v(ee,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function Vt(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Vt){this.h=u.h,Ai(this,u.j),this.o=u.o,this.g=u.g,zs(this,u.s),this.l=u.l;var v=u.i,_=new Zt;_.i=v.i,v.g&&(_.g=new Map(v.g),_.h=v.h),Wn(this,_),this.m=u.m}else u&&(v=String(u).match(Xi))?(this.h=!1,Ai(this,v[1]||"",!0),this.o=wn(v[2]||""),this.g=wn(v[3]||"",!0),zs(this,v[4]),this.l=wn(v[5]||"",!0),Wn(this,v[6]||"",!0),this.m=wn(v[7]||"")):(this.h=!1,this.i=new Zt(null,this.h))}Vt.prototype.toString=function(){var u=[],v=this.j;v&&u.push(ds(v,Er,!0),":");var _=this.g;return(_||v=="file")&&(u.push("//"),(v=this.o)&&u.push(ds(v,Er,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(ds(_,_.charAt(0)=="/"?fo:Zn,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",ds(_,Wi)),u.join("")};function Bn(u){return new Vt(u)}function Ai(u,v,_){u.j=_?wn(v,!0):v,u.j&&(u.j=u.j.replace(/:$/,""))}function zs(u,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);u.s=v}else u.s=null}function Wn(u,v,_){v instanceof Zt?(u.i=v,ba(u.i,u.h)):(_||(v=ds(v,pl)),u.i=new Zt(v,u.h))}function ht(u,v,_){u.i.set(v,_)}function Fs(u){return ht(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function wn(u,v){return u?v?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function ds(u,v,_){return typeof u=="string"?(u=encodeURI(u).replace(v,Hs),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Hs(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Er=/[#\/\?@]/g,Zn=/[#\?:]/g,fo=/[#\?]/g,pl=/[#\?@]/g,Wi=/#/g;function Zt(u,v){this.h=this.g=null,this.i=u||null,this.j=!!v}function Kn(u){u.g||(u.g=new Map,u.h=0,u.i&&ml(u.i,function(v,_){u.add(decodeURIComponent(v.replace(/\+/g," ")),_)}))}i=Zt.prototype,i.add=function(u,v){Kn(this),this.i=null,u=fi(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(v),this.h+=1,this};function Yn(u,v){Kn(u),v=fi(u,v),u.g.has(v)&&(u.i=null,u.h-=u.g.get(v).length,u.g.delete(v))}function Qn(u,v){return Kn(u),v=fi(u,v),u.g.has(v)}i.forEach=function(u,v){Kn(this),this.g.forEach(function(_,T){_.forEach(function(G){u.call(v,G,T,this)},this)},this)},i.na=function(){Kn(this);const u=Array.from(this.g.values()),v=Array.from(this.g.keys()),_=[];for(let T=0;T<v.length;T++){const G=u[T];for(let ee=0;ee<G.length;ee++)_.push(v[T])}return _},i.V=function(u){Kn(this);let v=[];if(typeof u=="string")Qn(this,u)&&(v=v.concat(this.g.get(fi(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)v=v.concat(u[_])}return v},i.set=function(u,v){return Kn(this),this.i=null,u=fi(this,u),Qn(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[v]),this.h+=1,this},i.get=function(u,v){return u?(u=this.V(u),0<u.length?String(u[0]):v):v};function _a(u,v,_){Yn(u,v),0<_.length&&(u.i=null,u.g.set(fi(u,v),H(_)),u.h+=_.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],v=Array.from(this.g.keys());for(var _=0;_<v.length;_++){var T=v[_];const ee=encodeURIComponent(String(T)),ye=this.V(T);for(T=0;T<ye.length;T++){var G=ee;ye[T]!==""&&(G+="="+encodeURIComponent(String(ye[T]))),u.push(G)}}return this.i=u.join("&")};function fi(u,v){return v=String(v),u.j&&(v=v.toLowerCase()),v}function ba(u,v){v&&!u.j&&(Kn(u),u.i=null,u.g.forEach(function(_,T){var G=T.toLowerCase();T!=G&&(Yn(this,T),_a(this,G,_))},u)),u.j=v}function hs(u,v){const _=new en;if(p.Image){const T=new Image;T.onload=P(E,_,"TestLoadImage: loaded",!0,v,T),T.onerror=P(E,_,"TestLoadImage: error",!1,v,T),T.onabort=P(E,_,"TestLoadImage: abort",!1,v,T),T.ontimeout=P(E,_,"TestLoadImage: timeout",!1,v,T),p.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else v(!1)}function $n(u,v){const _=new en,T=new AbortController,G=setTimeout(()=>{T.abort(),E(_,"TestPingServer: timeout",!1,v)},1e4);fetch(u,{signal:T.signal}).then(ee=>{clearTimeout(G),ee.ok?E(_,"TestPingServer: ok",!0,v):E(_,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(G),E(_,"TestPingServer: error",!1,v)})}function E(u,v,_,T,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),T(_)}catch{}}function V(){this.g=new rs}function F(u,v,_){const T=_||"";try{xr(u,function(G,ee){let ye=G;y(G)&&(ye=li(G)),v.push(T+ee+"="+encodeURIComponent(ye))})}catch(G){throw v.push(T+"type="+encodeURIComponent("_badmap")),G}}function B(u){this.l=u.Ub||null,this.j=u.eb||!1}z(B,oo),B.prototype.g=function(){return new re(this.l,this.j)},B.prototype.i=function(u){return function(){return u}}({});function re(u,v){Ct.call(this),this.D=u,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}z(re,Ct),i=re.prototype,i.open=function(u,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=v,this.readyState=1,Fe(this)},i.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(v.body=u),(this.D||p).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ce(this)),this.readyState=0},i.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Fe(this)),this.g&&(this.readyState=3,Fe(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof p.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ee(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ee(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}i.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var v=u.value?u.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!u.done}))&&(this.response=this.responseText+=v)}u.done?Ce(this):Fe(this),this.readyState==3&&Ee(this)}},i.Ra=function(u){this.g&&(this.response=this.responseText=u,Ce(this))},i.Qa=function(u){this.g&&(this.response=u,Ce(this))},i.ga=function(){this.g&&Ce(this)};function Ce(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Fe(u)}i.setRequestHeader=function(u,v){this.u.append(u,v)},i.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],v=this.h.entries();for(var _=v.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=v.next();return u.join(`\r
`)};function Fe(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(re.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function St(u){let v="";return pe(u,function(_,T){v+=T,v+=":",v+=_,v+=`\r
`}),v}function Re(u,v,_){e:{for(T in _){var T=!1;break e}T=!0}T||(_=St(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):ht(u,v,_))}function Se(u){Ct.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}z(Se,Ct);var At=/^https?$/i,It=["POST","PUT"];i=Se.prototype,i.Ha=function(u){this.J=u},i.ea=function(u,v,_,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);v=v?v.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():xi.g(),this.v=this.o?fa(this.o):fa(xi),this.g.onreadystatechange=A(this.Ea,this);try{this.B=!0,this.g.open(v,String(u),!0),this.B=!1}catch(ee){Kt(this,ee);return}if(u=_||"",_=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var G in T)_.set(G,T[G]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const ee of T.keys())_.set(ee,T.get(ee));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(_.keys()).find(ee=>ee.toLowerCase()=="content-type"),G=p.FormData&&u instanceof p.FormData,!(0<=Array.prototype.indexOf.call(It,v,void 0))||T||G||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ee,ye]of _)this.g.setRequestHeader(ee,ye);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Nn(this),this.u=!0,this.g.send(u),this.u=!1}catch(ee){Kt(this,ee)}};function Kt(u,v){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=v,u.m=5,nn(u),Pt(u)}function nn(u){u.A||(u.A=!0,rt(u,"complete"),rt(u,"error"))}i.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,rt(this,"complete"),rt(this,"abort"),Pt(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Pt(this,!0)),Se.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?Ht(this):this.bb())},i.bb=function(){Ht(this)};function Ht(u){if(u.h&&typeof h<"u"&&(!u.v[1]||xt(u)!=4||u.Z()!=2)){if(u.u&&xt(u)==4)dn(u.Ea,0,u);else if(rt(u,"readystatechange"),xt(u)==4){u.h=!1;try{const ye=u.Z();e:switch(ye){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var _;if(!(_=v)){var T;if(T=ye===0){var G=String(u.D).match(Xi)[1]||null;!G&&p.self&&p.self.location&&(G=p.self.location.protocol.slice(0,-1)),T=!At.test(G?G.toLowerCase():"")}_=T}if(_)rt(u,"complete"),rt(u,"success");else{u.m=6;try{var ee=2<xt(u)?u.g.statusText:""}catch{ee=""}u.l=ee+" ["+u.Z()+"]",nn(u)}}finally{Pt(u)}}}}function Pt(u,v){if(u.g){Nn(u);const _=u.g,T=u.v[0]?()=>{}:null;u.g=null,u.v=null,v||rt(u,"ready");try{_.onreadystatechange=T}catch{}}}function Nn(u){u.I&&(p.clearTimeout(u.I),u.I=null)}i.isActive=function(){return!!this.g};function xt(u){return u.g?u.g.readyState:0}i.Z=function(){try{return 2<xt(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(u){if(this.g){var v=this.g.responseText;return u&&v.indexOf(u)==0&&(v=v.substring(u.length)),mt(v)}};function wa(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function mo(u){const v={};u=(u.g&&2<=xt(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(Z(u[T]))continue;var _=D(u[T]);const G=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const ee=v[G]||[];v[G]=ee,ee.push(_)}k(v,function(T){return T.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function fs(u,v,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||v}function qs(u){this.Aa=0,this.i=[],this.j=new en,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=fs("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=fs("baseRetryDelayMs",5e3,u),this.cb=fs("retryDelaySeedMs",1e4,u),this.Wa=fs("forwardChannelMaxRetries",2,u),this.wa=fs("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Hi(u&&u.concurrentRequestLimit),this.Da=new V,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=qs.prototype,i.la=8,i.G=1,i.connect=function(u,v,_,T){yt(0),this.W=u,this.H=v||{},_&&T!==void 0&&(this.H.OSID=_,this.H.OAID=T),this.F=this.X,this.I=iu(this,null,this.W),Gs(this)};function He(u){if(Jn(u),u.G==3){var v=u.U++,_=Bn(u.I);if(ht(_,"SID",u.K),ht(_,"RID",v),ht(_,"TYPE","terminate"),xa(u,_),v=new hn(u,u.j,v),v.L=2,v.v=Fs(Bn(_)),_=!1,p.navigator&&p.navigator.sendBeacon)try{_=p.navigator.sendBeacon(v.v.toString(),"")}catch{}!_&&p.Image&&(new Image().src=v.v,_=!0),_||(v.g=su(v.j,null),v.g.ea(v.v)),v.F=Date.now(),Bs(v)}nu(u)}function Ut(u){u.g&&(Ea(u),u.g.cancel(),u.g=null)}function Jn(u){Ut(u),u.u&&(p.clearTimeout(u.u),u.u=null),po(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&p.clearTimeout(u.s),u.s=null)}function Gs(u){if(!qi(u.h)&&!u.s){u.s=!0;var v=u.Ga;fe||j(),ne||(fe(),ne=!0),be.add(v,u),u.B=0}}function vh(u,v){return fn(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=v.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=kt(A(u.Ga,u,v),vl(u,u.B)),u.B++,!0)}i.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const G=new hn(this,this.j,u);let ee=this.o;if(this.S&&(ee?(ee=R(ee),M(ee,this.S)):ee=this.S),this.m!==null||this.O||(G.H=ee,ee=null),this.P)e:{for(var v=0,_=0;_<this.i.length;_++){t:{var T=this.i[_];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(v+=T,4096<v){v=_;break e}if(v===4096||_===this.i.length-1){v=_+1;break e}}v=1e3}else v=1e3;v=$c(this,G,v),_=Bn(this.I),ht(_,"RID",u),ht(_,"CVER",22),this.D&&ht(_,"X-HTTP-Session-Id",this.D),xa(this,_),ee&&(this.O?v="headers="+encodeURIComponent(String(St(ee)))+"&"+v:this.m&&Re(_,this.m,ee)),ct(this.h,G),this.Ua&&ht(_,"TYPE","init"),this.P?(ht(_,"$req",v),ht(_,"SID","null"),G.T=!0,Xn(G,_,null)):Xn(G,_,v),this.G=2}}else this.G==3&&(u?gl(this,u):this.i.length==0||qi(this.h)||gl(this))};function gl(u,v){var _;v?_=v.l:_=u.U++;const T=Bn(u.I);ht(T,"SID",u.K),ht(T,"RID",_),ht(T,"AID",u.T),xa(u,T),u.m&&u.o&&Re(T,u.m,u.o),_=new hn(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),v&&(u.i=v.D.concat(u.i)),v=$c(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),ct(u.h,_),Xn(_,T,v)}function xa(u,v){u.H&&pe(u.H,function(_,T){ht(v,T,_)}),u.l&&xr({},function(_,T){ht(v,T,_)})}function $c(u,v,_){_=Math.min(u.i.length,_);var T=u.l?A(u.l.Na,u.l,u):null;e:{var G=u.i;let ee=-1;for(;;){const ye=["count="+_];ee==-1?0<_?(ee=G[0].g,ye.push("ofs="+ee)):ee=0:ye.push("ofs="+ee);let tt=!0;for(let sn=0;sn<_;sn++){let nt=G[sn].g;const mn=G[sn].map;if(nt-=ee,0>nt)ee=Math.max(0,G[sn].g-100),tt=!1;else try{F(mn,ye,"req"+nt+"_")}catch{T&&T(mn)}}if(tt){T=ye.join("&");break e}}}return u=u.i.splice(0,_),v.D=u,T}function Jc(u){if(!u.g&&!u.u){u.Y=1;var v=u.Fa;fe||j(),ne||(fe(),ne=!0),be.add(v,u),u.v=0}}function yl(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=kt(A(u.Fa,u),vl(u,u.v)),u.v++,!0)}i.Fa=function(){if(this.u=null,eu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=kt(A(this.ab,this),u)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,yt(10),Ut(this),eu(this))};function Ea(u){u.A!=null&&(p.clearTimeout(u.A),u.A=null)}function eu(u){u.g=new hn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var v=Bn(u.qa);ht(v,"RID","rpc"),ht(v,"SID",u.K),ht(v,"AID",u.T),ht(v,"CI",u.F?"0":"1"),!u.F&&u.ja&&ht(v,"TO",u.ja),ht(v,"TYPE","xmlhttp"),xa(u,v),u.m&&u.o&&Re(v,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=Fs(Bn(v)),_.m=null,_.P=!0,Ei(_,u)}i.Za=function(){this.C!=null&&(this.C=null,Ut(this),yl(this),yt(19))};function po(u){u.C!=null&&(p.clearTimeout(u.C),u.C=null)}function tu(u,v){var _=null;if(u.g==v){po(u),Ea(u),u.g=null;var T=2}else if(wr(u.h,v))_=v.D,Wt(u.h,v),T=1;else return;if(u.G!=0){if(v.o)if(T==1){_=v.m?v.m.length:0,v=Date.now()-v.F;var G=u.B;T=Bi(),rt(T,new Ft(T,_)),Gs(u)}else Jc(u);else if(G=v.s,G==3||G==0&&0<v.X||!(T==1&&vh(u,v)||T==2&&yl(u)))switch(_&&0<_.length&&(v=u.h,v.i=v.i.concat(_)),G){case 1:Xs(u,5);break;case 4:Xs(u,10);break;case 3:Xs(u,6);break;default:Xs(u,2)}}}function vl(u,v){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*v}function Xs(u,v){if(u.j.info("Error code "+v),v==2){var _=A(u.fb,u),T=u.Xa;const G=!T;T=new Vt(T||"//www.google.com/images/cleardot.gif"),p.location&&p.location.protocol=="http"||Ai(T,"https"),Fs(T),G?hs(T.toString(),_):$n(T.toString(),_)}else yt(2);u.G=0,u.l&&u.l.sa(v),nu(u),Jn(u)}i.fb=function(u){u?(this.j.info("Successfully pinged google.com"),yt(2)):(this.j.info("Failed to ping google.com"),yt(1))};function nu(u){if(u.G=0,u.ka=[],u.l){const v=Gi(u.h);(v.length!=0||u.i.length!=0)&&(Y(u.ka,v),Y(u.ka,u.i),u.h.i.length=0,H(u.i),u.i.length=0),u.l.ra()}}function iu(u,v,_){var T=_ instanceof Vt?Bn(_):new Vt(_);if(T.g!="")v&&(T.g=v+"."+T.g),zs(T,T.s);else{var G=p.location;T=G.protocol,v=v?v+"."+G.hostname:G.hostname,G=+G.port;var ee=new Vt(null);T&&Ai(ee,T),v&&(ee.g=v),G&&zs(ee,G),_&&(ee.l=_),T=ee}return _=u.D,v=u.ya,_&&v&&ht(T,_,v),ht(T,"VER",u.la),xa(u,T),T}function su(u,v,_){if(v&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=u.Ca&&!u.pa?new Se(new B({eb:_})):new Se(u.pa),v.Ha(u.J),v}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function ru(){}i=ru.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function go(){}go.prototype.g=function(u,v){return new zn(u,v)};function zn(u,v){Ct.call(this),this.g=new qs(v),this.l=u,this.h=v&&v.messageUrlParams||null,u=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(u?u["X-WebChannel-Content-Type"]=v.messageContentType:u={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(u?u["X-WebChannel-Client-Profile"]=v.va:u={"X-WebChannel-Client-Profile":v.va}),this.g.S=u,(u=v&&v.Sb)&&!Z(u)&&(this.g.m=u),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!Z(v)&&(this.g.D=v,u=this.h,u!==null&&v in u&&(u=this.h,v in u&&delete u[v])),this.j=new ms(this)}z(zn,Ct),zn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},zn.prototype.close=function(){He(this.g)},zn.prototype.o=function(u){var v=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=li(u),u=_);v.i.push(new ho(v.Ya++,u)),v.G==3&&Gs(v)},zn.prototype.N=function(){this.g.l=null,delete this.j,He(this.g),delete this.g,zn.aa.N.call(this)};function au(u){Ui.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var v=u.__sm__;if(v){e:{for(const _ in v){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,v=v!==null&&u in v?v[u]:void 0),this.data=v}else this.data=u}z(au,Ui);function ou(){as.call(this),this.status=1}z(ou,as);function ms(u){this.g=u}z(ms,ru),ms.prototype.ua=function(){rt(this.g,"a")},ms.prototype.ta=function(u){rt(this.g,new au(u))},ms.prototype.sa=function(u){rt(this.g,new ou)},ms.prototype.ra=function(){rt(this.g,"b")},go.prototype.createWebChannel=go.prototype.g,zn.prototype.send=zn.prototype.o,zn.prototype.open=zn.prototype.m,zn.prototype.close=zn.prototype.close,ow=function(){return new go},aw=function(){return Bi()},rw=ui,Xm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},zi.NO_ERROR=0,zi.TIMEOUT=8,zi.HTTP_ERROR=6,wd=zi,Fi.COMPLETE="complete",sw=Fi,ma.EventType=ci,ci.OPEN="a",ci.CLOSE="b",ci.ERROR="c",ci.MESSAGE="d",Ct.prototype.listen=Ct.prototype.K,hc=ma,Se.prototype.listenOnce=Se.prototype.L,Se.prototype.getLastError=Se.prototype.Ka,Se.prototype.getLastErrorCode=Se.prototype.Ba,Se.prototype.getStatus=Se.prototype.Z,Se.prototype.getResponseJson=Se.prototype.Oa,Se.prototype.getResponseText=Se.prototype.oa,Se.prototype.send=Se.prototype.ea,Se.prototype.setWithCredentials=Se.prototype.Ha,iw=Se}).apply(typeof ud<"u"?ud:typeof self<"u"?self:typeof window<"u"?window:{});const w1="@firebase/firestore",x1="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}On.UNAUTHENTICATED=new On(null),On.GOOGLE_CREDENTIALS=new On("google-credentials-uid"),On.FIRST_PARTY=new On("first-party-uid"),On.MOCK_USER=new On("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cl="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Za=new eh("@firebase/firestore");function Go(){return Za.logLevel}function _e(i,...e){if(Za.logLevel<=Je.DEBUG){const n=e.map(kp);Za.debug(`Firestore (${cl}): ${i}`,...n)}}function yr(i,...e){if(Za.logLevel<=Je.ERROR){const n=e.map(kp);Za.error(`Firestore (${cl}): ${i}`,...n)}}function ia(i,...e){if(Za.logLevel<=Je.WARN){const n=e.map(kp);Za.warn(`Firestore (${cl}): ${i}`,...n)}}function kp(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ve(i,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,lw(i,r,n)}function lw(i,e,n){let r=`FIRESTORE (${cl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw yr(r),new Error(r)}function ft(i,e,n,r){let o="Unexpected state";typeof n=="string"?o=n:r=n,i||lw(e,o,r)}function Be(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const me={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Te extends ss{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cw{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class n5{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(On.UNAUTHENTICATED))}shutdown(){}}class i5{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class s5{constructor(e){this.t=e,this.currentUser=On.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ft(this.o===void 0,42304);let r=this.i;const o=g=>this.i!==r?(r=this.i,n(g)):Promise.resolve();let c=new ta;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new ta,e.enqueueRetryable(()=>o(this.currentUser))};const h=()=>{const g=c;e.enqueueRetryable(async()=>{await g.promise,await o(this.currentUser)})},p=g=>{_e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit(g=>p(g)),setTimeout(()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?p(g):(_e("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new ta)}},0),h()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(_e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ft(typeof r.accessToken=="string",31837,{l:r}),new cw(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ft(e===null||typeof e=="string",2055,{h:e}),new On(e)}}class r5{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=On.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class a5{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new r5(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(On.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class E1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class o5{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ji(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ft(this.o===void 0,3512);const r=c=>{c.error!=null&&_e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const h=c.token!==this.m;return this.m=c.token,_e("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>r(c))};const o=c=>{_e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(c=>o(c)),setTimeout(()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?o(c):_e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new E1(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ft(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new E1(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l5(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<i;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uw(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=l5(40);for(let c=0;c<o.length;++c)r.length<20&&o[c]<n&&(r+=e.charAt(o[c]%62))}return r}}function We(i,e){return i<e?-1:i>e?1:0}function Wm(i,e){let n=0;for(;n<i.length&&n<e.length;){const r=i.codePointAt(n),o=e.codePointAt(n);if(r!==o){if(r<128&&o<128)return We(r,o);{const c=uw(),h=c5(c.encode(S1(i,n)),c.encode(S1(e,n)));return h!==0?h:We(r,o)}}n+=r>65535?2:1}return We(i.length,e.length)}function S1(i,e){return i.codePointAt(e)>65535?i.substring(e,e+2):i.substring(e,e+1)}function c5(i,e){for(let n=0;n<i.length&&n<e.length;++n)if(i[n]!==e[n])return We(i[n],e[n]);return We(i.length,e.length)}function el(i,e,n){return i.length===e.length&&i.every((r,o)=>n(r,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A1="__name__";class xs{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ve(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Ve(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return xs.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof xs?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let o=0;o<r;o++){const c=xs.compareSegments(e.get(o),n.get(o));if(c!==0)return c}return We(e.length,n.length)}static compareSegments(e,n){const r=xs.isNumericId(e),o=xs.isNumericId(n);return r&&!o?-1:!r&&o?1:r&&o?xs.extractNumericId(e).compare(xs.extractNumericId(n)):Wm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ea.fromString(e.substring(4,e.length-2))}}class Ot extends xs{construct(e,n,r){return new Ot(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Te(me.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(o=>o.length>0))}return new Ot(n)}static emptyPath(){return new Ot([])}}const u5=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Rn extends xs{construct(e,n,r){return new Rn(e,n,r)}static isValidIdentifier(e){return u5.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Rn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===A1}static keyField(){return new Rn([A1])}static fromServerFormat(e){const n=[];let r="",o=0;const c=()=>{if(r.length===0)throw new Te(me.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let h=!1;for(;o<e.length;){const p=e[o];if(p==="\\"){if(o+1===e.length)throw new Te(me.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new Te(me.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=g,o+=2}else p==="`"?(h=!h,o++):p!=="."||h?(r+=p,o++):(c(),o++)}if(c(),h)throw new Te(me.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Rn(n)}static emptyPath(){return new Rn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e){this.path=e}static fromPath(e){return new Ne(Ot.fromString(e))}static fromName(e){return new Ne(Ot.fromString(e).popFirst(5))}static empty(){return new Ne(Ot.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ot.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ot.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ne(new Ot(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d5(i,e,n){if(!n)throw new Te(me.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function h5(i,e,n,r){if(e===!0&&r===!0)throw new Te(me.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function T1(i){if(!Ne.isDocumentKey(i))throw new Te(me.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function dw(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function jp(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":Ve(12329,{type:typeof i})}function Nc(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new Te(me.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=jp(i);throw new Te(me.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jt(i,e){const n={typeString:i};return e&&(n.value=e),n}function Xc(i,e){if(!dw(i))throw new Te(me.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const o=e[r].typeString,c="value"in e[r]?{value:e[r].value}:void 0;if(!(r in i)){n=`JSON missing required field: '${r}'`;break}const h=i[r];if(o&&typeof h!==o){n=`JSON field '${r}' must be a ${o}.`;break}if(c!==void 0&&h!==c.value){n=`Expected '${r}' field to equal '${c.value}'`;break}}if(n)throw new Te(me.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R1=-62135596800,C1=1e6;class Rt{static now(){return Rt.fromMillis(Date.now())}static fromDate(e){return Rt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*C1);return new Rt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Te(me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Te(me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<R1)throw new Te(me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Te(me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/C1}_compareTo(e){return this.seconds===e.seconds?We(this.nanoseconds,e.nanoseconds):We(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Rt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Xc(e,Rt._jsonSchema))return new Rt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-R1;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Rt._jsonSchemaVersion="firestore/timestamp/1.0",Rt._jsonSchema={type:Jt("string",Rt._jsonSchemaVersion),seconds:Jt("number"),nanoseconds:Jt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{static fromTimestamp(e){return new Ue(e)}static min(){return new Ue(new Rt(0,0))}static max(){return new Ue(new Rt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kc=-1;function f5(i,e){const n=i.toTimestamp().seconds,r=i.toTimestamp().nanoseconds+1,o=Ue.fromTimestamp(r===1e9?new Rt(n+1,0):new Rt(n,r));return new sa(o,Ne.empty(),e)}function m5(i){return new sa(i.readTime,i.key,kc)}class sa{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new sa(Ue.min(),Ne.empty(),kc)}static max(){return new sa(Ue.max(),Ne.empty(),kc)}}function p5(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=Ne.comparator(i.documentKey,e.documentKey),n!==0?n:We(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g5="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class y5{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ul(i){if(i.code!==me.FAILED_PRECONDITION||i.message!==g5)throw i;_e("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ve(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new he((r,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(r,o)},this.catchCallback=c=>{this.wrapFailure(n,c).next(r,o)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof he?n:he.resolve(n)}catch(n){return he.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):he.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):he.reject(n)}static resolve(e){return new he((n,r)=>{n(e)})}static reject(e){return new he((n,r)=>{r(e)})}static waitFor(e){return new he((n,r)=>{let o=0,c=0,h=!1;e.forEach(p=>{++o,p.next(()=>{++c,h&&c===o&&n()},g=>r(g))}),h=!0,c===o&&n()})}static or(e){let n=he.resolve(!1);for(const r of e)n=n.next(o=>o?he.resolve(o):r());return n}static forEach(e,n){const r=[];return e.forEach((o,c)=>{r.push(n.call(this,o,c))}),this.waitFor(r)}static mapArray(e,n){return new he((r,o)=>{const c=e.length,h=new Array(c);let p=0;for(let g=0;g<c;g++){const y=g;n(e[y]).next(w=>{h[y]=w,++p,p===c&&r(h)},w=>o(w))}})}static doWhile(e,n){return new he((r,o)=>{const c=()=>{e()===!0?n().next(()=>{c()},o):r()};c()})}}function v5(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function dl(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this._e(r),this.ae=r=>n.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}ah.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Op=-1;function oh(i){return i==null}function Ud(i){return i===0&&1/i==-1/0}function _5(i){return typeof i=="number"&&Number.isInteger(i)&&!Ud(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hw="";function b5(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=I1(e)),e=w5(i.get(n),e);return I1(e)}function w5(i,e){let n=e;const r=i.length;for(let o=0;o<r;o++){const c=i.charAt(o);switch(c){case"\0":n+="";break;case hw:n+="";break;default:n+=c}}return n}function I1(i){return i+hw+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N1(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function eo(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function fw(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e,n){this.comparator=e,this.root=n||Tn.EMPTY}insert(e,n){return new Lt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Tn.BLACK,null,null))}remove(e){return new Lt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Tn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return n+r.left.size;o<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new dd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new dd(this.root,e,this.comparator,!1)}getReverseIterator(){return new dd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new dd(this.root,e,this.comparator,!0)}}class dd{constructor(e,n,r,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?r(e.key,n):1,n&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Tn{constructor(e,n,r,o,c){this.key=e,this.value=n,this.color=r??Tn.RED,this.left=o??Tn.EMPTY,this.right=c??Tn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,o,c){return new Tn(e??this.key,n??this.value,r??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let o=this;const c=r(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,n,r),null):c===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Tn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return Tn.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Tn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Tn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ve(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ve(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ve(27949);return e+(this.isRed()?0:1)}}Tn.EMPTY=null,Tn.RED=!0,Tn.BLACK=!1;Tn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ve(57766)}get value(){throw Ve(16141)}get color(){throw Ve(16727)}get left(){throw Ve(29726)}get right(){throw Ve(36894)}copy(e,n,r,o,c){return this}insert(e,n,r){return new Tn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.comparator=e,this.data=new Lt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new k1(this.data.getIterator())}getIteratorFrom(e){return new k1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof cn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=r.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new cn(this.comparator);return n.data=e,n}}class k1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(e){this.fields=e,e.sort(Rn.comparator)}static empty(){return new Ji([])}unionWith(e){let n=new cn(Rn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ji(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return el(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new mw("Invalid base64 string: "+c):c}}(e);return new Cn(n)}static fromUint8Array(e){const n=function(o){let c="";for(let h=0;h<o.length;++h)c+=String.fromCharCode(o[h]);return c}(e);return new Cn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return We(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Cn.EMPTY_BYTE_STRING=new Cn("");const x5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ra(i){if(ft(!!i,39018),typeof i=="string"){let e=0;const n=x5.exec(i);if(ft(!!n,46558,{timestamp:i}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(i);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Xt(i.seconds),nanos:Xt(i.nanos)}}function Xt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function aa(i){return typeof i=="string"?Cn.fromBase64String(i):Cn.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pw="server_timestamp",gw="__type__",yw="__previous_value__",vw="__local_write_time__";function Mp(i){var e,n;return((n=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[gw])===null||n===void 0?void 0:n.stringValue)===pw}function lh(i){const e=i.mapValue.fields[yw];return Mp(e)?lh(e):e}function Dc(i){const e=ra(i.mapValue.fields[vw].timestampValue);return new Rt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E5{constructor(e,n,r,o,c,h,p,g,y,w){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=o,this.ssl=c,this.forceLongPolling=h,this.autoDetectLongPolling=p,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=w}}const Bd="(default)";class jc{constructor(e,n){this.projectId=e,this.database=n||Bd}static empty(){return new jc("","")}get isDefaultDatabase(){return this.database===Bd}isEqual(e){return e instanceof jc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _w="__type__",S5="__max__",hd={mapValue:{}},bw="__vector__",zd="value";function oa(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Mp(i)?4:T5(i)?9007199254740991:A5(i)?10:11:Ve(28295,{value:i})}function Ns(i,e){if(i===e)return!0;const n=oa(i);if(n!==oa(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Dc(i).isEqual(Dc(e));case 3:return function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const h=ra(o.timestampValue),p=ra(c.timestampValue);return h.seconds===p.seconds&&h.nanos===p.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return function(o,c){return aa(o.bytesValue).isEqual(aa(c.bytesValue))}(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return function(o,c){return Xt(o.geoPointValue.latitude)===Xt(c.geoPointValue.latitude)&&Xt(o.geoPointValue.longitude)===Xt(c.geoPointValue.longitude)}(i,e);case 2:return function(o,c){if("integerValue"in o&&"integerValue"in c)return Xt(o.integerValue)===Xt(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const h=Xt(o.doubleValue),p=Xt(c.doubleValue);return h===p?Ud(h)===Ud(p):isNaN(h)&&isNaN(p)}return!1}(i,e);case 9:return el(i.arrayValue.values||[],e.arrayValue.values||[],Ns);case 10:case 11:return function(o,c){const h=o.mapValue.fields||{},p=c.mapValue.fields||{};if(N1(h)!==N1(p))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(p[g]===void 0||!Ns(h[g],p[g])))return!1;return!0}(i,e);default:return Ve(52216,{left:i})}}function Oc(i,e){return(i.values||[]).find(n=>Ns(n,e))!==void 0}function tl(i,e){if(i===e)return 0;const n=oa(i),r=oa(e);if(n!==r)return We(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return We(i.booleanValue,e.booleanValue);case 2:return function(c,h){const p=Xt(c.integerValue||c.doubleValue),g=Xt(h.integerValue||h.doubleValue);return p<g?-1:p>g?1:p===g?0:isNaN(p)?isNaN(g)?0:-1:1}(i,e);case 3:return D1(i.timestampValue,e.timestampValue);case 4:return D1(Dc(i),Dc(e));case 5:return Wm(i.stringValue,e.stringValue);case 6:return function(c,h){const p=aa(c),g=aa(h);return p.compareTo(g)}(i.bytesValue,e.bytesValue);case 7:return function(c,h){const p=c.split("/"),g=h.split("/");for(let y=0;y<p.length&&y<g.length;y++){const w=We(p[y],g[y]);if(w!==0)return w}return We(p.length,g.length)}(i.referenceValue,e.referenceValue);case 8:return function(c,h){const p=We(Xt(c.latitude),Xt(h.latitude));return p!==0?p:We(Xt(c.longitude),Xt(h.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return j1(i.arrayValue,e.arrayValue);case 10:return function(c,h){var p,g,y,w;const x=c.fields||{},A=h.fields||{},P=(p=x[zd])===null||p===void 0?void 0:p.arrayValue,z=(g=A[zd])===null||g===void 0?void 0:g.arrayValue,H=We(((y=P==null?void 0:P.values)===null||y===void 0?void 0:y.length)||0,((w=z==null?void 0:z.values)===null||w===void 0?void 0:w.length)||0);return H!==0?H:j1(P,z)}(i.mapValue,e.mapValue);case 11:return function(c,h){if(c===hd.mapValue&&h===hd.mapValue)return 0;if(c===hd.mapValue)return 1;if(h===hd.mapValue)return-1;const p=c.fields||{},g=Object.keys(p),y=h.fields||{},w=Object.keys(y);g.sort(),w.sort();for(let x=0;x<g.length&&x<w.length;++x){const A=Wm(g[x],w[x]);if(A!==0)return A;const P=tl(p[g[x]],y[w[x]]);if(P!==0)return P}return We(g.length,w.length)}(i.mapValue,e.mapValue);default:throw Ve(23264,{le:n})}}function D1(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return We(i,e);const n=ra(i),r=ra(e),o=We(n.seconds,r.seconds);return o!==0?o:We(n.nanos,r.nanos)}function j1(i,e){const n=i.values||[],r=e.values||[];for(let o=0;o<n.length&&o<r.length;++o){const c=tl(n[o],r[o]);if(c)return c}return We(n.length,r.length)}function nl(i){return Zm(i)}function Zm(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(n){const r=ra(n);return`time(${r.seconds},${r.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?function(n){return aa(n).toBase64()}(i.bytesValue):"referenceValue"in i?function(n){return Ne.fromName(n).toString()}(i.referenceValue):"geoPointValue"in i?function(n){return`geo(${n.latitude},${n.longitude})`}(i.geoPointValue):"arrayValue"in i?function(n){let r="[",o=!0;for(const c of n.values||[])o?o=!1:r+=",",r+=Zm(c);return r+"]"}(i.arrayValue):"mapValue"in i?function(n){const r=Object.keys(n.fields||{}).sort();let o="{",c=!0;for(const h of r)c?c=!1:o+=",",o+=`${h}:${Zm(n.fields[h])}`;return o+"}"}(i.mapValue):Ve(61005,{value:i})}function xd(i){switch(oa(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=lh(i);return e?16+xd(e):16;case 5:return 2*i.stringValue.length;case 6:return aa(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((o,c)=>o+xd(c),0)}(i.arrayValue);case 10:case 11:return function(r){let o=0;return eo(r.fields,(c,h)=>{o+=c.length+xd(h)}),o}(i.mapValue);default:throw Ve(13486,{value:i})}}function Km(i){return!!i&&"integerValue"in i}function Lp(i){return!!i&&"arrayValue"in i}function O1(i){return!!i&&"nullValue"in i}function M1(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Ed(i){return!!i&&"mapValue"in i}function A5(i){var e,n;return((n=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[_w])===null||n===void 0?void 0:n.stringValue)===bw}function bc(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return eo(i.mapValue.fields,(n,r)=>e.mapValue.fields[n]=bc(r)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=bc(i.arrayValue.values[n]);return e}return Object.assign({},i)}function T5(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===S5}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(e){this.value=e}static empty(){return new Oi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ed(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=bc(n)}setAll(e){let n=Rn.emptyPath(),r={},o=[];e.forEach((h,p)=>{if(!n.isImmediateParentOf(p)){const g=this.getFieldsMap(n);this.applyChanges(g,r,o),r={},o=[],n=p.popLast()}h?r[p.lastSegment()]=bc(h):o.push(p.lastSegment())});const c=this.getFieldsMap(n);this.applyChanges(c,r,o)}delete(e){const n=this.field(e.popLast());Ed(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ns(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=n.mapValue.fields[e.get(r)];Ed(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,r){eo(n,(o,c)=>e[o]=c);for(const o of r)delete e[o]}clone(){return new Oi(bc(this.value))}}function ww(i){const e=[];return eo(i.fields,(n,r)=>{const o=new Rn([n]);if(Ed(r)){const c=ww(r.mapValue).fields;if(c.length===0)e.push(o);else for(const h of c)e.push(o.child(h))}else e.push(o)}),new Ji(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e,n,r,o,c,h,p){this.key=e,this.documentType=n,this.version=r,this.readTime=o,this.createTime=c,this.data=h,this.documentState=p}static newInvalidDocument(e){return new Mn(e,0,Ue.min(),Ue.min(),Ue.min(),Oi.empty(),0)}static newFoundDocument(e,n,r,o){return new Mn(e,1,n,Ue.min(),r,o,0)}static newNoDocument(e,n){return new Mn(e,2,n,Ue.min(),Ue.min(),Oi.empty(),0)}static newUnknownDocument(e,n){return new Mn(e,3,n,Ue.min(),Ue.min(),Oi.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Oi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Oi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Mn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Mn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{constructor(e,n){this.position=e,this.inclusive=n}}function L1(i,e,n){let r=0;for(let o=0;o<i.position.length;o++){const c=e[o],h=i.position[o];if(c.field.isKeyField()?r=Ne.comparator(Ne.fromName(h.referenceValue),n.key):r=tl(h,n.data.field(c.field)),c.dir==="desc"&&(r*=-1),r!==0)break}return r}function V1(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!Ns(i.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(e,n="asc"){this.field=e,this.dir=n}}function R5(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw{}class ln extends xw{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new I5(e,n,r):n==="array-contains"?new D5(e,r):n==="in"?new j5(e,r):n==="not-in"?new O5(e,r):n==="array-contains-any"?new M5(e,r):new ln(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new N5(e,r):new k5(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(tl(n,this.value)):n!==null&&oa(this.value)===oa(n)&&this.matchesComparison(tl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ve(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ks extends xw{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new ks(e,n)}matches(e){return Ew(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function Ew(i){return i.op==="and"}function Sw(i){return C5(i)&&Ew(i)}function C5(i){for(const e of i.filters)if(e instanceof ks)return!1;return!0}function Ym(i){if(i instanceof ln)return i.field.canonicalString()+i.op.toString()+nl(i.value);if(Sw(i))return i.filters.map(e=>Ym(e)).join(",");{const e=i.filters.map(n=>Ym(n)).join(",");return`${i.op}(${e})`}}function Aw(i,e){return i instanceof ln?function(r,o){return o instanceof ln&&r.op===o.op&&r.field.isEqual(o.field)&&Ns(r.value,o.value)}(i,e):i instanceof ks?function(r,o){return o instanceof ks&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce((c,h,p)=>c&&Aw(h,o.filters[p]),!0):!1}(i,e):void Ve(19439)}function Tw(i){return i instanceof ln?function(n){return`${n.field.canonicalString()} ${n.op} ${nl(n.value)}`}(i):i instanceof ks?function(n){return n.op.toString()+" {"+n.getFilters().map(Tw).join(" ,")+"}"}(i):"Filter"}class I5 extends ln{constructor(e,n,r){super(e,n,r),this.key=Ne.fromName(r.referenceValue)}matches(e){const n=Ne.comparator(e.key,this.key);return this.matchesComparison(n)}}class N5 extends ln{constructor(e,n){super(e,"in",n),this.keys=Rw("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class k5 extends ln{constructor(e,n){super(e,"not-in",n),this.keys=Rw("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Rw(i,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Ne.fromName(r.referenceValue))}class D5 extends ln{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Lp(n)&&Oc(n.arrayValue,this.value)}}class j5 extends ln{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Oc(this.value.arrayValue,n)}}class O5 extends ln{constructor(e,n){super(e,"not-in",n)}matches(e){if(Oc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Oc(this.value.arrayValue,n)}}class M5 extends ln{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Lp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Oc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L5{constructor(e,n=null,r=[],o=[],c=null,h=null,p=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=o,this.limit=c,this.startAt=h,this.endAt=p,this.Pe=null}}function P1(i,e=null,n=[],r=[],o=null,c=null,h=null){return new L5(i,e,n,r,o,c,h)}function Vp(i){const e=Be(i);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Ym(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(c){return c.field.canonicalString()+c.dir}(r)).join(","),oh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>nl(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>nl(r)).join(",")),e.Pe=n}return e.Pe}function Pp(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!R5(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!Aw(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!V1(i.startAt,e.startAt)&&V1(i.endAt,e.endAt)}function Qm(i){return Ne.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(e,n=null,r=[],o=[],c=null,h="F",p=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=o,this.limit=c,this.limitType=h,this.startAt=p,this.endAt=g,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function V5(i,e,n,r,o,c,h,p){return new ch(i,e,n,r,o,c,h,p)}function Up(i){return new ch(i)}function U1(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function P5(i){return i.collectionGroup!==null}function wc(i){const e=Be(i);if(e.Te===null){e.Te=[];const n=new Set;for(const c of e.explicitOrderBy)e.Te.push(c),n.add(c.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let p=new cn(Rn.comparator);return h.filters.forEach(g=>{g.getFlattenedFilters().forEach(y=>{y.isInequality()&&(p=p.add(y.field))})}),p})(e).forEach(c=>{n.has(c.canonicalString())||c.isKeyField()||e.Te.push(new Hd(c,r))}),n.has(Rn.keyField().canonicalString())||e.Te.push(new Hd(Rn.keyField(),r))}return e.Te}function As(i){const e=Be(i);return e.Ie||(e.Ie=U5(e,wc(i))),e.Ie}function U5(i,e){if(i.limitType==="F")return P1(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(o=>{const c=o.dir==="desc"?"asc":"desc";return new Hd(o.field,c)});const n=i.endAt?new Fd(i.endAt.position,i.endAt.inclusive):null,r=i.startAt?new Fd(i.startAt.position,i.startAt.inclusive):null;return P1(i.path,i.collectionGroup,e,i.filters,i.limit,n,r)}}function $m(i,e,n){return new ch(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function uh(i,e){return Pp(As(i),As(e))&&i.limitType===e.limitType}function Cw(i){return`${Vp(As(i))}|lt:${i.limitType}`}function Xo(i){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(o=>Tw(o)).join(", ")}]`),oh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(o=>function(h){return`${h.field.canonicalString()} (${h.dir})`}(o)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(o=>nl(o)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(o=>nl(o)).join(",")),`Target(${r})`}(As(i))}; limitType=${i.limitType})`}function dh(i,e){return e.isFoundDocument()&&function(r,o){const c=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(c):Ne.isDocumentKey(r.path)?r.path.isEqual(c):r.path.isImmediateParentOf(c)}(i,e)&&function(r,o){for(const c of wc(r))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0}(i,e)&&function(r,o){for(const c of r.filters)if(!c.matches(o))return!1;return!0}(i,e)&&function(r,o){return!(r.startAt&&!function(h,p,g){const y=L1(h,p,g);return h.inclusive?y<=0:y<0}(r.startAt,wc(r),o)||r.endAt&&!function(h,p,g){const y=L1(h,p,g);return h.inclusive?y>=0:y>0}(r.endAt,wc(r),o))}(i,e)}function B5(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function Iw(i){return(e,n)=>{let r=!1;for(const o of wc(i)){const c=z5(o,e,n);if(c!==0)return c;r=r||o.field.isKeyField()}return 0}}function z5(i,e,n){const r=i.field.isKeyField()?Ne.comparator(e.key,n.key):function(c,h,p){const g=h.data.field(c),y=p.data.field(c);return g!==null&&y!==null?tl(g,y):Ve(42886)}(i.field,e,n);switch(i.dir){case"asc":return r;case"desc":return-1*r;default:return Ve(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[o,c]of r)if(this.equalsFn(o,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[n]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){eo(this.inner,(n,r)=>{for(const[o,c]of r)e(o,c)})}isEmpty(){return fw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F5=new Lt(Ne.comparator);function vr(){return F5}const Nw=new Lt(Ne.comparator);function fc(...i){let e=Nw;for(const n of i)e=e.insert(n.key,n);return e}function kw(i){let e=Nw;return i.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Fa(){return xc()}function Dw(){return xc()}function xc(){return new to(i=>i.toString(),(i,e)=>i.isEqual(e))}const H5=new Lt(Ne.comparator),q5=new cn(Ne.comparator);function et(...i){let e=q5;for(const n of i)e=e.add(n);return e}const G5=new cn(We);function X5(){return G5}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bp(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ud(e)?"-0":e}}function jw(i){return{integerValue:""+i}}function W5(i,e){return _5(e)?jw(e):Bp(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(){this._=void 0}}function Z5(i,e,n){return i instanceof qd?function(o,c){const h={fields:{[gw]:{stringValue:pw},[vw]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&Mp(c)&&(c=lh(c)),c&&(h.fields[yw]=c),{mapValue:h}}(n,e):i instanceof Mc?Mw(i,e):i instanceof Lc?Lw(i,e):function(o,c){const h=Ow(o,c),p=B1(h)+B1(o.Ee);return Km(h)&&Km(o.Ee)?jw(p):Bp(o.serializer,p)}(i,e)}function K5(i,e,n){return i instanceof Mc?Mw(i,e):i instanceof Lc?Lw(i,e):n}function Ow(i,e){return i instanceof Gd?function(r){return Km(r)||function(c){return!!c&&"doubleValue"in c}(r)}(e)?e:{integerValue:0}:null}class qd extends hh{}class Mc extends hh{constructor(e){super(),this.elements=e}}function Mw(i,e){const n=Vw(e);for(const r of i.elements)n.some(o=>Ns(o,r))||n.push(r);return{arrayValue:{values:n}}}class Lc extends hh{constructor(e){super(),this.elements=e}}function Lw(i,e){let n=Vw(e);for(const r of i.elements)n=n.filter(o=>!Ns(o,r));return{arrayValue:{values:n}}}class Gd extends hh{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function B1(i){return Xt(i.integerValue||i.doubleValue)}function Vw(i){return Lp(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function Y5(i,e){return i.field.isEqual(e.field)&&function(r,o){return r instanceof Mc&&o instanceof Mc||r instanceof Lc&&o instanceof Lc?el(r.elements,o.elements,Ns):r instanceof Gd&&o instanceof Gd?Ns(r.Ee,o.Ee):r instanceof qd&&o instanceof qd}(i.transform,e.transform)}class Q5{constructor(e,n){this.version=e,this.transformResults=n}}class hr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new hr}static exists(e){return new hr(void 0,e)}static updateTime(e){return new hr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Sd(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class fh{}function Pw(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new Bw(i.key,hr.none()):new Wc(i.key,i.data,hr.none());{const n=i.data,r=Oi.empty();let o=new cn(Rn.comparator);for(let c of e.fields)if(!o.has(c)){let h=n.field(c);h===null&&c.length>1&&(c=c.popLast(),h=n.field(c)),h===null?r.delete(c):r.set(c,h),o=o.add(c)}return new no(i.key,r,new Ji(o.toArray()),hr.none())}}function $5(i,e,n){i instanceof Wc?function(o,c,h){const p=o.value.clone(),g=F1(o.fieldTransforms,c,h.transformResults);p.setAll(g),c.convertToFoundDocument(h.version,p).setHasCommittedMutations()}(i,e,n):i instanceof no?function(o,c,h){if(!Sd(o.precondition,c))return void c.convertToUnknownDocument(h.version);const p=F1(o.fieldTransforms,c,h.transformResults),g=c.data;g.setAll(Uw(o)),g.setAll(p),c.convertToFoundDocument(h.version,g).setHasCommittedMutations()}(i,e,n):function(o,c,h){c.convertToNoDocument(h.version).setHasCommittedMutations()}(0,e,n)}function Ec(i,e,n,r){return i instanceof Wc?function(c,h,p,g){if(!Sd(c.precondition,h))return p;const y=c.value.clone(),w=H1(c.fieldTransforms,g,h);return y.setAll(w),h.convertToFoundDocument(h.version,y).setHasLocalMutations(),null}(i,e,n,r):i instanceof no?function(c,h,p,g){if(!Sd(c.precondition,h))return p;const y=H1(c.fieldTransforms,g,h),w=h.data;return w.setAll(Uw(c)),w.setAll(y),h.convertToFoundDocument(h.version,w).setHasLocalMutations(),p===null?null:p.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(x=>x.field))}(i,e,n,r):function(c,h,p){return Sd(c.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):p}(i,e,n)}function J5(i,e){let n=null;for(const r of i.fieldTransforms){const o=e.data.field(r.field),c=Ow(r.transform,o||null);c!=null&&(n===null&&(n=Oi.empty()),n.set(r.field,c))}return n||null}function z1(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&el(r,o,(c,h)=>Y5(c,h))}(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class Wc extends fh{constructor(e,n,r,o=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class no extends fh{constructor(e,n,r,o,c=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function Uw(i){const e=new Map;return i.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=i.data.field(n);e.set(n,r)}}),e}function F1(i,e,n){const r=new Map;ft(i.length===n.length,32656,{Ae:n.length,Re:i.length});for(let o=0;o<n.length;o++){const c=i[o],h=c.transform,p=e.data.field(c.field);r.set(c.field,K5(h,p,n[o]))}return r}function H1(i,e,n){const r=new Map;for(const o of i){const c=o.transform,h=n.data.field(o.field);r.set(o.field,Z5(c,h,e))}return r}class Bw extends fh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class e4 extends fh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t4{constructor(e,n,r,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&$5(c,e,r[o])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ec(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ec(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Dw();return this.mutations.forEach(o=>{const c=e.get(o.key),h=c.overlayedDocument;let p=this.applyToLocalView(h,c.mutatedFields);p=n.has(o.key)?null:p;const g=Pw(h,p);g!==null&&r.set(o.key,g),h.isValidDocument()||h.convertToNoDocument(Ue.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),et())}isEqual(e){return this.batchId===e.batchId&&el(this.mutations,e.mutations,(n,r)=>z1(n,r))&&el(this.baseMutations,e.baseMutations,(n,r)=>z1(n,r))}}class zp{constructor(e,n,r,o){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=o}static from(e,n,r){ft(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let o=function(){return H5}();const c=e.mutations;for(let h=0;h<c.length;h++)o=o.insert(c[h].key,r[h].version);return new zp(e,n,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n4{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i4{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $t,st;function s4(i){switch(i){case me.OK:return Ve(64938);case me.CANCELLED:case me.UNKNOWN:case me.DEADLINE_EXCEEDED:case me.RESOURCE_EXHAUSTED:case me.INTERNAL:case me.UNAVAILABLE:case me.UNAUTHENTICATED:return!1;case me.INVALID_ARGUMENT:case me.NOT_FOUND:case me.ALREADY_EXISTS:case me.PERMISSION_DENIED:case me.FAILED_PRECONDITION:case me.ABORTED:case me.OUT_OF_RANGE:case me.UNIMPLEMENTED:case me.DATA_LOSS:return!0;default:return Ve(15467,{code:i})}}function zw(i){if(i===void 0)return yr("GRPC error has no .code"),me.UNKNOWN;switch(i){case $t.OK:return me.OK;case $t.CANCELLED:return me.CANCELLED;case $t.UNKNOWN:return me.UNKNOWN;case $t.DEADLINE_EXCEEDED:return me.DEADLINE_EXCEEDED;case $t.RESOURCE_EXHAUSTED:return me.RESOURCE_EXHAUSTED;case $t.INTERNAL:return me.INTERNAL;case $t.UNAVAILABLE:return me.UNAVAILABLE;case $t.UNAUTHENTICATED:return me.UNAUTHENTICATED;case $t.INVALID_ARGUMENT:return me.INVALID_ARGUMENT;case $t.NOT_FOUND:return me.NOT_FOUND;case $t.ALREADY_EXISTS:return me.ALREADY_EXISTS;case $t.PERMISSION_DENIED:return me.PERMISSION_DENIED;case $t.FAILED_PRECONDITION:return me.FAILED_PRECONDITION;case $t.ABORTED:return me.ABORTED;case $t.OUT_OF_RANGE:return me.OUT_OF_RANGE;case $t.UNIMPLEMENTED:return me.UNIMPLEMENTED;case $t.DATA_LOSS:return me.DATA_LOSS;default:return Ve(39323,{code:i})}}(st=$t||($t={}))[st.OK=0]="OK",st[st.CANCELLED=1]="CANCELLED",st[st.UNKNOWN=2]="UNKNOWN",st[st.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",st[st.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",st[st.NOT_FOUND=5]="NOT_FOUND",st[st.ALREADY_EXISTS=6]="ALREADY_EXISTS",st[st.PERMISSION_DENIED=7]="PERMISSION_DENIED",st[st.UNAUTHENTICATED=16]="UNAUTHENTICATED",st[st.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",st[st.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",st[st.ABORTED=10]="ABORTED",st[st.OUT_OF_RANGE=11]="OUT_OF_RANGE",st[st.UNIMPLEMENTED=12]="UNIMPLEMENTED",st[st.INTERNAL=13]="INTERNAL",st[st.UNAVAILABLE=14]="UNAVAILABLE",st[st.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r4=new ea([4294967295,4294967295],0);function q1(i){const e=uw().encode(i),n=new nw;return n.update(e),new Uint8Array(n.digest())}function G1(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new ea([n,r],0),new ea([o,c],0)]}class Fp{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new mc(`Invalid padding: ${n}`);if(r<0)throw new mc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new mc(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new mc(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=ea.fromNumber(this.fe)}pe(e,n,r){let o=e.add(n.multiply(ea.fromNumber(r)));return o.compare(r4)===1&&(o=new ea([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=q1(e),[r,o]=G1(n);for(let c=0;c<this.hashCount;c++){const h=this.pe(r,o,c);if(!this.ye(h))return!1}return!0}static create(e,n,r){const o=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),h=new Fp(c,o,n);return r.forEach(p=>h.insert(p)),h}insert(e){if(this.fe===0)return;const n=q1(e),[r,o]=G1(n);for(let c=0;c<this.hashCount;c++){const h=this.pe(r,o,c);this.we(h)}}we(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class mc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(e,n,r,o,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const o=new Map;return o.set(e,Zc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new mh(Ue.min(),o,new Lt(We),vr(),et())}}class Zc{constructor(e,n,r,o,c){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Zc(r,n,et(),et(),et())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(e,n,r,o){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=o}}class Fw{constructor(e,n){this.targetId=e,this.De=n}}class Hw{constructor(e,n,r=Cn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=o}}class X1{constructor(){this.ve=0,this.Ce=W1(),this.Fe=Cn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=et(),n=et(),r=et();return this.Ce.forEach((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:r=r.add(o);break;default:Ve(38017,{changeType:c})}}),new Zc(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=W1()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,ft(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class a4{constructor(e){this.We=e,this.Ge=new Map,this.ze=vr(),this.je=fd(),this.Je=fd(),this.He=new Lt(We)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:Ve(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,o)=>{this.nt(o)&&n(o)})}it(e){const n=e.targetId,r=e.De.count,o=this.st(n);if(o){const c=o.target;if(Qm(c))if(r===0){const h=new Ne(c.path);this.Xe(n,h,Mn.newNoDocument(h,Ue.min()))}else ft(r===1,20013,{expectedCount:r});else{const h=this.ot(n);if(h!==r){const p=this._t(e),g=p?this.ut(p,e,h):1;if(g!==0){this.rt(n);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,y)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:c=0}=n;let h,p;try{h=aa(r).toUint8Array()}catch(g){if(g instanceof mw)return ia("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{p=new Fp(h,o,c)}catch(g){return ia(g instanceof mc?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return p.fe===0?null:p}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){const r=this.We.getRemoteKeysForTarget(n);let o=0;return r.forEach(c=>{const h=this.We.lt(),p=`projects/${h.projectId}/databases/${h.database}/documents/${c.path.canonicalString()}`;e.mightContain(p)||(this.Xe(n,c,null),o++)}),o}Pt(e){const n=new Map;this.Ge.forEach((c,h)=>{const p=this.st(h);if(p){if(c.current&&Qm(p.target)){const g=new Ne(p.target.path);this.Tt(g).has(h)||this.It(h,g)||this.Xe(h,g,Mn.newNoDocument(g,e))}c.Ne&&(n.set(h,c.Le()),c.ke())}});let r=et();this.Je.forEach((c,h)=>{let p=!0;h.forEachWhile(g=>{const y=this.st(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)}),p&&(r=r.add(c))}),this.ze.forEach((c,h)=>h.setReadTime(e));const o=new mh(e,n,this.He,this.ze,r);return this.ze=vr(),this.je=fd(),this.Je=fd(),this.He=new Lt(We),o}Ze(e,n){if(!this.nt(e))return;const r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;const o=this.tt(e);this.It(e,n)?o.qe(n,1):o.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new X1,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new cn(We),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new cn(We),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||_e("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new X1),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function fd(){return new Lt(Ne.comparator)}function W1(){return new Lt(Ne.comparator)}const o4={asc:"ASCENDING",desc:"DESCENDING"},l4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},c4={and:"AND",or:"OR"};class u4{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Jm(i,e){return i.useProto3Json||oh(e)?e:{value:e}}function Xd(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function qw(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function d4(i,e){return Xd(i,e.toTimestamp())}function Ts(i){return ft(!!i,49232),Ue.fromTimestamp(function(n){const r=ra(n);return new Rt(r.seconds,r.nanos)}(i))}function Hp(i,e){return ep(i,e).canonicalString()}function ep(i,e){const n=function(o){return new Ot(["projects",o.projectId,"databases",o.database])}(i).child("documents");return e===void 0?n:n.child(e)}function Gw(i){const e=Ot.fromString(i);return ft(Yw(e),10190,{key:e.toString()}),e}function tp(i,e){return Hp(i.databaseId,e.path)}function Cm(i,e){const n=Gw(e);if(n.get(1)!==i.databaseId.projectId)throw new Te(me.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new Te(me.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new Ne(Ww(n))}function Xw(i,e){return Hp(i.databaseId,e)}function h4(i){const e=Gw(i);return e.length===4?Ot.emptyPath():Ww(e)}function np(i){return new Ot(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function Ww(i){return ft(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function Z1(i,e,n){return{name:tp(i,e),fields:n.value.mapValue.fields}}function f4(i,e){let n;if("targetChange"in e){e.targetChange;const r=function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Ve(39313,{state:y})}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],c=function(y,w){return y.useProto3Json?(ft(w===void 0||typeof w=="string",58123),Cn.fromBase64String(w||"")):(ft(w===void 0||w instanceof Buffer||w instanceof Uint8Array,16193),Cn.fromUint8Array(w||new Uint8Array))}(i,e.targetChange.resumeToken),h=e.targetChange.cause,p=h&&function(y){const w=y.code===void 0?me.UNKNOWN:zw(y.code);return new Te(w,y.message||"")}(h);n=new Hw(r,o,c,p||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=Cm(i,r.document.name),c=Ts(r.document.updateTime),h=r.document.createTime?Ts(r.document.createTime):Ue.min(),p=new Oi({mapValue:{fields:r.document.fields}}),g=Mn.newFoundDocument(o,c,h,p),y=r.targetIds||[],w=r.removedTargetIds||[];n=new Ad(y,w,g.key,g)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=Cm(i,r.document),c=r.readTime?Ts(r.readTime):Ue.min(),h=Mn.newNoDocument(o,c),p=r.removedTargetIds||[];n=new Ad([],p,h.key,h)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=Cm(i,r.document),c=r.removedTargetIds||[];n=new Ad([],c,o,null)}else{if(!("filter"in e))return Ve(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:c}=r,h=new i4(o,c),p=r.targetId;n=new Fw(p,h)}}return n}function m4(i,e){let n;if(e instanceof Wc)n={update:Z1(i,e.key,e.value)};else if(e instanceof Bw)n={delete:tp(i,e.key)};else if(e instanceof no)n={update:Z1(i,e.key,e.data),updateMask:E4(e.fieldMask)};else{if(!(e instanceof e4))return Ve(16599,{Rt:e.type});n={verify:tp(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(c,h){const p=h.transform;if(p instanceof qd)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof Mc)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof Lc)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof Gd)return{fieldPath:h.field.canonicalString(),increment:p.Ee};throw Ve(20930,{transform:h.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(o,c){return c.updateTime!==void 0?{updateTime:d4(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Ve(27497)}(i,e.precondition)),n}function p4(i,e){return i&&i.length>0?(ft(e!==void 0,14353),i.map(n=>function(o,c){let h=o.updateTime?Ts(o.updateTime):Ts(c);return h.isEqual(Ue.min())&&(h=Ts(c)),new Q5(h,o.transformResults||[])}(n,e))):[]}function g4(i,e){return{documents:[Xw(i,e.path)]}}function y4(i,e){const n={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Xw(i,o);const c=function(y){if(y.length!==0)return Kw(ks.create(y,"and"))}(e.filters);c&&(n.structuredQuery.where=c);const h=function(y){if(y.length!==0)return y.map(w=>function(A){return{field:Wo(A.field),direction:b4(A.dir)}}(w))}(e.orderBy);h&&(n.structuredQuery.orderBy=h);const p=Jm(i,e.limit);return p!==null&&(n.structuredQuery.limit=p),e.startAt&&(n.structuredQuery.startAt=function(y){return{before:y.inclusive,values:y.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(y){return{before:!y.inclusive,values:y.position}}(e.endAt)),{Vt:n,parent:o}}function v4(i){let e=h4(i.parent);const n=i.structuredQuery,r=n.from?n.from.length:0;let o=null;if(r>0){ft(r===1,65062);const w=n.from[0];w.allDescendants?o=w.collectionId:e=e.child(w.collectionId)}let c=[];n.where&&(c=function(x){const A=Zw(x);return A instanceof ks&&Sw(A)?A.getFilters():[A]}(n.where));let h=[];n.orderBy&&(h=function(x){return x.map(A=>function(z){return new Hd(Zo(z.field),function(Y){switch(Y){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(z.direction))}(A))}(n.orderBy));let p=null;n.limit&&(p=function(x){let A;return A=typeof x=="object"?x.value:x,oh(A)?null:A}(n.limit));let g=null;n.startAt&&(g=function(x){const A=!!x.before,P=x.values||[];return new Fd(P,A)}(n.startAt));let y=null;return n.endAt&&(y=function(x){const A=!x.before,P=x.values||[];return new Fd(P,A)}(n.endAt)),V5(e,o,h,c,p,"F",g,y)}function _4(i,e){const n=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ve(28987,{purpose:o})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Zw(i){return i.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Zo(n.unaryFilter.field);return ln.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=Zo(n.unaryFilter.field);return ln.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Zo(n.unaryFilter.field);return ln.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=Zo(n.unaryFilter.field);return ln.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ve(61313);default:return Ve(60726)}}(i):i.fieldFilter!==void 0?function(n){return ln.create(Zo(n.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ve(58110);default:return Ve(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(i):i.compositeFilter!==void 0?function(n){return ks.create(n.compositeFilter.filters.map(r=>Zw(r)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ve(1026)}}(n.compositeFilter.op))}(i):Ve(30097,{filter:i})}function b4(i){return o4[i]}function w4(i){return l4[i]}function x4(i){return c4[i]}function Wo(i){return{fieldPath:i.canonicalString()}}function Zo(i){return Rn.fromServerFormat(i.fieldPath)}function Kw(i){return i instanceof ln?function(n){if(n.op==="=="){if(M1(n.value))return{unaryFilter:{field:Wo(n.field),op:"IS_NAN"}};if(O1(n.value))return{unaryFilter:{field:Wo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(M1(n.value))return{unaryFilter:{field:Wo(n.field),op:"IS_NOT_NAN"}};if(O1(n.value))return{unaryFilter:{field:Wo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Wo(n.field),op:w4(n.op),value:n.value}}}(i):i instanceof ks?function(n){const r=n.getFilters().map(o=>Kw(o));return r.length===1?r[0]:{compositeFilter:{op:x4(n.op),filters:r}}}(i):Ve(54877,{filter:i})}function E4(i){const e=[];return i.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Yw(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(e,n,r,o,c=Ue.min(),h=Ue.min(),p=Cn.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=p,this.expectedCount=g}withSequenceNumber(e){return new Qr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Qr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Qr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Qr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S4{constructor(e){this.gt=e}}function A4(i){const e=v4({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?$m(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T4{constructor(){this.Dn=new R4}addToCollectionParentIndex(e,n){return this.Dn.add(n),he.resolve()}getCollectionParents(e,n){return he.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return he.resolve()}deleteFieldIndex(e,n){return he.resolve()}deleteAllFieldIndexes(e){return he.resolve()}createTargetIndexes(e,n){return he.resolve()}getDocumentsMatchingTarget(e,n){return he.resolve(null)}getIndexType(e,n){return he.resolve(0)}getFieldIndexes(e,n){return he.resolve([])}getNextCollectionGroupToUpdate(e){return he.resolve(null)}getMinOffset(e,n){return he.resolve(sa.min())}getMinOffsetFromCollectionGroup(e,n){return he.resolve(sa.min())}updateCollectionGroup(e,n,r){return he.resolve()}updateIndexEntries(e,n){return he.resolve()}}class R4{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),o=this.index[n]||new cn(Ot.comparator),c=!o.has(r);return this.index[n]=o.add(r),c}has(e){const n=e.lastSegment(),r=e.popLast(),o=this.index[n];return o&&o.has(r)}getEntries(e){return(this.index[e]||new cn(Ot.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Qw=41943040;class ii{static withCacheSize(e){return new ii(e,ii.DEFAULT_COLLECTION_PERCENTILE,ii.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ii.DEFAULT_COLLECTION_PERCENTILE=10,ii.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ii.DEFAULT=new ii(Qw,ii.DEFAULT_COLLECTION_PERCENTILE,ii.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ii.DISABLED=new ii(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new il(0)}static ur(){return new il(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y1="LruGarbageCollector",C4=1048576;function Q1([i,e],[n,r]){const o=We(i,n);return o===0?We(e,r):o}class I4{constructor(e){this.Tr=e,this.buffer=new cn(Q1),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Q1(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class N4{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){_e(Y1,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){dl(n)?_e(Y1,"Ignoring IndexedDB error during garbage collection: ",n):await ul(n)}await this.Rr(3e5)})}}class k4{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return he.resolve(ah.ue);const r=new I4(n);return this.Vr.forEachTarget(e,o=>r.Er(o.sequenceNumber)).next(()=>this.Vr.gr(e,o=>r.Er(o))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(_e("LruGarbageCollector","Garbage collection skipped; disabled"),he.resolve(K1)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(_e("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),K1):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,o,c,h,p,g,y;const w=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(x=>(x>this.params.maximumSequenceNumbersToCollect?(_e("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),o=this.params.maximumSequenceNumbersToCollect):o=x,h=Date.now(),this.nthSequenceNumber(e,o))).next(x=>(r=x,p=Date.now(),this.removeTargets(e,r,n))).next(x=>(c=x,g=Date.now(),this.removeOrphanedDocuments(e,r))).next(x=>(y=Date.now(),Go()<=Je.DEBUG&&_e("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-w}ms
	Determined least recently used ${o} in `+(p-h)+`ms
	Removed ${c} targets in `+(g-p)+`ms
	Removed ${x} documents in `+(y-g)+`ms
Total Duration: ${y-w}ms`),he.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:x})))}}function D4(i,e){return new k4(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j4{constructor(){this.changes=new to(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Mn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?he.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O4{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M4{constructor(e,n,r,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(o=>(r=o,this.remoteDocumentCache.getEntry(e,n))).next(o=>(r!==null&&Ec(r.mutation,o,Ji.empty(),Rt.now()),o))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,et()).next(()=>r))}getLocalViewOfDocuments(e,n,r=et()){const o=Fa();return this.populateOverlays(e,o,n).next(()=>this.computeViews(e,n,o,r).next(c=>{let h=fc();return c.forEach((p,g)=>{h=h.insert(p,g.overlayedDocument)}),h}))}getOverlayedDocuments(e,n){const r=Fa();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,et()))}populateOverlays(e,n,r){const o=[];return r.forEach(c=>{n.has(c)||o.push(c)}),this.documentOverlayCache.getOverlays(e,o).next(c=>{c.forEach((h,p)=>{n.set(h,p)})})}computeViews(e,n,r,o){let c=vr();const h=xc(),p=function(){return xc()}();return n.forEach((g,y)=>{const w=r.get(y.key);o.has(y.key)&&(w===void 0||w.mutation instanceof no)?c=c.insert(y.key,y):w!==void 0?(h.set(y.key,w.mutation.getFieldMask()),Ec(w.mutation,y,w.mutation.getFieldMask(),Rt.now())):h.set(y.key,Ji.empty())}),this.recalculateAndSaveOverlays(e,c).next(g=>(g.forEach((y,w)=>h.set(y,w)),n.forEach((y,w)=>{var x;return p.set(y,new O4(w,(x=h.get(y))!==null&&x!==void 0?x:null))}),p))}recalculateAndSaveOverlays(e,n){const r=xc();let o=new Lt((h,p)=>h-p),c=et();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(h=>{for(const p of h)p.keys().forEach(g=>{const y=n.get(g);if(y===null)return;let w=r.get(g)||Ji.empty();w=p.applyToLocalView(y,w),r.set(g,w);const x=(o.get(p.batchId)||et()).add(g);o=o.insert(p.batchId,x)})}).next(()=>{const h=[],p=o.getReverseIterator();for(;p.hasNext();){const g=p.getNext(),y=g.key,w=g.value,x=Dw();w.forEach(A=>{if(!c.has(A)){const P=Pw(n.get(A),r.get(A));P!==null&&x.set(A,P),c=c.add(A)}}),h.push(this.documentOverlayCache.saveOverlays(e,y,x))}return he.waitFor(h)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,o){return function(h){return Ne.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):P5(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,o):this.getDocumentsMatchingCollectionQuery(e,n,r,o)}getNextDocuments(e,n,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,o).next(c=>{const h=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,o-c.size):he.resolve(Fa());let p=kc,g=c;return h.next(y=>he.forEach(y,(w,x)=>(p<x.largestBatchId&&(p=x.largestBatchId),c.get(w)?he.resolve():this.remoteDocumentCache.getEntry(e,w).next(A=>{g=g.insert(w,A)}))).next(()=>this.populateOverlays(e,y,c)).next(()=>this.computeViews(e,g,y,et())).next(w=>({batchId:p,changes:kw(w)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ne(n)).next(r=>{let o=fc();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,n,r,o){const c=n.collectionGroup;let h=fc();return this.indexManager.getCollectionParents(e,c).next(p=>he.forEach(p,g=>{const y=function(x,A){return new ch(A,null,x.explicitOrderBy.slice(),x.filters.slice(),x.limit,x.limitType,x.startAt,x.endAt)}(n,g.child(c));return this.getDocumentsMatchingCollectionQuery(e,y,r,o).next(w=>{w.forEach((x,A)=>{h=h.insert(x,A)})})}).next(()=>h))}getDocumentsMatchingCollectionQuery(e,n,r,o){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(h=>(c=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,c,o))).next(h=>{c.forEach((g,y)=>{const w=y.getKey();h.get(w)===null&&(h=h.insert(w,Mn.newInvalidDocument(w)))});let p=fc();return h.forEach((g,y)=>{const w=c.get(g);w!==void 0&&Ec(w.mutation,y,Ji.empty(),Rt.now()),dh(n,y)&&(p=p.insert(g,y))}),p})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L4{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return he.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(o){return{id:o.id,version:o.version,createTime:Ts(o.createTime)}}(n)),he.resolve()}getNamedQuery(e,n){return he.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(o){return{name:o.name,query:A4(o.bundledQuery),readTime:Ts(o.readTime)}}(n)),he.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V4{constructor(){this.overlays=new Lt(Ne.comparator),this.kr=new Map}getOverlay(e,n){return he.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Fa();return he.forEach(n,o=>this.getOverlay(e,o).next(c=>{c!==null&&r.set(o,c)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((o,c)=>{this.wt(e,n,c)}),he.resolve()}removeOverlaysForBatchId(e,n,r){const o=this.kr.get(r);return o!==void 0&&(o.forEach(c=>this.overlays=this.overlays.remove(c)),this.kr.delete(r)),he.resolve()}getOverlaysForCollection(e,n,r){const o=Fa(),c=n.length+1,h=new Ne(n.child("")),p=this.overlays.getIteratorFrom(h);for(;p.hasNext();){const g=p.getNext().value,y=g.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===c&&g.largestBatchId>r&&o.set(g.getKey(),g)}return he.resolve(o)}getOverlaysForCollectionGroup(e,n,r,o){let c=new Lt((y,w)=>y-w);const h=this.overlays.getIterator();for(;h.hasNext();){const y=h.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>r){let w=c.get(y.largestBatchId);w===null&&(w=Fa(),c=c.insert(y.largestBatchId,w)),w.set(y.getKey(),y)}}const p=Fa(),g=c.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((y,w)=>p.set(y,w)),!(p.size()>=o)););return he.resolve(p)}wt(e,n,r){const o=this.overlays.get(r.key);if(o!==null){const h=this.kr.get(o.largestBatchId).delete(r.key);this.kr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(r.key,new n4(n,r));let c=this.kr.get(n);c===void 0&&(c=et(),this.kr.set(n,c)),this.kr.set(n,c.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P4{constructor(){this.sessionToken=Cn.EMPTY_BYTE_STRING}getSessionToken(e){return he.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,he.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(){this.qr=new cn(vn.Qr),this.$r=new cn(vn.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const r=new vn(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new vn(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){const n=new Ne(new Ot([])),r=new vn(n,e),o=new vn(n,e+1),c=[];return this.$r.forEachInRange([r,o],h=>{this.Wr(h),c.push(h.key)}),c}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new Ne(new Ot([])),r=new vn(n,e),o=new vn(n,e+1);let c=et();return this.$r.forEachInRange([r,o],h=>{c=c.add(h.key)}),c}containsKey(e){const n=new vn(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class vn{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return Ne.comparator(e.key,n.key)||We(e.Hr,n.Hr)}static Ur(e,n){return We(e.Hr,n.Hr)||Ne.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U4{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new cn(vn.Qr)}checkEmpty(e){return he.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,o){const c=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new t4(c,n,r,o);this.mutationQueue.push(h);for(const p of o)this.Yr=this.Yr.add(new vn(p.key,c)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return he.resolve(h)}lookupMutationBatch(e,n){return he.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,o=this.Xr(r),c=o<0?0:o;return he.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return he.resolve(this.mutationQueue.length===0?Op:this.er-1)}getAllMutationBatches(e){return he.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new vn(n,0),o=new vn(n,Number.POSITIVE_INFINITY),c=[];return this.Yr.forEachInRange([r,o],h=>{const p=this.Zr(h.Hr);c.push(p)}),he.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new cn(We);return n.forEach(o=>{const c=new vn(o,0),h=new vn(o,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([c,h],p=>{r=r.add(p.Hr)})}),he.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,o=r.length+1;let c=r;Ne.isDocumentKey(c)||(c=c.child(""));const h=new vn(new Ne(c),0);let p=new cn(We);return this.Yr.forEachWhile(g=>{const y=g.key.path;return!!r.isPrefixOf(y)&&(y.length===o&&(p=p.add(g.Hr)),!0)},h),he.resolve(this.ei(p))}ei(e){const n=[];return e.forEach(r=>{const o=this.Zr(r);o!==null&&n.push(o)}),n}removeMutationBatch(e,n){ft(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return he.forEach(n.mutations,o=>{const c=new vn(o.key,n.batchId);return r=r.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){const r=new vn(n,0),o=this.Yr.firstAfterOrEqual(r);return he.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,he.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B4{constructor(e){this.ni=e,this.docs=function(){return new Lt(Ne.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,o=this.docs.get(r),c=o?o.size:0,h=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:h}),this.size+=h-c,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return he.resolve(r?r.document.mutableCopy():Mn.newInvalidDocument(n))}getEntries(e,n){let r=vr();return n.forEach(o=>{const c=this.docs.get(o);r=r.insert(o,c?c.document.mutableCopy():Mn.newInvalidDocument(o))}),he.resolve(r)}getDocumentsMatchingQuery(e,n,r,o){let c=vr();const h=n.path,p=new Ne(h.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(p);for(;g.hasNext();){const{key:y,value:{document:w}}=g.getNext();if(!h.isPrefixOf(y.path))break;y.path.length>h.length+1||p5(m5(w),r)<=0||(o.has(w.key)||dh(n,w))&&(c=c.insert(w.key,w.mutableCopy()))}return he.resolve(c)}getAllFromCollectionGroup(e,n,r,o){Ve(9500)}ri(e,n){return he.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new z4(this)}getSize(e){return he.resolve(this.size)}}class z4 extends j4{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?n.push(this.Or.addEntry(e,o)):this.Or.removeEntry(r)}),he.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F4{constructor(e){this.persistence=e,this.ii=new to(n=>Vp(n),Pp),this.lastRemoteSnapshotVersion=Ue.min(),this.highestTargetId=0,this.si=0,this.oi=new qp,this.targetCount=0,this._i=il.ar()}forEachTarget(e,n){return this.ii.forEach((r,o)=>n(o)),he.resolve()}getLastRemoteSnapshotVersion(e){return he.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return he.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),he.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),he.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new il(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,he.resolve()}updateTargetData(e,n){return this.hr(n),he.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,he.resolve()}removeTargets(e,n,r){let o=0;const c=[];return this.ii.forEach((h,p)=>{p.sequenceNumber<=n&&r.get(p.targetId)===null&&(this.ii.delete(h),c.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)}),he.waitFor(c).next(()=>o)}getTargetCount(e){return he.resolve(this.targetCount)}getTargetData(e,n){const r=this.ii.get(n)||null;return he.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),he.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);const o=this.persistence.referenceDelegate,c=[];return o&&n.forEach(h=>{c.push(o.markPotentiallyOrphaned(e,h))}),he.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),he.resolve()}getMatchingKeysForTargetId(e,n){const r=this.oi.Jr(n);return he.resolve(r)}containsKey(e,n){return he.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(e,n){this.ai={},this.overlays={},this.ui=new ah(0),this.ci=!1,this.ci=!0,this.li=new P4,this.referenceDelegate=e(this),this.hi=new F4(this),this.indexManager=new T4,this.remoteDocumentCache=function(o){return new B4(o)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new S4(n),this.Ti=new L4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new V4,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new U4(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){_e("MemoryPersistence","Starting transaction:",e);const o=new H4(this.ui.next());return this.referenceDelegate.Ii(),r(o).next(c=>this.referenceDelegate.di(o).next(()=>c)).toPromise().then(c=>(o.raiseOnCommittedEvent(),c))}Ei(e,n){return he.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}}class H4 extends y5{constructor(e){super(),this.currentSequenceNumber=e}}class Gp{constructor(e){this.persistence=e,this.Ai=new qp,this.Ri=null}static Vi(e){return new Gp(e)}get mi(){if(this.Ri)return this.Ri;throw Ve(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),he.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),he.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),he.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(o=>this.mi.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(o=>{o.forEach(c=>this.mi.add(c.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return he.forEach(this.mi,r=>{const o=Ne.fromPath(r);return this.fi(e,o).next(c=>{c||n.removeEntry(o,Ue.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return he.or([()=>he.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Wd{constructor(e,n){this.persistence=e,this.gi=new to(r=>b5(r.path),(r,o)=>r.isEqual(o)),this.garbageCollector=D4(this,n)}static Vi(e,n){return new Wd(e,n)}Ii(){}di(e){return he.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(o=>r+o))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return he.forEach(this.gi,(r,o)=>this.Sr(e,r,o).next(c=>c?he.resolve():n(o)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const o=this.persistence.getRemoteDocumentCache(),c=o.newChangeBuffer();return o.ri(e,h=>this.Sr(e,h,n).next(p=>{p||(r++,c.removeEntry(h,Ue.min()))})).next(()=>c.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),he.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),he.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),he.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),he.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=xd(e.data.value)),n}Sr(e,n,r){return he.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.gi.get(n);return he.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(e,n,r,o){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=o}static Es(e,n){let r=et(),o=et();for(const c of n.docChanges)switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new Xp(e,n.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G4{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return tA()?8:v5(Ln())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,o){const c={result:null};return this.ps(e,n).next(h=>{c.result=h}).next(()=>{if(!c.result)return this.ys(e,n,o,r).next(h=>{c.result=h})}).next(()=>{if(c.result)return;const h=new q4;return this.ws(e,n,h).next(p=>{if(c.result=p,this.Rs)return this.Ss(e,n,h,p.size)})}).next(()=>c.result)}Ss(e,n,r,o){return r.documentReadCount<this.Vs?(Go()<=Je.DEBUG&&_e("QueryEngine","SDK will not create cache indexes for query:",Xo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),he.resolve()):(Go()<=Je.DEBUG&&_e("QueryEngine","Query:",Xo(n),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.fs*o?(Go()<=Je.DEBUG&&_e("QueryEngine","The SDK decides to create cache indexes for query:",Xo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,As(n))):he.resolve())}ps(e,n){if(U1(n))return he.resolve(null);let r=As(n);return this.indexManager.getIndexType(e,r).next(o=>o===0?null:(n.limit!==null&&o===1&&(n=$m(n,null,"F"),r=As(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(c=>{const h=et(...c);return this.gs.getDocuments(e,h).next(p=>this.indexManager.getMinOffset(e,r).next(g=>{const y=this.bs(n,p);return this.Ds(n,y,h,g.readTime)?this.ps(e,$m(n,null,"F")):this.vs(e,y,n,g)}))})))}ys(e,n,r,o){return U1(n)||o.isEqual(Ue.min())?he.resolve(null):this.gs.getDocuments(e,r).next(c=>{const h=this.bs(n,c);return this.Ds(n,h,r,o)?he.resolve(null):(Go()<=Je.DEBUG&&_e("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Xo(n)),this.vs(e,h,n,f5(o,kc)).next(p=>p))})}bs(e,n){let r=new cn(Iw(e));return n.forEach((o,c)=>{dh(e,c)&&(r=r.add(c))}),r}Ds(e,n,r,o){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}ws(e,n,r){return Go()<=Je.DEBUG&&_e("QueryEngine","Using full collection scan to execute query:",Xo(n)),this.gs.getDocumentsMatchingQuery(e,n,sa.min(),r)}vs(e,n,r,o){return this.gs.getDocumentsMatchingQuery(e,r,o).next(c=>(n.forEach(h=>{c=c.insert(h.key,h)}),c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wp="LocalStore",X4=3e8;class W4{constructor(e,n,r,o){this.persistence=e,this.Cs=n,this.serializer=o,this.Fs=new Lt(We),this.Ms=new to(c=>Vp(c),Pp),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new M4(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function Z4(i,e,n,r){return new W4(i,e,n,r)}async function Jw(i,e){const n=Be(i);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let o;return n.mutationQueue.getAllMutationBatches(r).next(c=>(o=c,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(c=>{const h=[],p=[];let g=et();for(const y of o){h.push(y.batchId);for(const w of y.mutations)g=g.add(w.key)}for(const y of c){p.push(y.batchId);for(const w of y.mutations)g=g.add(w.key)}return n.localDocuments.getDocuments(r,g).next(y=>({Bs:y,removedBatchIds:h,addedBatchIds:p}))})})}function K4(i,e){const n=Be(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),c=n.Os.newChangeBuffer({trackRemovals:!0});return function(p,g,y,w){const x=y.batch,A=x.keys();let P=he.resolve();return A.forEach(z=>{P=P.next(()=>w.getEntry(g,z)).next(H=>{const Y=y.docVersions.get(z);ft(Y!==null,48541),H.version.compareTo(Y)<0&&(x.applyToRemoteDocument(H,y),H.isValidDocument()&&(H.setReadTime(y.commitVersion),w.addEntry(H)))})}),P.next(()=>p.mutationQueue.removeMutationBatch(g,x))}(n,r,e,c).next(()=>c.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(p){let g=et();for(let y=0;y<p.mutationResults.length;++y)p.mutationResults[y].transformResults.length>0&&(g=g.add(p.batch.mutations[y].key));return g}(e))).next(()=>n.localDocuments.getDocuments(r,o))})}function e2(i){const e=Be(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function Y4(i,e){const n=Be(i),r=e.snapshotVersion;let o=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const h=n.Os.newChangeBuffer({trackRemovals:!0});o=n.Fs;const p=[];e.targetChanges.forEach((w,x)=>{const A=o.get(x);if(!A)return;p.push(n.hi.removeMatchingKeys(c,w.removedDocuments,x).next(()=>n.hi.addMatchingKeys(c,w.addedDocuments,x)));let P=A.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(x)!==null?P=P.withResumeToken(Cn.EMPTY_BYTE_STRING,Ue.min()).withLastLimboFreeSnapshotVersion(Ue.min()):w.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(w.resumeToken,r)),o=o.insert(x,P),function(H,Y,$){return H.resumeToken.approximateByteSize()===0||Y.snapshotVersion.toMicroseconds()-H.snapshotVersion.toMicroseconds()>=X4?!0:$.addedDocuments.size+$.modifiedDocuments.size+$.removedDocuments.size>0}(A,P,w)&&p.push(n.hi.updateTargetData(c,P))});let g=vr(),y=et();if(e.documentUpdates.forEach(w=>{e.resolvedLimboDocuments.has(w)&&p.push(n.persistence.referenceDelegate.updateLimboDocument(c,w))}),p.push(Q4(c,h,e.documentUpdates).next(w=>{g=w.Ls,y=w.ks})),!r.isEqual(Ue.min())){const w=n.hi.getLastRemoteSnapshotVersion(c).next(x=>n.hi.setTargetsMetadata(c,c.currentSequenceNumber,r));p.push(w)}return he.waitFor(p).next(()=>h.apply(c)).next(()=>n.localDocuments.getLocalViewOfDocuments(c,g,y)).next(()=>g)}).then(c=>(n.Fs=o,c))}function Q4(i,e,n){let r=et(),o=et();return n.forEach(c=>r=r.add(c)),e.getEntries(i,r).next(c=>{let h=vr();return n.forEach((p,g)=>{const y=c.get(p);g.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(p)),g.isNoDocument()&&g.version.isEqual(Ue.min())?(e.removeEntry(p,g.readTime),h=h.insert(p,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),h=h.insert(p,g)):_e(Wp,"Ignoring outdated watch update for ",p,". Current version:",y.version," Watch version:",g.version)}),{Ls:h,ks:o}})}function $4(i,e){const n=Be(i);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Op),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function J4(i,e){const n=Be(i);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return n.hi.getTargetData(r,e).next(c=>c?(o=c,he.resolve(o)):n.hi.allocateTargetId(r).next(h=>(o=new Qr(e,h,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=n.Fs.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}async function ip(i,e,n){const r=Be(i),o=r.Fs.get(e),c=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",c,h=>r.persistence.referenceDelegate.removeTarget(h,o))}catch(h){if(!dl(h))throw h;_e(Wp,`Failed to update sequence numbers for target ${e}: ${h}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(o.target)}function $1(i,e,n){const r=Be(i);let o=Ue.min(),c=et();return r.persistence.runTransaction("Execute query","readwrite",h=>function(g,y,w){const x=Be(g),A=x.Ms.get(w);return A!==void 0?he.resolve(x.Fs.get(A)):x.hi.getTargetData(y,w)}(r,h,As(e)).next(p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(h,p.targetId).next(g=>{c=g})}).next(()=>r.Cs.getDocumentsMatchingQuery(h,e,n?o:Ue.min(),n?c:et())).next(p=>(e6(r,B5(e),p),{documents:p,qs:c})))}function e6(i,e,n){let r=i.xs.get(e)||Ue.min();n.forEach((o,c)=>{c.readTime.compareTo(r)>0&&(r=c.readTime)}),i.xs.set(e,r)}class J1{constructor(){this.activeTargetIds=X5()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class t6{constructor(){this.Fo=new J1,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new J1,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n6{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e_="ConnectivityMonitor";class t_{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){_e(e_,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){_e(e_,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let md=null;function sp(){return md===null?md=function(){return 268435456+Math.round(2147483648*Math.random())}():md++,"0x"+md.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Im="RestConnection",i6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class s6{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${o}`,this.Ko=this.databaseId.database===Bd?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Wo(e,n,r,o,c){const h=sp(),p=this.Go(e,n.toUriEncodedString());_e(Im,`Sending RPC '${e}' ${h}:`,p,r);const g={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(g,o,c);const{host:y}=new URL(p),w=al(y);return this.jo(e,p,g,r,w).then(x=>(_e(Im,`Received RPC '${e}' ${h}: `,x),x),x=>{throw ia(Im,`RPC '${e}' ${h} failed with error: `,x,"url: ",p,"request:",r),x})}Jo(e,n,r,o,c,h){return this.Wo(e,n,r,o,c)}zo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+cl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((o,c)=>e[c]=o),r&&r.headers.forEach((o,c)=>e[c]=o)}Go(e,n){const r=i6[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r6{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jn="WebChannelConnection";class a6 extends s6{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,o,c){const h=sp();return new Promise((p,g)=>{const y=new iw;y.setWithCredentials(!0),y.listenOnce(sw.COMPLETE,()=>{try{switch(y.getLastErrorCode()){case wd.NO_ERROR:const x=y.getResponseJson();_e(jn,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(x)),p(x);break;case wd.TIMEOUT:_e(jn,`RPC '${e}' ${h} timed out`),g(new Te(me.DEADLINE_EXCEEDED,"Request time out"));break;case wd.HTTP_ERROR:const A=y.getStatus();if(_e(jn,`RPC '${e}' ${h} failed with status:`,A,"response text:",y.getResponseText()),A>0){let P=y.getResponseJson();Array.isArray(P)&&(P=P[0]);const z=P==null?void 0:P.error;if(z&&z.status&&z.message){const H=function($){const Z=$.toLowerCase().replace(/_/g,"-");return Object.values(me).indexOf(Z)>=0?Z:me.UNKNOWN}(z.status);g(new Te(H,z.message))}else g(new Te(me.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new Te(me.UNAVAILABLE,"Connection failed."));break;default:Ve(9055,{c_:e,streamId:h,l_:y.getLastErrorCode(),h_:y.getLastError()})}}finally{_e(jn,`RPC '${e}' ${h} completed.`)}});const w=JSON.stringify(o);_e(jn,`RPC '${e}' ${h} sending request:`,o),y.send(n,"POST",w,r,15)})}P_(e,n,r){const o=sp(),c=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=ow(),p=aw(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(g.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(g.useFetchStreams=!0),this.zo(g.initMessageHeaders,n,r),g.encodeInitMessageHeaders=!0;const w=c.join("");_e(jn,`Creating RPC '${e}' stream ${o}: ${w}`,g);const x=h.createWebChannel(w,g);this.T_(x);let A=!1,P=!1;const z=new r6({Ho:Y=>{P?_e(jn,`Not sending because RPC '${e}' stream ${o} is closed:`,Y):(A||(_e(jn,`Opening RPC '${e}' stream ${o} transport.`),x.open(),A=!0),_e(jn,`RPC '${e}' stream ${o} sending:`,Y),x.send(Y))},Yo:()=>x.close()}),H=(Y,$,Z)=>{Y.listen($,X=>{try{Z(X)}catch(te){setTimeout(()=>{throw te},0)}})};return H(x,hc.EventType.OPEN,()=>{P||(_e(jn,`RPC '${e}' stream ${o} transport opened.`),z.s_())}),H(x,hc.EventType.CLOSE,()=>{P||(P=!0,_e(jn,`RPC '${e}' stream ${o} transport closed`),z.__(),this.I_(x))}),H(x,hc.EventType.ERROR,Y=>{P||(P=!0,ia(jn,`RPC '${e}' stream ${o} transport errored. Name:`,Y.name,"Message:",Y.message),z.__(new Te(me.UNAVAILABLE,"The operation could not be completed")))}),H(x,hc.EventType.MESSAGE,Y=>{var $;if(!P){const Z=Y.data[0];ft(!!Z,16349);const X=Z,te=(X==null?void 0:X.error)||(($=X[0])===null||$===void 0?void 0:$.error);if(te){_e(jn,`RPC '${e}' stream ${o} received error:`,te);const le=te.status;let pe=function(C){const M=$t[C];if(M!==void 0)return zw(M)}(le),k=te.message;pe===void 0&&(pe=me.INTERNAL,k="Unknown error status: "+le+" with message "+te.message),P=!0,z.__(new Te(pe,k)),x.close()}else _e(jn,`RPC '${e}' stream ${o} received:`,Z),z.a_(Z)}}),H(p,rw.STAT_EVENT,Y=>{Y.stat===Xm.PROXY?_e(jn,`RPC '${e}' stream ${o} detected buffering proxy`):Y.stat===Xm.NOPROXY&&_e(jn,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{z.o_()},0),z}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}function Nm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ph(i){return new u4(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{constructor(e,n,r=1e3,o=1.5,c=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=o,this.A_=c,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),o=Math.max(0,n-r);o>0&&_e("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,o,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n_="PersistentStream";class n2{constructor(e,n,r,o,c,h,p,g){this.Fi=e,this.w_=r,this.S_=o,this.connection=c,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=p,this.listener=g,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new t2(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===me.RESOURCE_EXHAUSTED?(yr(n.toString()),yr("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===me.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.b_===n&&this.W_(r,o)},r=>{e(()=>{const o=new Te(me.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(o)})})}W_(e,n){const r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(o=>{r(()=>this.G_(o))}),this.stream.onMessage(o=>{r(()=>++this.C_==1?this.j_(o):this.onNext(o))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return _e(n_,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(_e(n_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class o6 extends n2{constructor(e,n,r,o,c,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,o,h),this.serializer=c}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=f4(this.serializer,e),r=function(c){if(!("targetChange"in c))return Ue.min();const h=c.targetChange;return h.targetIds&&h.targetIds.length?Ue.min():h.readTime?Ts(h.readTime):Ue.min()}(e);return this.listener.J_(n,r)}H_(e){const n={};n.database=np(this.serializer),n.addTarget=function(c,h){let p;const g=h.target;if(p=Qm(g)?{documents:g4(c,g)}:{query:y4(c,g).Vt},p.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){p.resumeToken=qw(c,h.resumeToken);const y=Jm(c,h.expectedCount);y!==null&&(p.expectedCount=y)}else if(h.snapshotVersion.compareTo(Ue.min())>0){p.readTime=Xd(c,h.snapshotVersion.toTimestamp());const y=Jm(c,h.expectedCount);y!==null&&(p.expectedCount=y)}return p}(this.serializer,e);const r=_4(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){const n={};n.database=np(this.serializer),n.removeTarget=e,this.k_(n)}}class l6 extends n2{constructor(e,n,r,o,c,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,o,h),this.serializer=c}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return ft(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ft(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){ft(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=p4(e.writeResults,e.commitTime),r=Ts(e.commitTime);return this.listener.ta(r,n)}na(){const e={};e.database=np(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>m4(this.serializer,r))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c6{}class u6 extends c6{constructor(e,n,r,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=o,this.ra=!1}ia(){if(this.ra)throw new Te(me.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,h])=>this.connection.Wo(e,ep(n,r),o,c,h)).catch(c=>{throw c.name==="FirebaseError"?(c.code===me.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Te(me.UNKNOWN,c.toString())})}Jo(e,n,r,o,c){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,p])=>this.connection.Jo(e,ep(n,r),o,h,p,c)).catch(h=>{throw h.name==="FirebaseError"?(h.code===me.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new Te(me.UNKNOWN,h.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class d6{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(yr(n),this._a=!1):_e("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ka="RemoteStore";class h6{constructor(e,n,r,o,c){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=c,this.Ea.xo(h=>{r.enqueueAndForget(async()=>{io(this)&&(_e(Ka,"Restarting streams for network reachability change."),await async function(g){const y=Be(g);y.Ia.add(4),await Kc(y),y.Aa.set("Unknown"),y.Ia.delete(4),await gh(y)}(this))})}),this.Aa=new d6(r,o)}}async function gh(i){if(io(i))for(const e of i.da)await e(!0)}async function Kc(i){for(const e of i.da)await e(!1)}function i2(i,e){const n=Be(i);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),Qp(n)?Yp(n):hl(n).x_()&&Kp(n,e))}function Zp(i,e){const n=Be(i),r=hl(n);n.Ta.delete(e),r.x_()&&s2(n,e),n.Ta.size===0&&(r.x_()?r.B_():io(n)&&n.Aa.set("Unknown"))}function Kp(i,e){if(i.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ue.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}hl(i).H_(e)}function s2(i,e){i.Ra.$e(e),hl(i).Y_(e)}function Yp(i){i.Ra=new a4({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>i.Ta.get(e)||null,lt:()=>i.datastore.serializer.databaseId}),hl(i).start(),i.Aa.aa()}function Qp(i){return io(i)&&!hl(i).M_()&&i.Ta.size>0}function io(i){return Be(i).Ia.size===0}function r2(i){i.Ra=void 0}async function f6(i){i.Aa.set("Online")}async function m6(i){i.Ta.forEach((e,n)=>{Kp(i,e)})}async function p6(i,e){r2(i),Qp(i)?(i.Aa.la(e),Yp(i)):i.Aa.set("Unknown")}async function g6(i,e,n){if(i.Aa.set("Online"),e instanceof Hw&&e.state===2&&e.cause)try{await async function(o,c){const h=c.cause;for(const p of c.targetIds)o.Ta.has(p)&&(await o.remoteSyncer.rejectListen(p,h),o.Ta.delete(p),o.Ra.removeTarget(p))}(i,e)}catch(r){_e(Ka,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Zd(i,r)}else if(e instanceof Ad?i.Ra.Ye(e):e instanceof Fw?i.Ra.it(e):i.Ra.et(e),!n.isEqual(Ue.min()))try{const r=await e2(i.localStore);n.compareTo(r)>=0&&await function(c,h){const p=c.Ra.Pt(h);return p.targetChanges.forEach((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const w=c.Ta.get(y);w&&c.Ta.set(y,w.withResumeToken(g.resumeToken,h))}}),p.targetMismatches.forEach((g,y)=>{const w=c.Ta.get(g);if(!w)return;c.Ta.set(g,w.withResumeToken(Cn.EMPTY_BYTE_STRING,w.snapshotVersion)),s2(c,g);const x=new Qr(w.target,g,y,w.sequenceNumber);Kp(c,x)}),c.remoteSyncer.applyRemoteEvent(p)}(i,n)}catch(r){_e(Ka,"Failed to raise snapshot:",r),await Zd(i,r)}}async function Zd(i,e,n){if(!dl(e))throw e;i.Ia.add(1),await Kc(i),i.Aa.set("Offline"),n||(n=()=>e2(i.localStore)),i.asyncQueue.enqueueRetryable(async()=>{_e(Ka,"Retrying IndexedDB access"),await n(),i.Ia.delete(1),await gh(i)})}function a2(i,e){return e().catch(n=>Zd(i,n,e))}async function yh(i){const e=Be(i),n=la(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Op;for(;y6(e);)try{const o=await $4(e.localStore,r);if(o===null){e.Pa.length===0&&n.B_();break}r=o.batchId,v6(e,o)}catch(o){await Zd(e,o)}o2(e)&&l2(e)}function y6(i){return io(i)&&i.Pa.length<10}function v6(i,e){i.Pa.push(e);const n=la(i);n.x_()&&n.Z_&&n.X_(e.mutations)}function o2(i){return io(i)&&!la(i).M_()&&i.Pa.length>0}function l2(i){la(i).start()}async function _6(i){la(i).na()}async function b6(i){const e=la(i);for(const n of i.Pa)e.X_(n.mutations)}async function w6(i,e,n){const r=i.Pa.shift(),o=zp.from(r,e,n);await a2(i,()=>i.remoteSyncer.applySuccessfulWrite(o)),await yh(i)}async function x6(i,e){e&&la(i).Z_&&await async function(r,o){if(function(h){return s4(h)&&h!==me.ABORTED}(o.code)){const c=r.Pa.shift();la(r).N_(),await a2(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,o)),await yh(r)}}(i,e),o2(i)&&l2(i)}async function i_(i,e){const n=Be(i);n.asyncQueue.verifyOperationInProgress(),_e(Ka,"RemoteStore received new credentials");const r=io(n);n.Ia.add(3),await Kc(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await gh(n)}async function E6(i,e){const n=Be(i);e?(n.Ia.delete(2),await gh(n)):e||(n.Ia.add(2),await Kc(n),n.Aa.set("Unknown"))}function hl(i){return i.Va||(i.Va=function(n,r,o){const c=Be(n);return c.ia(),new o6(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)}(i.datastore,i.asyncQueue,{Zo:f6.bind(null,i),e_:m6.bind(null,i),n_:p6.bind(null,i),J_:g6.bind(null,i)}),i.da.push(async e=>{e?(i.Va.N_(),Qp(i)?Yp(i):i.Aa.set("Unknown")):(await i.Va.stop(),r2(i))})),i.Va}function la(i){return i.ma||(i.ma=function(n,r,o){const c=Be(n);return c.ia(),new l6(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)}(i.datastore,i.asyncQueue,{Zo:()=>Promise.resolve(),e_:_6.bind(null,i),n_:x6.bind(null,i),ea:b6.bind(null,i),ta:w6.bind(null,i)}),i.da.push(async e=>{e?(i.ma.N_(),await yh(i)):(await i.ma.stop(),i.Pa.length>0&&(_e(Ka,`Stopping write stream with ${i.Pa.length} pending writes`),i.Pa=[]))})),i.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{constructor(e,n,r,o,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=o,this.removalCallback=c,this.deferred=new ta,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,o,c){const h=Date.now()+r,p=new $p(e,n,h,o,c);return p.start(r),p}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Te(me.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Jp(i,e){if(yr("AsyncQueue",`${e}: ${i}`),dl(i))return new Te(me.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{static emptySet(e){return new Jo(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Ne.comparator(n.key,r.key):(n,r)=>Ne.comparator(n.key,r.key),this.keyedMap=fc(),this.sortedSet=new Lt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Jo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=r.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Jo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s_{constructor(){this.fa=new Lt(Ne.comparator)}track(e){const n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):Ve(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}}class sl{constructor(e,n,r,o,c,h,p,g,y){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=c,this.fromCache=h,this.syncStateChanged=p,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,n,r,o,c){const h=[];return n.forEach(p=>{h.push({type:0,doc:p})}),new sl(e,n,Jo.emptySet(n),h,r,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&uh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==r[o].type||!n[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S6{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class A6{constructor(){this.queries=r_(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){const o=Be(n),c=o.queries;o.queries=r_(),c.forEach((h,p)=>{for(const g of p.wa)g.onError(r)})})(this,new Te(me.ABORTED,"Firestore shutting down"))}}function r_(){return new to(i=>Cw(i),uh)}async function T6(i,e){const n=Be(i);let r=3;const o=e.query;let c=n.queries.get(o);c?!c.Sa()&&e.ba()&&(r=2):(c=new S6,r=e.ba()?0:1);try{switch(r){case 0:c.ya=await n.onListen(o,!0);break;case 1:c.ya=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(h){const p=Jp(h,`Initialization of query '${Xo(e.query)}' failed`);return void e.onError(p)}n.queries.set(o,c),c.wa.push(e),e.va(n.onlineState),c.ya&&e.Ca(c.ya)&&eg(n)}async function R6(i,e){const n=Be(i),r=e.query;let o=3;const c=n.queries.get(r);if(c){const h=c.wa.indexOf(e);h>=0&&(c.wa.splice(h,1),c.wa.length===0?o=e.ba()?0:1:!c.Sa()&&e.ba()&&(o=2))}switch(o){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function C6(i,e){const n=Be(i);let r=!1;for(const o of e){const c=o.query,h=n.queries.get(c);if(h){for(const p of h.wa)p.Ca(o)&&(r=!0);h.ya=o}}r&&eg(n)}function I6(i,e,n){const r=Be(i),o=r.queries.get(e);if(o)for(const c of o.wa)c.onError(n);r.queries.delete(e)}function eg(i){i.Da.forEach(e=>{e.next()})}var rp,a_;(a_=rp||(rp={})).Fa="default",a_.Cache="cache";class N6{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new sl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=sl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==rp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(e){this.key=e}}class u2{constructor(e){this.key=e}}class k6{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=et(),this.mutatedKeys=et(),this.Xa=Iw(e),this.eu=new Jo(this.Xa)}get tu(){return this.Ha}nu(e,n){const r=n?n.ru:new s_,o=n?n.eu:this.eu;let c=n?n.mutatedKeys:this.mutatedKeys,h=o,p=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((w,x)=>{const A=o.get(w),P=dh(this.query,x)?x:null,z=!!A&&this.mutatedKeys.has(A.key),H=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let Y=!1;A&&P?A.data.isEqual(P.data)?z!==H&&(r.track({type:3,doc:P}),Y=!0):this.iu(A,P)||(r.track({type:2,doc:P}),Y=!0,(g&&this.Xa(P,g)>0||y&&this.Xa(P,y)<0)&&(p=!0)):!A&&P?(r.track({type:0,doc:P}),Y=!0):A&&!P&&(r.track({type:1,doc:A}),Y=!0,(g||y)&&(p=!0)),Y&&(P?(h=h.add(P),c=H?c.add(w):c.delete(w)):(h=h.delete(w),c=c.delete(w)))}),this.query.limit!==null)for(;h.size>this.query.limit;){const w=this.query.limitType==="F"?h.last():h.first();h=h.delete(w.key),c=c.delete(w.key),r.track({type:1,doc:w})}return{eu:h,ru:r,Ds:p,mutatedKeys:c}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,o){const c=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const h=e.ru.pa();h.sort((w,x)=>function(P,z){const H=Y=>{switch(Y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ve(20277,{At:Y})}};return H(P)-H(z)}(w.type,x.type)||this.Xa(w.doc,x.doc)),this.su(r),o=o!=null&&o;const p=n&&!o?this.ou():[],g=this.Za.size===0&&this.current&&!o?1:0,y=g!==this.Ya;return this.Ya=g,h.length!==0||y?{snapshot:new sl(this.query,e.eu,c,h,e.mutatedKeys,g===0,y,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:p}:{_u:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new s_,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=et(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new u2(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new c2(r))}),n}uu(e){this.Ha=e.qs,this.Za=et();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return sl.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const tg="SyncEngine";class D6{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class j6{constructor(e){this.key=e,this.lu=!1}}class O6{constructor(e,n,r,o,c,h){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=h,this.hu={},this.Pu=new to(p=>Cw(p),uh),this.Tu=new Map,this.Iu=new Set,this.du=new Lt(Ne.comparator),this.Eu=new Map,this.Au=new qp,this.Ru={},this.Vu=new Map,this.mu=il.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function M6(i,e,n=!0){const r=g2(i);let o;const c=r.Pu.get(e);return c?(r.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.cu()):o=await d2(r,e,n,!0),o}async function L6(i,e){const n=g2(i);await d2(n,e,!0,!1)}async function d2(i,e,n,r){const o=await J4(i.localStore,As(e)),c=o.targetId,h=i.sharedClientState.addLocalQueryTarget(c,n);let p;return r&&(p=await V6(i,e,c,h==="current",o.resumeToken)),i.isPrimaryClient&&n&&i2(i.remoteStore,o),p}async function V6(i,e,n,r,o){i.gu=(x,A,P)=>async function(H,Y,$,Z){let X=Y.view.nu($);X.Ds&&(X=await $1(H.localStore,Y.query,!1).then(({documents:k})=>Y.view.nu(k,X)));const te=Z&&Z.targetChanges.get(Y.targetId),le=Z&&Z.targetMismatches.get(Y.targetId)!=null,pe=Y.view.applyChanges(X,H.isPrimaryClient,te,le);return l_(H,Y.targetId,pe._u),pe.snapshot}(i,x,A,P);const c=await $1(i.localStore,e,!0),h=new k6(e,c.qs),p=h.nu(c.documents),g=Zc.createSynthesizedTargetChangeForCurrentChange(n,r&&i.onlineState!=="Offline",o),y=h.applyChanges(p,i.isPrimaryClient,g);l_(i,n,y._u);const w=new D6(e,n,h);return i.Pu.set(e,w),i.Tu.has(n)?i.Tu.get(n).push(e):i.Tu.set(n,[e]),y.snapshot}async function P6(i,e,n){const r=Be(i),o=r.Pu.get(e),c=r.Tu.get(o.targetId);if(c.length>1)return r.Tu.set(o.targetId,c.filter(h=>!uh(h,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await ip(r.localStore,o.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(o.targetId),n&&Zp(r.remoteStore,o.targetId),ap(r,o.targetId)}).catch(ul)):(ap(r,o.targetId),await ip(r.localStore,o.targetId,!0))}async function U6(i,e){const n=Be(i),r=n.Pu.get(e),o=n.Tu.get(r.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Zp(n.remoteStore,r.targetId))}async function B6(i,e,n){const r=W6(i);try{const o=await function(h,p){const g=Be(h),y=Rt.now(),w=p.reduce((P,z)=>P.add(z.key),et());let x,A;return g.persistence.runTransaction("Locally write mutations","readwrite",P=>{let z=vr(),H=et();return g.Os.getEntries(P,w).next(Y=>{z=Y,z.forEach(($,Z)=>{Z.isValidDocument()||(H=H.add($))})}).next(()=>g.localDocuments.getOverlayedDocuments(P,z)).next(Y=>{x=Y;const $=[];for(const Z of p){const X=J5(Z,x.get(Z.key).overlayedDocument);X!=null&&$.push(new no(Z.key,X,ww(X.value.mapValue),hr.exists(!0)))}return g.mutationQueue.addMutationBatch(P,y,$,p)}).next(Y=>{A=Y;const $=Y.applyToLocalDocumentSet(x,H);return g.documentOverlayCache.saveOverlays(P,Y.batchId,$)})}).then(()=>({batchId:A.batchId,changes:kw(x)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(h,p,g){let y=h.Ru[h.currentUser.toKey()];y||(y=new Lt(We)),y=y.insert(p,g),h.Ru[h.currentUser.toKey()]=y}(r,o.batchId,n),await Yc(r,o.changes),await yh(r.remoteStore)}catch(o){const c=Jp(o,"Failed to persist write");n.reject(c)}}async function h2(i,e){const n=Be(i);try{const r=await Y4(n.localStore,e);e.targetChanges.forEach((o,c)=>{const h=n.Eu.get(c);h&&(ft(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.lu=!0:o.modifiedDocuments.size>0?ft(h.lu,14607):o.removedDocuments.size>0&&(ft(h.lu,42227),h.lu=!1))}),await Yc(n,r,e)}catch(r){await ul(r)}}function o_(i,e,n){const r=Be(i);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const o=[];r.Pu.forEach((c,h)=>{const p=h.view.va(e);p.snapshot&&o.push(p.snapshot)}),function(h,p){const g=Be(h);g.onlineState=p;let y=!1;g.queries.forEach((w,x)=>{for(const A of x.wa)A.va(p)&&(y=!0)}),y&&eg(g)}(r.eventManager,e),o.length&&r.hu.J_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function z6(i,e,n){const r=Be(i);r.sharedClientState.updateQueryState(e,"rejected",n);const o=r.Eu.get(e),c=o&&o.key;if(c){let h=new Lt(Ne.comparator);h=h.insert(c,Mn.newNoDocument(c,Ue.min()));const p=et().add(c),g=new mh(Ue.min(),new Map,new Lt(We),h,p);await h2(r,g),r.du=r.du.remove(c),r.Eu.delete(e),ng(r)}else await ip(r.localStore,e,!1).then(()=>ap(r,e,n)).catch(ul)}async function F6(i,e){const n=Be(i),r=e.batch.batchId;try{const o=await K4(n.localStore,e);m2(n,r,null),f2(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Yc(n,o)}catch(o){await ul(o)}}async function H6(i,e,n){const r=Be(i);try{const o=await function(h,p){const g=Be(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let w;return g.mutationQueue.lookupMutationBatch(y,p).next(x=>(ft(x!==null,37113),w=x.keys(),g.mutationQueue.removeMutationBatch(y,x))).next(()=>g.mutationQueue.performConsistencyCheck(y)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(y,w,p)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,w)).next(()=>g.localDocuments.getDocuments(y,w))})}(r.localStore,e);m2(r,e,n),f2(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Yc(r,o)}catch(o){await ul(o)}}function f2(i,e){(i.Vu.get(e)||[]).forEach(n=>{n.resolve()}),i.Vu.delete(e)}function m2(i,e,n){const r=Be(i);let o=r.Ru[r.currentUser.toKey()];if(o){const c=o.get(e);c&&(n?c.reject(n):c.resolve(),o=o.remove(e)),r.Ru[r.currentUser.toKey()]=o}}function ap(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const r of i.Tu.get(e))i.Pu.delete(r),n&&i.hu.pu(r,n);i.Tu.delete(e),i.isPrimaryClient&&i.Au.zr(e).forEach(r=>{i.Au.containsKey(r)||p2(i,r)})}function p2(i,e){i.Iu.delete(e.path.canonicalString());const n=i.du.get(e);n!==null&&(Zp(i.remoteStore,n),i.du=i.du.remove(e),i.Eu.delete(n),ng(i))}function l_(i,e,n){for(const r of n)r instanceof c2?(i.Au.addReference(r.key,e),q6(i,r)):r instanceof u2?(_e(tg,"Document no longer in limbo: "+r.key),i.Au.removeReference(r.key,e),i.Au.containsKey(r.key)||p2(i,r.key)):Ve(19791,{yu:r})}function q6(i,e){const n=e.key,r=n.path.canonicalString();i.du.get(n)||i.Iu.has(r)||(_e(tg,"New document in limbo: "+n),i.Iu.add(r),ng(i))}function ng(i){for(;i.Iu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Iu.values().next().value;i.Iu.delete(e);const n=new Ne(Ot.fromString(e)),r=i.mu.next();i.Eu.set(r,new j6(n)),i.du=i.du.insert(n,r),i2(i.remoteStore,new Qr(As(Up(n.path)),r,"TargetPurposeLimboResolution",ah.ue))}}async function Yc(i,e,n){const r=Be(i),o=[],c=[],h=[];r.Pu.isEmpty()||(r.Pu.forEach((p,g)=>{h.push(r.gu(g,e,n).then(y=>{var w;if((y||n)&&r.isPrimaryClient){const x=y?!y.fromCache:(w=n==null?void 0:n.targetChanges.get(g.targetId))===null||w===void 0?void 0:w.current;r.sharedClientState.updateQueryState(g.targetId,x?"current":"not-current")}if(y){o.push(y);const x=Xp.Es(g.targetId,y);c.push(x)}}))}),await Promise.all(h),r.hu.J_(o),await async function(g,y){const w=Be(g);try{await w.persistence.runTransaction("notifyLocalViewChanges","readwrite",x=>he.forEach(y,A=>he.forEach(A.Is,P=>w.persistence.referenceDelegate.addReference(x,A.targetId,P)).next(()=>he.forEach(A.ds,P=>w.persistence.referenceDelegate.removeReference(x,A.targetId,P)))))}catch(x){if(!dl(x))throw x;_e(Wp,"Failed to update sequence numbers: "+x)}for(const x of y){const A=x.targetId;if(!x.fromCache){const P=w.Fs.get(A),z=P.snapshotVersion,H=P.withLastLimboFreeSnapshotVersion(z);w.Fs=w.Fs.insert(A,H)}}}(r.localStore,c))}async function G6(i,e){const n=Be(i);if(!n.currentUser.isEqual(e)){_e(tg,"User change. New user:",e.toKey());const r=await Jw(n.localStore,e);n.currentUser=e,function(c,h){c.Vu.forEach(p=>{p.forEach(g=>{g.reject(new Te(me.CANCELLED,h))})}),c.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Yc(n,r.Bs)}}function X6(i,e){const n=Be(i),r=n.Eu.get(e);if(r&&r.lu)return et().add(r.key);{let o=et();const c=n.Tu.get(e);if(!c)return o;for(const h of c){const p=n.Pu.get(h);o=o.unionWith(p.view.tu)}return o}}function g2(i){const e=Be(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=h2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=X6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=z6.bind(null,e),e.hu.J_=C6.bind(null,e.eventManager),e.hu.pu=I6.bind(null,e.eventManager),e}function W6(i){const e=Be(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=F6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=H6.bind(null,e),e}class Kd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ph(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return Z4(this.persistence,new G4,e.initialUser,this.serializer)}Du(e){return new $w(Gp.Vi,this.serializer)}bu(e){return new t6}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Kd.provider={build:()=>new Kd};class Z6 extends Kd{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){ft(this.persistence.referenceDelegate instanceof Wd,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new N4(r,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?ii.withCacheSize(this.cacheSizeBytes):ii.DEFAULT;return new $w(r=>Wd.Vi(r,n),this.serializer)}}class op{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>o_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=G6.bind(null,this.syncEngine),await E6(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new A6}()}createDatastore(e){const n=ph(e.databaseInfo.databaseId),r=function(c){return new a6(c)}(e.databaseInfo);return function(c,h,p,g){return new u6(c,h,p,g)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,o,c,h,p){return new h6(r,o,c,h,p)}(this.localStore,this.datastore,e.asyncQueue,n=>o_(this.syncEngine,n,0),function(){return t_.C()?new t_:new n6}())}createSyncEngine(e,n){return function(o,c,h,p,g,y,w){const x=new O6(o,c,h,p,g,y);return w&&(x.fu=!0),x}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(o){const c=Be(o);_e(Ka,"RemoteStore shutting down."),c.Ia.add(5),await Kc(c),c.Ea.shutdown(),c.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}op.provider={build:()=>new op};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K6{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):yr("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ca="FirestoreClient";class Y6{constructor(e,n,r,o,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=o,this.user=On.UNAUTHENTICATED,this.clientId=Dp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(r,async h=>{_e(ca,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h}),this.appCheckCredentials.start(r,h=>(_e(ca,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ta;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Jp(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function km(i,e){i.asyncQueue.verifyOperationInProgress(),_e(ca,"Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let r=n.initialUser;i.setCredentialChangeListener(async o=>{r.isEqual(o)||(await Jw(e.localStore,o),r=o)}),e.persistence.setDatabaseDeletedListener(()=>{ia("Terminating Firestore due to IndexedDb database deletion"),i.terminate().then(()=>{_e("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(o=>{ia("Terminating Firestore due to IndexedDb database deletion failed",o)})}),i._offlineComponents=e}async function c_(i,e){i.asyncQueue.verifyOperationInProgress();const n=await Q6(i);_e(ca,"Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener(r=>i_(e.remoteStore,r)),i.setAppCheckTokenChangeListener((r,o)=>i_(e.remoteStore,o)),i._onlineComponents=e}async function Q6(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){_e(ca,"Using user provided OfflineComponentProvider");try{await km(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(o){return o.name==="FirebaseError"?o.code===me.FAILED_PRECONDITION||o.code===me.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(n))throw n;ia("Error using user provided cache. Falling back to memory cache: "+n),await km(i,new Kd)}}else _e(ca,"Using default OfflineComponentProvider"),await km(i,new Z6(void 0));return i._offlineComponents}async function y2(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(_e(ca,"Using user provided OnlineComponentProvider"),await c_(i,i._uninitializedComponentsProvider._online)):(_e(ca,"Using default OnlineComponentProvider"),await c_(i,new op))),i._onlineComponents}function $6(i){return y2(i).then(e=>e.syncEngine)}async function J6(i){const e=await y2(i),n=e.eventManager;return n.onListen=M6.bind(null,e.syncEngine),n.onUnlisten=P6.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=L6.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=U6.bind(null,e.syncEngine),n}function eN(i,e,n={}){const r=new ta;return i.asyncQueue.enqueueAndForget(async()=>function(c,h,p,g,y){const w=new K6({next:A=>{w.Ou(),h.enqueueAndForget(()=>R6(c,x));const P=A.docs.has(p);!P&&A.fromCache?y.reject(new Te(me.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&A.fromCache&&g&&g.source==="server"?y.reject(new Te(me.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(A)},error:A=>y.reject(A)}),x=new N6(Up(p.path),w,{includeMetadataChanges:!0,ka:!0});return T6(c,x)}(await J6(i),i.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v2(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u_=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _2="firestore.googleapis.com",d_=!0;class h_{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Te(me.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=_2,this.ssl=d_}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:d_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Qw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<C4)throw new Te(me.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}h5("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=v2((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(c){if(c.timeoutSeconds!==void 0){if(isNaN(c.timeoutSeconds))throw new Te(me.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (must not be NaN)`);if(c.timeoutSeconds<5)throw new Te(me.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (minimum allowed value is 5)`);if(c.timeoutSeconds>30)throw new Te(me.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,o){return r.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ig{constructor(e,n,r,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new h_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Te(me.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Te(me.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new h_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new n5;switch(r.type){case"firstParty":return new a5(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Te(me.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=u_.get(n);r&&(_e("ComponentProvider","Removing Datastore"),u_.delete(n),r.terminate())}(this),Promise.resolve()}}function tN(i,e,n,r={}){var o;i=Nc(i,ig);const c=al(e),h=i._getSettings(),p=Object.assign(Object.assign({},h),{emulatorOptions:i._getEmulatorOptions()}),g=`${e}:${n}`;c&&(H_(`https://${g}`),q_("Firestore",!0)),h.host!==_2&&h.host!==g&&ia("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y=Object.assign(Object.assign({},h),{host:g,ssl:c,emulatorOptions:r});if(!na(y,p)&&(i._setSettings(y),r.mockUserToken)){let w,x;if(typeof r.mockUserToken=="string")w=r.mockUserToken,x=On.MOCK_USER;else{w=WS(r.mockUserToken,(o=i._app)===null||o===void 0?void 0:o.options.projectId);const A=r.mockUserToken.sub||r.mockUserToken.user_id;if(!A)throw new Te(me.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");x=new On(A)}i._authCredentials=new i5(new cw(w,x))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new sg(this.firestore,e,this._query)}}class _n{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Vc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new _n(this.firestore,e,this._key)}toJSON(){return{type:_n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Xc(n,_n._jsonSchema))return new _n(e,r||null,new Ne(Ot.fromString(n.referencePath)))}}_n._jsonSchemaVersion="firestore/documentReference/1.0",_n._jsonSchema={type:Jt("string",_n._jsonSchemaVersion),referencePath:Jt("string")};class Vc extends sg{constructor(e,n,r){super(e,n,Up(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new _n(this.firestore,null,new Ne(e))}withConverter(e){return new Vc(this.firestore,e,this._path)}}function si(i,e,...n){if(i=Hn(i),arguments.length===1&&(e=Dp.newId()),d5("doc","path",e),i instanceof ig){const r=Ot.fromString(e,...n);return T1(r),new _n(i,null,new Ne(r))}{if(!(i instanceof _n||i instanceof Vc))throw new Te(me.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(Ot.fromString(e,...n));return T1(r),new _n(i.firestore,i instanceof Vc?i.converter:null,new Ne(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f_="AsyncQueue";class m_{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new t2(this,"async_queue_retry"),this.oc=()=>{const r=Nm();r&&_e(f_,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const n=Nm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=Nm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new ta;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!dl(e))throw e;_e(f_,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,yr("INTERNAL UNHANDLED ERROR: ",p_(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const o=$p.createAndSchedule(this,e,n,r,c=>this.lc(c));return this.ec.push(o),o}ac(){this.tc&&Ve(47125,{hc:p_(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function p_(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}class rg extends ig{constructor(e,n,r,o){super(e,n,r,o),this.type="firestore",this._queue=new m_,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new m_(e),this._firestoreClient=void 0,await e}}}function nN(i,e){const n=typeof i=="object"?i:pp(),r=typeof i=="string"?i:Bd,o=$a(n,"firestore").getImmediate({identifier:r});if(!o._initialized){const c=GS("firestore");c&&tN(o,...c)}return o}function b2(i){if(i._terminated)throw new Te(me.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||iN(i),i._firestoreClient}function iN(i){var e,n,r;const o=i._freezeSettings(),c=function(p,g,y,w){return new E5(p,g,y,w.host,w.ssl,w.experimentalForceLongPolling,w.experimentalAutoDetectLongPolling,v2(w.experimentalLongPollingOptions),w.useFetchStreams,w.isUsingEmulator)}(i._databaseId,((e=i._app)===null||e===void 0?void 0:e.options.appId)||"",i._persistenceKey,o);i._componentsProvider||!((n=o.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=o.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(i._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),i._firestoreClient=new Y6(i._authCredentials,i._appCheckCredentials,i._queue,c,i._componentsProvider&&function(p){const g=p==null?void 0:p._online.build();return{_offline:p==null?void 0:p._offline.build(g),_online:g}}(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Mi(Cn.fromBase64String(e))}catch(n){throw new Te(me.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Mi(Cn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Mi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Xc(e,Mi._jsonSchema))return Mi.fromBase64String(e.bytes)}}Mi._jsonSchemaVersion="firestore/bytes/1.0",Mi._jsonSchema={type:Jt("string",Mi._jsonSchemaVersion),bytes:Jt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Te(me.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Rn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Te(me.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Te(me.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return We(this._lat,e._lat)||We(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Rs._jsonSchemaVersion}}static fromJSON(e){if(Xc(e,Rs._jsonSchema))return new Rs(e.latitude,e.longitude)}}Rs._jsonSchemaVersion="firestore/geoPoint/1.0",Rs._jsonSchema={type:Jt("string",Rs._jsonSchemaVersion),latitude:Jt("number"),longitude:Jt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,o){if(r.length!==o.length)return!1;for(let c=0;c<r.length;++c)if(r[c]!==o[c])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Cs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Xc(e,Cs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Cs(e.vectorValues);throw new Te(me.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Cs._jsonSchemaVersion="firestore/vectorValue/1.0",Cs._jsonSchema={type:Jt("string",Cs._jsonSchemaVersion),vectorValues:Jt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sN=/^__.*__$/;class rN{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new no(e,this.data,this.fieldMask,n,this.fieldTransforms):new Wc(e,this.data,n,this.fieldTransforms)}}function x2(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ve(40011,{Ec:i})}}class og{constructor(e,n,r,o,c,h){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=o,c===void 0&&this.Ac(),this.fieldTransforms=c||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new og(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.Rc({path:r,mc:!1});return o.fc(e),o}gc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.Rc({path:r,mc:!1});return o.Ac(),o}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Yd(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(x2(this.Ec)&&sN.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class aN{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||ph(e)}Dc(e,n,r,o=!1){return new og({Ec:e,methodName:n,bc:r,path:Rn.emptyPath(),mc:!1,Sc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function oN(i){const e=i._freezeSettings(),n=ph(i._databaseId);return new aN(i._databaseId,!!e.ignoreUndefinedProperties,n)}function lN(i,e,n,r,o,c={}){const h=i.Dc(c.merge||c.mergeFields?2:0,e,n,o);T2("Data must be an object, but it was:",h,r);const p=S2(r,h);let g,y;if(c.merge)g=new Ji(h.fieldMask),y=h.fieldTransforms;else if(c.mergeFields){const w=[];for(const x of c.mergeFields){const A=cN(e,x,n);if(!h.contains(A))throw new Te(me.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);dN(w,A)||w.push(A)}g=new Ji(w),y=h.fieldTransforms.filter(x=>g.covers(x.field))}else g=null,y=h.fieldTransforms;return new rN(new Oi(p),g,y)}function E2(i,e){if(A2(i=Hn(i)))return T2("Unsupported field value:",e,i),S2(i,e);if(i instanceof w2)return function(r,o){if(!x2(o.Ec))throw o.wc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.wc(`${r._methodName}() is not currently supported inside arrays`);const c=r._toFieldTransform(o);c&&o.fieldTransforms.push(c)}(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,o){const c=[];let h=0;for(const p of r){let g=E2(p,o.yc(h));g==null&&(g={nullValue:"NULL_VALUE"}),c.push(g),h++}return{arrayValue:{values:c}}}(i,e)}return function(r,o){if((r=Hn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return W5(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const c=Rt.fromDate(r);return{timestampValue:Xd(o.serializer,c)}}if(r instanceof Rt){const c=new Rt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Xd(o.serializer,c)}}if(r instanceof Rs)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Mi)return{bytesValue:qw(o.serializer,r._byteString)};if(r instanceof _n){const c=o.databaseId,h=r.firestore._databaseId;if(!h.isEqual(c))throw o.wc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Hp(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof Cs)return function(h,p){return{mapValue:{fields:{[_w]:{stringValue:bw},[zd]:{arrayValue:{values:h.toArray().map(y=>{if(typeof y!="number")throw p.wc("VectorValues must only contain numeric values.");return Bp(p.serializer,y)})}}}}}}(r,o);throw o.wc(`Unsupported field value: ${jp(r)}`)}(i,e)}function S2(i,e){const n={};return fw(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):eo(i,(r,o)=>{const c=E2(o,e.Vc(r));c!=null&&(n[r]=c)}),{mapValue:{fields:n}}}function A2(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof Rt||i instanceof Rs||i instanceof Mi||i instanceof _n||i instanceof w2||i instanceof Cs)}function T2(i,e,n){if(!A2(n)||!dw(n)){const r=jp(n);throw r==="an object"?e.wc(i+" a custom object"):e.wc(i+" "+r)}}function cN(i,e,n){if((e=Hn(e))instanceof ag)return e._internalPath;if(typeof e=="string")return R2(i,e);throw Yd("Field path arguments must be of type string or ",i,!1,void 0,n)}const uN=new RegExp("[~\\*/\\[\\]]");function R2(i,e,n){if(e.search(uN)>=0)throw Yd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new ag(...e.split("."))._internalPath}catch{throw Yd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function Yd(i,e,n,r,o){const c=r&&!r.isEmpty(),h=o!==void 0;let p=`Function ${e}() called with invalid data`;n&&(p+=" (via `toFirestore()`)"),p+=". ";let g="";return(c||h)&&(g+=" (found",c&&(g+=` in field ${r}`),h&&(g+=` in document ${o}`),g+=")"),new Te(me.INVALID_ARGUMENT,p+i+g)}function dN(i,e){return i.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(e,n,r,o,c){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new _n(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new hN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(I2("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class hN extends C2{data(){return super.data()}}function I2(i,e){return typeof e=="string"?R2(i,e):e instanceof ag?e._internalPath:e._delegate._internalPath}class fN{convertValue(e,n="none"){switch(oa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Xt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(aa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ve(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return eo(e,(o,c)=>{r[o]=this.convertValue(c,n)}),r}convertVectorValue(e){var n,r,o;const c=(o=(r=(n=e.fields)===null||n===void 0?void 0:n[zd].arrayValue)===null||r===void 0?void 0:r.values)===null||o===void 0?void 0:o.map(h=>Xt(h.doubleValue));return new Cs(c)}convertGeoPoint(e){return new Rs(Xt(e.latitude),Xt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=lh(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Dc(e));default:return null}}convertTimestamp(e){const n=ra(e);return new Rt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ot.fromString(e);ft(Yw(r),9688,{name:e});const o=new jc(r.get(1),r.get(3)),c=new Ne(r.popFirst(5));return o.isEqual(n)||yr(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mN(i,e,n){let r;return r=i?i.toFirestore(e):e,r}class pc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ha extends C2{constructor(e,n,r,o,c,h){super(e,n,r,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Td(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(I2("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Te(me.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ha._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ha._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ha._jsonSchema={type:Jt("string",Ha._jsonSchemaVersion),bundleSource:Jt("string","DocumentSnapshot"),bundleName:Jt("string"),bundle:Jt("string")};class Td extends Ha{data(e={}){return super.data(e)}}class Sc{constructor(e,n,r,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new pc(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Td(this._firestore,this._userDataWriter,r.key,r,new pc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Te(me.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(o,c){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map(p=>{const g=new Td(o._firestore,o._userDataWriter,p.doc.key,p.doc,new pc(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);return p.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}})}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(p=>c||p.type!==3).map(p=>{const g=new Td(o._firestore,o._userDataWriter,p.doc.key,p.doc,new pc(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,w=-1;return p.type!==0&&(y=h.indexOf(p.doc.key),h=h.delete(p.doc.key)),p.type!==1&&(h=h.add(p.doc),w=h.indexOf(p.doc.key)),{type:pN(p.type),doc:g,oldIndex:y,newIndex:w}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Te(me.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Sc._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Dp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],o=[];return this.docs.forEach(c=>{c._document!==null&&(n.push(c._document),r.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),o.push(c.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function pN(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ve(61501,{type:i})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Li(i){i=Nc(i,_n);const e=Nc(i.firestore,rg);return eN(b2(e),i._key).then(n=>vN(e,i,n))}Sc._jsonSchemaVersion="firestore/querySnapshot/1.0",Sc._jsonSchema={type:Jt("string",Sc._jsonSchemaVersion),bundleSource:Jt("string","QuerySnapshot"),bundleName:Jt("string"),bundle:Jt("string")};class gN extends fN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Mi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new _n(this.firestore,null,n)}}function fr(i,e,n){i=Nc(i,_n);const r=Nc(i.firestore,rg),o=mN(i.converter,e);return yN(r,[lN(oN(r),"setDoc",i._key,o,i.converter!==null,n).toMutation(i._key,hr.none())])}function yN(i,e){return function(r,o){const c=new ta;return r.asyncQueue.enqueueAndForget(async()=>B6(await $6(r),o,c)),c.promise}(b2(i),e)}function vN(i,e,n){const r=n.docs.get(e._key),o=new gN(i);return new Ha(i,o,e._key,r,new pc(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(o){cl=o})(ol),Is(new ts("firestore",(r,{instanceIdentifier:o,options:c})=>{const h=r.getProvider("app").getImmediate(),p=new rg(new s5(r.getProvider("auth-internal")),new o5(h,r.getProvider("app-check-internal")),function(y,w){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new Te(me.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new jc(y.options.projectId,w)}(h,o),h);return c=Object.assign({useFetchStreams:n},c),p._setSettings(c),p},"PUBLIC").setMultipleInstances(!0)),Vi(w1,x1,e),Vi(w1,x1,"esm2017")})();const _N={apiKey:"AIzaSyApj9cFUaYnRAZq4Hjab0NMtCJo7OwCG1w",authDomain:"roversa-2c5fd.firebaseapp.com",projectId:"roversa-2c5fd",storageBucket:"roversa-2c5fd.firebasestorage.app",messagingSenderId:"261909236286",appId:"1:261909236286:web:3714d3511e6a5c980a1f6f",measurementId:"G-NX72JNWMM2"},lg=Q_(_N);PR(lg);const at=e5(lg),ri=nN(lg),bN="/dashboard/assets/Official_Logo_White-bdZT6TWh.png";function wN(){const i=Os(),[e,n]=I.useState(null);return I.useEffect(()=>{Cp(at,r=>{r&&i("/dashboard")})}),f.jsxs("div",{className:"home-container",children:[f.jsxs("div",{className:"home-header slide-in-from-top",children:[f.jsx("div",{className:"logo",onClick:()=>i("/"),style:{cursor:"pointer"},children:f.jsx("img",{src:bN,alt:"Roversa Robotics"})}),f.jsx("div",{className:"header-nav",children:f.jsx("button",{className:"nav-button fade-in-scale animate-on-mount-delay-1",onClick:()=>i("/login"),children:"Login"})})]}),f.jsx("div",{className:"home-content slide-in-from-bottom",children:f.jsx("div",{className:"hero-section",children:f.jsxs("div",{className:"hero-content",children:[f.jsx("h1",{className:"animate-on-mount-delay-2",children:"Welcome to Roversa Dashboard"}),f.jsx("div",{className:"hero-buttons",children:f.jsx("button",{className:"secondary-btn fade-in-scale animate-on-mount-delay-3",onClick:()=>i("/login"),children:"Sign In"})})]})})})]})}function xN(){const i=Os(),[e,n]=I.useState(""),[r,o]=I.useState(""),[c,h]=I.useState(""),[p,g]=I.useState(null),y=async()=>{try{const w=await BC(at,e,r);i("/dashboard")}catch{h("Invalid login credentials")}};return I.useEffect(()=>{Cp(at,w=>{w&&i("/dashboard")})}),f.jsxs("div",{className:"login-container",children:[f.jsxs("div",{className:"login-header slide-in-from-top",children:[f.jsx("div",{className:"logo",onClick:()=>i("/"),style:{cursor:"pointer"},children:f.jsx("img",{src:"/src/Official_Logo_White.png",alt:"Roversa Robotics"})}),f.jsx("div",{className:"header-nav",children:f.jsx("button",{className:"nav-button active fade-in-scale animate-on-mount-delay-1",children:"Login"})})]}),f.jsx("div",{className:"login-content slide-in-from-bottom",children:f.jsxs("div",{className:"login-card fade-in-scale animate-on-mount-delay-2",children:[f.jsxs("div",{className:"login-title animate-on-mount-delay-3",children:[f.jsx("h1",{children:"Welcome Back"}),f.jsx("p",{children:"Sign in to your Roversa Dashboard"})]}),c&&f.jsx("div",{className:"error-message animate-on-mount-delay-4",children:c}),f.jsxs("div",{className:"login-form",children:[f.jsxs("div",{className:"input-group animate-on-mount-delay-4",children:[f.jsx("label",{htmlFor:"email",children:"Email"}),f.jsx("input",{type:"email",id:"email",placeholder:"Enter your email",className:"login-input",value:e,onChange:w=>n(w.target.value)})]}),f.jsxs("div",{className:"input-group animate-on-mount-delay-5",children:[f.jsx("label",{htmlFor:"password",children:"Password"}),f.jsx("input",{type:"password",id:"password",placeholder:"Enter your password",className:"login-input",value:r,onChange:w=>o(w.target.value)})]}),f.jsx("button",{className:"login-submit-btn fade-in-scale animate-on-mount-delay-6",onClick:y,children:"Sign In"})]}),f.jsx("div",{className:"signup-link animate-on-mount-delay-7",children:f.jsxs("p",{children:["Don't have an account? ",f.jsx("button",{className:"link-button",onClick:()=>i("/signup"),children:"Sign up"})]})})]})})]})}function EN(){const i=Os(),[e,n]=I.useState(""),[r,o]=I.useState(""),[c,h]=I.useState(""),[p,g]=I.useState(""),[y,w]=I.useState(null),x=async()=>{try{const A=await UC(at,r,c);await fr(si(ri,"users",A.user.uid,"profile"),{name:e,email:r}),i("/dashboard")}catch(A){g(A.message)}};return I.useEffect(()=>{Cp(at,A=>{A&&i("/dashboard")})}),f.jsxs("div",{className:"signup-container",children:[f.jsxs("div",{className:"signup-header slide-in-from-top",children:[f.jsx("div",{className:"logo",onClick:()=>i("/"),style:{cursor:"pointer"},children:f.jsx("img",{src:"/src/Official_Logo_White.png",alt:"Roversa Robotics"})}),f.jsx("div",{className:"header-nav",children:f.jsx("button",{className:"nav-button fade-in-scale animate-on-mount-delay-1",onClick:()=>i("/login"),children:"Login"})})]}),f.jsx("div",{className:"signup-content slide-in-from-bottom",children:f.jsxs("div",{className:"signup-card fade-in-scale animate-on-mount-delay-2",children:[f.jsxs("div",{className:"signup-title animate-on-mount-delay-3",children:[f.jsx("h1",{children:"Create Account"}),f.jsx("p",{children:"Let's make your classroom experience easy"})]}),p&&f.jsx("div",{className:"error-message animate-on-mount-delay-4",children:p}),f.jsxs("div",{className:"signup-form",children:[f.jsxs("div",{className:"input-group animate-on-mount-delay-4",children:[f.jsx("label",{htmlFor:"name",children:"Name"}),f.jsx("input",{type:"text",id:"name",placeholder:"Enter your name",className:"signup-input",value:e,onChange:A=>n(A.target.value)})]}),f.jsxs("div",{className:"input-group animate-on-mount-delay-5",children:[f.jsx("label",{htmlFor:"email",children:"Email"}),f.jsx("input",{type:"email",id:"email",placeholder:"Enter your email",className:"signup-input",value:r,onChange:A=>o(A.target.value)})]}),f.jsxs("div",{className:"input-group animate-on-mount-delay-6",children:[f.jsx("label",{htmlFor:"password",children:"Password"}),f.jsx("input",{type:"password",id:"password",placeholder:"Create a password",className:"signup-input",value:c,onChange:A=>h(A.target.value)})]}),f.jsx("button",{className:"signup-submit-btn fade-in-scale animate-on-mount-delay-7",onClick:x,children:"Create Account"})]}),f.jsx("div",{className:"login-link animate-on-mount-delay-8",children:f.jsxs("p",{children:["Already have an account? ",f.jsx("button",{className:"link-button",onClick:()=>i("/login"),children:"Sign in"})]})})]})})]})}function Qc(){const i=Os(),e=is(),[n,r]=I.useState(null),[o,c]=I.useState(""),h=async()=>{try{await HC(at),i("/login")}catch(p){console.error("Error signing out:",p)}};return I.useEffect(()=>{const p=at.onAuthStateChanged(g=>{var y;g?(r(g),c(g.displayName||((y=g.email)==null?void 0:y.split("@")[0])||"User")):i("/login")});return()=>p()},[i]),f.jsxs("div",{className:"sidebar",children:[f.jsx("div",{className:"logo",style:{marginBottom:30},children:f.jsx("img",{src:"/src/Official_Logo_White.png",alt:"Roversa Robotics"})}),f.jsxs("nav",{className:"nav-menu",children:[f.jsx("div",{className:`nav-item${e.pathname==="/dashboard"?" active":""}`,onClick:()=>i("/dashboard"),style:{cursor:"pointer"},children:f.jsxs("span",{style:{display:"flex",alignItems:"center",gap:8},children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"20",height:"20",style:{marginRight:8},children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"})}),"Home"]})}),f.jsx("div",{className:`nav-item${e.pathname.startsWith("/sessions")?" active":""}`,onClick:()=>i("/sessions"),children:f.jsxs("span",{style:{display:"flex",alignItems:"center",gap:8},children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"20",height:"20",style:{marginRight:8},children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.383a14.406 14.406 0 0 1-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 1 0-7.517 0c.85.493 1.509 1.333 1.509 2.316V18"})}),"Sessions"]})}),f.jsx("div",{className:`nav-item${e.pathname.startsWith("/classrooms")?" active":""}`,onClick:()=>i("/classrooms"),children:f.jsxs("span",{style:{display:"flex",alignItems:"center",gap:8},children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"20",height:"20",style:{marginRight:8},children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"})}),"Classrooms"]})}),f.jsx("div",{className:`nav-item${e.pathname.startsWith("/lessons")?" active":""}`,onClick:()=>i("/lessons"),style:{cursor:"pointer"},children:f.jsxs("span",{style:{display:"flex",alignItems:"center",gap:8},children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"20",height:"20",style:{marginRight:8},children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.26 10.147a60.438 60.438 0 0 0-.491 6.347A48.62 48.62 0 0 1 12 20.904a48.62 48.62 0 0 1 8.232-4.41 60.46 60.46 0 0 0-.491-6.347m-15.482 0a50.636 50.636 0 0 0-2.658-.813A59.906 59.906 0 0 1 12 3.493a59.903 59.903 0 0 1 10.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0A50.717 50.717 0 0 1 12 13.489a50.702 50.702 0 0 1 7.74-3.342M6.75 15a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Zm0 0v-3.675A55.378 55.378 0 0 1 12 8.443m-7.007 11.55A5.981 5.981 0 0 0 6.75 15.75v-1.5"})}),"Lessons"]})}),f.jsx("div",{style:{height:"170px"}}),f.jsx("div",{className:"robotman-wrapper",style:{display:"flex",justifyContent:"flex-start",alignItems:"flex-end",marginTop:0,marginBottom:"0",height:"100px",marginLeft:0,marginRight:0},children:f.jsx("img",{src:"/src/robotman.png",alt:"Robotman",className:"robotman-img",style:{width:"250px",height:"auto",display:"block",marginLeft:"-19px"}})}),f.jsx("div",{className:"nav-item",style:{marginTop:"-50px",cursor:"pointer",opacity:.5,pointerEvents:"none"},children:f.jsxs("span",{style:{display:"flex",alignItems:"center",gap:8},children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"20",height:"20",style:{marginRight:8},children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 7.5a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.5 19.5a7.5 7.5 0 0115 0v.75a.75.75 0 01-.75.75h-13.5a.75.75 0 01-.75-.75v-.75z"})}),"Profile"]})}),f.jsx("div",{className:"nav-item",style:{cursor:"pointer",opacity:.5,pointerEvents:"none"},children:f.jsxs("span",{style:{display:"flex",alignItems:"center",gap:8},children:[f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"20",height:"20",style:{marginRight:8},children:[f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.01c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.01 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.01 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.573 1.01c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.572-1.01c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.01-2.573c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.01-2.572c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.01z"}),f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Settings"]})}),f.jsx("div",{className:"nav-item logout",onClick:h,children:f.jsxs("span",{style:{display:"flex",alignItems:"center",gap:8},children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"20",height:"20",style:{marginRight:8},children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 9V5.25A2.25 2.25 0 0 1 10.5 3h6a2.25 2.25 0 0 1 2.25 2.25v13.5A2.25 2.25 0 0 1 16.5 21h-6a2.25 2.25 0 0 1-2.25-2.25V15m-3 0-3-3m0 0 3-3m-3 3H15"})}),"Log out"]})})]})]})}const SN="/dashboard/assets/tent-DiHh0Yjx.png",AN=(i,e)=>{const n=new Date(i,e,1),o=new Date(i,e+1,0).getDate(),c=new Date(i,e,0).getDate(),h=n.getDay()===0?6:n.getDay()-1,p=[];let g=[],y=1;for(let w=0;w<6;w++){g=[];for(let x=0;x<7;x++){const A=w*7+x;A<h?g.push({day:c-(h-A-1),isCurrentMonth:!1}):y>o?(g.push({day:y-o,isCurrentMonth:!1}),y++):(g.push({day:y,isCurrentMonth:!0}),y++)}p.push(g)}return p},g_=["January","February","March","April","May","June","July","August","September","October","November","December"];function TN({sessions:i=[]}){const e=new Date,[n,r]=I.useState(e.getFullYear()),[o,c]=I.useState(e.getMonth()),[h,p]=I.useState(2.5),g=I.useRef(null),y=I.useRef(null),w=I.useRef(null),[x,A]=I.useState(null),[P,z]=I.useState(!1),[H,Y]=I.useState([]);let $=AN(n,o);I.useEffect(()=>{var D;if(!g.current||!w.current)return;const pe=1.1,k=1.4,R=.01;let C=pe;for(let L=k;L>=pe;L-=R){g.current.style.fontSize=`${L}rem`;const N=g.current.scrollWidth,ze=w.current.offsetWidth-(((D=y.current)==null?void 0:D.offsetWidth)||0)-8;if(N<=ze){C=L;break}}p(C);const M=new window.ResizeObserver(()=>{var N;let L=pe;for(let ze=k;ze>=pe;ze-=R){g.current.style.fontSize=`${ze}rem`;const Qe=g.current.scrollWidth,ie=w.current.offsetWidth-(((N=y.current)==null?void 0:N.offsetWidth)||0)-8;if(Qe<=ie){L=ze;break}}p(L)});return M.observe(w.current),()=>M.disconnect()},[o,n]);const Z=()=>{o===0?(c(11),r(n-1)):c(o-1)},X=()=>{o===11?(c(0),r(n+1)):c(o+1)},te=pe=>{try{const R=new Date(n,o,pe).toDateString();let C=0,M=0,D=0;return i.forEach(L=>{new Date(L.createdAt).toDateString()===R&&(L.status==="ended"?C++:L.status==="active"||L.status==="paused"?M++:L.status==="scheduled"&&D++)}),C>0||M>0||D>0?{past:C,active:M,scheduled:D}:null}catch(k){return console.error("Error getting session data:",k),null}},le=pe=>{try{const R=new Date(n,o,pe).toDateString();return i.filter(C=>new Date(C.createdAt).toDateString()===R)}catch{return[]}};return f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"dashboard-calendar-card",children:[f.jsxs("div",{className:"calendar-header-row",ref:w,children:[f.jsxs("div",{className:"calendar-title",ref:g,style:{fontSize:`${h}rem`},children:[g_[o],", ",n]}),f.jsxs("div",{className:"calendar-arrows-group",ref:y,children:[f.jsx("button",{className:"calendar-arrow",onClick:Z,children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"})})}),f.jsx("button",{className:"calendar-arrow",onClick:X,children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})})})]})]}),f.jsx("div",{className:"calendar-subtitle",children:"Track your progress"}),f.jsx("div",{className:"calendar-grid",children:$.map((pe,k)=>f.jsx("div",{className:"calendar-week",children:pe.map((R,C)=>{const M=R.isCurrentMonth&&R.day===e.getDate()&&o===e.getMonth()&&n===e.getFullYear();return f.jsxs("div",{className:`calendar-day${R.isCurrentMonth?"":" calendar-day-outside"}${M?" calendar-day-today":""}`,onClick:()=>{R.isCurrentMonth&&(A(R.day),Y(le(R.day)),z(!0))},style:{cursor:R.isCurrentMonth?"pointer":"default"},children:[f.jsx("span",{children:R.day}),R.isCurrentMonth&&te(R.day)&&f.jsxs("div",{className:"calendar-day-dots",children:[Array.from({length:te(R.day).past||0},(D,L)=>f.jsx("div",{className:"calendar-day-dot-past"},`past-${L}`)),Array.from({length:te(R.day).active||0},(D,L)=>f.jsx("div",{className:"calendar-day-dot-active"},`active-${L}`)),Array.from({length:te(R.day).scheduled||0},(D,L)=>f.jsx("div",{className:"calendar-day-dot-scheduled"},`scheduled-${L}`))]})]},C)})},k))}),f.jsx("img",{src:SN,alt:"Tent illustration for calendar",className:"calendar-tent-img",onError:pe=>{pe.target.style.display="none"}})]}),P&&LS.createPortal(f.jsx("div",{className:"modal-overlay",onClick:()=>z(!1),children:f.jsxs("div",{className:"modal-content",onClick:pe=>pe.stopPropagation(),style:{maxWidth:420,width:"90%",maxHeight:"80vh",overflowY:"auto",borderRadius:16},children:[f.jsx("div",{className:"modal-header",children:f.jsxs("h2",{style:{fontSize:"1.3rem",fontWeight:400,color:"#222",fontFamily:"Inter, sans-serif",textAlign:"center",margin:0},children:["Sessions on ",x," ",g_[o],", ",n]})}),f.jsx("div",{className:"modal-body",children:H.length===0?f.jsx("div",{style:{color:"#888",fontSize:15,fontFamily:"Open Sans, sans-serif",fontWeight:400,textAlign:"center",margin:"32px 0"},children:"No sessions on this day"}):f.jsx("div",{style:{display:"flex",flexDirection:"column",gap:16,width:"100%"},children:H.map(pe=>f.jsxs("div",{style:{background:"#f7f8fa",borderRadius:10,padding:"12px 18px",border:"1px solid #e0e0e0",display:"flex",flexDirection:"column",gap:2},children:[f.jsx("div",{style:{fontWeight:700,color:"#4169e1",fontSize:15},children:pe.name}),f.jsx("div",{style:{color:"#888",fontWeight:400,fontSize:13},children:pe.status.charAt(0).toUpperCase()+pe.status.slice(1)}),f.jsx("div",{style:{color:"#555",fontWeight:400,fontSize:12},children:pe.block||pe.blockName||pe.classroomBlock||""})]},pe.id))})})]})}),document.body)]})}const RN="/dashboard/assets/chargingstation-DIe01uMz.png",CN="/dashboard/assets/dashboardbatterydesign-DalcyAxh.png",IN="/dashboard/assets/excited_flower-DN0cCqXE.png",NN="/dashboard/assets/myrobots-BpXXry3c.png",kN="/dashboard/assets/myclassrooms--acsbIcs.png",DN="/dashboard/assets/accessguides-KOE7_o3r.png";function jN(){const i=Os(),[e,n]=I.useState(null),[r,o]=I.useState(""),[c,h]=I.useState([]),[p,g]=I.useState([]),[y,w]=I.useState([]),[x,A]=I.useState([]),[P,z]=I.useState(!1),H=I.useRef();function Y({lastBatteryTime:Z,firstBatteryTime:X,lastProgramTime:te},le=new Date){return!Z||(le-new Date(Z))/1e3>10?"inactive_battery":te&&(le-new Date(te))/1e3<=180?"active":te&&(le-new Date(te))/1e3>180||!te&&X&&(le-new Date(X))/1e3>180?"inactive":"inactive_battery"}function $(Z){if(Z.assignedTo&&typeof Z.assignedTo=="object"){if(Z.assignedTo.name)return Z.assignedTo.name;if(Z.assignedTo.group)return Z.assignedTo.group}return Z.assignedTo?Z.assignedTo:"Unassigned"}return I.useEffect(()=>{if(!P)return;function Z(X){H.current&&!H.current.contains(X.target)&&z(!1)}return document.addEventListener("mousedown",Z),()=>document.removeEventListener("mousedown",Z)},[P]),I.useEffect(()=>{const Z=async le=>{if(!le)return;const pe=si(ri,"users",le.uid,"appdata","sessions"),k=await Li(pe);if(k.exists()){const R=k.data();g((R.sessions||[]).filter(D=>String(D.status)==="active")),w((R.sessions||[]).filter(D=>String(D.status)==="paused"));const C=(R.sessions||[]).filter(D=>String(D.status)==="ended");C.sort((D,L)=>new Date(L.endedAt||L.createdAt)-new Date(D.endedAt||D.createdAt)),h(C.slice(0,3));let M=[];(R.sessions||[]).forEach(D=>{D.robots&&Object.entries(D.robots).forEach(([L,N])=>{if(!N.batteryData||typeof N.batteryData.voltage!="number")return;const ze=Y(N);(N.batteryData.voltage<3.7||ze==="inactive_battery")&&M.push({sessionName:D.name,sessionId:D.id,deviceId:L,robot:N})})}),A(M)}else g([]),w([]),h([]),A([])},X=async le=>{var pe;if(le){try{const k=si(ri,"users",le.uid,"profile"),R=await Li(k);if(R.exists()){const C=R.data();if(C.name&&C.name.trim()!==""){o(C.name);return}}}catch{}o(((pe=le.email)==null?void 0:pe.split("@")[0])||"User")}},te=at.onAuthStateChanged(le=>{le?(n(le),X(le),Z(le)):i("/login")});return()=>te()},[i]),f.jsxs("div",{className:"dashboard-container",children:[f.jsx(Qc,{className:"slide-in-from-left"}),P&&f.jsx("div",{className:"modal-overlay",onClick:()=>z(!1),children:f.jsxs("div",{className:"modal-content",ref:H,onClick:Z=>Z.stopPropagation(),style:{maxWidth:500,width:"90%",maxHeight:"80vh",overflowY:"auto",position:"relative",display:"flex",flexDirection:"column",alignItems:"center"},children:[f.jsx("div",{className:"modal-header",children:f.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:400,color:"#222",fontFamily:"Inter, sans-serif",textAlign:"center",margin:0},children:"Low Battery Robots"})}),f.jsx("div",{className:"modal-body",style:{width:"100%"},children:x.length===0?f.jsx("div",{style:{color:"#888",fontSize:16,fontFamily:"Open Sans, sans-serif",fontWeight:400,textAlign:"center",margin:"32px 0"},children:"All robots are sufficiently charged"}):f.jsx("div",{className:"robot-cards-container",style:{display:"flex",flexWrap:"wrap",gap:24,width:"100%",justifyContent:"center",alignItems:"flex-start"},children:x.map(({sessionName:Z,sessionId:X,deviceId:te,robot:le},pe)=>{var L;let C=0;typeof((L=le.batteryData)==null?void 0:L.voltage)=="number"&&(C=Math.max(0,Math.min(1,(le.batteryData.voltage-3.3)/(5-3.3))));const M=`${Math.round(C*100)}%`,D=$(le);return f.jsxs("div",{className:"robot-card",style:{width:320,minHeight:70,background:"#fff",borderRadius:12,boxShadow:"0 2px 12px rgba(65, 105, 225, 0.08)",border:"2px solid #e0e0e0",padding:"16px 20px",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",position:"relative",textAlign:"left",gap:8},children:[f.jsxs("div",{className:"robot-card-info",style:{width:"70%",display:"flex",flexDirection:"column",alignItems:"flex-start",gap:2},children:[f.jsx("div",{style:{fontWeight:700,color:"#4169e1",fontSize:16,marginBottom:2,letterSpacing:.5},children:te}),f.jsx("div",{style:{color:"#555",fontWeight:500,fontSize:13,marginBottom:2,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:D}),f.jsx("div",{style:{color:"#888",fontWeight:400,fontSize:12,marginBottom:2,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:Z})]}),f.jsx("div",{style:{color:"#d32f2f",fontWeight:700,fontSize:20,minWidth:80,textAlign:"right"},children:M})]},X+"-"+te)})})})]})}),f.jsxs("div",{className:"main-content dashboard-home-main-content slide-in-from-bottom",children:[f.jsxs("div",{className:"dashboard-header slide-in-from-top",children:[f.jsxs("h1",{className:"dashboard-welcome",style:{fontFamily:"Bevan, serif",fontWeight:400},children:["Welcome, ",r,"!"]}),f.jsx("div",{className:"dashboard-subtitle",children:"Control the Classroom. Ignite the Circuit."})]}),f.jsxs("div",{style:{width:"100%"},children:[f.jsxs("div",{className:"dashboard-cards-row",style:{display:"flex",gap:24,marginBottom:0,paddingBottom:0},children:[f.jsxs("div",{className:"dashboard-card fade-in-scale animate-on-mount-delay-1",onClick:()=>i("/sessions"),style:{flex:"1 1 320px",minWidth:250,maxWidth:250},children:[f.jsx("img",{src:NN,alt:"My Sessions",className:"dashboard-card-bg"}),f.jsxs("div",{className:"dashboard-card-content",children:[f.jsx("div",{className:"dashboard-card-title",children:"My Sessions"}),f.jsx("div",{className:"dashboard-card-desc",children:"View and manage active sessions"})]})]}),f.jsxs("div",{className:"dashboard-card fade-in-scale animate-on-mount-delay-3",onClick:()=>i("/classrooms"),style:{flex:"1 1 320px",minWidth:250,maxWidth:250},children:[f.jsx("img",{src:kN,alt:"My Classrooms",className:"dashboard-card-bg"}),f.jsxs("div",{className:"dashboard-card-content",children:[f.jsx("div",{className:"dashboard-card-title",children:"My Classrooms"}),f.jsx("div",{className:"dashboard-card-desc",children:"Manage your students and groups"})]})]}),f.jsxs("div",{className:"dashboard-card fade-in-scale animate-on-mount-delay-4",onClick:()=>i("/lessons"),style:{flex:"1 1 320px",minWidth:250,maxWidth:250},children:[f.jsx("img",{src:DN,alt:"Access Lessons",className:"dashboard-card-bg"}),f.jsxs("div",{className:"dashboard-card-content",children:[f.jsx("div",{className:"dashboard-card-title",children:"Access Lessons"}),f.jsx("div",{className:"dashboard-card-desc",children:"View and manage lessons"})]})]}),f.jsx("div",{className:"dashboard-calendar-card animate-on-mount-delay-5",style:{minWidth:220,maxWidth:320,marginLeft:12,display:"flex",flexDirection:"column",justifyContent:"flex-end"},children:f.jsx(TN,{sessions:[...p,...y,...c]})})]}),f.jsxs("div",{style:{display:"flex",flexDirection:"row",gap:30,width:"100%",marginTop:0,alignItems:"flex-start"},children:[f.jsxs("div",{style:{minWidth:180,maxWidth:240,marginLeft:0,padding:0,background:"#fff",border:"1.5px solid #e0e0e0",boxShadow:"0 1px 4px rgba(65,105,225,0.04)",borderRadius:20,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start",overflow:"hidden",marginTop:"-32px"},children:[f.jsxs("div",{style:{width:"100%",background:"#fff",borderTopLeftRadius:20,borderTopRightRadius:20,display:"flex",flexDirection:"column",alignItems:"center",padding:"18px 0 0 0",position:"relative",minHeight:120},children:[f.jsx("img",{src:CN,alt:"Battery Design",style:{position:"absolute",top:-50,left:0,width:"100%",height:200,objectFit:"cover",zIndex:1,pointerEvents:"none",borderTopLeftRadius:20,borderTopRightRadius:20}}),f.jsx("img",{src:RN,alt:"Charging Station",style:{width:170,height:140,objectFit:"cover",marginBottom:10,zIndex:400,position:"relative"}})]}),f.jsxs("div",{style:{padding:"0 14px 14px 14px",width:"100%",display:"flex",flexDirection:"column",alignItems:"center"},children:[f.jsx("h2",{style:{fontSize:"1.3rem",fontWeight:700,color:"#222",margin:"12px 0 6px 0",fontFamily:"Inter, sans-serif",textAlign:"center"},children:"Time to Charge?"}),f.jsx("div",{style:{color:"#555",fontSize:"0.80rem",fontFamily:"Inter, sans-serif",fontWeight:400,textAlign:"center",marginBottom:14,maxWidth:200},children:"Monitor your robots' battery life while they're in use."}),f.jsx("button",{style:{background:"#ff7a1a",color:"#fff",fontWeight:700,fontFamily:"Bevan, serif",fontSize:"0.85rem",border:"none",borderRadius:10,padding:"10px 0",width:"100%",marginTop:6,boxShadow:"0 2px 8px rgba(0,0,0,0.10)",cursor:"pointer",transition:"background 0.15s",outline:"none",letterSpacing:.5},onClick:()=>z(!0),children:"See Activity"})]})]}),f.jsx("div",{style:{flex:1,minWidth:340,maxWidth:520,marginTop:"-32px"},children:f.jsxs("div",{className:"dashboard-card active-sessions-section fade-in-scale animate-on-mount-delay-2",style:{padding:0,width:"100%",marginBottom:8,marginTop:0,display:"flex",flexDirection:"column",background:"#fff6fa",border:"2px solid #fff",borderRadius:20},children:[f.jsxs("div",{style:{padding:"22px 28px 0 28px",display:"flex",alignItems:"center",gap:14},children:[f.jsx("img",{src:IN,alt:"Excited Flower",style:{width:80,height:105,marginRight:8,marginBottom:20,marginLeft:-10,flexShrink:0}}),f.jsxs("div",{style:{display:"flex",flexDirection:"column",flex:1},children:[f.jsx("h2",{style:{fontSize:"2rem",fontWeight:700,color:"#222",marginBottom:6,fontFamily:"Inter, sans-serif",textAlign:"left"},children:"Active Sessions"}),f.jsx("div",{style:{color:"#555",fontSize:"0.85rem",marginBottom:25,fontFamily:"Open Sans, sans-serif",textAlign:"left"},children:"Continue or manage your currently running or paused sessions"})]})]}),f.jsx("div",{className:"session-list",style:{padding:"0 28px 0 28px",width:"100%",marginTop:6},children:[...p,...y].length>0?[...p,...y].map((Z,X)=>f.jsxs("div",{className:`session-list-item ${Z.status}-session`,onClick:()=>i(`/sessions/${Z.id}`),style:{position:"relative",overflow:"hidden",marginBottom:10,borderRadius:8,background:"#fff",border:"1.5px solid #e0e0e0",boxShadow:"0 1px 4px rgba(65,105,225,0.04)",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"14px 24px",cursor:"pointer",fontFamily:"inherit",minWidth:0,width:"100%",boxSizing:"border-box"},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:18,minWidth:0},children:[f.jsx("span",{className:`status-badge ${Z.status}`,style:{fontSize:13,padding:"3px 12px",borderRadius:5,marginRight:8,marginLeft:8,marginTop:18,flexShrink:0},children:Z.status==="active"?"Active":Z.status==="paused"?"Paused":Z.status}),f.jsx("span",{style:{fontWeight:700,fontSize:"1.18rem",color:"#222",fontFamily:"Inter, sans-serif",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:220},children:Z.name}),f.jsxs("span",{className:"session-time",style:{color:"#888",fontSize:"0.93rem",fontFamily:"Inter, sans-serif",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:180},children:["Started: ",new Date(Z.createdAt).toLocaleDateString()]})]}),Z.status==="paused"&&null]},Z.id)):f.jsxs("div",{className:"session-list-item session-card-empty animate-on-mount-delay-2",style:{textAlign:"center",padding:40,color:"#888",fontFamily:"inherit"},children:[f.jsx("h3",{style:{color:"#888",fontWeight:500,fontSize:"1.1rem"},children:"No Active or Paused Sessions"}),f.jsx("p",{style:{color:"#bbb",fontSize:14},children:"Start or resume a session to see it here."})]})}),f.jsx("div",{style:{margin:"10px 28px 18px 0",textAlign:"right"},children:f.jsx("button",{style:{background:"#ff7a1a",color:"#fff",fontWeight:700,fontFamily:"Bevan, serif",fontSize:"0.75rem",border:"none",borderRadius:10,padding:"12px 0",width:"100%",marginTop:8,marginRight:28,boxShadow:"0 2px 8px rgba(0,0,0,0.10)",cursor:"pointer",transition:"background 0.15s",outline:"none",letterSpacing:.5},onClick:()=>i("/sessions"),children:"View All Sessions"})})]})}),f.jsx("div",{className:"dashboard-calendar-card animate-on-mount-delay-5",style:{minWidth:220,maxWidth:320,marginTop:"20px",marginLeft:20,display:"flex",flexDirection:"column",justifyContent:"flex-end"},children:f.jsxs("div",{className:"recent-sessions-section",style:{marginTop:0},children:[f.jsx("h2",{className:"recent-sessions-title",style:{fontSize:"1.5rem",fontWeight:700,color:"#222",marginBottom:6},children:"Recent Sessions"}),f.jsx("div",{className:"recent-sessions-subtitle",style:{color:"#555",fontSize:"0.85rem",marginBottom:24},children:"View student progress on most recently assigned sessions"}),f.jsx("div",{className:"recent-sessions-list",children:c.length>0?c.map((Z,X)=>{const te=Z.block||Z.blockName||(Z.classroomBlock?Z.classroomBlock:null),pe=new Date(Z.endedAt||Z.createdAt).toLocaleDateString("en-GB",{day:"2-digit",month:"long"});return f.jsx("div",{className:`recent-session-card slide-in-from-right animate-on-mount-delay-${5+X}`,onClick:()=>i(`/sessions/${Z.id}`),style:{cursor:"pointer",position:"relative"},children:f.jsxs("div",{className:"recent-session-card-main",children:[f.jsxs("div",{className:"recent-session-card-info",children:[f.jsx("div",{className:"recent-session-card-title",style:{fontWeight:700,fontSize:"1.18rem",color:"#222",marginBottom:4},children:Z.name}),f.jsxs("div",{className:"recent-session-card-meta",style:{color:"#888",fontSize:"1.02rem",marginBottom:10},children:[f.jsx("span",{children:pe}),te&&f.jsx("span",{className:"dot-separator",children:""}),te&&f.jsx("span",{children:te})]}),f.jsxs("div",{className:"recent-session-progress-bar",children:[f.jsx("div",{className:"recent-session-progress-bar-inner"}),f.jsx("div",{className:"recent-session-progress-dot"})]})]}),f.jsx("div",{className:"recent-session-card-menu",children:f.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[f.jsx("circle",{cx:"12",cy:"5",r:"1.5",fill:"#888"}),f.jsx("circle",{cx:"12",cy:"12",r:"1.5",fill:"#888"}),f.jsx("circle",{cx:"12",cy:"19",r:"1.5",fill:"#888"})]})})]})},Z.id)}):f.jsx("div",{className:"recent-session-item no-sessions animate-on-mount-delay-5",children:"No recent sessions"})})]})})]})]})]})]})}function ON(){const i=Os(),e=is(),[n,r]=I.useState(!1),[o,c]=I.useState(""),[h,p]=I.useState([]),[g,y]=I.useState([]),[w,x]=I.useState(null),[A,P]=I.useState([]),[z,H]=I.useState(""),[Y,$]=I.useState(""),[Z,X]=I.useState(!1),[te,le]=I.useState(null),[pe,k]=I.useState(!1),[R,C]=I.useState(null),M=async ne=>{if(!ne)return;const be=si(ri,"users",ne.uid,"appdata","classrooms"),j=await Li(be);j.exists()?P(j.data().classrooms||[]):P([])},D=ne=>{if(!ne)return null;const be=A.find(j=>j.id===ne);return be?be.name:null},L=()=>{var j,se;if(JSON.parse(localStorage.getItem("roversaSessions")||"[]").find(ge=>ge.status==="active")){le({id:Date.now().toString(),name:o,classroomId:z||null,createdAt:new Date().toISOString(),createdBy:(j=at.currentUser)==null?void 0:j.email,status:"active"}),X(!0);return}N({id:Date.now().toString(),name:o,classroomId:z||null,createdAt:new Date().toISOString(),createdBy:(se=at.currentUser)==null?void 0:se.email,status:"active"})},N=async ne=>{const be=at.currentUser,j=si(ri,"users",be.uid,"appdata","sessions"),se=await Li(j);let ge=[];se.exists()&&(ge=se.data().sessions||[]),ge.push(ne),await fr(j,{sessions:ge}),p([ne,...h]),r(!1),c(""),H(""),i(`/sessions/${ne.id}?name=${encodeURIComponent(ne.name)}`)},ze=async ne=>{if(!ne)return;const be=si(ri,"users",ne.uid,"appdata","sessions"),j=await Li(be);if(j.exists()){const se=j.data(),ge=(se.sessions||[]).filter(Ie=>String(Ie.status)==="active"),ce=(se.sessions||[]).filter(Ie=>String(Ie.status)==="paused"),we=(se.sessions||[]).filter(Ie=>String(Ie.status)==="ended");p([...ge,...ce]),y(we)}else p([]),y([])},Qe=ne=>{C(ne),k(!0)};I.useEffect(()=>{const ne=at.onAuthStateChanged(be=>{be?x(be):i("/login")});return()=>ne()},[i]),I.useEffect(()=>{const ne=at.onAuthStateChanged(be=>{be?(x(be),ze(be),M(be)):i("/login")});return()=>ne()},[i]),I.useEffect(()=>{ze(w)},[e.pathname,w]),I.useEffect(()=>{M(w)},[w]);const fe=[...h.filter(ne=>ne.status==="active"),...h.filter(ne=>ne.status==="paused"),...g].filter(ne=>{const be=ne.name.toLowerCase().includes(Y.toLowerCase()),se=(ne.classroomId&&D(ne.classroomId)||"").toLowerCase().includes(Y.toLowerCase());return be||se});return f.jsxs("div",{className:"dashboard-container",children:[f.jsx(Qc,{className:"slide-in-from-left"}),f.jsxs("div",{className:"main-content slide-in-from-bottom",children:[f.jsxs("div",{className:"top-bar slide-in-from-top",style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:24,marginBottom:32},children:[f.jsx("h1",{style:{margin:0,fontSize:"2rem",fontWeight:700,color:"#222"},children:"Sessions"}),f.jsxs("button",{className:"create-session-btn fade-in-scale animate-on-mount-delay-1",style:{display:"flex",alignItems:"center",gap:8},onClick:()=>r(!0),children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",width:"20",height:"20",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),"Create Session"]})]}),f.jsxs("div",{className:"sessions-content",children:[f.jsx("div",{style:{marginBottom:24,display:"flex",width:"45%"},children:f.jsxs("div",{style:{display:"flex",alignItems:"center",background:"#fff",borderRadius:8,border:"1.5px solid #e0e0e0",boxShadow:"0 1px 4px rgba(65,105,225,0.04)",width:"100%",maxWidth:"100%"},children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:20,height:20,color:"#666",marginLeft:14,marginRight:8},children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})}),f.jsx("input",{type:"text",placeholder:"Search sessions by name or classroom...",value:Y,onChange:ne=>$(ne.target.value),style:{padding:"10px 16px",border:"none",outline:"none",fontSize:"1rem",width:"100%",background:"transparent",color:"#222",borderRadius:8}})]})}),f.jsx("div",{className:"session-list",children:fe.length>0?fe.map((ne,be)=>f.jsxs("div",{className:`session-list-item ${ne.status}-session slide-in-from-right animate-on-mount-delay-${3+be}`,onClick:()=>i(`/sessions/${ne.id}`),style:{position:"relative",overflow:"hidden"},children:[f.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%"},children:f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:18},children:[f.jsx("span",{className:`status-badge ${ne.status}`,children:ne.status==="active"?"Active":ne.status==="paused"?"Paused":ne.status==="ended"?"Ended":ne.status}),f.jsx("span",{style:{fontWeight:600,fontSize:"1.15rem",color:"#222"},children:ne.name}),f.jsxs("span",{className:"session-time",style:{color:"#888",fontSize:13},children:["Started: ",new Date(ne.createdAt).toLocaleString()]}),ne.classroomId&&f.jsx("span",{className:"classroom-badge",style:{background:"#e3eafe",color:"#4169e1",padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"500"},children:D(ne.classroomId)})]})}),f.jsx("div",{className:"delete-area",onClick:j=>{j.stopPropagation(),Qe(ne.id)},title:"Delete session",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"trash-icon",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})})})]},ne.id)):Y.trim()?f.jsxs("div",{className:"session-list-item session-card-empty animate-on-mount-delay-3",style:{textAlign:"center",padding:40},children:[f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"#b0b0b0",width:"40",height:"40",style:{marginBottom:12},children:[f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6l4 2"}),f.jsx("circle",{cx:"12",cy:"12",r:"9",stroke:"#b0b0b0",strokeWidth:"1.5",fill:"none"})]}),f.jsx("h3",{style:{color:"#888",fontWeight:500},children:"No Sessions Found"}),f.jsx("p",{style:{color:"#bbb"},children:"Try using a different query..."})]}):f.jsxs("div",{className:"session-list-item session-card-empty animate-on-mount-delay-3",style:{textAlign:"center",padding:40},children:[f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"#b0b0b0",width:"40",height:"40",style:{marginBottom:12},children:[f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6l4 2"}),f.jsx("circle",{cx:"12",cy:"12",r:"9",stroke:"#b0b0b0",strokeWidth:"1.5",fill:"none"})]}),f.jsx("h3",{style:{color:"#888",fontWeight:500},children:"No Sessions"}),f.jsx("p",{style:{color:"#bbb"},children:"Start a new session to begin"})]})})]})]}),n&&f.jsx("div",{className:"modal-overlay fade-in-scale",onClick:()=>{r(!1),c(""),H("")},children:f.jsxs("div",{className:"modal-content create-classroom-modal",onClick:ne=>ne.stopPropagation(),children:[f.jsxs("div",{className:"modal-header",children:[f.jsx("h2",{children:"Create New Session"}),f.jsx("button",{className:"modal-close",onClick:()=>{r(!1),c(""),H("")},children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"20",height:"20",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),f.jsxs("div",{className:"modal-body",children:[f.jsxs("div",{className:"form-group",children:[f.jsxs("label",{children:["Session Name ",f.jsx("span",{style:{color:"red"},children:"*"})]}),f.jsx("input",{type:"text",value:o,onChange:ne=>c(ne.target.value),placeholder:"Enter session name",onKeyPress:ne=>ne.key==="Enter"&&o.trim()&&L()})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Classroom (Optional)"}),f.jsxs("select",{value:z,onChange:ne=>H(ne.target.value),className:"form-control",children:[f.jsx("option",{value:"",children:"Select a Classroom"}),A.map(ne=>f.jsx("option",{value:ne.id,children:ne.name},ne.id))]})]})]}),f.jsxs("div",{className:"modal-footer",children:[f.jsx("button",{className:"btn-secondary",onClick:()=>{r(!1),c(""),H("")},children:"Cancel"}),f.jsx("button",{className:"btn-primary",style:{background:o.trim()?"#4169e1":"#e0e0e0",borderColor:o.trim()?"#4169e1":"#e0e0e0",color:o.trim()?"#fff":"#b0b0b0",cursor:o.trim()?"pointer":"not-allowed",fontFamily:"Space Mono, monospace"},onClick:L,disabled:!o.trim(),children:"Create"})]})]})}),Z&&f.jsx("div",{className:"modal-overlay fade-in-scale",onClick:()=>{X(!1),le(null)},children:f.jsxs("div",{className:"modal-content",onClick:ne=>ne.stopPropagation(),children:[f.jsx("div",{className:"modal-header",children:f.jsx("h2",{children:"Active Session Detected"})}),f.jsx("div",{className:"modal-body",children:f.jsx("p",{children:"There is already an active running session. If you create this session, the active session will be paused. Proceed?"})}),f.jsxs("div",{className:"modal-footer",children:[f.jsx("button",{className:"btn-secondary",onClick:()=>{X(!1),le(null)},children:"Cancel"}),f.jsx("button",{className:"btn-primary",onClick:()=>{const ne=at.currentUser;if(!ne)return;const be=si(ri,"users",ne.uid,"appdata","sessions");Li(be).then(j=>{if(j.exists()){const ge=j.data().sessions||[],ce=ge.findIndex(we=>we.status==="active");ce!==-1&&(ge[ce].status="paused",fr(be,{sessions:ge}))}}),X(!1),te&&(N(te),le(null))},children:"Proceed"})]})]})}),pe&&f.jsx("div",{className:"modal-overlay fade-in-scale",onClick:()=>{k(!1),C(null)},children:f.jsxs("div",{className:"modal-content",onClick:ne=>ne.stopPropagation(),children:[f.jsx("div",{className:"modal-header",children:f.jsx("h2",{children:"Delete Session"})}),f.jsx("div",{className:"modal-body",children:f.jsx("p",{children:"Are you sure you want to delete this session? This action cannot be undone."})}),f.jsxs("div",{className:"modal-footer",children:[f.jsx("button",{className:"btn-secondary",onClick:()=>{k(!1),C(null)},children:"Cancel"}),f.jsx("button",{className:"btn-primary",style:{background:"#dc3545",borderColor:"#dc3545"},onClick:()=>{const ne=at.currentUser;if(!ne)return;const be=si(ri,"users",ne.uid,"appdata","sessions");Li(be).then(j=>{if(j.exists()){const ce=(j.data().sessions||[]).filter(we=>String(we.id)!==String(R));fr(be,{sessions:ce})}}),k(!1),C(null),ze(ne)},children:"Delete"})]})]})})]})}let Rd=null,Ac=null;function MN(i){Rd=i}function LN(i){Ac=i}function VN(){return Ac}async function N2(){try{Ac&&(await Ac.cancel(),Ac=null),Rd&&(await Rd.close(),Rd=null)}catch{}}const Dm="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAACWCAMAAAAL34HQAAAAIGNIUk0AAHomAACAhAAA+gAAAIDoAAB1MAAA6mAAADqYAAAXcJy6UTwAAAHjUExURQAAABfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRjAZr3t1DvKff////v+/ZzkvSfEcO/79HrbpxvBZ9v151nSkDLHd3csD88AAACTdFJOUwAraa3O4vfNq2gpGqnr6qdmFjCm+vieLQFPw7tGPdgyCZL++4EFMd3QJ3ljmn+Pl4J+Yl4q9SUK2tWIIh62NrysNSaiEvEHZ1GxBuM7b1Sjh8mw3/Ts8ta9upZkA/CqoGBVEAtMPALbXEnXyD6YDd75IGxTdYWE/D/u1BwIfHcZn5sswLLgOZHliR9Kc53G7ZlFG34nhJYAAAABYktHRJfmbhuvAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH6QcTFCU033vrdQAAAyR6VFh0UmF3IHByb2ZpbGUgdHlwZSB4bXAAAEiJnVZBkuMgDLzrFfsEkEDCz3FsuG3VHvf528JxjGeY1OwkFScxQmq1WsL09/cf+oVXjKWQbNKsWNCoog/Nljgoa1bTRavsbLU9Ho/GhvuLJr+TTXLaJaTdQhLYFl0oFVsNG7PYmmpOim84FMEmNmlSwyqbFVmtKDbq7sE0cvD/umk18TXyCECTtDkOWY+FlzmQPF0xbFTWzCkl/eAGa4RFd1Us4R1kxdZm/cXVYMVVGwyNm0RZ/I1fQRhXxnU/AvBOJgYuPLoV3j0C1juKsHK4kAAGqEHirIsF2C/IoQLZc52QFiMmEnFkbL79DjzFjhYOlD+j76GrRrqM3NkzTkUFm+4wA3swRFpcJZyMeSjZbgFWSt30XB6TySisxWtlXAPa5UrLxUPIBhtyMmSOqrlKuLPh6TKQ5QvF6e6OJTlvGRwhoQyhVbCMakhmSE1Sv6ps3Gbbrl1nCJrGyNB6Sq5jZ0s0CgQMvrxou4hAtoKS427AL4RGapKluA5grsAAgUvBO+BuwpYywTSEuVKmCR74PczglvtHcV3EcUUEWjw4Qt1C0H3rO1LRhygAkJdXaZzXpzt6bziWnttY/FEwvkIzzUx4GdQ2urwah8bO+f8OuxqMvuow9RJ/nguhy3S7ZoLb4QpBbhAWpo9PgFdXxXtXdaer48FnG7m7sHuvbZbedlTH2f9FrWqOs48c1zZkigLBA3lk8zwVbHjfxc5A67k7JxAO3O8IEOVN7ehWgxs6X5knNasb3evx87rR15MRkkyziX7OxPPAOMYg+Rw8tjwrJveKPd35wPUJWrzsUrNP0Op8ej/gmFoOjqbGX6t4Rgb9RMUzMug4J/0M/S4bnYwC/YTxUKCBjcPdOEyRVuegQZAVQxKChN7ADBef7GDJs/AZz8TQbo+IzsJhHJNpyqiYqS0wVn2w95dPB5xqOCUiBie+MgYOwD/AUvHHDteRCx95Jz6NFL7wNFLSpo1DH/P++LAdI1/2XoIP+OljAt+v1WiVmfzZ4nX708PLsTJ5gspHFmhfPh5+6B8dljH+sg7JVwAAAAFvck5UAc+id5oAAANnSURBVHja7duHUhRBEAbgEQ9MYEAPEEUliKgoiKAoKpgjinKcOecsJsw5Zx10zfqoclIWWLWhe6Z7dq5q/gfY+6rurw0zPUK4uLi4uLi4uLi4ZGuG5AxN5OZJVPJyhw0fMZKNNConvwAHGpzRY8aOY0AVjp+gbupPsqiY1lQysVTX1J9JkwlVZVNoUJkkphKhppVX0KmkrKyaTqGqnkGJyqRmpr5qFjUqk9m6qloOlZRztFAlTCop5+qw6rhUUtapq+r5VFLOU1U1cKqknK+makQ+krFpWqCiWtjMq5JykQprMbdKqV4t2i8M0UkuQbOW8qukzMeqlvlepvfjJ1JWRSOS1erP8j5/+UrpasOplvtfpdfzvG/ffxC6VqBYK4NZnvfzFx0L9WxclQxjeR5dxVavQbDWBlzkH4uwYusQrPVRLLqK1cJVG5qiWVQV2whnbQq6xn8sooq1gFntQBZJxTaDWVugLIqKdYBZW+Es/YptA7M6MSzdiiXArBSOpVexLjAr8BIBLL2KMbJ0KsbKUq8YM0u1YtwsxYrxs5QqZoKlUDEzLHTFDLGwFTPGwlXMIAtTMaMseMXMssAVM80CVsw8C1SxOFiAisXCiq5YTKyoisXGCq9YjKywisXJCqlYvKzAisXN6qvYb8fK6j/RysrbeYOw8nZq5cPHyke1nS82Vr4GWvnSbOUnhp0fZFZ+vlr5sW/l0oidC0lWLrtZuUhp5ZKunQvgVm4XWLm5YmQrKo1kaW3cpcGswFlhjm3O7WDWDgxLd1N4J5i1C87S30IvB7N2Q1kUAwfwgcpqIItkPAM+WbZnL4RFM8xSUAJmiX3RLKrRn/1wlTgQxaIblDqIYB0KmO6kHytLHUawRFsYi3IIrwijEkeCWbQji0dRrGPHA1jEA541KJUQJ/xZxOOw8iSSJU7R/r5/TmNV4owBVSV2drgvZ/lZ9XiVOHeeWwUfKBucwgu8qnS3Ektc5GVdUlMxn3u4rKqy9fiREFe4VFd1VEI09HCgehSPHg3k2nV6VVeZrkqIbvLH0I2b+iohbt1O6VMGkr6DOVAQlrv36FT3KU9XP3hIg3qEO6kSneKOx7qm5ipq1N88efpM3dT5nOpAtU9evHz1+g3ylvG29F37+w98JhcXFxcXFxcXFxcXl6zMH8sOCq3nAGlzAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDI1LTA3LTE5VDIwOjM1OjU5KzAwOjAwFCv9uwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyNS0wNy0xOVQyMDozNTo1OSswMDowMGV2RQcAAAAodEVYdGRhdGU6dGltZXN0YW1wADIwMjUtMDctMTlUMjA6Mzc6NTIrMDA6MDA0keAfAAAAFHRFWHRwZGY6QXV0aG9yAFNvbmEgVG9teTcubfgAAABddEVYdHhtcDpDcmVhdG9yVG9vbABDYW52YSAoUmVuZGVyZXIpIGRvYz1EQUdkWnB2eVJmayB1c2VyPVVBQzVUVWNHS244IGJyYW5kPUJBQzVUZkVnaExvIHRlbXBsYXRlPcsU5u0AAAAASUVORK5CYII=",jm="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAACWCAMAAAAL34HQAAAAIGNIUk0AAHomAACAhAAA+gAAAIDoAAB1MAAA6mAAADqYAAAXcJy6UTwAAALTUExURQAAAJmXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5+dnba1tcTDw9HR0d/e3uzs7Pn5+f///6KgoMPCwuPj4/39/ePi4sPBwaOiop2bm8XDw+rp6enp6ZuZmcLBwfX09PLy8r69vbu6uvDw8LOxsevr6+rq6rSzs9LR0czLy5yamt3c3NjX1+bl5aSiou7t7aqpqfT09Ofn59fW1tbV1cnIyMbFxbW0tP7+/qimpqmnp7a0tO3t7bm4uJqYmL++vry7u9zc3Pr6+vX19dPS0vPy8vz8/N/f39nY2KOhoc/Ozq+urqupqaakpO/v7/v7+728vLe2tubm5vPz86Gfn+jn59va2tXV1ff399TT06Wjo9rZ2aqoqN3d3d7d3ayqqqWkpMfFxeTk5MXExNDPz/n4+NHQ0Ao8SYwAAACTdFJOUwAraa3O4vfNq2gpGqnr6qdmFjCm+vieLQFPw7tGPdgyCZL++4EFMd3QJ3ljmn+Pl4J+Yl4q9SUK2tWIIh62NrysNSaiEvEHZ1GxBuM7b1Sjh8mw3/Ts8ta9upZkA/CqoGBVEAtMPALbXEnXyD6YDd75IGxTdYWE/D/u1BwIfHcZn5sswLLgOZHliR9Kc53G7ZlFG34nhJYAAAABYktHRJvv2FeEAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH6QcTFCco+UzVuAAAAyF6VFh0UmF3IHByb2ZpbGUgdHlwZSB4bXAAAEiJnVZBkuMwCLzzin2CBAjk5zi2dNuqPe7zt5Gd2J7xpGYnqdiOQdBAg0R/f/+hX/jkXCvJIt2rJ8sm9rDiysnYirlN1mRlb/3xeHR2vJ9M401xKbpK0tWTCnSrTaTVZ8fCIj5rK2q4w6AIFrFLl5ZmWbzK7NWw0NZwZplT/LfFmkvIKDwAjVoPHDJvgpc6kOymGDomc2FVtQ9mICMIw1R1xTfJjKXdx4ebQ4ubdSg6d8kyxRdPSRhXxnXdHPBKLo5chHevvIYHyAeKNHM6kAAGUoPA2SZP0J8QQwOyXU4Ii+ETgQQy9lh+Ba55oIUB48/oh+tmmQ6lMLb7aahgtxVqyB4UERY3Sc+MhStZLg5m0qH6FJ+DKSis50NylgHtdIQV5CFEgwVFHZGjasESHtmIcBnIyoHiae6KRSNvBTlCQAVEa8gyqiGFQTXRcTVZuN8tO1Y9XdCtjwKuq07DfMYCkwSKmlTgW/HWLDi2CoxJBSFW46iajEeIRETBFsETWAH1UPuM6eTmCJlu8IBfO5oSoeJnuE5wEW4cT+EgXV3Qdem7pKIPUQCkv75KE3ndzdF7xXPpuZ+LfyZMSOiOMzd5ObHtbPJoHDp3zv932NFg9FWHQVFu5kIaNF2OmRB6uIKQC3iC6RMT4NVV+dpVw+gcePBbzrk7sEevLa5vO2rgHP+yNfPAOUZOcNvA8RIWKDx7xAn6jb7LIwN9xB45AXFgfoWDLG9qR5caXNCF5D6ou7rRtR4/rxt9PRlBSb2b6M+Z+NwwtjFIMQe3JXvF5Fqx3VwM3JigNcourcQEbZHP6AdsU9OWo1vlr1l8lwz6CYvvkkHbPhl76HezMZJRwZ903hTolI3N3HmYIqyRgw5CNgxGEBJ8Q2a4xmRHliKKmPFMDO4Oj+gsbMZZ3bSgYm4+QdnswdFfMR2wq2GXyCqCW8HAAfgHslTj2BE8CuIjbuWnEkZynEaqLtY5jTEfx4dlG/myjhJ8wE8fA/h+rc5ahSnOFq/Xnw4vm+TmBFW2KNC+vB1+6B9daTIIi5FANAAAAAFvck5UAc+id5oAAAS1SURBVHja7dvnd5RFFMfxEQM2sKCBiKJSRFQURFAUC/aKooTYe+9iw95717sJbCZxAZEVBSMmGgIY47IrUTQkZAmoNBUxYsE/wax5kchhZ+6duXeVc+b7Pr/zOdk9z/OcZB6lQqFQKBQKhUKhrbVtumyb17UbkOrWdbvtd9hRjLRTl+49aKDO7bzLrrsJoHruvoe7qb38Xr15TQV79vE1tbfX3oyqvvvwoDLl7cuE2q9ffz4VwICB+3OoBh3Aico0+EB/1UHcqEwH+6qGSKgADvFCFQipAA71YQ2VUgEMdVcNk1MBHOaqGi6pAjjcTTWCeEumNvIIF9WRo2RVAEe5sI6WVjl9vUZ7PzDYyz+GzDpWXgXQnao6Lhcq6D+CyDo+JywYQ1OdkBsVwIkk1km5YpHujSfnE5YjxSWTp0RLdVul0SmTS4ojhB8+5VQC6zT0bFn5WzG9WbGp06ajB04nsM7ATb494x2dpZklSNYQvOrMkZjB+LuztKH33o9jVs7Cs87G7M2eoy3NmY3ZGY1mjbWPfVBhQ2X6cK596Rw061zr1kcYVKZK69Q4NOs8y1LVx1iV1p9UWcbOR7PGm4ci1XiV1tWWy1gemlVo3JlXQ1FpXTPPODcBzTLOzF9AU2m9YL5xkIUVX0hVab0wLs76lK7Sulaa9ZmLSus6WdbnCTdWoliStajUTdX2yJMUZJEuWP+uWo6VcldpnRJjfeHDikqxFvuotF4sw6r3+mVl/3V5sr70U2n9lQhriS9riQQr/rUvqzQuwPL8wmdKCbC8P8Nsd2wvlv9nqPU3/Kykv0rrJDuL4auV5YrqxarjYNWxs2o5WA3sLI9nmo6msrOWcrCWsrMaOViN7CwOldaB9Z+yWL7yUXYWywWiiZ21jIPFfzmt5GDx33y8n+Qz8d+qp3OwmtlZEPVXzQR+VtqfVSnAWu7PWi7Aglm+qi0/yvuyvB8Ea0VYXn9GypQSYUGTn6oJZFgtjn84bS/RIsTyuy8uAynWCo8n58YVYixocGelQY4VWemqWhkRZEHyWzeV4c/yeFZR9o3v3FjfZ18sQrNMZ4Wd7thpw+AFaNaFhpX6VXTVqnrD4EVo1sWGFShbTVWtLjPt9UOzLjHNwJq1NNXaNcY5/IHKQcYdiK+jqH6wHB7Bnyy79DLzEsxA3x0T0yxTPQrQLHW5ZQvmIv+x+KP12MgVeJW60jYGzQ0xOyr2U7N16CoC62rE6c71P1s+ycS69faVwmsILDXGPgiw4ReTqnUDZqMXRaWuxUwC/JrOcoKkJt2CW7iOxLr+BtwqwMbfqjf7MGO//7ER+9ODSSqlbsQOt1W1KFX+Z2vFpk0VrX+Vp5K2I0idu4nIUjcTxp27hapSt+ZANYB6drit2+RZw+gqdfsd0ir8gbLO9bxTVlU00Yml7pJl3e2mEn7v4R5X1f/19SOl7pVS3eejUmr4JAnUJMdXjzq6/wF+1YS+viqlJrLfhh58yF+l1MOPFPpTOip6lPJCganHHudTPcH5dvWTT/Ggnqa9qWKv97hnfE2jBnKj/unZ5553N41/geuF6i304ksvv/Iq8ZLxWp/Xx77xppwpFAqFQqFQKBQKhbbK/gaAcnwn+ebi2QAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyNS0wNy0xOVQyMDozODoxMiswMDowMGeYLAsAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjUtMDctMTlUMjA6Mzg6MTIrMDA6MDAWxZS3AAAAKHRFWHRkYXRlOnRpbWVzdGFtcAAyMDI1LTA3LTE5VDIwOjM5OjQwKzAwOjAwcW3BGwAAABR0RVh0cGRmOkF1dGhvcgBTb25hIFRvbXk3Lm34AAAAXXRFWHR4bXA6Q3JlYXRvclRvb2wAQ2FudmEgKFJlbmRlcmVyKSBkb2M9REFHZFpwdnlSZmsgdXNlcj1VQUM1VFVjR0tuOCBicmFuZD1CQUM1VGZFZ2hMbyB0ZW1wbGF0ZT3LFObtAAAAAElFTkSuQmCC",PN="/dashboard/assets/forward-C0bK_Hny.png",UN="/dashboard/assets/right-C2_LwsZ_.png",BN="/dashboard/assets/reverse-BkDOZ5rR.png",zN="/dashboard/assets/left-bDZiDDEe.png",FN="/dashboard/assets/connectiongraphic-BSRRSLPm.png",HN="/dashboard/assets/robotgraphic-DpxCb7B5.png";function qN({voltage:i,cardHeight:e=60}){let o=0;typeof i=="number"&&(o=Math.max(0,Math.min(1,(i-3.3)/(5-3.3))));const c=`${Math.round(o*100)}%`;let h="#4caf50";return o<.2?h="#f44336":o<.5&&(h="#ff9800"),f.jsxs("div",{style:{position:"absolute",bottom:0,left:0,right:0,height:"30px",background:"transparent",borderBottomLeftRadius:16,borderBottomRightRadius:16,overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center",padding:"0 12px"},children:[f.jsx("div",{style:{position:"absolute",bottom:0,left:0,right:0,height:"4px",background:h,width:`${o*100}%`,transition:"width 0.4s cubic-bezier(0.4,0,0.2,1)"}}),f.jsxs("div",{style:{fontSize:"11px",fontWeight:"600",color:"#666",zIndex:1,textAlign:"center"},children:[c,"  ",i?`${i.toFixed(2)}V`:""]})]})}function cc(i){if(!i)return"";const e=new Date(i);return isNaN(e.getTime())?i:e.toLocaleString(void 0,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}function GN({lastBatteryTime:i,firstBatteryTime:e,lastProgramTime:n},r=new Date){return!i||(r-i)/1e3>10?"inactive_battery":n&&(r-n)/1e3<=180?"active":n&&(r-n)/1e3>180||!n&&e&&(r-e)/1e3>180?"inactive":"inactive_battery"}function XN(i){if(!i)return 0;const e=i.trim().toLowerCase().split(/\s+/);let n=4e3;for(const r of e)r==="forward"||r==="reverse"?n+=1500:(r==="left"||r==="right")&&(n+=1e3);return n}const Qi=async i=>{if(!i)return[];const e=si(ri,"users",i.uid,"appdata","sessions"),n=await Li(e);return n.exists()?n.data().sessions||[]:[]},ws=async(i,e)=>{if(!i)return;const n=si(ri,"users",i.uid,"appdata","sessions");await fr(n,{sessions:e})};function WN(){var fi,ba,hs,$n;const[i,e]=I.useState({}),n=Os(),{sessionId:r}=zE(),o=is(),h=(E=>new URLSearchParams(o.search).get(E))("name")||`Session ${new Date().toLocaleDateString()}`,[p,g]=I.useState(!1),[y,w]=I.useState([]),[x,A]=I.useState({}),[P,z]=I.useState(null),[H,Y]=I.useState("active"),[$,Z]=I.useState(h),[X,te]=I.useState(null),[le,pe]=I.useState(!1),[k,R]=I.useState(null),[C,M]=I.useState([]),[D,L]=I.useState(null),[N,ze]=I.useState(!1),[Qe,ie]=I.useState(null),[fe,ne]=I.useState(new Set),[be,j]=I.useState(!1),[se,ge]=I.useState(""),[ce,we]=I.useState(new Set),[Ie,ke]=I.useState(""),[lt,dt]=I.useState({connection:!1,lessonProgress:!1,robotsAndPrograms:!1,dataReceived:!0}),[qn,Vn]=I.useState(!1),[un,de]=I.useState(null),[ve,De]=I.useState(null),[qe,In]=I.useState(null);I.useRef();const $e=I.useRef(!1);I.useEffect(()=>($e.current=!0,()=>{$e.current=!1}),[]),I.useEffect(()=>{const E=V=>{document.querySelectorAll(".dropdown").forEach(B=>{const re=B.querySelector(".dropdown-menu");re&&re.style.display==="block"&&(B.contains(V.target)||(re.style.display="none"))})};return document.addEventListener("click",E),()=>{document.removeEventListener("click",E)}},[]);const wt=()=>{const E=JSON.parse(localStorage.getItem("roversaClassrooms")||"[]");M(E)},oi=E=>E?C.find(V=>V.id===E):null,Pn=E=>{dt(V=>({...V,[E]:!V[E]}))},Ms=()=>{if(!k)return!1;const E=Object.keys(x),V=Object.keys(k.robots||{});if(E.length!==V.length)return!0;for(const re of E)if(!k.robots[re]||JSON.stringify(x[re])!==JSON.stringify(k.robots[re]))return!0;if(y.length!==(k.receivedData||[]).length||$!==k.sessionName)return!0;const F=Array.from(ce),B=Array.from(k.completedRobots||[]);if(F.length!==B.length)return!0;for(const re of F)if(!B.includes(re))return!0;return!1};I.useEffect(()=>{const E=Ms();pe(E)},[x,y,$,ce]);const so=I.useRef(!1);I.useEffect(()=>{if(!so.current&&r){so.current=!0;const E=at.currentUser;Qi(E).then(V=>{var B;const F=V.find(re=>String(re.id)===String(r));if(F)te(F),Z(F.name),Y(F.status),A(F.robots||{}),w(F.receivedData||[]),we(new Set(F.completedRobots||[])),R({robots:F.robots||{},receivedData:F.receivedData||[],sessionName:F.name,completedRobots:new Set(F.completedRobots||[])});else{const re={id:r,name:h,createdAt:new Date().toISOString(),createdBy:((B=at.currentUser)==null?void 0:B.email)||"Unknown",status:"active",robots:{},receivedData:[],completedRobots:[]},Ee=[...V,re];ws(E,Ee),te(re),Z(h),Y("active"),R({robots:{},receivedData:[],sessionName:h,completedRobots:new Set})}})}},[r]),I.useEffect(()=>{wt()},[]),I.useEffect(()=>{if(X&&X.classroomId&&C.length>0){const E=oi(X.classroomId);L(E)}},[X,C]);const Pi=I.useCallback(async()=>{try{if(H==="active"&&X&&X.id){const E=at.currentUser;Qi(E).then(V=>{const F={...X,name:$,status:H,robots:x,receivedData:y,completedRobots:Array.from(ce),lastUpdated:new Date().toISOString()},B=V.findIndex(re=>String(re.id)===String(X.id));B>=0?V[B]=F:V.push(F),ws(E,V),R({robots:x,receivedData:y,sessionName:$,completedRobots:ce})})}if(p)try{await rt()}catch(E){console.error("Error disconnecting micro:bit:",E)}}catch(E){console.error("Error in handleLeaveSession:",E)}},[H,X==null?void 0:X.id,$,p]),[Ls,ha]=I.useState(!1),Ct=async()=>{if(H==="active"){ha(!0);try{const E=await navigator.serial.requestPort();await E.open({baudRate:115200}),MN(E),g(!0);const V=new TextDecoderStream;E.readable.pipeTo(V.writable);const F=V.readable.getReader();LN(F)}catch(E){console.error("Error connecting to micro:bit:",E),g(!1)}finally{ha(!1)}}},rt=async()=>{g(!1),await new Promise(E=>setTimeout(E,100)),await N2(),window.location.reload()},Un=E=>{if(E&&E.trim().length>0){const V=new Date().toISOString(),F=E.trim(),B=F.split(" ");if(B.length>=2){const re=B[0];if(re.length>10)return;if(B.length===2&&!isNaN(parseFloat(B[1]))){const Ee=parseFloat(B[1]),Ce={type:"battery",voltage:Ee,timestamp:V};A(Fe=>{var St,Re,Se,At;return{...Fe,[re]:{deviceId:re,lastSeen:V,dataCount:(((St=Fe[re])==null?void 0:St.dataCount)||0)+1,latestData:Ce,rawData:F,firstSeen:((Re=Fe[re])==null?void 0:Re.firstSeen)||V,status:((Se=Fe[re])==null?void 0:Se.status)||"inactive",batteryData:{voltage:Ee,timestamp:V},lastBatteryTime:new Date().toISOString(),buttonEvents:((At=Fe[re])==null?void 0:At.buttonEvents)||[]}}}),w(Fe=>[...Fe,{timestamp:V,data:F}]),setTimeout(()=>en(),100)}else if(B.length>=2&&["PLAY","TEST"].includes(B[1])){const Ee=B[1],Ce=B.slice(2).join(" "),Fe={type:"button_event",button:Ee,program:Ce||null,timestamp:V};A(Re=>{var Se,At,It,Kt,nn,Ht,Pt,Nn,xt;return{...Re,[re]:{deviceId:re,lastSeen:V,dataCount:(((Se=Re[re])==null?void 0:Se.dataCount)||0)+1,latestData:Fe,rawData:F,firstSeen:((At=Re[re])==null?void 0:At.firstSeen)||V,status:((It=Re[re])==null?void 0:It.status)||"inactive",batteryData:(Kt=Re[re])!=null&&Kt.batteryData||(Ht=(nn=Re[re])==null?void 0:nn.latestData)!=null&&Ht.voltage?{voltage:(Nn=(Pt=Re[re])==null?void 0:Pt.latestData)==null?void 0:Nn.voltage}:null,buttonEvents:[...((xt=Re[re])==null?void 0:xt.buttonEvents)||[],{button:Ee,program:Ce||null,timestamp:V}].slice(-10)}}}),w(Re=>[...Re,{timestamp:V,data:F}]),setTimeout(()=>en(),100);const St=XN(Ce);e(Re=>({...Re,[re]:Date.now()+St}))}else{const Ee=Ps(F),Ce=fl(F);A(Fe=>{var St,Re,Se,At,It,Kt,nn,Ht,Pt;return{...Fe,[Ee]:{deviceId:Ee,lastSeen:V,dataCount:(((St=Fe[Ee])==null?void 0:St.dataCount)||0)+1,latestData:Ce,rawData:F,firstSeen:((Re=Fe[Ee])==null?void 0:Re.firstSeen)||V,status:((Se=Fe[Ee])==null?void 0:Se.status)||"inactive",batteryData:(At=Fe[Ee])!=null&&At.batteryData||(Kt=(It=Fe[Ee])==null?void 0:It.latestData)!=null&&Kt.voltage?{voltage:(Ht=(nn=Fe[Ee])==null?void 0:nn.latestData)==null?void 0:Ht.voltage}:null,buttonEvents:((Pt=Fe[Ee])==null?void 0:Pt.buttonEvents)||[]}}}),w(Fe=>[...Fe,{timestamp:V,data:F}]),setTimeout(()=>en(),100)}}}},dn=()=>{window.confirm("Are you sure you want to clear all robot data and received data? This cannot be undone.")&&(w([]),A({}),R(E=>({...E,robots:{},receivedData:[]})))},ro=()=>{window.confirm("Are you sure you want to clear all robots? This cannot be undone.")&&(A({}),we(new Set),R(E=>({...E,robots:{},completedRobots:new Set})))},ao=[{id:"lesson1",name:"I Feel"},{id:"lesson2",name:"Hungry, Hungry Robot"},{id:"lesson3",name:"Grid Challenges"},{id:"lesson4",name:"Duck Duck Robot"}],[Gn,Vs]=I.useState(()=>{let E=[];try{const F=localStorage.getItem("roversaLessons");if(F){const B=JSON.parse(F);Array.isArray(B)&&(E=B.map(re=>({id:re.id,name:re.title||re.name||"",link:re.link||""})))}}catch{}const V=[...ao];return E.forEach(F=>{V.some(B=>B.id===F.id)||V.push(F)}),[{id:"none",name:"None"},...V]}),[Oe,li]=I.useState("none"),[mt,rs]=I.useState(()=>{const E={};return Gn.forEach(V=>{E[V.id]=new Set}),E}),[oo,fa]=I.useState("none");I.useEffect(()=>{rs(E=>{const V={...E};return Gn.forEach(F=>{V[F.id]||(V[F.id]=new Set)}),Object.keys(V).forEach(F=>{Gn.some(B=>B.id===F)||delete V[F]}),V})},[Gn]),I.useEffect(()=>{const E=V=>{if(V.key==="roversaLessons"){let F=[];try{const re=localStorage.getItem("roversaLessons");if(re){const Ee=JSON.parse(re);Array.isArray(Ee)&&(F=Ee.map(Ce=>({id:Ce.id,name:Ce.title||Ce.name||"",link:Ce.link||""})))}}catch{}const B=[...ao];F.forEach(re=>{B.some(Ee=>Ee.id===re.id)||B.push(re)}),Vs([{id:"none",name:"None"},...B])}};return window.addEventListener("storage",E),()=>window.removeEventListener("storage",E)},[]);const ma=E=>{rs(V=>{const F={...V},B=new Set(F[Oe]);return B.has(E)?B.delete(E):B.add(E),F[Oe]=B,F})},ci=I.useCallback(()=>{if(!X){console.error("Cannot pause session: sessionData is null");return}const E={...X,name:$,status:"paused",robots:x,receivedData:y,pausedAt:new Date().toISOString()},V=at.currentUser;Qi(V).then(F=>{const B=F.findIndex(re=>String(re.id)===String(X.id));B>=0?F[B]=E:F.push(E),ws(V,F),Y("paused"),te(E),pe(!1),R({robots:x,receivedData:y,sessionName:$})})},[X,$,x,y]),[Ui,as]=I.useState(!1),ui=()=>{as(!0)},pa=()=>{if(p&&rt(),!X){console.error("Cannot end session: sessionData is null");return}const E={...X,name:$,status:"ended",robots:x,receivedData:y,endedAt:new Date().toISOString()},V=at.currentUser;Qi(V).then(F=>{const B=F.findIndex(re=>String(re.id)===String(X.id));B>=0?F[B]=E:F.push(E),ws(V,F),Y("ended"),te(E),pe(!1),R({robots:x,receivedData:y,sessionName:$})})},Bi=()=>{if(!X){console.error("Cannot resume session: sessionData is null");return}const E={...X,name:$,status:"active",robots:x,receivedData:y,resumedAt:new Date().toISOString()},V=at.currentUser;Qi(V).then(F=>{const B=F.findIndex(re=>String(re.id)===String(X.id));B>=0?F[B]=E:F.push(E),ws(V,F),Y("active"),te(E),pe(!1),R({robots:x,receivedData:y,sessionName:$})})},_r=()=>{wn(!0)},os=E=>{de(E),Vn(!0)},ga=E=>y.filter(V=>{const F=V.data.split(" ");return F.length>=1?F[0]===E:Ps(V.data)===E}),yt=E=>{const V=x[E];return!V||!V.buttonEvents?[]:V.buttonEvents.filter(F=>F.program&&F.program.trim()).map(F=>({deviceId:E,robotName:V.assignedTo?V.assignedTo.name:E,button:F.button,program:F.program,timestamp:F.timestamp,robot:V})).sort((F,B)=>new Date(B.timestamp)-new Date(F.timestamp))},Ft=E=>{const V=yt(E);return V.length>0?V[0]:null},kt=E=>y.filter(V=>{const F=V.data.split(" ");return F.length>=1?F[0]===E:Ps(V.data)===E});I.useEffect(()=>{const E=at.onAuthStateChanged(V=>{V||n("/login")});return()=>{E(),$e.current&&!at.currentUser&&Pi()}},[n]),I.useEffect(()=>{X&&te(E=>({...E,robots:x,receivedData:y,completedRobots:Array.from(ce)}))},[x,y,ce,X==null?void 0:X.id]),I.useEffect(()=>{H==="active"&&$&&en()},[$]),I.useEffect(()=>{if(!p)return;let E=!1,V="";return(async()=>{await new Promise(re=>setTimeout(re,1e3));const B=VN();for(;!E;)try{const{value:re,done:Ee}=await B.read();if(Ee)break;if(re){V+=re;const Ce=V.split(`
`);V=Ce.pop();for(let Fe of Ce)E||Un(Fe)}}catch(re){console.error("Error reading serial data:",re);break}})(),()=>{E=!0}},[p]),I.useEffect(()=>{const E=setInterval(()=>{const V=new Date;A(F=>{let B=!1;const re={...F};return Object.keys(re).forEach(Ee=>{const Ce=re[Ee];let Fe=Ce.lastBatteryTime?new Date(Ce.lastBatteryTime):null;Fe&&isNaN(Fe.getTime())&&(Fe=Date.parse(Ce.lastBatteryTime)?new Date(Date.parse(Ce.lastBatteryTime)):null);let St=Ce.batteryData&&Ce.batteryData.timestamp?new Date(Ce.batteryData.timestamp):null;St&&isNaN(St.getTime())&&(St=Date.parse(Ce.batteryData.timestamp)?new Date(Date.parse(Ce.batteryData.timestamp)):null);let Re=null;if(Ce.buttonEvents&&Ce.buttonEvents.length>0)for(let At=Ce.buttonEvents.length-1;At>=0;At--){const It=Ce.buttonEvents[At];if(It&&It.timestamp){const Kt=new Date(It.timestamp);if(!isNaN(Kt.getTime())){Re=Kt;break}}}const Se=GN({lastBatteryTime:Fe,firstBatteryTime:St,lastProgramTime:Re},V);Ce.status!==Se&&(re[Ee]={...Ce,status:Se},B=!0)}),B?re:F})},2e3);return()=>clearInterval(E)},[]),I.useEffect(()=>{const E=setInterval(()=>{H==="active"&&X&&en()},5e3);return()=>clearInterval(E)},[H,X==null?void 0:X.id]),I.useEffect(()=>{const E=F=>{(p||H==="active"&&X)&&Pi()},V=()=>{document.hidden&&H==="active"&&X&&en()};return window.addEventListener("beforeunload",E),document.addEventListener("visibilitychange",V),()=>{window.removeEventListener("beforeunload",E),document.removeEventListener("visibilitychange",V)}},[p,H,X]),I.useEffect(()=>{if($e.current&&H==="active"&&X&&X.id){const E=at.currentUser;Qi(E).then(V=>{const F=V.findIndex(B=>String(B.id)===String(X.id));F>=0&&V[F].status==="active"&&(V[F]={...X,name:$,status:H,robots:x,receivedData:y},ws(E,V))})}},[$,H,X==null?void 0:X.id]);const en=()=>{try{if(H==="active"&&X&&X.id){const E=at.currentUser;Qi(E).then(V=>{const F={...X,name:$,status:H,robots:x,receivedData:y,completedRobots:Array.from(ce),lastUpdated:new Date().toISOString()},B=V.findIndex(re=>String(re.id)===String(X.id));B>=0?V[B]=F:V.push(F),ws(E,V),R({robots:x,receivedData:y,sessionName:$,completedRobots:ce})})}}catch(E){console.error("Error in autosaveSession:",E)}},Ps=E=>{const V=/[0-9A-Fa-f]{8,}/g,F=E.match(V);if(F&&F.length>0)return F[0].toUpperCase();const B=/(?:device|id)[:\s]*([0-9A-Fa-f]+)/i,re=E.match(B);if(re)return re[1].toUpperCase();const Ee=/[0-9A-Fa-f]{4,}/g,Ce=E.match(Ee);return Ce&&Ce.length>0?Ce[0].toUpperCase():`UNKNOWN_${E.slice(0,8).replace(/[^0-9A-Za-z]/g,"")}`},fl=E=>{const V=E.split(/[,\s]+/),F={};return V.forEach((B,re)=>{if(B.includes("=")){const[Ee,Ce]=B.split("=");F[Ee.trim()]=Ce.trim()}else if(B.includes(":")){const[Ee,Ce]=B.split(":");F[Ee.trim()]=Ce.trim()}else re===0&&!B.match(/[0-9A-Fa-f]{4,}/)?F.command=B:isNaN(B)||(F[`value${re}`]=parseFloat(B))}),F},di=()=>{if(!se.trim())return x;const E=se.toLowerCase(),V={};return Object.entries(x).forEach(([F,B])=>{if(F.toLowerCase().includes(E)){V[F]=B;return}if(B.assignedTo){if(B.assignedTo.name.toLowerCase().includes(E)){V[F]=B;return}if(B.assignedTo.email&&B.assignedTo.email.toLowerCase().includes(E)){V[F]=B;return}if(B.assignedTo.studentCount&&B.assignedTo.studentCount.toString().includes(E)){V[F]=B;return}}}),V},lo=(E,V)=>{if(!D)return;const F=D.students.find(re=>re.id===V);if(!F)return;const B={...x,[E]:{...x[E],assignedTo:{type:"student",id:F.id,name:F.name,email:F.email},assignmentTime:new Date().toISOString()}};A(B)},Us=(E,V)=>{if(!D)return;const F=D.groups.find(re=>re.id===V);if(!F)return;const B={...x,[E]:{...x[E],assignedTo:{type:"group",id:F.id,name:F.name,studentCount:F.students.length},assignmentTime:new Date().toISOString()}};A(B)},zi=E=>{const V={...x,[E]:{...x[E],assignedTo:null,assignmentTime:null}};A(V)},Fi=E=>{const V=new Set(fe);V.has(E)?V.delete(E):V.add(E),ne(V)},xi=()=>{fe.size>0&&j(!0)},hi=E=>E&&E.length>12?E.slice(0,12)+"...":E,hn=(E,V,F,B={})=>{const re={...x};fe.forEach(Ee=>{re[Ee]={...re[Ee],assignedTo:{type:E,id:V,name:F,...B},assignmentTime:new Date().toISOString()}}),A(re),ne(new Set),setIsTagSelectionMode(!1),j(!1)},Dt=E=>{if(!D)return;const V=D.students.find(F=>F.id===E);V&&hn("student",V.id,V.name,{email:V.email})},ya=E=>{if(!D)return;const V=D.groups.find(F=>F.id===E);V&&hn("group",V.id,V.name,{studentCount:V.students.length})},br=()=>{const E={...x};fe.forEach(V=>{E[V]={...E[V],assignedTo:null,assignmentTime:null}}),A(E),ne(new Set),setIsTagSelectionMode(!1),j(!1)},Xn=E=>{if(!E)return null;const V=E.toLowerCase().split(" "),F=[];return V.forEach((B,re)=>{let Ee=null;switch(B.trim()){case"forward":Ee=PN;break;case"right":Ee=UN;break;case"reverse":Ee=BN;break;case"left":Ee=zN;break;case"play":Ee=Dm;break;case"test":Ee=jm;break;default:F.push(f.jsx("span",{style:{display:"inline-block",padding:"4px 8px",background:"#f0f0f0",borderRadius:"4px",fontSize:"0.75rem",margin:"0 2px",fontFamily:"monospace",color:"#666"},children:B},re));return}Ee&&F.push(f.jsx("img",{src:Ee,alt:B,style:{width:"24px",height:"24px",margin:"0 2px",verticalAlign:"middle",objectFit:"contain",scale:10}},re))}),F},Ei=()=>{try{if(H==="active"&&X&&X.id){const E=at.currentUser;Qi(E).then(V=>{const F={...X,name:$,status:H,robots:x,receivedData:y,completedRobots:Array.from(ce),lastUpdated:new Date().toISOString()},B=V.findIndex(re=>String(re.id)===String(X.id));B>=0?V[B]=F:V.push(F),ws(E,V),pe(!1),R({robots:x,receivedData:y,sessionName:$,completedRobots:ce})})}}catch(E){console.error("Error saving session:",E)}},co=f.jsx("div",{className:"robot-cards-container",style:{display:"flex",flexDirection:"column",gap:"32px",width:"100%",overflow:"visible",paddingTop:"32px"},children:(()=>{const V=(()=>{if(!p)return Object.entries(di());const F=Object.entries(di());return[...F.filter(([B,re])=>re.status==="inactive"),...F.filter(([B,re])=>re.status!=="inactive")]})();return V.length>0?V.map(([F,B],re)=>{var Fe,St,Re,Se,At,It,Kt,nn,Ht,Pt,Nn,xt,wa,mo,fs,qs;let Ee=null;if(B.batteryData&&B.batteryData.voltage)Ee=B.batteryData.voltage;else if(B.latestData){const He=Object.keys(B.latestData);for(const Ut of["vbat","battery","voltage"])if(B.latestData[Ut]&&!isNaN(parseFloat(B.latestData[Ut]))){Ee=parseFloat(B.latestData[Ut]);break}if(Ee===null)for(const Ut of He){const Jn=parseFloat(B.latestData[Ut]);if(!isNaN(Jn)&&Jn>=3&&Jn<=4.3){Ee=Jn;break}}}const Ce=i[B.deviceId]&&i[B.deviceId]>Date.now();return f.jsxs("div",{className:`robot-card ${P===B.deviceId?"selected":""} ${fe.has(B.deviceId)?"tag-selected":""} ${(Fe=mt[Oe])!=null&&Fe.has(B.deviceId)?"completed":""} fade-in-scale animate-on-mount-delay-${Math.min(8+re,12)}`,onClick:()=>os(B.deviceId),style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"flex-start",padding:"20px 24px 36px 24px",background:ve===B.deviceId?"#e3eafe":(St=mt[Oe])!=null&&St.has(B.deviceId)?"#f8f9ff":"#fff",borderRadius:"16px",boxShadow:(Re=mt[Oe])!=null&&Re.has(B.deviceId)?"0 4px 20px rgba(65, 105, 225, 0.15)":"0 2px 12px rgba(65, 105, 225, 0.08)",border:ve===B.deviceId||(Se=mt[Oe])!=null&&Se.has(B.deviceId)?"2px solid #4169e1":"2px solid #e0e0e0",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",cursor:"pointer",position:"relative",overflow:"visible",gap:"18px",minHeight:"180px",height:"180px"},children:[f.jsx("div",{style:{position:"absolute",top:0,left:-2,zIndex:20,background:p?Ce?"#ffc107":B.status==="inactive_battery"?"#b0b0b0":B.status==="active"?"#28a745":"#dc3545":"#b0b0b0",color:"#fff",fontWeight:700,fontSize:"0.85rem",padding:"7px 22px 7px 18px",borderTopLeftRadius:"16px",borderTopRightRadius:"16px",borderBottomLeftRadius:"16px",borderBottomRightRadius:"16px",boxShadow:"0 2px 8px rgba(0,0,0,0.08)",letterSpacing:"0.02em",minWidth:"70px",textAlign:"center",border:"2px solid #e1e1e0",transform:"translateY(-60%)",pointerEvents:"none"},children:p?Ce?"Running program":B.status==="inactive_battery"?"Powered off":B.status==="active"?"Active":"Inactive":"Waiting for connection..."}),f.jsx("div",{style:{position:"absolute",top:"20px",right:"12px",zIndex:10},onClick:He=>He.stopPropagation(),children:f.jsxs("div",{className:"dropdown",children:[f.jsx("button",{className:"dropdown-toggle",onClick:He=>{He.stopPropagation();const Jn=He.target.closest(".dropdown").querySelector(".dropdown-menu");Jn.style.display=Jn.style.display==="block"?"none":"block"},style:{background:"#f0f0f0",border:"none",cursor:"pointer",padding:"4px",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",color:"#333",transition:"all 0.2s ease",outline:"none"},children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"16px",height:"16px"},children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM12.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM18.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z"})})}),f.jsx("div",{className:"dropdown-menu",style:{display:"none",position:"absolute",top:"100%",right:"0",background:"#fff",border:"1px solid #e0e0e0",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",zIndex:1e3,minWidth:"140px",padding:"4px 0"},children:f.jsxs("button",{onClick:He=>{if(He.stopPropagation(),window.confirm(`Are you sure you want to delete robot ${B.deviceId}? This cannot be undone.`)){const Ut={...x};delete Ut[B.deviceId],A(Ut),ce.has(B.deviceId)&&we(Jn=>{const Gs=new Set(Jn);return Gs.delete(B.deviceId),Gs})}He.target.closest(".dropdown-menu").style.display="none"},style:{width:"100%",padding:"8px 12px",background:"none",border:"none",cursor:"pointer",fontSize:"12px",fontWeight:"400",color:"#dc3545",textAlign:"left",display:"flex",alignItems:"center",gap:"8px",transition:"background-color 0.2s",outline:"none"},onMouseEnter:He=>He.target.style.backgroundColor="#fff5f5",onMouseLeave:He=>He.target.style.backgroundColor="transparent",children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"14px",height:"14px"},children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})}),"Delete Robot"]})})]})}),f.jsxs("div",{style:{display:"flex",flexDirection:"row",alignItems:"flex-start",flex:1,minWidth:0,gap:"18px"},children:[f.jsx("label",{style:{marginRight:"0",zIndex:5,display:"flex",alignItems:"center",justifyContent:"center",height:"100%",alignSelf:"center",padding:"6px",borderRadius:"6px",cursor:"pointer",minWidth:"32px",minHeight:"32px",boxSizing:"border-box",userSelect:"none"},onClick:He=>He.stopPropagation(),children:f.jsx("input",{type:"checkbox",checked:fe.has(B.deviceId),onChange:()=>Fi(B.deviceId),style:{width:"18px",height:"18px",cursor:"pointer",margin:0}})}),f.jsx("img",{src:"/src/robotgraphic.png",alt:"Robot",style:{width:"60px",height:"70px",marginRight:"0",opacity:(At=mt[Oe])!=null&&At.has(B.deviceId)?"0.8":"1",transition:"opacity 0.3s ease"}}),f.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:"12px",minWidth:0},children:[f.jsxs("div",{style:{display:"flex",alignItems:"flex-end",gap:"6px"},children:[f.jsx("span",{className:"robot-card-device-id",onClick:He=>He.stopPropagation(),style:{fontWeight:(It=mt[Oe])!=null&&It.has(B.deviceId)?"600":"500",color:(Kt=mt[Oe])!=null&&Kt.has(B.deviceId)?"#4169e1":"#222",transition:"all 0.3s ease"},children:B.deviceId}),B.assignedTo?f.jsxs("span",{style:{minWidth:"120px",minHeight:"22px",maxWidth:"200px",display:"inline-flex",alignItems:"center",background:(nn=mt[Oe])!=null&&nn.has(B.deviceId)?"#e3eafe":"#f8f9fa",borderRadius:"12px",fontSize:"12px",color:(Ht=mt[Oe])!=null&&Ht.has(B.deviceId)?"#4169e1":"#666",fontWeight:"500",border:(Pt=mt[Oe])!=null&&Pt.has(B.deviceId)?"1px solid #4169e1":"1px solid #e0e0e0",boxSizing:"border-box",boxShadow:(Nn=mt[Oe])!=null&&Nn.has(B.deviceId)?"0 2px 8px rgba(39, 75, 181, 0.08)":"0 1px 4px rgba(65, 105, 225, 0.08)",padding:"3px 10px",cursor:"default",gap:"8px"},children:[f.jsx("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",flex:1},children:B.assignedTo.type==="student"?`Assigned: ${hi(B.assignedTo.name)}`:`Assigned: ${hi(B.assignedTo.name)} (${B.assignedTo.studentCount} students)`}),f.jsx("button",{onClick:He=>{He.stopPropagation(),zi(B.deviceId)},title:"Remove tag",style:{background:"none",border:"none",color:(xt=mt[Oe])!=null&&xt.has(B.deviceId)?"#4169e1":"#888",fontWeight:"bold",fontSize:"14px",cursor:"pointer",padding:0,lineHeight:1,display:"flex",alignItems:"center",opacity:.6,transition:"opacity 0.2s"},className:"remove-tag-x",onMouseEnter:He=>He.target.style.opacity=1,onMouseLeave:He=>He.target.style.opacity=.6,children:""})]}):f.jsx("span",{style:{minWidth:"120px",minHeight:"22px",maxWidth:"200px",display:"inline-flex",alignItems:"center",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",background:"transparent",borderRadius:"12px",fontSize:"12px",border:"1px solid transparent",boxSizing:"border-box",boxShadow:"none",padding:"3px 10px",cursor:"default"}})]}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",marginTop:"0",flexWrap:"wrap",rowGap:"8px",paddingLeft:"0px",marginLeft:"-6px"},children:[Oe!=="none"&&f.jsxs("button",{onClick:He=>{He.stopPropagation(),ma(B.deviceId)},style:{padding:"6px 12px",background:(wa=mt[Oe])!=null&&wa.has(B.deviceId)?"#274bb5":"#4169e1",border:"none",borderRadius:"6px",cursor:"pointer",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",display:"flex",alignItems:"center",gap:"6px",fontSize:"12px",fontWeight:"500",color:"#fff",height:"32px",minWidth:"100px",boxShadow:(mo=mt[Oe])!=null&&mo.has(B.deviceId)?"0 2px 8px rgba(39, 75, 181, 0.3)":"0 1px 4px rgba(65, 105, 225, 0.2)"},title:(fs=mt[Oe])!=null&&fs.has(B.deviceId)?"Mark as incomplete":"Mark as done",children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"14px",height:"14px"},children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),(qs=mt[Oe])!=null&&qs.has(B.deviceId)?"Undo Done":"Mark as Done"]}),D&&f.jsxs("button",{onClick:He=>{He.stopPropagation(),ie(B.deviceId),ze(!0)},style:{padding:"6px 12px",background:"#a259e1",border:"none",borderRadius:"6px",cursor:"pointer",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",display:"flex",alignItems:"center",gap:"8px",fontSize:"12px",fontWeight:"500",color:"#fff",height:"32px",minWidth:"100px",boxShadow:"0 1px 4px rgba(162, 89, 225, 0.2)"},title:"Edit robot tags",children:[f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"14px",height:"14px"},children:[f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.568 3H5.25A2.25 2.25 0 0 0 3 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.732.699 2.431 0l4.318-4.318c.699-.699.699-1.732 0-2.431L9.568 3Z"}),f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 6h.008v.008H6V6Z"})]}),"Assign"]})]})]})]}),f.jsx("div",{style:{minWidth:0,display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"flex-end",marginRight:"200px"},children:(()=>{const He=Ft(B.deviceId);return He?f.jsxs("div",{style:{background:"#f8f9fa",borderRadius:"8px",padding:"12px",border:"1px solid #e0e0e0",width:"250px",marginBottom:"0"},children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[f.jsx("span",{style:{fontSize:"0.75rem",fontWeight:"600",color:"#4169e1"},children:"Latest Program"}),He.button==="PLAY"?f.jsx("img",{src:Dm,alt:"Play",style:{width:20,height:20,verticalAlign:"middle"}}):He.button==="TEST"?f.jsx("img",{src:jm,alt:"Test",style:{width:20,height:20,verticalAlign:"middle"}}):f.jsx("span",{style:{fontSize:"0.65rem",color:"#666",background:"#e3eafe",padding:"1px 4px",borderRadius:"3px",fontWeight:"500"},children:He.button})]}),f.jsx("span",{style:{fontSize:"0.65rem",color:"#888"},children:cc(He.timestamp)})]}),f.jsx("div",{style:{background:"#fff",padding:"6px 8px",borderRadius:"4px",border:"1px solid #e0e0e0",fontFamily:"monospace",fontSize:"0.75rem",color:"#333",wordBreak:"break-word",marginBottom:"8px",maxHeight:"60px",overflow:"hidden",display:"flex",flexWrap:"nowrap",gap:"4px",alignItems:"center"},children:Xn(He.program)}),f.jsx("div",{style:{display:"flex",gap:"6px",justifyContent:"flex-end"},children:f.jsx("button",{onClick:Ut=>{Ut.stopPropagation(),wr(He),us(He.program),qi(!0)},style:{padding:"3px 6px",background:"#4169e1",color:"white",border:"none",borderRadius:"3px",cursor:"pointer",fontSize:"0.65rem",fontWeight:"500",fontFamily:"var(--font-body)",transition:"background 0.2s ease"},onMouseEnter:Ut=>Ut.target.style.background="#274bb5",onMouseLeave:Ut=>Ut.target.style.background="#4169e1",children:"View Program"})})]}):f.jsx("div",{style:{background:"transparent",borderRadius:"8px",padding:"12px",border:"1px solid transparent",width:"250px",minHeight:"110px",marginBottom:"0"}})})()}),f.jsx("div",{style:{position:"absolute",left:0,right:0,bottom:0},children:f.jsx(qN,{voltage:Ee,cardHeight:60})})]},B.deviceId)}):se.trim()?f.jsxs("div",{className:"fade-in-scale animate-on-mount-delay-8",style:{textAlign:"center",padding:"40px",color:"#666",background:"#fff",borderRadius:"12px",border:"2px dashed #e0e0e0"},children:['No robots found matching "',se,'". Try a different search term.']}):f.jsx("div",{className:"fade-in-scale animate-on-mount-delay-8",style:{textAlign:"center",padding:"40px",color:"#666",background:"#fff",borderRadius:"12px",border:"2px dashed #e0e0e0"},children:"No robots detected yet. Connect to micro:bit and send some data."})})()}),va=Ie.trim()?y.filter(E=>E.data.toLowerCase().includes(Ie.toLowerCase())||E.timestamp.toLowerCase().includes(Ie.toLowerCase())):y,Bs=f.jsx("div",{className:"data-container fade-in-scale animate-on-mount-delay-5",style:{marginTop:16},children:va.length>0?va.map((E,V)=>f.jsxs("div",{className:"data-item",children:[f.jsx("span",{className:"timestamp",children:cc(E.timestamp)}),f.jsx("span",{className:"data",children:E.data})]},V)):f.jsxs("div",{className:"data-item",children:["No data received",Ie?" matching your search":""," yet"]})}),uo=P&&f.jsxs("div",{className:"session-info fade-in-scale animate-on-mount-delay-4",children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:20},children:[f.jsxs("h2",{children:["Robot Data: ",P]}),f.jsx("button",{className:"clear-data-btn fade-in-scale animate-on-mount-delay-5",onClick:()=>z(null),children:" Back to Robots"})]}),f.jsx("div",{className:"data-container fade-in-scale animate-on-mount-delay-6",style:{marginTop:16},children:ga(P).length>0?ga(P).map((E,V)=>f.jsxs("div",{className:"data-item",children:[f.jsx("span",{className:"timestamp",children:cc(E.timestamp)}),f.jsx("span",{className:"data",children:E.data})]},V)):f.jsx("div",{className:"data-item",children:"No data received from this robot yet"})})]}),ls=Array.from(fe).every(E=>ce.has(E)),[bn,tn]=I.useState(""),[Si,ho]=I.useState("");I.useEffect(()=>(Ls?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[Ls]);const[Hi,qi]=I.useState(!1),[fn,wr]=I.useState(null),[ct,Wt]=I.useState({x:2,y:2,dir:0,step:0,gridSize:5,offsetX:0,offsetY:0,history:[{x:2,y:2,dir:0}],playing:!1}),Gi=I.useRef(null),cs=E=>E?E.trim().split(/\s+/).map(V=>V.toLowerCase()):[],us=E=>{Wt({x:2,y:2,dir:0,step:0,gridSize:5,offsetX:0,offsetY:0,history:[{x:2,y:2,dir:0}],playing:!1})},xr=(E,V)=>{let{x:F,y:B,dir:re,gridSize:Ee,offsetX:Ce,offsetY:Fe}=E,St=re,Re=F,Se=B;V==="forward"?(re===0&&(Se-=1),re===1&&(Re+=1),re===2&&(Se+=1),re===3&&(Re-=1)):V==="reverse"?(re===0&&(Se+=1),re===1&&(Re-=1),re===2&&(Se-=1),re===3&&(Re+=1)):V==="right"?St=(re+1)%4:V==="left"&&(St=(re+3)%4);let At=Re,It=Re,Kt=Se,nn=Se;for(const xt of E.history)At=Math.min(At,xt.x),It=Math.max(It,xt.x),Kt=Math.min(Kt,xt.y),nn=Math.max(nn,xt.y);let Ht=E.gridSize,Pt=E.offsetX,Nn=E.offsetY;return Re<0&&(Pt+=1,Re+=1,E.history.forEach(xt=>xt.x+=1),At+=1,It+=1),Se<0&&(Nn+=1,Se+=1,E.history.forEach(xt=>xt.y+=1),Kt+=1,nn+=1),Re>=Ht&&(Ht=Re+1),Se>=Ht&&(Ht=Se+1),{...E,x:Re,y:Se,dir:St,gridSize:Math.max(Ht,5),offsetX:Pt,offsetY:Nn,history:[...E.history,{x:Re,y:Se,dir:St}]}},Xi=(E=!0)=>{if(!fn)return;const V=cs(fn.program);Wt(F=>{let B=F.step;if(E&&B<V.length)return{...xr(F,V[B]),step:B+1,playing:F.playing};if(!E&&B>0){let re={x:2,y:2,dir:0,step:0,gridSize:5,offsetX:0,offsetY:0,history:[{x:2,y:2,dir:0}],playing:!1};for(let Ee=0;Ee<B-1;++Ee)re=xr(re,V[Ee]),re.step=Ee+1;return{...re,playing:!1}}return F})},ml=()=>{Wt(E=>({...E,playing:!E.playing}))};I.useEffect(()=>{if(ct.playing&&fn){if(ct.step>=cs(fn.program).length){Wt(E=>({...E,playing:!1}));return}Gi.current=setTimeout(()=>{Xi(!0)},1500)}else Gi.current&&clearTimeout(Gi.current);return()=>{Gi.current&&clearTimeout(Gi.current)}},[ct.playing,ct.step,fn]);const[,Vt]=I.useState(0);I.useEffect(()=>{const E=setInterval(()=>{Vt(V=>V+1)},500);return()=>clearInterval(E)},[]);const[Bn,Ai]=I.useState(!1),[zs,Wn]=I.useState(!1),ht=()=>{const E=at.currentUser;Qi(E).then(V=>{if(V.find(B=>B.status==="active"&&String(B.id)!==String(X==null?void 0:X.id))){Wn(!0),Ai(!0);return}Bi()})},[Fs,wn]=I.useState(!1),[ds,Hs]=I.useState(!1),Er=I.useRef(Date.now()),Zn=I.useRef(null),fo=()=>{Er.current=Date.now(),ds&&Hs(!1)};I.useEffect(()=>{fo()},[x,y,ce,$]),I.useEffect(()=>{if(H!=="active")return;const E=()=>{fo()};return document.addEventListener("click",E),document.addEventListener("keydown",E),document.addEventListener("mousemove",E),document.addEventListener("scroll",E),()=>{document.removeEventListener("click",E),document.removeEventListener("keydown",E),document.removeEventListener("mousemove",E),document.removeEventListener("scroll",E)}},[H]),I.useEffect(()=>{if(H!=="active"){console.log("Session not active, clearing inactivity timer"),Zn.current&&clearTimeout(Zn.current);return}console.log("Starting inactivity timer for active session"),Zn.current&&clearTimeout(Zn.current);const E=()=>{const F=Date.now()-Er.current;console.log("Checking inactivity, elapsed:",F,"ms"),F>=10*60*1e3?(console.log("Inactivity detected, pausing session"),ci(),Hs(!0)):(console.log("Still active, checking again in 1 minute"),Zn.current=setTimeout(E,60*1e3))};return Zn.current=setTimeout(E,60*1e3),()=>{Zn.current&&(console.log("Clearing inactivity timer"),clearTimeout(Zn.current))}},[H,ci]),I.useEffect(()=>{H!=="paused"&&Hs(!1)},[H]);const[pl,Wi]=I.useState(!1),Zt={lesson1:"https://docs.google.com/document/d/15hDBUGjhOFpLSPmmkFJMXMcShzhLqdaBW9WTI3UOFXs/edit?tab=t.0#heading=h.a6lqxihc6dhl",lesson2:"https://docs.google.com/document/d/13E9Lz6l0eP4ZT-kJBxJST35SX4427fOw6XLlfcZpwm0/edit?tab=t.0#heading=h.a6lqxihc6dhl",lesson3:"https://docs.google.com/document/d/1qHoE0t6diltiHJbYG4hKiGGIJOQFLw3rRNMmLgWc-1E/edit?tab=t.0#heading=h.a6lqxihc6dhl",lesson4:"https://docs.google.com/document/d/14jte14tL0Txgm1CdY9kZsbov0lZDoqv7UyhECFW8ioI/edit?tab=t.0#heading=h.a6lqxihc6dhl"},[Kn,Yn]=I.useState(!1),[Qn,_a]=I.useState(null);return f.jsxs("div",{className:"dashboard-container",children:[f.jsx(Qc,{className:"slide-in-from-left"}),f.jsxs("div",{className:"main-content slide-in-from-bottom",children:[f.jsx("div",{className:"top-bar slide-in-from-top",children:f.jsxs("div",{className:"session-header",children:[f.jsx("button",{className:"back-btn fade-in-scale animate-on-mount-delay-1",onClick:async()=>{if(H==="active"&&le){_a(()=>async()=>{n("/sessions",{replace:!0});try{await Pi()}catch(E){console.error("Error in background cleanup:",E)}}),Yn(!0);return}n("/sessions",{replace:!0});try{await Pi()}catch(E){console.error("Error in background cleanup:",E)}},children:"Sessions"}),f.jsx("div",{style:{display:"flex",alignItems:"center",gap:20,flex:1},children:f.jsx("input",{type:"text",value:$,onChange:E=>Z(E.target.value),className:"session-name-input animate-on-mount-delay-2",onFocus:E=>E.target.style.borderBottomColor="#4169e1",onBlur:E=>E.target.style.borderBottomColor="transparent",disabled:H==="ended",placeholder:"Enter session name..."})}),f.jsxs("div",{style:{display:"flex",gap:12},children:[H==="active"&&f.jsxs(f.Fragment,{children:[f.jsxs("button",{className:"session-btn save-btn fade-in-scale animate-on-mount-delay-4",onClick:Ei,disabled:!le,style:{opacity:le?1:.5,cursor:le?"pointer":"not-allowed",transition:"all 0.3s ease",background:le?"#4169e1":"#9ca3af",color:le?"#fff":"#6b7280",border:le?"none":"1px solid #d1d5db",boxShadow:le?"0 2px 8px rgba(65, 105, 225, 0.2)":"none"},children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"18px",height:"18px"},children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 3.75V16.5L12 14.25 7.5 16.5V3.75m9 0H18A2.25 2.25 0 0 1 20.25 6v12A2.25 2.25 0 0 1 18 20.25H6A2.25 2.25 0 0 1 3.75 18V6A2.25 2.25 0 0 1 6 3.75h1.5m9 0h-9"})}),le?"Save":"Saved"]}),f.jsxs("button",{className:"session-btn pause-btn fade-in-scale animate-on-mount-delay-5",onClick:ci,children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"18px",height:"18px"},children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25v13.5m-7.5-13.5v13.5"})}),"Pause"]}),f.jsxs("button",{className:"session-btn end-btn fade-in-scale animate-on-mount-delay-6",onClick:ui,children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"18px",height:"18px"},children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 7.5A2.25 2.25 0 0 1 7.5 5.25h9a2.25 2.25 0 0 1 2.25 2.25v9a2.25 2.25 0 0 1-2.25 2.25h-9a2.25 2.25 0 0 1-2.25-2.25v-9Z"})}),"End"]})]}),H==="paused"&&f.jsxs(f.Fragment,{children:[f.jsxs("button",{className:"session-btn resume-btn fade-in-scale animate-on-mount-delay-4",onClick:ht,children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"18px",height:"18px"},children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347c-.75.412-1.667-.13-1.667-.986V5.653Z"})}),"Resume"]}),f.jsxs("button",{className:"session-btn end-btn fade-in-scale animate-on-mount-delay-5",onClick:ui,children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"18px",height:"18px"},children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 7.5A2.25 2.25 0 0 1 7.5 5.25h9a2.25 2.25 0 0 1 2.25 2.25v9a2.25 2.25 0 0 1-2.25 2.25h-9a2.25 2.25 0 0 1-2.25-2.25v-9Z"})}),"End"]})]}),H==="ended"&&f.jsxs("button",{className:"session-btn delete-btn fade-in-scale animate-on-mount-delay-4",onClick:_r,children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"18px",height:"18px"},children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})}),"Delete Session"]})]})]})}),X?f.jsxs("div",{className:"session-view-content",children:[f.jsxs("div",{className:"session-section fade-in-scale animate-on-mount-delay-1",children:[f.jsxs("div",{className:"section-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer"},onClick:()=>Pn("connection"),children:[f.jsx("h2",{children:"Connection"}),f.jsx("button",{onClick:E=>{E.stopPropagation(),Pn("connection")},style:{background:"none",border:"none",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"background-color 0.2s",display:"flex",alignItems:"center",justifyContent:"center",outline:"none"},onMouseEnter:E=>E.target.style.backgroundColor="#f0f0f0",onMouseLeave:E=>E.target.style.backgroundColor="transparent",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"20px",height:"20px",transform:lt.connection?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s"},children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})})})]}),!lt.connection&&f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16},children:[f.jsxs("button",{className:`connection-btn ${p?"disconnect":"connect"} fade-in-scale animate-on-mount-delay-2`,onClick:p?rt:Ct,disabled:H==="ended"||H==="paused",children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"18px",height:"18px"},children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.288 15.038a5.25 5.25 0 0 1 7.424 0M5.106 11.856c3.807-3.808 9.98-3.808 13.788 0M1.924 8.674c5.565-5.565 14.587-5.565 20.152 0M12.53 18.22l-.53.53-.53-.53a.75.75 0 0 1 1.06 0Z"})}),p?"Disconnect":"Connect"]}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[f.jsx("div",{className:`status-dot ${p?"connected":""} animate-on-mount-delay-3`,style:{width:"12px",height:"12px",borderRadius:"50%",backgroundColor:p?"#4CAF50":"#b0b0b0",transition:"background-color 0.3s ease"}}),f.jsx("span",{style:{color:"#666",fontSize:"14px"},children:p?"Connected to micro:bit":"Not connected"})]})]})]}),f.jsxs("div",{className:"session-section fade-in-scale animate-on-mount-delay-2",children:[f.jsxs("div",{className:"section-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer"},onClick:()=>Pn("lessonProgress"),children:[f.jsx("h2",{children:"Lesson Progress"}),f.jsx("button",{onClick:E=>{E.stopPropagation(),Pn("lessonProgress")},style:{background:"none",border:"none",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"background-color 0.2s",display:"flex",alignItems:"center",justifyContent:"center",outline:"none"},onMouseEnter:E=>E.target.style.backgroundColor="#f0f0f0",onMouseLeave:E=>E.target.style.backgroundColor="transparent",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"20px",height:"20px",transform:lt.lessonProgress?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s"},children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})})})]}),!lt.lessonProgress&&f.jsxs(f.Fragment,{children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:16,gap:16},children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"lesson-select",style:{fontWeight:600,marginRight:12},children:"Select Lesson:"}),f.jsx("select",{id:"lesson-select",value:Oe,onChange:E=>{li(E.target.value),fa(E.target.value)},style:{padding:"6px 12px",borderRadius:6,border:"1px solid #e0e0e0",fontSize:14,fontFamily:"Space Mono, monospace"},children:Gn.map(E=>f.jsx("option",{value:E.id,style:{fontFamily:"Space Mono, monospace"},children:E.name},E.id))})]}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[f.jsx("button",{style:{padding:"8px 18px",borderRadius:8,background:"#4169e1",color:"#fff",fontWeight:600,fontSize:15,border:"none",boxShadow:"0 2px 8px rgba(65, 105, 225, 0.10)",cursor:"pointer",marginBottom:0},onClick:()=>Wi(!0),children:"Lesson History"}),f.jsx("button",{style:{padding:"8px 12px",borderRadius:8,background:Oe==="none"||!Zt[Oe]?"#e0e0e0":"#f7f7f7",color:Oe==="none"||!Zt[Oe]?"#b0b0b0":"#444",fontWeight:600,fontSize:15,border:"1.5px solid #d0d0d0",boxShadow:"0 2px 8px rgba(65, 105, 225, 0.04)",cursor:Oe==="none"||!Zt[Oe]?"not-allowed":"pointer",marginBottom:0,display:"flex",alignItems:"center",gap:6,transition:"background 0.2s, color 0.2s, border 0.2s"},disabled:Oe==="none"||!Zt[Oe],title:Oe==="none"||!Zt[Oe]?"Select a lesson with a link to pop out":"Open lesson link in new window",onMouseEnter:E=>{Oe==="none"||!Zt[Oe]||(E.target.style.background="#ededed",E.target.style.color="#222",E.target.style.borderColor="#b0b0b0")},onMouseLeave:E=>{Oe==="none"||!Zt[Oe]||(E.target.style.background="#f7f7f7",E.target.style.color="#444",E.target.style.borderColor="#d0d0d0")},onClick:()=>{Oe==="none"||!Zt[Oe]||window.open(Zt[Oe],"_blank","toolbar=yes,scrollbars=yes,resizable=yes,top=0,left=0,width="+window.screen.width+",height="+window.screen.height)},children:f.jsxs("span",{style:{display:"flex",alignItems:"center",gap:4,background:Oe==="none"||!Zt[Oe]?"#e0e0e0":"#f7f7f7",borderRadius:6,padding:"0 2px",transition:"background 0.2s, color 0.2s, border 0.2s"},children:["Pop out",f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"20px",height:"20px",marginLeft:4},children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"})})]})})]})]}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"20px",padding:"20px 0"},children:[f.jsx("div",{style:{flex:1,height:"32px",background:"#f8f9fa",borderRadius:"16px",overflow:"hidden",position:"relative",border:"2px solid #e0e0e0"},children:f.jsx("div",{style:{height:"100%",background:"linear-gradient(90deg, #4169e1 0%, #274bb5 100%)",borderRadius:"14px",width:`${Object.keys(x).length>0?(((fi=mt[Oe])==null?void 0:fi.size)||0)/Object.keys(x).length*100:0}%`,transition:"width 0.5s cubic-bezier(0.4, 0, 0.2, 1)",position:"absolute",left:0,top:0,boxShadow:"0 2px 8px rgba(65, 105, 225, 0.2)"}})}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",fontSize:"16px",fontWeight:"600"},children:[f.jsx("span",{style:{color:"#4169e1"},children:((ba=mt[Oe])==null?void 0:ba.size)||0}),f.jsx("span",{style:{color:"#666"},children:"/"}),f.jsx("span",{style:{color:"#222"},children:Object.keys(x).length}),f.jsxs("span",{style:{color:"#666",fontSize:"14px"},children:["(",Object.keys(x).length>0?Math.round((((hs=mt[Oe])==null?void 0:hs.size)||0)/Object.keys(x).length*100):0,"%)"]})]})]}),f.jsxs("div",{style:{display:"flex",gap:"16px",alignItems:"center",marginTop:"8px",marginLeft:"2px",fontSize:"14px",color:"#666"},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[f.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"50%",background:"#4169e1"}}),f.jsx("span",{children:"Completed"})]}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[f.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"50%",background:"#e0e0e0"}}),f.jsx("span",{children:"In Progress"})]})]})]})]}),f.jsxs("div",{className:"session-section fade-in-scale animate-on-mount-delay-3",style:{minWidth:0,height:lt.robotsAndPrograms?"auto":"600px",overflow:"hidden"},children:[f.jsxs("div",{className:"section-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer"},onClick:()=>Pn("robotsAndPrograms"),children:[f.jsx("h2",{children:"Robots"}),f.jsx("button",{onClick:E=>{E.stopPropagation(),Pn("robotsAndPrograms")},style:{background:"none",border:"none",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"background-color 0.2s",display:"flex",alignItems:"center",justifyContent:"center",outline:"none"},onMouseEnter:E=>E.target.style.backgroundColor="#f0f0f0",onMouseLeave:E=>E.target.style.backgroundColor="transparent",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"20px",height:"20px",transform:lt.robotsAndPrograms?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s"},children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})})})]}),!lt.robotsAndPrograms&&f.jsx(f.Fragment,{children:f.jsx("div",{style:{minWidth:0,height:"calc(100% - 60px)",overflow:"hidden"},children:f.jsxs("div",{style:{minWidth:0,height:"100%",overflow:"hidden",display:"flex",flexDirection:"column"},children:[f.jsx("div",{style:{marginBottom:"20px",flexShrink:0},children:f.jsxs("h3",{style:{fontSize:"1.1rem",fontWeight:"600",color:"#222",marginBottom:"0px"},children:["Robots (",(()=>{const E=di(),V=Object.keys(x).length,F=Object.keys(E).length;return se.trim()?`${F} of ${V}`:V})(),")"]})}),f.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px",marginBottom:"20px",padding:"12px 0",flexShrink:0},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",flexWrap:"wrap"},children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"16px",height:"16px",color:"#666"},children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})}),f.jsx("input",{type:"text",placeholder:"Search robots by ID or tags...",value:se,onChange:E=>ge(E.target.value),style:{padding:"8px 12px",border:"1px solid #e0e0e0",borderRadius:"6px",fontSize:"14px",width:"290px",outline:"none",transition:"border-color 0.2s"},onFocus:E=>E.target.style.borderColor="#4169e1",onBlur:E=>E.target.style.borderColor="#e0e0e0"}),Object.keys(x).length>0&&f.jsx("button",{className:"clear-data-btn fade-in-scale animate-on-mount-delay-7",onClick:ro,style:{padding:"8px 12px",height:"36px",fontSize:"14px",display:"flex",alignItems:"center",justifyContent:"center"},children:"Clear Robots"}),(()=>{const E=di(),V=Object.keys(E);return V.length>0&&f.jsx("button",{className:"clear-data-btn fade-in-scale animate-on-mount-delay-6",onClick:()=>{const F=V.length>0&&V.every(B=>fe.has(B));ne(F?new Set:new Set(V))},style:{padding:"8px 12px",height:"36px",fontSize:"14px",display:"flex",alignItems:"center",justifyContent:"center"},children:V.length>0&&V.every(B=>fe.has(B))?"Deselect All":"Select All"})})()]}),fe.size>0&&f.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:"8px"},children:[f.jsxs("button",{className:"fade-in-scale animate-on-mount-delay-4",style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"14px",padding:"8px 12px",height:"36px",background:"#dc3545",color:"#fff",border:"none",borderRadius:"6px",boxShadow:"0 2px 8px rgba(220, 53, 69, 0.15)",cursor:"pointer",transition:"background 0.2s"},onClick:()=>{if(!window.confirm(`Are you sure you want to delete the selected robot${fe.size>1?"s":""}? This cannot be undone.`))return;const E={...x};fe.forEach(V=>{delete E[V]}),A(E),ne(new Set)},children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"14px",height:"14px"},children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})}),"Delete Selected"]}),f.jsxs("button",{className:"fade-in-scale animate-on-mount-delay-5",style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"14px",padding:"8px 12px",height:"36px",background:"#4169e1",color:"#fff",border:"none",borderRadius:"6px",boxShadow:"0 2px 8px rgba(65, 105, 225, 0.15)",cursor:"pointer",transition:"background 0.2s"},onClick:()=>{we(E=>{const V=new Set(E);return Array.from(fe).every(B=>ce.has(B))?fe.forEach(B=>V.delete(B)):fe.forEach(B=>V.add(B)),V})},children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"14px",height:"14px"},children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),ls?"Undo Done":"Mark as Done"]}),D&&f.jsxs("button",{className:"fade-in-scale animate-on-mount-delay-5",onClick:xi,style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"14px",padding:"8px 12px",height:"36px",background:"#a259e1",color:"#fff",border:"none",borderRadius:"6px",boxShadow:"0 2px 8px rgba(162, 89, 225, 0.15)",cursor:"pointer",transition:"background 0.2s"},children:[f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"14px",height:"14px"},children:[f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.568 3H5.25A2.25 2.25 0 0 0 3 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.732.699 2.431 0l4.318-4.318c.699-.699.699-1.732 0-2.431L9.568 3Z"}),f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 6h.008v.008H6V6Z"})]}),"Assign"]})]})]}),f.jsxs("div",{style:{flex:1,overflow:"auto"},children:[!P&&co,uo]})]})})})]}),f.jsxs("div",{className:"session-section fade-in-scale animate-on-mount-delay-4",children:[f.jsxs("div",{className:"section-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer"},onClick:()=>Pn("dataReceived"),children:[f.jsxs("h2",{children:["Logs (",y.length,")"]}),f.jsx("button",{onClick:E=>{E.stopPropagation(),Pn("dataReceived")},style:{background:"none",border:"none",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"background-color 0.2s",display:"flex",alignItems:"center",justifyContent:"center",outline:"none"},onMouseEnter:E=>E.target.style.backgroundColor="#f0f0f0",onMouseLeave:E=>E.target.style.backgroundColor="transparent",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"20px",height:"20px",transform:lt.dataReceived?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s"},children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})})})]}),!lt.dataReceived&&f.jsxs(f.Fragment,{children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"16px",marginBottom:"12px"},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"16px",height:"16px",color:"#666"},children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})}),f.jsx("input",{type:"text",placeholder:"Search logs...",value:Ie,onChange:E=>ke(E.target.value),style:{padding:"8px 12px",border:"1px solid #e0e0e0",borderRadius:"6px",fontSize:"14px",width:"300px",outline:"none",transition:"border-color 0.2s"},onFocus:E=>E.target.style.borderColor="#4169e1",onBlur:E=>E.target.style.borderColor="#e0e0e0"})]}),y.length>0&&f.jsx("button",{className:"clear-data-btn fade-in-scale animate-on-mount-delay-5",onClick:dn,style:{padding:"8px 12px",height:"36px",fontSize:"14px",display:"flex",alignItems:"center",justifyContent:"center"},children:"Clear Data"})]}),Bs]})]})]}):f.jsx("div",{className:"session-view-content",children:f.jsx("div",{style:{textAlign:"center",padding:"50px",color:"#666"},children:"Loading session..."})})]}),N&&Qe&&D&&f.jsx("div",{className:"modal-overlay",onClick:()=>ze(!1),children:f.jsxs("div",{className:"modal-content",onClick:E=>E.stopPropagation(),style:{maxWidth:"500px"},children:[f.jsxs("div",{className:"modal-header",children:[f.jsxs("h2",{children:["Assign Robot: ",Qe]}),f.jsx("button",{className:"modal-close",onClick:()=>ze(!1),children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"20",height:"20",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),f.jsxs("div",{className:"modal-body",children:[f.jsxs("div",{style:{marginBottom:"20px"},children:[f.jsx("h3",{style:{marginBottom:"10px",color:"#222"},children:"Assign to Student"}),f.jsxs("select",{onChange:E=>{E.target.value&&(lo(Qe,E.target.value),ze(!1))},defaultValue:"",style:{width:"100%",padding:"8px 12px",border:"1px solid #e0e0e0",borderRadius:"6px",fontSize:"14px"},children:[f.jsx("option",{value:"",children:"Select a student..."}),D.students.map(E=>f.jsxs("option",{value:E.id,children:[E.name," (",E.email,")"]},E.id))]})]}),f.jsxs("div",{style:{marginBottom:"20px"},children:[f.jsx("h3",{style:{marginBottom:"10px",color:"#222"},children:"Assign to Group"}),f.jsxs("select",{onChange:E=>{E.target.value&&(Us(Qe,E.target.value),ze(!1))},defaultValue:"",style:{width:"100%",padding:"8px 12px",border:"1px solid #e0e0e0",borderRadius:"6px",fontSize:"14px"},children:[f.jsx("option",{value:"",children:"Select a group..."}),D.groups.map(E=>f.jsxs("option",{value:E.id,children:[E.name," (",E.students.length," students)"]},E.id))]})]}),(($n=x[Qe])==null?void 0:$n.assignedTo)&&f.jsxs("div",{style:{marginTop:"20px",padding:"12px",background:"#fff3cd",borderRadius:"6px",border:"1px solid #ffeaa7"},children:[f.jsx("h4",{style:{margin:"0 0 8px 0",color:"#856404"},children:"Current Assignment"}),f.jsxs("p",{style:{margin:"0",color:"#856404"},children:["Currently assigned to: ",x[Qe].assignedTo.name]}),f.jsx("button",{onClick:()=>{zi(Qe),ze(!1)},style:{marginTop:"8px",background:"#dc3545",color:"white",border:"none",padding:"6px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Unassign Robot"})]})]}),f.jsx("div",{className:"modal-footer",children:f.jsx("button",{className:"btn-secondary",onClick:()=>ze(!1),children:"Cancel"})})]})}),be&&D&&f.jsx("div",{className:"modal-overlay",onClick:()=>j(!1),children:f.jsxs("div",{className:"modal-content",onClick:E=>E.stopPropagation(),style:{maxWidth:"500px"},children:[f.jsxs("div",{className:"modal-header",children:[f.jsxs("h2",{children:["Assign ",fe.size," Robot",fe.size!==1?"s":""]}),f.jsx("button",{className:"modal-close",onClick:()=>j(!1),children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"20",height:"20",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),f.jsx("div",{className:"modal-body",children:D?f.jsxs(f.Fragment,{children:[f.jsxs("div",{style:{marginBottom:"20px"},children:[f.jsx("h3",{style:{marginBottom:"10px",color:"#222"},children:"Assign to Student"}),f.jsxs("select",{onChange:E=>{E.target.value&&Dt(E.target.value)},defaultValue:"",style:{width:"100%",padding:"8px 12px",border:"1px solid #e0e0e0",borderRadius:"6px",fontSize:"14px"},children:[f.jsx("option",{value:"",children:"Select a student..."}),D.students.map(E=>f.jsxs("option",{value:E.id,children:[E.name," (",E.email,")"]},E.id))]})]}),f.jsxs("div",{style:{marginBottom:"20px"},children:[f.jsx("h3",{style:{marginBottom:"10px",color:"#222"},children:"Assign to Group"}),f.jsxs("select",{onChange:E=>{E.target.value&&ya(E.target.value)},defaultValue:"",style:{width:"100%",padding:"8px 12px",border:"1px solid #e0e0e0",borderRadius:"6px",fontSize:"14px"},children:[f.jsx("option",{value:"",children:"Select a group..."}),D.groups.map(E=>f.jsxs("option",{value:E.id,children:[E.name," (",E.students.length," students)"]},E.id))]})]}),f.jsxs("div",{style:{marginTop:"20px",padding:"12px",background:"#fff3cd",borderRadius:"6px",border:"1px solid #ffeaa7"},children:[f.jsx("h4",{style:{margin:"0 0 8px 0",color:"#856404"},children:"Remove Assignments"}),f.jsxs("p",{style:{margin:"0",color:"#856404"},children:["Remove assignments from ",fe.size," selected robot",fe.size!==1?"s":""]}),f.jsx("button",{onClick:br,style:{marginTop:"8px",background:"#dc3545",color:"white",border:"none",padding:"6px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Remove Assignments"})]})]}):f.jsx("div",{style:{color:"#dc3545",fontWeight:500,padding:"24px 0",textAlign:"center"},children:"Please select a classroom to tag robots."})}),f.jsx("div",{className:"modal-footer",children:f.jsx("button",{className:"btn-secondary",onClick:()=>j(!1),children:"Cancel"})})]})}),qn&&un&&f.jsx("div",{className:"modal-overlay",onClick:()=>Vn(!1),children:f.jsxs("div",{className:"modal-content",onClick:E=>E.stopPropagation(),style:{maxWidth:"800px",maxHeight:"80vh",overflow:"hidden",display:"flex",flexDirection:"column"},children:[f.jsxs("div",{className:"modal-header",children:[f.jsxs("h2",{children:["Robot Details: ",un]}),f.jsx("button",{className:"modal-close",onClick:()=>Vn(!1),children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"20",height:"20",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),f.jsx("div",{className:"modal-body",style:{flex:1,overflow:"hidden",display:"flex",flexDirection:"column"},children:f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"24px",height:"100%",overflow:"hidden"},children:[f.jsxs("div",{style:{display:"flex",flexDirection:"column",overflow:"hidden"},children:[f.jsxs("h3",{style:{marginBottom:"16px",fontSize:"1.1rem",fontWeight:"600",color:"#222"},children:["Recent Programs (",yt(un).length,")"]}),f.jsx("input",{type:"text",placeholder:"Search recent programs...",value:bn,onChange:E=>tn(E.target.value),style:{marginBottom:"10px",padding:"8px 12px",border:"1px solid #e0e0e0",borderRadius:"6px",fontSize:"14px"}}),f.jsx("div",{style:{flex:1,overflow:"auto",paddingRight:"8px"},children:(()=>{const E=yt(un),V=bn.trim()?E.filter(F=>F.program.toLowerCase().includes(bn.toLowerCase())||F.button.toLowerCase().includes(bn.toLowerCase())||F.robotName&&F.robotName.toLowerCase().includes(bn.toLowerCase())||F.timestamp.toLowerCase().includes(bn.toLowerCase())):E;return V.length===0?f.jsx("div",{style:{textAlign:"center",padding:"40px 20px",color:"#666",fontStyle:"italic"},children:"No programs found"}):V.slice(0,10).map((F,B)=>f.jsxs("div",{style:{background:"#f8f9fa",borderRadius:"12px",padding:"16px",marginBottom:"12px",border:"1px solid #e0e0e0",transition:"all 0.2s ease"},children:[f.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"8px"},children:f.jsxs("div",{style:{flex:1},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[f.jsx("span",{style:{fontSize:"0.85rem",fontWeight:"600",color:"#4169e1",fontFamily:"monospace"},children:F.deviceId}),F.button==="PLAY"?f.jsx("img",{src:Dm,alt:"Play",style:{width:18,height:18,verticalAlign:"middle"}}):F.button==="TEST"?f.jsx("img",{src:jm,alt:"Test",style:{width:18,height:18,verticalAlign:"middle"}}):f.jsx("span",{style:{fontSize:"0.75rem",color:"#666",background:"#e3eafe",padding:"2px 6px",borderRadius:"4px",fontWeight:"500"},children:F.button})]}),f.jsx("div",{style:{fontSize:"0.8rem",color:"#888",marginBottom:"8px"},children:cc(F.timestamp)})]})}),f.jsx("div",{style:{background:"#fff",padding:"8px 12px",borderRadius:"6px",border:"1px solid #e0e0e0",fontFamily:"monospace",fontSize:"0.85rem",color:"#333",wordBreak:"break-word",marginBottom:"8px"},children:Xn(F.program)}),f.jsx("div",{style:{display:"flex",gap:"8px",justifyContent:"flex-end"},children:f.jsx("button",{onClick:re=>{re.stopPropagation(),wr(F),us(F.program),qi(!0)},style:{padding:"4px 8px",background:"#4169e1",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.75rem",fontWeight:"500",fontFamily:"var(--font-body)",transition:"background 0.2s ease"},onMouseEnter:re=>re.target.style.background="#274bb5",onMouseLeave:re=>re.target.style.background="#4169e1",children:"View Program"})})]},`${F.deviceId}-${F.timestamp}-${B}`))})()})]}),f.jsxs("div",{style:{display:"flex",flexDirection:"column",overflow:"hidden"},children:[f.jsxs("h3",{style:{marginBottom:"16px",fontSize:"1.1rem",fontWeight:"600",color:"#222"},children:["Logs (",kt(un).length,")"]}),f.jsx("input",{type:"text",placeholder:"Search logs...",value:Si,onChange:E=>ho(E.target.value),style:{marginBottom:"10px",padding:"8px 12px",border:"1px solid #e0e0e0",borderRadius:"6px",fontSize:"14px"}}),f.jsx("div",{style:{flex:1,overflow:"auto",paddingRight:"8px"},children:(()=>{const E=kt(un),V=Si.trim()?E.filter(F=>F.data.toLowerCase().includes(Si.toLowerCase())||F.timestamp.toLowerCase().includes(Si.toLowerCase())):E;return V.length===0?f.jsx("div",{style:{textAlign:"center",padding:"40px 20px",color:"#666",fontStyle:"italic"},children:"No logs found"}):V.map((F,B)=>f.jsxs("div",{style:{background:"#f8f9fa",borderRadius:"8px",padding:"12px",marginBottom:"8px",border:"1px solid #e0e0e0",fontSize:"0.85rem"},children:[f.jsx("div",{style:{fontSize:"0.75rem",color:"#888",marginBottom:"4px",fontFamily:"monospace"},children:cc(F.timestamp)}),f.jsx("div",{style:{color:"#333",fontFamily:"monospace",wordBreak:"break-word"},children:F.data})]},B))})()})]})]})}),f.jsx("div",{className:"modal-footer",children:f.jsx("button",{className:"btn-secondary",onClick:()=>Vn(!1),children:"Close"})})]})}),Ls&&f.jsx("div",{className:"serial-popup-overlay fade-in",style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.55)",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"flex-end",paddingRight:"23vw",paddingBottom:"20vh",transition:"background 0.4s cubic-bezier(0.4,0,0.2,1)"},children:f.jsx("img",{src:FN,alt:"Connection Graphic",className:"connection-bounce",style:{width:450,height:450,objectFit:"contain",borderRadius:16,boxShadow:"0 2px 12px rgba(65,105,225,0.10)",maxWidth:"90vw",maxHeight:"90vh",transition:"opacity 0.4s cubic-bezier(0.4,0,0.2,1)"}})}),Hi&&fn&&f.jsx("div",{className:"modal-overlay",onClick:()=>qi(!1),children:f.jsxs("div",{className:"modal-content",onClick:E=>E.stopPropagation(),style:{maxWidth:"600px",maxHeight:"90vh",overflow:"hidden",display:"flex",flexDirection:"column",alignItems:"center"},children:[f.jsxs("div",{className:"modal-header",style:{width:"100%"},children:[f.jsx("h2",{children:"View Program"}),f.jsx("button",{className:"modal-close",onClick:()=>qi(!1),children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"20",height:"20",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),f.jsx("div",{style:{display:"flex",gap:8,margin:"12px 0",flexWrap:"wrap",justifyContent:"center"},children:cs(fn.program).map((E,V)=>f.jsx("span",{style:{fontWeight:V===ct.step?700:400,color:V===ct.step?"#4169e1":"#333",fontFamily:"monospace",fontSize:"1rem",opacity:V===ct.step?1:.6,padding:"2px 6px",borderRadius:"4px",background:V===ct.step?"#e3eafe":"transparent",transition:"all 0.2s"},children:E},V))}),f.jsxs("div",{style:{position:"relative",width:320,height:320,margin:"0 auto",background:"transparent",display:"flex",alignItems:"center",justifyContent:"center"},children:[f.jsx("svg",{width:320,height:320,style:{position:"absolute",top:0,left:0,zIndex:1},children:Array.from({length:ct.gridSize}).map((E,V)=>Array.from({length:ct.gridSize}).map((F,B)=>f.jsx("circle",{cx:32+B*64,cy:32+V*64,r:4,fill:"#bbb",opacity:.5},`dot-${V}-${B}`)))}),f.jsx("img",{src:HN,alt:"Robot",className:"program-animation-robot",style:{left:25+(ct.x-ct.offsetX)*64-24,top:20+(ct.y-ct.offsetY)*64-24,width:60,height:70,zIndex:2,transform:`rotate(${ct.dir*90}deg)`}})]}),f.jsxs("div",{style:{display:"flex",gap:16,marginTop:24,alignItems:"center",justifyContent:"center"},children:[f.jsx("button",{onClick:()=>Xi(!1),disabled:ct.step===0,style:{padding:8,borderRadius:8,border:"1px solid #ccc",background:"#f7f9fb",cursor:ct.step===0?"not-allowed":"pointer"},children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:28,height:28,opacity:ct.step===0?.4:1},children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 16.811c0 .864-.933 1.406-1.683.977l-7.108-4.061a1.125 1.125 0 0 1 0-1.954l7.108-4.061A1.125 1.125 0 0 1 21 8.689v8.122ZM11.25 16.811c0 .864-.933 1.406-1.683.977l-7.108-4.061a1.125 1.125 0 0 1 0-1.954l7.108-4.061a1.125 1.125 0 0 1 1.683.977v8.122Z"})})}),f.jsx("button",{onClick:ml,style:{padding:8,borderRadius:8,border:"1px solid #4169e1",background:ct.playing?"#e3eafe":"#4169e1",color:ct.playing?"#4169e1":"#fff",fontWeight:700,fontSize:18,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:ct.playing?f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:28,height:28},children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25v13.5m-7.5-13.5v13.5"})}):f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:28,height:28},children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347a1.125 1.125 0 0 1-1.667-.986V5.653Z"})})}),f.jsx("button",{onClick:()=>Xi(!0),disabled:ct.step>=cs(fn.program).length,style:{padding:8,borderRadius:8,border:"1px solid #ccc",background:"#f7f9fb",cursor:ct.step>=cs(fn.program).length?"not-allowed":"pointer"},children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:28,height:28,opacity:ct.step>=cs(fn.program).length?.4:1},children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 8.689c0-.864.933-1.406 1.683-.977l7.108 4.061a1.125 1.125 0 0 1 0 1.954l-7.108 4.061A1.125 1.125 0 0 1 3 16.811V8.69ZM12.75 8.689c0-.864.933-1.406 1.683-.977l7.108 4.061a1.125 1.125 0 0 1 0 1.954l-7.108 4.061a1.125 1.125 0 0 1-1.683-.977V8.69Z"})})}),f.jsx("button",{onClick:()=>{us(fn.program)},style:{padding:8,borderRadius:8,border:"1px solid #ccc",background:"#fff",color:"#4169e1",fontWeight:700,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:28,height:28},children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"})})})]})]})}),Bn&&f.jsx("div",{className:"modal-overlay",onClick:()=>{Ai(!1),Wn(!1)},children:f.jsxs("div",{className:"modal-content",onClick:E=>E.stopPropagation(),children:[f.jsx("div",{className:"modal-header",children:f.jsx("h2",{children:"Active Session Detected"})}),f.jsx("div",{className:"modal-body",children:f.jsx("p",{children:"There is already an active running session. If you resume this session, the active session will be paused. Proceed?"})}),f.jsxs("div",{className:"modal-footer",children:[f.jsx("button",{className:"btn-secondary",onClick:()=>{Ai(!1),Wn(!1)},children:"Cancel"}),f.jsx("button",{className:"btn-primary",onClick:()=>{const E=at.currentUser;Qi(E).then(V=>{const F=V.map(B=>B.status==="active"&&String(B.id)!==String(X==null?void 0:X.id)?{...B,status:"paused"}:B);ws(E,F),Ai(!1),Wn(!1),Bi()})},children:"Proceed"})]})]})}),Ui&&f.jsx("div",{className:"modal-overlay",onClick:()=>as(!1),children:f.jsxs("div",{className:"modal-content",onClick:E=>E.stopPropagation(),children:[f.jsx("div",{className:"modal-header",children:f.jsx("h2",{children:"End Session"})}),f.jsx("div",{className:"modal-body",children:f.jsx("p",{children:"Are you sure you want to end this session? This action cannot be undone."})}),f.jsxs("div",{className:"modal-footer",children:[f.jsx("button",{className:"btn-secondary",onClick:()=>as(!1),children:"Cancel"}),f.jsx("button",{className:"btn-primary",style:{background:"#dc3545",borderColor:"#dc3545"},onClick:()=>{as(!1),pa()},children:"End Session"})]})]})}),Fs&&f.jsx("div",{className:"modal-overlay",onClick:()=>wn(!1),children:f.jsxs("div",{className:"modal-content",onClick:E=>E.stopPropagation(),children:[f.jsx("div",{className:"modal-header",children:f.jsx("h2",{children:"Delete Session"})}),f.jsx("div",{className:"modal-body",children:f.jsx("p",{children:"Are you sure you want to delete this session? This action cannot be undone."})}),f.jsxs("div",{className:"modal-footer",children:[f.jsx("button",{className:"btn-secondary",onClick:()=>wn(!1),children:"Cancel"}),f.jsx("button",{className:"btn-primary",style:{background:"#dc3545",borderColor:"#dc3545"},onClick:()=>{if(!X)return;const E=at.currentUser;Qi(E).then(V=>{const F=V.filter(B=>String(B.id)!==String(X.id));ws(E,F),wn(!1),n("/sessions")})},children:"Delete"})]})]})}),ds&&f.jsx("div",{className:"modal-overlay",onClick:()=>Hs(!1),children:f.jsxs("div",{className:"modal-content",onClick:E=>E.stopPropagation(),children:[f.jsx("div",{style:{marginBottom:0,textAlign:"center"},children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:60,height:60,color:"#4169e1",margin:"0 auto"},children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})})}),f.jsx("div",{className:"modal-header",style:{display:"block",textAlign:"center",justifyContent:"center"},children:f.jsx("h2",{children:"Session Paused"})}),f.jsx("div",{className:"modal-body",style:{marginBottom:0,textAlign:"center"},children:f.jsx("p",{children:"Since you've been inactive for a while, your session has been paused."})}),f.jsx("div",{className:"modal-footer",style:{display:"block",marginBottom:0,textAlign:"center"},children:f.jsx("p",{style:{marginTop:0,marginBottom:0,fontSize:14,color:"#808080",textAlign:"center"},children:"Click anywhere to dismiss"})})]})}),pl&&f.jsx("div",{className:"modal-overlay",onClick:()=>Wi(!1),children:f.jsxs("div",{className:"modal-content",onClick:E=>E.stopPropagation(),style:{maxWidth:"700px",maxHeight:"80vh",overflow:"auto"},children:[f.jsxs("div",{className:"modal-header",children:[f.jsx("h2",{children:"Lesson Completion History"}),f.jsx("button",{className:"modal-close",onClick:()=>Wi(!1),children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"20",height:"20",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),f.jsx("div",{className:"modal-body",children:f.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:15},children:[f.jsx("thead",{children:f.jsxs("tr",{style:{background:"#f8f9fa"},children:[f.jsx("th",{style:{textAlign:"left",padding:"8px",borderBottom:"2px solid #e0e0e0"},children:"Lesson"}),f.jsx("th",{style:{textAlign:"left",padding:"8px",borderBottom:"2px solid #e0e0e0"},children:"Completed Robots"})]})}),f.jsx("tbody",{children:Gn.filter(E=>E.id!=="none").map(E=>f.jsxs("tr",{children:[f.jsx("td",{style:{padding:"8px",borderBottom:"1px solid #e0e0e0",fontWeight:600},children:E.name}),f.jsx("td",{style:{padding:"8px",borderBottom:"1px solid #e0e0e0"},children:mt[E.id]&&mt[E.id].size>0?f.jsx("ul",{style:{margin:0,paddingLeft:18},children:Array.from(mt[E.id]).map(V=>{const F=x[V];let B="";return F!=null&&F.assignedTo&&(B=F.assignedTo.type==="student"?F.assignedTo.name:`${F.assignedTo.name} (Group)`),f.jsxs("li",{style:{marginBottom:2},children:[f.jsx("span",{style:{fontFamily:"Space Mono, monospace",fontWeight:600},children:V}),B&&f.jsxs("span",{style:{color:"#4169e1",marginLeft:8,fontWeight:500,fontSize:13},children:["[",B,"]"]})]},V)})}):f.jsx("span",{style:{color:"#888"},children:"No robots completed"})})]},E.id))})]})}),f.jsx("div",{className:"modal-footer",children:f.jsx("button",{className:"btn-secondary",onClick:()=>Wi(!1),children:"Close"})})]})}),Kn&&f.jsx("div",{className:"modal-overlay",onClick:()=>Yn(!1),children:f.jsxs("div",{className:"modal-content",onClick:E=>E.stopPropagation(),style:{maxWidth:"420px"},children:[f.jsx("div",{className:"modal-header",children:f.jsx("h2",{children:"Unsaved Changes"})}),f.jsx("div",{className:"modal-body",children:f.jsx("p",{children:"Wait! You have unsaved data you're leaving behind..."})}),f.jsxs("div",{className:"modal-footer",style:{display:"flex",gap:12,justifyContent:"flex-end"},children:[f.jsx("button",{className:"btn-secondary",onClick:async()=>{Yn(!1),Qn&&await Qn()},children:"Leave"}),f.jsx("button",{className:"btn-primary",style:{background:"#4169e1",borderColor:"#4169e1"},onClick:async()=>{await Ei(),Yn(!1),Qn&&await Qn()},children:"Save"})]})]})})]})}function ZN(){const i=Os(),[e,n]=I.useState(null),[r,o]=I.useState([]),[c,h]=I.useState(!1),[p,g]=I.useState(!1),[y,w]=I.useState(!1),[x,A]=I.useState(null),[P,z]=I.useState(""),[H,Y]=I.useState(""),[$,Z]=I.useState(""),[X,te]=I.useState(""),[le,pe]=I.useState("#4169e1"),[k,R]=I.useState("blue"),[C,M]=I.useState(null),[D,L]=I.useState(null),[N,ze]=I.useState(""),[Qe,ie]=I.useState(!1),[fe,ne]=I.useState(null),be={blue:{name:"Blue",primary:"#4169e1",dark:"#4f7ad6",light:"#6b8cff"},red:{name:"Red",primary:"#dc3545",dark:"#d95c63",light:"#ff6b6b"},green:{name:"Green",primary:"#28a745",dark:"#4bbf6b",light:"#6bff8c"},orange:{name:"Orange",primary:"#fd7e14",dark:"#ff9c4a",light:"#ffb366"},purple:{name:"Purple",primary:"#6f42c1",dark:"#8d6fd1",light:"#b366ff"},teal:{name:"Teal",primary:"#20c997",dark:"#4fd6b0",light:"#6bffd9"},pink:{name:"Pink",primary:"#e83e8c",dark:"#e86fa7",light:"#ff6bb3"},indigo:{name:"Indigo",primary:"#6610f2",dark:"#7c4dff",light:"#9d66ff"}};I.useEffect(()=>{pe(be[k].primary)},[k]),I.useEffect(()=>{x&&ze(x.name)},[x]);const j=de=>{ze(de.target.value)},se=()=>{if(!x||!N.trim()||N===x.name)return;const de=r.map(ve=>ve.id===x.id?{...ve,name:N}:ve);localStorage.setItem("roversaClassrooms",JSON.stringify(de)),o(de),A({...x,name:N})},ge=de=>{de.key==="Enter"&&(de.preventDefault(),se(),de.target.blur())},ce=async de=>{if(!de)return;const ve=si(ri,"users",de.uid,"appdata","classrooms"),De=await Li(ve);De.exists()?o(De.data().classrooms||[]):o([])},we=async()=>{if(!P.trim())return;const de=at.currentUser,ve=si(ri,"users",de.uid,"appdata","classrooms"),De=await Li(ve);let qe=[];De.exists()&&(qe=De.data().classrooms||[]);const $e=[{id:Date.now().toString(),name:P,color:le,createdAt:new Date().toISOString(),createdBy:de.email,students:[],groups:[]},...qe];await fr(ve,{classrooms:$e}),o($e),h(!1),z(""),pe("#4169e1"),R("blue")},Ie=()=>{if(!H.trim()||!X.trim())return;const de={id:Date.now().toString(),name:H,email:X,addedAt:new Date().toISOString()},ve=r.map(De=>De.id===x.id?{...De,students:[...De.students,de]}:De);localStorage.setItem("roversaClassrooms",JSON.stringify(ve)),o(ve),g(!1),Y(""),te(""),A(ve.find(De=>De.id===x.id))},ke=()=>{if(!$.trim())return;const de={id:Date.now().toString(),name:$,students:[],createdAt:new Date().toISOString()},ve=r.map(De=>De.id===x.id?{...De,groups:[...De.groups,de]}:De);localStorage.setItem("roversaClassrooms",JSON.stringify(ve)),o(ve),w(!1),Z(""),A(ve.find(De=>De.id===x.id))},lt=(de,ve)=>{const De=r.map(qe=>{if(qe.id===x.id){const In=qe.groups.map($e=>{if($e.id===de){const wt=qe.students.find(oi=>oi.id===ve);if(wt&&!$e.students.find(oi=>oi.id===ve))return{...$e,students:[...$e.students,wt]}}return $e});return{...qe,groups:In}}return qe});localStorage.setItem("roversaClassrooms",JSON.stringify(De)),o(De),A(De.find(qe=>qe.id===x.id))},dt=(de,ve)=>{const De=r.map(qe=>{if(qe.id===x.id){const In=qe.groups.map($e=>$e.id===de?{...$e,students:$e.students.filter(wt=>wt.id!==ve)}:$e);return{...qe,groups:In}}return qe});localStorage.setItem("roversaClassrooms",JSON.stringify(De)),o(De),A(De.find(qe=>qe.id===x.id))},qn=de=>{ne(de),ie(!0)},Vn=(de,ve)=>{if(confirm("Are you sure you want to remove this student? This action cannot be undone.")){const De=r.map(qe=>{if(qe.id===de){const In=qe.students.filter(wt=>wt.id!==ve),$e=qe.groups.map(wt=>({...wt,students:wt.students.filter(oi=>oi.id!==ve)}));return{...qe,students:In,groups:$e}}return qe});localStorage.setItem("roversaClassrooms",JSON.stringify(De)),o(De),(x==null?void 0:x.id)===de&&A(De.find(qe=>qe.id===de))}},un=(de,ve)=>{if(confirm("Are you sure you want to delete this group? This action cannot be undone.")){const De=r.map(qe=>qe.id===de?{...qe,groups:qe.groups.filter(In=>In.id!==ve)}:qe);localStorage.setItem("roversaClassrooms",JSON.stringify(De)),o(De),(x==null?void 0:x.id)===de&&A(De.find(qe=>qe.id===de))}};return I.useEffect(()=>{const de=at.onAuthStateChanged(ve=>{ve?(n(ve),ce(ve)):i("/login")});return()=>de()},[i]),I.useEffect(()=>{if(D===null)return;const de=()=>L(null);return window.addEventListener("click",de),()=>window.removeEventListener("click",de)},[D]),f.jsxs("div",{className:"dashboard-container",children:[f.jsx(Qc,{className:"slide-in-from-left"}),f.jsxs("div",{className:"main-content slide-in-from-bottom",children:[f.jsxs("div",{className:"top-bar slide-in-from-top",style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:24,marginBottom:32},children:[f.jsx("h1",{style:{margin:0,fontSize:"2rem",fontWeight:700,color:"#222"},children:"Classrooms"}),f.jsxs("button",{className:"create-classroom-btn fade-in-scale animate-on-mount-delay-1",onClick:()=>h(!0),children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",width:"20",height:"20",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),"Create Classroom"]})]}),f.jsx("div",{className:"classrooms-content",children:r.length===0?f.jsxs("div",{className:"empty-state animate-on-mount-delay-2",children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"#b0b0b0",width:"60",height:"60",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"})}),f.jsx("h3",{children:"No Classrooms Yet"}),f.jsx("p",{children:"Create your first classroom to start managing students and groups"}),f.jsx("button",{className:"create-first-btn fade-in-scale animate-on-mount-delay-3",onClick:()=>h(!0),children:"Create Your First Classroom"})]}):f.jsx("div",{className:"classrooms-grid",children:r.map((de,ve)=>{var $e;const De=wt=>{wt.stopPropagation(),L(D===de.id?null:de.id)},qe=wt=>{wt.stopPropagation(),L(null),A(de)},In=wt=>{wt.stopPropagation(),L(null),qn(de.id)};return f.jsxs("div",{className:`classroom-card fade-in-scale animate-on-mount-delay-${2+ve}`,onClick:()=>A(de),style:{cursor:"pointer",position:"relative"},children:[f.jsx("div",{className:"classroom-card-header-bar",style:{background:`${($e=be[Object.keys(be).find(wt=>be[wt].primary===de.color)||"blue"])==null?void 0:$e.primary}`,position:"relative"},children:f.jsx("button",{className:"classroom-card-menu-btn",onClick:De,style:{position:"absolute",top:8,right:8,background:"none",border:"none",cursor:"pointer",zIndex:20,padding:2},onMouseDown:wt=>wt.stopPropagation(),children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"#fff",width:"22",height:"22",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM12.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM18.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z"})})})}),D===de.id&&f.jsxs("div",{className:"classroom-card-menu",style:{position:"absolute",top:38,right:8,background:"#fff",border:"1px solid #e0e0e0",borderRadius:8,boxShadow:"0 4px 16px rgba(0,0,0,0.10)",zIndex:1e4,minWidth:100,padding:"4px 0"},onClick:wt=>wt.stopPropagation(),children:[f.jsxs("button",{className:"menu-item",onClick:qe,style:{width:"100%",padding:"4px 8px",background:"none",border:"none",textAlign:"left",cursor:"pointer",fontSize:"13px",fontWeight:400,color:"#222",display:"flex",alignItems:"center",gap:6},children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"16",height:"16",style:{minWidth:16},children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"})}),"Edit"]}),f.jsxs("button",{className:"menu-item",onClick:In,style:{width:"100%",padding:"4px 8px",background:"none",border:"none",textAlign:"left",color:"#dc3545",cursor:"pointer",fontSize:"13px",fontWeight:400,display:"flex",alignItems:"center",gap:6},children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"16",height:"16",style:{minWidth:16},children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})}),"Delete"]})]}),f.jsx("span",{className:"classroom-card-avatar",style:{background:de.color||"#4169e1",border:"4px solid #fff"},children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"28",height:"28",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"})})}),f.jsx("div",{className:"classroom-card-content",children:f.jsxs("div",{className:"classroom-info",children:[f.jsx("div",{className:"classroom-title",children:f.jsx("h3",{children:de.name})}),f.jsxs("p",{children:[de.students.length," students  ",de.groups.length," groups"]})]})})]},de.id)})})})]}),c&&f.jsx("div",{className:"modal-overlay fade-in-scale",onClick:()=>h(!1),children:f.jsxs("div",{className:"modal-content create-classroom-modal",onClick:de=>de.stopPropagation(),children:[f.jsxs("div",{className:"modal-header",children:[f.jsx("h2",{children:"Create New Classroom"}),f.jsx("button",{className:"modal-close",onClick:()=>h(!1),children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"20",height:"20",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),f.jsxs("div",{className:"modal-body",children:[f.jsxs("div",{className:"form-group",children:[f.jsxs("label",{children:["Classroom Name ",f.jsx("span",{style:{color:"red"},children:"*"})]}),f.jsx("input",{type:"text",value:P,onChange:de=>z(de.target.value),placeholder:"Enter classroom name",onKeyPress:de=>de.key==="Enter"&&we()})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Theme"}),f.jsx("div",{className:"theme-buttons",children:Object.entries(be).map(([de,ve])=>f.jsx("button",{className:`theme-button ${k===de?"selected":""}`,style:{background:`linear-gradient(to bottom, ${ve.dark} 0%, ${ve.dark} 50%, ${ve.light} 50%, ${ve.light} 100%)`},onClick:()=>R(de),title:ve.name,"aria-label":`Select ${ve.name} theme`},de))})]})]}),f.jsxs("div",{className:"modal-footer",children:[f.jsx("button",{className:"btn-secondary",onClick:()=>h(!1),children:"Cancel"}),f.jsx("button",{className:"btn-primary",style:{background:P.trim()?"#4169e1":"#e0e0e0",borderColor:P.trim()?"#4169e1":"#e0e0e0",color:P.trim()?"#fff":"#b0b0b0",cursor:P.trim()?"pointer":"not-allowed",fontFamily:"Space Mono, monospace"},onClick:we,disabled:!P.trim(),children:"Create"})]})]})}),x&&f.jsx("div",{className:"modal-overlay fade-in-scale",onClick:()=>A(null),children:f.jsxs("div",{className:"modal-content classroom-detail-modal",onClick:de=>de.stopPropagation(),children:[f.jsxs("div",{className:"modal-header",children:[f.jsx("div",{className:"classroom-header-info",children:f.jsx("input",{type:"text",value:N,onChange:j,onBlur:se,onKeyDown:ge,className:"classroom-name-input",style:{fontSize:"1.5rem",fontWeight:700,border:"none",background:"transparent",color:"#222",padding:"8px 0",borderBottom:"2px solid transparent",minWidth:200,outline:"none",transition:"border-color 0.2s"},onFocus:de=>de.target.style.borderBottomColor="#4169e1",onBlurCapture:de=>de.target.style.borderBottomColor="transparent",placeholder:"Enter classroom name...",maxLength:60})}),f.jsx("button",{className:"modal-close",onClick:()=>A(null),children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"20",height:"20",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),f.jsx("div",{className:"modal-body",children:f.jsx("div",{className:"classroom-detail-tabs",children:f.jsxs("div",{className:"tab-content",children:[f.jsxs("div",{className:"section",children:[f.jsxs("div",{className:"section-header",children:[f.jsx("h3",{children:"Students"}),f.jsxs("button",{className:"add-btn",onClick:()=>g(!0),children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",width:"16",height:"16",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),"Add Student"]})]}),f.jsx("div",{className:"students-list",children:x.students.length===0?f.jsx("div",{className:"empty-list",children:f.jsx("p",{children:"No students added yet"})}):x.students.map(de=>f.jsxs("div",{className:"student-item",draggable:!0,onDragStart:ve=>{ve.dataTransfer.setData("studentId",de.id)},children:[f.jsxs("div",{className:"student-info",children:[f.jsx("div",{className:"student-avatar",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"16",height:"16",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"})})}),f.jsxs("div",{className:"student-details",children:[f.jsx("span",{className:"student-name",children:de.name}),f.jsx("span",{className:"student-email",children:de.email})]})]}),f.jsx("button",{className:"remove-btn",onClick:()=>Vn(x.id,de.id),children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"14",height:"14",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]},de.id))})]}),f.jsxs("div",{className:"section",children:[f.jsxs("div",{className:"section-header",children:[f.jsx("h3",{children:"Groups"}),f.jsxs("button",{className:"add-btn",onClick:()=>w(!0),children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",width:"16",height:"16",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),"Add Group"]})]}),f.jsx("div",{className:"groups-list",children:x.groups.length===0?f.jsx("div",{className:"empty-list",children:f.jsx("p",{children:"No groups created yet"})}):x.groups.map(de=>f.jsxs("div",{className:`group-item${C===de.id?" drag-over":""}`,onDragOver:ve=>ve.preventDefault(),onDragEnter:()=>M(de.id),onDragLeave:()=>M(null),onDrop:ve=>{M(null);const De=ve.dataTransfer.getData("studentId");De&&lt(de.id,De)},children:[f.jsxs("div",{className:"group-header",children:[f.jsx("h4",{children:de.name}),f.jsx("button",{className:"remove-btn",onClick:()=>un(x.id,de.id),children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"14",height:"14",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),f.jsx("div",{className:"group-students",children:de.students.length===0?f.jsx("p",{className:"no-students",children:"No students in this group"}):de.students.map(ve=>f.jsxs("div",{className:"group-student",children:[f.jsx("span",{children:ve.name}),f.jsx("button",{className:"remove-student-btn",onClick:()=>dt(de.id,ve.id),children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"12",height:"12",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]},ve.id))}),x.students.length>0&&f.jsx("div",{className:"add-to-group",children:f.jsxs("select",{onChange:ve=>{ve.target.value&&(lt(de.id,ve.target.value),ve.target.value="")},defaultValue:"",children:[f.jsx("option",{value:"",children:"Add student to group..."}),x.students.filter(ve=>!de.students.find(De=>De.id===ve.id)).map(ve=>f.jsx("option",{value:ve.id,children:ve.name},ve.id))]})})]},de.id))})]})]})})})]})}),p&&f.jsx("div",{className:"modal-overlay fade-in-scale",onClick:()=>g(!1),children:f.jsxs("div",{className:"modal-content",onClick:de=>de.stopPropagation(),children:[f.jsxs("div",{className:"modal-header",children:[f.jsx("h2",{children:"Add Student"}),f.jsx("button",{className:"modal-close",onClick:()=>g(!1),children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"20",height:"20",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),f.jsxs("div",{className:"modal-body",children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Student Name"}),f.jsx("input",{type:"text",value:H,onChange:de=>Y(de.target.value),placeholder:"Enter student name"})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Email"}),f.jsx("input",{type:"email",value:X,onChange:de=>te(de.target.value),placeholder:"Enter student email"})]})]}),f.jsxs("div",{className:"modal-footer",children:[f.jsx("button",{className:"btn-secondary",onClick:()=>g(!1),children:"Cancel"}),f.jsx("button",{className:"btn-primary",onClick:Ie,children:"Add Student"})]})]})}),y&&f.jsx("div",{className:"modal-overlay fade-in-scale",onClick:()=>w(!1),children:f.jsxs("div",{className:"modal-content",onClick:de=>de.stopPropagation(),children:[f.jsxs("div",{className:"modal-header",children:[f.jsx("h2",{children:"Add Group"}),f.jsx("button",{className:"modal-close",onClick:()=>w(!1),children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"20",height:"20",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),f.jsx("div",{className:"modal-body",children:f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Group Name"}),f.jsx("input",{type:"text",value:$,onChange:de=>Z(de.target.value),placeholder:"Enter group name",onKeyPress:de=>de.key==="Enter"&&ke()})]})}),f.jsxs("div",{className:"modal-footer",children:[f.jsx("button",{className:"btn-secondary",onClick:()=>w(!1),children:"Cancel"}),f.jsx("button",{className:"btn-primary",onClick:ke,children:"Add Group"})]})]})}),Qe&&f.jsx("div",{className:"modal-overlay",onClick:()=>ie(!1),children:f.jsxs("div",{className:"modal-content",onClick:de=>de.stopPropagation(),children:[f.jsx("div",{className:"modal-header",children:f.jsx("h2",{children:"Delete Classroom"})}),f.jsx("div",{className:"modal-body",children:f.jsx("p",{children:"Are you sure you want to delete this classroom? This action cannot be undone."})}),f.jsxs("div",{className:"modal-footer",children:[f.jsx("button",{className:"btn-secondary",onClick:()=>ie(!1),children:"Cancel"}),f.jsx("button",{className:"btn-primary",style:{background:"#dc3545",borderColor:"#dc3545"},onClick:()=>{if(!fe)return;const de=r.filter(ve=>ve.id!==fe);localStorage.setItem("roversaClassrooms",JSON.stringify(de)),o(de),(x==null?void 0:x.id)===fe&&A(null),ie(!1),ne(null)},children:"Delete"})]})]})})]})}const KN=`
.session-view-content .lesson-details-title {
  font-family: 'Sniglet', serif !important;
  font-weight: 500 !important;
}
`,Xr=[{id:"lesson1",title:"I Feel",overview:"Code Roversa to move on a grid toward an emotion based on a scenario.",age:"Pre-K - 2nd",link:"https://docs.google.com/document/d/15hDBUGjhOFpLSPmmkFJMXMcShzhLqdaBW9WTI3UOFXs/edit?tab=t.0#heading=h.a6lqxihc6dhl"},{id:"lesson2",title:"Hungry, Hungry Robot",overview:"Code Roversa to move on a grid to bring a story to life.",age:"Pre-K - 2nd",link:"https://docs.google.com/document/d/13E9Lz6l0eP4ZT-kJBxJST35SX4427fOw6XLlfcZpwm0/edit?tab=t.0#heading=h.a6lqxihc6dhl"},{id:"lesson3",title:"Grid Challenges",overview:"Code Roversa to move on a grid toward certain objectives.",age:"3rd - 5th",link:"https://docs.google.com/document/d/1qHoE0t6diltiHJbYG4hKiGGIJOQFLw3rRNMmLgWc-1E/edit?tab=t.0#heading=h.a6lqxihc6dhl"},{id:"lesson4",title:"Duck Duck Robot",overview:"Match numerals to number of obejcts and solve number facts by coding Roversa to the correct answer.",age:"Pre-K - 2nd",link:"https://docs.google.com/document/d/14jte14tL0Txgm1CdY9kZsbov0lZDoqv7UyhECFW8ioI/edit?tab=t.0#heading=h.a6lqxihc6dhl"}],y_=Xr.map(i=>i.id);function Ua(i){if(!i)return!1;try{return new URL(i),!0}catch{return!1}}function YN(){const[i,e]=I.useState(Xr[0].id),[n,r]=I.useState(""),[o,c]=I.useState([]),[h,p]=I.useState(!1),[g,y]=I.useState({title:"",overview:"",age:"",link:""}),[w,x]=I.useState(!1),[A,P]=I.useState(null),z=o.filter(te=>te.title.toLowerCase().includes(n.toLowerCase())||te.overview.toLowerCase().includes(n.toLowerCase())),H=z.find(te=>te.id===i)||z[0],Y=Os();gc.useEffect(()=>{!H&&z.length>0&&e(z[0].id)},[n]);const $=async te=>{if(!te)return;const le=si(ri,"users",te.uid,"appdata","lessons"),pe=await Li(le);if(pe.exists()){const k=pe.data().lessons||[];k.length===0?(await fr(le,{lessons:[...Xr]}),c([...Xr])):c(k)}else await fr(le,{lessons:[...Xr]}),c([...Xr])};gc.useEffect(()=>{const te=at.onAuthStateChanged(le=>{le?$(le):Y("/login")});return()=>te()},[Y]),gc.useEffect(()=>{},[o]);const Z=async()=>{if(!g.title.trim())return;const te=at.currentUser,le=si(ri,"users",te.uid,"appdata","lessons"),pe=await Li(le);let k=[];pe.exists()?(k=pe.data().lessons||[],k.length===0&&(k=[...Xr])):k=[...Xr];const R="lesson"+Date.now(),C=[...k,{id:R,title:g.title,overview:g.overview,age:g.age,link:g.link}];await fr(le,{lessons:C}),c(C),e(R),p(!1),y({title:"",overview:"",age:"",link:""})},X=te=>{c(le=>{var k;const pe=le.filter(R=>R.id!==te);if(i===te){const R=((k=pe[0])==null?void 0:k.id)||"";e(R)}return pe}),x(!1),P(null)};return f.jsxs(f.Fragment,{children:[f.jsx("style",{children:KN}),f.jsxs("div",{className:"dashboard-container",children:[f.jsx(Qc,{className:"slide-in-from-left"}),f.jsxs("div",{className:"main-content slide-in-from-bottom",children:[f.jsxs("div",{className:"top-bar slide-in-from-top",style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[f.jsx("h1",{className:"dashboard-welcome",style:{fontFamily:"Bevan, serif",fontWeight:400},children:"Lessons"}),f.jsxs("button",{className:"create-classroom-btn",onClick:()=>p(!0),children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",width:"20",height:"20",style:{minWidth:20},children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),"Create Lesson"]})]}),f.jsxs("div",{className:"session-view-content",style:{background:"white",borderRadius:18,boxShadow:"0 4px 24px rgba(65, 105, 225, 0.08)",padding:32,display:"flex",gap:32},children:[f.jsxs("div",{style:{minWidth:280,maxWidth:320,borderRight:"2px solid #e0e0e0",paddingRight:24},children:[f.jsxs("div",{style:{position:"relative",marginBottom:18},children:[f.jsx("span",{style:{position:"absolute",left:14,top:"50%",transform:"translateY(-50%)",pointerEvents:"none",zIndex:2,background:"transparent"},children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"#666",style:{width:20,height:20,background:"transparent",display:"block"},children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})})}),f.jsx("input",{type:"text",placeholder:"Search lessons...",value:n,onChange:te=>r(te.target.value),style:{width:"100%",padding:"10px 14px 10px 40px",borderRadius:8,border:"1.5px solid #e0e0e0",fontSize:16,outline:"none",transition:"border 0.2s"},onFocus:te=>te.target.style.borderColor="#4169e1",onBlur:te=>te.target.style.borderColor="#e0e0e0"})]}),z.length===0&&f.jsx("div",{style:{color:"#888",fontStyle:"italic",marginTop:24},children:"No lessons found."}),z.map(te=>f.jsx(QN,{lesson:te,isActive:i===te.id,onClick:()=>e(te.id),onDelete:()=>{P(te),x(!0)},canDelete:!y_.includes(te.id)},te.id))]}),f.jsx("div",{className:"slide-in-from-bottom",style:{flex:1,padding:24,background:"#f7f9fb",borderRadius:12,minHeight:220,position:"relative"},children:H?f.jsxs(f.Fragment,{children:[!y_.includes(H.id)&&f.jsxs("button",{onClick:()=>{P(H),x(!0)},title:"Delete lesson",style:{position:"absolute",right:30,top:27,display:"inline-flex",alignItems:"center",gap:6,padding:"6px 12px",background:"transparent",color:"#dc3545",border:"1px solid #dc3545",borderRadius:6,cursor:"pointer",fontSize:13,fontWeight:600,transition:"background 0.2s, border-color 0.2s, color 0.2s",zIndex:2},onMouseEnter:te=>{te.target.style.background="#dc3545",te.target.style.color="#fff"},onMouseLeave:te=>{te.target.style.background="transparent",te.target.style.color="#dc3545"},children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:16,height:16},children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})}),"Delete lesson"]}),f.jsx("h2",{className:"lesson-details-title",style:{color:"#4169e1",fontWeight:700,marginBottom:12},children:H.title}),f.jsxs("div",{style:{marginBottom:18,fontSize:16,color:"#444"},children:[f.jsx("strong",{children:"Overview:"})," ",H.overview]}),f.jsxs("div",{style:{marginBottom:18,fontSize:16,color:"#444"},children:[f.jsx("strong",{children:"Grade Levels:"})," ",H.age]}),f.jsx("a",{href:Ua(H.link)?H.link:void 0,target:"_blank",rel:"noopener noreferrer",style:{display:"inline-block",padding:"10px 28px",background:Ua(H.link)?"#4169e1":"#e0e0e0",color:Ua(H.link)?"#fff":"#b0b0b0",borderRadius:8,fontWeight:600,fontSize:16,textDecoration:"none",boxShadow:"0 2px 8px rgba(65, 105, 225, 0.10)",marginTop:8,transition:"background 0.2s",cursor:Ua(H.link)?"pointer":"not-allowed",pointerEvents:Ua(H.link)?"auto":"none"},tabIndex:Ua(H.link)?0:-1,"aria-disabled":!Ua(H.link),children:f.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:10},children:["View Lesson",f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:22,height:22,marginLeft:0,display:"inline-block"},children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"})})]})})]}):f.jsx("div",{style:{color:"#888",fontStyle:"italic",marginTop:24},children:"No lesson selected."})},i)]})]}),h&&f.jsx("div",{className:"modal-overlay",onClick:()=>p(!1),children:f.jsxs("div",{className:"modal-content",onClick:te=>te.stopPropagation(),style:{maxWidth:480,paddingTop:18},children:[f.jsxs("div",{className:"modal-header",style:{marginBottom:8},children:[f.jsx("h2",{children:"Create Lesson"}),f.jsx("button",{className:"modal-close",onClick:()=>p(!1),children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"20",height:"20",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),f.jsxs("div",{className:"modal-body",children:[f.jsxs("div",{style:{marginBottom:18},children:[f.jsxs("label",{style:{fontWeight:600,color:"#4169e1",marginBottom:6,display:"block",fontFamily:"Space Mono, monospace"},children:["Lesson Name ",f.jsx("span",{style:{color:"red"},children:"*"})]}),f.jsx("input",{type:"text",value:g.title,onChange:te=>y({...g,title:te.target.value}),placeholder:"Enter lesson name",style:{width:"100%",padding:"10px 12px",borderRadius:8,border:"1.5px solid #e0e0e0",fontSize:16,marginBottom:8,fontFamily:"Space Mono, monospace"},required:!0})]}),f.jsxs("div",{style:{marginBottom:18},children:[f.jsx("label",{style:{fontWeight:600,color:"#4169e1",marginBottom:6,display:"block",fontFamily:"Space Mono, monospace"},children:"Overview"}),f.jsx("textarea",{value:g.overview,onChange:te=>y({...g,overview:te.target.value}),placeholder:"Enter lesson overview",style:{width:"100%",padding:"10px 12px",borderRadius:8,border:"1.5px solid #e0e0e0",fontSize:16,minHeight:60,resize:"vertical",fontFamily:"Space Mono, monospace"}})]}),f.jsxs("div",{style:{marginBottom:18},children:[f.jsx("label",{style:{fontWeight:600,color:"#4169e1",marginBottom:6,display:"block",fontFamily:"Space Mono, monospace"},children:"Grade Levels"}),f.jsx("input",{type:"text",value:g.age,onChange:te=>y({...g,age:te.target.value}),placeholder:"Enter grade levels",style:{width:"100%",padding:"10px 12px",borderRadius:8,border:"1.5px solid #e0e0e0",fontSize:16,fontFamily:"Space Mono, monospace"}})]}),f.jsxs("div",{style:{marginBottom:18},children:[f.jsx("label",{style:{fontWeight:600,color:"#4169e1",marginBottom:6,display:"block",fontFamily:"Space Mono, monospace"},children:"Lesson Link"}),f.jsx("input",{type:"text",value:g.link,onChange:te=>y({...g,link:te.target.value}),placeholder:"Enter lesson link",style:{width:"100%",padding:"10px 12px",borderRadius:8,border:"1.5px solid #e0e0e0",fontSize:16,fontFamily:"Space Mono, monospace"}})]})]}),f.jsxs("div",{className:"modal-footer",style:{display:"flex",gap:12,justifyContent:"flex-end"},children:[f.jsx("button",{className:"btn-secondary",onClick:()=>p(!1),children:"Cancel"}),f.jsx("button",{className:"btn-primary",style:{background:g.title.trim()?"#4169e1":"#e0e0e0",borderColor:g.title.trim()?"#4169e1":"#e0e0e0",color:g.title.trim()?"#fff":"#b0b0b0",cursor:g.title.trim()?"pointer":"not-allowed",fontFamily:"Space Mono, monospace"},onClick:Z,disabled:!g.title.trim(),children:"Create"})]})]})}),w&&A&&f.jsx("div",{className:"modal-overlay",onClick:()=>x(!1),children:f.jsxs("div",{className:"modal-content",onClick:te=>te.stopPropagation(),style:{maxWidth:420},children:[f.jsx("div",{className:"modal-header",children:f.jsx("h2",{children:"Delete Lesson"})}),f.jsx("div",{className:"modal-body",children:f.jsxs("p",{children:["Are you sure you want to delete the lesson ",f.jsx("b",{children:A.title}),"? This action cannot be undone."]})}),f.jsxs("div",{className:"modal-footer",style:{display:"flex",gap:12,justifyContent:"flex-end"},children:[f.jsx("button",{className:"btn-secondary",onClick:()=>x(!1),children:"Cancel"}),f.jsx("button",{className:"btn-primary",style:{background:"#dc3545",borderColor:"#dc3545"},onClick:()=>X(A.id),children:"Delete"})]})]})})]})]})}function QN({lesson:i,isActive:e,onClick:n,onDelete:r,canDelete:o}){const[c,h]=gc.useState(!1),p=i.title.length>14?i.title.slice(0,14)+"":i.title;return f.jsxs("div",{style:{position:"relative",display:"flex",alignItems:"center"},onMouseEnter:()=>h(!0),onMouseLeave:()=>h(!1),children:[f.jsx("button",{onClick:n,className:e?"active":"",style:{width:"100%",textAlign:"left",padding:"16px 18px",marginBottom:8,border:"none",borderRadius:10,background:e?"#f0f4ff":"none",color:e?"#4169e1":"#222",fontWeight:700,fontSize:17,cursor:"pointer",transition:"background 0.2s, color 0.2s",outline:"none",boxShadow:e?"0 2px 8px rgba(65, 105, 225, 0.08)":"none",borderLeft:e?"4px solid #4169e1":"4px solid transparent",display:"block",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:p}),o&&c&&f.jsx("button",{onClick:r,title:"Delete lesson",style:{position:"absolute",right:30,top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",padding:0,margin:0,zIndex:2,color:"#4169e1",opacity:1,transition:"color 0.2s"},children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:16,height:16},children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})})})]})}function $N(){const i=is(),e=I.useRef(i);return I.useEffect(()=>{const n=e.current.pathname.match(/^\/sessions\/[^/]+$/),r=i.pathname.match(/^\/sessions\/[^/]+$/);n&&!r&&N2(),e.current=i},[i]),f.jsxs(nS,{children:[f.jsx(or,{path:"/",element:f.jsx(wN,{})}),f.jsx(or,{path:"/login",element:f.jsx(xN,{})}),f.jsx(or,{path:"/signup",element:f.jsx(EN,{})}),f.jsx(or,{path:"/dashboard",element:f.jsx(jN,{})}),f.jsx(or,{path:"/sessions",element:f.jsx(ON,{})}),f.jsx(or,{path:"/sessions/:sessionId",element:f.jsx(WN,{})}),f.jsx(or,{path:"/classrooms",element:f.jsx(ZN,{})}),f.jsx(or,{path:"/lessons",element:f.jsx(YN,{})})]})}function JN(){return f.jsx(TS,{children:f.jsx("div",{className:"App",children:f.jsx($N,{})})})}uE.createRoot(document.getElementById("root")).render(f.jsx(gc.StrictMode,{children:f.jsx(JN,{})}));
