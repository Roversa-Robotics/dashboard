(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&r(f)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();function xb(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var dm={exports:{}},gc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _v;function iS(){if(_v)return gc;_v=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,o,c){var f=null;if(c!==void 0&&(f=""+c),o.key!==void 0&&(f=""+o.key),"key"in o){c={};for(var p in o)p!=="key"&&(c[p]=o[p])}else c=o;return o=c.ref,{$$typeof:i,type:r,key:f,ref:o!==void 0?o:null,props:c}}return gc.Fragment=e,gc.jsx=n,gc.jsxs=n,gc}var xv;function sS(){return xv||(xv=1,dm.exports=iS()),dm.exports}var d=sS(),hm={exports:{}},Ke={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wv;function rS(){if(wv)return Ke;wv=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),f=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),S=Symbol.iterator;function A(D){return D===null||typeof D!="object"?null:(D=S&&D[S]||D["@@iterator"],typeof D=="function"?D:null)}var F={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},G=Object.assign,q={};function K(D,P,oe){this.props=D,this.context=P,this.refs=q,this.updater=oe||F}K.prototype.isReactComponent={},K.prototype.setState=function(D,P){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,P,"setState")},K.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function J(){}J.prototype=K.prototype;function Y(D,P,oe){this.props=D,this.context=P,this.refs=q,this.updater=oe||F}var z=Y.prototype=new J;z.constructor=Y,G(z,K.prototype),z.isPureReactComponent=!0;var me=Array.isArray,fe={H:null,A:null,T:null,S:null,V:null},be=Object.prototype.hasOwnProperty;function M(D,P,oe,ee,_e,Se){return oe=Se.ref,{$$typeof:i,type:D,key:P,ref:oe!==void 0?oe:null,props:Se}}function R(D,P){return M(D.type,P,void 0,void 0,void 0,D.props)}function I(D){return typeof D=="object"&&D!==null&&D.$$typeof===i}function L(D){var P={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(oe){return P[oe]})}var N=/\/+/g;function B(D,P){return typeof D=="object"&&D!==null&&D.key!=null?L(""+D.key):P.toString(36)}function j(){}function Fe(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(j,j):(D.status="pending",D.then(function(P){D.status==="pending"&&(D.status="fulfilled",D.value=P)},function(P){D.status==="pending"&&(D.status="rejected",D.reason=P)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function $e(D,P,oe,ee,_e){var Se=typeof D;(Se==="undefined"||Se==="boolean")&&(D=null);var Te=!1;if(D===null)Te=!0;else switch(Se){case"bigint":case"string":case"number":Te=!0;break;case"object":switch(D.$$typeof){case i:case e:Te=!0;break;case x:return Te=D._init,$e(Te(D._payload),P,oe,ee,_e)}}if(Te)return _e=_e(D),Te=ee===""?"."+B(D,0):ee,me(_e)?(oe="",Te!=null&&(oe=Te.replace(N,"$&/")+"/"),$e(_e,P,oe,"",function(ti){return ti})):_e!=null&&(I(_e)&&(_e=R(_e,oe+(_e.key==null||D&&D.key===_e.key?"":(""+_e.key).replace(N,"$&/")+"/")+Te)),P.push(_e)),1;Te=0;var lt=ee===""?".":ee+":";if(me(D))for(var vt=0;vt<D.length;vt++)ee=D[vt],Se=lt+B(ee,vt),Te+=$e(ee,P,oe,Se,_e);else if(vt=A(D),typeof vt=="function")for(D=vt.call(D),vt=0;!(ee=D.next()).done;)ee=ee.value,Se=lt+B(ee,vt++),Te+=$e(ee,P,oe,Se,_e);else if(Se==="object"){if(typeof D.then=="function")return $e(Fe(D),P,oe,ee,_e);throw P=String(D),Error("Objects are not valid as a React child (found: "+(P==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":P)+"). If you meant to render a collection of children, use an array instead.")}return Te}function ae(D,P,oe){if(D==null)return D;var ee=[],_e=0;return $e(D,ee,"","",function(Se){return P.call(oe,Se,_e++)}),ee}function he(D){if(D._status===-1){var P=D._result;P=P(),P.then(function(oe){(D._status===0||D._status===-1)&&(D._status=1,D._result=oe)},function(oe){(D._status===0||D._status===-1)&&(D._status=2,D._result=oe)}),D._status===-1&&(D._status=0,D._result=P)}if(D._status===1)return D._result.default;throw D._result}var ie=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var P=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(P))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)};function Ae(){}return Ke.Children={map:ae,forEach:function(D,P,oe){ae(D,function(){P.apply(this,arguments)},oe)},count:function(D){var P=0;return ae(D,function(){P++}),P},toArray:function(D){return ae(D,function(P){return P})||[]},only:function(D){if(!I(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},Ke.Component=K,Ke.Fragment=n,Ke.Profiler=o,Ke.PureComponent=Y,Ke.StrictMode=r,Ke.Suspense=g,Ke.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=fe,Ke.__COMPILER_RUNTIME={__proto__:null,c:function(D){return fe.H.useMemoCache(D)}},Ke.cache=function(D){return function(){return D.apply(null,arguments)}},Ke.cloneElement=function(D,P,oe){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var ee=G({},D.props),_e=D.key,Se=void 0;if(P!=null)for(Te in P.ref!==void 0&&(Se=void 0),P.key!==void 0&&(_e=""+P.key),P)!be.call(P,Te)||Te==="key"||Te==="__self"||Te==="__source"||Te==="ref"&&P.ref===void 0||(ee[Te]=P[Te]);var Te=arguments.length-2;if(Te===1)ee.children=oe;else if(1<Te){for(var lt=Array(Te),vt=0;vt<Te;vt++)lt[vt]=arguments[vt+2];ee.children=lt}return M(D.type,_e,void 0,void 0,Se,ee)},Ke.createContext=function(D){return D={$$typeof:f,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:c,_context:D},D},Ke.createElement=function(D,P,oe){var ee,_e={},Se=null;if(P!=null)for(ee in P.key!==void 0&&(Se=""+P.key),P)be.call(P,ee)&&ee!=="key"&&ee!=="__self"&&ee!=="__source"&&(_e[ee]=P[ee]);var Te=arguments.length-2;if(Te===1)_e.children=oe;else if(1<Te){for(var lt=Array(Te),vt=0;vt<Te;vt++)lt[vt]=arguments[vt+2];_e.children=lt}if(D&&D.defaultProps)for(ee in Te=D.defaultProps,Te)_e[ee]===void 0&&(_e[ee]=Te[ee]);return M(D,Se,void 0,void 0,null,_e)},Ke.createRef=function(){return{current:null}},Ke.forwardRef=function(D){return{$$typeof:p,render:D}},Ke.isValidElement=I,Ke.lazy=function(D){return{$$typeof:x,_payload:{_status:-1,_result:D},_init:he}},Ke.memo=function(D,P){return{$$typeof:y,type:D,compare:P===void 0?null:P}},Ke.startTransition=function(D){var P=fe.T,oe={};fe.T=oe;try{var ee=D(),_e=fe.S;_e!==null&&_e(oe,ee),typeof ee=="object"&&ee!==null&&typeof ee.then=="function"&&ee.then(Ae,ie)}catch(Se){ie(Se)}finally{fe.T=P}},Ke.unstable_useCacheRefresh=function(){return fe.H.useCacheRefresh()},Ke.use=function(D){return fe.H.use(D)},Ke.useActionState=function(D,P,oe){return fe.H.useActionState(D,P,oe)},Ke.useCallback=function(D,P){return fe.H.useCallback(D,P)},Ke.useContext=function(D){return fe.H.useContext(D)},Ke.useDebugValue=function(){},Ke.useDeferredValue=function(D,P){return fe.H.useDeferredValue(D,P)},Ke.useEffect=function(D,P,oe){var ee=fe.H;if(typeof oe=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ee.useEffect(D,P)},Ke.useId=function(){return fe.H.useId()},Ke.useImperativeHandle=function(D,P,oe){return fe.H.useImperativeHandle(D,P,oe)},Ke.useInsertionEffect=function(D,P){return fe.H.useInsertionEffect(D,P)},Ke.useLayoutEffect=function(D,P){return fe.H.useLayoutEffect(D,P)},Ke.useMemo=function(D,P){return fe.H.useMemo(D,P)},Ke.useOptimistic=function(D,P){return fe.H.useOptimistic(D,P)},Ke.useReducer=function(D,P,oe){return fe.H.useReducer(D,P,oe)},Ke.useRef=function(D){return fe.H.useRef(D)},Ke.useState=function(D){return fe.H.useState(D)},Ke.useSyncExternalStore=function(D,P,oe){return fe.H.useSyncExternalStore(D,P,oe)},Ke.useTransition=function(){return fe.H.useTransition()},Ke.version="19.1.0",Ke}var Sv;function cp(){return Sv||(Sv=1,hm.exports=rS()),hm.exports}var C=cp();const Rc=xb(C);var fm={exports:{}},yc={},mm={exports:{}},pm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ev;function aS(){return Ev||(Ev=1,function(i){function e(ae,he){var ie=ae.length;ae.push(he);e:for(;0<ie;){var Ae=ie-1>>>1,D=ae[Ae];if(0<o(D,he))ae[Ae]=he,ae[ie]=D,ie=Ae;else break e}}function n(ae){return ae.length===0?null:ae[0]}function r(ae){if(ae.length===0)return null;var he=ae[0],ie=ae.pop();if(ie!==he){ae[0]=ie;e:for(var Ae=0,D=ae.length,P=D>>>1;Ae<P;){var oe=2*(Ae+1)-1,ee=ae[oe],_e=oe+1,Se=ae[_e];if(0>o(ee,ie))_e<D&&0>o(Se,ee)?(ae[Ae]=Se,ae[_e]=ie,Ae=_e):(ae[Ae]=ee,ae[oe]=ie,Ae=oe);else if(_e<D&&0>o(Se,ie))ae[Ae]=Se,ae[_e]=ie,Ae=_e;else break e}}return he}function o(ae,he){var ie=ae.sortIndex-he.sortIndex;return ie!==0?ie:ae.id-he.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;i.unstable_now=function(){return c.now()}}else{var f=Date,p=f.now();i.unstable_now=function(){return f.now()-p}}var g=[],y=[],x=1,S=null,A=3,F=!1,G=!1,q=!1,K=!1,J=typeof setTimeout=="function"?setTimeout:null,Y=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;function me(ae){for(var he=n(y);he!==null;){if(he.callback===null)r(y);else if(he.startTime<=ae)r(y),he.sortIndex=he.expirationTime,e(g,he);else break;he=n(y)}}function fe(ae){if(q=!1,me(ae),!G)if(n(g)!==null)G=!0,be||(be=!0,B());else{var he=n(y);he!==null&&$e(fe,he.startTime-ae)}}var be=!1,M=-1,R=5,I=-1;function L(){return K?!0:!(i.unstable_now()-I<R)}function N(){if(K=!1,be){var ae=i.unstable_now();I=ae;var he=!0;try{e:{G=!1,q&&(q=!1,Y(M),M=-1),F=!0;var ie=A;try{t:{for(me(ae),S=n(g);S!==null&&!(S.expirationTime>ae&&L());){var Ae=S.callback;if(typeof Ae=="function"){S.callback=null,A=S.priorityLevel;var D=Ae(S.expirationTime<=ae);if(ae=i.unstable_now(),typeof D=="function"){S.callback=D,me(ae),he=!0;break t}S===n(g)&&r(g),me(ae)}else r(g);S=n(g)}if(S!==null)he=!0;else{var P=n(y);P!==null&&$e(fe,P.startTime-ae),he=!1}}break e}finally{S=null,A=ie,F=!1}he=void 0}}finally{he?B():be=!1}}}var B;if(typeof z=="function")B=function(){z(N)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,Fe=j.port2;j.port1.onmessage=N,B=function(){Fe.postMessage(null)}}else B=function(){J(N,0)};function $e(ae,he){M=J(function(){ae(i.unstable_now())},he)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(ae){ae.callback=null},i.unstable_forceFrameRate=function(ae){0>ae||125<ae?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<ae?Math.floor(1e3/ae):5},i.unstable_getCurrentPriorityLevel=function(){return A},i.unstable_next=function(ae){switch(A){case 1:case 2:case 3:var he=3;break;default:he=A}var ie=A;A=he;try{return ae()}finally{A=ie}},i.unstable_requestPaint=function(){K=!0},i.unstable_runWithPriority=function(ae,he){switch(ae){case 1:case 2:case 3:case 4:case 5:break;default:ae=3}var ie=A;A=ae;try{return he()}finally{A=ie}},i.unstable_scheduleCallback=function(ae,he,ie){var Ae=i.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?Ae+ie:Ae):ie=Ae,ae){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=ie+D,ae={id:x++,callback:he,priorityLevel:ae,startTime:ie,expirationTime:D,sortIndex:-1},ie>Ae?(ae.sortIndex=ie,e(y,ae),n(g)===null&&ae===n(y)&&(q?(Y(M),M=-1):q=!0,$e(fe,ie-Ae))):(ae.sortIndex=D,e(g,ae),G||F||(G=!0,be||(be=!0,B()))),ae},i.unstable_shouldYield=L,i.unstable_wrapCallback=function(ae){var he=A;return function(){var ie=A;A=he;try{return ae.apply(this,arguments)}finally{A=ie}}}}(pm)),pm}var Av;function oS(){return Av||(Av=1,mm.exports=aS()),mm.exports}var gm={exports:{}},Hn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tv;function lS(){if(Tv)return Hn;Tv=1;var i=cp();function e(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)y+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(g,y,x){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:S==null?null:""+S,children:g,containerInfo:y,implementation:x}}var f=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Hn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Hn.createPortal=function(g,y){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return c(g,y,null,x)},Hn.flushSync=function(g){var y=f.T,x=r.p;try{if(f.T=null,r.p=2,g)return g()}finally{f.T=y,r.p=x,r.d.f()}},Hn.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,r.d.C(g,y))},Hn.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},Hn.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var x=y.as,S=p(x,y.crossOrigin),A=typeof y.integrity=="string"?y.integrity:void 0,F=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;x==="style"?r.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:S,integrity:A,fetchPriority:F}):x==="script"&&r.d.X(g,{crossOrigin:S,integrity:A,fetchPriority:F,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Hn.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var x=p(y.as,y.crossOrigin);r.d.M(g,{crossOrigin:x,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&r.d.M(g)},Hn.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var x=y.as,S=p(x,y.crossOrigin);r.d.L(g,x,{crossOrigin:S,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Hn.preloadModule=function(g,y){if(typeof g=="string")if(y){var x=p(y.as,y.crossOrigin);r.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:x,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else r.d.m(g)},Hn.requestFormReset=function(g){r.d.r(g)},Hn.unstable_batchedUpdates=function(g,y){return g(y)},Hn.useFormState=function(g,y,x){return f.H.useFormState(g,y,x)},Hn.useFormStatus=function(){return f.H.useHostTransitionStatus()},Hn.version="19.1.0",Hn}var Rv;function wb(){if(Rv)return gm.exports;Rv=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),gm.exports=lS(),gm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cv;function cS(){if(Cv)return yc;Cv=1;var i=oS(),e=cp(),n=wb();function r(t){var s="https://react.dev/errors/"+t;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var s=t,a=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(a=s.return),t=s.return;while(t)}return s.tag===3?a:null}function f(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function p(t){if(c(t)!==t)throw Error(r(188))}function g(t){var s=t.alternate;if(!s){if(s=c(t),s===null)throw Error(r(188));return s!==t?null:t}for(var a=t,l=s;;){var h=a.return;if(h===null)break;var m=h.alternate;if(m===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===m.child){for(m=h.child;m;){if(m===a)return p(h),t;if(m===l)return p(h),s;m=m.sibling}throw Error(r(188))}if(a.return!==l.return)a=h,l=m;else{for(var _=!1,E=h.child;E;){if(E===a){_=!0,a=h,l=m;break}if(E===l){_=!0,l=h,a=m;break}E=E.sibling}if(!_){for(E=m.child;E;){if(E===a){_=!0,a=m,l=h;break}if(E===l){_=!0,l=m,a=h;break}E=E.sibling}if(!_)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?t:s}function y(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t;for(t=t.child;t!==null;){if(s=y(t),s!==null)return s;t=t.sibling}return null}var x=Object.assign,S=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),F=Symbol.for("react.portal"),G=Symbol.for("react.fragment"),q=Symbol.for("react.strict_mode"),K=Symbol.for("react.profiler"),J=Symbol.for("react.provider"),Y=Symbol.for("react.consumer"),z=Symbol.for("react.context"),me=Symbol.for("react.forward_ref"),fe=Symbol.for("react.suspense"),be=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),N=Symbol.iterator;function B(t){return t===null||typeof t!="object"?null:(t=N&&t[N]||t["@@iterator"],typeof t=="function"?t:null)}var j=Symbol.for("react.client.reference");function Fe(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===j?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case G:return"Fragment";case K:return"Profiler";case q:return"StrictMode";case fe:return"Suspense";case be:return"SuspenseList";case I:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case F:return"Portal";case z:return(t.displayName||"Context")+".Provider";case Y:return(t._context.displayName||"Context")+".Consumer";case me:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case M:return s=t.displayName||null,s!==null?s:Fe(t.type)||"Memo";case R:s=t._payload,t=t._init;try{return Fe(t(s))}catch{}}return null}var $e=Array.isArray,ae=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie={pending:!1,data:null,method:null,action:null},Ae=[],D=-1;function P(t){return{current:t}}function oe(t){0>D||(t.current=Ae[D],Ae[D]=null,D--)}function ee(t,s){D++,Ae[D]=t.current,t.current=s}var _e=P(null),Se=P(null),Te=P(null),lt=P(null);function vt(t,s){switch(ee(Te,s),ee(Se,t),ee(_e,null),s.nodeType){case 9:case 11:t=(t=s.documentElement)&&(t=t.namespaceURI)?Zy(t):0;break;default:if(t=s.tagName,s=s.namespaceURI)s=Zy(s),t=Ky(s,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}oe(_e),ee(_e,t)}function ti(){oe(_e),oe(Se),oe(Te)}function Un(t){t.memoizedState!==null&&ee(lt,t);var s=_e.current,a=Ky(s,t.type);s!==a&&(ee(Se,t),ee(_e,a))}function yn(t){Se.current===t&&(oe(_e),oe(Se)),lt.current===t&&(oe(lt),dc._currentValue=ie)}var Ti=Object.prototype.hasOwnProperty,Ri=i.unstable_scheduleCallback,ps=i.unstable_cancelCallback,Lr=i.unstable_shouldYield,ka=i.unstable_requestPaint,ke=i.unstable_now,se=i.unstable_getCurrentPriorityLevel,ve=i.unstable_ImmediatePriority,Re=i.unstable_UserBlockingPriority,we=i.unstable_NormalPriority,St=i.unstable_LowPriority,Ge=i.unstable_IdlePriority,tt=i.log,ot=i.unstable_setDisableYieldValue,kt=null,nt=null;function Tn(t){if(typeof tt=="function"&&ot(t),nt&&typeof nt.setStrictMode=="function")try{nt.setStrictMode(kt,t)}catch{}}var vn=Math.clz32?Math.clz32:Ks,Na=Math.log,Ci=Math.LN2;function Ks(t){return t>>>=0,t===0?32:31-(Na(t)/Ci|0)|0}var Ys=256,gs=4194304;function ni(t){var s=t&42;if(s!==0)return s;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function ys(t,s,a){var l=t.pendingLanes;if(l===0)return 0;var h=0,m=t.suspendedLanes,_=t.pingedLanes;t=t.warmLanes;var E=l&134217727;return E!==0?(l=E&~m,l!==0?h=ni(l):(_&=E,_!==0?h=ni(_):a||(a=E&~t,a!==0&&(h=ni(a))))):(E=l&~m,E!==0?h=ni(E):_!==0?h=ni(_):a||(a=l&~t,a!==0&&(h=ni(a)))),h===0?0:s!==0&&s!==h&&(s&m)===0&&(m=h&-h,a=s&-s,m>=a||m===32&&(a&4194048)!==0)?s:h}function vs(t,s){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&s)===0}function ja(t,s){switch(t){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qs(){var t=Ys;return Ys<<=1,(Ys&4194048)===0&&(Ys=256),t}function Da(){var t=gs;return gs<<=1,(gs&62914560)===0&&(gs=4194304),t}function Wi(t){for(var s=[],a=0;31>a;a++)s.push(t);return s}function Xi(t,s){t.pendingLanes|=s,s!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function $s(t,s,a,l,h,m){var _=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var E=t.entanglements,O=t.expirationTimes,Q=t.hiddenUpdates;for(a=_&~a;0<a;){var le=31-vn(a),ue=1<<le;E[le]=0,O[le]=-1;var te=Q[le];if(te!==null)for(Q[le]=null,le=0;le<te.length;le++){var ne=te[le];ne!==null&&(ne.lane&=-536870913)}a&=~ue}l!==0&&Rn(t,l,0),m!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=m&~(_&~s))}function Rn(t,s,a){t.pendingLanes|=s,t.suspendedLanes&=~s;var l=31-vn(s);t.entangledLanes|=s,t.entanglements[l]=t.entanglements[l]|1073741824|a&4194090}function Js(t,s){var a=t.entangledLanes|=s;for(t=t.entanglements;a;){var l=31-vn(a),h=1<<l;h&s|t[l]&s&&(t[l]|=s),a&=~h}}function Le(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Vr(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function ze(){var t=he.p;return t!==0?t:(t=window.event,t===void 0?32:mv(t.type))}function er(t,s){var a=he.p;try{return he.p=t,s()}finally{he.p=a}}var Dt=Math.random().toString(36).slice(2),Yt="__reactFiber$"+Dt,qt="__reactProps$"+Dt,Bn="__reactContainer$"+Dt,Oa="__reactEvents$"+Dt,Pr="__reactListeners$"+Dt,Zi="__reactHandles$"+Dt,xo="__reactResources$"+Dt,bs="__reactMarker$"+Dt;function _s(t){delete t[Yt],delete t[qt],delete t[Oa],delete t[Pr],delete t[Zi]}function Ki(t){var s=t[Yt];if(s)return s;for(var a=t.parentNode;a;){if(s=a[Bn]||a[Yt]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(t=Jy(t);t!==null;){if(a=t[Yt])return a;t=Jy(t)}return s}t=a,a=t.parentNode}return null}function di(t){if(t=t[Yt]||t[Bn]){var s=t.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return t}return null}function ii(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t.stateNode;throw Error(r(33))}function Cn(t){var s=t[xo];return s||(s=t[xo]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Mt(t){t[bs]=!0}var Ii=new Set,xs={};function hi(t,s){si(t,s),si(t+"Capture",s)}function si(t,s){for(xs[t]=s,t=0;t<s.length;t++)Ii.add(s[t])}var wo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),So={},ws={};function Eo(t){return Ti.call(ws,t)?!0:Ti.call(So,t)?!1:wo.test(t)?ws[t]=!0:(So[t]=!0,!1)}function Ss(t,s,a){if(Eo(s))if(a===null)t.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(s);return;case"boolean":var l=s.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(s);return}}t.setAttribute(s,""+a)}}function fi(t,s,a){if(a===null)t.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttribute(s,""+a)}}function en(t,s,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(s,a,""+l)}}var tr,Ao;function Yi(t){if(tr===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);tr=s&&s[1]||"",Ao=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+tr+t+Ao}var nr=!1;function ir(t,s){if(!t||nr)return"";nr=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(s){var ue=function(){throw Error()};if(Object.defineProperty(ue.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ue,[])}catch(ne){var te=ne}Reflect.construct(t,[],ue)}else{try{ue.call()}catch(ne){te=ne}t.call(ue.prototype)}}else{try{throw Error()}catch(ne){te=ne}(ue=t())&&typeof ue.catch=="function"&&ue.catch(function(){})}}catch(ne){if(ne&&te&&typeof ne.stack=="string")return[ne.stack,te.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=l.DetermineComponentFrameRoot(),_=m[0],E=m[1];if(_&&E){var O=_.split(`
`),Q=E.split(`
`);for(h=l=0;l<O.length&&!O[l].includes("DetermineComponentFrameRoot");)l++;for(;h<Q.length&&!Q[h].includes("DetermineComponentFrameRoot");)h++;if(l===O.length||h===Q.length)for(l=O.length-1,h=Q.length-1;1<=l&&0<=h&&O[l]!==Q[h];)h--;for(;1<=l&&0<=h;l--,h--)if(O[l]!==Q[h]){if(l!==1||h!==1)do if(l--,h--,0>h||O[l]!==Q[h]){var le=`
`+O[l].replace(" at new "," at ");return t.displayName&&le.includes("<anonymous>")&&(le=le.replace("<anonymous>",t.displayName)),le}while(1<=l&&0<=h);break}}}finally{nr=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Yi(a):""}function Ma(t){switch(t.tag){case 26:case 27:case 5:return Yi(t.type);case 16:return Yi("Lazy");case 13:return Yi("Suspense");case 19:return Yi("SuspenseList");case 0:case 15:return ir(t.type,!1);case 11:return ir(t.type.render,!1);case 1:return ir(t.type,!0);case 31:return Yi("Activity");default:return""}}function sr(t){try{var s="";do s+=Ma(t),t=t.return;while(t);return s}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function In(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function La(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Al(t){var s=La(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,s),l=""+t[s];if(!t.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,m=a.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return h.call(this)},set:function(_){l=""+_,m.call(this,_)}}),Object.defineProperty(t,s,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(_){l=""+_},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function mi(t){t._valueTracker||(t._valueTracker=Al(t))}function Va(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var a=s.getValue(),l="";return t&&(l=La(t)?t.checked?"true":"false":t.value),t=l,t!==a?(s.setValue(t),!0):!1}function ki(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Tl=/[\n"\\]/g;function Gt(t){return t.replace(Tl,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function bn(t,s,a,l,h,m,_,E){t.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?t.type=_:t.removeAttribute("type"),s!=null?_==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+In(s)):t.value!==""+In(s)&&(t.value=""+In(s)):_!=="submit"&&_!=="reset"||t.removeAttribute("value"),s!=null?Qi(t,_,In(s)):a!=null?Qi(t,_,In(a)):l!=null&&t.removeAttribute("value"),h==null&&m!=null&&(t.defaultChecked=!!m),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?t.name=""+In(E):t.removeAttribute("name")}function on(t,s,a,l,h,m,_,E){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),s!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||s!=null))return;a=a!=null?""+In(a):"",s=s!=null?""+In(s):a,E||s===t.value||(t.value=s),t.defaultValue=s}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=E?t.checked:!!l,t.defaultChecked=!!l,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(t.name=_)}function Qi(t,s,a){s==="number"&&ki(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Xe(t,s,a,l){if(t=t.options,s){s={};for(var h=0;h<a.length;h++)s["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=s.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+In(a),s=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}s!==null||t[h].disabled||(s=t[h])}s!==null&&(s.selected=!0)}}function ft(t,s,a){if(s!=null&&(s=""+In(s),s!==t.value&&(t.value=s),a==null)){t.defaultValue!==s&&(t.defaultValue=s);return}t.defaultValue=a!=null?""+In(a):""}function pi(t,s,a,l){if(s==null){if(l!=null){if(a!=null)throw Error(r(92));if($e(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),s=a}a=In(s),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l)}function ln(t,s){if(s){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=s;return}}t.textContent=s}var $i=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Pa(t,s,a){var l=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="":l?t.setProperty(s,a):typeof a!="number"||a===0||$i.has(s)?s==="float"?t.cssFloat=a:t[s]=(""+a).trim():t[s]=a+"px"}function rr(t,s,a){if(s!=null&&typeof s!="object")throw Error(r(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||s!=null&&s.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in s)l=s[h],s.hasOwnProperty(h)&&a[h]!==l&&Pa(t,h,l)}else for(var m in s)s.hasOwnProperty(m)&&Pa(t,m,s[m])}function Ua(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Rl=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Cl=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ji(t){return Cl.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var Es=null;function kn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var es=null,ts=null;function As(t){var s=di(t);if(s&&(t=s.stateNode)){var a=t[qt]||null;e:switch(t=s.stateNode,s.type){case"input":if(bn(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Gt(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var l=a[s];if(l!==t&&l.form===t.form){var h=l[qt]||null;if(!h)throw Error(r(90));bn(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(s=0;s<a.length;s++)l=a[s],l.form===t.form&&Va(l)}break e;case"textarea":ft(t,a.value,a.defaultValue);break e;case"select":s=a.value,s!=null&&Xe(t,!!a.multiple,s,!1)}}}var gi=!1;function ar(t,s,a){if(gi)return t(s,a);gi=!0;try{var l=t(s);return l}finally{if(gi=!1,(es!==null||ts!==null)&&(Fu(),es&&(s=es,t=ts,ts=es=null,As(s),t)))for(s=0;s<t.length;s++)As(t[s])}}function Ts(t,s){var a=t.stateNode;if(a===null)return null;var l=a[qt]||null;if(l===null)return null;a=l[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(r(231,s,typeof a));return a}var tn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Kn=!1;if(tn)try{var or={};Object.defineProperty(or,"passive",{get:function(){Kn=!0}}),window.addEventListener("test",or,or),window.removeEventListener("test",or,or)}catch{Kn=!1}var Yn=null,cn=null,ns=null;function Rs(){if(ns)return ns;var t,s=cn,a=s.length,l,h="value"in Yn?Yn.value:Yn.textContent,m=h.length;for(t=0;t<a&&s[t]===h[t];t++);var _=a-t;for(l=1;l<=_&&s[a-l]===h[m-l];l++);return ns=h.slice(t,1<l?1-l:void 0)}function Qn(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function Ni(){return!0}function To(){return!1}function Vt(t){function s(a,l,h,m,_){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=m,this.target=_,this.currentTarget=null;for(var E in t)t.hasOwnProperty(E)&&(a=t[E],this[E]=a?a(m):m[E]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Ni:To,this.isPropagationStopped=To,this}return x(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Ni)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Ni)},persist:function(){},isPersistent:Ni}),s}var gt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Cs=Vt(gt),is=x({},gt,{view:0,detail:0}),Ro=Vt(is),Ur,Br,ji,lr=x({},is,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Je,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ji&&(ji&&t.type==="mousemove"?(Ur=t.screenX-ji.screenX,Br=t.screenY-ji.screenY):Br=Ur=0,ji=t),Ur)},movementY:function(t){return"movementY"in t?t.movementY:Br}}),$n=Vt(lr),Co=x({},lr,{dataTransfer:0}),Il=Vt(Co),Is=x({},is,{relatedTarget:0}),cr=Vt(Is),zr=x({},gt,{animationName:0,elapsedTime:0,pseudoElement:0}),ur=Vt(zr),w=x({},gt,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),k=Vt(w),U=x({},gt,{data:0}),V=Vt(U),$={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ye={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ge={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ie(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=ge[t])?!!s[t]:!1}function Je(){return Ie}var De=x({},is,{key:function(t){if(t.key){var s=$[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=Qn(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ye[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Je,charCode:function(t){return t.type==="keypress"?Qn(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Qn(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Ze=Vt(De),mt=x({},lr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Rt=Vt(mt),Ct=x({},is,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Je}),un=Vt(Ct),zn=x({},gt,{propertyName:0,elapsedTime:0,pseudoElement:0}),Di=Vt(zn),Oi=x({},lr,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ri=Vt(Oi),Pt=x({},gt,{newState:0,oldState:0}),yi=Vt(Pt),He=[9,13,27,32],bt=tn&&"CompositionEvent"in window,u=null;tn&&"documentMode"in document&&(u=document.documentMode);var v=tn&&"TextEvent"in window&&!u,b=tn&&(!bt||u&&8<u&&11>=u),T=" ",X=!1;function re(t,s){switch(t){case"keyup":return He.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xe(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ct=!1;function dn(t,s){switch(t){case"compositionend":return xe(s);case"keypress":return s.which!==32?null:(X=!0,T);case"textInput":return t=s.data,t===T&&X?null:t;default:return null}}function ut(t,s){if(ct)return t==="compositionend"||!bt&&re(t,s)?(t=Rs(),ns=cn=Yn=null,ct=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return b&&s.locale!=="ko"?null:s.data;default:return null}}var _n={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hn(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!_n[t.type]:s==="textarea"}function dr(t,s,a,l){es?ts?ts.push(l):ts=[l]:es=l,s=Zu(s,"onChange"),0<s.length&&(a=new Cs("onChange","change",null,a,l),t.push({event:a,listeners:s}))}var Nn=null,ks=null;function kl(t){Hy(t,0)}function cu(t){var s=ii(t);if(Va(s))return t}function ug(t,s){if(t==="change")return s}var dg=!1;if(tn){var _h;if(tn){var xh="oninput"in document;if(!xh){var hg=document.createElement("div");hg.setAttribute("oninput","return;"),xh=typeof hg.oninput=="function"}_h=xh}else _h=!1;dg=_h&&(!document.documentMode||9<document.documentMode)}function fg(){Nn&&(Nn.detachEvent("onpropertychange",mg),ks=Nn=null)}function mg(t){if(t.propertyName==="value"&&cu(ks)){var s=[];dr(s,ks,t,kn(t)),ar(kl,s)}}function D2(t,s,a){t==="focusin"?(fg(),Nn=s,ks=a,Nn.attachEvent("onpropertychange",mg)):t==="focusout"&&fg()}function O2(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return cu(ks)}function M2(t,s){if(t==="click")return cu(s)}function L2(t,s){if(t==="input"||t==="change")return cu(s)}function V2(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var vi=typeof Object.is=="function"?Object.is:V2;function Nl(t,s){if(vi(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var a=Object.keys(t),l=Object.keys(s);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!Ti.call(s,h)||!vi(t[h],s[h]))return!1}return!0}function pg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function gg(t,s){var a=pg(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=s&&l>=s)return{node:a,offset:s-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=pg(a)}}function yg(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?yg(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function vg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var s=ki(t.document);s instanceof t.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)t=s.contentWindow;else break;s=ki(t.document)}return s}function wh(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}var P2=tn&&"documentMode"in document&&11>=document.documentMode,Io=null,Sh=null,jl=null,Eh=!1;function bg(t,s,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Eh||Io==null||Io!==ki(l)||(l=Io,"selectionStart"in l&&wh(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),jl&&Nl(jl,l)||(jl=l,l=Zu(Sh,"onSelect"),0<l.length&&(s=new Cs("onSelect","select",null,s,a),t.push({event:s,listeners:l}),s.target=Io)))}function Ba(t,s){var a={};return a[t.toLowerCase()]=s.toLowerCase(),a["Webkit"+t]="webkit"+s,a["Moz"+t]="moz"+s,a}var ko={animationend:Ba("Animation","AnimationEnd"),animationiteration:Ba("Animation","AnimationIteration"),animationstart:Ba("Animation","AnimationStart"),transitionrun:Ba("Transition","TransitionRun"),transitionstart:Ba("Transition","TransitionStart"),transitioncancel:Ba("Transition","TransitionCancel"),transitionend:Ba("Transition","TransitionEnd")},Ah={},_g={};tn&&(_g=document.createElement("div").style,"AnimationEvent"in window||(delete ko.animationend.animation,delete ko.animationiteration.animation,delete ko.animationstart.animation),"TransitionEvent"in window||delete ko.transitionend.transition);function za(t){if(Ah[t])return Ah[t];if(!ko[t])return t;var s=ko[t],a;for(a in s)if(s.hasOwnProperty(a)&&a in _g)return Ah[t]=s[a];return t}var xg=za("animationend"),wg=za("animationiteration"),Sg=za("animationstart"),U2=za("transitionrun"),B2=za("transitionstart"),z2=za("transitioncancel"),Eg=za("transitionend"),Ag=new Map,Th="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Th.push("scrollEnd");function ss(t,s){Ag.set(t,s),hi(s,[t])}var Tg=new WeakMap;function Mi(t,s){if(typeof t=="object"&&t!==null){var a=Tg.get(t);return a!==void 0?a:(s={value:t,source:s,stack:sr(s)},Tg.set(t,s),s)}return{value:t,source:s,stack:sr(s)}}var Li=[],No=0,Rh=0;function uu(){for(var t=No,s=Rh=No=0;s<t;){var a=Li[s];Li[s++]=null;var l=Li[s];Li[s++]=null;var h=Li[s];Li[s++]=null;var m=Li[s];if(Li[s++]=null,l!==null&&h!==null){var _=l.pending;_===null?h.next=h:(h.next=_.next,_.next=h),l.pending=h}m!==0&&Rg(a,h,m)}}function du(t,s,a,l){Li[No++]=t,Li[No++]=s,Li[No++]=a,Li[No++]=l,Rh|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Ch(t,s,a,l){return du(t,s,a,l),hu(t)}function jo(t,s){return du(t,null,null,s),hu(t)}function Rg(t,s,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,m=t.return;m!==null;)m.childLanes|=a,l=m.alternate,l!==null&&(l.childLanes|=a),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(h=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,h&&s!==null&&(h=31-vn(a),t=m.hiddenUpdates,l=t[h],l===null?t[h]=[s]:l.push(s),s.lane=a|536870912),m):null}function hu(t){if(50<ic)throw ic=0,Mf=null,Error(r(185));for(var s=t.return;s!==null;)t=s,s=t.return;return t.tag===3?t.stateNode:null}var Do={};function F2(t,s,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bi(t,s,a,l){return new F2(t,s,a,l)}function Ih(t){return t=t.prototype,!(!t||!t.isReactComponent)}function hr(t,s){var a=t.alternate;return a===null?(a=bi(t.tag,s,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=s,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,s=t.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Cg(t,s){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=s,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,s=a.dependencies,t.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),t}function fu(t,s,a,l,h,m){var _=0;if(l=t,typeof t=="function")Ih(t)&&(_=1);else if(typeof t=="string")_=qw(t,a,_e.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case I:return t=bi(31,a,s,h),t.elementType=I,t.lanes=m,t;case G:return Fa(a.children,h,m,s);case q:_=8,h|=24;break;case K:return t=bi(12,a,s,h|2),t.elementType=K,t.lanes=m,t;case fe:return t=bi(13,a,s,h),t.elementType=fe,t.lanes=m,t;case be:return t=bi(19,a,s,h),t.elementType=be,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case J:case z:_=10;break e;case Y:_=9;break e;case me:_=11;break e;case M:_=14;break e;case R:_=16,l=null;break e}_=29,a=Error(r(130,t===null?"null":typeof t,"")),l=null}return s=bi(_,a,s,h),s.elementType=t,s.type=l,s.lanes=m,s}function Fa(t,s,a,l){return t=bi(7,t,l,s),t.lanes=a,t}function kh(t,s,a){return t=bi(6,t,null,s),t.lanes=a,t}function Nh(t,s,a){return s=bi(4,t.children!==null?t.children:[],t.key,s),s.lanes=a,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}var Oo=[],Mo=0,mu=null,pu=0,Vi=[],Pi=0,Ha=null,fr=1,mr="";function qa(t,s){Oo[Mo++]=pu,Oo[Mo++]=mu,mu=t,pu=s}function Ig(t,s,a){Vi[Pi++]=fr,Vi[Pi++]=mr,Vi[Pi++]=Ha,Ha=t;var l=fr;t=mr;var h=32-vn(l)-1;l&=~(1<<h),a+=1;var m=32-vn(s)+h;if(30<m){var _=h-h%5;m=(l&(1<<_)-1).toString(32),l>>=_,h-=_,fr=1<<32-vn(s)+h|a<<h|l,mr=m+t}else fr=1<<m|a<<h|l,mr=t}function jh(t){t.return!==null&&(qa(t,1),Ig(t,1,0))}function Dh(t){for(;t===mu;)mu=Oo[--Mo],Oo[Mo]=null,pu=Oo[--Mo],Oo[Mo]=null;for(;t===Ha;)Ha=Vi[--Pi],Vi[Pi]=null,mr=Vi[--Pi],Vi[Pi]=null,fr=Vi[--Pi],Vi[Pi]=null}var Jn=null,Wt=null,yt=!1,Ga=null,Ns=!1,Oh=Error(r(519));function Wa(t){var s=Error(r(418,""));throw Ml(Mi(s,t)),Oh}function kg(t){var s=t.stateNode,a=t.type,l=t.memoizedProps;switch(s[Yt]=t,s[qt]=l,a){case"dialog":st("cancel",s),st("close",s);break;case"iframe":case"object":case"embed":st("load",s);break;case"video":case"audio":for(a=0;a<rc.length;a++)st(rc[a],s);break;case"source":st("error",s);break;case"img":case"image":case"link":st("error",s),st("load",s);break;case"details":st("toggle",s);break;case"input":st("invalid",s),on(s,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),mi(s);break;case"select":st("invalid",s);break;case"textarea":st("invalid",s),pi(s,l.value,l.defaultValue,l.children),mi(s)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||l.suppressHydrationWarning===!0||Xy(s.textContent,a)?(l.popover!=null&&(st("beforetoggle",s),st("toggle",s)),l.onScroll!=null&&st("scroll",s),l.onScrollEnd!=null&&st("scrollend",s),l.onClick!=null&&(s.onclick=Ku),s=!0):s=!1,s||Wa(t)}function Ng(t){for(Jn=t.return;Jn;)switch(Jn.tag){case 5:case 13:Ns=!1;return;case 27:case 3:Ns=!0;return;default:Jn=Jn.return}}function Dl(t){if(t!==Jn)return!1;if(!yt)return Ng(t),yt=!0,!1;var s=t.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Qf(t.type,t.memoizedProps)),a=!a),a&&Wt&&Wa(t),Ng(t),s===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));e:{for(t=t.nextSibling,s=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(s===0){Wt=as(t.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++;t=t.nextSibling}Wt=null}}else s===27?(s=Wt,ia(t.type)?(t=tm,tm=null,Wt=t):Wt=s):Wt=Jn?as(t.stateNode.nextSibling):null;return!0}function Ol(){Wt=Jn=null,yt=!1}function jg(){var t=Ga;return t!==null&&(li===null?li=t:li.push.apply(li,t),Ga=null),t}function Ml(t){Ga===null?Ga=[t]:Ga.push(t)}var Mh=P(null),Xa=null,pr=null;function Fr(t,s,a){ee(Mh,s._currentValue),s._currentValue=a}function gr(t){t._currentValue=Mh.current,oe(Mh)}function Lh(t,s,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,l!==null&&(l.childLanes|=s)):l!==null&&(l.childLanes&s)!==s&&(l.childLanes|=s),t===a)break;t=t.return}}function Vh(t,s,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var m=h.dependencies;if(m!==null){var _=h.child;m=m.firstContext;e:for(;m!==null;){var E=m;m=h;for(var O=0;O<s.length;O++)if(E.context===s[O]){m.lanes|=a,E=m.alternate,E!==null&&(E.lanes|=a),Lh(m.return,a,t),l||(_=null);break e}m=E.next}}else if(h.tag===18){if(_=h.return,_===null)throw Error(r(341));_.lanes|=a,m=_.alternate,m!==null&&(m.lanes|=a),Lh(_,a,t),_=null}else _=h.child;if(_!==null)_.return=h;else for(_=h;_!==null;){if(_===t){_=null;break}if(h=_.sibling,h!==null){h.return=_.return,_=h;break}_=_.return}h=_}}function Ll(t,s,a,l){t=null;for(var h=s,m=!1;h!==null;){if(!m){if((h.flags&524288)!==0)m=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var _=h.alternate;if(_===null)throw Error(r(387));if(_=_.memoizedProps,_!==null){var E=h.type;vi(h.pendingProps.value,_.value)||(t!==null?t.push(E):t=[E])}}else if(h===lt.current){if(_=h.alternate,_===null)throw Error(r(387));_.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(dc):t=[dc])}h=h.return}t!==null&&Vh(s,t,a,l),s.flags|=262144}function gu(t){for(t=t.firstContext;t!==null;){if(!vi(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Za(t){Xa=t,pr=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Fn(t){return Dg(Xa,t)}function yu(t,s){return Xa===null&&Za(t),Dg(t,s)}function Dg(t,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},pr===null){if(t===null)throw Error(r(308));pr=s,t.dependencies={lanes:0,firstContext:s},t.flags|=524288}else pr=pr.next=s;return a}var H2=typeof AbortController<"u"?AbortController:function(){var t=[],s=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){s.aborted=!0,t.forEach(function(a){return a()})}},q2=i.unstable_scheduleCallback,G2=i.unstable_NormalPriority,fn={$$typeof:z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ph(){return{controller:new H2,data:new Map,refCount:0}}function Vl(t){t.refCount--,t.refCount===0&&q2(G2,function(){t.controller.abort()})}var Pl=null,Uh=0,Lo=0,Vo=null;function W2(t,s){if(Pl===null){var a=Pl=[];Uh=0,Lo=Ff(),Vo={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Uh++,s.then(Og,Og),s}function Og(){if(--Uh===0&&Pl!==null){Vo!==null&&(Vo.status="fulfilled");var t=Pl;Pl=null,Lo=0,Vo=null;for(var s=0;s<t.length;s++)(0,t[s])()}}function X2(t,s){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=s;for(var h=0;h<a.length;h++)(0,a[h])(s)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var Mg=ae.S;ae.S=function(t,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&W2(t,s),Mg!==null&&Mg(t,s)};var Ka=P(null);function Bh(){var t=Ka.current;return t!==null?t:Nt.pooledCache}function vu(t,s){s===null?ee(Ka,Ka.current):ee(Ka,s.pool)}function Lg(){var t=Bh();return t===null?null:{parent:fn._currentValue,pool:t}}var Ul=Error(r(460)),Vg=Error(r(474)),bu=Error(r(542)),zh={then:function(){}};function Pg(t){return t=t.status,t==="fulfilled"||t==="rejected"}function _u(){}function Ug(t,s,a){switch(a=t[a],a===void 0?t.push(s):a!==s&&(s.then(_u,_u),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,zg(t),t;default:if(typeof s.status=="string")s.then(_u,_u);else{if(t=Nt,t!==null&&100<t.shellSuspendCounter)throw Error(r(482));t=s,t.status="pending",t.then(function(l){if(s.status==="pending"){var h=s;h.status="fulfilled",h.value=l}},function(l){if(s.status==="pending"){var h=s;h.status="rejected",h.reason=l}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,zg(t),t}throw Bl=s,Ul}}var Bl=null;function Bg(){if(Bl===null)throw Error(r(459));var t=Bl;return Bl=null,t}function zg(t){if(t===Ul||t===bu)throw Error(r(483))}var Hr=!1;function Fh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Hh(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function qr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Gr(t,s,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(xt&2)!==0){var h=l.pending;return h===null?s.next=s:(s.next=h.next,h.next=s),l.pending=s,s=hu(t),Rg(t,null,a),s}return du(t,l,s,a),hu(t)}function zl(t,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var l=s.lanes;l&=t.pendingLanes,a|=l,s.lanes=a,Js(t,a)}}function qh(t,s){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?h=m=_:m=m.next=_,a=a.next}while(a!==null);m===null?h=m=s:m=m.next=s}else h=m=s;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:m,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=s:t.next=s,a.lastBaseUpdate=s}var Gh=!1;function Fl(){if(Gh){var t=Vo;if(t!==null)throw t}}function Hl(t,s,a,l){Gh=!1;var h=t.updateQueue;Hr=!1;var m=h.firstBaseUpdate,_=h.lastBaseUpdate,E=h.shared.pending;if(E!==null){h.shared.pending=null;var O=E,Q=O.next;O.next=null,_===null?m=Q:_.next=Q,_=O;var le=t.alternate;le!==null&&(le=le.updateQueue,E=le.lastBaseUpdate,E!==_&&(E===null?le.firstBaseUpdate=Q:E.next=Q,le.lastBaseUpdate=O))}if(m!==null){var ue=h.baseState;_=0,le=Q=O=null,E=m;do{var te=E.lane&-536870913,ne=te!==E.lane;if(ne?(dt&te)===te:(l&te)===te){te!==0&&te===Lo&&(Gh=!0),le!==null&&(le=le.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var Be=t,Me=E;te=s;var Tt=a;switch(Me.tag){case 1:if(Be=Me.payload,typeof Be=="function"){ue=Be.call(Tt,ue,te);break e}ue=Be;break e;case 3:Be.flags=Be.flags&-65537|128;case 0:if(Be=Me.payload,te=typeof Be=="function"?Be.call(Tt,ue,te):Be,te==null)break e;ue=x({},ue,te);break e;case 2:Hr=!0}}te=E.callback,te!==null&&(t.flags|=64,ne&&(t.flags|=8192),ne=h.callbacks,ne===null?h.callbacks=[te]:ne.push(te))}else ne={lane:te,tag:E.tag,payload:E.payload,callback:E.callback,next:null},le===null?(Q=le=ne,O=ue):le=le.next=ne,_|=te;if(E=E.next,E===null){if(E=h.shared.pending,E===null)break;ne=E,E=ne.next,ne.next=null,h.lastBaseUpdate=ne,h.shared.pending=null}}while(!0);le===null&&(O=ue),h.baseState=O,h.firstBaseUpdate=Q,h.lastBaseUpdate=le,m===null&&(h.shared.lanes=0),Jr|=_,t.lanes=_,t.memoizedState=ue}}function Fg(t,s){if(typeof t!="function")throw Error(r(191,t));t.call(s)}function Hg(t,s){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Fg(a[t],s)}var Po=P(null),xu=P(0);function qg(t,s){t=Sr,ee(xu,t),ee(Po,s),Sr=t|s.baseLanes}function Wh(){ee(xu,Sr),ee(Po,Po.current)}function Xh(){Sr=xu.current,oe(Po),oe(xu)}var Wr=0,Ye=null,Et=null,nn=null,wu=!1,Uo=!1,Ya=!1,Su=0,ql=0,Bo=null,Z2=0;function Qt(){throw Error(r(321))}function Zh(t,s){if(s===null)return!1;for(var a=0;a<s.length&&a<t.length;a++)if(!vi(t[a],s[a]))return!1;return!0}function Kh(t,s,a,l,h,m){return Wr=m,Ye=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,ae.H=t===null||t.memoizedState===null?R0:C0,Ya=!1,m=a(l,h),Ya=!1,Uo&&(m=Wg(s,a,l,h)),Gg(t),m}function Gg(t){ae.H=Iu;var s=Et!==null&&Et.next!==null;if(Wr=0,nn=Et=Ye=null,wu=!1,ql=0,Bo=null,s)throw Error(r(300));t===null||xn||(t=t.dependencies,t!==null&&gu(t)&&(xn=!0))}function Wg(t,s,a,l){Ye=t;var h=0;do{if(Uo&&(Bo=null),ql=0,Uo=!1,25<=h)throw Error(r(301));if(h+=1,nn=Et=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}ae.H=tw,m=s(a,l)}while(Uo);return m}function K2(){var t=ae.H,s=t.useState()[0];return s=typeof s.then=="function"?Gl(s):s,t=t.useState()[0],(Et!==null?Et.memoizedState:null)!==t&&(Ye.flags|=1024),s}function Yh(){var t=Su!==0;return Su=0,t}function Qh(t,s,a){s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~a}function $h(t){if(wu){for(t=t.memoizedState;t!==null;){var s=t.queue;s!==null&&(s.pending=null),t=t.next}wu=!1}Wr=0,nn=Et=Ye=null,Uo=!1,ql=Su=0,Bo=null}function ai(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nn===null?Ye.memoizedState=nn=t:nn=nn.next=t,nn}function sn(){if(Et===null){var t=Ye.alternate;t=t!==null?t.memoizedState:null}else t=Et.next;var s=nn===null?Ye.memoizedState:nn.next;if(s!==null)nn=s,Et=t;else{if(t===null)throw Ye.alternate===null?Error(r(467)):Error(r(310));Et=t,t={memoizedState:Et.memoizedState,baseState:Et.baseState,baseQueue:Et.baseQueue,queue:Et.queue,next:null},nn===null?Ye.memoizedState=nn=t:nn=nn.next=t}return nn}function Jh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Gl(t){var s=ql;return ql+=1,Bo===null&&(Bo=[]),t=Ug(Bo,t,s),s=Ye,(nn===null?s.memoizedState:nn.next)===null&&(s=s.alternate,ae.H=s===null||s.memoizedState===null?R0:C0),t}function Eu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Gl(t);if(t.$$typeof===z)return Fn(t)}throw Error(r(438,String(t)))}function ef(t){var s=null,a=Ye.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var l=Ye.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(s={data:l.data.map(function(h){return h.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=Jh(),Ye.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(t),l=0;l<t;l++)a[l]=L;return s.index++,a}function yr(t,s){return typeof s=="function"?s(t):s}function Au(t){var s=sn();return tf(s,Et,t)}function tf(t,s,a){var l=t.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var h=t.baseQueue,m=l.pending;if(m!==null){if(h!==null){var _=h.next;h.next=m.next,m.next=_}s.baseQueue=h=m,l.pending=null}if(m=t.baseState,h===null)t.memoizedState=m;else{s=h.next;var E=_=null,O=null,Q=s,le=!1;do{var ue=Q.lane&-536870913;if(ue!==Q.lane?(dt&ue)===ue:(Wr&ue)===ue){var te=Q.revertLane;if(te===0)O!==null&&(O=O.next={lane:0,revertLane:0,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),ue===Lo&&(le=!0);else if((Wr&te)===te){Q=Q.next,te===Lo&&(le=!0);continue}else ue={lane:0,revertLane:Q.revertLane,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},O===null?(E=O=ue,_=m):O=O.next=ue,Ye.lanes|=te,Jr|=te;ue=Q.action,Ya&&a(m,ue),m=Q.hasEagerState?Q.eagerState:a(m,ue)}else te={lane:ue,revertLane:Q.revertLane,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},O===null?(E=O=te,_=m):O=O.next=te,Ye.lanes|=ue,Jr|=ue;Q=Q.next}while(Q!==null&&Q!==s);if(O===null?_=m:O.next=E,!vi(m,t.memoizedState)&&(xn=!0,le&&(a=Vo,a!==null)))throw a;t.memoizedState=m,t.baseState=_,t.baseQueue=O,l.lastRenderedState=m}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function nf(t){var s=sn(),a=s.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,m=s.memoizedState;if(h!==null){a.pending=null;var _=h=h.next;do m=t(m,_.action),_=_.next;while(_!==h);vi(m,s.memoizedState)||(xn=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),a.lastRenderedState=m}return[m,l]}function Xg(t,s,a){var l=Ye,h=sn(),m=yt;if(m){if(a===void 0)throw Error(r(407));a=a()}else a=s();var _=!vi((Et||h).memoizedState,a);_&&(h.memoizedState=a,xn=!0),h=h.queue;var E=Yg.bind(null,l,h,t);if(Wl(2048,8,E,[t]),h.getSnapshot!==s||_||nn!==null&&nn.memoizedState.tag&1){if(l.flags|=2048,zo(9,Tu(),Kg.bind(null,l,h,a,s),null),Nt===null)throw Error(r(349));m||(Wr&124)!==0||Zg(l,s,a)}return a}function Zg(t,s,a){t.flags|=16384,t={getSnapshot:s,value:a},s=Ye.updateQueue,s===null?(s=Jh(),Ye.updateQueue=s,s.stores=[t]):(a=s.stores,a===null?s.stores=[t]:a.push(t))}function Kg(t,s,a,l){s.value=a,s.getSnapshot=l,Qg(s)&&$g(t)}function Yg(t,s,a){return a(function(){Qg(s)&&$g(t)})}function Qg(t){var s=t.getSnapshot;t=t.value;try{var a=s();return!vi(t,a)}catch{return!0}}function $g(t){var s=jo(t,2);s!==null&&Ei(s,t,2)}function sf(t){var s=ai();if(typeof t=="function"){var a=t;if(t=a(),Ya){Tn(!0);try{a()}finally{Tn(!1)}}}return s.memoizedState=s.baseState=t,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:yr,lastRenderedState:t},s}function Jg(t,s,a,l){return t.baseState=a,tf(t,Et,typeof l=="function"?l:yr)}function Y2(t,s,a,l,h){if(Cu(t))throw Error(r(485));if(t=s.action,t!==null){var m={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){m.listeners.push(_)}};ae.T!==null?a(!0):m.isTransition=!1,l(m),a=s.pending,a===null?(m.next=s.pending=m,e0(s,m)):(m.next=a.next,s.pending=a.next=m)}}function e0(t,s){var a=s.action,l=s.payload,h=t.state;if(s.isTransition){var m=ae.T,_={};ae.T=_;try{var E=a(h,l),O=ae.S;O!==null&&O(_,E),t0(t,s,E)}catch(Q){rf(t,s,Q)}finally{ae.T=m}}else try{m=a(h,l),t0(t,s,m)}catch(Q){rf(t,s,Q)}}function t0(t,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){n0(t,s,l)},function(l){return rf(t,s,l)}):n0(t,s,a)}function n0(t,s,a){s.status="fulfilled",s.value=a,i0(s),t.state=a,s=t.pending,s!==null&&(a=s.next,a===s?t.pending=null:(a=a.next,s.next=a,e0(t,a)))}function rf(t,s,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do s.status="rejected",s.reason=a,i0(s),s=s.next;while(s!==l)}t.action=null}function i0(t){t=t.listeners;for(var s=0;s<t.length;s++)(0,t[s])()}function s0(t,s){return s}function r0(t,s){if(yt){var a=Nt.formState;if(a!==null){e:{var l=Ye;if(yt){if(Wt){t:{for(var h=Wt,m=Ns;h.nodeType!==8;){if(!m){h=null;break t}if(h=as(h.nextSibling),h===null){h=null;break t}}m=h.data,h=m==="F!"||m==="F"?h:null}if(h){Wt=as(h.nextSibling),l=h.data==="F!";break e}}Wa(l)}l=!1}l&&(s=a[0])}}return a=ai(),a.memoizedState=a.baseState=s,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s0,lastRenderedState:s},a.queue=l,a=E0.bind(null,Ye,l),l.dispatch=a,l=sf(!1),m=uf.bind(null,Ye,!1,l.queue),l=ai(),h={state:s,dispatch:null,action:t,pending:null},l.queue=h,a=Y2.bind(null,Ye,h,m,a),h.dispatch=a,l.memoizedState=t,[s,a,!1]}function a0(t){var s=sn();return o0(s,Et,t)}function o0(t,s,a){if(s=tf(t,s,s0)[0],t=Au(yr)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var l=Gl(s)}catch(_){throw _===Ul?bu:_}else l=s;s=sn();var h=s.queue,m=h.dispatch;return a!==s.memoizedState&&(Ye.flags|=2048,zo(9,Tu(),Q2.bind(null,h,a),null)),[l,m,t]}function Q2(t,s){t.action=s}function l0(t){var s=sn(),a=Et;if(a!==null)return o0(s,a,t);sn(),s=s.memoizedState,a=sn();var l=a.queue.dispatch;return a.memoizedState=t,[s,l,!1]}function zo(t,s,a,l){return t={tag:t,create:a,deps:l,inst:s,next:null},s=Ye.updateQueue,s===null&&(s=Jh(),Ye.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,s.lastEffect=t),t}function Tu(){return{destroy:void 0,resource:void 0}}function c0(){return sn().memoizedState}function Ru(t,s,a,l){var h=ai();l=l===void 0?null:l,Ye.flags|=t,h.memoizedState=zo(1|s,Tu(),a,l)}function Wl(t,s,a,l){var h=sn();l=l===void 0?null:l;var m=h.memoizedState.inst;Et!==null&&l!==null&&Zh(l,Et.memoizedState.deps)?h.memoizedState=zo(s,m,a,l):(Ye.flags|=t,h.memoizedState=zo(1|s,m,a,l))}function u0(t,s){Ru(8390656,8,t,s)}function d0(t,s){Wl(2048,8,t,s)}function h0(t,s){return Wl(4,2,t,s)}function f0(t,s){return Wl(4,4,t,s)}function m0(t,s){if(typeof s=="function"){t=t();var a=s(t);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function p0(t,s,a){a=a!=null?a.concat([t]):null,Wl(4,4,m0.bind(null,s,t),a)}function af(){}function g0(t,s){var a=sn();s=s===void 0?null:s;var l=a.memoizedState;return s!==null&&Zh(s,l[1])?l[0]:(a.memoizedState=[t,s],t)}function y0(t,s){var a=sn();s=s===void 0?null:s;var l=a.memoizedState;if(s!==null&&Zh(s,l[1]))return l[0];if(l=t(),Ya){Tn(!0);try{t()}finally{Tn(!1)}}return a.memoizedState=[l,s],l}function of(t,s,a){return a===void 0||(Wr&1073741824)!==0?t.memoizedState=s:(t.memoizedState=a,t=_y(),Ye.lanes|=t,Jr|=t,a)}function v0(t,s,a,l){return vi(a,s)?a:Po.current!==null?(t=of(t,a,l),vi(t,s)||(xn=!0),t):(Wr&42)===0?(xn=!0,t.memoizedState=a):(t=_y(),Ye.lanes|=t,Jr|=t,s)}function b0(t,s,a,l,h){var m=he.p;he.p=m!==0&&8>m?m:8;var _=ae.T,E={};ae.T=E,uf(t,!1,s,a);try{var O=h(),Q=ae.S;if(Q!==null&&Q(E,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var le=X2(O,l);Xl(t,s,le,Si(t))}else Xl(t,s,l,Si(t))}catch(ue){Xl(t,s,{then:function(){},status:"rejected",reason:ue},Si())}finally{he.p=m,ae.T=_}}function $2(){}function lf(t,s,a,l){if(t.tag!==5)throw Error(r(476));var h=_0(t).queue;b0(t,h,s,ie,a===null?$2:function(){return x0(t),a(l)})}function _0(t){var s=t.memoizedState;if(s!==null)return s;s={memoizedState:ie,baseState:ie,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:yr,lastRenderedState:ie},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:yr,lastRenderedState:a},next:null},t.memoizedState=s,t=t.alternate,t!==null&&(t.memoizedState=s),s}function x0(t){var s=_0(t).next.queue;Xl(t,s,{},Si())}function cf(){return Fn(dc)}function w0(){return sn().memoizedState}function S0(){return sn().memoizedState}function J2(t){for(var s=t.return;s!==null;){switch(s.tag){case 24:case 3:var a=Si();t=qr(a);var l=Gr(s,t,a);l!==null&&(Ei(l,s,a),zl(l,s,a)),s={cache:Ph()},t.payload=s;return}s=s.return}}function ew(t,s,a){var l=Si();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Cu(t)?A0(s,a):(a=Ch(t,s,a,l),a!==null&&(Ei(a,t,l),T0(a,s,l)))}function E0(t,s,a){var l=Si();Xl(t,s,a,l)}function Xl(t,s,a,l){var h={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Cu(t))A0(s,h);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var _=s.lastRenderedState,E=m(_,a);if(h.hasEagerState=!0,h.eagerState=E,vi(E,_))return du(t,s,h,0),Nt===null&&uu(),!1}catch{}finally{}if(a=Ch(t,s,h,l),a!==null)return Ei(a,t,l),T0(a,s,l),!0}return!1}function uf(t,s,a,l){if(l={lane:2,revertLane:Ff(),action:l,hasEagerState:!1,eagerState:null,next:null},Cu(t)){if(s)throw Error(r(479))}else s=Ch(t,a,l,2),s!==null&&Ei(s,t,2)}function Cu(t){var s=t.alternate;return t===Ye||s!==null&&s===Ye}function A0(t,s){Uo=wu=!0;var a=t.pending;a===null?s.next=s:(s.next=a.next,a.next=s),t.pending=s}function T0(t,s,a){if((a&4194048)!==0){var l=s.lanes;l&=t.pendingLanes,a|=l,s.lanes=a,Js(t,a)}}var Iu={readContext:Fn,use:Eu,useCallback:Qt,useContext:Qt,useEffect:Qt,useImperativeHandle:Qt,useLayoutEffect:Qt,useInsertionEffect:Qt,useMemo:Qt,useReducer:Qt,useRef:Qt,useState:Qt,useDebugValue:Qt,useDeferredValue:Qt,useTransition:Qt,useSyncExternalStore:Qt,useId:Qt,useHostTransitionStatus:Qt,useFormState:Qt,useActionState:Qt,useOptimistic:Qt,useMemoCache:Qt,useCacheRefresh:Qt},R0={readContext:Fn,use:Eu,useCallback:function(t,s){return ai().memoizedState=[t,s===void 0?null:s],t},useContext:Fn,useEffect:u0,useImperativeHandle:function(t,s,a){a=a!=null?a.concat([t]):null,Ru(4194308,4,m0.bind(null,s,t),a)},useLayoutEffect:function(t,s){return Ru(4194308,4,t,s)},useInsertionEffect:function(t,s){Ru(4,2,t,s)},useMemo:function(t,s){var a=ai();s=s===void 0?null:s;var l=t();if(Ya){Tn(!0);try{t()}finally{Tn(!1)}}return a.memoizedState=[l,s],l},useReducer:function(t,s,a){var l=ai();if(a!==void 0){var h=a(s);if(Ya){Tn(!0);try{a(s)}finally{Tn(!1)}}}else h=s;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=ew.bind(null,Ye,t),[l.memoizedState,t]},useRef:function(t){var s=ai();return t={current:t},s.memoizedState=t},useState:function(t){t=sf(t);var s=t.queue,a=E0.bind(null,Ye,s);return s.dispatch=a,[t.memoizedState,a]},useDebugValue:af,useDeferredValue:function(t,s){var a=ai();return of(a,t,s)},useTransition:function(){var t=sf(!1);return t=b0.bind(null,Ye,t.queue,!0,!1),ai().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,s,a){var l=Ye,h=ai();if(yt){if(a===void 0)throw Error(r(407));a=a()}else{if(a=s(),Nt===null)throw Error(r(349));(dt&124)!==0||Zg(l,s,a)}h.memoizedState=a;var m={value:a,getSnapshot:s};return h.queue=m,u0(Yg.bind(null,l,m,t),[t]),l.flags|=2048,zo(9,Tu(),Kg.bind(null,l,m,a,s),null),a},useId:function(){var t=ai(),s=Nt.identifierPrefix;if(yt){var a=mr,l=fr;a=(l&~(1<<32-vn(l)-1)).toString(32)+a,s="«"+s+"R"+a,a=Su++,0<a&&(s+="H"+a.toString(32)),s+="»"}else a=Z2++,s="«"+s+"r"+a.toString(32)+"»";return t.memoizedState=s},useHostTransitionStatus:cf,useFormState:r0,useActionState:r0,useOptimistic:function(t){var s=ai();s.memoizedState=s.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=uf.bind(null,Ye,!0,a),a.dispatch=s,[t,s]},useMemoCache:ef,useCacheRefresh:function(){return ai().memoizedState=J2.bind(null,Ye)}},C0={readContext:Fn,use:Eu,useCallback:g0,useContext:Fn,useEffect:d0,useImperativeHandle:p0,useInsertionEffect:h0,useLayoutEffect:f0,useMemo:y0,useReducer:Au,useRef:c0,useState:function(){return Au(yr)},useDebugValue:af,useDeferredValue:function(t,s){var a=sn();return v0(a,Et.memoizedState,t,s)},useTransition:function(){var t=Au(yr)[0],s=sn().memoizedState;return[typeof t=="boolean"?t:Gl(t),s]},useSyncExternalStore:Xg,useId:w0,useHostTransitionStatus:cf,useFormState:a0,useActionState:a0,useOptimistic:function(t,s){var a=sn();return Jg(a,Et,t,s)},useMemoCache:ef,useCacheRefresh:S0},tw={readContext:Fn,use:Eu,useCallback:g0,useContext:Fn,useEffect:d0,useImperativeHandle:p0,useInsertionEffect:h0,useLayoutEffect:f0,useMemo:y0,useReducer:nf,useRef:c0,useState:function(){return nf(yr)},useDebugValue:af,useDeferredValue:function(t,s){var a=sn();return Et===null?of(a,t,s):v0(a,Et.memoizedState,t,s)},useTransition:function(){var t=nf(yr)[0],s=sn().memoizedState;return[typeof t=="boolean"?t:Gl(t),s]},useSyncExternalStore:Xg,useId:w0,useHostTransitionStatus:cf,useFormState:l0,useActionState:l0,useOptimistic:function(t,s){var a=sn();return Et!==null?Jg(a,Et,t,s):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:ef,useCacheRefresh:S0},Fo=null,Zl=0;function ku(t){var s=Zl;return Zl+=1,Fo===null&&(Fo=[]),Ug(Fo,t,s)}function Kl(t,s){s=s.props.ref,t.ref=s!==void 0?s:null}function Nu(t,s){throw s.$$typeof===S?Error(r(525)):(t=Object.prototype.toString.call(s),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t)))}function I0(t){var s=t._init;return s(t._payload)}function k0(t){function s(W,H){if(t){var Z=W.deletions;Z===null?(W.deletions=[H],W.flags|=16):Z.push(H)}}function a(W,H){if(!t)return null;for(;H!==null;)s(W,H),H=H.sibling;return null}function l(W){for(var H=new Map;W!==null;)W.key!==null?H.set(W.key,W):H.set(W.index,W),W=W.sibling;return H}function h(W,H){return W=hr(W,H),W.index=0,W.sibling=null,W}function m(W,H,Z){return W.index=Z,t?(Z=W.alternate,Z!==null?(Z=Z.index,Z<H?(W.flags|=67108866,H):Z):(W.flags|=67108866,H)):(W.flags|=1048576,H)}function _(W){return t&&W.alternate===null&&(W.flags|=67108866),W}function E(W,H,Z,ce){return H===null||H.tag!==6?(H=kh(Z,W.mode,ce),H.return=W,H):(H=h(H,Z),H.return=W,H)}function O(W,H,Z,ce){var Ce=Z.type;return Ce===G?le(W,H,Z.props.children,ce,Z.key):H!==null&&(H.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===R&&I0(Ce)===H.type)?(H=h(H,Z.props),Kl(H,Z),H.return=W,H):(H=fu(Z.type,Z.key,Z.props,null,W.mode,ce),Kl(H,Z),H.return=W,H)}function Q(W,H,Z,ce){return H===null||H.tag!==4||H.stateNode.containerInfo!==Z.containerInfo||H.stateNode.implementation!==Z.implementation?(H=Nh(Z,W.mode,ce),H.return=W,H):(H=h(H,Z.children||[]),H.return=W,H)}function le(W,H,Z,ce,Ce){return H===null||H.tag!==7?(H=Fa(Z,W.mode,ce,Ce),H.return=W,H):(H=h(H,Z),H.return=W,H)}function ue(W,H,Z){if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return H=kh(""+H,W.mode,Z),H.return=W,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case A:return Z=fu(H.type,H.key,H.props,null,W.mode,Z),Kl(Z,H),Z.return=W,Z;case F:return H=Nh(H,W.mode,Z),H.return=W,H;case R:var ce=H._init;return H=ce(H._payload),ue(W,H,Z)}if($e(H)||B(H))return H=Fa(H,W.mode,Z,null),H.return=W,H;if(typeof H.then=="function")return ue(W,ku(H),Z);if(H.$$typeof===z)return ue(W,yu(W,H),Z);Nu(W,H)}return null}function te(W,H,Z,ce){var Ce=H!==null?H.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return Ce!==null?null:E(W,H,""+Z,ce);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case A:return Z.key===Ce?O(W,H,Z,ce):null;case F:return Z.key===Ce?Q(W,H,Z,ce):null;case R:return Ce=Z._init,Z=Ce(Z._payload),te(W,H,Z,ce)}if($e(Z)||B(Z))return Ce!==null?null:le(W,H,Z,ce,null);if(typeof Z.then=="function")return te(W,H,ku(Z),ce);if(Z.$$typeof===z)return te(W,H,yu(W,Z),ce);Nu(W,Z)}return null}function ne(W,H,Z,ce,Ce){if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return W=W.get(Z)||null,E(H,W,""+ce,Ce);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case A:return W=W.get(ce.key===null?Z:ce.key)||null,O(H,W,ce,Ce);case F:return W=W.get(ce.key===null?Z:ce.key)||null,Q(H,W,ce,Ce);case R:var et=ce._init;return ce=et(ce._payload),ne(W,H,Z,ce,Ce)}if($e(ce)||B(ce))return W=W.get(Z)||null,le(H,W,ce,Ce,null);if(typeof ce.then=="function")return ne(W,H,Z,ku(ce),Ce);if(ce.$$typeof===z)return ne(W,H,Z,yu(H,ce),Ce);Nu(H,ce)}return null}function Be(W,H,Z,ce){for(var Ce=null,et=null,Ne=H,Ve=H=0,Sn=null;Ne!==null&&Ve<Z.length;Ve++){Ne.index>Ve?(Sn=Ne,Ne=null):Sn=Ne.sibling;var pt=te(W,Ne,Z[Ve],ce);if(pt===null){Ne===null&&(Ne=Sn);break}t&&Ne&&pt.alternate===null&&s(W,Ne),H=m(pt,H,Ve),et===null?Ce=pt:et.sibling=pt,et=pt,Ne=Sn}if(Ve===Z.length)return a(W,Ne),yt&&qa(W,Ve),Ce;if(Ne===null){for(;Ve<Z.length;Ve++)Ne=ue(W,Z[Ve],ce),Ne!==null&&(H=m(Ne,H,Ve),et===null?Ce=Ne:et.sibling=Ne,et=Ne);return yt&&qa(W,Ve),Ce}for(Ne=l(Ne);Ve<Z.length;Ve++)Sn=ne(Ne,W,Ve,Z[Ve],ce),Sn!==null&&(t&&Sn.alternate!==null&&Ne.delete(Sn.key===null?Ve:Sn.key),H=m(Sn,H,Ve),et===null?Ce=Sn:et.sibling=Sn,et=Sn);return t&&Ne.forEach(function(la){return s(W,la)}),yt&&qa(W,Ve),Ce}function Me(W,H,Z,ce){if(Z==null)throw Error(r(151));for(var Ce=null,et=null,Ne=H,Ve=H=0,Sn=null,pt=Z.next();Ne!==null&&!pt.done;Ve++,pt=Z.next()){Ne.index>Ve?(Sn=Ne,Ne=null):Sn=Ne.sibling;var la=te(W,Ne,pt.value,ce);if(la===null){Ne===null&&(Ne=Sn);break}t&&Ne&&la.alternate===null&&s(W,Ne),H=m(la,H,Ve),et===null?Ce=la:et.sibling=la,et=la,Ne=Sn}if(pt.done)return a(W,Ne),yt&&qa(W,Ve),Ce;if(Ne===null){for(;!pt.done;Ve++,pt=Z.next())pt=ue(W,pt.value,ce),pt!==null&&(H=m(pt,H,Ve),et===null?Ce=pt:et.sibling=pt,et=pt);return yt&&qa(W,Ve),Ce}for(Ne=l(Ne);!pt.done;Ve++,pt=Z.next())pt=ne(Ne,W,Ve,pt.value,ce),pt!==null&&(t&&pt.alternate!==null&&Ne.delete(pt.key===null?Ve:pt.key),H=m(pt,H,Ve),et===null?Ce=pt:et.sibling=pt,et=pt);return t&&Ne.forEach(function(nS){return s(W,nS)}),yt&&qa(W,Ve),Ce}function Tt(W,H,Z,ce){if(typeof Z=="object"&&Z!==null&&Z.type===G&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case A:e:{for(var Ce=Z.key;H!==null;){if(H.key===Ce){if(Ce=Z.type,Ce===G){if(H.tag===7){a(W,H.sibling),ce=h(H,Z.props.children),ce.return=W,W=ce;break e}}else if(H.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===R&&I0(Ce)===H.type){a(W,H.sibling),ce=h(H,Z.props),Kl(ce,Z),ce.return=W,W=ce;break e}a(W,H);break}else s(W,H);H=H.sibling}Z.type===G?(ce=Fa(Z.props.children,W.mode,ce,Z.key),ce.return=W,W=ce):(ce=fu(Z.type,Z.key,Z.props,null,W.mode,ce),Kl(ce,Z),ce.return=W,W=ce)}return _(W);case F:e:{for(Ce=Z.key;H!==null;){if(H.key===Ce)if(H.tag===4&&H.stateNode.containerInfo===Z.containerInfo&&H.stateNode.implementation===Z.implementation){a(W,H.sibling),ce=h(H,Z.children||[]),ce.return=W,W=ce;break e}else{a(W,H);break}else s(W,H);H=H.sibling}ce=Nh(Z,W.mode,ce),ce.return=W,W=ce}return _(W);case R:return Ce=Z._init,Z=Ce(Z._payload),Tt(W,H,Z,ce)}if($e(Z))return Be(W,H,Z,ce);if(B(Z)){if(Ce=B(Z),typeof Ce!="function")throw Error(r(150));return Z=Ce.call(Z),Me(W,H,Z,ce)}if(typeof Z.then=="function")return Tt(W,H,ku(Z),ce);if(Z.$$typeof===z)return Tt(W,H,yu(W,Z),ce);Nu(W,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint"?(Z=""+Z,H!==null&&H.tag===6?(a(W,H.sibling),ce=h(H,Z),ce.return=W,W=ce):(a(W,H),ce=kh(Z,W.mode,ce),ce.return=W,W=ce),_(W)):a(W,H)}return function(W,H,Z,ce){try{Zl=0;var Ce=Tt(W,H,Z,ce);return Fo=null,Ce}catch(Ne){if(Ne===Ul||Ne===bu)throw Ne;var et=bi(29,Ne,null,W.mode);return et.lanes=ce,et.return=W,et}finally{}}}var Ho=k0(!0),N0=k0(!1),Ui=P(null),js=null;function Xr(t){var s=t.alternate;ee(mn,mn.current&1),ee(Ui,t),js===null&&(s===null||Po.current!==null||s.memoizedState!==null)&&(js=t)}function j0(t){if(t.tag===22){if(ee(mn,mn.current),ee(Ui,t),js===null){var s=t.alternate;s!==null&&s.memoizedState!==null&&(js=t)}}else Zr()}function Zr(){ee(mn,mn.current),ee(Ui,Ui.current)}function vr(t){oe(Ui),js===t&&(js=null),oe(mn)}var mn=P(0);function ju(t){for(var s=t;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||em(a)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function df(t,s,a,l){s=t.memoizedState,a=a(l,s),a=a==null?s:x({},s,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var hf={enqueueSetState:function(t,s,a){t=t._reactInternals;var l=Si(),h=qr(l);h.payload=s,a!=null&&(h.callback=a),s=Gr(t,h,l),s!==null&&(Ei(s,t,l),zl(s,t,l))},enqueueReplaceState:function(t,s,a){t=t._reactInternals;var l=Si(),h=qr(l);h.tag=1,h.payload=s,a!=null&&(h.callback=a),s=Gr(t,h,l),s!==null&&(Ei(s,t,l),zl(s,t,l))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var a=Si(),l=qr(a);l.tag=2,s!=null&&(l.callback=s),s=Gr(t,l,a),s!==null&&(Ei(s,t,a),zl(s,t,a))}};function D0(t,s,a,l,h,m,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,m,_):s.prototype&&s.prototype.isPureReactComponent?!Nl(a,l)||!Nl(h,m):!0}function O0(t,s,a,l){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,l),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,l),s.state!==t&&hf.enqueueReplaceState(s,s.state,null)}function Qa(t,s){var a=s;if("ref"in s){a={};for(var l in s)l!=="ref"&&(a[l]=s[l])}if(t=t.defaultProps){a===s&&(a=x({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}var Du=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function M0(t){Du(t)}function L0(t){console.error(t)}function V0(t){Du(t)}function Ou(t,s){try{var a=t.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(l){setTimeout(function(){throw l})}}function P0(t,s,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function ff(t,s,a){return a=qr(a),a.tag=3,a.payload={element:null},a.callback=function(){Ou(t,s)},a}function U0(t){return t=qr(t),t.tag=3,t}function B0(t,s,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var m=l.value;t.payload=function(){return h(m)},t.callback=function(){P0(s,a,l)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(t.callback=function(){P0(s,a,l),typeof h!="function"&&(ea===null?ea=new Set([this]):ea.add(this));var E=l.stack;this.componentDidCatch(l.value,{componentStack:E!==null?E:""})})}function nw(t,s,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(s=a.alternate,s!==null&&Ll(s,a,h,!0),a=Ui.current,a!==null){switch(a.tag){case 13:return js===null?Vf():a.alternate===null&&Xt===0&&(Xt=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===zh?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([l]):s.add(l),Uf(t,l,h)),!1;case 22:return a.flags|=65536,l===zh?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([l]):a.add(l)),Uf(t,l,h)),!1}throw Error(r(435,a.tag))}return Uf(t,l,h),Vf(),!1}if(yt)return s=Ui.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=h,l!==Oh&&(t=Error(r(422),{cause:l}),Ml(Mi(t,a)))):(l!==Oh&&(s=Error(r(423),{cause:l}),Ml(Mi(s,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=Mi(l,a),h=ff(t.stateNode,l,h),qh(t,h),Xt!==4&&(Xt=2)),!1;var m=Error(r(520),{cause:l});if(m=Mi(m,a),nc===null?nc=[m]:nc.push(m),Xt!==4&&(Xt=2),s===null)return!0;l=Mi(l,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=ff(a.stateNode,l,t),qh(a,t),!1;case 1:if(s=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(ea===null||!ea.has(m))))return a.flags|=65536,h&=-h,a.lanes|=h,h=U0(h),B0(h,t,a,l),qh(a,h),!1}a=a.return}while(a!==null);return!1}var z0=Error(r(461)),xn=!1;function jn(t,s,a,l){s.child=t===null?N0(s,null,a,l):Ho(s,t.child,a,l)}function F0(t,s,a,l,h){a=a.render;var m=s.ref;if("ref"in l){var _={};for(var E in l)E!=="ref"&&(_[E]=l[E])}else _=l;return Za(s),l=Kh(t,s,a,_,m,h),E=Yh(),t!==null&&!xn?(Qh(t,s,h),br(t,s,h)):(yt&&E&&jh(s),s.flags|=1,jn(t,s,l,h),s.child)}function H0(t,s,a,l,h){if(t===null){var m=a.type;return typeof m=="function"&&!Ih(m)&&m.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=m,q0(t,s,m,l,h)):(t=fu(a.type,null,l,s,s.mode,h),t.ref=s.ref,t.return=s,s.child=t)}if(m=t.child,!xf(t,h)){var _=m.memoizedProps;if(a=a.compare,a=a!==null?a:Nl,a(_,l)&&t.ref===s.ref)return br(t,s,h)}return s.flags|=1,t=hr(m,l),t.ref=s.ref,t.return=s,s.child=t}function q0(t,s,a,l,h){if(t!==null){var m=t.memoizedProps;if(Nl(m,l)&&t.ref===s.ref)if(xn=!1,s.pendingProps=l=m,xf(t,h))(t.flags&131072)!==0&&(xn=!0);else return s.lanes=t.lanes,br(t,s,h)}return mf(t,s,a,l,h)}function G0(t,s,a){var l=s.pendingProps,h=l.children,m=t!==null?t.memoizedState:null;if(l.mode==="hidden"){if((s.flags&128)!==0){if(l=m!==null?m.baseLanes|a:a,t!==null){for(h=s.child=t.child,m=0;h!==null;)m=m|h.lanes|h.childLanes,h=h.sibling;s.childLanes=m&~l}else s.childLanes=0,s.child=null;return W0(t,s,l,a)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},t!==null&&vu(s,m!==null?m.cachePool:null),m!==null?qg(s,m):Wh(),j0(s);else return s.lanes=s.childLanes=536870912,W0(t,s,m!==null?m.baseLanes|a:a,a)}else m!==null?(vu(s,m.cachePool),qg(s,m),Zr(),s.memoizedState=null):(t!==null&&vu(s,null),Wh(),Zr());return jn(t,s,h,a),s.child}function W0(t,s,a,l){var h=Bh();return h=h===null?null:{parent:fn._currentValue,pool:h},s.memoizedState={baseLanes:a,cachePool:h},t!==null&&vu(s,null),Wh(),j0(s),t!==null&&Ll(t,s,l,!0),null}function Mu(t,s){var a=s.ref;if(a===null)t!==null&&t.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(t===null||t.ref!==a)&&(s.flags|=4194816)}}function mf(t,s,a,l,h){return Za(s),a=Kh(t,s,a,l,void 0,h),l=Yh(),t!==null&&!xn?(Qh(t,s,h),br(t,s,h)):(yt&&l&&jh(s),s.flags|=1,jn(t,s,a,h),s.child)}function X0(t,s,a,l,h,m){return Za(s),s.updateQueue=null,a=Wg(s,l,a,h),Gg(t),l=Yh(),t!==null&&!xn?(Qh(t,s,m),br(t,s,m)):(yt&&l&&jh(s),s.flags|=1,jn(t,s,a,m),s.child)}function Z0(t,s,a,l,h){if(Za(s),s.stateNode===null){var m=Do,_=a.contextType;typeof _=="object"&&_!==null&&(m=Fn(_)),m=new a(l,m),s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=hf,s.stateNode=m,m._reactInternals=s,m=s.stateNode,m.props=l,m.state=s.memoizedState,m.refs={},Fh(s),_=a.contextType,m.context=typeof _=="object"&&_!==null?Fn(_):Do,m.state=s.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(df(s,a,_,l),m.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(_=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),_!==m.state&&hf.enqueueReplaceState(m,m.state,null),Hl(s,l,m,h),Fl(),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308),l=!0}else if(t===null){m=s.stateNode;var E=s.memoizedProps,O=Qa(a,E);m.props=O;var Q=m.context,le=a.contextType;_=Do,typeof le=="object"&&le!==null&&(_=Fn(le));var ue=a.getDerivedStateFromProps;le=typeof ue=="function"||typeof m.getSnapshotBeforeUpdate=="function",E=s.pendingProps!==E,le||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(E||Q!==_)&&O0(s,m,l,_),Hr=!1;var te=s.memoizedState;m.state=te,Hl(s,l,m,h),Fl(),Q=s.memoizedState,E||te!==Q||Hr?(typeof ue=="function"&&(df(s,a,ue,l),Q=s.memoizedState),(O=Hr||D0(s,a,O,l,te,Q,_))?(le||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(s.flags|=4194308)):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=l,s.memoizedState=Q),m.props=l,m.state=Q,m.context=_,l=O):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),l=!1)}else{m=s.stateNode,Hh(t,s),_=s.memoizedProps,le=Qa(a,_),m.props=le,ue=s.pendingProps,te=m.context,Q=a.contextType,O=Do,typeof Q=="object"&&Q!==null&&(O=Fn(Q)),E=a.getDerivedStateFromProps,(Q=typeof E=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(_!==ue||te!==O)&&O0(s,m,l,O),Hr=!1,te=s.memoizedState,m.state=te,Hl(s,l,m,h),Fl();var ne=s.memoizedState;_!==ue||te!==ne||Hr||t!==null&&t.dependencies!==null&&gu(t.dependencies)?(typeof E=="function"&&(df(s,a,E,l),ne=s.memoizedState),(le=Hr||D0(s,a,le,l,te,ne,O)||t!==null&&t.dependencies!==null&&gu(t.dependencies))?(Q||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(l,ne,O),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(l,ne,O)),typeof m.componentDidUpdate=="function"&&(s.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof m.componentDidUpdate!="function"||_===t.memoizedProps&&te===t.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&te===t.memoizedState||(s.flags|=1024),s.memoizedProps=l,s.memoizedState=ne),m.props=l,m.state=ne,m.context=O,l=le):(typeof m.componentDidUpdate!="function"||_===t.memoizedProps&&te===t.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&te===t.memoizedState||(s.flags|=1024),l=!1)}return m=l,Mu(t,s),l=(s.flags&128)!==0,m||l?(m=s.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:m.render(),s.flags|=1,t!==null&&l?(s.child=Ho(s,t.child,null,h),s.child=Ho(s,null,a,h)):jn(t,s,a,h),s.memoizedState=m.state,t=s.child):t=br(t,s,h),t}function K0(t,s,a,l){return Ol(),s.flags|=256,jn(t,s,a,l),s.child}var pf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function gf(t){return{baseLanes:t,cachePool:Lg()}}function yf(t,s,a){return t=t!==null?t.childLanes&~a:0,s&&(t|=Bi),t}function Y0(t,s,a){var l=s.pendingProps,h=!1,m=(s.flags&128)!==0,_;if((_=m)||(_=t!==null&&t.memoizedState===null?!1:(mn.current&2)!==0),_&&(h=!0,s.flags&=-129),_=(s.flags&32)!==0,s.flags&=-33,t===null){if(yt){if(h?Xr(s):Zr(),yt){var E=Wt,O;if(O=E){e:{for(O=E,E=Ns;O.nodeType!==8;){if(!E){E=null;break e}if(O=as(O.nextSibling),O===null){E=null;break e}}E=O}E!==null?(s.memoizedState={dehydrated:E,treeContext:Ha!==null?{id:fr,overflow:mr}:null,retryLane:536870912,hydrationErrors:null},O=bi(18,null,null,0),O.stateNode=E,O.return=s,s.child=O,Jn=s,Wt=null,O=!0):O=!1}O||Wa(s)}if(E=s.memoizedState,E!==null&&(E=E.dehydrated,E!==null))return em(E)?s.lanes=32:s.lanes=536870912,null;vr(s)}return E=l.children,l=l.fallback,h?(Zr(),h=s.mode,E=Lu({mode:"hidden",children:E},h),l=Fa(l,h,a,null),E.return=s,l.return=s,E.sibling=l,s.child=E,h=s.child,h.memoizedState=gf(a),h.childLanes=yf(t,_,a),s.memoizedState=pf,l):(Xr(s),vf(s,E))}if(O=t.memoizedState,O!==null&&(E=O.dehydrated,E!==null)){if(m)s.flags&256?(Xr(s),s.flags&=-257,s=bf(t,s,a)):s.memoizedState!==null?(Zr(),s.child=t.child,s.flags|=128,s=null):(Zr(),h=l.fallback,E=s.mode,l=Lu({mode:"visible",children:l.children},E),h=Fa(h,E,a,null),h.flags|=2,l.return=s,h.return=s,l.sibling=h,s.child=l,Ho(s,t.child,null,a),l=s.child,l.memoizedState=gf(a),l.childLanes=yf(t,_,a),s.memoizedState=pf,s=h);else if(Xr(s),em(E)){if(_=E.nextSibling&&E.nextSibling.dataset,_)var Q=_.dgst;_=Q,l=Error(r(419)),l.stack="",l.digest=_,Ml({value:l,source:null,stack:null}),s=bf(t,s,a)}else if(xn||Ll(t,s,a,!1),_=(a&t.childLanes)!==0,xn||_){if(_=Nt,_!==null&&(l=a&-a,l=(l&42)!==0?1:Le(l),l=(l&(_.suspendedLanes|a))!==0?0:l,l!==0&&l!==O.retryLane))throw O.retryLane=l,jo(t,l),Ei(_,t,l),z0;E.data==="$?"||Vf(),s=bf(t,s,a)}else E.data==="$?"?(s.flags|=192,s.child=t.child,s=null):(t=O.treeContext,Wt=as(E.nextSibling),Jn=s,yt=!0,Ga=null,Ns=!1,t!==null&&(Vi[Pi++]=fr,Vi[Pi++]=mr,Vi[Pi++]=Ha,fr=t.id,mr=t.overflow,Ha=s),s=vf(s,l.children),s.flags|=4096);return s}return h?(Zr(),h=l.fallback,E=s.mode,O=t.child,Q=O.sibling,l=hr(O,{mode:"hidden",children:l.children}),l.subtreeFlags=O.subtreeFlags&65011712,Q!==null?h=hr(Q,h):(h=Fa(h,E,a,null),h.flags|=2),h.return=s,l.return=s,l.sibling=h,s.child=l,l=h,h=s.child,E=t.child.memoizedState,E===null?E=gf(a):(O=E.cachePool,O!==null?(Q=fn._currentValue,O=O.parent!==Q?{parent:Q,pool:Q}:O):O=Lg(),E={baseLanes:E.baseLanes|a,cachePool:O}),h.memoizedState=E,h.childLanes=yf(t,_,a),s.memoizedState=pf,l):(Xr(s),a=t.child,t=a.sibling,a=hr(a,{mode:"visible",children:l.children}),a.return=s,a.sibling=null,t!==null&&(_=s.deletions,_===null?(s.deletions=[t],s.flags|=16):_.push(t)),s.child=a,s.memoizedState=null,a)}function vf(t,s){return s=Lu({mode:"visible",children:s},t.mode),s.return=t,t.child=s}function Lu(t,s){return t=bi(22,t,null,s),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function bf(t,s,a){return Ho(s,t.child,null,a),t=vf(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function Q0(t,s,a){t.lanes|=s;var l=t.alternate;l!==null&&(l.lanes|=s),Lh(t.return,s,a)}function _f(t,s,a,l,h){var m=t.memoizedState;m===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h}:(m.isBackwards=s,m.rendering=null,m.renderingStartTime=0,m.last=l,m.tail=a,m.tailMode=h)}function $0(t,s,a){var l=s.pendingProps,h=l.revealOrder,m=l.tail;if(jn(t,s,l.children,a),l=mn.current,(l&2)!==0)l=l&1|2,s.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Q0(t,a,s);else if(t.tag===19)Q0(t,a,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch(ee(mn,l),h){case"forwards":for(a=s.child,h=null;a!==null;)t=a.alternate,t!==null&&ju(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=s.child,s.child=null):(h=a.sibling,a.sibling=null),_f(s,!1,h,a,m);break;case"backwards":for(a=null,h=s.child,s.child=null;h!==null;){if(t=h.alternate,t!==null&&ju(t)===null){s.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}_f(s,!0,a,null,m);break;case"together":_f(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function br(t,s,a){if(t!==null&&(s.dependencies=t.dependencies),Jr|=s.lanes,(a&s.childLanes)===0)if(t!==null){if(Ll(t,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(t!==null&&s.child!==t.child)throw Error(r(153));if(s.child!==null){for(t=s.child,a=hr(t,t.pendingProps),s.child=a,a.return=s;t.sibling!==null;)t=t.sibling,a=a.sibling=hr(t,t.pendingProps),a.return=s;a.sibling=null}return s.child}function xf(t,s){return(t.lanes&s)!==0?!0:(t=t.dependencies,!!(t!==null&&gu(t)))}function iw(t,s,a){switch(s.tag){case 3:vt(s,s.stateNode.containerInfo),Fr(s,fn,t.memoizedState.cache),Ol();break;case 27:case 5:Un(s);break;case 4:vt(s,s.stateNode.containerInfo);break;case 10:Fr(s,s.type,s.memoizedProps.value);break;case 13:var l=s.memoizedState;if(l!==null)return l.dehydrated!==null?(Xr(s),s.flags|=128,null):(a&s.child.childLanes)!==0?Y0(t,s,a):(Xr(s),t=br(t,s,a),t!==null?t.sibling:null);Xr(s);break;case 19:var h=(t.flags&128)!==0;if(l=(a&s.childLanes)!==0,l||(Ll(t,s,a,!1),l=(a&s.childLanes)!==0),h){if(l)return $0(t,s,a);s.flags|=128}if(h=s.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),ee(mn,mn.current),l)break;return null;case 22:case 23:return s.lanes=0,G0(t,s,a);case 24:Fr(s,fn,t.memoizedState.cache)}return br(t,s,a)}function J0(t,s,a){if(t!==null)if(t.memoizedProps!==s.pendingProps)xn=!0;else{if(!xf(t,a)&&(s.flags&128)===0)return xn=!1,iw(t,s,a);xn=(t.flags&131072)!==0}else xn=!1,yt&&(s.flags&1048576)!==0&&Ig(s,pu,s.index);switch(s.lanes=0,s.tag){case 16:e:{t=s.pendingProps;var l=s.elementType,h=l._init;if(l=h(l._payload),s.type=l,typeof l=="function")Ih(l)?(t=Qa(l,t),s.tag=1,s=Z0(null,s,l,t,a)):(s.tag=0,s=mf(null,s,l,t,a));else{if(l!=null){if(h=l.$$typeof,h===me){s.tag=11,s=F0(null,s,l,t,a);break e}else if(h===M){s.tag=14,s=H0(null,s,l,t,a);break e}}throw s=Fe(l)||l,Error(r(306,s,""))}}return s;case 0:return mf(t,s,s.type,s.pendingProps,a);case 1:return l=s.type,h=Qa(l,s.pendingProps),Z0(t,s,l,h,a);case 3:e:{if(vt(s,s.stateNode.containerInfo),t===null)throw Error(r(387));l=s.pendingProps;var m=s.memoizedState;h=m.element,Hh(t,s),Hl(s,l,null,a);var _=s.memoizedState;if(l=_.cache,Fr(s,fn,l),l!==m.cache&&Vh(s,[fn],a,!0),Fl(),l=_.element,m.isDehydrated)if(m={element:l,isDehydrated:!1,cache:_.cache},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){s=K0(t,s,l,a);break e}else if(l!==h){h=Mi(Error(r(424)),s),Ml(h),s=K0(t,s,l,a);break e}else{switch(t=s.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Wt=as(t.firstChild),Jn=s,yt=!0,Ga=null,Ns=!0,a=N0(s,null,l,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Ol(),l===h){s=br(t,s,a);break e}jn(t,s,l,a)}s=s.child}return s;case 26:return Mu(t,s),t===null?(a=iv(s.type,null,s.pendingProps,null))?s.memoizedState=a:yt||(a=s.type,t=s.pendingProps,l=Yu(Te.current).createElement(a),l[Yt]=s,l[qt]=t,On(l,a,t),Mt(l),s.stateNode=l):s.memoizedState=iv(s.type,t.memoizedProps,s.pendingProps,t.memoizedState),null;case 27:return Un(s),t===null&&yt&&(l=s.stateNode=ev(s.type,s.pendingProps,Te.current),Jn=s,Ns=!0,h=Wt,ia(s.type)?(tm=h,Wt=as(l.firstChild)):Wt=h),jn(t,s,s.pendingProps.children,a),Mu(t,s),t===null&&(s.flags|=4194304),s.child;case 5:return t===null&&yt&&((h=l=Wt)&&(l=Nw(l,s.type,s.pendingProps,Ns),l!==null?(s.stateNode=l,Jn=s,Wt=as(l.firstChild),Ns=!1,h=!0):h=!1),h||Wa(s)),Un(s),h=s.type,m=s.pendingProps,_=t!==null?t.memoizedProps:null,l=m.children,Qf(h,m)?l=null:_!==null&&Qf(h,_)&&(s.flags|=32),s.memoizedState!==null&&(h=Kh(t,s,K2,null,null,a),dc._currentValue=h),Mu(t,s),jn(t,s,l,a),s.child;case 6:return t===null&&yt&&((t=a=Wt)&&(a=jw(a,s.pendingProps,Ns),a!==null?(s.stateNode=a,Jn=s,Wt=null,t=!0):t=!1),t||Wa(s)),null;case 13:return Y0(t,s,a);case 4:return vt(s,s.stateNode.containerInfo),l=s.pendingProps,t===null?s.child=Ho(s,null,l,a):jn(t,s,l,a),s.child;case 11:return F0(t,s,s.type,s.pendingProps,a);case 7:return jn(t,s,s.pendingProps,a),s.child;case 8:return jn(t,s,s.pendingProps.children,a),s.child;case 12:return jn(t,s,s.pendingProps.children,a),s.child;case 10:return l=s.pendingProps,Fr(s,s.type,l.value),jn(t,s,l.children,a),s.child;case 9:return h=s.type._context,l=s.pendingProps.children,Za(s),h=Fn(h),l=l(h),s.flags|=1,jn(t,s,l,a),s.child;case 14:return H0(t,s,s.type,s.pendingProps,a);case 15:return q0(t,s,s.type,s.pendingProps,a);case 19:return $0(t,s,a);case 31:return l=s.pendingProps,a=s.mode,l={mode:l.mode,children:l.children},t===null?(a=Lu(l,a),a.ref=s.ref,s.child=a,a.return=s,s=a):(a=hr(t.child,l),a.ref=s.ref,s.child=a,a.return=s,s=a),s;case 22:return G0(t,s,a);case 24:return Za(s),l=Fn(fn),t===null?(h=Bh(),h===null&&(h=Nt,m=Ph(),h.pooledCache=m,m.refCount++,m!==null&&(h.pooledCacheLanes|=a),h=m),s.memoizedState={parent:l,cache:h},Fh(s),Fr(s,fn,h)):((t.lanes&a)!==0&&(Hh(t,s),Hl(s,null,null,a),Fl()),h=t.memoizedState,m=s.memoizedState,h.parent!==l?(h={parent:l,cache:l},s.memoizedState=h,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=h),Fr(s,fn,l)):(l=m.cache,Fr(s,fn,l),l!==h.cache&&Vh(s,[fn],a,!0))),jn(t,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function _r(t){t.flags|=4}function ey(t,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!lv(s)){if(s=Ui.current,s!==null&&((dt&4194048)===dt?js!==null:(dt&62914560)!==dt&&(dt&536870912)===0||s!==js))throw Bl=zh,Vg;t.flags|=8192}}function Vu(t,s){s!==null&&(t.flags|=4),t.flags&16384&&(s=t.tag!==22?Da():536870912,t.lanes|=s,Xo|=s)}function Yl(t,s){if(!yt)switch(t.tailMode){case"hidden":s=t.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function Ut(t){var s=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(s)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,s}function sw(t,s,a){var l=s.pendingProps;switch(Dh(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ut(s),null;case 1:return Ut(s),null;case 3:return a=s.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),gr(fn),ti(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Dl(s)?_r(s):t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,jg())),Ut(s),null;case 26:return a=s.memoizedState,t===null?(_r(s),a!==null?(Ut(s),ey(s,a)):(Ut(s),s.flags&=-16777217)):a?a!==t.memoizedState?(_r(s),Ut(s),ey(s,a)):(Ut(s),s.flags&=-16777217):(t.memoizedProps!==l&&_r(s),Ut(s),s.flags&=-16777217),null;case 27:yn(s),a=Te.current;var h=s.type;if(t!==null&&s.stateNode!=null)t.memoizedProps!==l&&_r(s);else{if(!l){if(s.stateNode===null)throw Error(r(166));return Ut(s),null}t=_e.current,Dl(s)?kg(s):(t=ev(h,l,a),s.stateNode=t,_r(s))}return Ut(s),null;case 5:if(yn(s),a=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==l&&_r(s);else{if(!l){if(s.stateNode===null)throw Error(r(166));return Ut(s),null}if(t=_e.current,Dl(s))kg(s);else{switch(h=Yu(Te.current),t){case 1:t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=h.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?h.createElement("select",{is:l.is}):h.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?h.createElement(a,{is:l.is}):h.createElement(a)}}t[Yt]=s,t[qt]=l;e:for(h=s.child;h!==null;){if(h.tag===5||h.tag===6)t.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===s)break e;for(;h.sibling===null;){if(h.return===null||h.return===s)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}s.stateNode=t;e:switch(On(t,a,l),a){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&_r(s)}}return Ut(s),s.flags&=-16777217,null;case 6:if(t&&s.stateNode!=null)t.memoizedProps!==l&&_r(s);else{if(typeof l!="string"&&s.stateNode===null)throw Error(r(166));if(t=Te.current,Dl(s)){if(t=s.stateNode,a=s.memoizedProps,l=null,h=Jn,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[Yt]=s,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Xy(t.nodeValue,a)),t||Wa(s)}else t=Yu(t).createTextNode(l),t[Yt]=s,s.stateNode=t}return Ut(s),null;case 13:if(l=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=Dl(s),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(r(318));if(h=s.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));h[Yt]=s}else Ol(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Ut(s),h=!1}else h=jg(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return s.flags&256?(vr(s),s):(vr(s),null)}if(vr(s),(s.flags&128)!==0)return s.lanes=a,s;if(a=l!==null,t=t!==null&&t.memoizedState!==null,a){l=s.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool);var m=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==h&&(l.flags|=2048)}return a!==t&&a&&(s.child.flags|=8192),Vu(s,s.updateQueue),Ut(s),null;case 4:return ti(),t===null&&Wf(s.stateNode.containerInfo),Ut(s),null;case 10:return gr(s.type),Ut(s),null;case 19:if(oe(mn),h=s.memoizedState,h===null)return Ut(s),null;if(l=(s.flags&128)!==0,m=h.rendering,m===null)if(l)Yl(h,!1);else{if(Xt!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(m=ju(t),m!==null){for(s.flags|=128,Yl(h,!1),t=m.updateQueue,s.updateQueue=t,Vu(s,t),s.subtreeFlags=0,t=a,a=s.child;a!==null;)Cg(a,t),a=a.sibling;return ee(mn,mn.current&1|2),s.child}t=t.sibling}h.tail!==null&&ke()>Bu&&(s.flags|=128,l=!0,Yl(h,!1),s.lanes=4194304)}else{if(!l)if(t=ju(m),t!==null){if(s.flags|=128,l=!0,t=t.updateQueue,s.updateQueue=t,Vu(s,t),Yl(h,!0),h.tail===null&&h.tailMode==="hidden"&&!m.alternate&&!yt)return Ut(s),null}else 2*ke()-h.renderingStartTime>Bu&&a!==536870912&&(s.flags|=128,l=!0,Yl(h,!1),s.lanes=4194304);h.isBackwards?(m.sibling=s.child,s.child=m):(t=h.last,t!==null?t.sibling=m:s.child=m,h.last=m)}return h.tail!==null?(s=h.tail,h.rendering=s,h.tail=s.sibling,h.renderingStartTime=ke(),s.sibling=null,t=mn.current,ee(mn,l?t&1|2:t&1),s):(Ut(s),null);case 22:case 23:return vr(s),Xh(),l=s.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(s.flags|=8192):l&&(s.flags|=8192),l?(a&536870912)!==0&&(s.flags&128)===0&&(Ut(s),s.subtreeFlags&6&&(s.flags|=8192)):Ut(s),a=s.updateQueue,a!==null&&Vu(s,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),l!==a&&(s.flags|=2048),t!==null&&oe(Ka),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),gr(fn),Ut(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function rw(t,s){switch(Dh(s),s.tag){case 1:return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return gr(fn),ti(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 26:case 27:case 5:return yn(s),null;case 13:if(vr(s),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(r(340));Ol()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return oe(mn),null;case 4:return ti(),null;case 10:return gr(s.type),null;case 22:case 23:return vr(s),Xh(),t!==null&&oe(Ka),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 24:return gr(fn),null;case 25:return null;default:return null}}function ty(t,s){switch(Dh(s),s.tag){case 3:gr(fn),ti();break;case 26:case 27:case 5:yn(s);break;case 4:ti();break;case 13:vr(s);break;case 19:oe(mn);break;case 10:gr(s.type);break;case 22:case 23:vr(s),Xh(),t!==null&&oe(Ka);break;case 24:gr(fn)}}function Ql(t,s){try{var a=s.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var m=a.create,_=a.inst;l=m(),_.destroy=l}a=a.next}while(a!==h)}}catch(E){It(s,s.return,E)}}function Kr(t,s,a){try{var l=s.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var m=h.next;l=m;do{if((l.tag&t)===t){var _=l.inst,E=_.destroy;if(E!==void 0){_.destroy=void 0,h=s;var O=a,Q=E;try{Q()}catch(le){It(h,O,le)}}}l=l.next}while(l!==m)}}catch(le){It(s,s.return,le)}}function ny(t){var s=t.updateQueue;if(s!==null){var a=t.stateNode;try{Hg(s,a)}catch(l){It(t,t.return,l)}}}function iy(t,s,a){a.props=Qa(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){It(t,s,l)}}function $l(t,s){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(h){It(t,s,h)}}function Ds(t,s){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){It(t,s,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){It(t,s,h)}else a.current=null}function sy(t){var s=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){It(t,t.return,h)}}function wf(t,s,a){try{var l=t.stateNode;Tw(l,t.type,a,s),l[qt]=s}catch(h){It(t,t.return,h)}}function ry(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&ia(t.type)||t.tag===4}function Sf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ry(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&ia(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ef(t,s,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(t),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Ku));else if(l!==4&&(l===27&&ia(t.type)&&(a=t.stateNode,s=null),t=t.child,t!==null))for(Ef(t,s,a),t=t.sibling;t!==null;)Ef(t,s,a),t=t.sibling}function Pu(t,s,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,s?a.insertBefore(t,s):a.appendChild(t);else if(l!==4&&(l===27&&ia(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Pu(t,s,a),t=t.sibling;t!==null;)Pu(t,s,a),t=t.sibling}function ay(t){var s=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,h=s.attributes;h.length;)s.removeAttributeNode(h[0]);On(s,l,a),s[Yt]=t,s[qt]=a}catch(m){It(t,t.return,m)}}var xr=!1,$t=!1,Af=!1,oy=typeof WeakSet=="function"?WeakSet:Set,wn=null;function aw(t,s){if(t=t.containerInfo,Kf=nd,t=vg(t),wh(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,m=l.focusNode;l=l.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var _=0,E=-1,O=-1,Q=0,le=0,ue=t,te=null;t:for(;;){for(var ne;ue!==a||h!==0&&ue.nodeType!==3||(E=_+h),ue!==m||l!==0&&ue.nodeType!==3||(O=_+l),ue.nodeType===3&&(_+=ue.nodeValue.length),(ne=ue.firstChild)!==null;)te=ue,ue=ne;for(;;){if(ue===t)break t;if(te===a&&++Q===h&&(E=_),te===m&&++le===l&&(O=_),(ne=ue.nextSibling)!==null)break;ue=te,te=ue.parentNode}ue=ne}a=E===-1||O===-1?null:{start:E,end:O}}else a=null}a=a||{start:0,end:0}}else a=null;for(Yf={focusedElem:t,selectionRange:a},nd=!1,wn=s;wn!==null;)if(s=wn,t=s.child,(s.subtreeFlags&1024)!==0&&t!==null)t.return=s,wn=t;else for(;wn!==null;){switch(s=wn,m=s.alternate,t=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,a=s,h=m.memoizedProps,m=m.memoizedState,l=a.stateNode;try{var Be=Qa(a.type,h,a.elementType===a.type);t=l.getSnapshotBeforeUpdate(Be,m),l.__reactInternalSnapshotBeforeUpdate=t}catch(Me){It(a,a.return,Me)}}break;case 3:if((t&1024)!==0){if(t=s.stateNode.containerInfo,a=t.nodeType,a===9)Jf(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Jf(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(r(163))}if(t=s.sibling,t!==null){t.return=s.return,wn=t;break}wn=s.return}}function ly(t,s,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Yr(t,a),l&4&&Ql(5,a);break;case 1:if(Yr(t,a),l&4)if(t=a.stateNode,s===null)try{t.componentDidMount()}catch(_){It(a,a.return,_)}else{var h=Qa(a.type,s.memoizedProps);s=s.memoizedState;try{t.componentDidUpdate(h,s,t.__reactInternalSnapshotBeforeUpdate)}catch(_){It(a,a.return,_)}}l&64&&ny(a),l&512&&$l(a,a.return);break;case 3:if(Yr(t,a),l&64&&(t=a.updateQueue,t!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{Hg(t,s)}catch(_){It(a,a.return,_)}}break;case 27:s===null&&l&4&&ay(a);case 26:case 5:Yr(t,a),s===null&&l&4&&sy(a),l&512&&$l(a,a.return);break;case 12:Yr(t,a);break;case 13:Yr(t,a),l&4&&dy(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=pw.bind(null,a),Dw(t,a))));break;case 22:if(l=a.memoizedState!==null||xr,!l){s=s!==null&&s.memoizedState!==null||$t,h=xr;var m=$t;xr=l,($t=s)&&!m?Qr(t,a,(a.subtreeFlags&8772)!==0):Yr(t,a),xr=h,$t=m}break;case 30:break;default:Yr(t,a)}}function cy(t){var s=t.alternate;s!==null&&(t.alternate=null,cy(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&_s(s)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Lt=null,oi=!1;function wr(t,s,a){for(a=a.child;a!==null;)uy(t,s,a),a=a.sibling}function uy(t,s,a){if(nt&&typeof nt.onCommitFiberUnmount=="function")try{nt.onCommitFiberUnmount(kt,a)}catch{}switch(a.tag){case 26:$t||Ds(a,s),wr(t,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:$t||Ds(a,s);var l=Lt,h=oi;ia(a.type)&&(Lt=a.stateNode,oi=!1),wr(t,s,a),oc(a.stateNode),Lt=l,oi=h;break;case 5:$t||Ds(a,s);case 6:if(l=Lt,h=oi,Lt=null,wr(t,s,a),Lt=l,oi=h,Lt!==null)if(oi)try{(Lt.nodeType===9?Lt.body:Lt.nodeName==="HTML"?Lt.ownerDocument.body:Lt).removeChild(a.stateNode)}catch(m){It(a,s,m)}else try{Lt.removeChild(a.stateNode)}catch(m){It(a,s,m)}break;case 18:Lt!==null&&(oi?(t=Lt,$y(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),pc(t)):$y(Lt,a.stateNode));break;case 4:l=Lt,h=oi,Lt=a.stateNode.containerInfo,oi=!0,wr(t,s,a),Lt=l,oi=h;break;case 0:case 11:case 14:case 15:$t||Kr(2,a,s),$t||Kr(4,a,s),wr(t,s,a);break;case 1:$t||(Ds(a,s),l=a.stateNode,typeof l.componentWillUnmount=="function"&&iy(a,s,l)),wr(t,s,a);break;case 21:wr(t,s,a);break;case 22:$t=(l=$t)||a.memoizedState!==null,wr(t,s,a),$t=l;break;default:wr(t,s,a)}}function dy(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{pc(t)}catch(a){It(s,s.return,a)}}function ow(t){switch(t.tag){case 13:case 19:var s=t.stateNode;return s===null&&(s=t.stateNode=new oy),s;case 22:return t=t.stateNode,s=t._retryCache,s===null&&(s=t._retryCache=new oy),s;default:throw Error(r(435,t.tag))}}function Tf(t,s){var a=ow(t);s.forEach(function(l){var h=gw.bind(null,t,l);a.has(l)||(a.add(l),l.then(h,h))})}function _i(t,s){var a=s.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],m=t,_=s,E=_;e:for(;E!==null;){switch(E.tag){case 27:if(ia(E.type)){Lt=E.stateNode,oi=!1;break e}break;case 5:Lt=E.stateNode,oi=!1;break e;case 3:case 4:Lt=E.stateNode.containerInfo,oi=!0;break e}E=E.return}if(Lt===null)throw Error(r(160));uy(m,_,h),Lt=null,oi=!1,m=h.alternate,m!==null&&(m.return=null),h.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)hy(s,t),s=s.sibling}var rs=null;function hy(t,s){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:_i(s,t),xi(t),l&4&&(Kr(3,t,t.return),Ql(3,t),Kr(5,t,t.return));break;case 1:_i(s,t),xi(t),l&512&&($t||a===null||Ds(a,a.return)),l&64&&xr&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=rs;if(_i(s,t),xi(t),l&512&&($t||a===null||Ds(a,a.return)),l&4){var m=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":m=h.getElementsByTagName("title")[0],(!m||m[bs]||m[Yt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=h.createElement(l),h.head.insertBefore(m,h.querySelector("head > title"))),On(m,l,a),m[Yt]=t,Mt(m),l=m;break e;case"link":var _=av("link","href",h).get(l+(a.href||""));if(_){for(var E=0;E<_.length;E++)if(m=_[E],m.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(E,1);break t}}m=h.createElement(l),On(m,l,a),h.head.appendChild(m);break;case"meta":if(_=av("meta","content",h).get(l+(a.content||""))){for(E=0;E<_.length;E++)if(m=_[E],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(E,1);break t}}m=h.createElement(l),On(m,l,a),h.head.appendChild(m);break;default:throw Error(r(468,l))}m[Yt]=t,Mt(m),l=m}t.stateNode=l}else ov(h,t.type,t.stateNode);else t.stateNode=rv(h,l,t.memoizedProps);else m!==l?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,l===null?ov(h,t.type,t.stateNode):rv(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&wf(t,t.memoizedProps,a.memoizedProps)}break;case 27:_i(s,t),xi(t),l&512&&($t||a===null||Ds(a,a.return)),a!==null&&l&4&&wf(t,t.memoizedProps,a.memoizedProps);break;case 5:if(_i(s,t),xi(t),l&512&&($t||a===null||Ds(a,a.return)),t.flags&32){h=t.stateNode;try{ln(h,"")}catch(ne){It(t,t.return,ne)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,wf(t,h,a!==null?a.memoizedProps:h)),l&1024&&(Af=!0);break;case 6:if(_i(s,t),xi(t),l&4){if(t.stateNode===null)throw Error(r(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(ne){It(t,t.return,ne)}}break;case 3:if(Ju=null,h=rs,rs=Qu(s.containerInfo),_i(s,t),rs=h,xi(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{pc(s.containerInfo)}catch(ne){It(t,t.return,ne)}Af&&(Af=!1,fy(t));break;case 4:l=rs,rs=Qu(t.stateNode.containerInfo),_i(s,t),xi(t),rs=l;break;case 12:_i(s,t),xi(t);break;case 13:_i(s,t),xi(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(jf=ke()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Tf(t,l)));break;case 22:h=t.memoizedState!==null;var O=a!==null&&a.memoizedState!==null,Q=xr,le=$t;if(xr=Q||h,$t=le||O,_i(s,t),$t=le,xr=Q,xi(t),l&8192)e:for(s=t.stateNode,s._visibility=h?s._visibility&-2:s._visibility|1,h&&(a===null||O||xr||$t||$a(t)),a=null,s=t;;){if(s.tag===5||s.tag===26){if(a===null){O=a=s;try{if(m=O.stateNode,h)_=m.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{E=O.stateNode;var ue=O.memoizedProps.style,te=ue!=null&&ue.hasOwnProperty("display")?ue.display:null;E.style.display=te==null||typeof te=="boolean"?"":(""+te).trim()}}catch(ne){It(O,O.return,ne)}}}else if(s.tag===6){if(a===null){O=s;try{O.stateNode.nodeValue=h?"":O.memoizedProps}catch(ne){It(O,O.return,ne)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===t)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Tf(t,a))));break;case 19:_i(s,t),xi(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Tf(t,l)));break;case 30:break;case 21:break;default:_i(s,t),xi(t)}}function xi(t){var s=t.flags;if(s&2){try{for(var a,l=t.return;l!==null;){if(ry(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var h=a.stateNode,m=Sf(t);Pu(t,m,h);break;case 5:var _=a.stateNode;a.flags&32&&(ln(_,""),a.flags&=-33);var E=Sf(t);Pu(t,E,_);break;case 3:case 4:var O=a.stateNode.containerInfo,Q=Sf(t);Ef(t,Q,O);break;default:throw Error(r(161))}}catch(le){It(t,t.return,le)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function fy(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var s=t;fy(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),t=t.sibling}}function Yr(t,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)ly(t,s.alternate,s),s=s.sibling}function $a(t){for(t=t.child;t!==null;){var s=t;switch(s.tag){case 0:case 11:case 14:case 15:Kr(4,s,s.return),$a(s);break;case 1:Ds(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&iy(s,s.return,a),$a(s);break;case 27:oc(s.stateNode);case 26:case 5:Ds(s,s.return),$a(s);break;case 22:s.memoizedState===null&&$a(s);break;case 30:$a(s);break;default:$a(s)}t=t.sibling}}function Qr(t,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var l=s.alternate,h=t,m=s,_=m.flags;switch(m.tag){case 0:case 11:case 15:Qr(h,m,a),Ql(4,m);break;case 1:if(Qr(h,m,a),l=m,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(Q){It(l,l.return,Q)}if(l=m,h=l.updateQueue,h!==null){var E=l.stateNode;try{var O=h.shared.hiddenCallbacks;if(O!==null)for(h.shared.hiddenCallbacks=null,h=0;h<O.length;h++)Fg(O[h],E)}catch(Q){It(l,l.return,Q)}}a&&_&64&&ny(m),$l(m,m.return);break;case 27:ay(m);case 26:case 5:Qr(h,m,a),a&&l===null&&_&4&&sy(m),$l(m,m.return);break;case 12:Qr(h,m,a);break;case 13:Qr(h,m,a),a&&_&4&&dy(h,m);break;case 22:m.memoizedState===null&&Qr(h,m,a),$l(m,m.return);break;case 30:break;default:Qr(h,m,a)}s=s.sibling}}function Rf(t,s){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(t=s.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&Vl(a))}function Cf(t,s){t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&Vl(t))}function Os(t,s,a,l){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)my(t,s,a,l),s=s.sibling}function my(t,s,a,l){var h=s.flags;switch(s.tag){case 0:case 11:case 15:Os(t,s,a,l),h&2048&&Ql(9,s);break;case 1:Os(t,s,a,l);break;case 3:Os(t,s,a,l),h&2048&&(t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&Vl(t)));break;case 12:if(h&2048){Os(t,s,a,l),t=s.stateNode;try{var m=s.memoizedProps,_=m.id,E=m.onPostCommit;typeof E=="function"&&E(_,s.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(O){It(s,s.return,O)}}else Os(t,s,a,l);break;case 13:Os(t,s,a,l);break;case 23:break;case 22:m=s.stateNode,_=s.alternate,s.memoizedState!==null?m._visibility&2?Os(t,s,a,l):Jl(t,s):m._visibility&2?Os(t,s,a,l):(m._visibility|=2,qo(t,s,a,l,(s.subtreeFlags&10256)!==0)),h&2048&&Rf(_,s);break;case 24:Os(t,s,a,l),h&2048&&Cf(s.alternate,s);break;default:Os(t,s,a,l)}}function qo(t,s,a,l,h){for(h=h&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var m=t,_=s,E=a,O=l,Q=_.flags;switch(_.tag){case 0:case 11:case 15:qo(m,_,E,O,h),Ql(8,_);break;case 23:break;case 22:var le=_.stateNode;_.memoizedState!==null?le._visibility&2?qo(m,_,E,O,h):Jl(m,_):(le._visibility|=2,qo(m,_,E,O,h)),h&&Q&2048&&Rf(_.alternate,_);break;case 24:qo(m,_,E,O,h),h&&Q&2048&&Cf(_.alternate,_);break;default:qo(m,_,E,O,h)}s=s.sibling}}function Jl(t,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=t,l=s,h=l.flags;switch(l.tag){case 22:Jl(a,l),h&2048&&Rf(l.alternate,l);break;case 24:Jl(a,l),h&2048&&Cf(l.alternate,l);break;default:Jl(a,l)}s=s.sibling}}var ec=8192;function Go(t){if(t.subtreeFlags&ec)for(t=t.child;t!==null;)py(t),t=t.sibling}function py(t){switch(t.tag){case 26:Go(t),t.flags&ec&&t.memoizedState!==null&&Ww(rs,t.memoizedState,t.memoizedProps);break;case 5:Go(t);break;case 3:case 4:var s=rs;rs=Qu(t.stateNode.containerInfo),Go(t),rs=s;break;case 22:t.memoizedState===null&&(s=t.alternate,s!==null&&s.memoizedState!==null?(s=ec,ec=16777216,Go(t),ec=s):Go(t));break;default:Go(t)}}function gy(t){var s=t.alternate;if(s!==null&&(t=s.child,t!==null)){s.child=null;do s=t.sibling,t.sibling=null,t=s;while(t!==null)}}function tc(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];wn=l,vy(l,t)}gy(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)yy(t),t=t.sibling}function yy(t){switch(t.tag){case 0:case 11:case 15:tc(t),t.flags&2048&&Kr(9,t,t.return);break;case 3:tc(t);break;case 12:tc(t);break;case 22:var s=t.stateNode;t.memoizedState!==null&&s._visibility&2&&(t.return===null||t.return.tag!==13)?(s._visibility&=-3,Uu(t)):tc(t);break;default:tc(t)}}function Uu(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];wn=l,vy(l,t)}gy(t)}for(t=t.child;t!==null;){switch(s=t,s.tag){case 0:case 11:case 15:Kr(8,s,s.return),Uu(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,Uu(s));break;default:Uu(s)}t=t.sibling}}function vy(t,s){for(;wn!==null;){var a=wn;switch(a.tag){case 0:case 11:case 15:Kr(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Vl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,wn=l;else e:for(a=t;wn!==null;){l=wn;var h=l.sibling,m=l.return;if(cy(l),l===a){wn=null;break e}if(h!==null){h.return=m,wn=h;break e}wn=m}}}var lw={getCacheForType:function(t){var s=Fn(fn),a=s.data.get(t);return a===void 0&&(a=t(),s.data.set(t,a)),a}},cw=typeof WeakMap=="function"?WeakMap:Map,xt=0,Nt=null,it=null,dt=0,wt=0,wi=null,$r=!1,Wo=!1,If=!1,Sr=0,Xt=0,Jr=0,Ja=0,kf=0,Bi=0,Xo=0,nc=null,li=null,Nf=!1,jf=0,Bu=1/0,zu=null,ea=null,Dn=0,ta=null,Zo=null,Ko=0,Df=0,Of=null,by=null,ic=0,Mf=null;function Si(){if((xt&2)!==0&&dt!==0)return dt&-dt;if(ae.T!==null){var t=Lo;return t!==0?t:Ff()}return ze()}function _y(){Bi===0&&(Bi=(dt&536870912)===0||yt?Qs():536870912);var t=Ui.current;return t!==null&&(t.flags|=32),Bi}function Ei(t,s,a){(t===Nt&&(wt===2||wt===9)||t.cancelPendingCommit!==null)&&(Yo(t,0),na(t,dt,Bi,!1)),Xi(t,a),((xt&2)===0||t!==Nt)&&(t===Nt&&((xt&2)===0&&(Ja|=a),Xt===4&&na(t,dt,Bi,!1)),Ms(t))}function xy(t,s,a){if((xt&6)!==0)throw Error(r(327));var l=!a&&(s&124)===0&&(s&t.expiredLanes)===0||vs(t,s),h=l?hw(t,s):Pf(t,s,!0),m=l;do{if(h===0){Wo&&!l&&na(t,s,0,!1);break}else{if(a=t.current.alternate,m&&!uw(a)){h=Pf(t,s,!1),m=!1;continue}if(h===2){if(m=s,t.errorRecoveryDisabledLanes&m)var _=0;else _=t.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){s=_;e:{var E=t;h=nc;var O=E.current.memoizedState.isDehydrated;if(O&&(Yo(E,_).flags|=256),_=Pf(E,_,!1),_!==2){if(If&&!O){E.errorRecoveryDisabledLanes|=m,Ja|=m,h=4;break e}m=li,li=h,m!==null&&(li===null?li=m:li.push.apply(li,m))}h=_}if(m=!1,h!==2)continue}}if(h===1){Yo(t,0),na(t,s,0,!0);break}e:{switch(l=t,m=h,m){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:na(l,s,Bi,!$r);break e;case 2:li=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(h=jf+300-ke(),10<h)){if(na(l,s,Bi,!$r),ys(l,0,!0)!==0)break e;l.timeoutHandle=Yy(wy.bind(null,l,a,li,zu,Nf,s,Bi,Ja,Xo,$r,m,2,-0,0),h);break e}wy(l,a,li,zu,Nf,s,Bi,Ja,Xo,$r,m,0,-0,0)}}break}while(!0);Ms(t)}function wy(t,s,a,l,h,m,_,E,O,Q,le,ue,te,ne){if(t.timeoutHandle=-1,ue=s.subtreeFlags,(ue&8192||(ue&16785408)===16785408)&&(uc={stylesheets:null,count:0,unsuspend:Gw},py(s),ue=Xw(),ue!==null)){t.cancelPendingCommit=ue(Iy.bind(null,t,s,m,a,l,h,_,E,O,le,1,te,ne)),na(t,m,_,!Q);return}Iy(t,s,m,a,l,h,_,E,O)}function uw(t){for(var s=t;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],m=h.getSnapshot;h=h.value;try{if(!vi(m(),h))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function na(t,s,a,l){s&=~kf,s&=~Ja,t.suspendedLanes|=s,t.pingedLanes&=~s,l&&(t.warmLanes|=s),l=t.expirationTimes;for(var h=s;0<h;){var m=31-vn(h),_=1<<m;l[m]=-1,h&=~_}a!==0&&Rn(t,a,s)}function Fu(){return(xt&6)===0?(sc(0),!1):!0}function Lf(){if(it!==null){if(wt===0)var t=it.return;else t=it,pr=Xa=null,$h(t),Fo=null,Zl=0,t=it;for(;t!==null;)ty(t.alternate,t),t=t.return;it=null}}function Yo(t,s){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,Cw(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Lf(),Nt=t,it=a=hr(t.current,null),dt=s,wt=0,wi=null,$r=!1,Wo=vs(t,s),If=!1,Xo=Bi=kf=Ja=Jr=Xt=0,li=nc=null,Nf=!1,(s&8)!==0&&(s|=s&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=s;0<l;){var h=31-vn(l),m=1<<h;s|=t[h],l&=~m}return Sr=s,uu(),a}function Sy(t,s){Ye=null,ae.H=Iu,s===Ul||s===bu?(s=Bg(),wt=3):s===Vg?(s=Bg(),wt=4):wt=s===z0?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,wi=s,it===null&&(Xt=1,Ou(t,Mi(s,t.current)))}function Ey(){var t=ae.H;return ae.H=Iu,t===null?Iu:t}function Ay(){var t=ae.A;return ae.A=lw,t}function Vf(){Xt=4,$r||(dt&4194048)!==dt&&Ui.current!==null||(Wo=!0),(Jr&134217727)===0&&(Ja&134217727)===0||Nt===null||na(Nt,dt,Bi,!1)}function Pf(t,s,a){var l=xt;xt|=2;var h=Ey(),m=Ay();(Nt!==t||dt!==s)&&(zu=null,Yo(t,s)),s=!1;var _=Xt;e:do try{if(wt!==0&&it!==null){var E=it,O=wi;switch(wt){case 8:Lf(),_=6;break e;case 3:case 2:case 9:case 6:Ui.current===null&&(s=!0);var Q=wt;if(wt=0,wi=null,Qo(t,E,O,Q),a&&Wo){_=0;break e}break;default:Q=wt,wt=0,wi=null,Qo(t,E,O,Q)}}dw(),_=Xt;break}catch(le){Sy(t,le)}while(!0);return s&&t.shellSuspendCounter++,pr=Xa=null,xt=l,ae.H=h,ae.A=m,it===null&&(Nt=null,dt=0,uu()),_}function dw(){for(;it!==null;)Ty(it)}function hw(t,s){var a=xt;xt|=2;var l=Ey(),h=Ay();Nt!==t||dt!==s?(zu=null,Bu=ke()+500,Yo(t,s)):Wo=vs(t,s);e:do try{if(wt!==0&&it!==null){s=it;var m=wi;t:switch(wt){case 1:wt=0,wi=null,Qo(t,s,m,1);break;case 2:case 9:if(Pg(m)){wt=0,wi=null,Ry(s);break}s=function(){wt!==2&&wt!==9||Nt!==t||(wt=7),Ms(t)},m.then(s,s);break e;case 3:wt=7;break e;case 4:wt=5;break e;case 7:Pg(m)?(wt=0,wi=null,Ry(s)):(wt=0,wi=null,Qo(t,s,m,7));break;case 5:var _=null;switch(it.tag){case 26:_=it.memoizedState;case 5:case 27:var E=it;if(!_||lv(_)){wt=0,wi=null;var O=E.sibling;if(O!==null)it=O;else{var Q=E.return;Q!==null?(it=Q,Hu(Q)):it=null}break t}}wt=0,wi=null,Qo(t,s,m,5);break;case 6:wt=0,wi=null,Qo(t,s,m,6);break;case 8:Lf(),Xt=6;break e;default:throw Error(r(462))}}fw();break}catch(le){Sy(t,le)}while(!0);return pr=Xa=null,ae.H=l,ae.A=h,xt=a,it!==null?0:(Nt=null,dt=0,uu(),Xt)}function fw(){for(;it!==null&&!Lr();)Ty(it)}function Ty(t){var s=J0(t.alternate,t,Sr);t.memoizedProps=t.pendingProps,s===null?Hu(t):it=s}function Ry(t){var s=t,a=s.alternate;switch(s.tag){case 15:case 0:s=X0(a,s,s.pendingProps,s.type,void 0,dt);break;case 11:s=X0(a,s,s.pendingProps,s.type.render,s.ref,dt);break;case 5:$h(s);default:ty(a,s),s=it=Cg(s,Sr),s=J0(a,s,Sr)}t.memoizedProps=t.pendingProps,s===null?Hu(t):it=s}function Qo(t,s,a,l){pr=Xa=null,$h(s),Fo=null,Zl=0;var h=s.return;try{if(nw(t,h,s,a,dt)){Xt=1,Ou(t,Mi(a,t.current)),it=null;return}}catch(m){if(h!==null)throw it=h,m;Xt=1,Ou(t,Mi(a,t.current)),it=null;return}s.flags&32768?(yt||l===1?t=!0:Wo||(dt&536870912)!==0?t=!1:($r=t=!0,(l===2||l===9||l===3||l===6)&&(l=Ui.current,l!==null&&l.tag===13&&(l.flags|=16384))),Cy(s,t)):Hu(s)}function Hu(t){var s=t;do{if((s.flags&32768)!==0){Cy(s,$r);return}t=s.return;var a=sw(s.alternate,s,Sr);if(a!==null){it=a;return}if(s=s.sibling,s!==null){it=s;return}it=s=t}while(s!==null);Xt===0&&(Xt=5)}function Cy(t,s){do{var a=rw(t.alternate,t);if(a!==null){a.flags&=32767,it=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(t=t.sibling,t!==null)){it=t;return}it=t=a}while(t!==null);Xt=6,it=null}function Iy(t,s,a,l,h,m,_,E,O){t.cancelPendingCommit=null;do qu();while(Dn!==0);if((xt&6)!==0)throw Error(r(327));if(s!==null){if(s===t.current)throw Error(r(177));if(m=s.lanes|s.childLanes,m|=Rh,$s(t,a,m,_,E,O),t===Nt&&(it=Nt=null,dt=0),Zo=s,ta=t,Ko=a,Df=m,Of=h,by=l,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,yw(we,function(){return Oy(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||l){l=ae.T,ae.T=null,h=he.p,he.p=2,_=xt,xt|=4;try{aw(t,s,a)}finally{xt=_,he.p=h,ae.T=l}}Dn=1,ky(),Ny(),jy()}}function ky(){if(Dn===1){Dn=0;var t=ta,s=Zo,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=ae.T,ae.T=null;var l=he.p;he.p=2;var h=xt;xt|=4;try{hy(s,t);var m=Yf,_=vg(t.containerInfo),E=m.focusedElem,O=m.selectionRange;if(_!==E&&E&&E.ownerDocument&&yg(E.ownerDocument.documentElement,E)){if(O!==null&&wh(E)){var Q=O.start,le=O.end;if(le===void 0&&(le=Q),"selectionStart"in E)E.selectionStart=Q,E.selectionEnd=Math.min(le,E.value.length);else{var ue=E.ownerDocument||document,te=ue&&ue.defaultView||window;if(te.getSelection){var ne=te.getSelection(),Be=E.textContent.length,Me=Math.min(O.start,Be),Tt=O.end===void 0?Me:Math.min(O.end,Be);!ne.extend&&Me>Tt&&(_=Tt,Tt=Me,Me=_);var W=gg(E,Me),H=gg(E,Tt);if(W&&H&&(ne.rangeCount!==1||ne.anchorNode!==W.node||ne.anchorOffset!==W.offset||ne.focusNode!==H.node||ne.focusOffset!==H.offset)){var Z=ue.createRange();Z.setStart(W.node,W.offset),ne.removeAllRanges(),Me>Tt?(ne.addRange(Z),ne.extend(H.node,H.offset)):(Z.setEnd(H.node,H.offset),ne.addRange(Z))}}}}for(ue=[],ne=E;ne=ne.parentNode;)ne.nodeType===1&&ue.push({element:ne,left:ne.scrollLeft,top:ne.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<ue.length;E++){var ce=ue[E];ce.element.scrollLeft=ce.left,ce.element.scrollTop=ce.top}}nd=!!Kf,Yf=Kf=null}finally{xt=h,he.p=l,ae.T=a}}t.current=s,Dn=2}}function Ny(){if(Dn===2){Dn=0;var t=ta,s=Zo,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=ae.T,ae.T=null;var l=he.p;he.p=2;var h=xt;xt|=4;try{ly(t,s.alternate,s)}finally{xt=h,he.p=l,ae.T=a}}Dn=3}}function jy(){if(Dn===4||Dn===3){Dn=0,ka();var t=ta,s=Zo,a=Ko,l=by;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Dn=5:(Dn=0,Zo=ta=null,Dy(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(ea=null),Vr(a),s=s.stateNode,nt&&typeof nt.onCommitFiberRoot=="function")try{nt.onCommitFiberRoot(kt,s,void 0,(s.current.flags&128)===128)}catch{}if(l!==null){s=ae.T,h=he.p,he.p=2,ae.T=null;try{for(var m=t.onRecoverableError,_=0;_<l.length;_++){var E=l[_];m(E.value,{componentStack:E.stack})}}finally{ae.T=s,he.p=h}}(Ko&3)!==0&&qu(),Ms(t),h=t.pendingLanes,(a&4194090)!==0&&(h&42)!==0?t===Mf?ic++:(ic=0,Mf=t):ic=0,sc(0)}}function Dy(t,s){(t.pooledCacheLanes&=s)===0&&(s=t.pooledCache,s!=null&&(t.pooledCache=null,Vl(s)))}function qu(t){return ky(),Ny(),jy(),Oy()}function Oy(){if(Dn!==5)return!1;var t=ta,s=Df;Df=0;var a=Vr(Ko),l=ae.T,h=he.p;try{he.p=32>a?32:a,ae.T=null,a=Of,Of=null;var m=ta,_=Ko;if(Dn=0,Zo=ta=null,Ko=0,(xt&6)!==0)throw Error(r(331));var E=xt;if(xt|=4,yy(m.current),my(m,m.current,_,a),xt=E,sc(0,!1),nt&&typeof nt.onPostCommitFiberRoot=="function")try{nt.onPostCommitFiberRoot(kt,m)}catch{}return!0}finally{he.p=h,ae.T=l,Dy(t,s)}}function My(t,s,a){s=Mi(a,s),s=ff(t.stateNode,s,2),t=Gr(t,s,2),t!==null&&(Xi(t,2),Ms(t))}function It(t,s,a){if(t.tag===3)My(t,t,a);else for(;s!==null;){if(s.tag===3){My(s,t,a);break}else if(s.tag===1){var l=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(ea===null||!ea.has(l))){t=Mi(a,t),a=U0(2),l=Gr(s,a,2),l!==null&&(B0(a,l,s,t),Xi(l,2),Ms(l));break}}s=s.return}}function Uf(t,s,a){var l=t.pingCache;if(l===null){l=t.pingCache=new cw;var h=new Set;l.set(s,h)}else h=l.get(s),h===void 0&&(h=new Set,l.set(s,h));h.has(a)||(If=!0,h.add(a),t=mw.bind(null,t,s,a),s.then(t,t))}function mw(t,s,a){var l=t.pingCache;l!==null&&l.delete(s),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,Nt===t&&(dt&a)===a&&(Xt===4||Xt===3&&(dt&62914560)===dt&&300>ke()-jf?(xt&2)===0&&Yo(t,0):kf|=a,Xo===dt&&(Xo=0)),Ms(t)}function Ly(t,s){s===0&&(s=Da()),t=jo(t,s),t!==null&&(Xi(t,s),Ms(t))}function pw(t){var s=t.memoizedState,a=0;s!==null&&(a=s.retryLane),Ly(t,a)}function gw(t,s){var a=0;switch(t.tag){case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(s),Ly(t,a)}function yw(t,s){return Ri(t,s)}var Gu=null,$o=null,Bf=!1,Wu=!1,zf=!1,eo=0;function Ms(t){t!==$o&&t.next===null&&($o===null?Gu=$o=t:$o=$o.next=t),Wu=!0,Bf||(Bf=!0,bw())}function sc(t,s){if(!zf&&Wu){zf=!0;do for(var a=!1,l=Gu;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var m=0;else{var _=l.suspendedLanes,E=l.pingedLanes;m=(1<<31-vn(42|t)+1)-1,m&=h&~(_&~E),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(a=!0,By(l,m))}else m=dt,m=ys(l,l===Nt?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(m&3)===0||vs(l,m)||(a=!0,By(l,m));l=l.next}while(a);zf=!1}}function vw(){Vy()}function Vy(){Wu=Bf=!1;var t=0;eo!==0&&(Rw()&&(t=eo),eo=0);for(var s=ke(),a=null,l=Gu;l!==null;){var h=l.next,m=Py(l,s);m===0?(l.next=null,a===null?Gu=h:a.next=h,h===null&&($o=a)):(a=l,(t!==0||(m&3)!==0)&&(Wu=!0)),l=h}sc(t)}function Py(t,s){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var _=31-vn(m),E=1<<_,O=h[_];O===-1?((E&a)===0||(E&l)!==0)&&(h[_]=ja(E,s)):O<=s&&(t.expiredLanes|=E),m&=~E}if(s=Nt,a=dt,a=ys(t,t===s?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===s&&(wt===2||wt===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&ps(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||vs(t,a)){if(s=a&-a,s===t.callbackPriority)return s;switch(l!==null&&ps(l),Vr(a)){case 2:case 8:a=Re;break;case 32:a=we;break;case 268435456:a=Ge;break;default:a=we}return l=Uy.bind(null,t),a=Ri(a,l),t.callbackPriority=s,t.callbackNode=a,s}return l!==null&&l!==null&&ps(l),t.callbackPriority=2,t.callbackNode=null,2}function Uy(t,s){if(Dn!==0&&Dn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(qu()&&t.callbackNode!==a)return null;var l=dt;return l=ys(t,t===Nt?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(xy(t,l,s),Py(t,ke()),t.callbackNode!=null&&t.callbackNode===a?Uy.bind(null,t):null)}function By(t,s){if(qu())return null;xy(t,s,!0)}function bw(){Iw(function(){(xt&6)!==0?Ri(ve,vw):Vy()})}function Ff(){return eo===0&&(eo=Qs()),eo}function zy(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Ji(""+t)}function Fy(t,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,t.id&&a.setAttribute("form",t.id),s.parentNode.insertBefore(a,s),t=new FormData(t),a.parentNode.removeChild(a),t}function _w(t,s,a,l,h){if(s==="submit"&&a&&a.stateNode===h){var m=zy((h[qt]||null).action),_=l.submitter;_&&(s=(s=_[qt]||null)?zy(s.formAction):_.getAttribute("formAction"),s!==null&&(m=s,_=null));var E=new Cs("action","action",null,l,h);t.push({event:E,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(eo!==0){var O=_?Fy(h,_):new FormData(h);lf(a,{pending:!0,data:O,method:h.method,action:m},null,O)}}else typeof m=="function"&&(E.preventDefault(),O=_?Fy(h,_):new FormData(h),lf(a,{pending:!0,data:O,method:h.method,action:m},m,O))},currentTarget:h}]})}}for(var Hf=0;Hf<Th.length;Hf++){var qf=Th[Hf],xw=qf.toLowerCase(),ww=qf[0].toUpperCase()+qf.slice(1);ss(xw,"on"+ww)}ss(xg,"onAnimationEnd"),ss(wg,"onAnimationIteration"),ss(Sg,"onAnimationStart"),ss("dblclick","onDoubleClick"),ss("focusin","onFocus"),ss("focusout","onBlur"),ss(U2,"onTransitionRun"),ss(B2,"onTransitionStart"),ss(z2,"onTransitionCancel"),ss(Eg,"onTransitionEnd"),si("onMouseEnter",["mouseout","mouseover"]),si("onMouseLeave",["mouseout","mouseover"]),si("onPointerEnter",["pointerout","pointerover"]),si("onPointerLeave",["pointerout","pointerover"]),hi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),hi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),hi("onBeforeInput",["compositionend","keypress","textInput","paste"]),hi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),hi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),hi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var rc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Sw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(rc));function Hy(t,s){s=(s&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var m=void 0;if(s)for(var _=l.length-1;0<=_;_--){var E=l[_],O=E.instance,Q=E.currentTarget;if(E=E.listener,O!==m&&h.isPropagationStopped())break e;m=E,h.currentTarget=Q;try{m(h)}catch(le){Du(le)}h.currentTarget=null,m=O}else for(_=0;_<l.length;_++){if(E=l[_],O=E.instance,Q=E.currentTarget,E=E.listener,O!==m&&h.isPropagationStopped())break e;m=E,h.currentTarget=Q;try{m(h)}catch(le){Du(le)}h.currentTarget=null,m=O}}}}function st(t,s){var a=s[Oa];a===void 0&&(a=s[Oa]=new Set);var l=t+"__bubble";a.has(l)||(qy(s,t,2,!1),a.add(l))}function Gf(t,s,a){var l=0;s&&(l|=4),qy(a,t,l,s)}var Xu="_reactListening"+Math.random().toString(36).slice(2);function Wf(t){if(!t[Xu]){t[Xu]=!0,Ii.forEach(function(a){a!=="selectionchange"&&(Sw.has(a)||Gf(a,!1,t),Gf(a,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[Xu]||(s[Xu]=!0,Gf("selectionchange",!1,s))}}function qy(t,s,a,l){switch(mv(s)){case 2:var h=Yw;break;case 8:h=Qw;break;default:h=am}a=h.bind(null,s,a,t),h=void 0,!Kn||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(s,a,{capture:!0,passive:h}):t.addEventListener(s,a,!0):h!==void 0?t.addEventListener(s,a,{passive:h}):t.addEventListener(s,a,!1)}function Xf(t,s,a,l,h){var m=l;if((s&1)===0&&(s&2)===0&&l!==null)e:for(;;){if(l===null)return;var _=l.tag;if(_===3||_===4){var E=l.stateNode.containerInfo;if(E===h)break;if(_===4)for(_=l.return;_!==null;){var O=_.tag;if((O===3||O===4)&&_.stateNode.containerInfo===h)return;_=_.return}for(;E!==null;){if(_=Ki(E),_===null)return;if(O=_.tag,O===5||O===6||O===26||O===27){l=m=_;continue e}E=E.parentNode}}l=l.return}ar(function(){var Q=m,le=kn(a),ue=[];e:{var te=Ag.get(t);if(te!==void 0){var ne=Cs,Be=t;switch(t){case"keypress":if(Qn(a)===0)break e;case"keydown":case"keyup":ne=Ze;break;case"focusin":Be="focus",ne=cr;break;case"focusout":Be="blur",ne=cr;break;case"beforeblur":case"afterblur":ne=cr;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ne=$n;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ne=Il;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ne=un;break;case xg:case wg:case Sg:ne=ur;break;case Eg:ne=Di;break;case"scroll":case"scrollend":ne=Ro;break;case"wheel":ne=ri;break;case"copy":case"cut":case"paste":ne=k;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ne=Rt;break;case"toggle":case"beforetoggle":ne=yi}var Me=(s&4)!==0,Tt=!Me&&(t==="scroll"||t==="scrollend"),W=Me?te!==null?te+"Capture":null:te;Me=[];for(var H=Q,Z;H!==null;){var ce=H;if(Z=ce.stateNode,ce=ce.tag,ce!==5&&ce!==26&&ce!==27||Z===null||W===null||(ce=Ts(H,W),ce!=null&&Me.push(ac(H,ce,Z))),Tt)break;H=H.return}0<Me.length&&(te=new ne(te,Be,null,a,le),ue.push({event:te,listeners:Me}))}}if((s&7)===0){e:{if(te=t==="mouseover"||t==="pointerover",ne=t==="mouseout"||t==="pointerout",te&&a!==Es&&(Be=a.relatedTarget||a.fromElement)&&(Ki(Be)||Be[Bn]))break e;if((ne||te)&&(te=le.window===le?le:(te=le.ownerDocument)?te.defaultView||te.parentWindow:window,ne?(Be=a.relatedTarget||a.toElement,ne=Q,Be=Be?Ki(Be):null,Be!==null&&(Tt=c(Be),Me=Be.tag,Be!==Tt||Me!==5&&Me!==27&&Me!==6)&&(Be=null)):(ne=null,Be=Q),ne!==Be)){if(Me=$n,ce="onMouseLeave",W="onMouseEnter",H="mouse",(t==="pointerout"||t==="pointerover")&&(Me=Rt,ce="onPointerLeave",W="onPointerEnter",H="pointer"),Tt=ne==null?te:ii(ne),Z=Be==null?te:ii(Be),te=new Me(ce,H+"leave",ne,a,le),te.target=Tt,te.relatedTarget=Z,ce=null,Ki(le)===Q&&(Me=new Me(W,H+"enter",Be,a,le),Me.target=Z,Me.relatedTarget=Tt,ce=Me),Tt=ce,ne&&Be)t:{for(Me=ne,W=Be,H=0,Z=Me;Z;Z=Jo(Z))H++;for(Z=0,ce=W;ce;ce=Jo(ce))Z++;for(;0<H-Z;)Me=Jo(Me),H--;for(;0<Z-H;)W=Jo(W),Z--;for(;H--;){if(Me===W||W!==null&&Me===W.alternate)break t;Me=Jo(Me),W=Jo(W)}Me=null}else Me=null;ne!==null&&Gy(ue,te,ne,Me,!1),Be!==null&&Tt!==null&&Gy(ue,Tt,Be,Me,!0)}}e:{if(te=Q?ii(Q):window,ne=te.nodeName&&te.nodeName.toLowerCase(),ne==="select"||ne==="input"&&te.type==="file")var Ce=ug;else if(hn(te))if(dg)Ce=L2;else{Ce=O2;var et=D2}else ne=te.nodeName,!ne||ne.toLowerCase()!=="input"||te.type!=="checkbox"&&te.type!=="radio"?Q&&Ua(Q.elementType)&&(Ce=ug):Ce=M2;if(Ce&&(Ce=Ce(t,Q))){dr(ue,Ce,a,le);break e}et&&et(t,te,Q),t==="focusout"&&Q&&te.type==="number"&&Q.memoizedProps.value!=null&&Qi(te,"number",te.value)}switch(et=Q?ii(Q):window,t){case"focusin":(hn(et)||et.contentEditable==="true")&&(Io=et,Sh=Q,jl=null);break;case"focusout":jl=Sh=Io=null;break;case"mousedown":Eh=!0;break;case"contextmenu":case"mouseup":case"dragend":Eh=!1,bg(ue,a,le);break;case"selectionchange":if(P2)break;case"keydown":case"keyup":bg(ue,a,le)}var Ne;if(bt)e:{switch(t){case"compositionstart":var Ve="onCompositionStart";break e;case"compositionend":Ve="onCompositionEnd";break e;case"compositionupdate":Ve="onCompositionUpdate";break e}Ve=void 0}else ct?re(t,a)&&(Ve="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Ve="onCompositionStart");Ve&&(b&&a.locale!=="ko"&&(ct||Ve!=="onCompositionStart"?Ve==="onCompositionEnd"&&ct&&(Ne=Rs()):(Yn=le,cn="value"in Yn?Yn.value:Yn.textContent,ct=!0)),et=Zu(Q,Ve),0<et.length&&(Ve=new V(Ve,t,null,a,le),ue.push({event:Ve,listeners:et}),Ne?Ve.data=Ne:(Ne=xe(a),Ne!==null&&(Ve.data=Ne)))),(Ne=v?dn(t,a):ut(t,a))&&(Ve=Zu(Q,"onBeforeInput"),0<Ve.length&&(et=new V("onBeforeInput","beforeinput",null,a,le),ue.push({event:et,listeners:Ve}),et.data=Ne)),_w(ue,t,Q,a,le)}Hy(ue,s)})}function ac(t,s,a){return{instance:t,listener:s,currentTarget:a}}function Zu(t,s){for(var a=s+"Capture",l=[];t!==null;){var h=t,m=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||m===null||(h=Ts(t,a),h!=null&&l.unshift(ac(t,h,m)),h=Ts(t,s),h!=null&&l.push(ac(t,h,m))),t.tag===3)return l;t=t.return}return[]}function Jo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Gy(t,s,a,l,h){for(var m=s._reactName,_=[];a!==null&&a!==l;){var E=a,O=E.alternate,Q=E.stateNode;if(E=E.tag,O!==null&&O===l)break;E!==5&&E!==26&&E!==27||Q===null||(O=Q,h?(Q=Ts(a,m),Q!=null&&_.unshift(ac(a,Q,O))):h||(Q=Ts(a,m),Q!=null&&_.push(ac(a,Q,O)))),a=a.return}_.length!==0&&t.push({event:s,listeners:_})}var Ew=/\r\n?/g,Aw=/\u0000|\uFFFD/g;function Wy(t){return(typeof t=="string"?t:""+t).replace(Ew,`
`).replace(Aw,"")}function Xy(t,s){return s=Wy(s),Wy(t)===s}function Ku(){}function At(t,s,a,l,h,m){switch(a){case"children":typeof l=="string"?s==="body"||s==="textarea"&&l===""||ln(t,l):(typeof l=="number"||typeof l=="bigint")&&s!=="body"&&ln(t,""+l);break;case"className":fi(t,"class",l);break;case"tabIndex":fi(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":fi(t,a,l);break;case"style":rr(t,l,m);break;case"data":if(s!=="object"){fi(t,"data",l);break}case"src":case"href":if(l===""&&(s!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Ji(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(s!=="input"&&At(t,s,"name",h.name,h,null),At(t,s,"formEncType",h.formEncType,h,null),At(t,s,"formMethod",h.formMethod,h,null),At(t,s,"formTarget",h.formTarget,h,null)):(At(t,s,"encType",h.encType,h,null),At(t,s,"method",h.method,h,null),At(t,s,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Ji(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=Ku);break;case"onScroll":l!=null&&st("scroll",t);break;case"onScrollEnd":l!=null&&st("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=Ji(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":st("beforetoggle",t),st("toggle",t),Ss(t,"popover",l);break;case"xlinkActuate":en(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":en(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":en(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":en(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":en(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":en(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":en(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":en(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":en(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Ss(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Rl.get(a)||a,Ss(t,a,l))}}function Zf(t,s,a,l,h,m){switch(a){case"style":rr(t,l,m);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"children":typeof l=="string"?ln(t,l):(typeof l=="number"||typeof l=="bigint")&&ln(t,""+l);break;case"onScroll":l!=null&&st("scroll",t);break;case"onScrollEnd":l!=null&&st("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Ku);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!xs.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),s=a.slice(2,h?a.length-7:void 0),m=t[qt]||null,m=m!=null?m[a]:null,typeof m=="function"&&t.removeEventListener(s,m,h),typeof l=="function")){typeof m!="function"&&m!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(s,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):Ss(t,a,l)}}}function On(t,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":st("error",t),st("load",t);var l=!1,h=!1,m;for(m in a)if(a.hasOwnProperty(m)){var _=a[m];if(_!=null)switch(m){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:At(t,s,m,_,a,null)}}h&&At(t,s,"srcSet",a.srcSet,a,null),l&&At(t,s,"src",a.src,a,null);return;case"input":st("invalid",t);var E=m=_=h=null,O=null,Q=null;for(l in a)if(a.hasOwnProperty(l)){var le=a[l];if(le!=null)switch(l){case"name":h=le;break;case"type":_=le;break;case"checked":O=le;break;case"defaultChecked":Q=le;break;case"value":m=le;break;case"defaultValue":E=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(r(137,s));break;default:At(t,s,l,le,a,null)}}on(t,m,E,O,Q,_,h,!1),mi(t);return;case"select":st("invalid",t),l=_=m=null;for(h in a)if(a.hasOwnProperty(h)&&(E=a[h],E!=null))switch(h){case"value":m=E;break;case"defaultValue":_=E;break;case"multiple":l=E;default:At(t,s,h,E,a,null)}s=m,a=_,t.multiple=!!l,s!=null?Xe(t,!!l,s,!1):a!=null&&Xe(t,!!l,a,!0);return;case"textarea":st("invalid",t),m=h=l=null;for(_ in a)if(a.hasOwnProperty(_)&&(E=a[_],E!=null))switch(_){case"value":l=E;break;case"defaultValue":h=E;break;case"children":m=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(r(91));break;default:At(t,s,_,E,a,null)}pi(t,l,h,m),mi(t);return;case"option":for(O in a)if(a.hasOwnProperty(O)&&(l=a[O],l!=null))switch(O){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:At(t,s,O,l,a,null)}return;case"dialog":st("beforetoggle",t),st("toggle",t),st("cancel",t),st("close",t);break;case"iframe":case"object":st("load",t);break;case"video":case"audio":for(l=0;l<rc.length;l++)st(rc[l],t);break;case"image":st("error",t),st("load",t);break;case"details":st("toggle",t);break;case"embed":case"source":case"link":st("error",t),st("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Q in a)if(a.hasOwnProperty(Q)&&(l=a[Q],l!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:At(t,s,Q,l,a,null)}return;default:if(Ua(s)){for(le in a)a.hasOwnProperty(le)&&(l=a[le],l!==void 0&&Zf(t,s,le,l,a,void 0));return}}for(E in a)a.hasOwnProperty(E)&&(l=a[E],l!=null&&At(t,s,E,l,a,null))}function Tw(t,s,a,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,m=null,_=null,E=null,O=null,Q=null,le=null;for(ne in a){var ue=a[ne];if(a.hasOwnProperty(ne)&&ue!=null)switch(ne){case"checked":break;case"value":break;case"defaultValue":O=ue;default:l.hasOwnProperty(ne)||At(t,s,ne,null,l,ue)}}for(var te in l){var ne=l[te];if(ue=a[te],l.hasOwnProperty(te)&&(ne!=null||ue!=null))switch(te){case"type":m=ne;break;case"name":h=ne;break;case"checked":Q=ne;break;case"defaultChecked":le=ne;break;case"value":_=ne;break;case"defaultValue":E=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(r(137,s));break;default:ne!==ue&&At(t,s,te,ne,l,ue)}}bn(t,_,E,O,Q,le,m,h);return;case"select":ne=_=E=te=null;for(m in a)if(O=a[m],a.hasOwnProperty(m)&&O!=null)switch(m){case"value":break;case"multiple":ne=O;default:l.hasOwnProperty(m)||At(t,s,m,null,l,O)}for(h in l)if(m=l[h],O=a[h],l.hasOwnProperty(h)&&(m!=null||O!=null))switch(h){case"value":te=m;break;case"defaultValue":E=m;break;case"multiple":_=m;default:m!==O&&At(t,s,h,m,l,O)}s=E,a=_,l=ne,te!=null?Xe(t,!!a,te,!1):!!l!=!!a&&(s!=null?Xe(t,!!a,s,!0):Xe(t,!!a,a?[]:"",!1));return;case"textarea":ne=te=null;for(E in a)if(h=a[E],a.hasOwnProperty(E)&&h!=null&&!l.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:At(t,s,E,null,l,h)}for(_ in l)if(h=l[_],m=a[_],l.hasOwnProperty(_)&&(h!=null||m!=null))switch(_){case"value":te=h;break;case"defaultValue":ne=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(r(91));break;default:h!==m&&At(t,s,_,h,l,m)}ft(t,te,ne);return;case"option":for(var Be in a)if(te=a[Be],a.hasOwnProperty(Be)&&te!=null&&!l.hasOwnProperty(Be))switch(Be){case"selected":t.selected=!1;break;default:At(t,s,Be,null,l,te)}for(O in l)if(te=l[O],ne=a[O],l.hasOwnProperty(O)&&te!==ne&&(te!=null||ne!=null))switch(O){case"selected":t.selected=te&&typeof te!="function"&&typeof te!="symbol";break;default:At(t,s,O,te,l,ne)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Me in a)te=a[Me],a.hasOwnProperty(Me)&&te!=null&&!l.hasOwnProperty(Me)&&At(t,s,Me,null,l,te);for(Q in l)if(te=l[Q],ne=a[Q],l.hasOwnProperty(Q)&&te!==ne&&(te!=null||ne!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(r(137,s));break;default:At(t,s,Q,te,l,ne)}return;default:if(Ua(s)){for(var Tt in a)te=a[Tt],a.hasOwnProperty(Tt)&&te!==void 0&&!l.hasOwnProperty(Tt)&&Zf(t,s,Tt,void 0,l,te);for(le in l)te=l[le],ne=a[le],!l.hasOwnProperty(le)||te===ne||te===void 0&&ne===void 0||Zf(t,s,le,te,l,ne);return}}for(var W in a)te=a[W],a.hasOwnProperty(W)&&te!=null&&!l.hasOwnProperty(W)&&At(t,s,W,null,l,te);for(ue in l)te=l[ue],ne=a[ue],!l.hasOwnProperty(ue)||te===ne||te==null&&ne==null||At(t,s,ue,te,l,ne)}var Kf=null,Yf=null;function Yu(t){return t.nodeType===9?t:t.ownerDocument}function Zy(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ky(t,s){if(t===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&s==="foreignObject"?0:t}function Qf(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var $f=null;function Rw(){var t=window.event;return t&&t.type==="popstate"?t===$f?!1:($f=t,!0):($f=null,!1)}var Yy=typeof setTimeout=="function"?setTimeout:void 0,Cw=typeof clearTimeout=="function"?clearTimeout:void 0,Qy=typeof Promise=="function"?Promise:void 0,Iw=typeof queueMicrotask=="function"?queueMicrotask:typeof Qy<"u"?function(t){return Qy.resolve(null).then(t).catch(kw)}:Yy;function kw(t){setTimeout(function(){throw t})}function ia(t){return t==="head"}function $y(t,s){var a=s,l=0,h=0;do{var m=a.nextSibling;if(t.removeChild(a),m&&m.nodeType===8)if(a=m.data,a==="/$"){if(0<l&&8>l){a=l;var _=t.ownerDocument;if(a&1&&oc(_.documentElement),a&2&&oc(_.body),a&4)for(a=_.head,oc(a),_=a.firstChild;_;){var E=_.nextSibling,O=_.nodeName;_[bs]||O==="SCRIPT"||O==="STYLE"||O==="LINK"&&_.rel.toLowerCase()==="stylesheet"||a.removeChild(_),_=E}}if(h===0){t.removeChild(m),pc(s);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:l=a.charCodeAt(0)-48;else l=0;a=m}while(a);pc(s)}function Jf(t){var s=t.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Jf(a),_s(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function Nw(t,s,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==s.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[bs])switch(s){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(s==="input"&&t.type==="hidden"){var m=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=as(t.nextSibling),t===null)break}return null}function jw(t,s,a){if(s==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=as(t.nextSibling),t===null))return null;return t}function em(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function Dw(t,s){var a=t.ownerDocument;if(t.data!=="$?"||a.readyState==="complete")s();else{var l=function(){s(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function as(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return t}var tm=null;function Jy(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return t;s--}else a==="/$"&&s++}t=t.previousSibling}return null}function ev(t,s,a){switch(s=Yu(a),t){case"html":if(t=s.documentElement,!t)throw Error(r(452));return t;case"head":if(t=s.head,!t)throw Error(r(453));return t;case"body":if(t=s.body,!t)throw Error(r(454));return t;default:throw Error(r(451))}}function oc(t){for(var s=t.attributes;s.length;)t.removeAttributeNode(s[0]);_s(t)}var zi=new Map,tv=new Set;function Qu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Er=he.d;he.d={f:Ow,r:Mw,D:Lw,C:Vw,L:Pw,m:Uw,X:zw,S:Bw,M:Fw};function Ow(){var t=Er.f(),s=Fu();return t||s}function Mw(t){var s=di(t);s!==null&&s.tag===5&&s.type==="form"?x0(s):Er.r(t)}var el=typeof document>"u"?null:document;function nv(t,s,a){var l=el;if(l&&typeof s=="string"&&s){var h=Gt(s);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),tv.has(h)||(tv.add(h),t={rel:t,crossOrigin:a,href:s},l.querySelector(h)===null&&(s=l.createElement("link"),On(s,"link",t),Mt(s),l.head.appendChild(s)))}}function Lw(t){Er.D(t),nv("dns-prefetch",t,null)}function Vw(t,s){Er.C(t,s),nv("preconnect",t,s)}function Pw(t,s,a){Er.L(t,s,a);var l=el;if(l&&t&&s){var h='link[rel="preload"][as="'+Gt(s)+'"]';s==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+Gt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+Gt(a.imageSizes)+'"]')):h+='[href="'+Gt(t)+'"]';var m=h;switch(s){case"style":m=tl(t);break;case"script":m=nl(t)}zi.has(m)||(t=x({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:t,as:s},a),zi.set(m,t),l.querySelector(h)!==null||s==="style"&&l.querySelector(lc(m))||s==="script"&&l.querySelector(cc(m))||(s=l.createElement("link"),On(s,"link",t),Mt(s),l.head.appendChild(s)))}}function Uw(t,s){Er.m(t,s);var a=el;if(a&&t){var l=s&&typeof s.as=="string"?s.as:"script",h='link[rel="modulepreload"][as="'+Gt(l)+'"][href="'+Gt(t)+'"]',m=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=nl(t)}if(!zi.has(m)&&(t=x({rel:"modulepreload",href:t},s),zi.set(m,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(cc(m)))return}l=a.createElement("link"),On(l,"link",t),Mt(l),a.head.appendChild(l)}}}function Bw(t,s,a){Er.S(t,s,a);var l=el;if(l&&t){var h=Cn(l).hoistableStyles,m=tl(t);s=s||"default";var _=h.get(m);if(!_){var E={loading:0,preload:null};if(_=l.querySelector(lc(m)))E.loading=5;else{t=x({rel:"stylesheet",href:t,"data-precedence":s},a),(a=zi.get(m))&&nm(t,a);var O=_=l.createElement("link");Mt(O),On(O,"link",t),O._p=new Promise(function(Q,le){O.onload=Q,O.onerror=le}),O.addEventListener("load",function(){E.loading|=1}),O.addEventListener("error",function(){E.loading|=2}),E.loading|=4,$u(_,s,l)}_={type:"stylesheet",instance:_,count:1,state:E},h.set(m,_)}}}function zw(t,s){Er.X(t,s);var a=el;if(a&&t){var l=Cn(a).hoistableScripts,h=nl(t),m=l.get(h);m||(m=a.querySelector(cc(h)),m||(t=x({src:t,async:!0},s),(s=zi.get(h))&&im(t,s),m=a.createElement("script"),Mt(m),On(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(h,m))}}function Fw(t,s){Er.M(t,s);var a=el;if(a&&t){var l=Cn(a).hoistableScripts,h=nl(t),m=l.get(h);m||(m=a.querySelector(cc(h)),m||(t=x({src:t,async:!0,type:"module"},s),(s=zi.get(h))&&im(t,s),m=a.createElement("script"),Mt(m),On(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(h,m))}}function iv(t,s,a,l){var h=(h=Te.current)?Qu(h):null;if(!h)throw Error(r(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=tl(a.href),a=Cn(h).hoistableStyles,l=a.get(s),l||(l={type:"style",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=tl(a.href);var m=Cn(h).hoistableStyles,_=m.get(t);if(_||(h=h.ownerDocument||h,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,_),(m=h.querySelector(lc(t)))&&!m._p&&(_.instance=m,_.state.loading=5),zi.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},zi.set(t,a),m||Hw(h,t,a,_.state))),s&&l===null)throw Error(r(528,""));return _}if(s&&l!==null)throw Error(r(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=nl(a),a=Cn(h).hoistableScripts,l=a.get(s),l||(l={type:"script",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,t))}}function tl(t){return'href="'+Gt(t)+'"'}function lc(t){return'link[rel="stylesheet"]['+t+"]"}function sv(t){return x({},t,{"data-precedence":t.precedence,precedence:null})}function Hw(t,s,a,l){t.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=t.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),On(s,"link",a),Mt(s),t.head.appendChild(s))}function nl(t){return'[src="'+Gt(t)+'"]'}function cc(t){return"script[async]"+t}function rv(t,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var l=t.querySelector('style[data-href~="'+Gt(a.href)+'"]');if(l)return s.instance=l,Mt(l),l;var h=x({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),Mt(l),On(l,"style",h),$u(l,a.precedence,t),s.instance=l;case"stylesheet":h=tl(a.href);var m=t.querySelector(lc(h));if(m)return s.state.loading|=4,s.instance=m,Mt(m),m;l=sv(a),(h=zi.get(h))&&nm(l,h),m=(t.ownerDocument||t).createElement("link"),Mt(m);var _=m;return _._p=new Promise(function(E,O){_.onload=E,_.onerror=O}),On(m,"link",l),s.state.loading|=4,$u(m,a.precedence,t),s.instance=m;case"script":return m=nl(a.src),(h=t.querySelector(cc(m)))?(s.instance=h,Mt(h),h):(l=a,(h=zi.get(m))&&(l=x({},a),im(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),Mt(h),On(h,"link",l),t.head.appendChild(h),s.instance=h);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(l=s.instance,s.state.loading|=4,$u(l,a.precedence,t));return s.instance}function $u(t,s,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,m=h,_=0;_<l.length;_++){var E=l[_];if(E.dataset.precedence===s)m=E;else if(m!==h)break}m?m.parentNode.insertBefore(t,m.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(t,s.firstChild))}function nm(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.title==null&&(t.title=s.title)}function im(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.integrity==null&&(t.integrity=s.integrity)}var Ju=null;function av(t,s,a){if(Ju===null){var l=new Map,h=Ju=new Map;h.set(a,l)}else h=Ju,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var m=a[h];if(!(m[bs]||m[Yt]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var _=m.getAttribute(s)||"";_=t+_;var E=l.get(_);E?E.push(m):l.set(_,[m])}}return l}function ov(t,s,a){t=t.ownerDocument||t,t.head.insertBefore(a,s==="title"?t.querySelector("head > title"):null)}function qw(t,s,a){if(a===1||s.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return t=s.disabled,typeof s.precedence=="string"&&t==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function lv(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var uc=null;function Gw(){}function Ww(t,s,a){if(uc===null)throw Error(r(475));var l=uc;if(s.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var h=tl(a.href),m=t.querySelector(lc(h));if(m){t=m._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=ed.bind(l),t.then(l,l)),s.state.loading|=4,s.instance=m,Mt(m);return}m=t.ownerDocument||t,a=sv(a),(h=zi.get(h))&&nm(a,h),m=m.createElement("link"),Mt(m);var _=m;_._p=new Promise(function(E,O){_.onload=E,_.onerror=O}),On(m,"link",a),s.instance=m}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(s,t),(t=s.state.preload)&&(s.state.loading&3)===0&&(l.count++,s=ed.bind(l),t.addEventListener("load",s),t.addEventListener("error",s))}}function Xw(){if(uc===null)throw Error(r(475));var t=uc;return t.stylesheets&&t.count===0&&sm(t,t.stylesheets),0<t.count?function(s){var a=setTimeout(function(){if(t.stylesheets&&sm(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=s,function(){t.unsuspend=null,clearTimeout(a)}}:null}function ed(){if(this.count--,this.count===0){if(this.stylesheets)sm(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var td=null;function sm(t,s){t.stylesheets=null,t.unsuspend!==null&&(t.count++,td=new Map,s.forEach(Zw,t),td=null,ed.call(t))}function Zw(t,s){if(!(s.state.loading&4)){var a=td.get(t);if(a)var l=a.get(null);else{a=new Map,td.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<h.length;m++){var _=h[m];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),l=_)}l&&a.set(null,l)}h=s.instance,_=h.getAttribute("data-precedence"),m=a.get(_)||l,m===l&&a.set(null,h),a.set(_,h),this.count++,l=ed.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),m?m.parentNode.insertBefore(h,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),s.state.loading|=4}}var dc={$$typeof:z,Provider:null,Consumer:null,_currentValue:ie,_currentValue2:ie,_threadCount:0};function Kw(t,s,a,l,h,m,_,E){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Wi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wi(0),this.hiddenUpdates=Wi(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=m,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map}function cv(t,s,a,l,h,m,_,E,O,Q,le,ue){return t=new Kw(t,s,a,_,E,O,Q,ue),s=1,m===!0&&(s|=24),m=bi(3,null,null,s),t.current=m,m.stateNode=t,s=Ph(),s.refCount++,t.pooledCache=s,s.refCount++,m.memoizedState={element:l,isDehydrated:a,cache:s},Fh(m),t}function uv(t){return t?(t=Do,t):Do}function dv(t,s,a,l,h,m){h=uv(h),l.context===null?l.context=h:l.pendingContext=h,l=qr(s),l.payload={element:a},m=m===void 0?null:m,m!==null&&(l.callback=m),a=Gr(t,l,s),a!==null&&(Ei(a,t,s),zl(a,t,s))}function hv(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<s?a:s}}function rm(t,s){hv(t,s),(t=t.alternate)&&hv(t,s)}function fv(t){if(t.tag===13){var s=jo(t,67108864);s!==null&&Ei(s,t,67108864),rm(t,67108864)}}var nd=!0;function Yw(t,s,a,l){var h=ae.T;ae.T=null;var m=he.p;try{he.p=2,am(t,s,a,l)}finally{he.p=m,ae.T=h}}function Qw(t,s,a,l){var h=ae.T;ae.T=null;var m=he.p;try{he.p=8,am(t,s,a,l)}finally{he.p=m,ae.T=h}}function am(t,s,a,l){if(nd){var h=om(l);if(h===null)Xf(t,s,l,id,a),pv(t,l);else if(Jw(h,t,s,a,l))l.stopPropagation();else if(pv(t,l),s&4&&-1<$w.indexOf(t)){for(;h!==null;){var m=di(h);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var _=ni(m.pendingLanes);if(_!==0){var E=m;for(E.pendingLanes|=2,E.entangledLanes|=2;_;){var O=1<<31-vn(_);E.entanglements[1]|=O,_&=~O}Ms(m),(xt&6)===0&&(Bu=ke()+500,sc(0))}}break;case 13:E=jo(m,2),E!==null&&Ei(E,m,2),Fu(),rm(m,2)}if(m=om(l),m===null&&Xf(t,s,l,id,a),m===h)break;h=m}h!==null&&l.stopPropagation()}else Xf(t,s,l,null,a)}}function om(t){return t=kn(t),lm(t)}var id=null;function lm(t){if(id=null,t=Ki(t),t!==null){var s=c(t);if(s===null)t=null;else{var a=s.tag;if(a===13){if(t=f(s),t!==null)return t;t=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null)}}return id=t,null}function mv(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(se()){case ve:return 2;case Re:return 8;case we:case St:return 32;case Ge:return 268435456;default:return 32}default:return 32}}var cm=!1,sa=null,ra=null,aa=null,hc=new Map,fc=new Map,oa=[],$w="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function pv(t,s){switch(t){case"focusin":case"focusout":sa=null;break;case"dragenter":case"dragleave":ra=null;break;case"mouseover":case"mouseout":aa=null;break;case"pointerover":case"pointerout":hc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":fc.delete(s.pointerId)}}function mc(t,s,a,l,h,m){return t===null||t.nativeEvent!==m?(t={blockedOn:s,domEventName:a,eventSystemFlags:l,nativeEvent:m,targetContainers:[h]},s!==null&&(s=di(s),s!==null&&fv(s)),t):(t.eventSystemFlags|=l,s=t.targetContainers,h!==null&&s.indexOf(h)===-1&&s.push(h),t)}function Jw(t,s,a,l,h){switch(s){case"focusin":return sa=mc(sa,t,s,a,l,h),!0;case"dragenter":return ra=mc(ra,t,s,a,l,h),!0;case"mouseover":return aa=mc(aa,t,s,a,l,h),!0;case"pointerover":var m=h.pointerId;return hc.set(m,mc(hc.get(m)||null,t,s,a,l,h)),!0;case"gotpointercapture":return m=h.pointerId,fc.set(m,mc(fc.get(m)||null,t,s,a,l,h)),!0}return!1}function gv(t){var s=Ki(t.target);if(s!==null){var a=c(s);if(a!==null){if(s=a.tag,s===13){if(s=f(a),s!==null){t.blockedOn=s,er(t.priority,function(){if(a.tag===13){var l=Si();l=Le(l);var h=jo(a,l);h!==null&&Ei(h,a,l),rm(a,l)}});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function sd(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var a=om(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Es=l,a.target.dispatchEvent(l),Es=null}else return s=di(a),s!==null&&fv(s),t.blockedOn=a,!1;s.shift()}return!0}function yv(t,s,a){sd(t)&&a.delete(s)}function eS(){cm=!1,sa!==null&&sd(sa)&&(sa=null),ra!==null&&sd(ra)&&(ra=null),aa!==null&&sd(aa)&&(aa=null),hc.forEach(yv),fc.forEach(yv)}function rd(t,s){t.blockedOn===s&&(t.blockedOn=null,cm||(cm=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,eS)))}var ad=null;function vv(t){ad!==t&&(ad=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){ad===t&&(ad=null);for(var s=0;s<t.length;s+=3){var a=t[s],l=t[s+1],h=t[s+2];if(typeof l!="function"){if(lm(l||a)===null)continue;break}var m=di(a);m!==null&&(t.splice(s,3),s-=3,lf(m,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function pc(t){function s(O){return rd(O,t)}sa!==null&&rd(sa,t),ra!==null&&rd(ra,t),aa!==null&&rd(aa,t),hc.forEach(s),fc.forEach(s);for(var a=0;a<oa.length;a++){var l=oa[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<oa.length&&(a=oa[0],a.blockedOn===null);)gv(a),a.blockedOn===null&&oa.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],m=a[l+1],_=h[qt]||null;if(typeof m=="function")_||vv(a);else if(_){var E=null;if(m&&m.hasAttribute("formAction")){if(h=m,_=m[qt]||null)E=_.formAction;else if(lm(h)!==null)continue}else E=_.action;typeof E=="function"?a[l+1]=E:(a.splice(l,3),l-=3),vv(a)}}}function um(t){this._internalRoot=t}od.prototype.render=um.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(r(409));var a=s.current,l=Si();dv(a,l,t,s,null,null)},od.prototype.unmount=um.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;dv(t.current,2,null,t,null,null),Fu(),s[Bn]=null}};function od(t){this._internalRoot=t}od.prototype.unstable_scheduleHydration=function(t){if(t){var s=ze();t={blockedOn:null,target:t,priority:s};for(var a=0;a<oa.length&&s!==0&&s<oa[a].priority;a++);oa.splice(a,0,t),a===0&&gv(t)}};var bv=e.version;if(bv!=="19.1.0")throw Error(r(527,bv,"19.1.0"));he.findDOMNode=function(t){var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=g(s),t=t!==null?y(t):null,t=t===null?null:t.stateNode,t};var tS={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:ae,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ld=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ld.isDisabled&&ld.supportsFiber)try{kt=ld.inject(tS),nt=ld}catch{}}return yc.createRoot=function(t,s){if(!o(t))throw Error(r(299));var a=!1,l="",h=M0,m=L0,_=V0,E=null;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(l=s.identifierPrefix),s.onUncaughtError!==void 0&&(h=s.onUncaughtError),s.onCaughtError!==void 0&&(m=s.onCaughtError),s.onRecoverableError!==void 0&&(_=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(E=s.unstable_transitionCallbacks)),s=cv(t,1,!1,null,null,a,l,h,m,_,E,null),t[Bn]=s.current,Wf(t),new um(s)},yc.hydrateRoot=function(t,s,a){if(!o(t))throw Error(r(299));var l=!1,h="",m=M0,_=L0,E=V0,O=null,Q=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(O=a.unstable_transitionCallbacks),a.formState!==void 0&&(Q=a.formState)),s=cv(t,1,!0,s,a??null,l,h,m,_,E,O,Q),s.context=uv(null),a=s.current,l=Si(),l=Le(l),h=qr(l),h.callback=null,Gr(a,h,l),a=l,s.current.lanes=a,Xi(s,a),Ms(s),t[Bn]=s.current,Wf(t),new od(s)},yc.version="19.1.0",yc}var Iv;function uS(){if(Iv)return fm.exports;Iv=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),fm.exports=cS(),fm.exports}var dS=uS();const hS=xb(dS);var vc={},kv;function fS(){if(kv)return vc;kv=1,Object.defineProperty(vc,"__esModule",{value:!0}),vc.parse=f,vc.serialize=y;const i=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,c=(()=>{const A=function(){};return A.prototype=Object.create(null),A})();function f(A,F){const G=new c,q=A.length;if(q<2)return G;const K=(F==null?void 0:F.decode)||x;let J=0;do{const Y=A.indexOf("=",J);if(Y===-1)break;const z=A.indexOf(";",J),me=z===-1?q:z;if(Y>me){J=A.lastIndexOf(";",Y-1)+1;continue}const fe=p(A,J,Y),be=g(A,Y,fe),M=A.slice(fe,be);if(G[M]===void 0){let R=p(A,Y+1,me),I=g(A,me,R);const L=K(A.slice(R,I));G[M]=L}J=me+1}while(J<q);return G}function p(A,F,G){do{const q=A.charCodeAt(F);if(q!==32&&q!==9)return F}while(++F<G);return G}function g(A,F,G){for(;F>G;){const q=A.charCodeAt(--F);if(q!==32&&q!==9)return F+1}return G}function y(A,F,G){const q=(G==null?void 0:G.encode)||encodeURIComponent;if(!i.test(A))throw new TypeError(`argument name is invalid: ${A}`);const K=q(F);if(!e.test(K))throw new TypeError(`argument val is invalid: ${F}`);let J=A+"="+K;if(!G)return J;if(G.maxAge!==void 0){if(!Number.isInteger(G.maxAge))throw new TypeError(`option maxAge is invalid: ${G.maxAge}`);J+="; Max-Age="+G.maxAge}if(G.domain){if(!n.test(G.domain))throw new TypeError(`option domain is invalid: ${G.domain}`);J+="; Domain="+G.domain}if(G.path){if(!r.test(G.path))throw new TypeError(`option path is invalid: ${G.path}`);J+="; Path="+G.path}if(G.expires){if(!S(G.expires)||!Number.isFinite(G.expires.valueOf()))throw new TypeError(`option expires is invalid: ${G.expires}`);J+="; Expires="+G.expires.toUTCString()}if(G.httpOnly&&(J+="; HttpOnly"),G.secure&&(J+="; Secure"),G.partitioned&&(J+="; Partitioned"),G.priority)switch(typeof G.priority=="string"?G.priority.toLowerCase():void 0){case"low":J+="; Priority=Low";break;case"medium":J+="; Priority=Medium";break;case"high":J+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${G.priority}`)}if(G.sameSite)switch(typeof G.sameSite=="string"?G.sameSite.toLowerCase():G.sameSite){case!0:case"strict":J+="; SameSite=Strict";break;case"lax":J+="; SameSite=Lax";break;case"none":J+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${G.sameSite}`)}return J}function x(A){if(A.indexOf("%")===-1)return A;try{return decodeURIComponent(A)}catch{return A}}function S(A){return o.call(A)==="[object Date]"}return vc}fS();var Nv="popstate";function mS(i={}){function e(o,c){let{pathname:f="/",search:p="",hash:g=""}=fo(o.location.hash.substring(1));return!f.startsWith("/")&&!f.startsWith(".")&&(f="/"+f),Mm("",{pathname:f,search:p,hash:g},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function n(o,c){let f=o.document.querySelector("base"),p="";if(f&&f.getAttribute("href")){let g=o.location.href,y=g.indexOf("#");p=y===-1?g:g.slice(0,y)}return p+"#"+(typeof c=="string"?c:Vc(c))}function r(o,c){us(o.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(c)})`)}return gS(e,n,r,i)}function Ft(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function us(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function pS(){return Math.random().toString(36).substring(2,10)}function jv(i,e){return{usr:i.state,key:i.key,idx:e}}function Mm(i,e,n=null,r){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?fo(e):e,state:n,key:e&&e.key||r||pS()}}function Vc({pathname:i="/",search:e="",hash:n=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(i+=n.charAt(0)==="#"?n:"#"+n),i}function fo(i){let e={};if(i){let n=i.indexOf("#");n>=0&&(e.hash=i.substring(n),i=i.substring(0,n));let r=i.indexOf("?");r>=0&&(e.search=i.substring(r),i=i.substring(0,r)),i&&(e.pathname=i)}return e}function gS(i,e,n,r={}){let{window:o=document.defaultView,v5Compat:c=!1}=r,f=o.history,p="POP",g=null,y=x();y==null&&(y=0,f.replaceState({...f.state,idx:y},""));function x(){return(f.state||{idx:null}).idx}function S(){p="POP";let K=x(),J=K==null?null:K-y;y=K,g&&g({action:p,location:q.location,delta:J})}function A(K,J){p="PUSH";let Y=Mm(q.location,K,J);n&&n(Y,K),y=x()+1;let z=jv(Y,y),me=q.createHref(Y);try{f.pushState(z,"",me)}catch(fe){if(fe instanceof DOMException&&fe.name==="DataCloneError")throw fe;o.location.assign(me)}c&&g&&g({action:p,location:q.location,delta:1})}function F(K,J){p="REPLACE";let Y=Mm(q.location,K,J);n&&n(Y,K),y=x();let z=jv(Y,y),me=q.createHref(Y);f.replaceState(z,"",me),c&&g&&g({action:p,location:q.location,delta:0})}function G(K){return yS(K)}let q={get action(){return p},get location(){return i(o,f)},listen(K){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(Nv,S),g=K,()=>{o.removeEventListener(Nv,S),g=null}},createHref(K){return e(o,K)},createURL:G,encodeLocation(K){let J=G(K);return{pathname:J.pathname,search:J.search,hash:J.hash}},push:A,replace:F,go(K){return f.go(K)}};return q}function yS(i,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Ft(n,"No window.location.(origin|href) available to create URL");let r=typeof i=="string"?i:Vc(i);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function Sb(i,e,n="/"){return vS(i,e,n,!1)}function vS(i,e,n,r){let o=typeof e=="string"?fo(e):e,c=Nr(o.pathname||"/",n);if(c==null)return null;let f=Eb(i);bS(f);let p=null;for(let g=0;p==null&&g<f.length;++g){let y=kS(c);p=CS(f[g],y,r)}return p}function Eb(i,e=[],n=[],r=""){let o=(c,f,p)=>{let g={relativePath:p===void 0?c.path||"":p,caseSensitive:c.caseSensitive===!0,childrenIndex:f,route:c};g.relativePath.startsWith("/")&&(Ft(g.relativePath.startsWith(r),`Absolute route path "${g.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(r.length));let y=Cr([r,g.relativePath]),x=n.concat(g);c.children&&c.children.length>0&&(Ft(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),Eb(c.children,e,x,y)),!(c.path==null&&!c.index)&&e.push({path:y,score:TS(y,c.index),routesMeta:x})};return i.forEach((c,f)=>{var p;if(c.path===""||!((p=c.path)!=null&&p.includes("?")))o(c,f);else for(let g of Ab(c.path))o(c,f,g)}),e}function Ab(i){let e=i.split("/");if(e.length===0)return[];let[n,...r]=e,o=n.endsWith("?"),c=n.replace(/\?$/,"");if(r.length===0)return o?[c,""]:[c];let f=Ab(r.join("/")),p=[];return p.push(...f.map(g=>g===""?c:[c,g].join("/"))),o&&p.push(...f),p.map(g=>i.startsWith("/")&&g===""?"/":g)}function bS(i){i.sort((e,n)=>e.score!==n.score?n.score-e.score:RS(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var _S=/^:[\w-]+$/,xS=3,wS=2,SS=1,ES=10,AS=-2,Dv=i=>i==="*";function TS(i,e){let n=i.split("/"),r=n.length;return n.some(Dv)&&(r+=AS),e&&(r+=wS),n.filter(o=>!Dv(o)).reduce((o,c)=>o+(_S.test(c)?xS:c===""?SS:ES),r)}function RS(i,e){return i.length===e.length&&i.slice(0,-1).every((r,o)=>r===e[o])?i[i.length-1]-e[e.length-1]:0}function CS(i,e,n=!1){let{routesMeta:r}=i,o={},c="/",f=[];for(let p=0;p<r.length;++p){let g=r[p],y=p===r.length-1,x=c==="/"?e:e.slice(c.length)||"/",S=Id({path:g.relativePath,caseSensitive:g.caseSensitive,end:y},x),A=g.route;if(!S&&y&&n&&!r[r.length-1].route.index&&(S=Id({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},x)),!S)return null;Object.assign(o,S.params),f.push({params:o,pathname:Cr([c,S.pathname]),pathnameBase:OS(Cr([c,S.pathnameBase])),route:A}),S.pathnameBase!=="/"&&(c=Cr([c,S.pathnameBase]))}return f}function Id(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[n,r]=IS(i.path,i.caseSensitive,i.end),o=e.match(n);if(!o)return null;let c=o[0],f=c.replace(/(.)\/+$/,"$1"),p=o.slice(1);return{params:r.reduce((y,{paramName:x,isOptional:S},A)=>{if(x==="*"){let G=p[A]||"";f=c.slice(0,c.length-G.length).replace(/(.)\/+$/,"$1")}const F=p[A];return S&&!F?y[x]=void 0:y[x]=(F||"").replace(/%2F/g,"/"),y},{}),pathname:c,pathnameBase:f,pattern:i}}function IS(i,e=!1,n=!0){us(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let r=[],o="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,p,g)=>(r.push({paramName:p,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(r.push({paramName:"*"}),o+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":i!==""&&i!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),r]}function kS(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return us(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function Nr(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=i.charAt(n);return r&&r!=="/"?null:i.slice(n)||"/"}function NS(i,e="/"){let{pathname:n,search:r="",hash:o=""}=typeof i=="string"?fo(i):i;return{pathname:n?n.startsWith("/")?n:jS(n,e):e,search:MS(r),hash:LS(o)}}function jS(i,e){let n=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function ym(i,e,n,r){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function DS(i){return i.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Tb(i){let e=DS(i);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function Rb(i,e,n,r=!1){let o;typeof i=="string"?o=fo(i):(o={...i},Ft(!o.pathname||!o.pathname.includes("?"),ym("?","pathname","search",o)),Ft(!o.pathname||!o.pathname.includes("#"),ym("#","pathname","hash",o)),Ft(!o.search||!o.search.includes("#"),ym("#","search","hash",o)));let c=i===""||o.pathname==="",f=c?"/":o.pathname,p;if(f==null)p=n;else{let S=e.length-1;if(!r&&f.startsWith("..")){let A=f.split("/");for(;A[0]==="..";)A.shift(),S-=1;o.pathname=A.join("/")}p=S>=0?e[S]:"/"}let g=NS(o,p),y=f&&f!=="/"&&f.endsWith("/"),x=(c||f===".")&&n.endsWith("/");return!g.pathname.endsWith("/")&&(y||x)&&(g.pathname+="/"),g}var Cr=i=>i.join("/").replace(/\/\/+/g,"/"),OS=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),MS=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,LS=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function VS(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}var Cb=["POST","PUT","PATCH","DELETE"];new Set(Cb);var PS=["GET",...Cb];new Set(PS);var yl=C.createContext(null);yl.displayName="DataRouter";var $d=C.createContext(null);$d.displayName="DataRouterState";var Ib=C.createContext({isTransitioning:!1});Ib.displayName="ViewTransition";var US=C.createContext(new Map);US.displayName="Fetchers";var BS=C.createContext(null);BS.displayName="Await";var Ws=C.createContext(null);Ws.displayName="Navigation";var Kc=C.createContext(null);Kc.displayName="Location";var Xs=C.createContext({outlet:null,matches:[],isDataRoute:!1});Xs.displayName="Route";var up=C.createContext(null);up.displayName="RouteError";function zS(i,{relative:e}={}){Ft(Yc(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=C.useContext(Ws),{hash:o,pathname:c,search:f}=Qc(i,{relative:e}),p=c;return n!=="/"&&(p=c==="/"?n:Cr([n,c])),r.createHref({pathname:p,search:f,hash:o})}function Yc(){return C.useContext(Kc)!=null}function fs(){return Ft(Yc(),"useLocation() may be used only in the context of a <Router> component."),C.useContext(Kc).location}var kb="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Nb(i){C.useContext(Ws).static||C.useLayoutEffect(i)}function Zs(){let{isDataRoute:i}=C.useContext(Xs);return i?tE():FS()}function FS(){Ft(Yc(),"useNavigate() may be used only in the context of a <Router> component.");let i=C.useContext(yl),{basename:e,navigator:n}=C.useContext(Ws),{matches:r}=C.useContext(Xs),{pathname:o}=fs(),c=JSON.stringify(Tb(r)),f=C.useRef(!1);return Nb(()=>{f.current=!0}),C.useCallback((g,y={})=>{if(us(f.current,kb),!f.current)return;if(typeof g=="number"){n.go(g);return}let x=Rb(g,JSON.parse(c),o,y.relative==="path");i==null&&e!=="/"&&(x.pathname=x.pathname==="/"?e:Cr([e,x.pathname])),(y.replace?n.replace:n.push)(x,y.state,y)},[e,n,c,o,i])}C.createContext(null);function HS(){let{matches:i}=C.useContext(Xs),e=i[i.length-1];return e?e.params:{}}function Qc(i,{relative:e}={}){let{matches:n}=C.useContext(Xs),{pathname:r}=fs(),o=JSON.stringify(Tb(n));return C.useMemo(()=>Rb(i,JSON.parse(o),r,e==="path"),[i,o,r,e])}function qS(i,e){return jb(i,e)}function jb(i,e,n,r){var J;Ft(Yc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=C.useContext(Ws),{matches:c}=C.useContext(Xs),f=c[c.length-1],p=f?f.params:{},g=f?f.pathname:"/",y=f?f.pathnameBase:"/",x=f&&f.route;{let Y=x&&x.path||"";Db(g,!x||Y.endsWith("*")||Y.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${Y}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${Y}"> to <Route path="${Y==="/"?"*":`${Y}/*`}">.`)}let S=fs(),A;if(e){let Y=typeof e=="string"?fo(e):e;Ft(y==="/"||((J=Y.pathname)==null?void 0:J.startsWith(y)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${Y.pathname}" was given in the \`location\` prop.`),A=Y}else A=S;let F=A.pathname||"/",G=F;if(y!=="/"){let Y=y.replace(/^\//,"").split("/");G="/"+F.replace(/^\//,"").split("/").slice(Y.length).join("/")}let q=Sb(i,{pathname:G});us(x||q!=null,`No routes matched location "${A.pathname}${A.search}${A.hash}" `),us(q==null||q[q.length-1].route.element!==void 0||q[q.length-1].route.Component!==void 0||q[q.length-1].route.lazy!==void 0,`Matched leaf route at location "${A.pathname}${A.search}${A.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let K=KS(q&&q.map(Y=>Object.assign({},Y,{params:Object.assign({},p,Y.params),pathname:Cr([y,o.encodeLocation?o.encodeLocation(Y.pathname).pathname:Y.pathname]),pathnameBase:Y.pathnameBase==="/"?y:Cr([y,o.encodeLocation?o.encodeLocation(Y.pathnameBase).pathname:Y.pathnameBase])})),c,n,r);return e&&K?C.createElement(Kc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...A},navigationType:"POP"}},K):K}function GS(){let i=eE(),e=VS(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),n=i instanceof Error?i.stack:null,r="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:r},c={padding:"2px 4px",backgroundColor:r},f=null;return console.error("Error handled by React Router default ErrorBoundary:",i),f=C.createElement(C.Fragment,null,C.createElement("p",null,"💿 Hey developer 👋"),C.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",C.createElement("code",{style:c},"ErrorBoundary")," or"," ",C.createElement("code",{style:c},"errorElement")," prop on your route.")),C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},e),n?C.createElement("pre",{style:o},n):null,f)}var WS=C.createElement(GS,null),XS=class extends C.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){console.error("React Router caught the following error during render",i,e)}render(){return this.state.error!==void 0?C.createElement(Xs.Provider,{value:this.props.routeContext},C.createElement(up.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function ZS({routeContext:i,match:e,children:n}){let r=C.useContext(yl);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),C.createElement(Xs.Provider,{value:i},n)}function KS(i,e=[],n=null,r=null){if(i==null){if(!n)return null;if(n.errors)i=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)i=n.matches;else return null}let o=i,c=n==null?void 0:n.errors;if(c!=null){let g=o.findIndex(y=>y.route.id&&(c==null?void 0:c[y.route.id])!==void 0);Ft(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),o=o.slice(0,Math.min(o.length,g+1))}let f=!1,p=-1;if(n)for(let g=0;g<o.length;g++){let y=o[g];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(p=g),y.route.id){let{loaderData:x,errors:S}=n,A=y.route.loader&&!x.hasOwnProperty(y.route.id)&&(!S||S[y.route.id]===void 0);if(y.route.lazy||A){f=!0,p>=0?o=o.slice(0,p+1):o=[o[0]];break}}}return o.reduceRight((g,y,x)=>{let S,A=!1,F=null,G=null;n&&(S=c&&y.route.id?c[y.route.id]:void 0,F=y.route.errorElement||WS,f&&(p<0&&x===0?(Db("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),A=!0,G=null):p===x&&(A=!0,G=y.route.hydrateFallbackElement||null)));let q=e.concat(o.slice(0,x+1)),K=()=>{let J;return S?J=F:A?J=G:y.route.Component?J=C.createElement(y.route.Component,null):y.route.element?J=y.route.element:J=g,C.createElement(ZS,{match:y,routeContext:{outlet:g,matches:q,isDataRoute:n!=null},children:J})};return n&&(y.route.ErrorBoundary||y.route.errorElement||x===0)?C.createElement(XS,{location:n.location,revalidation:n.revalidation,component:F,error:S,children:K(),routeContext:{outlet:null,matches:q,isDataRoute:!0}}):K()},null)}function dp(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function YS(i){let e=C.useContext(yl);return Ft(e,dp(i)),e}function QS(i){let e=C.useContext($d);return Ft(e,dp(i)),e}function $S(i){let e=C.useContext(Xs);return Ft(e,dp(i)),e}function hp(i){let e=$S(i),n=e.matches[e.matches.length-1];return Ft(n.route.id,`${i} can only be used on routes that contain a unique "id"`),n.route.id}function JS(){return hp("useRouteId")}function eE(){var r;let i=C.useContext(up),e=QS("useRouteError"),n=hp("useRouteError");return i!==void 0?i:(r=e.errors)==null?void 0:r[n]}function tE(){let{router:i}=YS("useNavigate"),e=hp("useNavigate"),n=C.useRef(!1);return Nb(()=>{n.current=!0}),C.useCallback(async(o,c={})=>{us(n.current,kb),n.current&&(typeof o=="number"?i.navigate(o):await i.navigate(o,{fromRouteId:e,...c}))},[i,e])}var Ov={};function Db(i,e,n){!e&&!Ov[i]&&(Ov[i]=!0,us(!1,n))}C.memo(nE);function nE({routes:i,future:e,state:n}){return jb(i,void 0,n,e)}function Ar(i){Ft(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function iE({basename:i="/",children:e=null,location:n,navigationType:r="POP",navigator:o,static:c=!1}){Ft(!Yc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=i.replace(/^\/*/,"/"),p=C.useMemo(()=>({basename:f,navigator:o,static:c,future:{}}),[f,o,c]);typeof n=="string"&&(n=fo(n));let{pathname:g="/",search:y="",hash:x="",state:S=null,key:A="default"}=n,F=C.useMemo(()=>{let G=Nr(g,f);return G==null?null:{location:{pathname:G,search:y,hash:x,state:S,key:A},navigationType:r}},[f,g,y,x,S,A,r]);return us(F!=null,`<Router basename="${f}"> is not able to match the URL "${g}${y}${x}" because it does not start with the basename, so the <Router> won't render anything.`),F==null?null:C.createElement(Ws.Provider,{value:p},C.createElement(Kc.Provider,{children:e,value:F}))}function sE({children:i,location:e}){return qS(Lm(i),e)}function Lm(i,e=[]){let n=[];return C.Children.forEach(i,(r,o)=>{if(!C.isValidElement(r))return;let c=[...e,o];if(r.type===C.Fragment){n.push.apply(n,Lm(r.props.children,c));return}Ft(r.type===Ar,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ft(!r.props.index||!r.props.children,"An index route cannot have child routes.");let f={id:r.props.id||c.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(f.children=Lm(r.props.children,c)),n.push(f)}),n}var gd="get",yd="application/x-www-form-urlencoded";function Jd(i){return i!=null&&typeof i.tagName=="string"}function rE(i){return Jd(i)&&i.tagName.toLowerCase()==="button"}function aE(i){return Jd(i)&&i.tagName.toLowerCase()==="form"}function oE(i){return Jd(i)&&i.tagName.toLowerCase()==="input"}function lE(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function cE(i,e){return i.button===0&&(!e||e==="_self")&&!lE(i)}var cd=null;function uE(){if(cd===null)try{new FormData(document.createElement("form"),0),cd=!1}catch{cd=!0}return cd}var dE=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function vm(i){return i!=null&&!dE.has(i)?(us(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${yd}"`),null):i}function hE(i,e){let n,r,o,c,f;if(aE(i)){let p=i.getAttribute("action");r=p?Nr(p,e):null,n=i.getAttribute("method")||gd,o=vm(i.getAttribute("enctype"))||yd,c=new FormData(i)}else if(rE(i)||oE(i)&&(i.type==="submit"||i.type==="image")){let p=i.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=i.getAttribute("formaction")||p.getAttribute("action");if(r=g?Nr(g,e):null,n=i.getAttribute("formmethod")||p.getAttribute("method")||gd,o=vm(i.getAttribute("formenctype"))||vm(p.getAttribute("enctype"))||yd,c=new FormData(p,i),!uE()){let{name:y,type:x,value:S}=i;if(x==="image"){let A=y?`${y}.`:"";c.append(`${A}x`,"0"),c.append(`${A}y`,"0")}else y&&c.append(y,S)}}else{if(Jd(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=gd,r=null,o=yd,f=i}return c&&o==="text/plain"&&(f=c,c=void 0),{action:r,method:n.toLowerCase(),encType:o,formData:c,body:f}}function fp(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}async function fE(i,e){if(i.id in e)return e[i.id];try{let n=await import(i.module);return e[i.id]=n,n}catch(n){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function mE(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function pE(i,e,n){let r=await Promise.all(i.map(async o=>{let c=e.routes[o.route.id];if(c){let f=await fE(c,n);return f.links?f.links():[]}return[]}));return bE(r.flat(1).filter(mE).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function Mv(i,e,n,r,o,c){let f=(g,y)=>n[y]?g.route.id!==n[y].route.id:!0,p=(g,y)=>{var x;return n[y].pathname!==g.pathname||((x=n[y].route.path)==null?void 0:x.endsWith("*"))&&n[y].params["*"]!==g.params["*"]};return c==="assets"?e.filter((g,y)=>f(g,y)||p(g,y)):c==="data"?e.filter((g,y)=>{var S;let x=r.routes[g.route.id];if(!x||!x.hasLoader)return!1;if(f(g,y)||p(g,y))return!0;if(g.route.shouldRevalidate){let A=g.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((S=n[0])==null?void 0:S.params)||{},nextUrl:new URL(i,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof A=="boolean")return A}return!0}):[]}function gE(i,e,{includeHydrateFallback:n}={}){return yE(i.map(r=>{let o=e.routes[r.route.id];if(!o)return[];let c=[o.module];return o.clientActionModule&&(c=c.concat(o.clientActionModule)),o.clientLoaderModule&&(c=c.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(c=c.concat(o.hydrateFallbackModule)),o.imports&&(c=c.concat(o.imports)),c}).flat(1))}function yE(i){return[...new Set(i)]}function vE(i){let e={},n=Object.keys(i).sort();for(let r of n)e[r]=i[r];return e}function bE(i,e){let n=new Set;return new Set(e),i.reduce((r,o)=>{let c=JSON.stringify(vE(o));return n.has(c)||(n.add(c),r.push({key:c,link:o})),r},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var _E=new Set([100,101,204,205]);function xE(i,e){let n=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return n.pathname==="/"?n.pathname="_root.data":e&&Nr(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function Ob(){let i=C.useContext(yl);return fp(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function wE(){let i=C.useContext($d);return fp(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var mp=C.createContext(void 0);mp.displayName="FrameworkContext";function Mb(){let i=C.useContext(mp);return fp(i,"You must render this element inside a <HydratedRouter> element"),i}function SE(i,e){let n=C.useContext(mp),[r,o]=C.useState(!1),[c,f]=C.useState(!1),{onFocus:p,onBlur:g,onMouseEnter:y,onMouseLeave:x,onTouchStart:S}=e,A=C.useRef(null);C.useEffect(()=>{if(i==="render"&&f(!0),i==="viewport"){let q=J=>{J.forEach(Y=>{f(Y.isIntersecting)})},K=new IntersectionObserver(q,{threshold:.5});return A.current&&K.observe(A.current),()=>{K.disconnect()}}},[i]),C.useEffect(()=>{if(r){let q=setTimeout(()=>{f(!0)},100);return()=>{clearTimeout(q)}}},[r]);let F=()=>{o(!0)},G=()=>{o(!1),f(!1)};return n?i!=="intent"?[c,A,{}]:[c,A,{onFocus:bc(p,F),onBlur:bc(g,G),onMouseEnter:bc(y,F),onMouseLeave:bc(x,G),onTouchStart:bc(S,F)}]:[!1,A,{}]}function bc(i,e){return n=>{i&&i(n),n.defaultPrevented||e(n)}}function EE({page:i,...e}){let{router:n}=Ob(),r=C.useMemo(()=>Sb(n.routes,i,n.basename),[n.routes,i,n.basename]);return r?C.createElement(TE,{page:i,matches:r,...e}):null}function AE(i){let{manifest:e,routeModules:n}=Mb(),[r,o]=C.useState([]);return C.useEffect(()=>{let c=!1;return pE(i,e,n).then(f=>{c||o(f)}),()=>{c=!0}},[i,e,n]),r}function TE({page:i,matches:e,...n}){let r=fs(),{manifest:o,routeModules:c}=Mb(),{basename:f}=Ob(),{loaderData:p,matches:g}=wE(),y=C.useMemo(()=>Mv(i,e,g,o,r,"data"),[i,e,g,o,r]),x=C.useMemo(()=>Mv(i,e,g,o,r,"assets"),[i,e,g,o,r]),S=C.useMemo(()=>{if(i===r.pathname+r.search+r.hash)return[];let G=new Set,q=!1;if(e.forEach(J=>{var z;let Y=o.routes[J.route.id];!Y||!Y.hasLoader||(!y.some(me=>me.route.id===J.route.id)&&J.route.id in p&&((z=c[J.route.id])!=null&&z.shouldRevalidate)||Y.hasClientLoader?q=!0:G.add(J.route.id))}),G.size===0)return[];let K=xE(i,f);return q&&G.size>0&&K.searchParams.set("_routes",e.filter(J=>G.has(J.route.id)).map(J=>J.route.id).join(",")),[K.pathname+K.search]},[f,p,r,o,y,e,i,c]),A=C.useMemo(()=>gE(x,o),[x,o]),F=AE(x);return C.createElement(C.Fragment,null,S.map(G=>C.createElement("link",{key:G,rel:"prefetch",as:"fetch",href:G,...n})),A.map(G=>C.createElement("link",{key:G,rel:"modulepreload",href:G,...n})),F.map(({key:G,link:q})=>C.createElement("link",{key:G,...q})))}function RE(...i){return e=>{i.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Lb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Lb&&(window.__reactRouterVersion="7.6.1")}catch{}function CE({basename:i,children:e,window:n}){let r=C.useRef();r.current==null&&(r.current=mS({window:n,v5Compat:!0}));let o=r.current,[c,f]=C.useState({action:o.action,location:o.location}),p=C.useCallback(g=>{C.startTransition(()=>f(g))},[f]);return C.useLayoutEffect(()=>o.listen(p),[o,p]),C.createElement(iE,{basename:i,children:e,location:c.location,navigationType:c.action,navigator:o})}var Vb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Pb=C.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:o,reloadDocument:c,replace:f,state:p,target:g,to:y,preventScrollReset:x,viewTransition:S,...A},F){let{basename:G}=C.useContext(Ws),q=typeof y=="string"&&Vb.test(y),K,J=!1;if(typeof y=="string"&&q&&(K=y,Lb))try{let I=new URL(window.location.href),L=y.startsWith("//")?new URL(I.protocol+y):new URL(y),N=Nr(L.pathname,G);L.origin===I.origin&&N!=null?y=N+L.search+L.hash:J=!0}catch{us(!1,`<Link to="${y}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let Y=zS(y,{relative:o}),[z,me,fe]=SE(r,A),be=jE(y,{replace:f,state:p,target:g,preventScrollReset:x,relative:o,viewTransition:S});function M(I){e&&e(I),I.defaultPrevented||be(I)}let R=C.createElement("a",{...A,...fe,href:K||Y,onClick:J||c?e:M,ref:RE(F,me),target:g,"data-discover":!q&&n==="render"?"true":void 0});return z&&!q?C.createElement(C.Fragment,null,R,C.createElement(EE,{page:Y})):R});Pb.displayName="Link";var IE=C.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:o=!1,style:c,to:f,viewTransition:p,children:g,...y},x){let S=Qc(f,{relative:y.relative}),A=fs(),F=C.useContext($d),{navigator:G,basename:q}=C.useContext(Ws),K=F!=null&&VE(S)&&p===!0,J=G.encodeLocation?G.encodeLocation(S).pathname:S.pathname,Y=A.pathname,z=F&&F.navigation&&F.navigation.location?F.navigation.location.pathname:null;n||(Y=Y.toLowerCase(),z=z?z.toLowerCase():null,J=J.toLowerCase()),z&&q&&(z=Nr(z,q)||z);const me=J!=="/"&&J.endsWith("/")?J.length-1:J.length;let fe=Y===J||!o&&Y.startsWith(J)&&Y.charAt(me)==="/",be=z!=null&&(z===J||!o&&z.startsWith(J)&&z.charAt(J.length)==="/"),M={isActive:fe,isPending:be,isTransitioning:K},R=fe?e:void 0,I;typeof r=="function"?I=r(M):I=[r,fe?"active":null,be?"pending":null,K?"transitioning":null].filter(Boolean).join(" ");let L=typeof c=="function"?c(M):c;return C.createElement(Pb,{...y,"aria-current":R,className:I,ref:x,style:L,to:f,viewTransition:p},typeof g=="function"?g(M):g)});IE.displayName="NavLink";var kE=C.forwardRef(({discover:i="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:o,state:c,method:f=gd,action:p,onSubmit:g,relative:y,preventScrollReset:x,viewTransition:S,...A},F)=>{let G=ME(),q=LE(p,{relative:y}),K=f.toLowerCase()==="get"?"get":"post",J=typeof p=="string"&&Vb.test(p),Y=z=>{if(g&&g(z),z.defaultPrevented)return;z.preventDefault();let me=z.nativeEvent.submitter,fe=(me==null?void 0:me.getAttribute("formmethod"))||f;G(me||z.currentTarget,{fetcherKey:e,method:fe,navigate:n,replace:o,state:c,relative:y,preventScrollReset:x,viewTransition:S})};return C.createElement("form",{ref:F,method:K,action:q,onSubmit:r?g:Y,...A,"data-discover":!J&&i==="render"?"true":void 0})});kE.displayName="Form";function NE(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ub(i){let e=C.useContext(yl);return Ft(e,NE(i)),e}function jE(i,{target:e,replace:n,state:r,preventScrollReset:o,relative:c,viewTransition:f}={}){let p=Zs(),g=fs(),y=Qc(i,{relative:c});return C.useCallback(x=>{if(cE(x,e)){x.preventDefault();let S=n!==void 0?n:Vc(g)===Vc(y);p(i,{replace:S,state:r,preventScrollReset:o,relative:c,viewTransition:f})}},[g,p,y,n,r,e,i,o,c,f])}var DE=0,OE=()=>`__${String(++DE)}__`;function ME(){let{router:i}=Ub("useSubmit"),{basename:e}=C.useContext(Ws),n=JS();return C.useCallback(async(r,o={})=>{let{action:c,method:f,encType:p,formData:g,body:y}=hE(r,e);if(o.navigate===!1){let x=o.fetcherKey||OE();await i.fetch(x,n,o.action||c,{preventScrollReset:o.preventScrollReset,formData:g,body:y,formMethod:o.method||f,formEncType:o.encType||p,flushSync:o.flushSync})}else await i.navigate(o.action||c,{preventScrollReset:o.preventScrollReset,formData:g,body:y,formMethod:o.method||f,formEncType:o.encType||p,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[i,e,n])}function LE(i,{relative:e}={}){let{basename:n}=C.useContext(Ws),r=C.useContext(Xs);Ft(r,"useFormAction must be used inside a RouteContext");let[o]=r.matches.slice(-1),c={...Qc(i||".",{relative:e})},f=fs();if(i==null){c.search=f.search;let p=new URLSearchParams(c.search),g=p.getAll("index");if(g.some(x=>x==="")){p.delete("index"),g.filter(S=>S).forEach(S=>p.append("index",S));let x=p.toString();c.search=x?`?${x}`:""}}return(!i||i===".")&&o.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(c.pathname=c.pathname==="/"?n:Cr([n,c.pathname])),Vc(c)}function VE(i,e={}){let n=C.useContext(Ib);Ft(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Ub("useViewTransitionState"),o=Qc(i,{relative:e.relative});if(!n.isTransitioning)return!1;let c=Nr(n.currentLocation.pathname,r)||n.currentLocation.pathname,f=Nr(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Id(o.pathname,f)!=null||Id(o.pathname,c)!=null}[..._E];var PE=wb();const UE=()=>{};var Lv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bb=function(i){const e=[];let n=0;for(let r=0;r<i.length;r++){let o=i.charCodeAt(r);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&r+1<i.length&&(i.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++r)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},BE=function(i){const e=[];let n=0,r=0;for(;n<i.length;){const o=i[n++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const c=i[n++];e[r++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=i[n++],f=i[n++],p=i[n++],g=((o&7)<<18|(c&63)<<12|(f&63)<<6|p&63)-65536;e[r++]=String.fromCharCode(55296+(g>>10)),e[r++]=String.fromCharCode(56320+(g&1023))}else{const c=i[n++],f=i[n++];e[r++]=String.fromCharCode((o&15)<<12|(c&63)<<6|f&63)}}return e.join("")},zb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<i.length;o+=3){const c=i[o],f=o+1<i.length,p=f?i[o+1]:0,g=o+2<i.length,y=g?i[o+2]:0,x=c>>2,S=(c&3)<<4|p>>4;let A=(p&15)<<2|y>>6,F=y&63;g||(F=64,f||(A=64)),r.push(n[x],n[S],n[A],n[F])}return r.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(Bb(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):BE(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<i.length;){const c=n[i.charAt(o++)],p=o<i.length?n[i.charAt(o)]:0;++o;const y=o<i.length?n[i.charAt(o)]:64;++o;const S=o<i.length?n[i.charAt(o)]:64;if(++o,c==null||p==null||y==null||S==null)throw new zE;const A=c<<2|p>>4;if(r.push(A),y!==64){const F=p<<4&240|y>>2;if(r.push(F),S!==64){const G=y<<6&192|S;r.push(G)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class zE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const FE=function(i){const e=Bb(i);return zb.encodeByteArray(e,!0)},kd=function(i){return FE(i).replace(/\./g,"")},Fb=function(i){try{return zb.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qE=()=>HE().__FIREBASE_DEFAULTS__,GE=()=>{if(typeof process>"u"||typeof Lv>"u")return;const i=Lv.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},WE=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&Fb(i[1]);return e&&JSON.parse(e)},eh=()=>{try{return UE()||qE()||GE()||WE()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},Hb=i=>{var e,n;return(n=(e=eh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[i]},XE=i=>{const e=Hb(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},qb=()=>{var i;return(i=eh())===null||i===void 0?void 0:i.config},Gb=i=>{var e;return(e=eh())===null||e===void 0?void 0:e[`_${i}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vl(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Wb(i){return(await fetch(i,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KE(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",o=i.iat||0,c=i.sub||i.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}}},i);return[kd(JSON.stringify(n)),kd(JSON.stringify(f)),""].join(".")}const Cc={};function YE(){const i={prod:[],emulator:[]};for(const e of Object.keys(Cc))Cc[e]?i.emulator.push(e):i.prod.push(e);return i}function QE(i){let e=document.getElementById(i),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),n=!0),{created:n,element:e}}let Vv=!1;function Xb(i,e){if(typeof window>"u"||typeof document>"u"||!vl(window.location.host)||Cc[i]===e||Cc[i]||Vv)return;Cc[i]=e;function n(A){return`__firebase__banner__${A}`}const r="__firebase__banner",c=YE().prod.length>0;function f(){const A=document.getElementById(r);A&&A.remove()}function p(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function g(A,F){A.setAttribute("width","24"),A.setAttribute("id",F),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function y(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{Vv=!0,f()},A}function x(A,F){A.setAttribute("id",F),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function S(){const A=QE(r),F=n("text"),G=document.getElementById(F)||document.createElement("span"),q=n("learnmore"),K=document.getElementById(q)||document.createElement("a"),J=n("preprendIcon"),Y=document.getElementById(J)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const z=A.element;p(z),x(K,q);const me=y();g(Y,J),z.append(Y,G,K,me),document.body.appendChild(z)}c?(G.innerText="Preview backend disconnected.",Y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,G.innerText="Preview backend running in this workspace."),G.setAttribute("id",F)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",S):S()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function $E(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Zn())}function JE(){var i;const e=(i=eh())===null||i===void 0?void 0:i.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function eA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Zb(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function tA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function nA(){const i=Zn();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function iA(){return!JE()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Kb(){try{return typeof indexedDB=="object"}catch{return!1}}function Yb(){return new Promise((i,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(r),i(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var c;e(((c=o.error)===null||c===void 0?void 0:c.message)||"")}}catch(n){e(n)}})}function sA(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rA="FirebaseError";class ms extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=rA,Object.setPrototypeOf(this,ms.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,mo.prototype.create)}}class mo{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},o=`${this.service}/${e}`,c=this.errors[e],f=c?aA(c,r):"Error",p=`${this.serviceName}: ${f} (${o}).`;return new ms(o,p,r)}}function aA(i,e){return i.replace(oA,(n,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const oA=/\{\$([^}]+)}/g;function lA(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function _a(i,e){if(i===e)return!0;const n=Object.keys(i),r=Object.keys(e);for(const o of n){if(!r.includes(o))return!1;const c=i[o],f=e[o];if(Pv(c)&&Pv(f)){if(!_a(c,f))return!1}else if(c!==f)return!1}for(const o of r)if(!n.includes(o))return!1;return!0}function Pv(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $c(i){const e=[];for(const[n,r]of Object.entries(i))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function xc(i){const e={};return i.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[o,c]=r.split("=");e[decodeURIComponent(o)]=decodeURIComponent(c)}}),e}function wc(i){const e=i.indexOf("?");if(!e)return"";const n=i.indexOf("#",e);return i.substring(e,n>0?n:void 0)}function cA(i,e){const n=new uA(i,e);return n.subscribe.bind(n)}class uA{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let o;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");dA(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:r},o.next===void 0&&(o.next=bm),o.error===void 0&&(o.error=bm),o.complete===void 0&&(o.complete=bm);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function dA(i,e){if(typeof i!="object"||i===null)return!1;for(const n of e)if(n in i&&typeof i[n]=="function")return!0;return!1}function bm(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hA=1e3,fA=2,mA=4*60*60*1e3,pA=.5;function Uv(i,e=hA,n=fA){const r=e*Math.pow(n,i),o=Math.round(pA*r*(Math.random()-.5)*2);return Math.min(mA,r+o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ei(i){return i&&i._delegate?i._delegate:i}class ds{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const no="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new ZE;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(c){if(o)return null;throw c}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(vA(e))try{this.getOrInitializeService({instanceIdentifier:no})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:o});r.resolve(c)}catch{}}}}clearInstance(e=no){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=no){return this.instances.has(e)}getOptions(e=no){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[c,f]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(c);r===p&&f.resolve(o)}return o}onInit(e,n){var r;const o=this.normalizeInstanceIdentifier(n),c=(r=this.onInitCallbacks.get(o))!==null&&r!==void 0?r:new Set;c.add(e),this.onInitCallbacks.set(o,c);const f=this.instances.get(o);return f&&e(f,o),()=>{c.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const o of r)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:yA(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=no){return this.component?this.component.multipleInstances?e:no:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function yA(i){return i===no?void 0:i}function vA(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new gA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rt;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(rt||(rt={}));const _A={debug:rt.DEBUG,verbose:rt.VERBOSE,info:rt.INFO,warn:rt.WARN,error:rt.ERROR,silent:rt.SILENT},xA=rt.INFO,wA={[rt.DEBUG]:"log",[rt.VERBOSE]:"log",[rt.INFO]:"info",[rt.WARN]:"warn",[rt.ERROR]:"error"},SA=(i,e,...n)=>{if(e<i.logLevel)return;const r=new Date().toISOString(),o=wA[e];if(o)console[o](`[${r}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class th{constructor(e){this.name=e,this._logLevel=xA,this._logHandler=SA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in rt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?_A[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,rt.DEBUG,...e),this._logHandler(this,rt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,rt.VERBOSE,...e),this._logHandler(this,rt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,rt.INFO,...e),this._logHandler(this,rt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,rt.WARN,...e),this._logHandler(this,rt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,rt.ERROR,...e),this._logHandler(this,rt.ERROR,...e)}}const EA=(i,e)=>e.some(n=>i instanceof n);let Bv,zv;function AA(){return Bv||(Bv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function TA(){return zv||(zv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Qb=new WeakMap,Vm=new WeakMap,$b=new WeakMap,_m=new WeakMap,pp=new WeakMap;function RA(i){const e=new Promise((n,r)=>{const o=()=>{i.removeEventListener("success",c),i.removeEventListener("error",f)},c=()=>{n(ga(i.result)),o()},f=()=>{r(i.error),o()};i.addEventListener("success",c),i.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&Qb.set(n,i)}).catch(()=>{}),pp.set(e,i),e}function CA(i){if(Vm.has(i))return;const e=new Promise((n,r)=>{const o=()=>{i.removeEventListener("complete",c),i.removeEventListener("error",f),i.removeEventListener("abort",f)},c=()=>{n(),o()},f=()=>{r(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",c),i.addEventListener("error",f),i.addEventListener("abort",f)});Vm.set(i,e)}let Pm={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return Vm.get(i);if(e==="objectStoreNames")return i.objectStoreNames||$b.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ga(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function IA(i){Pm=i(Pm)}function kA(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=i.call(xm(this),e,...n);return $b.set(r,e.sort?e.sort():[e]),ga(r)}:TA().includes(i)?function(...e){return i.apply(xm(this),e),ga(Qb.get(this))}:function(...e){return ga(i.apply(xm(this),e))}}function NA(i){return typeof i=="function"?kA(i):(i instanceof IDBTransaction&&CA(i),EA(i,AA())?new Proxy(i,Pm):i)}function ga(i){if(i instanceof IDBRequest)return RA(i);if(_m.has(i))return _m.get(i);const e=NA(i);return e!==i&&(_m.set(i,e),pp.set(e,i)),e}const xm=i=>pp.get(i);function Jb(i,e,{blocked:n,upgrade:r,blocking:o,terminated:c}={}){const f=indexedDB.open(i,e),p=ga(f);return r&&f.addEventListener("upgradeneeded",g=>{r(ga(f.result),g.oldVersion,g.newVersion,ga(f.transaction),g)}),n&&f.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),p.then(g=>{c&&g.addEventListener("close",()=>c()),o&&g.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),p}const jA=["get","getKey","getAll","getAllKeys","count"],DA=["put","add","delete","clear"],wm=new Map;function Fv(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(wm.get(e))return wm.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,o=DA.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(o||jA.includes(n)))return;const c=async function(f,...p){const g=this.transaction(f,o?"readwrite":"readonly");let y=g.store;return r&&(y=y.index(p.shift())),(await Promise.all([y[n](...p),o&&g.done]))[0]};return wm.set(e,c),c}IA(i=>({...i,get:(e,n,r)=>Fv(e,n)||i.get(e,n,r),has:(e,n)=>!!Fv(e,n)||i.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(MA(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function MA(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Um="@firebase/app",Hv="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jr=new th("@firebase/app"),LA="@firebase/app-compat",VA="@firebase/analytics-compat",PA="@firebase/analytics",UA="@firebase/app-check-compat",BA="@firebase/app-check",zA="@firebase/auth",FA="@firebase/auth-compat",HA="@firebase/database",qA="@firebase/data-connect",GA="@firebase/database-compat",WA="@firebase/functions",XA="@firebase/functions-compat",ZA="@firebase/installations",KA="@firebase/installations-compat",YA="@firebase/messaging",QA="@firebase/messaging-compat",$A="@firebase/performance",JA="@firebase/performance-compat",eT="@firebase/remote-config",tT="@firebase/remote-config-compat",nT="@firebase/storage",iT="@firebase/storage-compat",sT="@firebase/firestore",rT="@firebase/ai",aT="@firebase/firestore-compat",oT="firebase",lT="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bm="[DEFAULT]",cT={[Um]:"fire-core",[LA]:"fire-core-compat",[PA]:"fire-analytics",[VA]:"fire-analytics-compat",[BA]:"fire-app-check",[UA]:"fire-app-check-compat",[zA]:"fire-auth",[FA]:"fire-auth-compat",[HA]:"fire-rtdb",[qA]:"fire-data-connect",[GA]:"fire-rtdb-compat",[WA]:"fire-fn",[XA]:"fire-fn-compat",[ZA]:"fire-iid",[KA]:"fire-iid-compat",[YA]:"fire-fcm",[QA]:"fire-fcm-compat",[$A]:"fire-perf",[JA]:"fire-perf-compat",[eT]:"fire-rc",[tT]:"fire-rc-compat",[nT]:"fire-gcs",[iT]:"fire-gcs-compat",[sT]:"fire-fst",[aT]:"fire-fst-compat",[rT]:"fire-vertex","fire-js":"fire-js",[oT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nd=new Map,uT=new Map,zm=new Map;function qv(i,e){try{i.container.addComponent(e)}catch(n){jr.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function Hs(i){const e=i.name;if(zm.has(e))return jr.debug(`There were multiple attempts to register component ${e}.`),!1;zm.set(e,i);for(const n of Nd.values())qv(n,i);for(const n of uT.values())qv(n,i);return!0}function po(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}function Fi(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ya=new mo("app","Firebase",dT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ds("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ya.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bl=lT;function e_(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Bm,automaticDataCollectionEnabled:!0},e),o=r.name;if(typeof o!="string"||!o)throw ya.create("bad-app-name",{appName:String(o)});if(n||(n=qb()),!n)throw ya.create("no-options");const c=Nd.get(o);if(c){if(_a(n,c.options)&&_a(r,c.config))return c;throw ya.create("duplicate-app",{appName:o})}const f=new bA(o);for(const g of zm.values())f.addComponent(g);const p=new hT(n,r,f);return Nd.set(o,p),p}function gp(i=Bm){const e=Nd.get(i);if(!e&&i===Bm&&qb())return e_();if(!e)throw ya.create("no-app",{appName:i});return e}function Gi(i,e,n){var r;let o=(r=cT[i])!==null&&r!==void 0?r:i;n&&(o+=`-${n}`);const c=o.match(/\s|\//),f=e.match(/\s|\//);if(c||f){const p=[`Unable to register library "${o}" with version "${e}":`];c&&p.push(`library name "${o}" contains illegal characters (whitespace or "/")`),c&&f&&p.push("and"),f&&p.push(`version name "${e}" contains illegal characters (whitespace or "/")`),jr.warn(p.join(" "));return}Hs(new ds(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fT="firebase-heartbeat-database",mT=1,Pc="firebase-heartbeat-store";let Sm=null;function t_(){return Sm||(Sm=Jb(fT,mT,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(Pc)}catch(n){console.warn(n)}}}}).catch(i=>{throw ya.create("idb-open",{originalErrorMessage:i.message})})),Sm}async function pT(i){try{const n=(await t_()).transaction(Pc),r=await n.objectStore(Pc).get(n_(i));return await n.done,r}catch(e){if(e instanceof ms)jr.warn(e.message);else{const n=ya.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});jr.warn(n.message)}}}async function Gv(i,e){try{const r=(await t_()).transaction(Pc,"readwrite");await r.objectStore(Pc).put(e,n_(i)),await r.done}catch(n){if(n instanceof ms)jr.warn(n.message);else{const r=ya.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});jr.warn(r.message)}}}function n_(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gT=1024,yT=30;class vT{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new _T(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=Wv();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(f=>f.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:o}),this._heartbeatsCache.heartbeats.length>yT){const f=xT(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(f,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){jr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Wv(),{heartbeatsToSend:r,unsentEntries:o}=bT(this._heartbeatsCache.heartbeats),c=kd(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(n){return jr.warn(n),""}}}function Wv(){return new Date().toISOString().substring(0,10)}function bT(i,e=gT){const n=[];let r=i.slice();for(const o of i){const c=n.find(f=>f.agent===o.agent);if(c){if(c.dates.push(o.date),Xv(n)>e){c.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),Xv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class _T{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Kb()?Yb().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await pT(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return Gv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return Gv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function Xv(i){return kd(JSON.stringify({version:2,heartbeats:i})).length}function xT(i){if(i.length===0)return-1;let e=0,n=i[0].date;for(let r=1;r<i.length;r++)i[r].date<n&&(n=i[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wT(i){Hs(new ds("platform-logger",e=>new OA(e),"PRIVATE")),Hs(new ds("heartbeat",e=>new vT(e),"PRIVATE")),Gi(Um,Hv,i),Gi(Um,Hv,"esm2017"),Gi("fire-js","")}wT("");var ST="firebase",ET="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Gi(ST,ET,"app");const i_="@firebase/installations",yp="0.6.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s_=1e4,r_=`w:${yp}`,a_="FIS_v2",AT="https://firebaseinstallations.googleapis.com/v1",TT=60*60*1e3,RT="installations",CT="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IT={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ao=new mo(RT,CT,IT);function o_(i){return i instanceof ms&&i.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l_({projectId:i}){return`${AT}/projects/${i}/installations`}function c_(i){return{token:i.token,requestStatus:2,expiresIn:NT(i.expiresIn),creationTime:Date.now()}}async function u_(i,e){const r=(await e.json()).error;return ao.create("request-failed",{requestName:i,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function d_({apiKey:i}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":i})}function kT(i,{refreshToken:e}){const n=d_(i);return n.append("Authorization",jT(e)),n}async function h_(i){const e=await i();return e.status>=500&&e.status<600?i():e}function NT(i){return Number(i.replace("s","000"))}function jT(i){return`${a_} ${i}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DT({appConfig:i,heartbeatServiceProvider:e},{fid:n}){const r=l_(i),o=d_(i),c=e.getImmediate({optional:!0});if(c){const y=await c.getHeartbeatsHeader();y&&o.append("x-firebase-client",y)}const f={fid:n,authVersion:a_,appId:i.appId,sdkVersion:r_},p={method:"POST",headers:o,body:JSON.stringify(f)},g=await h_(()=>fetch(r,p));if(g.ok){const y=await g.json();return{fid:y.fid||n,registrationStatus:2,refreshToken:y.refreshToken,authToken:c_(y.authToken)}}else throw await u_("Create Installation",g)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f_(i){return new Promise(e=>{setTimeout(e,i)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OT(i){return btoa(String.fromCharCode(...i)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MT=/^[cdef][\w-]{21}$/,Fm="";function LT(){try{const i=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(i),i[0]=112+i[0]%16;const n=VT(i);return MT.test(n)?n:Fm}catch{return Fm}}function VT(i){return OT(i).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nh(i){return`${i.appName}!${i.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m_=new Map;function p_(i,e){const n=nh(i);g_(n,e),PT(n,e)}function g_(i,e){const n=m_.get(i);if(n)for(const r of n)r(e)}function PT(i,e){const n=UT();n&&n.postMessage({key:i,fid:e}),BT()}let io=null;function UT(){return!io&&"BroadcastChannel"in self&&(io=new BroadcastChannel("[Firebase] FID Change"),io.onmessage=i=>{g_(i.data.key,i.data.fid)}),io}function BT(){m_.size===0&&io&&(io.close(),io=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zT="firebase-installations-database",FT=1,oo="firebase-installations-store";let Em=null;function vp(){return Em||(Em=Jb(zT,FT,{upgrade:(i,e)=>{switch(e){case 0:i.createObjectStore(oo)}}})),Em}async function jd(i,e){const n=nh(i),o=(await vp()).transaction(oo,"readwrite"),c=o.objectStore(oo),f=await c.get(n);return await c.put(e,n),await o.done,(!f||f.fid!==e.fid)&&p_(i,e.fid),e}async function y_(i){const e=nh(i),r=(await vp()).transaction(oo,"readwrite");await r.objectStore(oo).delete(e),await r.done}async function ih(i,e){const n=nh(i),o=(await vp()).transaction(oo,"readwrite"),c=o.objectStore(oo),f=await c.get(n),p=e(f);return p===void 0?await c.delete(n):await c.put(p,n),await o.done,p&&(!f||f.fid!==p.fid)&&p_(i,p.fid),p}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bp(i){let e;const n=await ih(i.appConfig,r=>{const o=HT(r),c=qT(i,o);return e=c.registrationPromise,c.installationEntry});return n.fid===Fm?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function HT(i){const e=i||{fid:LT(),registrationStatus:0};return v_(e)}function qT(i,e){if(e.registrationStatus===0){if(!navigator.onLine){const o=Promise.reject(ao.create("app-offline"));return{installationEntry:e,registrationPromise:o}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=GT(i,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:WT(i)}:{installationEntry:e}}async function GT(i,e){try{const n=await DT(i,e);return jd(i.appConfig,n)}catch(n){throw o_(n)&&n.customData.serverCode===409?await y_(i.appConfig):await jd(i.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function WT(i){let e=await Zv(i.appConfig);for(;e.registrationStatus===1;)await f_(100),e=await Zv(i.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await bp(i);return r||n}return e}function Zv(i){return ih(i,e=>{if(!e)throw ao.create("installation-not-found");return v_(e)})}function v_(i){return XT(i)?{fid:i.fid,registrationStatus:0}:i}function XT(i){return i.registrationStatus===1&&i.registrationTime+s_<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZT({appConfig:i,heartbeatServiceProvider:e},n){const r=KT(i,n),o=kT(i,n),c=e.getImmediate({optional:!0});if(c){const y=await c.getHeartbeatsHeader();y&&o.append("x-firebase-client",y)}const f={installation:{sdkVersion:r_,appId:i.appId}},p={method:"POST",headers:o,body:JSON.stringify(f)},g=await h_(()=>fetch(r,p));if(g.ok){const y=await g.json();return c_(y)}else throw await u_("Generate Auth Token",g)}function KT(i,{fid:e}){return`${l_(i)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _p(i,e=!1){let n;const r=await ih(i.appConfig,c=>{if(!b_(c))throw ao.create("not-registered");const f=c.authToken;if(!e&&$T(f))return c;if(f.requestStatus===1)return n=YT(i,e),c;{if(!navigator.onLine)throw ao.create("app-offline");const p=eR(c);return n=QT(i,p),p}});return n?await n:r.authToken}async function YT(i,e){let n=await Kv(i.appConfig);for(;n.authToken.requestStatus===1;)await f_(100),n=await Kv(i.appConfig);const r=n.authToken;return r.requestStatus===0?_p(i,e):r}function Kv(i){return ih(i,e=>{if(!b_(e))throw ao.create("not-registered");const n=e.authToken;return tR(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function QT(i,e){try{const n=await ZT(i,e),r=Object.assign(Object.assign({},e),{authToken:n});return await jd(i.appConfig,r),n}catch(n){if(o_(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await y_(i.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await jd(i.appConfig,r)}throw n}}function b_(i){return i!==void 0&&i.registrationStatus===2}function $T(i){return i.requestStatus===2&&!JT(i)}function JT(i){const e=Date.now();return e<i.creationTime||i.creationTime+i.expiresIn<e+TT}function eR(i){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},i),{authToken:e})}function tR(i){return i.requestStatus===1&&i.requestTime+s_<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nR(i){const e=i,{installationEntry:n,registrationPromise:r}=await bp(e);return r?r.catch(console.error):_p(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iR(i,e=!1){const n=i;return await sR(n),(await _p(n,e)).token}async function sR(i){const{registrationPromise:e}=await bp(i);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rR(i){if(!i||!i.options)throw Am("App Configuration");if(!i.name)throw Am("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!i.options[n])throw Am(n);return{appName:i.name,projectId:i.options.projectId,apiKey:i.options.apiKey,appId:i.options.appId}}function Am(i){return ao.create("missing-app-config-values",{valueName:i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const __="installations",aR="installations-internal",oR=i=>{const e=i.getProvider("app").getImmediate(),n=rR(e),r=po(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},lR=i=>{const e=i.getProvider("app").getImmediate(),n=po(e,__).getImmediate();return{getId:()=>nR(n),getToken:o=>iR(n,o)}};function cR(){Hs(new ds(__,oR,"PUBLIC")),Hs(new ds(aR,lR,"PRIVATE"))}cR();Gi(i_,yp);Gi(i_,yp,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dd="analytics",uR="firebase_id",dR="origin",hR=60*1e3,fR="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",xp="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ui=new th("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mR={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Ai=new mo("analytics","Analytics",mR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pR(i){if(!i.startsWith(xp)){const e=Ai.create("invalid-gtag-resource",{gtagURL:i});return ui.warn(e.message),""}return i}function x_(i){return Promise.all(i.map(e=>e.catch(n=>n)))}function gR(i,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(i,e)),n}function yR(i,e){const n=gR("firebase-js-sdk-policy",{createScriptURL:pR}),r=document.createElement("script"),o=`${xp}?l=${i}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(o):o,r.async=!0,document.head.appendChild(r)}function vR(i){let e=[];return Array.isArray(window[i])?e=window[i]:window[i]=e,e}async function bR(i,e,n,r,o,c){const f=r[o];try{if(f)await e[f];else{const g=(await x_(n)).find(y=>y.measurementId===o);g&&await e[g.appId]}}catch(p){ui.error(p)}i("config",o,c)}async function _R(i,e,n,r,o){try{let c=[];if(o&&o.send_to){let f=o.send_to;Array.isArray(f)||(f=[f]);const p=await x_(n);for(const g of f){const y=p.find(S=>S.measurementId===g),x=y&&e[y.appId];if(x)c.push(x);else{c=[];break}}}c.length===0&&(c=Object.values(e)),await Promise.all(c),i("event",r,o||{})}catch(c){ui.error(c)}}function xR(i,e,n,r){async function o(c,...f){try{if(c==="event"){const[p,g]=f;await _R(i,e,n,p,g)}else if(c==="config"){const[p,g]=f;await bR(i,e,n,r,p,g)}else if(c==="consent"){const[p,g]=f;i("consent",p,g)}else if(c==="get"){const[p,g,y]=f;i("get",p,g,y)}else if(c==="set"){const[p]=f;i("set",p)}else i(c,...f)}catch(p){ui.error(p)}}return o}function wR(i,e,n,r,o){let c=function(...f){window[r].push(arguments)};return window[o]&&typeof window[o]=="function"&&(c=window[o]),window[o]=xR(c,i,e,n),{gtagCore:c,wrappedGtag:window[o]}}function SR(i){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(xp)&&n.src.includes(i))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ER=30,AR=1e3;class TR{constructor(e={},n=AR){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const w_=new TR;function RR(i){return new Headers({Accept:"application/json","x-goog-api-key":i})}async function CR(i){var e;const{appId:n,apiKey:r}=i,o={method:"GET",headers:RR(r)},c=fR.replace("{app-id}",n),f=await fetch(c,o);if(f.status!==200&&f.status!==304){let p="";try{const g=await f.json();!((e=g.error)===null||e===void 0)&&e.message&&(p=g.error.message)}catch{}throw Ai.create("config-fetch-failed",{httpStatus:f.status,responseMessage:p})}return f.json()}async function IR(i,e=w_,n){const{appId:r,apiKey:o,measurementId:c}=i.options;if(!r)throw Ai.create("no-app-id");if(!o){if(c)return{measurementId:c,appId:r};throw Ai.create("no-api-key")}const f=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},p=new jR;return setTimeout(async()=>{p.abort()},hR),S_({appId:r,apiKey:o,measurementId:c},f,p,e)}async function S_(i,{throttleEndTimeMillis:e,backoffCount:n},r,o=w_){var c;const{appId:f,measurementId:p}=i;try{await kR(r,e)}catch(g){if(p)return ui.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${p} provided in the "measurementId" field in the local Firebase config. [${g==null?void 0:g.message}]`),{appId:f,measurementId:p};throw g}try{const g=await CR(i);return o.deleteThrottleMetadata(f),g}catch(g){const y=g;if(!NR(y)){if(o.deleteThrottleMetadata(f),p)return ui.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${p} provided in the "measurementId" field in the local Firebase config. [${y==null?void 0:y.message}]`),{appId:f,measurementId:p};throw g}const x=Number((c=y==null?void 0:y.customData)===null||c===void 0?void 0:c.httpStatus)===503?Uv(n,o.intervalMillis,ER):Uv(n,o.intervalMillis),S={throttleEndTimeMillis:Date.now()+x,backoffCount:n+1};return o.setThrottleMetadata(f,S),ui.debug(`Calling attemptFetch again in ${x} millis`),S_(i,S,r,o)}}function kR(i,e){return new Promise((n,r)=>{const o=Math.max(e-Date.now(),0),c=setTimeout(n,o);i.addEventListener(()=>{clearTimeout(c),r(Ai.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function NR(i){if(!(i instanceof ms)||!i.customData)return!1;const e=Number(i.customData.httpStatus);return e===429||e===500||e===503||e===504}class jR{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function DR(i,e,n,r,o){if(o&&o.global){i("event",n,r);return}else{const c=await e,f=Object.assign(Object.assign({},r),{send_to:c});i("event",n,f)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OR(){if(Kb())try{await Yb()}catch(i){return ui.warn(Ai.create("indexeddb-unavailable",{errorInfo:i==null?void 0:i.toString()}).message),!1}else return ui.warn(Ai.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function MR(i,e,n,r,o,c,f){var p;const g=IR(i);g.then(F=>{n[F.measurementId]=F.appId,i.options.measurementId&&F.measurementId!==i.options.measurementId&&ui.warn(`The measurement ID in the local Firebase config (${i.options.measurementId}) does not match the measurement ID fetched from the server (${F.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(F=>ui.error(F)),e.push(g);const y=OR().then(F=>{if(F)return r.getId()}),[x,S]=await Promise.all([g,y]);SR(c)||yR(c,x.measurementId),o("js",new Date);const A=(p=f==null?void 0:f.config)!==null&&p!==void 0?p:{};return A[dR]="firebase",A.update=!0,S!=null&&(A[uR]=S),o("config",x.measurementId,A),x.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(e){this.app=e}_delete(){return delete Ic[this.app.options.appId],Promise.resolve()}}let Ic={},Yv=[];const Qv={};let Tm="dataLayer",VR="gtag",$v,E_,Jv=!1;function PR(){const i=[];if(Zb()&&i.push("This is a browser extension environment."),sA()||i.push("Cookies are not available."),i.length>0){const e=i.map((r,o)=>`(${o+1}) ${r}`).join(" "),n=Ai.create("invalid-analytics-context",{errorInfo:e});ui.warn(n.message)}}function UR(i,e,n){PR();const r=i.options.appId;if(!r)throw Ai.create("no-app-id");if(!i.options.apiKey)if(i.options.measurementId)ui.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${i.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Ai.create("no-api-key");if(Ic[r]!=null)throw Ai.create("already-exists",{id:r});if(!Jv){vR(Tm);const{wrappedGtag:c,gtagCore:f}=wR(Ic,Yv,Qv,Tm,VR);E_=c,$v=f,Jv=!0}return Ic[r]=MR(i,Yv,Qv,e,$v,Tm,n),new LR(i)}function BR(i=gp()){i=ei(i);const e=po(i,Dd);return e.isInitialized()?e.getImmediate():zR(i)}function zR(i,e={}){const n=po(i,Dd);if(n.isInitialized()){const o=n.getImmediate();if(_a(e,n.getOptions()))return o;throw Ai.create("already-initialized")}return n.initialize({options:e})}function FR(i,e,n,r){i=ei(i),DR(E_,Ic[i.app.options.appId],e,n,r).catch(o=>ui.error(o))}const e1="@firebase/analytics",t1="0.10.17";function HR(){Hs(new ds(Dd,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("installations-internal").getImmediate();return UR(r,o,n)},"PUBLIC")),Hs(new ds("analytics-internal",i,"PRIVATE")),Gi(e1,t1),Gi(e1,t1,"esm2017");function i(e){try{const n=e.getProvider(Dd).getImmediate();return{logEvent:(r,o,c)=>FR(n,r,o,c)}}catch(n){throw Ai.create("interop-component-reg-failed",{reason:n})}}}HR();function wp(i,e){var n={};for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&e.indexOf(r)<0&&(n[r]=i[r]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(i);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(i,r[o])&&(n[r[o]]=i[r[o]]);return n}function A_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const qR=A_,T_=new mo("auth","Firebase",A_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Od=new th("@firebase/auth");function GR(i,...e){Od.logLevel<=rt.WARN&&Od.warn(`Auth (${bl}): ${i}`,...e)}function vd(i,...e){Od.logLevel<=rt.ERROR&&Od.error(`Auth (${bl}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hs(i,...e){throw Sp(i,...e)}function Vs(i,...e){return Sp(i,...e)}function R_(i,e,n){const r=Object.assign(Object.assign({},qR()),{[e]:n});return new mo("auth","Firebase",r).create(e,{appName:i.name})}function Ir(i){return R_(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Sp(i,...e){if(typeof i!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=i.name),i._errorFactory.create(n,...r)}return T_.create(i,...e)}function Pe(i,e,...n){if(!i)throw Sp(e,...n)}function Tr(i){const e="INTERNAL ASSERTION FAILED: "+i;throw vd(e),new Error(e)}function Dr(i,e){i||Tr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hm(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.href)||""}function WR(){return n1()==="http:"||n1()==="https:"}function n1(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(WR()||Zb()||"connection"in navigator)?navigator.onLine:!0}function ZR(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Dr(n>e,"Short delay should be less than long delay!"),this.isMobile=$E()||tA()}get(){return XR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ep(i,e){Dr(i.emulator,"Emulator should always be set here");const{url:n}=i.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Tr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Tr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Tr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],QR=new Jc(3e4,6e4);function Ca(i,e){return i.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:i.tenantId}):e}async function Ia(i,e,n,r,o={}){return I_(i,o,async()=>{let c={},f={};r&&(e==="GET"?f=r:c={body:JSON.stringify(r)});const p=$c(Object.assign({key:i.config.apiKey},f)).slice(1),g=await i._getAdditionalHeaders();g["Content-Type"]="application/json",i.languageCode&&(g["X-Firebase-Locale"]=i.languageCode);const y=Object.assign({method:e,headers:g},c);return eA()||(y.referrerPolicy="no-referrer"),i.emulatorConfig&&vl(i.emulatorConfig.host)&&(y.credentials="include"),C_.fetch()(await k_(i,i.config.apiHost,n,p),y)})}async function I_(i,e,n){i._canInitEmulator=!1;const r=Object.assign(Object.assign({},KR),e);try{const o=new JR(i),c=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const f=await c.json();if("needConfirmation"in f)throw ud(i,"account-exists-with-different-credential",f);if(c.ok&&!("errorMessage"in f))return f;{const p=c.ok?f.errorMessage:f.error.message,[g,y]=p.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw ud(i,"credential-already-in-use",f);if(g==="EMAIL_EXISTS")throw ud(i,"email-already-in-use",f);if(g==="USER_DISABLED")throw ud(i,"user-disabled",f);const x=r[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw R_(i,x,y);hs(i,x)}}catch(o){if(o instanceof ms)throw o;hs(i,"network-request-failed",{message:String(o)})}}async function eu(i,e,n,r,o={}){const c=await Ia(i,e,n,r,o);return"mfaPendingCredential"in c&&hs(i,"multi-factor-auth-required",{_serverResponse:c}),c}async function k_(i,e,n,r){const o=`${e}${n}?${r}`,c=i,f=c.config.emulator?Ep(i.config,o):`${i.config.apiScheme}://${o}`;return YR.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(f).toString():f}function $R(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class JR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Vs(this.auth,"network-request-failed")),QR.get())})}}function ud(i,e,n){const r={appName:i.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const o=Vs(i,e,r);return o.customData._tokenResponse=n,o}function i1(i){return i!==void 0&&i.enterprise!==void 0}class eC{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return $R(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function tC(i,e){return Ia(i,"GET","/v2/recaptchaConfig",Ca(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nC(i,e){return Ia(i,"POST","/v1/accounts:delete",e)}async function Md(i,e){return Ia(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kc(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function iC(i,e=!1){const n=ei(i),r=await n.getIdToken(e),o=Ap(r);Pe(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,f=c==null?void 0:c.sign_in_provider;return{claims:o,token:r,authTime:kc(Rm(o.auth_time)),issuedAtTime:kc(Rm(o.iat)),expirationTime:kc(Rm(o.exp)),signInProvider:f||null,signInSecondFactor:(c==null?void 0:c.sign_in_second_factor)||null}}function Rm(i){return Number(i)*1e3}function Ap(i){const[e,n,r]=i.split(".");if(e===void 0||n===void 0||r===void 0)return vd("JWT malformed, contained fewer than 3 sections"),null;try{const o=Fb(n);return o?JSON.parse(o):(vd("Failed to decode base64 JWT payload"),null)}catch(o){return vd("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function s1(i){const e=Ap(i);return Pe(e,"internal-error"),Pe(typeof e.exp<"u","internal-error"),Pe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uc(i,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ms&&sC(r)&&i.auth.currentUser===i&&await i.auth.signOut(),r}}function sC({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const o=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=kc(this.lastLoginAt),this.creationTime=kc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ld(i){var e;const n=i.auth,r=await i.getIdToken(),o=await Uc(i,Md(n,{idToken:r}));Pe(o==null?void 0:o.users.length,n,"internal-error");const c=o.users[0];i._notifyReloadListener(c);const f=!((e=c.providerUserInfo)===null||e===void 0)&&e.length?N_(c.providerUserInfo):[],p=oC(i.providerData,f),g=i.isAnonymous,y=!(i.email&&c.passwordHash)&&!(p!=null&&p.length),x=g?y:!1,S={uid:c.localId,displayName:c.displayName||null,photoURL:c.photoUrl||null,email:c.email||null,emailVerified:c.emailVerified||!1,phoneNumber:c.phoneNumber||null,tenantId:c.tenantId||null,providerData:p,metadata:new qm(c.createdAt,c.lastLoginAt),isAnonymous:x};Object.assign(i,S)}async function aC(i){const e=ei(i);await Ld(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function oC(i,e){return[...i.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function N_(i){return i.map(e=>{var{providerId:n}=e,r=wp(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lC(i,e){const n=await I_(i,{},async()=>{const r=$c({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:c}=i.config,f=await k_(i,o,"/v1/token",`key=${c}`),p=await i._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:p,body:r};return i.emulatorConfig&&vl(i.emulatorConfig.host)&&(g.credentials="include"),C_.fetch()(f,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function cC(i,e){return Ia(i,"POST","/v2/accounts:revokeToken",Ca(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Pe(e.idToken,"internal-error"),Pe(typeof e.idToken<"u","internal-error"),Pe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):s1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Pe(e.length!==0,"internal-error");const n=s1(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Pe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:o,expiresIn:c}=await lC(e,n);this.updateTokensAndExpiration(r,o,Number(c))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:o,expirationTime:c}=n,f=new ll;return r&&(Pe(typeof r=="string","internal-error",{appName:e}),f.refreshToken=r),o&&(Pe(typeof o=="string","internal-error",{appName:e}),f.accessToken=o),c&&(Pe(typeof c=="number","internal-error",{appName:e}),f.expirationTime=c),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ll,this.toJSON())}_performRefresh(){return Tr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ca(i,e){Pe(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class ls{constructor(e){var{uid:n,auth:r,stsTokenManager:o}=e,c=wp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new rC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=c.displayName||null,this.email=c.email||null,this.emailVerified=c.emailVerified||!1,this.phoneNumber=c.phoneNumber||null,this.photoURL=c.photoURL||null,this.isAnonymous=c.isAnonymous||!1,this.tenantId=c.tenantId||null,this.providerData=c.providerData?[...c.providerData]:[],this.metadata=new qm(c.createdAt||void 0,c.lastLoginAt||void 0)}async getIdToken(e){const n=await Uc(this,this.stsTokenManager.getToken(this.auth,e));return Pe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return iC(this,e)}reload(){return aC(this)}_assign(e){this!==e&&(Pe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ls(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Ld(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Fi(this.auth.app))return Promise.reject(Ir(this.auth));const e=await this.getIdToken();return await Uc(this,nC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,o,c,f,p,g,y,x;const S=(r=n.displayName)!==null&&r!==void 0?r:void 0,A=(o=n.email)!==null&&o!==void 0?o:void 0,F=(c=n.phoneNumber)!==null&&c!==void 0?c:void 0,G=(f=n.photoURL)!==null&&f!==void 0?f:void 0,q=(p=n.tenantId)!==null&&p!==void 0?p:void 0,K=(g=n._redirectEventId)!==null&&g!==void 0?g:void 0,J=(y=n.createdAt)!==null&&y!==void 0?y:void 0,Y=(x=n.lastLoginAt)!==null&&x!==void 0?x:void 0,{uid:z,emailVerified:me,isAnonymous:fe,providerData:be,stsTokenManager:M}=n;Pe(z&&M,e,"internal-error");const R=ll.fromJSON(this.name,M);Pe(typeof z=="string",e,"internal-error"),ca(S,e.name),ca(A,e.name),Pe(typeof me=="boolean",e,"internal-error"),Pe(typeof fe=="boolean",e,"internal-error"),ca(F,e.name),ca(G,e.name),ca(q,e.name),ca(K,e.name),ca(J,e.name),ca(Y,e.name);const I=new ls({uid:z,auth:e,email:A,emailVerified:me,displayName:S,isAnonymous:fe,photoURL:G,phoneNumber:F,tenantId:q,stsTokenManager:R,createdAt:J,lastLoginAt:Y});return be&&Array.isArray(be)&&(I.providerData=be.map(L=>Object.assign({},L))),K&&(I._redirectEventId=K),I}static async _fromIdTokenResponse(e,n,r=!1){const o=new ll;o.updateFromServerResponse(n);const c=new ls({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await Ld(c),c}static async _fromGetAccountInfoResponse(e,n,r){const o=n.users[0];Pe(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?N_(o.providerUserInfo):[],f=!(o.email&&o.passwordHash)&&!(c!=null&&c.length),p=new ll;p.updateFromIdToken(r);const g=new ls({uid:o.localId,auth:e,stsTokenManager:p,isAnonymous:f}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new qm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(c!=null&&c.length)};return Object.assign(g,y),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r1=new Map;function Rr(i){Dr(i instanceof Function,"Expected a class definition");let e=r1.get(i);return e?(Dr(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,r1.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}j_.type="NONE";const a1=j_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bd(i,e,n){return`firebase:${i}:${e}:${n}`}class cl{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:o,name:c}=this.auth;this.fullUserKey=bd(this.userKey,o.apiKey,c),this.fullPersistenceKey=bd("persistence",o.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Md(this.auth,{idToken:e}).catch(()=>{});return n?ls._fromGetAccountInfoResponse(this.auth,n,e):null}return ls._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new cl(Rr(a1),e,r);const o=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let c=o[0]||Rr(a1);const f=bd(r,e.config.apiKey,e.name);let p=null;for(const y of n)try{const x=await y._get(f);if(x){let S;if(typeof x=="string"){const A=await Md(e,{idToken:x}).catch(()=>{});if(!A)break;S=await ls._fromGetAccountInfoResponse(e,A,x)}else S=ls._fromJSON(e,x);y!==c&&(p=S),c=y;break}}catch{}const g=o.filter(y=>y._shouldAllowMigration);return!c._shouldAllowMigration||!g.length?new cl(c,e,r):(c=g[0],p&&await c._set(f,p.toJSON()),await Promise.all(n.map(async y=>{if(y!==c)try{await y._remove(f)}catch{}})),new cl(c,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o1(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(L_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(D_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(P_(e))return"Blackberry";if(U_(e))return"Webos";if(O_(e))return"Safari";if((e.includes("chrome/")||M_(e))&&!e.includes("edge/"))return"Chrome";if(V_(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=i.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function D_(i=Zn()){return/firefox\//i.test(i)}function O_(i=Zn()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function M_(i=Zn()){return/crios\//i.test(i)}function L_(i=Zn()){return/iemobile/i.test(i)}function V_(i=Zn()){return/android/i.test(i)}function P_(i=Zn()){return/blackberry/i.test(i)}function U_(i=Zn()){return/webos/i.test(i)}function Tp(i=Zn()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function uC(i=Zn()){var e;return Tp(i)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function dC(){return nA()&&document.documentMode===10}function B_(i=Zn()){return Tp(i)||V_(i)||U_(i)||P_(i)||/windows phone/i.test(i)||L_(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z_(i,e=[]){let n;switch(i){case"Browser":n=o1(Zn());break;case"Worker":n=`${o1(Zn())}-${i}`;break;default:n=i}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${bl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=c=>new Promise((f,p)=>{try{const g=e(c);f(g)}catch(g){p(g)}});r.onAbort=n,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fC(i,e={}){return Ia(i,"GET","/v2/passwordPolicy",Ca(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mC=6;class pC{constructor(e){var n,r,o,c;const f=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=f.minPasswordLength)!==null&&n!==void 0?n:mC,f.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=f.maxPasswordLength),f.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=f.containsLowercaseCharacter),f.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=f.containsUppercaseCharacter),f.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=f.containsNumericCharacter),f.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=f.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(c=e.forceUpgradeOnSignin)!==null&&c!==void 0?c:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,o,c,f,p;const g={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,g),this.validatePasswordCharacterOptions(e,g),g.isValid&&(g.isValid=(n=g.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),g.isValid&&(g.isValid=(r=g.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),g.isValid&&(g.isValid=(o=g.containsLowercaseLetter)!==null&&o!==void 0?o:!0),g.isValid&&(g.isValid=(c=g.containsUppercaseLetter)!==null&&c!==void 0?c:!0),g.isValid&&(g.isValid=(f=g.containsNumericCharacter)!==null&&f!==void 0?f:!0),g.isValid&&(g.isValid=(p=g.containsNonAlphanumericCharacter)!==null&&p!==void 0?p:!0),g}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,o,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(e,n,r,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new l1(this),this.idTokenSubscription=new l1(this),this.beforeStateQueue=new hC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=T_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Rr(n)),this._initializationPromise=this.queue(async()=>{var r,o,c;if(!this._deleted&&(this.persistenceManager=await cl.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((c=this.currentUser)===null||c===void 0?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Md(this,{idToken:e}),r=await ls._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Fi(this.app)){const f=this.app.settings.authIdToken;return f?new Promise(p=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(f).then(p,p))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let o=r,c=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const f=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,p=o==null?void 0:o._redirectEventId,g=await this.tryRedirectSignIn(e);(!f||f===p)&&(g!=null&&g.user)&&(o=g.user,c=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(c)try{await this.beforeStateQueue.runMiddleware(o)}catch(f){o=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(f))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Pe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ld(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=ZR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Fi(this.app))return Promise.reject(Ir(this));const n=e?ei(e):null;return n&&Pe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Pe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Fi(this.app)?Promise.reject(Ir(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Fi(this.app)?Promise.reject(Ir(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Rr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await fC(this),n=new pC(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new mo("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await cC(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Rr(e)||this._popupRedirectResolver;Pe(n,this,"argument-error"),this.redirectPersistenceManager=await cl.create(this,[Rr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,o){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let f=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(Pe(p,this,"internal-error"),p.then(()=>{f||c(this.currentUser)}),typeof n=="function"){const g=e.addObserver(n,r,o);return()=>{f=!0,g()}}else{const g=e.addObserver(n);return()=>{f=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=z_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const o=await this._getAppCheckToken();return o&&(n["X-Firebase-AppCheck"]=o),n}async _getAppCheckToken(){var e;if(Fi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&GR(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function go(i){return ei(i)}class l1{constructor(e){this.auth=e,this.observer=null,this.addObserver=cA(n=>this.observer=n)}get next(){return Pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function yC(i){sh=i}function F_(i){return sh.loadJS(i)}function vC(){return sh.recaptchaEnterpriseScript}function bC(){return sh.gapiScript}function _C(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class xC{constructor(){this.enterprise=new wC}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class wC{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const SC="recaptcha-enterprise",H_="NO_RECAPTCHA";class EC{constructor(e){this.type=SC,this.auth=go(e)}async verify(e="verify",n=!1){async function r(c){if(!n){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(f,p)=>{tC(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const y=new eC(g);return c.tenantId==null?c._agentRecaptchaConfig=y:c._tenantRecaptchaConfigs[c.tenantId]=y,f(y.siteKey)}}).catch(g=>{p(g)})})}function o(c,f,p){const g=window.grecaptcha;i1(g)?g.enterprise.ready(()=>{g.enterprise.execute(c,{action:e}).then(y=>{f(y)}).catch(()=>{f(H_)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new xC().execute("siteKey",{action:"verify"}):new Promise((c,f)=>{r(this.auth).then(p=>{if(!n&&i1(window.grecaptcha))o(p,c,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let g=vC();g.length!==0&&(g+=p),F_(g).then(()=>{o(p,c,f)}).catch(y=>{f(y)})}}).catch(p=>{f(p)})})}}async function c1(i,e,n,r=!1,o=!1){const c=new EC(i);let f;if(o)f=H_;else try{f=await c.verify(n)}catch{f=await c.verify(n,!0)}const p=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const g=p.phoneEnrollmentInfo.phoneNumber,y=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:y,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const g=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return r?Object.assign(p,{captchaResp:f}):Object.assign(p,{captchaResponse:f}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function Gm(i,e,n,r,o){var c;if(!((c=i._getRecaptchaConfig())===null||c===void 0)&&c.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const f=await c1(i,e,n,n==="getOobCode");return r(i,f)}else return r(i,e).catch(async f=>{if(f.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const p=await c1(i,e,n,n==="getOobCode");return r(i,p)}else return Promise.reject(f)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AC(i,e){const n=po(i,"auth");if(n.isInitialized()){const o=n.getImmediate(),c=n.getOptions();if(_a(c,e??{}))return o;hs(o,"already-initialized")}return n.initialize({options:e})}function TC(i,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Rr);e!=null&&e.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function RC(i,e,n){const r=go(i);Pe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,c=q_(e),{host:f,port:p}=CC(e),g=p===null?"":`:${p}`,y={url:`${c}//${f}${g}/`},x=Object.freeze({host:f,port:p,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){Pe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Pe(_a(y,r.config.emulator)&&_a(x,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=y,r.emulatorConfig=x,r.settings.appVerificationDisabledForTesting=!0,vl(f)?(Wb(`${c}//${f}${g}`),Xb("Auth",!0)):IC()}function q_(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function CC(i){const e=q_(i),n=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const c=o[1];return{host:c,port:u1(r.substr(c.length+1))}}else{const[c,f]=r.split(":");return{host:c,port:u1(f)}}}function u1(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function IC(){function i(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Tr("not implemented")}_getIdTokenResponse(e){return Tr("not implemented")}_linkToIdToken(e,n){return Tr("not implemented")}_getReauthenticationResolver(e){return Tr("not implemented")}}async function kC(i,e){return Ia(i,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NC(i,e){return eu(i,"POST","/v1/accounts:signInWithPassword",Ca(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jC(i,e){return eu(i,"POST","/v1/accounts:signInWithEmailLink",Ca(i,e))}async function DC(i,e){return eu(i,"POST","/v1/accounts:signInWithEmailLink",Ca(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc extends Rp{constructor(e,n,r,o=null){super("password",r),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new Bc(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Bc(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Gm(e,n,"signInWithPassword",NC);case"emailLink":return jC(e,{email:this._email,oobCode:this._password});default:hs(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Gm(e,r,"signUpPassword",kC);case"emailLink":return DC(e,{idToken:n,email:this._email,oobCode:this._password});default:hs(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ul(i,e){return eu(i,"POST","/v1/accounts:signInWithIdp",Ca(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC="http://localhost";class lo extends Rp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new lo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):hs("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o}=n,c=wp(n,["providerId","signInMethod"]);if(!r||!o)return null;const f=new lo(r,o);return f.idToken=c.idToken||void 0,f.accessToken=c.accessToken||void 0,f.secret=c.secret,f.nonce=c.nonce,f.pendingToken=c.pendingToken||null,f}_getIdTokenResponse(e){const n=this.buildRequest();return ul(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ul(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ul(e,n)}buildRequest(){const e={requestUri:OC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=$c(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MC(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function LC(i){const e=xc(wc(i)).link,n=e?xc(wc(e)).deep_link_id:null,r=xc(wc(i)).deep_link_id;return(r?xc(wc(r)).link:null)||r||n||e||i}class Cp{constructor(e){var n,r,o,c,f,p;const g=xc(wc(e)),y=(n=g.apiKey)!==null&&n!==void 0?n:null,x=(r=g.oobCode)!==null&&r!==void 0?r:null,S=MC((o=g.mode)!==null&&o!==void 0?o:null);Pe(y&&x&&S,"argument-error"),this.apiKey=y,this.operation=S,this.code=x,this.continueUrl=(c=g.continueUrl)!==null&&c!==void 0?c:null,this.languageCode=(f=g.lang)!==null&&f!==void 0?f:null,this.tenantId=(p=g.tenantId)!==null&&p!==void 0?p:null}static parseLink(e){const n=LC(e);try{return new Cp(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(){this.providerId=_l.PROVIDER_ID}static credential(e,n){return Bc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Cp.parseLink(n);return Pe(r,"argument-error"),Bc._fromEmailAndCode(e,r.code,r.tenantId)}}_l.PROVIDER_ID="password";_l.EMAIL_PASSWORD_SIGN_IN_METHOD="password";_l.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu extends G_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da extends tu{constructor(){super("facebook.com")}static credential(e){return lo._fromParams({providerId:da.PROVIDER_ID,signInMethod:da.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return da.credentialFromTaggedObject(e)}static credentialFromError(e){return da.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return da.credential(e.oauthAccessToken)}catch{return null}}}da.FACEBOOK_SIGN_IN_METHOD="facebook.com";da.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha extends tu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return lo._fromParams({providerId:ha.PROVIDER_ID,signInMethod:ha.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ha.credentialFromTaggedObject(e)}static credentialFromError(e){return ha.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ha.credential(n,r)}catch{return null}}}ha.GOOGLE_SIGN_IN_METHOD="google.com";ha.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa extends tu{constructor(){super("github.com")}static credential(e){return lo._fromParams({providerId:fa.PROVIDER_ID,signInMethod:fa.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fa.credentialFromTaggedObject(e)}static credentialFromError(e){return fa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fa.credential(e.oauthAccessToken)}catch{return null}}}fa.GITHUB_SIGN_IN_METHOD="github.com";fa.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma extends tu{constructor(){super("twitter.com")}static credential(e,n){return lo._fromParams({providerId:ma.PROVIDER_ID,signInMethod:ma.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ma.credentialFromTaggedObject(e)}static credentialFromError(e){return ma.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ma.credential(n,r)}catch{return null}}}ma.TWITTER_SIGN_IN_METHOD="twitter.com";ma.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VC(i,e){return eu(i,"POST","/v1/accounts:signUp",Ca(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,o=!1){const c=await ls._fromIdTokenResponse(e,r,o),f=d1(r);return new co({user:c,providerId:f,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const o=d1(r);return new co({user:e,providerId:o,_tokenResponse:r,operationType:n})}}function d1(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd extends ms{constructor(e,n,r,o){var c;super(n.code,n.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,Vd.prototype),this.customData={appName:e.name,tenantId:(c=e.tenantId)!==null&&c!==void 0?c:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,o){return new Vd(e,n,r,o)}}function W_(i,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(i):n._getIdTokenResponse(i)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Vd._fromErrorAndOperation(i,c,e,r):c})}async function PC(i,e,n=!1){const r=await Uc(i,e._linkToIdToken(i.auth,await i.getIdToken()),n);return co._forOperation(i,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UC(i,e,n=!1){const{auth:r}=i;if(Fi(r.app))return Promise.reject(Ir(r));const o="reauthenticate";try{const c=await Uc(i,W_(r,o,e,i),n);Pe(c.idToken,r,"internal-error");const f=Ap(c.idToken);Pe(f,r,"internal-error");const{sub:p}=f;return Pe(i.uid===p,r,"user-mismatch"),co._forOperation(i,o,c)}catch(c){throw(c==null?void 0:c.code)==="auth/user-not-found"&&hs(r,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X_(i,e,n=!1){if(Fi(i.app))return Promise.reject(Ir(i));const r="signIn",o=await W_(i,r,e),c=await co._fromIdTokenResponse(i,r,o);return n||await i._updateCurrentUser(c.user),c}async function BC(i,e){return X_(go(i),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z_(i){const e=go(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function zC(i,e,n){if(Fi(i.app))return Promise.reject(Ir(i));const r=go(i),f=await Gm(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",VC).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&Z_(i),g}),p=await co._fromIdTokenResponse(r,"signIn",f);return await r._updateCurrentUser(p.user),p}function FC(i,e,n){return Fi(i.app)?Promise.reject(Ir(i)):BC(ei(i),_l.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Z_(i),r})}function HC(i,e,n,r){return ei(i).onIdTokenChanged(e,n,r)}function qC(i,e,n){return ei(i).beforeAuthStateChanged(e,n)}function Ip(i,e,n,r){return ei(i).onAuthStateChanged(e,n,r)}function GC(i){return ei(i).signOut()}const Pd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K_{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Pd,"1"),this.storage.removeItem(Pd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WC=1e3,XC=10;class Y_ extends K_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=B_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),o=this.localCache[n];r!==o&&e(n,o,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((f,p,g)=>{this.notifyListeners(f,g)});return}const r=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const f=this.storage.getItem(r);!n&&this.localCache[r]===f||this.notifyListeners(r,f)},c=this.storage.getItem(r);dC()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,XC):o()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},WC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Y_.type="LOCAL";const ZC=Y_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q_ extends K_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Q_.type="SESSION";const $_=Q_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KC(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const r=new rh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:o,data:c}=n.data,f=this.handlersMap[o];if(!(f!=null&&f.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const p=Array.from(f).map(async y=>y(n.origin,c)),g=await KC(p);n.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:g})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}rh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kp(i="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return i+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,f;return new Promise((p,g)=>{const y=kp("",20);o.port1.start();const x=setTimeout(()=>{g(new Error("unsupported_event"))},r);f={messageChannel:o,onMessage(S){const A=S;if(A.data.eventId===y)switch(A.data.status){case"ack":clearTimeout(x),c=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),p(A.data.response);break;default:clearTimeout(x),clearTimeout(c),g(new Error("invalid_response"));break}}},this.handlers.add(f),o.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:y,data:n},[o.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ps(){return window}function QC(i){Ps().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J_(){return typeof Ps().WorkerGlobalScope<"u"&&typeof Ps().importScripts=="function"}async function $C(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function JC(){var i;return((i=navigator==null?void 0:navigator.serviceWorker)===null||i===void 0?void 0:i.controller)||null}function e5(){return J_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ex="firebaseLocalStorageDb",t5=1,Ud="firebaseLocalStorage",tx="fbase_key";class nu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function ah(i,e){return i.transaction([Ud],e?"readwrite":"readonly").objectStore(Ud)}function n5(){const i=indexedDB.deleteDatabase(ex);return new nu(i).toPromise()}function Wm(){const i=indexedDB.open(ex,t5);return new Promise((e,n)=>{i.addEventListener("error",()=>{n(i.error)}),i.addEventListener("upgradeneeded",()=>{const r=i.result;try{r.createObjectStore(Ud,{keyPath:tx})}catch(o){n(o)}}),i.addEventListener("success",async()=>{const r=i.result;r.objectStoreNames.contains(Ud)?e(r):(r.close(),await n5(),e(await Wm()))})})}async function h1(i,e,n){const r=ah(i,!0).put({[tx]:e,value:n});return new nu(r).toPromise()}async function i5(i,e){const n=ah(i,!1).get(e),r=await new nu(n).toPromise();return r===void 0?null:r.value}function f1(i,e){const n=ah(i,!0).delete(e);return new nu(n).toPromise()}const s5=800,r5=3;class nx{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Wm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>r5)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return J_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=rh._getInstance(e5()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await $C(),!this.activeServiceWorker)return;this.sender=new YC(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||JC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Wm();return await h1(e,Pd,"1"),await f1(e,Pd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>h1(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>i5(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>f1(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const c=ah(o,!1).getAll();return new nu(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:c}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),s5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}nx.type="LOCAL";const a5=nx;new Jc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o5(i,e){return e?Rr(e):(Pe(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np extends Rp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ul(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ul(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ul(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function l5(i){return X_(i.auth,new Np(i),i.bypassAuthState)}function c5(i){const{auth:e,user:n}=i;return Pe(n,e,"internal-error"),UC(n,new Np(i),i.bypassAuthState)}async function u5(i){const{auth:e,user:n}=i;return Pe(n,e,"internal-error"),PC(n,new Np(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{constructor(e,n,r,o,c=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:o,tenantId:c,error:f,type:p}=e;if(f){this.reject(f);return}const g={auth:this.auth,requestUri:n,sessionId:r,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return l5;case"linkViaPopup":case"linkViaRedirect":return u5;case"reauthViaPopup":case"reauthViaRedirect":return c5;default:hs(this.auth,"internal-error")}}resolve(e){Dr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Dr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d5=new Jc(2e3,1e4);class ol extends ix{constructor(e,n,r,o,c){super(e,n,o,c),this.provider=r,this.authWindow=null,this.pollId=null,ol.currentPopupAction&&ol.currentPopupAction.cancel(),ol.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Pe(e,this.auth,"internal-error"),e}async onExecution(){Dr(this.filter.length===1,"Popup operations only handle one event");const e=kp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Vs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Vs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ol.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Vs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,d5.get())};e()}}ol.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h5="pendingRedirect",_d=new Map;class f5 extends ix{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=_d.get(this.auth._key());if(!e){try{const r=await m5(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}_d.set(this.auth._key(),e)}return this.bypassAuthState||_d.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function m5(i,e){const n=y5(e),r=g5(i);if(!await r._isAvailable())return!1;const o=await r._get(n)==="true";return await r._remove(n),o}function p5(i,e){_d.set(i._key(),e)}function g5(i){return Rr(i._redirectPersistence)}function y5(i){return bd(h5,i.config.apiKey,i.name)}async function v5(i,e,n=!1){if(Fi(i.app))return Promise.reject(Ir(i));const r=go(i),o=o5(r,e),f=await new f5(r,o,n).execute();return f&&!n&&(delete f.user._redirectEventId,await r._persistUserIfCurrent(f.user),await r._setRedirectUser(null,e)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b5=10*60*1e3;class _5{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!x5(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!sx(e)){const o=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Vs(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=b5&&this.cachedEventUids.clear(),this.cachedEventUids.has(m1(e))}saveEventToCache(e){this.cachedEventUids.add(m1(e)),this.lastProcessedEventTime=Date.now()}}function m1(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function sx({type:i,error:e}){return i==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function x5(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return sx(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w5(i,e={}){return Ia(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S5=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,E5=/^https?/;async function A5(i){if(i.config.emulator)return;const{authorizedDomains:e}=await w5(i);for(const n of e)try{if(T5(n))return}catch{}hs(i,"unauthorized-domain")}function T5(i){const e=Hm(),{protocol:n,hostname:r}=new URL(e);if(i.startsWith("chrome-extension://")){const f=new URL(i);return f.hostname===""&&r===""?n==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===r}if(!E5.test(n))return!1;if(S5.test(i))return r===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R5=new Jc(3e4,6e4);function p1(){const i=Ps().___jsl;if(i!=null&&i.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let n=0;n<i.CP.length;n++)i.CP[n]=null}}function C5(i){return new Promise((e,n)=>{var r,o,c;function f(){p1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{p1(),n(Vs(i,"network-request-failed"))},timeout:R5.get()})}if(!((o=(r=Ps().gapi)===null||r===void 0?void 0:r.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((c=Ps().gapi)===null||c===void 0)&&c.load)f();else{const p=_C("iframefcb");return Ps()[p]=()=>{gapi.load?f():n(Vs(i,"network-request-failed"))},F_(`${bC()}?onload=${p}`).catch(g=>n(g))}}).catch(e=>{throw xd=null,e})}let xd=null;function I5(i){return xd=xd||C5(i),xd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k5=new Jc(5e3,15e3),N5="__/auth/iframe",j5="emulator/auth/iframe",D5={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},O5=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function M5(i){const e=i.config;Pe(e.authDomain,i,"auth-domain-config-required");const n=e.emulator?Ep(e,j5):`https://${i.config.authDomain}/${N5}`,r={apiKey:e.apiKey,appName:i.name,v:bl},o=O5.get(i.config.apiHost);o&&(r.eid=o);const c=i._getFrameworks();return c.length&&(r.fw=c.join(",")),`${n}?${$c(r).slice(1)}`}async function L5(i){const e=await I5(i),n=Ps().gapi;return Pe(n,i,"internal-error"),e.open({where:document.body,url:M5(i),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:D5,dontclear:!0},r=>new Promise(async(o,c)=>{await r.restyle({setHideOnLeave:!1});const f=Vs(i,"network-request-failed"),p=Ps().setTimeout(()=>{c(f)},k5.get());function g(){Ps().clearTimeout(p),o(r)}r.ping(g).then(g,()=>{c(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V5={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},P5=500,U5=600,B5="_blank",z5="http://localhost";class g1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function F5(i,e,n,r=P5,o=U5){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),f=Math.max((window.screen.availWidth-r)/2,0).toString();let p="";const g=Object.assign(Object.assign({},V5),{width:r.toString(),height:o.toString(),top:c,left:f}),y=Zn().toLowerCase();n&&(p=M_(y)?B5:n),D_(y)&&(e=e||z5,g.scrollbars="yes");const x=Object.entries(g).reduce((A,[F,G])=>`${A}${F}=${G},`,"");if(uC(y)&&p!=="_self")return H5(e||"",p),new g1(null);const S=window.open(e||"",p,x);Pe(S,i,"popup-blocked");try{S.focus()}catch{}return new g1(S)}function H5(i,e){const n=document.createElement("a");n.href=i,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q5="__/auth/handler",G5="emulator/auth/handler",W5=encodeURIComponent("fac");async function y1(i,e,n,r,o,c){Pe(i.config.authDomain,i,"auth-domain-config-required"),Pe(i.config.apiKey,i,"invalid-api-key");const f={apiKey:i.config.apiKey,appName:i.name,authType:n,redirectUrl:r,v:bl,eventId:o};if(e instanceof G_){e.setDefaultLanguage(i.languageCode),f.providerId=e.providerId||"",lA(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[x,S]of Object.entries({}))f[x]=S}if(e instanceof tu){const x=e.getScopes().filter(S=>S!=="");x.length>0&&(f.scopes=x.join(","))}i.tenantId&&(f.tid=i.tenantId);const p=f;for(const x of Object.keys(p))p[x]===void 0&&delete p[x];const g=await i._getAppCheckToken(),y=g?`#${W5}=${encodeURIComponent(g)}`:"";return`${X5(i)}?${$c(p).slice(1)}${y}`}function X5({config:i}){return i.emulator?Ep(i,G5):`https://${i.authDomain}/${q5}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cm="webStorageSupport";class Z5{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=$_,this._completeRedirectFn=v5,this._overrideRedirectResult=p5}async _openPopup(e,n,r,o){var c;Dr((c=this.eventManagers[e._key()])===null||c===void 0?void 0:c.manager,"_initialize() not called before _openPopup()");const f=await y1(e,n,r,Hm(),o);return F5(e,f,kp())}async _openRedirect(e,n,r,o){await this._originValidation(e);const c=await y1(e,n,r,Hm(),o);return QC(c),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:c}=this.eventManagers[n];return o?Promise.resolve(o):(Dr(c,"If manager is not set, promise should be"),c)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await L5(e),r=new _5(e);return n.register("authEvent",o=>(Pe(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Cm,{type:Cm},o=>{var c;const f=(c=o==null?void 0:o[0])===null||c===void 0?void 0:c[Cm];f!==void 0&&n(!!f),hs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=A5(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return B_()||O_()||Tp()}}const K5=Z5;var v1="@firebase/auth",b1="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y5{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q5(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function $5(i){Hs(new ds("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:f,authDomain:p}=r.options;Pe(f&&!f.includes(":"),"invalid-api-key",{appName:r.name});const g={apiKey:f,authDomain:p,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:z_(i)},y=new gC(r,o,c,g);return TC(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Hs(new ds("auth-internal",e=>{const n=go(e.getProvider("auth").getImmediate());return(r=>new Y5(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Gi(v1,b1,Q5(i)),Gi(v1,b1,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J5=5*60,e4=Gb("authIdTokenMaxAge")||J5;let _1=null;const t4=i=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>e4)return;const o=n==null?void 0:n.token;_1!==o&&(_1=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function n4(i=gp()){const e=po(i,"auth");if(e.isInitialized())return e.getImmediate();const n=AC(i,{popupRedirectResolver:K5,persistence:[a5,ZC,$_]}),r=Gb("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(r,location.origin);if(location.origin===c.origin){const f=t4(c.toString());qC(n,f,()=>f(n.currentUser)),HC(n,p=>f(p))}}const o=Hb("auth");return o&&RC(n,`http://${o}`),n}function i4(){var i,e;return(e=(i=document.getElementsByTagName("head"))===null||i===void 0?void 0:i[0])!==null&&e!==void 0?e:document}yC({loadJS(i){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",i),r.onload=e,r.onerror=o=>{const c=Vs("internal-error");c.customData=o,n(c)},r.type="text/javascript",r.charset="UTF-8",i4().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});$5("Browser");var x1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var va,rx;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(M,R){function I(){}I.prototype=R.prototype,M.D=R.prototype,M.prototype=new I,M.prototype.constructor=M,M.C=function(L,N,B){for(var j=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)j[Fe-2]=arguments[Fe];return R.prototype[N].apply(L,j)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(M,R,I){I||(I=0);var L=Array(16);if(typeof R=="string")for(var N=0;16>N;++N)L[N]=R.charCodeAt(I++)|R.charCodeAt(I++)<<8|R.charCodeAt(I++)<<16|R.charCodeAt(I++)<<24;else for(N=0;16>N;++N)L[N]=R[I++]|R[I++]<<8|R[I++]<<16|R[I++]<<24;R=M.g[0],I=M.g[1],N=M.g[2];var B=M.g[3],j=R+(B^I&(N^B))+L[0]+3614090360&4294967295;R=I+(j<<7&4294967295|j>>>25),j=B+(N^R&(I^N))+L[1]+3905402710&4294967295,B=R+(j<<12&4294967295|j>>>20),j=N+(I^B&(R^I))+L[2]+606105819&4294967295,N=B+(j<<17&4294967295|j>>>15),j=I+(R^N&(B^R))+L[3]+3250441966&4294967295,I=N+(j<<22&4294967295|j>>>10),j=R+(B^I&(N^B))+L[4]+4118548399&4294967295,R=I+(j<<7&4294967295|j>>>25),j=B+(N^R&(I^N))+L[5]+1200080426&4294967295,B=R+(j<<12&4294967295|j>>>20),j=N+(I^B&(R^I))+L[6]+2821735955&4294967295,N=B+(j<<17&4294967295|j>>>15),j=I+(R^N&(B^R))+L[7]+4249261313&4294967295,I=N+(j<<22&4294967295|j>>>10),j=R+(B^I&(N^B))+L[8]+1770035416&4294967295,R=I+(j<<7&4294967295|j>>>25),j=B+(N^R&(I^N))+L[9]+2336552879&4294967295,B=R+(j<<12&4294967295|j>>>20),j=N+(I^B&(R^I))+L[10]+4294925233&4294967295,N=B+(j<<17&4294967295|j>>>15),j=I+(R^N&(B^R))+L[11]+2304563134&4294967295,I=N+(j<<22&4294967295|j>>>10),j=R+(B^I&(N^B))+L[12]+1804603682&4294967295,R=I+(j<<7&4294967295|j>>>25),j=B+(N^R&(I^N))+L[13]+4254626195&4294967295,B=R+(j<<12&4294967295|j>>>20),j=N+(I^B&(R^I))+L[14]+2792965006&4294967295,N=B+(j<<17&4294967295|j>>>15),j=I+(R^N&(B^R))+L[15]+1236535329&4294967295,I=N+(j<<22&4294967295|j>>>10),j=R+(N^B&(I^N))+L[1]+4129170786&4294967295,R=I+(j<<5&4294967295|j>>>27),j=B+(I^N&(R^I))+L[6]+3225465664&4294967295,B=R+(j<<9&4294967295|j>>>23),j=N+(R^I&(B^R))+L[11]+643717713&4294967295,N=B+(j<<14&4294967295|j>>>18),j=I+(B^R&(N^B))+L[0]+3921069994&4294967295,I=N+(j<<20&4294967295|j>>>12),j=R+(N^B&(I^N))+L[5]+3593408605&4294967295,R=I+(j<<5&4294967295|j>>>27),j=B+(I^N&(R^I))+L[10]+38016083&4294967295,B=R+(j<<9&4294967295|j>>>23),j=N+(R^I&(B^R))+L[15]+3634488961&4294967295,N=B+(j<<14&4294967295|j>>>18),j=I+(B^R&(N^B))+L[4]+3889429448&4294967295,I=N+(j<<20&4294967295|j>>>12),j=R+(N^B&(I^N))+L[9]+568446438&4294967295,R=I+(j<<5&4294967295|j>>>27),j=B+(I^N&(R^I))+L[14]+3275163606&4294967295,B=R+(j<<9&4294967295|j>>>23),j=N+(R^I&(B^R))+L[3]+4107603335&4294967295,N=B+(j<<14&4294967295|j>>>18),j=I+(B^R&(N^B))+L[8]+1163531501&4294967295,I=N+(j<<20&4294967295|j>>>12),j=R+(N^B&(I^N))+L[13]+2850285829&4294967295,R=I+(j<<5&4294967295|j>>>27),j=B+(I^N&(R^I))+L[2]+4243563512&4294967295,B=R+(j<<9&4294967295|j>>>23),j=N+(R^I&(B^R))+L[7]+1735328473&4294967295,N=B+(j<<14&4294967295|j>>>18),j=I+(B^R&(N^B))+L[12]+2368359562&4294967295,I=N+(j<<20&4294967295|j>>>12),j=R+(I^N^B)+L[5]+4294588738&4294967295,R=I+(j<<4&4294967295|j>>>28),j=B+(R^I^N)+L[8]+2272392833&4294967295,B=R+(j<<11&4294967295|j>>>21),j=N+(B^R^I)+L[11]+1839030562&4294967295,N=B+(j<<16&4294967295|j>>>16),j=I+(N^B^R)+L[14]+4259657740&4294967295,I=N+(j<<23&4294967295|j>>>9),j=R+(I^N^B)+L[1]+2763975236&4294967295,R=I+(j<<4&4294967295|j>>>28),j=B+(R^I^N)+L[4]+1272893353&4294967295,B=R+(j<<11&4294967295|j>>>21),j=N+(B^R^I)+L[7]+4139469664&4294967295,N=B+(j<<16&4294967295|j>>>16),j=I+(N^B^R)+L[10]+3200236656&4294967295,I=N+(j<<23&4294967295|j>>>9),j=R+(I^N^B)+L[13]+681279174&4294967295,R=I+(j<<4&4294967295|j>>>28),j=B+(R^I^N)+L[0]+3936430074&4294967295,B=R+(j<<11&4294967295|j>>>21),j=N+(B^R^I)+L[3]+3572445317&4294967295,N=B+(j<<16&4294967295|j>>>16),j=I+(N^B^R)+L[6]+76029189&4294967295,I=N+(j<<23&4294967295|j>>>9),j=R+(I^N^B)+L[9]+3654602809&4294967295,R=I+(j<<4&4294967295|j>>>28),j=B+(R^I^N)+L[12]+3873151461&4294967295,B=R+(j<<11&4294967295|j>>>21),j=N+(B^R^I)+L[15]+530742520&4294967295,N=B+(j<<16&4294967295|j>>>16),j=I+(N^B^R)+L[2]+3299628645&4294967295,I=N+(j<<23&4294967295|j>>>9),j=R+(N^(I|~B))+L[0]+4096336452&4294967295,R=I+(j<<6&4294967295|j>>>26),j=B+(I^(R|~N))+L[7]+1126891415&4294967295,B=R+(j<<10&4294967295|j>>>22),j=N+(R^(B|~I))+L[14]+2878612391&4294967295,N=B+(j<<15&4294967295|j>>>17),j=I+(B^(N|~R))+L[5]+4237533241&4294967295,I=N+(j<<21&4294967295|j>>>11),j=R+(N^(I|~B))+L[12]+1700485571&4294967295,R=I+(j<<6&4294967295|j>>>26),j=B+(I^(R|~N))+L[3]+2399980690&4294967295,B=R+(j<<10&4294967295|j>>>22),j=N+(R^(B|~I))+L[10]+4293915773&4294967295,N=B+(j<<15&4294967295|j>>>17),j=I+(B^(N|~R))+L[1]+2240044497&4294967295,I=N+(j<<21&4294967295|j>>>11),j=R+(N^(I|~B))+L[8]+1873313359&4294967295,R=I+(j<<6&4294967295|j>>>26),j=B+(I^(R|~N))+L[15]+4264355552&4294967295,B=R+(j<<10&4294967295|j>>>22),j=N+(R^(B|~I))+L[6]+2734768916&4294967295,N=B+(j<<15&4294967295|j>>>17),j=I+(B^(N|~R))+L[13]+1309151649&4294967295,I=N+(j<<21&4294967295|j>>>11),j=R+(N^(I|~B))+L[4]+4149444226&4294967295,R=I+(j<<6&4294967295|j>>>26),j=B+(I^(R|~N))+L[11]+3174756917&4294967295,B=R+(j<<10&4294967295|j>>>22),j=N+(R^(B|~I))+L[2]+718787259&4294967295,N=B+(j<<15&4294967295|j>>>17),j=I+(B^(N|~R))+L[9]+3951481745&4294967295,M.g[0]=M.g[0]+R&4294967295,M.g[1]=M.g[1]+(N+(j<<21&4294967295|j>>>11))&4294967295,M.g[2]=M.g[2]+N&4294967295,M.g[3]=M.g[3]+B&4294967295}r.prototype.u=function(M,R){R===void 0&&(R=M.length);for(var I=R-this.blockSize,L=this.B,N=this.h,B=0;B<R;){if(N==0)for(;B<=I;)o(this,M,B),B+=this.blockSize;if(typeof M=="string"){for(;B<R;)if(L[N++]=M.charCodeAt(B++),N==this.blockSize){o(this,L),N=0;break}}else for(;B<R;)if(L[N++]=M[B++],N==this.blockSize){o(this,L),N=0;break}}this.h=N,this.o+=R},r.prototype.v=function(){var M=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);M[0]=128;for(var R=1;R<M.length-8;++R)M[R]=0;var I=8*this.o;for(R=M.length-8;R<M.length;++R)M[R]=I&255,I/=256;for(this.u(M),M=Array(16),R=I=0;4>R;++R)for(var L=0;32>L;L+=8)M[I++]=this.g[R]>>>L&255;return M};function c(M,R){var I=p;return Object.prototype.hasOwnProperty.call(I,M)?I[M]:I[M]=R(M)}function f(M,R){this.h=R;for(var I=[],L=!0,N=M.length-1;0<=N;N--){var B=M[N]|0;L&&B==R||(I[N]=B,L=!1)}this.g=I}var p={};function g(M){return-128<=M&&128>M?c(M,function(R){return new f([R|0],0>R?-1:0)}):new f([M|0],0>M?-1:0)}function y(M){if(isNaN(M)||!isFinite(M))return S;if(0>M)return K(y(-M));for(var R=[],I=1,L=0;M>=I;L++)R[L]=M/I|0,I*=4294967296;return new f(R,0)}function x(M,R){if(M.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(M.charAt(0)=="-")return K(x(M.substring(1),R));if(0<=M.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=y(Math.pow(R,8)),L=S,N=0;N<M.length;N+=8){var B=Math.min(8,M.length-N),j=parseInt(M.substring(N,N+B),R);8>B?(B=y(Math.pow(R,B)),L=L.j(B).add(y(j))):(L=L.j(I),L=L.add(y(j)))}return L}var S=g(0),A=g(1),F=g(16777216);i=f.prototype,i.m=function(){if(q(this))return-K(this).m();for(var M=0,R=1,I=0;I<this.g.length;I++){var L=this.i(I);M+=(0<=L?L:4294967296+L)*R,R*=4294967296}return M},i.toString=function(M){if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(G(this))return"0";if(q(this))return"-"+K(this).toString(M);for(var R=y(Math.pow(M,6)),I=this,L="";;){var N=me(I,R).g;I=J(I,N.j(R));var B=((0<I.g.length?I.g[0]:I.h)>>>0).toString(M);if(I=N,G(I))return B+L;for(;6>B.length;)B="0"+B;L=B+L}},i.i=function(M){return 0>M?0:M<this.g.length?this.g[M]:this.h};function G(M){if(M.h!=0)return!1;for(var R=0;R<M.g.length;R++)if(M.g[R]!=0)return!1;return!0}function q(M){return M.h==-1}i.l=function(M){return M=J(this,M),q(M)?-1:G(M)?0:1};function K(M){for(var R=M.g.length,I=[],L=0;L<R;L++)I[L]=~M.g[L];return new f(I,~M.h).add(A)}i.abs=function(){return q(this)?K(this):this},i.add=function(M){for(var R=Math.max(this.g.length,M.g.length),I=[],L=0,N=0;N<=R;N++){var B=L+(this.i(N)&65535)+(M.i(N)&65535),j=(B>>>16)+(this.i(N)>>>16)+(M.i(N)>>>16);L=j>>>16,B&=65535,j&=65535,I[N]=j<<16|B}return new f(I,I[I.length-1]&-2147483648?-1:0)};function J(M,R){return M.add(K(R))}i.j=function(M){if(G(this)||G(M))return S;if(q(this))return q(M)?K(this).j(K(M)):K(K(this).j(M));if(q(M))return K(this.j(K(M)));if(0>this.l(F)&&0>M.l(F))return y(this.m()*M.m());for(var R=this.g.length+M.g.length,I=[],L=0;L<2*R;L++)I[L]=0;for(L=0;L<this.g.length;L++)for(var N=0;N<M.g.length;N++){var B=this.i(L)>>>16,j=this.i(L)&65535,Fe=M.i(N)>>>16,$e=M.i(N)&65535;I[2*L+2*N]+=j*$e,Y(I,2*L+2*N),I[2*L+2*N+1]+=B*$e,Y(I,2*L+2*N+1),I[2*L+2*N+1]+=j*Fe,Y(I,2*L+2*N+1),I[2*L+2*N+2]+=B*Fe,Y(I,2*L+2*N+2)}for(L=0;L<R;L++)I[L]=I[2*L+1]<<16|I[2*L];for(L=R;L<2*R;L++)I[L]=0;return new f(I,0)};function Y(M,R){for(;(M[R]&65535)!=M[R];)M[R+1]+=M[R]>>>16,M[R]&=65535,R++}function z(M,R){this.g=M,this.h=R}function me(M,R){if(G(R))throw Error("division by zero");if(G(M))return new z(S,S);if(q(M))return R=me(K(M),R),new z(K(R.g),K(R.h));if(q(R))return R=me(M,K(R)),new z(K(R.g),R.h);if(30<M.g.length){if(q(M)||q(R))throw Error("slowDivide_ only works with positive integers.");for(var I=A,L=R;0>=L.l(M);)I=fe(I),L=fe(L);var N=be(I,1),B=be(L,1);for(L=be(L,2),I=be(I,2);!G(L);){var j=B.add(L);0>=j.l(M)&&(N=N.add(I),B=j),L=be(L,1),I=be(I,1)}return R=J(M,N.j(R)),new z(N,R)}for(N=S;0<=M.l(R);){for(I=Math.max(1,Math.floor(M.m()/R.m())),L=Math.ceil(Math.log(I)/Math.LN2),L=48>=L?1:Math.pow(2,L-48),B=y(I),j=B.j(R);q(j)||0<j.l(M);)I-=L,B=y(I),j=B.j(R);G(B)&&(B=A),N=N.add(B),M=J(M,j)}return new z(N,M)}i.A=function(M){return me(this,M).h},i.and=function(M){for(var R=Math.max(this.g.length,M.g.length),I=[],L=0;L<R;L++)I[L]=this.i(L)&M.i(L);return new f(I,this.h&M.h)},i.or=function(M){for(var R=Math.max(this.g.length,M.g.length),I=[],L=0;L<R;L++)I[L]=this.i(L)|M.i(L);return new f(I,this.h|M.h)},i.xor=function(M){for(var R=Math.max(this.g.length,M.g.length),I=[],L=0;L<R;L++)I[L]=this.i(L)^M.i(L);return new f(I,this.h^M.h)};function fe(M){for(var R=M.g.length+1,I=[],L=0;L<R;L++)I[L]=M.i(L)<<1|M.i(L-1)>>>31;return new f(I,M.h)}function be(M,R){var I=R>>5;R%=32;for(var L=M.g.length-I,N=[],B=0;B<L;B++)N[B]=0<R?M.i(B+I)>>>R|M.i(B+I+1)<<32-R:M.i(B+I);return new f(N,M.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,rx=r,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.A,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=y,f.fromString=x,va=f}).apply(typeof x1<"u"?x1:typeof self<"u"?self:typeof window<"u"?window:{});var dd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ax,Sc,ox,wd,Xm,lx,cx,ux;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,v,b){return u==Array.prototype||u==Object.prototype||(u[v]=b.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof dd=="object"&&dd];for(var v=0;v<u.length;++v){var b=u[v];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var r=n(this);function o(u,v){if(v)e:{var b=r;u=u.split(".");for(var T=0;T<u.length-1;T++){var X=u[T];if(!(X in b))break e;b=b[X]}u=u[u.length-1],T=b[u],v=v(T),v!=T&&v!=null&&e(b,u,{configurable:!0,writable:!0,value:v})}}function c(u,v){u instanceof String&&(u+="");var b=0,T=!1,X={next:function(){if(!T&&b<u.length){var re=b++;return{value:v(re,u[re]),done:!1}}return T=!0,{done:!0,value:void 0}}};return X[Symbol.iterator]=function(){return X},X}o("Array.prototype.values",function(u){return u||function(){return c(this,function(v,b){return b})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var f=f||{},p=this||self;function g(u){var v=typeof u;return v=v!="object"?v:u?Array.isArray(u)?"array":v:"null",v=="array"||v=="object"&&typeof u.length=="number"}function y(u){var v=typeof u;return v=="object"&&u!=null||v=="function"}function x(u,v,b){return u.call.apply(u.bind,arguments)}function S(u,v,b){if(!u)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var X=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(X,T),u.apply(v,X)}}return function(){return u.apply(v,arguments)}}function A(u,v,b){return A=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?x:S,A.apply(null,arguments)}function F(u,v){var b=Array.prototype.slice.call(arguments,1);return function(){var T=b.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function G(u,v){function b(){}b.prototype=v.prototype,u.aa=v.prototype,u.prototype=new b,u.prototype.constructor=u,u.Qb=function(T,X,re){for(var xe=Array(arguments.length-2),ct=2;ct<arguments.length;ct++)xe[ct-2]=arguments[ct];return v.prototype[X].apply(T,xe)}}function q(u){const v=u.length;if(0<v){const b=Array(v);for(let T=0;T<v;T++)b[T]=u[T];return b}return[]}function K(u,v){for(let b=1;b<arguments.length;b++){const T=arguments[b];if(g(T)){const X=u.length||0,re=T.length||0;u.length=X+re;for(let xe=0;xe<re;xe++)u[X+xe]=T[xe]}else u.push(T)}}class J{constructor(v,b){this.i=v,this.j=b,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function Y(u){return/^[\s\xa0]*$/.test(u)}function z(){var u=p.navigator;return u&&(u=u.userAgent)?u:""}function me(u){return me[" "](u),u}me[" "]=function(){};var fe=z().indexOf("Gecko")!=-1&&!(z().toLowerCase().indexOf("webkit")!=-1&&z().indexOf("Edge")==-1)&&!(z().indexOf("Trident")!=-1||z().indexOf("MSIE")!=-1)&&z().indexOf("Edge")==-1;function be(u,v,b){for(const T in u)v.call(b,u[T],T,u)}function M(u,v){for(const b in u)v.call(void 0,u[b],b,u)}function R(u){const v={};for(const b in u)v[b]=u[b];return v}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(u,v){let b,T;for(let X=1;X<arguments.length;X++){T=arguments[X];for(b in T)u[b]=T[b];for(let re=0;re<I.length;re++)b=I[re],Object.prototype.hasOwnProperty.call(T,b)&&(u[b]=T[b])}}function N(u){var v=1;u=u.split(":");const b=[];for(;0<v&&u.length;)b.push(u.shift()),v--;return u.length&&b.push(u.join(":")),b}function B(u){p.setTimeout(()=>{throw u},0)}function j(){var u=Ae;let v=null;return u.g&&(v=u.g,u.g=u.g.next,u.g||(u.h=null),v.next=null),v}class Fe{constructor(){this.h=this.g=null}add(v,b){const T=$e.get();T.set(v,b),this.h?this.h.next=T:this.g=T,this.h=T}}var $e=new J(()=>new ae,u=>u.reset());class ae{constructor(){this.next=this.g=this.h=null}set(v,b){this.h=v,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let he,ie=!1,Ae=new Fe,D=()=>{const u=p.Promise.resolve(void 0);he=()=>{u.then(P)}};var P=()=>{for(var u;u=j();){try{u.h.call(u.g)}catch(b){B(b)}var v=$e;v.j(u),100>v.h&&(v.h++,u.next=v.g,v.g=u)}ie=!1};function oe(){this.s=this.s,this.C=this.C}oe.prototype.s=!1,oe.prototype.ma=function(){this.s||(this.s=!0,this.N())},oe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ee(u,v){this.type=u,this.g=this.target=v,this.defaultPrevented=!1}ee.prototype.h=function(){this.defaultPrevented=!0};var _e=function(){if(!p.addEventListener||!Object.defineProperty)return!1;var u=!1,v=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const b=()=>{};p.addEventListener("test",b,v),p.removeEventListener("test",b,v)}catch{}return u}();function Se(u,v){if(ee.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var b=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=v,v=u.relatedTarget){if(fe){e:{try{me(v.nodeName);var X=!0;break e}catch{}X=!1}X||(v=null)}}else b=="mouseover"?v=u.fromElement:b=="mouseout"&&(v=u.toElement);this.relatedTarget=v,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Te[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Se.aa.h.call(this)}}G(Se,ee);var Te={2:"touch",3:"pen",4:"mouse"};Se.prototype.h=function(){Se.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var lt="closure_listenable_"+(1e6*Math.random()|0),vt=0;function ti(u,v,b,T,X){this.listener=u,this.proxy=null,this.src=v,this.type=b,this.capture=!!T,this.ha=X,this.key=++vt,this.da=this.fa=!1}function Un(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function yn(u){this.src=u,this.g={},this.h=0}yn.prototype.add=function(u,v,b,T,X){var re=u.toString();u=this.g[re],u||(u=this.g[re]=[],this.h++);var xe=Ri(u,v,T,X);return-1<xe?(v=u[xe],b||(v.fa=!1)):(v=new ti(v,this.src,re,!!T,X),v.fa=b,u.push(v)),v};function Ti(u,v){var b=v.type;if(b in u.g){var T=u.g[b],X=Array.prototype.indexOf.call(T,v,void 0),re;(re=0<=X)&&Array.prototype.splice.call(T,X,1),re&&(Un(v),u.g[b].length==0&&(delete u.g[b],u.h--))}}function Ri(u,v,b,T){for(var X=0;X<u.length;++X){var re=u[X];if(!re.da&&re.listener==v&&re.capture==!!b&&re.ha==T)return X}return-1}var ps="closure_lm_"+(1e6*Math.random()|0),Lr={};function ka(u,v,b,T,X){if(Array.isArray(v)){for(var re=0;re<v.length;re++)ka(u,v[re],b,T,X);return null}return b=ot(b),u&&u[lt]?u.K(v,b,y(T)?!!T.capture:!1,X):ke(u,v,b,!1,T,X)}function ke(u,v,b,T,X,re){if(!v)throw Error("Invalid event type");var xe=y(X)?!!X.capture:!!X,ct=Ge(u);if(ct||(u[ps]=ct=new yn(u)),b=ct.add(v,b,T,xe,re),b.proxy)return b;if(T=se(),b.proxy=T,T.src=u,T.listener=b,u.addEventListener)_e||(X=xe),X===void 0&&(X=!1),u.addEventListener(v.toString(),T,X);else if(u.attachEvent)u.attachEvent(we(v.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return b}function se(){function u(b){return v.call(u.src,u.listener,b)}const v=St;return u}function ve(u,v,b,T,X){if(Array.isArray(v))for(var re=0;re<v.length;re++)ve(u,v[re],b,T,X);else T=y(T)?!!T.capture:!!T,b=ot(b),u&&u[lt]?(u=u.i,v=String(v).toString(),v in u.g&&(re=u.g[v],b=Ri(re,b,T,X),-1<b&&(Un(re[b]),Array.prototype.splice.call(re,b,1),re.length==0&&(delete u.g[v],u.h--)))):u&&(u=Ge(u))&&(v=u.g[v.toString()],u=-1,v&&(u=Ri(v,b,T,X)),(b=-1<u?v[u]:null)&&Re(b))}function Re(u){if(typeof u!="number"&&u&&!u.da){var v=u.src;if(v&&v[lt])Ti(v.i,u);else{var b=u.type,T=u.proxy;v.removeEventListener?v.removeEventListener(b,T,u.capture):v.detachEvent?v.detachEvent(we(b),T):v.addListener&&v.removeListener&&v.removeListener(T),(b=Ge(v))?(Ti(b,u),b.h==0&&(b.src=null,v[ps]=null)):Un(u)}}}function we(u){return u in Lr?Lr[u]:Lr[u]="on"+u}function St(u,v){if(u.da)u=!0;else{v=new Se(v,this);var b=u.listener,T=u.ha||u.src;u.fa&&Re(u),u=b.call(T,v)}return u}function Ge(u){return u=u[ps],u instanceof yn?u:null}var tt="__closure_events_fn_"+(1e9*Math.random()>>>0);function ot(u){return typeof u=="function"?u:(u[tt]||(u[tt]=function(v){return u.handleEvent(v)}),u[tt])}function kt(){oe.call(this),this.i=new yn(this),this.M=this,this.F=null}G(kt,oe),kt.prototype[lt]=!0,kt.prototype.removeEventListener=function(u,v,b,T){ve(this,u,v,b,T)};function nt(u,v){var b,T=u.F;if(T)for(b=[];T;T=T.F)b.push(T);if(u=u.M,T=v.type||v,typeof v=="string")v=new ee(v,u);else if(v instanceof ee)v.target=v.target||u;else{var X=v;v=new ee(T,u),L(v,X)}if(X=!0,b)for(var re=b.length-1;0<=re;re--){var xe=v.g=b[re];X=Tn(xe,T,!0,v)&&X}if(xe=v.g=u,X=Tn(xe,T,!0,v)&&X,X=Tn(xe,T,!1,v)&&X,b)for(re=0;re<b.length;re++)xe=v.g=b[re],X=Tn(xe,T,!1,v)&&X}kt.prototype.N=function(){if(kt.aa.N.call(this),this.i){var u=this.i,v;for(v in u.g){for(var b=u.g[v],T=0;T<b.length;T++)Un(b[T]);delete u.g[v],u.h--}}this.F=null},kt.prototype.K=function(u,v,b,T){return this.i.add(String(u),v,!1,b,T)},kt.prototype.L=function(u,v,b,T){return this.i.add(String(u),v,!0,b,T)};function Tn(u,v,b,T){if(v=u.i.g[String(v)],!v)return!0;v=v.concat();for(var X=!0,re=0;re<v.length;++re){var xe=v[re];if(xe&&!xe.da&&xe.capture==b){var ct=xe.listener,dn=xe.ha||xe.src;xe.fa&&Ti(u.i,xe),X=ct.call(dn,T)!==!1&&X}}return X&&!T.defaultPrevented}function vn(u,v,b){if(typeof u=="function")b&&(u=A(u,b));else if(u&&typeof u.handleEvent=="function")u=A(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:p.setTimeout(u,v||0)}function Na(u){u.g=vn(()=>{u.g=null,u.i&&(u.i=!1,Na(u))},u.l);const v=u.h;u.h=null,u.m.apply(null,v)}class Ci extends oe{constructor(v,b){super(),this.m=v,this.l=b,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Na(this)}N(){super.N(),this.g&&(p.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ks(u){oe.call(this),this.h=u,this.g={}}G(Ks,oe);var Ys=[];function gs(u){be(u.g,function(v,b){this.g.hasOwnProperty(b)&&Re(v)},u),u.g={}}Ks.prototype.N=function(){Ks.aa.N.call(this),gs(this)},Ks.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ni=p.JSON.stringify,ys=p.JSON.parse,vs=class{stringify(u){return p.JSON.stringify(u,void 0)}parse(u){return p.JSON.parse(u,void 0)}};function ja(){}ja.prototype.h=null;function Qs(u){return u.h||(u.h=u.i())}function Da(){}var Wi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Xi(){ee.call(this,"d")}G(Xi,ee);function $s(){ee.call(this,"c")}G($s,ee);var Rn={},Js=null;function Le(){return Js=Js||new kt}Rn.La="serverreachability";function Vr(u){ee.call(this,Rn.La,u)}G(Vr,ee);function ze(u){const v=Le();nt(v,new Vr(v))}Rn.STAT_EVENT="statevent";function er(u,v){ee.call(this,Rn.STAT_EVENT,u),this.stat=v}G(er,ee);function Dt(u){const v=Le();nt(v,new er(v,u))}Rn.Ma="timingevent";function Yt(u,v){ee.call(this,Rn.Ma,u),this.size=v}G(Yt,ee);function qt(u,v){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return p.setTimeout(function(){u()},v)}function Bn(){this.g=!0}Bn.prototype.xa=function(){this.g=!1};function Oa(u,v,b,T,X,re){u.info(function(){if(u.g)if(re)for(var xe="",ct=re.split("&"),dn=0;dn<ct.length;dn++){var ut=ct[dn].split("=");if(1<ut.length){var _n=ut[0];ut=ut[1];var hn=_n.split("_");xe=2<=hn.length&&hn[1]=="type"?xe+(_n+"="+ut+"&"):xe+(_n+"=redacted&")}}else xe=null;else xe=re;return"XMLHTTP REQ ("+T+") [attempt "+X+"]: "+v+`
`+b+`
`+xe})}function Pr(u,v,b,T,X,re,xe){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+X+"]: "+v+`
`+b+`
`+re+" "+xe})}function Zi(u,v,b,T){u.info(function(){return"XMLHTTP TEXT ("+v+"): "+bs(u,b)+(T?" "+T:"")})}function xo(u,v){u.info(function(){return"TIMEOUT: "+v})}Bn.prototype.info=function(){};function bs(u,v){if(!u.g)return v;if(!v)return null;try{var b=JSON.parse(v);if(b){for(u=0;u<b.length;u++)if(Array.isArray(b[u])){var T=b[u];if(!(2>T.length)){var X=T[1];if(Array.isArray(X)&&!(1>X.length)){var re=X[0];if(re!="noop"&&re!="stop"&&re!="close")for(var xe=1;xe<X.length;xe++)X[xe]=""}}}}return ni(b)}catch{return v}}var _s={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ki={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},di;function ii(){}G(ii,ja),ii.prototype.g=function(){return new XMLHttpRequest},ii.prototype.i=function(){return{}},di=new ii;function Cn(u,v,b,T){this.j=u,this.i=v,this.l=b,this.R=T||1,this.U=new Ks(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Mt}function Mt(){this.i=null,this.g="",this.h=!1}var Ii={},xs={};function hi(u,v,b){u.L=1,u.v=pi(bn(v)),u.m=b,u.P=!0,si(u,null)}function si(u,v){u.F=Date.now(),ws(u),u.A=bn(u.v);var b=u.A,T=u.R;Array.isArray(T)||(T=[String(T)]),As(b.i,"t",T),u.C=0,b=u.j.J,u.h=new Mt,u.g=Di(u.j,b?v:null,!u.m),0<u.O&&(u.M=new Ci(A(u.Y,u,u.g),u.O)),v=u.U,b=u.g,T=u.ca;var X="readystatechange";Array.isArray(X)||(X&&(Ys[0]=X.toString()),X=Ys);for(var re=0;re<X.length;re++){var xe=ka(b,X[re],T||v.handleEvent,!1,v.h||v);if(!xe)break;v.g[xe.key]=xe}v=u.H?R(u.H):{},u.m?(u.u||(u.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,v)):(u.u="GET",u.g.ea(u.A,u.u,null,v)),ze(),Oa(u.i,u.u,u.A,u.l,u.R,u.m)}Cn.prototype.ca=function(u){u=u.target;const v=this.M;v&&$n(u)==3?v.j():this.Y(u)},Cn.prototype.Y=function(u){try{if(u==this.g)e:{const hn=$n(this.g);var v=this.g.Ba();const dr=this.g.Z();if(!(3>hn)&&(hn!=3||this.g&&(this.h.h||this.g.oa()||Co(this.g)))){this.J||hn!=4||v==7||(v==8||0>=dr?ze(3):ze(2)),Ss(this);var b=this.g.Z();this.X=b;t:if(wo(this)){var T=Co(this.g);u="";var X=T.length,re=$n(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){en(this),fi(this);var xe="";break t}this.h.i=new p.TextDecoder}for(v=0;v<X;v++)this.h.h=!0,u+=this.h.i.decode(T[v],{stream:!(re&&v==X-1)});T.length=0,this.h.g+=u,this.C=0,xe=this.h.g}else xe=this.g.oa();if(this.o=b==200,Pr(this.i,this.u,this.A,this.l,this.R,hn,b),this.o){if(this.T&&!this.K){t:{if(this.g){var ct,dn=this.g;if((ct=dn.g?dn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Y(ct)){var ut=ct;break t}}ut=null}if(b=ut)Zi(this.i,this.l,b,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,tr(this,b);else{this.o=!1,this.s=3,Dt(12),en(this),fi(this);break e}}if(this.P){b=!0;let Nn;for(;!this.J&&this.C<xe.length;)if(Nn=So(this,xe),Nn==xs){hn==4&&(this.s=4,Dt(14),b=!1),Zi(this.i,this.l,null,"[Incomplete Response]");break}else if(Nn==Ii){this.s=4,Dt(15),Zi(this.i,this.l,xe,"[Invalid Chunk]"),b=!1;break}else Zi(this.i,this.l,Nn,null),tr(this,Nn);if(wo(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),hn!=4||xe.length!=0||this.h.h||(this.s=1,Dt(16),b=!1),this.o=this.o&&b,!b)Zi(this.i,this.l,xe,"[Invalid Chunked Response]"),en(this),fi(this);else if(0<xe.length&&!this.W){this.W=!0;var _n=this.j;_n.g==this&&_n.ba&&!_n.M&&(_n.j.info("Great, no buffering proxy detected. Bytes received: "+xe.length),Je(_n),_n.M=!0,Dt(11))}}else Zi(this.i,this.l,xe,null),tr(this,xe);hn==4&&en(this),this.o&&!this.J&&(hn==4?mt(this.j,this):(this.o=!1,ws(this)))}else Il(this.g),b==400&&0<xe.indexOf("Unknown SID")?(this.s=3,Dt(12)):(this.s=0,Dt(13)),en(this),fi(this)}}}catch{}finally{}};function wo(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function So(u,v){var b=u.C,T=v.indexOf(`
`,b);return T==-1?xs:(b=Number(v.substring(b,T)),isNaN(b)?Ii:(T+=1,T+b>v.length?xs:(v=v.slice(T,T+b),u.C=T+b,v)))}Cn.prototype.cancel=function(){this.J=!0,en(this)};function ws(u){u.S=Date.now()+u.I,Eo(u,u.I)}function Eo(u,v){if(u.B!=null)throw Error("WatchDog timer not null");u.B=qt(A(u.ba,u),v)}function Ss(u){u.B&&(p.clearTimeout(u.B),u.B=null)}Cn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(xo(this.i,this.A),this.L!=2&&(ze(),Dt(17)),en(this),this.s=2,fi(this)):Eo(this,this.S-u)};function fi(u){u.j.G==0||u.J||mt(u.j,u)}function en(u){Ss(u);var v=u.M;v&&typeof v.ma=="function"&&v.ma(),u.M=null,gs(u.U),u.g&&(v=u.g,u.g=null,v.abort(),v.ma())}function tr(u,v){try{var b=u.j;if(b.G!=0&&(b.g==u||Ma(b.h,u))){if(!u.K&&Ma(b.h,u)&&b.G==3){try{var T=b.Da.g.parse(v)}catch{T=null}if(Array.isArray(T)&&T.length==3){var X=T;if(X[0]==0){e:if(!b.u){if(b.g)if(b.g.F+3e3<u.F)Ze(b),ur(b);else break e;Ie(b),Dt(18)}}else b.za=X[1],0<b.za-b.T&&37500>X[2]&&b.F&&b.v==0&&!b.C&&(b.C=qt(A(b.Za,b),6e3));if(1>=ir(b.h)&&b.ca){try{b.ca()}catch{}b.ca=void 0}}else Ct(b,11)}else if((u.K||b.g==u)&&Ze(b),!Y(v))for(X=b.Da.g.parse(v),v=0;v<X.length;v++){let ut=X[v];if(b.T=ut[0],ut=ut[1],b.G==2)if(ut[0]=="c"){b.K=ut[1],b.ia=ut[2];const _n=ut[3];_n!=null&&(b.la=_n,b.j.info("VER="+b.la));const hn=ut[4];hn!=null&&(b.Aa=hn,b.j.info("SVER="+b.Aa));const dr=ut[5];dr!=null&&typeof dr=="number"&&0<dr&&(T=1.5*dr,b.L=T,b.j.info("backChannelRequestTimeoutMs_="+T)),T=b;const Nn=u.g;if(Nn){const ks=Nn.g?Nn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ks){var re=T.h;re.g||ks.indexOf("spdy")==-1&&ks.indexOf("quic")==-1&&ks.indexOf("h2")==-1||(re.j=re.l,re.g=new Set,re.h&&(sr(re,re.h),re.h=null))}if(T.D){const kl=Nn.g?Nn.g.getResponseHeader("X-HTTP-Session-Id"):null;kl&&(T.ya=kl,ft(T.I,T.D,kl))}}b.G=3,b.l&&b.l.ua(),b.ba&&(b.R=Date.now()-u.F,b.j.info("Handshake RTT: "+b.R+"ms")),T=b;var xe=u;if(T.qa=zn(T,T.J?T.ia:null,T.W),xe.K){In(T.h,xe);var ct=xe,dn=T.L;dn&&(ct.I=dn),ct.B&&(Ss(ct),ws(ct)),T.g=xe}else ge(T);0<b.i.length&&k(b)}else ut[0]!="stop"&&ut[0]!="close"||Ct(b,7);else b.G==3&&(ut[0]=="stop"||ut[0]=="close"?ut[0]=="stop"?Ct(b,7):zr(b):ut[0]!="noop"&&b.l&&b.l.ta(ut),b.v=0)}}ze(4)}catch{}}var Ao=class{constructor(u,v){this.g=u,this.map=v}};function Yi(u){this.l=u||10,p.PerformanceNavigationTiming?(u=p.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(p.chrome&&p.chrome.loadTimes&&p.chrome.loadTimes()&&p.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function nr(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function ir(u){return u.h?1:u.g?u.g.size:0}function Ma(u,v){return u.h?u.h==v:u.g?u.g.has(v):!1}function sr(u,v){u.g?u.g.add(v):u.h=v}function In(u,v){u.h&&u.h==v?u.h=null:u.g&&u.g.has(v)&&u.g.delete(v)}Yi.prototype.cancel=function(){if(this.i=La(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function La(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let v=u.i;for(const b of u.g.values())v=v.concat(b.D);return v}return q(u.i)}function Al(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(g(u)){for(var v=[],b=u.length,T=0;T<b;T++)v.push(u[T]);return v}v=[],b=0;for(T in u)v[b++]=u[T];return v}function mi(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(g(u)||typeof u=="string"){var v=[];u=u.length;for(var b=0;b<u;b++)v.push(b);return v}v=[],b=0;for(const T in u)v[b++]=T;return v}}}function Va(u,v){if(u.forEach&&typeof u.forEach=="function")u.forEach(v,void 0);else if(g(u)||typeof u=="string")Array.prototype.forEach.call(u,v,void 0);else for(var b=mi(u),T=Al(u),X=T.length,re=0;re<X;re++)v.call(void 0,T[re],b&&b[re],u)}var ki=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Tl(u,v){if(u){u=u.split("&");for(var b=0;b<u.length;b++){var T=u[b].indexOf("="),X=null;if(0<=T){var re=u[b].substring(0,T);X=u[b].substring(T+1)}else re=u[b];v(re,X?decodeURIComponent(X.replace(/\+/g," ")):"")}}}function Gt(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Gt){this.h=u.h,on(this,u.j),this.o=u.o,this.g=u.g,Qi(this,u.s),this.l=u.l;var v=u.i,b=new Es;b.i=v.i,v.g&&(b.g=new Map(v.g),b.h=v.h),Xe(this,b),this.m=u.m}else u&&(v=String(u).match(ki))?(this.h=!1,on(this,v[1]||"",!0),this.o=ln(v[2]||""),this.g=ln(v[3]||"",!0),Qi(this,v[4]),this.l=ln(v[5]||"",!0),Xe(this,v[6]||"",!0),this.m=ln(v[7]||"")):(this.h=!1,this.i=new Es(null,this.h))}Gt.prototype.toString=function(){var u=[],v=this.j;v&&u.push($i(v,rr,!0),":");var b=this.g;return(b||v=="file")&&(u.push("//"),(v=this.o)&&u.push($i(v,rr,!0),"@"),u.push(encodeURIComponent(String(b)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.s,b!=null&&u.push(":",String(b))),(b=this.l)&&(this.g&&b.charAt(0)!="/"&&u.push("/"),u.push($i(b,b.charAt(0)=="/"?Rl:Ua,!0))),(b=this.i.toString())&&u.push("?",b),(b=this.m)&&u.push("#",$i(b,Ji)),u.join("")};function bn(u){return new Gt(u)}function on(u,v,b){u.j=b?ln(v,!0):v,u.j&&(u.j=u.j.replace(/:$/,""))}function Qi(u,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);u.s=v}else u.s=null}function Xe(u,v,b){v instanceof Es?(u.i=v,ar(u.i,u.h)):(b||(v=$i(v,Cl)),u.i=new Es(v,u.h))}function ft(u,v,b){u.i.set(v,b)}function pi(u){return ft(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function ln(u,v){return u?v?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function $i(u,v,b){return typeof u=="string"?(u=encodeURI(u).replace(v,Pa),b&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Pa(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var rr=/[#\/\?@]/g,Ua=/[#\?:]/g,Rl=/[#\?]/g,Cl=/[#\?@]/g,Ji=/#/g;function Es(u,v){this.h=this.g=null,this.i=u||null,this.j=!!v}function kn(u){u.g||(u.g=new Map,u.h=0,u.i&&Tl(u.i,function(v,b){u.add(decodeURIComponent(v.replace(/\+/g," ")),b)}))}i=Es.prototype,i.add=function(u,v){kn(this),this.i=null,u=gi(this,u);var b=this.g.get(u);return b||this.g.set(u,b=[]),b.push(v),this.h+=1,this};function es(u,v){kn(u),v=gi(u,v),u.g.has(v)&&(u.i=null,u.h-=u.g.get(v).length,u.g.delete(v))}function ts(u,v){return kn(u),v=gi(u,v),u.g.has(v)}i.forEach=function(u,v){kn(this),this.g.forEach(function(b,T){b.forEach(function(X){u.call(v,X,T,this)},this)},this)},i.na=function(){kn(this);const u=Array.from(this.g.values()),v=Array.from(this.g.keys()),b=[];for(let T=0;T<v.length;T++){const X=u[T];for(let re=0;re<X.length;re++)b.push(v[T])}return b},i.V=function(u){kn(this);let v=[];if(typeof u=="string")ts(this,u)&&(v=v.concat(this.g.get(gi(this,u))));else{u=Array.from(this.g.values());for(let b=0;b<u.length;b++)v=v.concat(u[b])}return v},i.set=function(u,v){return kn(this),this.i=null,u=gi(this,u),ts(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[v]),this.h+=1,this},i.get=function(u,v){return u?(u=this.V(u),0<u.length?String(u[0]):v):v};function As(u,v,b){es(u,v),0<b.length&&(u.i=null,u.g.set(gi(u,v),q(b)),u.h+=b.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],v=Array.from(this.g.keys());for(var b=0;b<v.length;b++){var T=v[b];const re=encodeURIComponent(String(T)),xe=this.V(T);for(T=0;T<xe.length;T++){var X=re;xe[T]!==""&&(X+="="+encodeURIComponent(String(xe[T]))),u.push(X)}}return this.i=u.join("&")};function gi(u,v){return v=String(v),u.j&&(v=v.toLowerCase()),v}function ar(u,v){v&&!u.j&&(kn(u),u.i=null,u.g.forEach(function(b,T){var X=T.toLowerCase();T!=X&&(es(this,T),As(this,X,b))},u)),u.j=v}function Ts(u,v){const b=new Bn;if(p.Image){const T=new Image;T.onload=F(Kn,b,"TestLoadImage: loaded",!0,v,T),T.onerror=F(Kn,b,"TestLoadImage: error",!1,v,T),T.onabort=F(Kn,b,"TestLoadImage: abort",!1,v,T),T.ontimeout=F(Kn,b,"TestLoadImage: timeout",!1,v,T),p.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else v(!1)}function tn(u,v){const b=new Bn,T=new AbortController,X=setTimeout(()=>{T.abort(),Kn(b,"TestPingServer: timeout",!1,v)},1e4);fetch(u,{signal:T.signal}).then(re=>{clearTimeout(X),re.ok?Kn(b,"TestPingServer: ok",!0,v):Kn(b,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(X),Kn(b,"TestPingServer: error",!1,v)})}function Kn(u,v,b,T,X){try{X&&(X.onload=null,X.onerror=null,X.onabort=null,X.ontimeout=null),T(b)}catch{}}function or(){this.g=new vs}function Yn(u,v,b){const T=b||"";try{Va(u,function(X,re){let xe=X;y(X)&&(xe=ni(X)),v.push(T+re+"="+encodeURIComponent(xe))})}catch(X){throw v.push(T+"type="+encodeURIComponent("_badmap")),X}}function cn(u){this.l=u.Ub||null,this.j=u.eb||!1}G(cn,ja),cn.prototype.g=function(){return new ns(this.l,this.j)},cn.prototype.i=function(u){return function(){return u}}({});function ns(u,v){kt.call(this),this.D=u,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}G(ns,kt),i=ns.prototype,i.open=function(u,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=v,this.readyState=1,Ni(this)},i.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(v.body=u),(this.D||p).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Qn(this)),this.readyState=0},i.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Ni(this)),this.g&&(this.readyState=3,Ni(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof p.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Rs(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Rs(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}i.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var v=u.value?u.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!u.done}))&&(this.response=this.responseText+=v)}u.done?Qn(this):Ni(this),this.readyState==3&&Rs(this)}},i.Ra=function(u){this.g&&(this.response=this.responseText=u,Qn(this))},i.Qa=function(u){this.g&&(this.response=u,Qn(this))},i.ga=function(){this.g&&Qn(this)};function Qn(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Ni(u)}i.setRequestHeader=function(u,v){this.u.append(u,v)},i.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],v=this.h.entries();for(var b=v.next();!b.done;)b=b.value,u.push(b[0]+": "+b[1]),b=v.next();return u.join(`\r
`)};function Ni(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(ns.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function To(u){let v="";return be(u,function(b,T){v+=T,v+=":",v+=b,v+=`\r
`}),v}function Vt(u,v,b){e:{for(T in b){var T=!1;break e}T=!0}T||(b=To(b),typeof u=="string"?b!=null&&encodeURIComponent(String(b)):ft(u,v,b))}function gt(u){kt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}G(gt,kt);var Cs=/^https?$/i,is=["POST","PUT"];i=gt.prototype,i.Ha=function(u){this.J=u},i.ea=function(u,v,b,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);v=v?v.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():di.g(),this.v=this.o?Qs(this.o):Qs(di),this.g.onreadystatechange=A(this.Ea,this);try{this.B=!0,this.g.open(v,String(u),!0),this.B=!1}catch(re){Ro(this,re);return}if(u=b||"",b=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var X in T)b.set(X,T[X]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const re of T.keys())b.set(re,T.get(re));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(b.keys()).find(re=>re.toLowerCase()=="content-type"),X=p.FormData&&u instanceof p.FormData,!(0<=Array.prototype.indexOf.call(is,v,void 0))||T||X||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[re,xe]of b)this.g.setRequestHeader(re,xe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{lr(this),this.u=!0,this.g.send(u),this.u=!1}catch(re){Ro(this,re)}};function Ro(u,v){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=v,u.m=5,Ur(u),ji(u)}function Ur(u){u.A||(u.A=!0,nt(u,"complete"),nt(u,"error"))}i.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,nt(this,"complete"),nt(this,"abort"),ji(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ji(this,!0)),gt.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?Br(this):this.bb())},i.bb=function(){Br(this)};function Br(u){if(u.h&&typeof f<"u"&&(!u.v[1]||$n(u)!=4||u.Z()!=2)){if(u.u&&$n(u)==4)vn(u.Ea,0,u);else if(nt(u,"readystatechange"),$n(u)==4){u.h=!1;try{const xe=u.Z();e:switch(xe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var b;if(!(b=v)){var T;if(T=xe===0){var X=String(u.D).match(ki)[1]||null;!X&&p.self&&p.self.location&&(X=p.self.location.protocol.slice(0,-1)),T=!Cs.test(X?X.toLowerCase():"")}b=T}if(b)nt(u,"complete"),nt(u,"success");else{u.m=6;try{var re=2<$n(u)?u.g.statusText:""}catch{re=""}u.l=re+" ["+u.Z()+"]",Ur(u)}}finally{ji(u)}}}}function ji(u,v){if(u.g){lr(u);const b=u.g,T=u.v[0]?()=>{}:null;u.g=null,u.v=null,v||nt(u,"ready");try{b.onreadystatechange=T}catch{}}}function lr(u){u.I&&(p.clearTimeout(u.I),u.I=null)}i.isActive=function(){return!!this.g};function $n(u){return u.g?u.g.readyState:0}i.Z=function(){try{return 2<$n(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(u){if(this.g){var v=this.g.responseText;return u&&v.indexOf(u)==0&&(v=v.substring(u.length)),ys(v)}};function Co(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Il(u){const v={};u=(u.g&&2<=$n(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(Y(u[T]))continue;var b=N(u[T]);const X=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const re=v[X]||[];v[X]=re,re.push(b)}M(v,function(T){return T.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Is(u,v,b){return b&&b.internalChannelParams&&b.internalChannelParams[u]||v}function cr(u){this.Aa=0,this.i=[],this.j=new Bn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Is("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Is("baseRetryDelayMs",5e3,u),this.cb=Is("retryDelaySeedMs",1e4,u),this.Wa=Is("forwardChannelMaxRetries",2,u),this.wa=Is("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Yi(u&&u.concurrentRequestLimit),this.Da=new or,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=cr.prototype,i.la=8,i.G=1,i.connect=function(u,v,b,T){Dt(0),this.W=u,this.H=v||{},b&&T!==void 0&&(this.H.OSID=b,this.H.OAID=T),this.F=this.X,this.I=zn(this,null,this.W),k(this)};function zr(u){if(w(u),u.G==3){var v=u.U++,b=bn(u.I);if(ft(b,"SID",u.K),ft(b,"RID",v),ft(b,"TYPE","terminate"),$(u,b),v=new Cn(u,u.j,v),v.L=2,v.v=pi(bn(b)),b=!1,p.navigator&&p.navigator.sendBeacon)try{b=p.navigator.sendBeacon(v.v.toString(),"")}catch{}!b&&p.Image&&(new Image().src=v.v,b=!0),b||(v.g=Di(v.j,null),v.g.ea(v.v)),v.F=Date.now(),ws(v)}un(u)}function ur(u){u.g&&(Je(u),u.g.cancel(),u.g=null)}function w(u){ur(u),u.u&&(p.clearTimeout(u.u),u.u=null),Ze(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&p.clearTimeout(u.s),u.s=null)}function k(u){if(!nr(u.h)&&!u.s){u.s=!0;var v=u.Ga;he||D(),ie||(he(),ie=!0),Ae.add(v,u),u.B=0}}function U(u,v){return ir(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=v.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=qt(A(u.Ga,u,v),Rt(u,u.B)),u.B++,!0)}i.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const X=new Cn(this,this.j,u);let re=this.o;if(this.S&&(re?(re=R(re),L(re,this.S)):re=this.S),this.m!==null||this.O||(X.H=re,re=null),this.P)e:{for(var v=0,b=0;b<this.i.length;b++){t:{var T=this.i[b];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(v+=T,4096<v){v=b;break e}if(v===4096||b===this.i.length-1){v=b+1;break e}}v=1e3}else v=1e3;v=ye(this,X,v),b=bn(this.I),ft(b,"RID",u),ft(b,"CVER",22),this.D&&ft(b,"X-HTTP-Session-Id",this.D),$(this,b),re&&(this.O?v="headers="+encodeURIComponent(String(To(re)))+"&"+v:this.m&&Vt(b,this.m,re)),sr(this.h,X),this.Ua&&ft(b,"TYPE","init"),this.P?(ft(b,"$req",v),ft(b,"SID","null"),X.T=!0,hi(X,b,null)):hi(X,b,v),this.G=2}}else this.G==3&&(u?V(this,u):this.i.length==0||nr(this.h)||V(this))};function V(u,v){var b;v?b=v.l:b=u.U++;const T=bn(u.I);ft(T,"SID",u.K),ft(T,"RID",b),ft(T,"AID",u.T),$(u,T),u.m&&u.o&&Vt(T,u.m,u.o),b=new Cn(u,u.j,b,u.B+1),u.m===null&&(b.H=u.o),v&&(u.i=v.D.concat(u.i)),v=ye(u,b,1e3),b.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),sr(u.h,b),hi(b,T,v)}function $(u,v){u.H&&be(u.H,function(b,T){ft(v,T,b)}),u.l&&Va({},function(b,T){ft(v,T,b)})}function ye(u,v,b){b=Math.min(u.i.length,b);var T=u.l?A(u.l.Na,u.l,u):null;e:{var X=u.i;let re=-1;for(;;){const xe=["count="+b];re==-1?0<b?(re=X[0].g,xe.push("ofs="+re)):re=0:xe.push("ofs="+re);let ct=!0;for(let dn=0;dn<b;dn++){let ut=X[dn].g;const _n=X[dn].map;if(ut-=re,0>ut)re=Math.max(0,X[dn].g-100),ct=!1;else try{Yn(_n,xe,"req"+ut+"_")}catch{T&&T(_n)}}if(ct){T=xe.join("&");break e}}}return u=u.i.splice(0,b),v.D=u,T}function ge(u){if(!u.g&&!u.u){u.Y=1;var v=u.Fa;he||D(),ie||(he(),ie=!0),Ae.add(v,u),u.v=0}}function Ie(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=qt(A(u.Fa,u),Rt(u,u.v)),u.v++,!0)}i.Fa=function(){if(this.u=null,De(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=qt(A(this.ab,this),u)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Dt(10),ur(this),De(this))};function Je(u){u.A!=null&&(p.clearTimeout(u.A),u.A=null)}function De(u){u.g=new Cn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var v=bn(u.qa);ft(v,"RID","rpc"),ft(v,"SID",u.K),ft(v,"AID",u.T),ft(v,"CI",u.F?"0":"1"),!u.F&&u.ja&&ft(v,"TO",u.ja),ft(v,"TYPE","xmlhttp"),$(u,v),u.m&&u.o&&Vt(v,u.m,u.o),u.L&&(u.g.I=u.L);var b=u.g;u=u.ia,b.L=1,b.v=pi(bn(v)),b.m=null,b.P=!0,si(b,u)}i.Za=function(){this.C!=null&&(this.C=null,ur(this),Ie(this),Dt(19))};function Ze(u){u.C!=null&&(p.clearTimeout(u.C),u.C=null)}function mt(u,v){var b=null;if(u.g==v){Ze(u),Je(u),u.g=null;var T=2}else if(Ma(u.h,v))b=v.D,In(u.h,v),T=1;else return;if(u.G!=0){if(v.o)if(T==1){b=v.m?v.m.length:0,v=Date.now()-v.F;var X=u.B;T=Le(),nt(T,new Yt(T,b)),k(u)}else ge(u);else if(X=v.s,X==3||X==0&&0<v.X||!(T==1&&U(u,v)||T==2&&Ie(u)))switch(b&&0<b.length&&(v=u.h,v.i=v.i.concat(b)),X){case 1:Ct(u,5);break;case 4:Ct(u,10);break;case 3:Ct(u,6);break;default:Ct(u,2)}}}function Rt(u,v){let b=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(b*=2),b*v}function Ct(u,v){if(u.j.info("Error code "+v),v==2){var b=A(u.fb,u),T=u.Xa;const X=!T;T=new Gt(T||"//www.google.com/images/cleardot.gif"),p.location&&p.location.protocol=="http"||on(T,"https"),pi(T),X?Ts(T.toString(),b):tn(T.toString(),b)}else Dt(2);u.G=0,u.l&&u.l.sa(v),un(u),w(u)}i.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Dt(2)):(this.j.info("Failed to ping google.com"),Dt(1))};function un(u){if(u.G=0,u.ka=[],u.l){const v=La(u.h);(v.length!=0||u.i.length!=0)&&(K(u.ka,v),K(u.ka,u.i),u.h.i.length=0,q(u.i),u.i.length=0),u.l.ra()}}function zn(u,v,b){var T=b instanceof Gt?bn(b):new Gt(b);if(T.g!="")v&&(T.g=v+"."+T.g),Qi(T,T.s);else{var X=p.location;T=X.protocol,v=v?v+"."+X.hostname:X.hostname,X=+X.port;var re=new Gt(null);T&&on(re,T),v&&(re.g=v),X&&Qi(re,X),b&&(re.l=b),T=re}return b=u.D,v=u.ya,b&&v&&ft(T,b,v),ft(T,"VER",u.la),$(u,T),T}function Di(u,v,b){if(v&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=u.Ca&&!u.pa?new gt(new cn({eb:b})):new gt(u.pa),v.Ha(u.J),v}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Oi(){}i=Oi.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function ri(){}ri.prototype.g=function(u,v){return new Pt(u,v)};function Pt(u,v){kt.call(this),this.g=new cr(v),this.l=u,this.h=v&&v.messageUrlParams||null,u=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(u?u["X-WebChannel-Content-Type"]=v.messageContentType:u={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(u?u["X-WebChannel-Client-Profile"]=v.va:u={"X-WebChannel-Client-Profile":v.va}),this.g.S=u,(u=v&&v.Sb)&&!Y(u)&&(this.g.m=u),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!Y(v)&&(this.g.D=v,u=this.h,u!==null&&v in u&&(u=this.h,v in u&&delete u[v])),this.j=new bt(this)}G(Pt,kt),Pt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Pt.prototype.close=function(){zr(this.g)},Pt.prototype.o=function(u){var v=this.g;if(typeof u=="string"){var b={};b.__data__=u,u=b}else this.u&&(b={},b.__data__=ni(u),u=b);v.i.push(new Ao(v.Ya++,u)),v.G==3&&k(v)},Pt.prototype.N=function(){this.g.l=null,delete this.j,zr(this.g),delete this.g,Pt.aa.N.call(this)};function yi(u){Xi.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var v=u.__sm__;if(v){e:{for(const b in v){u=b;break e}u=void 0}(this.i=u)&&(u=this.i,v=v!==null&&u in v?v[u]:void 0),this.data=v}else this.data=u}G(yi,Xi);function He(){$s.call(this),this.status=1}G(He,$s);function bt(u){this.g=u}G(bt,Oi),bt.prototype.ua=function(){nt(this.g,"a")},bt.prototype.ta=function(u){nt(this.g,new yi(u))},bt.prototype.sa=function(u){nt(this.g,new He)},bt.prototype.ra=function(){nt(this.g,"b")},ri.prototype.createWebChannel=ri.prototype.g,Pt.prototype.send=Pt.prototype.o,Pt.prototype.open=Pt.prototype.m,Pt.prototype.close=Pt.prototype.close,ux=function(){return new ri},cx=function(){return Le()},lx=Rn,Xm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},_s.NO_ERROR=0,_s.TIMEOUT=8,_s.HTTP_ERROR=6,wd=_s,Ki.COMPLETE="complete",ox=Ki,Da.EventType=Wi,Wi.OPEN="a",Wi.CLOSE="b",Wi.ERROR="c",Wi.MESSAGE="d",kt.prototype.listen=kt.prototype.K,Sc=Da,gt.prototype.listenOnce=gt.prototype.L,gt.prototype.getLastError=gt.prototype.Ka,gt.prototype.getLastErrorCode=gt.prototype.Ba,gt.prototype.getStatus=gt.prototype.Z,gt.prototype.getResponseJson=gt.prototype.Oa,gt.prototype.getResponseText=gt.prototype.oa,gt.prototype.send=gt.prototype.ea,gt.prototype.setWithCredentials=gt.prototype.Ha,ax=gt}).apply(typeof dd<"u"?dd:typeof self<"u"?self:typeof window<"u"?window:{});const w1="@firebase/firestore",S1="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Wn.UNAUTHENTICATED=new Wn(null),Wn.GOOGLE_CREDENTIALS=new Wn("google-credentials-uid"),Wn.FIRST_PARTY=new Wn("first-party-uid"),Wn.MOCK_USER=new Wn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xl="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uo=new th("@firebase/firestore");function il(){return uo.logLevel}function Ee(i,...e){if(uo.logLevel<=rt.DEBUG){const n=e.map(jp);uo.debug(`Firestore (${xl}): ${i}`,...n)}}function Or(i,...e){if(uo.logLevel<=rt.ERROR){const n=e.map(jp);uo.error(`Firestore (${xl}): ${i}`,...n)}}function xa(i,...e){if(uo.logLevel<=rt.WARN){const n=e.map(jp);uo.warn(`Firestore (${xl}): ${i}`,...n)}}function jp(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ue(i,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,dx(i,r,n)}function dx(i,e,n){let r=`FIRESTORE (${xl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Or(r),new Error(r)}function _t(i,e,n,r){let o="Unexpected state";typeof n=="string"?o=n:r=n,i||dx(e,o,r)}function We(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class je extends ms{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class s4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Wn.UNAUTHENTICATED))}shutdown(){}}class r4{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class a4{constructor(e){this.t=e,this.currentUser=Wn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){_t(this.o===void 0,42304);let r=this.i;const o=g=>this.i!==r?(r=this.i,n(g)):Promise.resolve();let c=new ba;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new ba,e.enqueueRetryable(()=>o(this.currentUser))};const f=()=>{const g=c;e.enqueueRetryable(async()=>{await g.promise,await o(this.currentUser)})},p=g=>{Ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit(g=>p(g)),setTimeout(()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?p(g):(Ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new ba)}},0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(_t(typeof r.accessToken=="string",31837,{l:r}),new hx(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return _t(e===null||typeof e=="string",2055,{h:e}),new Wn(e)}}class o4{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Wn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class l4{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new o4(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Wn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class E1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class c4{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Fi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){_t(this.o===void 0,3512);const r=c=>{c.error!=null&&Ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const f=c.token!==this.m;return this.m=c.token,Ee("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>r(c))};const o=c=>{Ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(c=>o(c)),setTimeout(()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?o(c):Ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new E1(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(_t(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new E1(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u4(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<i;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fx(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=u4(40);for(let c=0;c<o.length;++c)r.length<20&&o[c]<n&&(r+=e.charAt(o[c]%62))}return r}}function Qe(i,e){return i<e?-1:i>e?1:0}function Zm(i,e){let n=0;for(;n<i.length&&n<e.length;){const r=i.codePointAt(n),o=e.codePointAt(n);if(r!==o){if(r<128&&o<128)return Qe(r,o);{const c=fx(),f=d4(c.encode(A1(i,n)),c.encode(A1(e,n)));return f!==0?f:Qe(r,o)}}n+=r>65535?2:1}return Qe(i.length,e.length)}function A1(i,e){return i.codePointAt(e)>65535?i.substring(e,e+2):i.substring(e,e+1)}function d4(i,e){for(let n=0;n<i.length&&n<e.length;++n)if(i[n]!==e[n])return Qe(i[n],e[n]);return Qe(i.length,e.length)}function hl(i,e,n){return i.length===e.length&&i.every((r,o)=>n(r,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T1="__name__";class Ls{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ue(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Ue(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ls.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ls?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let o=0;o<r;o++){const c=Ls.compareSegments(e.get(o),n.get(o));if(c!==0)return c}return Qe(e.length,n.length)}static compareSegments(e,n){const r=Ls.isNumericId(e),o=Ls.isNumericId(n);return r&&!o?-1:!r&&o?1:r&&o?Ls.extractNumericId(e).compare(Ls.extractNumericId(n)):Zm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return va.fromString(e.substring(4,e.length-2))}}class zt extends Ls{construct(e,n,r){return new zt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new je(pe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(o=>o.length>0))}return new zt(n)}static emptyPath(){return new zt([])}}const h4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Vn extends Ls{construct(e,n,r){return new Vn(e,n,r)}static isValidIdentifier(e){return h4.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Vn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===T1}static keyField(){return new Vn([T1])}static fromServerFormat(e){const n=[];let r="",o=0;const c=()=>{if(r.length===0)throw new je(pe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let f=!1;for(;o<e.length;){const p=e[o];if(p==="\\"){if(o+1===e.length)throw new je(pe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new je(pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=g,o+=2}else p==="`"?(f=!f,o++):p!=="."||f?(r+=p,o++):(c(),o++)}if(c(),f)throw new je(pe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Vn(n)}static emptyPath(){return new Vn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(e){this.path=e}static fromPath(e){return new Oe(zt.fromString(e))}static fromName(e){return new Oe(zt.fromString(e).popFirst(5))}static empty(){return new Oe(zt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&zt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return zt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Oe(new zt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f4(i,e,n){if(!n)throw new je(pe.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function m4(i,e,n,r){if(e===!0&&r===!0)throw new je(pe.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function R1(i){if(!Oe.isDocumentKey(i))throw new je(pe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function mx(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function Op(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":Ue(12329,{type:typeof i})}function zc(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new je(pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Op(i);throw new je(pe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function an(i,e){const n={typeString:i};return e&&(n.value=e),n}function iu(i,e){if(!mx(i))throw new je(pe.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const o=e[r].typeString,c="value"in e[r]?{value:e[r].value}:void 0;if(!(r in i)){n=`JSON missing required field: '${r}'`;break}const f=i[r];if(o&&typeof f!==o){n=`JSON field '${r}' must be a ${o}.`;break}if(c!==void 0&&f!==c.value){n=`Expected '${r}' field to equal '${c.value}'`;break}}if(n)throw new je(pe.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C1=-62135596800,I1=1e6;class Ot{static now(){return Ot.fromMillis(Date.now())}static fromDate(e){return Ot.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*I1);return new Ot(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new je(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new je(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<C1)throw new je(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new je(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/I1}_compareTo(e){return this.seconds===e.seconds?Qe(this.nanoseconds,e.nanoseconds):Qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ot._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(iu(e,Ot._jsonSchema))return new Ot(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-C1;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ot._jsonSchemaVersion="firestore/timestamp/1.0",Ot._jsonSchema={type:an("string",Ot._jsonSchemaVersion),seconds:an("number"),nanoseconds:an("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{static fromTimestamp(e){return new qe(e)}static min(){return new qe(new Ot(0,0))}static max(){return new qe(new Ot(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fc=-1;function p4(i,e){const n=i.toTimestamp().seconds,r=i.toTimestamp().nanoseconds+1,o=qe.fromTimestamp(r===1e9?new Ot(n+1,0):new Ot(n,r));return new wa(o,Oe.empty(),e)}function g4(i){return new wa(i.readTime,i.key,Fc)}class wa{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new wa(qe.min(),Oe.empty(),Fc)}static max(){return new wa(qe.max(),Oe.empty(),Fc)}}function y4(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=Oe.comparator(i.documentKey,e.documentKey),n!==0?n:Qe(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class b4{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wl(i){if(i.code!==pe.FAILED_PRECONDITION||i.message!==v4)throw i;Ee("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ue(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new de((r,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(r,o)},this.catchCallback=c=>{this.wrapFailure(n,c).next(r,o)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof de?n:de.resolve(n)}catch(n){return de.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):de.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):de.reject(n)}static resolve(e){return new de((n,r)=>{n(e)})}static reject(e){return new de((n,r)=>{r(e)})}static waitFor(e){return new de((n,r)=>{let o=0,c=0,f=!1;e.forEach(p=>{++o,p.next(()=>{++c,f&&c===o&&n()},g=>r(g))}),f=!0,c===o&&n()})}static or(e){let n=de.resolve(!1);for(const r of e)n=n.next(o=>o?de.resolve(o):r());return n}static forEach(e,n){const r=[];return e.forEach((o,c)=>{r.push(n.call(this,o,c))}),this.waitFor(r)}static mapArray(e,n){return new de((r,o)=>{const c=e.length,f=new Array(c);let p=0;for(let g=0;g<c;g++){const y=g;n(e[y]).next(x=>{f[y]=x,++p,p===c&&r(f)},x=>o(x))}})}static doWhile(e,n){return new de((r,o)=>{const c=()=>{e()===!0?n().next(()=>{c()},o):r()};c()})}}function _4(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Sl(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this._e(r),this.ae=r=>n.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}oh.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mp=-1;function lh(i){return i==null}function Bd(i){return i===0&&1/i==-1/0}function x4(i){return typeof i=="number"&&Number.isInteger(i)&&!Bd(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const px="";function w4(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=k1(e)),e=S4(i.get(n),e);return k1(e)}function S4(i,e){let n=e;const r=i.length;for(let o=0;o<r;o++){const c=i.charAt(o);switch(c){case"\0":n+="";break;case px:n+="";break;default:n+=c}}return n}function k1(i){return i+px+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N1(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function yo(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function gx(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e,n){this.comparator=e,this.root=n||Mn.EMPTY}insert(e,n){return new Ht(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Mn.BLACK,null,null))}remove(e){return new Ht(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Mn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return n+r.left.size;o<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new hd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new hd(this.root,e,this.comparator,!1)}getReverseIterator(){return new hd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new hd(this.root,e,this.comparator,!0)}}class hd{constructor(e,n,r,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?r(e.key,n):1,n&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Mn{constructor(e,n,r,o,c){this.key=e,this.value=n,this.color=r??Mn.RED,this.left=o??Mn.EMPTY,this.right=c??Mn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,o,c){return new Mn(e??this.key,n??this.value,r??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let o=this;const c=r(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,n,r),null):c===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Mn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return Mn.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Mn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Mn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ue(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ue(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ue(27949);return e+(this.isRed()?0:1)}}Mn.EMPTY=null,Mn.RED=!0,Mn.BLACK=!1;Mn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ue(57766)}get value(){throw Ue(16141)}get color(){throw Ue(16727)}get left(){throw Ue(29726)}get right(){throw Ue(36894)}copy(e,n,r,o,c){return this}insert(e,n,r){return new Mn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this.comparator=e,this.data=new Ht(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new j1(this.data.getIterator())}getIteratorFrom(e){return new j1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof gn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=r.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new gn(this.comparator);return n.data=e,n}}class j1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(e){this.fields=e,e.sort(Vn.comparator)}static empty(){return new cs([])}unionWith(e){let n=new gn(Vn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new cs(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return hl(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new yx("Invalid base64 string: "+c):c}}(e);return new Pn(n)}static fromUint8Array(e){const n=function(o){let c="";for(let f=0;f<o.length;++f)c+=String.fromCharCode(o[f]);return c}(e);return new Pn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Pn.EMPTY_BYTE_STRING=new Pn("");const E4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Sa(i){if(_t(!!i,39018),typeof i=="string"){let e=0;const n=E4.exec(i);if(_t(!!n,46558,{timestamp:i}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(i);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Jt(i.seconds),nanos:Jt(i.nanos)}}function Jt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function Ea(i){return typeof i=="string"?Pn.fromBase64String(i):Pn.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vx="server_timestamp",bx="__type__",_x="__previous_value__",xx="__local_write_time__";function Lp(i){var e,n;return((n=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[bx])===null||n===void 0?void 0:n.stringValue)===vx}function ch(i){const e=i.mapValue.fields[_x];return Lp(e)?ch(e):e}function Hc(i){const e=Sa(i.mapValue.fields[xx].timestampValue);return new Ot(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A4{constructor(e,n,r,o,c,f,p,g,y,x){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=o,this.ssl=c,this.forceLongPolling=f,this.autoDetectLongPolling=p,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=x}}const zd="(default)";class qc{constructor(e,n){this.projectId=e,this.database=n||zd}static empty(){return new qc("","")}get isDefaultDatabase(){return this.database===zd}isEqual(e){return e instanceof qc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wx="__type__",T4="__max__",fd={mapValue:{}},Sx="__vector__",Fd="value";function Aa(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Lp(i)?4:C4(i)?9007199254740991:R4(i)?10:11:Ue(28295,{value:i})}function qs(i,e){if(i===e)return!0;const n=Aa(i);if(n!==Aa(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Hc(i).isEqual(Hc(e));case 3:return function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const f=Sa(o.timestampValue),p=Sa(c.timestampValue);return f.seconds===p.seconds&&f.nanos===p.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return function(o,c){return Ea(o.bytesValue).isEqual(Ea(c.bytesValue))}(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return function(o,c){return Jt(o.geoPointValue.latitude)===Jt(c.geoPointValue.latitude)&&Jt(o.geoPointValue.longitude)===Jt(c.geoPointValue.longitude)}(i,e);case 2:return function(o,c){if("integerValue"in o&&"integerValue"in c)return Jt(o.integerValue)===Jt(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const f=Jt(o.doubleValue),p=Jt(c.doubleValue);return f===p?Bd(f)===Bd(p):isNaN(f)&&isNaN(p)}return!1}(i,e);case 9:return hl(i.arrayValue.values||[],e.arrayValue.values||[],qs);case 10:case 11:return function(o,c){const f=o.mapValue.fields||{},p=c.mapValue.fields||{};if(N1(f)!==N1(p))return!1;for(const g in f)if(f.hasOwnProperty(g)&&(p[g]===void 0||!qs(f[g],p[g])))return!1;return!0}(i,e);default:return Ue(52216,{left:i})}}function Gc(i,e){return(i.values||[]).find(n=>qs(n,e))!==void 0}function fl(i,e){if(i===e)return 0;const n=Aa(i),r=Aa(e);if(n!==r)return Qe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Qe(i.booleanValue,e.booleanValue);case 2:return function(c,f){const p=Jt(c.integerValue||c.doubleValue),g=Jt(f.integerValue||f.doubleValue);return p<g?-1:p>g?1:p===g?0:isNaN(p)?isNaN(g)?0:-1:1}(i,e);case 3:return D1(i.timestampValue,e.timestampValue);case 4:return D1(Hc(i),Hc(e));case 5:return Zm(i.stringValue,e.stringValue);case 6:return function(c,f){const p=Ea(c),g=Ea(f);return p.compareTo(g)}(i.bytesValue,e.bytesValue);case 7:return function(c,f){const p=c.split("/"),g=f.split("/");for(let y=0;y<p.length&&y<g.length;y++){const x=Qe(p[y],g[y]);if(x!==0)return x}return Qe(p.length,g.length)}(i.referenceValue,e.referenceValue);case 8:return function(c,f){const p=Qe(Jt(c.latitude),Jt(f.latitude));return p!==0?p:Qe(Jt(c.longitude),Jt(f.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return O1(i.arrayValue,e.arrayValue);case 10:return function(c,f){var p,g,y,x;const S=c.fields||{},A=f.fields||{},F=(p=S[Fd])===null||p===void 0?void 0:p.arrayValue,G=(g=A[Fd])===null||g===void 0?void 0:g.arrayValue,q=Qe(((y=F==null?void 0:F.values)===null||y===void 0?void 0:y.length)||0,((x=G==null?void 0:G.values)===null||x===void 0?void 0:x.length)||0);return q!==0?q:O1(F,G)}(i.mapValue,e.mapValue);case 11:return function(c,f){if(c===fd.mapValue&&f===fd.mapValue)return 0;if(c===fd.mapValue)return 1;if(f===fd.mapValue)return-1;const p=c.fields||{},g=Object.keys(p),y=f.fields||{},x=Object.keys(y);g.sort(),x.sort();for(let S=0;S<g.length&&S<x.length;++S){const A=Zm(g[S],x[S]);if(A!==0)return A;const F=fl(p[g[S]],y[x[S]]);if(F!==0)return F}return Qe(g.length,x.length)}(i.mapValue,e.mapValue);default:throw Ue(23264,{le:n})}}function D1(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Qe(i,e);const n=Sa(i),r=Sa(e),o=Qe(n.seconds,r.seconds);return o!==0?o:Qe(n.nanos,r.nanos)}function O1(i,e){const n=i.values||[],r=e.values||[];for(let o=0;o<n.length&&o<r.length;++o){const c=fl(n[o],r[o]);if(c)return c}return Qe(n.length,r.length)}function ml(i){return Km(i)}function Km(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(n){const r=Sa(n);return`time(${r.seconds},${r.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?function(n){return Ea(n).toBase64()}(i.bytesValue):"referenceValue"in i?function(n){return Oe.fromName(n).toString()}(i.referenceValue):"geoPointValue"in i?function(n){return`geo(${n.latitude},${n.longitude})`}(i.geoPointValue):"arrayValue"in i?function(n){let r="[",o=!0;for(const c of n.values||[])o?o=!1:r+=",",r+=Km(c);return r+"]"}(i.arrayValue):"mapValue"in i?function(n){const r=Object.keys(n.fields||{}).sort();let o="{",c=!0;for(const f of r)c?c=!1:o+=",",o+=`${f}:${Km(n.fields[f])}`;return o+"}"}(i.mapValue):Ue(61005,{value:i})}function Sd(i){switch(Aa(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ch(i);return e?16+Sd(e):16;case 5:return 2*i.stringValue.length;case 6:return Ea(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((o,c)=>o+Sd(c),0)}(i.arrayValue);case 10:case 11:return function(r){let o=0;return yo(r.fields,(c,f)=>{o+=c.length+Sd(f)}),o}(i.mapValue);default:throw Ue(13486,{value:i})}}function Ym(i){return!!i&&"integerValue"in i}function Vp(i){return!!i&&"arrayValue"in i}function M1(i){return!!i&&"nullValue"in i}function L1(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Ed(i){return!!i&&"mapValue"in i}function R4(i){var e,n;return((n=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[wx])===null||n===void 0?void 0:n.stringValue)===Sx}function Nc(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return yo(i.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Nc(r)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Nc(i.arrayValue.values[n]);return e}return Object.assign({},i)}function C4(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===T4}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(e){this.value=e}static empty(){return new Hi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ed(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Nc(n)}setAll(e){let n=Vn.emptyPath(),r={},o=[];e.forEach((f,p)=>{if(!n.isImmediateParentOf(p)){const g=this.getFieldsMap(n);this.applyChanges(g,r,o),r={},o=[],n=p.popLast()}f?r[p.lastSegment()]=Nc(f):o.push(p.lastSegment())});const c=this.getFieldsMap(n);this.applyChanges(c,r,o)}delete(e){const n=this.field(e.popLast());Ed(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return qs(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=n.mapValue.fields[e.get(r)];Ed(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,r){yo(n,(o,c)=>e[o]=c);for(const o of r)delete e[o]}clone(){return new Hi(Nc(this.value))}}function Ex(i){const e=[];return yo(i.fields,(n,r)=>{const o=new Vn([n]);if(Ed(r)){const c=Ex(r.mapValue).fields;if(c.length===0)e.push(o);else for(const f of c)e.push(o.child(f))}else e.push(o)}),new cs(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e,n,r,o,c,f,p){this.key=e,this.documentType=n,this.version=r,this.readTime=o,this.createTime=c,this.data=f,this.documentState=p}static newInvalidDocument(e){return new Xn(e,0,qe.min(),qe.min(),qe.min(),Hi.empty(),0)}static newFoundDocument(e,n,r,o){return new Xn(e,1,n,qe.min(),r,o,0)}static newNoDocument(e,n){return new Xn(e,2,n,qe.min(),qe.min(),Hi.empty(),0)}static newUnknownDocument(e,n){return new Xn(e,3,n,qe.min(),qe.min(),Hi.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(qe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Hi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Hi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=qe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Xn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Xn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(e,n){this.position=e,this.inclusive=n}}function V1(i,e,n){let r=0;for(let o=0;o<i.position.length;o++){const c=e[o],f=i.position[o];if(c.field.isKeyField()?r=Oe.comparator(Oe.fromName(f.referenceValue),n.key):r=fl(f,n.data.field(c.field)),c.dir==="desc"&&(r*=-1),r!==0)break}return r}function P1(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!qs(i.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{constructor(e,n="asc"){this.field=e,this.dir=n}}function I4(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{}class pn extends Ax{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new N4(e,n,r):n==="array-contains"?new O4(e,r):n==="in"?new M4(e,r):n==="not-in"?new L4(e,r):n==="array-contains-any"?new V4(e,r):new pn(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new j4(e,r):new D4(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(fl(n,this.value)):n!==null&&Aa(this.value)===Aa(n)&&this.matchesComparison(fl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ue(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Gs extends Ax{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new Gs(e,n)}matches(e){return Tx(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function Tx(i){return i.op==="and"}function Rx(i){return k4(i)&&Tx(i)}function k4(i){for(const e of i.filters)if(e instanceof Gs)return!1;return!0}function Qm(i){if(i instanceof pn)return i.field.canonicalString()+i.op.toString()+ml(i.value);if(Rx(i))return i.filters.map(e=>Qm(e)).join(",");{const e=i.filters.map(n=>Qm(n)).join(",");return`${i.op}(${e})`}}function Cx(i,e){return i instanceof pn?function(r,o){return o instanceof pn&&r.op===o.op&&r.field.isEqual(o.field)&&qs(r.value,o.value)}(i,e):i instanceof Gs?function(r,o){return o instanceof Gs&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce((c,f,p)=>c&&Cx(f,o.filters[p]),!0):!1}(i,e):void Ue(19439)}function Ix(i){return i instanceof pn?function(n){return`${n.field.canonicalString()} ${n.op} ${ml(n.value)}`}(i):i instanceof Gs?function(n){return n.op.toString()+" {"+n.getFilters().map(Ix).join(" ,")+"}"}(i):"Filter"}class N4 extends pn{constructor(e,n,r){super(e,n,r),this.key=Oe.fromName(r.referenceValue)}matches(e){const n=Oe.comparator(e.key,this.key);return this.matchesComparison(n)}}class j4 extends pn{constructor(e,n){super(e,"in",n),this.keys=kx("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class D4 extends pn{constructor(e,n){super(e,"not-in",n),this.keys=kx("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function kx(i,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Oe.fromName(r.referenceValue))}class O4 extends pn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Vp(n)&&Gc(n.arrayValue,this.value)}}class M4 extends pn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Gc(this.value.arrayValue,n)}}class L4 extends pn{constructor(e,n){super(e,"not-in",n)}matches(e){if(Gc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Gc(this.value.arrayValue,n)}}class V4 extends pn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Vp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Gc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P4{constructor(e,n=null,r=[],o=[],c=null,f=null,p=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=o,this.limit=c,this.startAt=f,this.endAt=p,this.Pe=null}}function U1(i,e=null,n=[],r=[],o=null,c=null,f=null){return new P4(i,e,n,r,o,c,f)}function Pp(i){const e=We(i);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Qm(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(c){return c.field.canonicalString()+c.dir}(r)).join(","),lh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ml(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ml(r)).join(",")),e.Pe=n}return e.Pe}function Up(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!I4(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!Cx(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!P1(i.startAt,e.startAt)&&P1(i.endAt,e.endAt)}function $m(i){return Oe.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(e,n=null,r=[],o=[],c=null,f="F",p=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=o,this.limit=c,this.limitType=f,this.startAt=p,this.endAt=g,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function U4(i,e,n,r,o,c,f,p){return new uh(i,e,n,r,o,c,f,p)}function Bp(i){return new uh(i)}function B1(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function B4(i){return i.collectionGroup!==null}function jc(i){const e=We(i);if(e.Te===null){e.Te=[];const n=new Set;for(const c of e.explicitOrderBy)e.Te.push(c),n.add(c.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let p=new gn(Vn.comparator);return f.filters.forEach(g=>{g.getFlattenedFilters().forEach(y=>{y.isInequality()&&(p=p.add(y.field))})}),p})(e).forEach(c=>{n.has(c.canonicalString())||c.isKeyField()||e.Te.push(new qd(c,r))}),n.has(Vn.keyField().canonicalString())||e.Te.push(new qd(Vn.keyField(),r))}return e.Te}function Us(i){const e=We(i);return e.Ie||(e.Ie=z4(e,jc(i))),e.Ie}function z4(i,e){if(i.limitType==="F")return U1(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(o=>{const c=o.dir==="desc"?"asc":"desc";return new qd(o.field,c)});const n=i.endAt?new Hd(i.endAt.position,i.endAt.inclusive):null,r=i.startAt?new Hd(i.startAt.position,i.startAt.inclusive):null;return U1(i.path,i.collectionGroup,e,i.filters,i.limit,n,r)}}function Jm(i,e,n){return new uh(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function dh(i,e){return Up(Us(i),Us(e))&&i.limitType===e.limitType}function Nx(i){return`${Pp(Us(i))}|lt:${i.limitType}`}function sl(i){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(o=>Ix(o)).join(", ")}]`),lh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(o=>function(f){return`${f.field.canonicalString()} (${f.dir})`}(o)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(o=>ml(o)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(o=>ml(o)).join(",")),`Target(${r})`}(Us(i))}; limitType=${i.limitType})`}function hh(i,e){return e.isFoundDocument()&&function(r,o){const c=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(c):Oe.isDocumentKey(r.path)?r.path.isEqual(c):r.path.isImmediateParentOf(c)}(i,e)&&function(r,o){for(const c of jc(r))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0}(i,e)&&function(r,o){for(const c of r.filters)if(!c.matches(o))return!1;return!0}(i,e)&&function(r,o){return!(r.startAt&&!function(f,p,g){const y=V1(f,p,g);return f.inclusive?y<=0:y<0}(r.startAt,jc(r),o)||r.endAt&&!function(f,p,g){const y=V1(f,p,g);return f.inclusive?y>=0:y>0}(r.endAt,jc(r),o))}(i,e)}function F4(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function jx(i){return(e,n)=>{let r=!1;for(const o of jc(i)){const c=H4(o,e,n);if(c!==0)return c;r=r||o.field.isKeyField()}return 0}}function H4(i,e,n){const r=i.field.isKeyField()?Oe.comparator(e.key,n.key):function(c,f,p){const g=f.data.field(c),y=p.data.field(c);return g!==null&&y!==null?fl(g,y):Ue(42886)}(i.field,e,n);switch(i.dir){case"asc":return r;case"desc":return-1*r;default:return Ue(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[o,c]of r)if(this.equalsFn(o,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[n]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){yo(this.inner,(n,r)=>{for(const[o,c]of r)e(o,c)})}isEmpty(){return gx(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q4=new Ht(Oe.comparator);function Mr(){return q4}const Dx=new Ht(Oe.comparator);function Ec(...i){let e=Dx;for(const n of i)e=e.insert(n.key,n);return e}function Ox(i){let e=Dx;return i.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function so(){return Dc()}function Mx(){return Dc()}function Dc(){return new vo(i=>i.toString(),(i,e)=>i.isEqual(e))}const G4=new Ht(Oe.comparator),W4=new gn(Oe.comparator);function at(...i){let e=W4;for(const n of i)e=e.add(n);return e}const X4=new gn(Qe);function Z4(){return X4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zp(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bd(e)?"-0":e}}function Lx(i){return{integerValue:""+i}}function K4(i,e){return x4(e)?Lx(e):zp(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(){this._=void 0}}function Y4(i,e,n){return i instanceof Gd?function(o,c){const f={fields:{[bx]:{stringValue:vx},[xx]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&Lp(c)&&(c=ch(c)),c&&(f.fields[_x]=c),{mapValue:f}}(n,e):i instanceof Wc?Px(i,e):i instanceof Xc?Ux(i,e):function(o,c){const f=Vx(o,c),p=z1(f)+z1(o.Ee);return Ym(f)&&Ym(o.Ee)?Lx(p):zp(o.serializer,p)}(i,e)}function Q4(i,e,n){return i instanceof Wc?Px(i,e):i instanceof Xc?Ux(i,e):n}function Vx(i,e){return i instanceof Wd?function(r){return Ym(r)||function(c){return!!c&&"doubleValue"in c}(r)}(e)?e:{integerValue:0}:null}class Gd extends fh{}class Wc extends fh{constructor(e){super(),this.elements=e}}function Px(i,e){const n=Bx(e);for(const r of i.elements)n.some(o=>qs(o,r))||n.push(r);return{arrayValue:{values:n}}}class Xc extends fh{constructor(e){super(),this.elements=e}}function Ux(i,e){let n=Bx(e);for(const r of i.elements)n=n.filter(o=>!qs(o,r));return{arrayValue:{values:n}}}class Wd extends fh{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function z1(i){return Jt(i.integerValue||i.doubleValue)}function Bx(i){return Vp(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function $4(i,e){return i.field.isEqual(e.field)&&function(r,o){return r instanceof Wc&&o instanceof Wc||r instanceof Xc&&o instanceof Xc?hl(r.elements,o.elements,qs):r instanceof Wd&&o instanceof Wd?qs(r.Ee,o.Ee):r instanceof Gd&&o instanceof Gd}(i.transform,e.transform)}class J4{constructor(e,n){this.version=e,this.transformResults=n}}class kr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new kr}static exists(e){return new kr(void 0,e)}static updateTime(e){return new kr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ad(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class mh{}function zx(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new Hx(i.key,kr.none()):new su(i.key,i.data,kr.none());{const n=i.data,r=Hi.empty();let o=new gn(Vn.comparator);for(let c of e.fields)if(!o.has(c)){let f=n.field(c);f===null&&c.length>1&&(c=c.popLast(),f=n.field(c)),f===null?r.delete(c):r.set(c,f),o=o.add(c)}return new bo(i.key,r,new cs(o.toArray()),kr.none())}}function eI(i,e,n){i instanceof su?function(o,c,f){const p=o.value.clone(),g=H1(o.fieldTransforms,c,f.transformResults);p.setAll(g),c.convertToFoundDocument(f.version,p).setHasCommittedMutations()}(i,e,n):i instanceof bo?function(o,c,f){if(!Ad(o.precondition,c))return void c.convertToUnknownDocument(f.version);const p=H1(o.fieldTransforms,c,f.transformResults),g=c.data;g.setAll(Fx(o)),g.setAll(p),c.convertToFoundDocument(f.version,g).setHasCommittedMutations()}(i,e,n):function(o,c,f){c.convertToNoDocument(f.version).setHasCommittedMutations()}(0,e,n)}function Oc(i,e,n,r){return i instanceof su?function(c,f,p,g){if(!Ad(c.precondition,f))return p;const y=c.value.clone(),x=q1(c.fieldTransforms,g,f);return y.setAll(x),f.convertToFoundDocument(f.version,y).setHasLocalMutations(),null}(i,e,n,r):i instanceof bo?function(c,f,p,g){if(!Ad(c.precondition,f))return p;const y=q1(c.fieldTransforms,g,f),x=f.data;return x.setAll(Fx(c)),x.setAll(y),f.convertToFoundDocument(f.version,x).setHasLocalMutations(),p===null?null:p.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(S=>S.field))}(i,e,n,r):function(c,f,p){return Ad(c.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):p}(i,e,n)}function tI(i,e){let n=null;for(const r of i.fieldTransforms){const o=e.data.field(r.field),c=Vx(r.transform,o||null);c!=null&&(n===null&&(n=Hi.empty()),n.set(r.field,c))}return n||null}function F1(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&hl(r,o,(c,f)=>$4(c,f))}(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class su extends mh{constructor(e,n,r,o=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class bo extends mh{constructor(e,n,r,o,c=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function Fx(i){const e=new Map;return i.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=i.data.field(n);e.set(n,r)}}),e}function H1(i,e,n){const r=new Map;_t(i.length===n.length,32656,{Ae:n.length,Re:i.length});for(let o=0;o<n.length;o++){const c=i[o],f=c.transform,p=e.data.field(c.field);r.set(c.field,Q4(f,p,n[o]))}return r}function q1(i,e,n){const r=new Map;for(const o of i){const c=o.transform,f=n.data.field(o.field);r.set(o.field,Y4(c,f,e))}return r}class Hx extends mh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class nI extends mh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(e,n,r,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&eI(c,e,r[o])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Oc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Oc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Mx();return this.mutations.forEach(o=>{const c=e.get(o.key),f=c.overlayedDocument;let p=this.applyToLocalView(f,c.mutatedFields);p=n.has(o.key)?null:p;const g=zx(f,p);g!==null&&r.set(o.key,g),f.isValidDocument()||f.convertToNoDocument(qe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),at())}isEqual(e){return this.batchId===e.batchId&&hl(this.mutations,e.mutations,(n,r)=>F1(n,r))&&hl(this.baseMutations,e.baseMutations,(n,r)=>F1(n,r))}}class Fp{constructor(e,n,r,o){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=o}static from(e,n,r){_t(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let o=function(){return G4}();const c=e.mutations;for(let f=0;f<c.length;f++)o=o.insert(c[f].key,r[f].version);return new Fp(e,n,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rn,ht;function aI(i){switch(i){case pe.OK:return Ue(64938);case pe.CANCELLED:case pe.UNKNOWN:case pe.DEADLINE_EXCEEDED:case pe.RESOURCE_EXHAUSTED:case pe.INTERNAL:case pe.UNAVAILABLE:case pe.UNAUTHENTICATED:return!1;case pe.INVALID_ARGUMENT:case pe.NOT_FOUND:case pe.ALREADY_EXISTS:case pe.PERMISSION_DENIED:case pe.FAILED_PRECONDITION:case pe.ABORTED:case pe.OUT_OF_RANGE:case pe.UNIMPLEMENTED:case pe.DATA_LOSS:return!0;default:return Ue(15467,{code:i})}}function qx(i){if(i===void 0)return Or("GRPC error has no .code"),pe.UNKNOWN;switch(i){case rn.OK:return pe.OK;case rn.CANCELLED:return pe.CANCELLED;case rn.UNKNOWN:return pe.UNKNOWN;case rn.DEADLINE_EXCEEDED:return pe.DEADLINE_EXCEEDED;case rn.RESOURCE_EXHAUSTED:return pe.RESOURCE_EXHAUSTED;case rn.INTERNAL:return pe.INTERNAL;case rn.UNAVAILABLE:return pe.UNAVAILABLE;case rn.UNAUTHENTICATED:return pe.UNAUTHENTICATED;case rn.INVALID_ARGUMENT:return pe.INVALID_ARGUMENT;case rn.NOT_FOUND:return pe.NOT_FOUND;case rn.ALREADY_EXISTS:return pe.ALREADY_EXISTS;case rn.PERMISSION_DENIED:return pe.PERMISSION_DENIED;case rn.FAILED_PRECONDITION:return pe.FAILED_PRECONDITION;case rn.ABORTED:return pe.ABORTED;case rn.OUT_OF_RANGE:return pe.OUT_OF_RANGE;case rn.UNIMPLEMENTED:return pe.UNIMPLEMENTED;case rn.DATA_LOSS:return pe.DATA_LOSS;default:return Ue(39323,{code:i})}}(ht=rn||(rn={}))[ht.OK=0]="OK",ht[ht.CANCELLED=1]="CANCELLED",ht[ht.UNKNOWN=2]="UNKNOWN",ht[ht.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ht[ht.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ht[ht.NOT_FOUND=5]="NOT_FOUND",ht[ht.ALREADY_EXISTS=6]="ALREADY_EXISTS",ht[ht.PERMISSION_DENIED=7]="PERMISSION_DENIED",ht[ht.UNAUTHENTICATED=16]="UNAUTHENTICATED",ht[ht.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ht[ht.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ht[ht.ABORTED=10]="ABORTED",ht[ht.OUT_OF_RANGE=11]="OUT_OF_RANGE",ht[ht.UNIMPLEMENTED=12]="UNIMPLEMENTED",ht[ht.INTERNAL=13]="INTERNAL",ht[ht.UNAVAILABLE=14]="UNAVAILABLE",ht[ht.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oI=new va([4294967295,4294967295],0);function G1(i){const e=fx().encode(i),n=new rx;return n.update(e),new Uint8Array(n.digest())}function W1(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new va([n,r],0),new va([o,c],0)]}class Hp{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ac(`Invalid padding: ${n}`);if(r<0)throw new Ac(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ac(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ac(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=va.fromNumber(this.fe)}pe(e,n,r){let o=e.add(n.multiply(va.fromNumber(r)));return o.compare(oI)===1&&(o=new va([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=G1(e),[r,o]=W1(n);for(let c=0;c<this.hashCount;c++){const f=this.pe(r,o,c);if(!this.ye(f))return!1}return!0}static create(e,n,r){const o=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),f=new Hp(c,o,n);return r.forEach(p=>f.insert(p)),f}insert(e){if(this.fe===0)return;const n=G1(e),[r,o]=W1(n);for(let c=0;c<this.hashCount;c++){const f=this.pe(r,o,c);this.we(f)}}we(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ac extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(e,n,r,o,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const o=new Map;return o.set(e,ru.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new ph(qe.min(),o,new Ht(Qe),Mr(),at())}}class ru{constructor(e,n,r,o,c){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ru(r,n,at(),at(),at())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(e,n,r,o){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=o}}class Gx{constructor(e,n){this.targetId=e,this.De=n}}class Wx{constructor(e,n,r=Pn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=o}}class X1{constructor(){this.ve=0,this.Ce=Z1(),this.Fe=Pn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=at(),n=at(),r=at();return this.Ce.forEach((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:r=r.add(o);break;default:Ue(38017,{changeType:c})}}),new ru(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=Z1()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,_t(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class lI{constructor(e){this.We=e,this.Ge=new Map,this.ze=Mr(),this.je=md(),this.Je=md(),this.He=new Ht(Qe)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:Ue(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,o)=>{this.nt(o)&&n(o)})}it(e){const n=e.targetId,r=e.De.count,o=this.st(n);if(o){const c=o.target;if($m(c))if(r===0){const f=new Oe(c.path);this.Xe(n,f,Xn.newNoDocument(f,qe.min()))}else _t(r===1,20013,{expectedCount:r});else{const f=this.ot(n);if(f!==r){const p=this._t(e),g=p?this.ut(p,e,f):1;if(g!==0){this.rt(n);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,y)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:c=0}=n;let f,p;try{f=Ea(r).toUint8Array()}catch(g){if(g instanceof yx)return xa("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{p=new Hp(f,o,c)}catch(g){return xa(g instanceof Ac?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return p.fe===0?null:p}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){const r=this.We.getRemoteKeysForTarget(n);let o=0;return r.forEach(c=>{const f=this.We.lt(),p=`projects/${f.projectId}/databases/${f.database}/documents/${c.path.canonicalString()}`;e.mightContain(p)||(this.Xe(n,c,null),o++)}),o}Pt(e){const n=new Map;this.Ge.forEach((c,f)=>{const p=this.st(f);if(p){if(c.current&&$m(p.target)){const g=new Oe(p.target.path);this.Tt(g).has(f)||this.It(f,g)||this.Xe(f,g,Xn.newNoDocument(g,e))}c.Ne&&(n.set(f,c.Le()),c.ke())}});let r=at();this.Je.forEach((c,f)=>{let p=!0;f.forEachWhile(g=>{const y=this.st(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)}),p&&(r=r.add(c))}),this.ze.forEach((c,f)=>f.setReadTime(e));const o=new ph(e,n,this.He,this.ze,r);return this.ze=Mr(),this.je=md(),this.Je=md(),this.He=new Ht(Qe),o}Ze(e,n){if(!this.nt(e))return;const r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;const o=this.tt(e);this.It(e,n)?o.qe(n,1):o.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new X1,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new gn(Qe),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new gn(Qe),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||Ee("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new X1),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function md(){return new Ht(Oe.comparator)}function Z1(){return new Ht(Oe.comparator)}const cI={asc:"ASCENDING",desc:"DESCENDING"},uI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},dI={and:"AND",or:"OR"};class hI{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function ep(i,e){return i.useProto3Json||lh(e)?e:{value:e}}function Xd(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Xx(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function fI(i,e){return Xd(i,e.toTimestamp())}function Bs(i){return _t(!!i,49232),qe.fromTimestamp(function(n){const r=Sa(n);return new Ot(r.seconds,r.nanos)}(i))}function qp(i,e){return tp(i,e).canonicalString()}function tp(i,e){const n=function(o){return new zt(["projects",o.projectId,"databases",o.database])}(i).child("documents");return e===void 0?n:n.child(e)}function Zx(i){const e=zt.fromString(i);return _t(Jx(e),10190,{key:e.toString()}),e}function np(i,e){return qp(i.databaseId,e.path)}function Im(i,e){const n=Zx(e);if(n.get(1)!==i.databaseId.projectId)throw new je(pe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new je(pe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new Oe(Yx(n))}function Kx(i,e){return qp(i.databaseId,e)}function mI(i){const e=Zx(i);return e.length===4?zt.emptyPath():Yx(e)}function ip(i){return new zt(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function Yx(i){return _t(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function K1(i,e,n){return{name:np(i,e),fields:n.value.mapValue.fields}}function pI(i,e){let n;if("targetChange"in e){e.targetChange;const r=function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Ue(39313,{state:y})}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],c=function(y,x){return y.useProto3Json?(_t(x===void 0||typeof x=="string",58123),Pn.fromBase64String(x||"")):(_t(x===void 0||x instanceof Buffer||x instanceof Uint8Array,16193),Pn.fromUint8Array(x||new Uint8Array))}(i,e.targetChange.resumeToken),f=e.targetChange.cause,p=f&&function(y){const x=y.code===void 0?pe.UNKNOWN:qx(y.code);return new je(x,y.message||"")}(f);n=new Wx(r,o,c,p||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=Im(i,r.document.name),c=Bs(r.document.updateTime),f=r.document.createTime?Bs(r.document.createTime):qe.min(),p=new Hi({mapValue:{fields:r.document.fields}}),g=Xn.newFoundDocument(o,c,f,p),y=r.targetIds||[],x=r.removedTargetIds||[];n=new Td(y,x,g.key,g)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=Im(i,r.document),c=r.readTime?Bs(r.readTime):qe.min(),f=Xn.newNoDocument(o,c),p=r.removedTargetIds||[];n=new Td([],p,f.key,f)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=Im(i,r.document),c=r.removedTargetIds||[];n=new Td([],c,o,null)}else{if(!("filter"in e))return Ue(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:c}=r,f=new rI(o,c),p=r.targetId;n=new Gx(p,f)}}return n}function gI(i,e){let n;if(e instanceof su)n={update:K1(i,e.key,e.value)};else if(e instanceof Hx)n={delete:np(i,e.key)};else if(e instanceof bo)n={update:K1(i,e.key,e.data),updateMask:AI(e.fieldMask)};else{if(!(e instanceof nI))return Ue(16599,{Rt:e.type});n={verify:np(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(c,f){const p=f.transform;if(p instanceof Gd)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof Wc)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof Xc)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof Wd)return{fieldPath:f.field.canonicalString(),increment:p.Ee};throw Ue(20930,{transform:f.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(o,c){return c.updateTime!==void 0?{updateTime:fI(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Ue(27497)}(i,e.precondition)),n}function yI(i,e){return i&&i.length>0?(_t(e!==void 0,14353),i.map(n=>function(o,c){let f=o.updateTime?Bs(o.updateTime):Bs(c);return f.isEqual(qe.min())&&(f=Bs(c)),new J4(f,o.transformResults||[])}(n,e))):[]}function vI(i,e){return{documents:[Kx(i,e.path)]}}function bI(i,e){const n={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Kx(i,o);const c=function(y){if(y.length!==0)return $x(Gs.create(y,"and"))}(e.filters);c&&(n.structuredQuery.where=c);const f=function(y){if(y.length!==0)return y.map(x=>function(A){return{field:rl(A.field),direction:wI(A.dir)}}(x))}(e.orderBy);f&&(n.structuredQuery.orderBy=f);const p=ep(i,e.limit);return p!==null&&(n.structuredQuery.limit=p),e.startAt&&(n.structuredQuery.startAt=function(y){return{before:y.inclusive,values:y.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(y){return{before:!y.inclusive,values:y.position}}(e.endAt)),{Vt:n,parent:o}}function _I(i){let e=mI(i.parent);const n=i.structuredQuery,r=n.from?n.from.length:0;let o=null;if(r>0){_t(r===1,65062);const x=n.from[0];x.allDescendants?o=x.collectionId:e=e.child(x.collectionId)}let c=[];n.where&&(c=function(S){const A=Qx(S);return A instanceof Gs&&Rx(A)?A.getFilters():[A]}(n.where));let f=[];n.orderBy&&(f=function(S){return S.map(A=>function(G){return new qd(al(G.field),function(K){switch(K){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(G.direction))}(A))}(n.orderBy));let p=null;n.limit&&(p=function(S){let A;return A=typeof S=="object"?S.value:S,lh(A)?null:A}(n.limit));let g=null;n.startAt&&(g=function(S){const A=!!S.before,F=S.values||[];return new Hd(F,A)}(n.startAt));let y=null;return n.endAt&&(y=function(S){const A=!S.before,F=S.values||[];return new Hd(F,A)}(n.endAt)),U4(e,o,f,c,p,"F",g,y)}function xI(i,e){const n=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ue(28987,{purpose:o})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Qx(i){return i.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=al(n.unaryFilter.field);return pn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=al(n.unaryFilter.field);return pn.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=al(n.unaryFilter.field);return pn.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=al(n.unaryFilter.field);return pn.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ue(61313);default:return Ue(60726)}}(i):i.fieldFilter!==void 0?function(n){return pn.create(al(n.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ue(58110);default:return Ue(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(i):i.compositeFilter!==void 0?function(n){return Gs.create(n.compositeFilter.filters.map(r=>Qx(r)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ue(1026)}}(n.compositeFilter.op))}(i):Ue(30097,{filter:i})}function wI(i){return cI[i]}function SI(i){return uI[i]}function EI(i){return dI[i]}function rl(i){return{fieldPath:i.canonicalString()}}function al(i){return Vn.fromServerFormat(i.fieldPath)}function $x(i){return i instanceof pn?function(n){if(n.op==="=="){if(L1(n.value))return{unaryFilter:{field:rl(n.field),op:"IS_NAN"}};if(M1(n.value))return{unaryFilter:{field:rl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(L1(n.value))return{unaryFilter:{field:rl(n.field),op:"IS_NOT_NAN"}};if(M1(n.value))return{unaryFilter:{field:rl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:rl(n.field),op:SI(n.op),value:n.value}}}(i):i instanceof Gs?function(n){const r=n.getFilters().map(o=>$x(o));return r.length===1?r[0]:{compositeFilter:{op:EI(n.op),filters:r}}}(i):Ue(54877,{filter:i})}function AI(i){const e=[];return i.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Jx(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(e,n,r,o,c=qe.min(),f=qe.min(),p=Pn.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=p,this.expectedCount=g}withSequenceNumber(e){return new pa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new pa(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new pa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new pa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(e){this.gt=e}}function RI(i){const e=_I({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?Jm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(){this.Dn=new II}addToCollectionParentIndex(e,n){return this.Dn.add(n),de.resolve()}getCollectionParents(e,n){return de.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return de.resolve()}deleteFieldIndex(e,n){return de.resolve()}deleteAllFieldIndexes(e){return de.resolve()}createTargetIndexes(e,n){return de.resolve()}getDocumentsMatchingTarget(e,n){return de.resolve(null)}getIndexType(e,n){return de.resolve(0)}getFieldIndexes(e,n){return de.resolve([])}getNextCollectionGroupToUpdate(e){return de.resolve(null)}getMinOffset(e,n){return de.resolve(wa.min())}getMinOffsetFromCollectionGroup(e,n){return de.resolve(wa.min())}updateCollectionGroup(e,n,r){return de.resolve()}updateIndexEntries(e,n){return de.resolve()}}class II{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),o=this.index[n]||new gn(zt.comparator),c=!o.has(r);return this.index[n]=o.add(r),c}has(e){const n=e.lastSegment(),r=e.popLast(),o=this.index[n];return o&&o.has(r)}getEntries(e){return(this.index[e]||new gn(zt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},e2=41943040;class ci{static withCacheSize(e){return new ci(e,ci.DEFAULT_COLLECTION_PERCENTILE,ci.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ci.DEFAULT_COLLECTION_PERCENTILE=10,ci.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ci.DEFAULT=new ci(e2,ci.DEFAULT_COLLECTION_PERCENTILE,ci.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ci.DISABLED=new ci(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new pl(0)}static ur(){return new pl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q1="LruGarbageCollector",kI=1048576;function $1([i,e],[n,r]){const o=Qe(i,n);return o===0?Qe(e,r):o}class NI{constructor(e){this.Tr=e,this.buffer=new gn($1),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();$1(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class jI{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){Ee(Q1,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Sl(n)?Ee(Q1,"Ignoring IndexedDB error during garbage collection: ",n):await wl(n)}await this.Rr(3e5)})}}class DI{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return de.resolve(oh.ue);const r=new NI(n);return this.Vr.forEachTarget(e,o=>r.Er(o.sequenceNumber)).next(()=>this.Vr.gr(e,o=>r.Er(o))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Ee("LruGarbageCollector","Garbage collection skipped; disabled"),de.resolve(Y1)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ee("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Y1):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,o,c,f,p,g,y;const x=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(Ee("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),o=this.params.maximumSequenceNumbersToCollect):o=S,f=Date.now(),this.nthSequenceNumber(e,o))).next(S=>(r=S,p=Date.now(),this.removeTargets(e,r,n))).next(S=>(c=S,g=Date.now(),this.removeOrphanedDocuments(e,r))).next(S=>(y=Date.now(),il()<=rt.DEBUG&&Ee("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-x}ms
	Determined least recently used ${o} in `+(p-f)+`ms
	Removed ${c} targets in `+(g-p)+`ms
	Removed ${S} documents in `+(y-g)+`ms
Total Duration: ${y-x}ms`),de.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:S})))}}function OI(i,e){return new DI(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(){this.changes=new vo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Xn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?de.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(e,n,r,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(o=>(r=o,this.remoteDocumentCache.getEntry(e,n))).next(o=>(r!==null&&Oc(r.mutation,o,cs.empty(),Ot.now()),o))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,at()).next(()=>r))}getLocalViewOfDocuments(e,n,r=at()){const o=so();return this.populateOverlays(e,o,n).next(()=>this.computeViews(e,n,o,r).next(c=>{let f=Ec();return c.forEach((p,g)=>{f=f.insert(p,g.overlayedDocument)}),f}))}getOverlayedDocuments(e,n){const r=so();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,at()))}populateOverlays(e,n,r){const o=[];return r.forEach(c=>{n.has(c)||o.push(c)}),this.documentOverlayCache.getOverlays(e,o).next(c=>{c.forEach((f,p)=>{n.set(f,p)})})}computeViews(e,n,r,o){let c=Mr();const f=Dc(),p=function(){return Dc()}();return n.forEach((g,y)=>{const x=r.get(y.key);o.has(y.key)&&(x===void 0||x.mutation instanceof bo)?c=c.insert(y.key,y):x!==void 0?(f.set(y.key,x.mutation.getFieldMask()),Oc(x.mutation,y,x.mutation.getFieldMask(),Ot.now())):f.set(y.key,cs.empty())}),this.recalculateAndSaveOverlays(e,c).next(g=>(g.forEach((y,x)=>f.set(y,x)),n.forEach((y,x)=>{var S;return p.set(y,new LI(x,(S=f.get(y))!==null&&S!==void 0?S:null))}),p))}recalculateAndSaveOverlays(e,n){const r=Dc();let o=new Ht((f,p)=>f-p),c=at();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(f=>{for(const p of f)p.keys().forEach(g=>{const y=n.get(g);if(y===null)return;let x=r.get(g)||cs.empty();x=p.applyToLocalView(y,x),r.set(g,x);const S=(o.get(p.batchId)||at()).add(g);o=o.insert(p.batchId,S)})}).next(()=>{const f=[],p=o.getReverseIterator();for(;p.hasNext();){const g=p.getNext(),y=g.key,x=g.value,S=Mx();x.forEach(A=>{if(!c.has(A)){const F=zx(n.get(A),r.get(A));F!==null&&S.set(A,F),c=c.add(A)}}),f.push(this.documentOverlayCache.saveOverlays(e,y,S))}return de.waitFor(f)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,o){return function(f){return Oe.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):B4(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,o):this.getDocumentsMatchingCollectionQuery(e,n,r,o)}getNextDocuments(e,n,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,o).next(c=>{const f=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,o-c.size):de.resolve(so());let p=Fc,g=c;return f.next(y=>de.forEach(y,(x,S)=>(p<S.largestBatchId&&(p=S.largestBatchId),c.get(x)?de.resolve():this.remoteDocumentCache.getEntry(e,x).next(A=>{g=g.insert(x,A)}))).next(()=>this.populateOverlays(e,y,c)).next(()=>this.computeViews(e,g,y,at())).next(x=>({batchId:p,changes:Ox(x)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Oe(n)).next(r=>{let o=Ec();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,n,r,o){const c=n.collectionGroup;let f=Ec();return this.indexManager.getCollectionParents(e,c).next(p=>de.forEach(p,g=>{const y=function(S,A){return new uh(A,null,S.explicitOrderBy.slice(),S.filters.slice(),S.limit,S.limitType,S.startAt,S.endAt)}(n,g.child(c));return this.getDocumentsMatchingCollectionQuery(e,y,r,o).next(x=>{x.forEach((S,A)=>{f=f.insert(S,A)})})}).next(()=>f))}getDocumentsMatchingCollectionQuery(e,n,r,o){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(f=>(c=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,c,o))).next(f=>{c.forEach((g,y)=>{const x=y.getKey();f.get(x)===null&&(f=f.insert(x,Xn.newInvalidDocument(x)))});let p=Ec();return f.forEach((g,y)=>{const x=c.get(g);x!==void 0&&Oc(x.mutation,y,cs.empty(),Ot.now()),hh(n,y)&&(p=p.insert(g,y))}),p})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return de.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(o){return{id:o.id,version:o.version,createTime:Bs(o.createTime)}}(n)),de.resolve()}getNamedQuery(e,n){return de.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(o){return{name:o.name,query:RI(o.bundledQuery),readTime:Bs(o.readTime)}}(n)),de.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(){this.overlays=new Ht(Oe.comparator),this.kr=new Map}getOverlay(e,n){return de.resolve(this.overlays.get(n))}getOverlays(e,n){const r=so();return de.forEach(n,o=>this.getOverlay(e,o).next(c=>{c!==null&&r.set(o,c)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((o,c)=>{this.wt(e,n,c)}),de.resolve()}removeOverlaysForBatchId(e,n,r){const o=this.kr.get(r);return o!==void 0&&(o.forEach(c=>this.overlays=this.overlays.remove(c)),this.kr.delete(r)),de.resolve()}getOverlaysForCollection(e,n,r){const o=so(),c=n.length+1,f=new Oe(n.child("")),p=this.overlays.getIteratorFrom(f);for(;p.hasNext();){const g=p.getNext().value,y=g.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===c&&g.largestBatchId>r&&o.set(g.getKey(),g)}return de.resolve(o)}getOverlaysForCollectionGroup(e,n,r,o){let c=new Ht((y,x)=>y-x);const f=this.overlays.getIterator();for(;f.hasNext();){const y=f.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>r){let x=c.get(y.largestBatchId);x===null&&(x=so(),c=c.insert(y.largestBatchId,x)),x.set(y.getKey(),y)}}const p=so(),g=c.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((y,x)=>p.set(y,x)),!(p.size()>=o)););return de.resolve(p)}wt(e,n,r){const o=this.overlays.get(r.key);if(o!==null){const f=this.kr.get(o.largestBatchId).delete(r.key);this.kr.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(r.key,new sI(n,r));let c=this.kr.get(n);c===void 0&&(c=at(),this.kr.set(n,c)),this.kr.set(n,c.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(){this.sessionToken=Pn.EMPTY_BYTE_STRING}getSessionToken(e){return de.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,de.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(){this.qr=new gn(En.Qr),this.$r=new gn(En.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const r=new En(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new En(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){const n=new Oe(new zt([])),r=new En(n,e),o=new En(n,e+1),c=[];return this.$r.forEachInRange([r,o],f=>{this.Wr(f),c.push(f.key)}),c}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new Oe(new zt([])),r=new En(n,e),o=new En(n,e+1);let c=at();return this.$r.forEachInRange([r,o],f=>{c=c.add(f.key)}),c}containsKey(e){const n=new En(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class En{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return Oe.comparator(e.key,n.key)||Qe(e.Hr,n.Hr)}static Ur(e,n){return Qe(e.Hr,n.Hr)||Oe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new gn(En.Qr)}checkEmpty(e){return de.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,o){const c=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new iI(c,n,r,o);this.mutationQueue.push(f);for(const p of o)this.Yr=this.Yr.add(new En(p.key,c)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return de.resolve(f)}lookupMutationBatch(e,n){return de.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,o=this.Xr(r),c=o<0?0:o;return de.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return de.resolve(this.mutationQueue.length===0?Mp:this.er-1)}getAllMutationBatches(e){return de.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new En(n,0),o=new En(n,Number.POSITIVE_INFINITY),c=[];return this.Yr.forEachInRange([r,o],f=>{const p=this.Zr(f.Hr);c.push(p)}),de.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new gn(Qe);return n.forEach(o=>{const c=new En(o,0),f=new En(o,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([c,f],p=>{r=r.add(p.Hr)})}),de.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,o=r.length+1;let c=r;Oe.isDocumentKey(c)||(c=c.child(""));const f=new En(new Oe(c),0);let p=new gn(Qe);return this.Yr.forEachWhile(g=>{const y=g.key.path;return!!r.isPrefixOf(y)&&(y.length===o&&(p=p.add(g.Hr)),!0)},f),de.resolve(this.ei(p))}ei(e){const n=[];return e.forEach(r=>{const o=this.Zr(r);o!==null&&n.push(o)}),n}removeMutationBatch(e,n){_t(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return de.forEach(n.mutations,o=>{const c=new En(o.key,n.batchId);return r=r.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){const r=new En(n,0),o=this.Yr.firstAfterOrEqual(r);return de.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,de.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(e){this.ni=e,this.docs=function(){return new Ht(Oe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,o=this.docs.get(r),c=o?o.size:0,f=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:f}),this.size+=f-c,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return de.resolve(r?r.document.mutableCopy():Xn.newInvalidDocument(n))}getEntries(e,n){let r=Mr();return n.forEach(o=>{const c=this.docs.get(o);r=r.insert(o,c?c.document.mutableCopy():Xn.newInvalidDocument(o))}),de.resolve(r)}getDocumentsMatchingQuery(e,n,r,o){let c=Mr();const f=n.path,p=new Oe(f.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(p);for(;g.hasNext();){const{key:y,value:{document:x}}=g.getNext();if(!f.isPrefixOf(y.path))break;y.path.length>f.length+1||y4(g4(x),r)<=0||(o.has(x.key)||hh(n,x))&&(c=c.insert(x.key,x.mutableCopy()))}return de.resolve(c)}getAllFromCollectionGroup(e,n,r,o){Ue(9500)}ri(e,n){return de.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new HI(this)}getSize(e){return de.resolve(this.size)}}class HI extends MI{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?n.push(this.Or.addEntry(e,o)):this.Or.removeEntry(r)}),de.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(e){this.persistence=e,this.ii=new vo(n=>Pp(n),Up),this.lastRemoteSnapshotVersion=qe.min(),this.highestTargetId=0,this.si=0,this.oi=new Gp,this.targetCount=0,this._i=pl.ar()}forEachTarget(e,n){return this.ii.forEach((r,o)=>n(o)),de.resolve()}getLastRemoteSnapshotVersion(e){return de.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return de.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),de.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),de.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new pl(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,de.resolve()}updateTargetData(e,n){return this.hr(n),de.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,de.resolve()}removeTargets(e,n,r){let o=0;const c=[];return this.ii.forEach((f,p)=>{p.sequenceNumber<=n&&r.get(p.targetId)===null&&(this.ii.delete(f),c.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)}),de.waitFor(c).next(()=>o)}getTargetCount(e){return de.resolve(this.targetCount)}getTargetData(e,n){const r=this.ii.get(n)||null;return de.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),de.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);const o=this.persistence.referenceDelegate,c=[];return o&&n.forEach(f=>{c.push(o.markPotentiallyOrphaned(e,f))}),de.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),de.resolve()}getMatchingKeysForTargetId(e,n){const r=this.oi.Jr(n);return de.resolve(r)}containsKey(e,n){return de.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{constructor(e,n){this.ai={},this.overlays={},this.ui=new oh(0),this.ci=!1,this.ci=!0,this.li=new BI,this.referenceDelegate=e(this),this.hi=new qI(this),this.indexManager=new CI,this.remoteDocumentCache=function(o){return new FI(o)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new TI(n),this.Ti=new PI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new UI,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new zI(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){Ee("MemoryPersistence","Starting transaction:",e);const o=new GI(this.ui.next());return this.referenceDelegate.Ii(),r(o).next(c=>this.referenceDelegate.di(o).next(()=>c)).toPromise().then(c=>(o.raiseOnCommittedEvent(),c))}Ei(e,n){return de.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}}class GI extends b4{constructor(e){super(),this.currentSequenceNumber=e}}class Wp{constructor(e){this.persistence=e,this.Ai=new Gp,this.Ri=null}static Vi(e){return new Wp(e)}get mi(){if(this.Ri)return this.Ri;throw Ue(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),de.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),de.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),de.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(o=>this.mi.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(o=>{o.forEach(c=>this.mi.add(c.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return de.forEach(this.mi,r=>{const o=Oe.fromPath(r);return this.fi(e,o).next(c=>{c||n.removeEntry(o,qe.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return de.or([()=>de.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Zd{constructor(e,n){this.persistence=e,this.gi=new vo(r=>w4(r.path),(r,o)=>r.isEqual(o)),this.garbageCollector=OI(this,n)}static Vi(e,n){return new Zd(e,n)}Ii(){}di(e){return de.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(o=>r+o))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return de.forEach(this.gi,(r,o)=>this.Sr(e,r,o).next(c=>c?de.resolve():n(o)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const o=this.persistence.getRemoteDocumentCache(),c=o.newChangeBuffer();return o.ri(e,f=>this.Sr(e,f,n).next(p=>{p||(r++,c.removeEntry(f,qe.min()))})).next(()=>c.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),de.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),de.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),de.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),de.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Sd(e.data.value)),n}Sr(e,n,r){return de.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.gi.get(n);return de.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(e,n,r,o){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=o}static Es(e,n){let r=at(),o=at();for(const c of n.docChanges)switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new Xp(e,n.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return iA()?8:_4(Zn())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,o){const c={result:null};return this.ps(e,n).next(f=>{c.result=f}).next(()=>{if(!c.result)return this.ys(e,n,o,r).next(f=>{c.result=f})}).next(()=>{if(c.result)return;const f=new WI;return this.ws(e,n,f).next(p=>{if(c.result=p,this.Rs)return this.Ss(e,n,f,p.size)})}).next(()=>c.result)}Ss(e,n,r,o){return r.documentReadCount<this.Vs?(il()<=rt.DEBUG&&Ee("QueryEngine","SDK will not create cache indexes for query:",sl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),de.resolve()):(il()<=rt.DEBUG&&Ee("QueryEngine","Query:",sl(n),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.fs*o?(il()<=rt.DEBUG&&Ee("QueryEngine","The SDK decides to create cache indexes for query:",sl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Us(n))):de.resolve())}ps(e,n){if(B1(n))return de.resolve(null);let r=Us(n);return this.indexManager.getIndexType(e,r).next(o=>o===0?null:(n.limit!==null&&o===1&&(n=Jm(n,null,"F"),r=Us(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(c=>{const f=at(...c);return this.gs.getDocuments(e,f).next(p=>this.indexManager.getMinOffset(e,r).next(g=>{const y=this.bs(n,p);return this.Ds(n,y,f,g.readTime)?this.ps(e,Jm(n,null,"F")):this.vs(e,y,n,g)}))})))}ys(e,n,r,o){return B1(n)||o.isEqual(qe.min())?de.resolve(null):this.gs.getDocuments(e,r).next(c=>{const f=this.bs(n,c);return this.Ds(n,f,r,o)?de.resolve(null):(il()<=rt.DEBUG&&Ee("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),sl(n)),this.vs(e,f,n,p4(o,Fc)).next(p=>p))})}bs(e,n){let r=new gn(jx(e));return n.forEach((o,c)=>{hh(e,c)&&(r=r.add(c))}),r}Ds(e,n,r,o){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}ws(e,n,r){return il()<=rt.DEBUG&&Ee("QueryEngine","Using full collection scan to execute query:",sl(n)),this.gs.getDocumentsMatchingQuery(e,n,wa.min(),r)}vs(e,n,r,o){return this.gs.getDocumentsMatchingQuery(e,r,o).next(c=>(n.forEach(f=>{c=c.insert(f.key,f)}),c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zp="LocalStore",ZI=3e8;class KI{constructor(e,n,r,o){this.persistence=e,this.Cs=n,this.serializer=o,this.Fs=new Ht(Qe),this.Ms=new vo(c=>Pp(c),Up),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new VI(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function YI(i,e,n,r){return new KI(i,e,n,r)}async function n2(i,e){const n=We(i);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let o;return n.mutationQueue.getAllMutationBatches(r).next(c=>(o=c,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(c=>{const f=[],p=[];let g=at();for(const y of o){f.push(y.batchId);for(const x of y.mutations)g=g.add(x.key)}for(const y of c){p.push(y.batchId);for(const x of y.mutations)g=g.add(x.key)}return n.localDocuments.getDocuments(r,g).next(y=>({Bs:y,removedBatchIds:f,addedBatchIds:p}))})})}function QI(i,e){const n=We(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),c=n.Os.newChangeBuffer({trackRemovals:!0});return function(p,g,y,x){const S=y.batch,A=S.keys();let F=de.resolve();return A.forEach(G=>{F=F.next(()=>x.getEntry(g,G)).next(q=>{const K=y.docVersions.get(G);_t(K!==null,48541),q.version.compareTo(K)<0&&(S.applyToRemoteDocument(q,y),q.isValidDocument()&&(q.setReadTime(y.commitVersion),x.addEntry(q)))})}),F.next(()=>p.mutationQueue.removeMutationBatch(g,S))}(n,r,e,c).next(()=>c.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(p){let g=at();for(let y=0;y<p.mutationResults.length;++y)p.mutationResults[y].transformResults.length>0&&(g=g.add(p.batch.mutations[y].key));return g}(e))).next(()=>n.localDocuments.getDocuments(r,o))})}function i2(i){const e=We(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function $I(i,e){const n=We(i),r=e.snapshotVersion;let o=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const f=n.Os.newChangeBuffer({trackRemovals:!0});o=n.Fs;const p=[];e.targetChanges.forEach((x,S)=>{const A=o.get(S);if(!A)return;p.push(n.hi.removeMatchingKeys(c,x.removedDocuments,S).next(()=>n.hi.addMatchingKeys(c,x.addedDocuments,S)));let F=A.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(S)!==null?F=F.withResumeToken(Pn.EMPTY_BYTE_STRING,qe.min()).withLastLimboFreeSnapshotVersion(qe.min()):x.resumeToken.approximateByteSize()>0&&(F=F.withResumeToken(x.resumeToken,r)),o=o.insert(S,F),function(q,K,J){return q.resumeToken.approximateByteSize()===0||K.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=ZI?!0:J.addedDocuments.size+J.modifiedDocuments.size+J.removedDocuments.size>0}(A,F,x)&&p.push(n.hi.updateTargetData(c,F))});let g=Mr(),y=at();if(e.documentUpdates.forEach(x=>{e.resolvedLimboDocuments.has(x)&&p.push(n.persistence.referenceDelegate.updateLimboDocument(c,x))}),p.push(JI(c,f,e.documentUpdates).next(x=>{g=x.Ls,y=x.ks})),!r.isEqual(qe.min())){const x=n.hi.getLastRemoteSnapshotVersion(c).next(S=>n.hi.setTargetsMetadata(c,c.currentSequenceNumber,r));p.push(x)}return de.waitFor(p).next(()=>f.apply(c)).next(()=>n.localDocuments.getLocalViewOfDocuments(c,g,y)).next(()=>g)}).then(c=>(n.Fs=o,c))}function JI(i,e,n){let r=at(),o=at();return n.forEach(c=>r=r.add(c)),e.getEntries(i,r).next(c=>{let f=Mr();return n.forEach((p,g)=>{const y=c.get(p);g.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(p)),g.isNoDocument()&&g.version.isEqual(qe.min())?(e.removeEntry(p,g.readTime),f=f.insert(p,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),f=f.insert(p,g)):Ee(Zp,"Ignoring outdated watch update for ",p,". Current version:",y.version," Watch version:",g.version)}),{Ls:f,ks:o}})}function e6(i,e){const n=We(i);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Mp),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function t6(i,e){const n=We(i);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return n.hi.getTargetData(r,e).next(c=>c?(o=c,de.resolve(o)):n.hi.allocateTargetId(r).next(f=>(o=new pa(e,f,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=n.Fs.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}async function sp(i,e,n){const r=We(i),o=r.Fs.get(e),c=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",c,f=>r.persistence.referenceDelegate.removeTarget(f,o))}catch(f){if(!Sl(f))throw f;Ee(Zp,`Failed to update sequence numbers for target ${e}: ${f}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(o.target)}function J1(i,e,n){const r=We(i);let o=qe.min(),c=at();return r.persistence.runTransaction("Execute query","readwrite",f=>function(g,y,x){const S=We(g),A=S.Ms.get(x);return A!==void 0?de.resolve(S.Fs.get(A)):S.hi.getTargetData(y,x)}(r,f,Us(e)).next(p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(f,p.targetId).next(g=>{c=g})}).next(()=>r.Cs.getDocumentsMatchingQuery(f,e,n?o:qe.min(),n?c:at())).next(p=>(n6(r,F4(e),p),{documents:p,qs:c})))}function n6(i,e,n){let r=i.xs.get(e)||qe.min();n.forEach((o,c)=>{c.readTime.compareTo(r)>0&&(r=c.readTime)}),i.xs.set(e,r)}class eb{constructor(){this.activeTargetIds=Z4()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class i6{constructor(){this.Fo=new eb,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new eb,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s6{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tb="ConnectivityMonitor";class nb{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){Ee(tb,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){Ee(tb,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pd=null;function rp(){return pd===null?pd=function(){return 268435456+Math.round(2147483648*Math.random())}():pd++,"0x"+pd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const km="RestConnection",r6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class a6{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${o}`,this.Ko=this.databaseId.database===zd?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Wo(e,n,r,o,c){const f=rp(),p=this.Go(e,n.toUriEncodedString());Ee(km,`Sending RPC '${e}' ${f}:`,p,r);const g={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(g,o,c);const{host:y}=new URL(p),x=vl(y);return this.jo(e,p,g,r,x).then(S=>(Ee(km,`Received RPC '${e}' ${f}: `,S),S),S=>{throw xa(km,`RPC '${e}' ${f} failed with error: `,S,"url: ",p,"request:",r),S})}Jo(e,n,r,o,c,f){return this.Wo(e,n,r,o,c)}zo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+xl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((o,c)=>e[c]=o),r&&r.headers.forEach((o,c)=>e[c]=o)}Go(e,n){const r=r6[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o6{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qn="WebChannelConnection";class l6 extends a6{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,o,c){const f=rp();return new Promise((p,g)=>{const y=new ax;y.setWithCredentials(!0),y.listenOnce(ox.COMPLETE,()=>{try{switch(y.getLastErrorCode()){case wd.NO_ERROR:const S=y.getResponseJson();Ee(qn,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(S)),p(S);break;case wd.TIMEOUT:Ee(qn,`RPC '${e}' ${f} timed out`),g(new je(pe.DEADLINE_EXCEEDED,"Request time out"));break;case wd.HTTP_ERROR:const A=y.getStatus();if(Ee(qn,`RPC '${e}' ${f} failed with status:`,A,"response text:",y.getResponseText()),A>0){let F=y.getResponseJson();Array.isArray(F)&&(F=F[0]);const G=F==null?void 0:F.error;if(G&&G.status&&G.message){const q=function(J){const Y=J.toLowerCase().replace(/_/g,"-");return Object.values(pe).indexOf(Y)>=0?Y:pe.UNKNOWN}(G.status);g(new je(q,G.message))}else g(new je(pe.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new je(pe.UNAVAILABLE,"Connection failed."));break;default:Ue(9055,{c_:e,streamId:f,l_:y.getLastErrorCode(),h_:y.getLastError()})}}finally{Ee(qn,`RPC '${e}' ${f} completed.`)}});const x=JSON.stringify(o);Ee(qn,`RPC '${e}' ${f} sending request:`,o),y.send(n,"POST",x,r,15)})}P_(e,n,r){const o=rp(),c=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=ux(),p=cx(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(g.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(g.useFetchStreams=!0),this.zo(g.initMessageHeaders,n,r),g.encodeInitMessageHeaders=!0;const x=c.join("");Ee(qn,`Creating RPC '${e}' stream ${o}: ${x}`,g);const S=f.createWebChannel(x,g);this.T_(S);let A=!1,F=!1;const G=new o6({Ho:K=>{F?Ee(qn,`Not sending because RPC '${e}' stream ${o} is closed:`,K):(A||(Ee(qn,`Opening RPC '${e}' stream ${o} transport.`),S.open(),A=!0),Ee(qn,`RPC '${e}' stream ${o} sending:`,K),S.send(K))},Yo:()=>S.close()}),q=(K,J,Y)=>{K.listen(J,z=>{try{Y(z)}catch(me){setTimeout(()=>{throw me},0)}})};return q(S,Sc.EventType.OPEN,()=>{F||(Ee(qn,`RPC '${e}' stream ${o} transport opened.`),G.s_())}),q(S,Sc.EventType.CLOSE,()=>{F||(F=!0,Ee(qn,`RPC '${e}' stream ${o} transport closed`),G.__(),this.I_(S))}),q(S,Sc.EventType.ERROR,K=>{F||(F=!0,xa(qn,`RPC '${e}' stream ${o} transport errored. Name:`,K.name,"Message:",K.message),G.__(new je(pe.UNAVAILABLE,"The operation could not be completed")))}),q(S,Sc.EventType.MESSAGE,K=>{var J;if(!F){const Y=K.data[0];_t(!!Y,16349);const z=Y,me=(z==null?void 0:z.error)||((J=z[0])===null||J===void 0?void 0:J.error);if(me){Ee(qn,`RPC '${e}' stream ${o} received error:`,me);const fe=me.status;let be=function(I){const L=rn[I];if(L!==void 0)return qx(L)}(fe),M=me.message;be===void 0&&(be=pe.INTERNAL,M="Unknown error status: "+fe+" with message "+me.message),F=!0,G.__(new je(be,M)),S.close()}else Ee(qn,`RPC '${e}' stream ${o} received:`,Y),G.a_(Y)}}),q(p,lx.STAT_EVENT,K=>{K.stat===Xm.PROXY?Ee(qn,`RPC '${e}' stream ${o} detected buffering proxy`):K.stat===Xm.NOPROXY&&Ee(qn,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{G.o_()},0),G}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}function Nm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gh(i){return new hI(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{constructor(e,n,r=1e3,o=1.5,c=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=o,this.A_=c,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),o=Math.max(0,n-r);o>0&&Ee("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,o,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ib="PersistentStream";class r2{constructor(e,n,r,o,c,f,p,g){this.Fi=e,this.w_=r,this.S_=o,this.connection=c,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=p,this.listener=g,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new s2(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===pe.RESOURCE_EXHAUSTED?(Or(n.toString()),Or("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===pe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.b_===n&&this.W_(r,o)},r=>{e(()=>{const o=new je(pe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(o)})})}W_(e,n){const r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(o=>{r(()=>this.G_(o))}),this.stream.onMessage(o=>{r(()=>++this.C_==1?this.j_(o):this.onNext(o))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return Ee(ib,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(Ee(ib,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class c6 extends r2{constructor(e,n,r,o,c,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,o,f),this.serializer=c}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=pI(this.serializer,e),r=function(c){if(!("targetChange"in c))return qe.min();const f=c.targetChange;return f.targetIds&&f.targetIds.length?qe.min():f.readTime?Bs(f.readTime):qe.min()}(e);return this.listener.J_(n,r)}H_(e){const n={};n.database=ip(this.serializer),n.addTarget=function(c,f){let p;const g=f.target;if(p=$m(g)?{documents:vI(c,g)}:{query:bI(c,g).Vt},p.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){p.resumeToken=Xx(c,f.resumeToken);const y=ep(c,f.expectedCount);y!==null&&(p.expectedCount=y)}else if(f.snapshotVersion.compareTo(qe.min())>0){p.readTime=Xd(c,f.snapshotVersion.toTimestamp());const y=ep(c,f.expectedCount);y!==null&&(p.expectedCount=y)}return p}(this.serializer,e);const r=xI(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){const n={};n.database=ip(this.serializer),n.removeTarget=e,this.k_(n)}}class u6 extends r2{constructor(e,n,r,o,c,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,o,f),this.serializer=c}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return _t(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,_t(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){_t(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=yI(e.writeResults,e.commitTime),r=Bs(e.commitTime);return this.listener.ta(r,n)}na(){const e={};e.database=ip(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>gI(this.serializer,r))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d6{}class h6 extends d6{constructor(e,n,r,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=o,this.ra=!1}ia(){if(this.ra)throw new je(pe.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,f])=>this.connection.Wo(e,tp(n,r),o,c,f)).catch(c=>{throw c.name==="FirebaseError"?(c.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new je(pe.UNKNOWN,c.toString())})}Jo(e,n,r,o,c){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([f,p])=>this.connection.Jo(e,tp(n,r),o,f,p,c)).catch(f=>{throw f.name==="FirebaseError"?(f.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new je(pe.UNKNOWN,f.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class f6{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Or(n),this._a=!1):Ee("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ho="RemoteStore";class m6{constructor(e,n,r,o,c){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=c,this.Ea.xo(f=>{r.enqueueAndForget(async()=>{_o(this)&&(Ee(ho,"Restarting streams for network reachability change."),await async function(g){const y=We(g);y.Ia.add(4),await au(y),y.Aa.set("Unknown"),y.Ia.delete(4),await yh(y)}(this))})}),this.Aa=new f6(r,o)}}async function yh(i){if(_o(i))for(const e of i.da)await e(!0)}async function au(i){for(const e of i.da)await e(!1)}function a2(i,e){const n=We(i);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),$p(n)?Qp(n):El(n).x_()&&Yp(n,e))}function Kp(i,e){const n=We(i),r=El(n);n.Ta.delete(e),r.x_()&&o2(n,e),n.Ta.size===0&&(r.x_()?r.B_():_o(n)&&n.Aa.set("Unknown"))}function Yp(i,e){if(i.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(qe.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}El(i).H_(e)}function o2(i,e){i.Ra.$e(e),El(i).Y_(e)}function Qp(i){i.Ra=new lI({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>i.Ta.get(e)||null,lt:()=>i.datastore.serializer.databaseId}),El(i).start(),i.Aa.aa()}function $p(i){return _o(i)&&!El(i).M_()&&i.Ta.size>0}function _o(i){return We(i).Ia.size===0}function l2(i){i.Ra=void 0}async function p6(i){i.Aa.set("Online")}async function g6(i){i.Ta.forEach((e,n)=>{Yp(i,e)})}async function y6(i,e){l2(i),$p(i)?(i.Aa.la(e),Qp(i)):i.Aa.set("Unknown")}async function v6(i,e,n){if(i.Aa.set("Online"),e instanceof Wx&&e.state===2&&e.cause)try{await async function(o,c){const f=c.cause;for(const p of c.targetIds)o.Ta.has(p)&&(await o.remoteSyncer.rejectListen(p,f),o.Ta.delete(p),o.Ra.removeTarget(p))}(i,e)}catch(r){Ee(ho,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Kd(i,r)}else if(e instanceof Td?i.Ra.Ye(e):e instanceof Gx?i.Ra.it(e):i.Ra.et(e),!n.isEqual(qe.min()))try{const r=await i2(i.localStore);n.compareTo(r)>=0&&await function(c,f){const p=c.Ra.Pt(f);return p.targetChanges.forEach((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const x=c.Ta.get(y);x&&c.Ta.set(y,x.withResumeToken(g.resumeToken,f))}}),p.targetMismatches.forEach((g,y)=>{const x=c.Ta.get(g);if(!x)return;c.Ta.set(g,x.withResumeToken(Pn.EMPTY_BYTE_STRING,x.snapshotVersion)),o2(c,g);const S=new pa(x.target,g,y,x.sequenceNumber);Yp(c,S)}),c.remoteSyncer.applyRemoteEvent(p)}(i,n)}catch(r){Ee(ho,"Failed to raise snapshot:",r),await Kd(i,r)}}async function Kd(i,e,n){if(!Sl(e))throw e;i.Ia.add(1),await au(i),i.Aa.set("Offline"),n||(n=()=>i2(i.localStore)),i.asyncQueue.enqueueRetryable(async()=>{Ee(ho,"Retrying IndexedDB access"),await n(),i.Ia.delete(1),await yh(i)})}function c2(i,e){return e().catch(n=>Kd(i,n,e))}async function vh(i){const e=We(i),n=Ta(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Mp;for(;b6(e);)try{const o=await e6(e.localStore,r);if(o===null){e.Pa.length===0&&n.B_();break}r=o.batchId,_6(e,o)}catch(o){await Kd(e,o)}u2(e)&&d2(e)}function b6(i){return _o(i)&&i.Pa.length<10}function _6(i,e){i.Pa.push(e);const n=Ta(i);n.x_()&&n.Z_&&n.X_(e.mutations)}function u2(i){return _o(i)&&!Ta(i).M_()&&i.Pa.length>0}function d2(i){Ta(i).start()}async function x6(i){Ta(i).na()}async function w6(i){const e=Ta(i);for(const n of i.Pa)e.X_(n.mutations)}async function S6(i,e,n){const r=i.Pa.shift(),o=Fp.from(r,e,n);await c2(i,()=>i.remoteSyncer.applySuccessfulWrite(o)),await vh(i)}async function E6(i,e){e&&Ta(i).Z_&&await async function(r,o){if(function(f){return aI(f)&&f!==pe.ABORTED}(o.code)){const c=r.Pa.shift();Ta(r).N_(),await c2(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,o)),await vh(r)}}(i,e),u2(i)&&d2(i)}async function sb(i,e){const n=We(i);n.asyncQueue.verifyOperationInProgress(),Ee(ho,"RemoteStore received new credentials");const r=_o(n);n.Ia.add(3),await au(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await yh(n)}async function A6(i,e){const n=We(i);e?(n.Ia.delete(2),await yh(n)):e||(n.Ia.add(2),await au(n),n.Aa.set("Unknown"))}function El(i){return i.Va||(i.Va=function(n,r,o){const c=We(n);return c.ia(),new c6(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)}(i.datastore,i.asyncQueue,{Zo:p6.bind(null,i),e_:g6.bind(null,i),n_:y6.bind(null,i),J_:v6.bind(null,i)}),i.da.push(async e=>{e?(i.Va.N_(),$p(i)?Qp(i):i.Aa.set("Unknown")):(await i.Va.stop(),l2(i))})),i.Va}function Ta(i){return i.ma||(i.ma=function(n,r,o){const c=We(n);return c.ia(),new u6(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)}(i.datastore,i.asyncQueue,{Zo:()=>Promise.resolve(),e_:x6.bind(null,i),n_:E6.bind(null,i),ea:w6.bind(null,i),ta:S6.bind(null,i)}),i.da.push(async e=>{e?(i.ma.N_(),await vh(i)):(await i.ma.stop(),i.Pa.length>0&&(Ee(ho,`Stopping write stream with ${i.Pa.length} pending writes`),i.Pa=[]))})),i.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(e,n,r,o,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=o,this.removalCallback=c,this.deferred=new ba,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(f=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,o,c){const f=Date.now()+r,p=new Jp(e,n,f,o,c);return p.start(r),p}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new je(pe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function eg(i,e){if(Or("AsyncQueue",`${e}: ${i}`),Sl(i))return new je(pe.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{static emptySet(e){return new dl(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Oe.comparator(n.key,r.key):(n,r)=>Oe.comparator(n.key,r.key),this.keyedMap=Ec(),this.sortedSet=new Ht(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof dl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=r.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new dl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rb{constructor(){this.fa=new Ht(Oe.comparator)}track(e){const n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):Ue(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}}class gl{constructor(e,n,r,o,c,f,p,g,y){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=c,this.fromCache=f,this.syncStateChanged=p,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,n,r,o,c){const f=[];return n.forEach(p=>{f.push({type:0,doc:p})}),new gl(e,n,dl.emptySet(n),f,r,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&dh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==r[o].type||!n[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T6{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class R6{constructor(){this.queries=ab(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){const o=We(n),c=o.queries;o.queries=ab(),c.forEach((f,p)=>{for(const g of p.wa)g.onError(r)})})(this,new je(pe.ABORTED,"Firestore shutting down"))}}function ab(){return new vo(i=>Nx(i),dh)}async function C6(i,e){const n=We(i);let r=3;const o=e.query;let c=n.queries.get(o);c?!c.Sa()&&e.ba()&&(r=2):(c=new T6,r=e.ba()?0:1);try{switch(r){case 0:c.ya=await n.onListen(o,!0);break;case 1:c.ya=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(f){const p=eg(f,`Initialization of query '${sl(e.query)}' failed`);return void e.onError(p)}n.queries.set(o,c),c.wa.push(e),e.va(n.onlineState),c.ya&&e.Ca(c.ya)&&tg(n)}async function I6(i,e){const n=We(i),r=e.query;let o=3;const c=n.queries.get(r);if(c){const f=c.wa.indexOf(e);f>=0&&(c.wa.splice(f,1),c.wa.length===0?o=e.ba()?0:1:!c.Sa()&&e.ba()&&(o=2))}switch(o){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function k6(i,e){const n=We(i);let r=!1;for(const o of e){const c=o.query,f=n.queries.get(c);if(f){for(const p of f.wa)p.Ca(o)&&(r=!0);f.ya=o}}r&&tg(n)}function N6(i,e,n){const r=We(i),o=r.queries.get(e);if(o)for(const c of o.wa)c.onError(n);r.queries.delete(e)}function tg(i){i.Da.forEach(e=>{e.next()})}var ap,ob;(ob=ap||(ap={})).Fa="default",ob.Cache="cache";class j6{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new gl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=gl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==ap.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(e){this.key=e}}class f2{constructor(e){this.key=e}}class D6{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=at(),this.mutatedKeys=at(),this.Xa=jx(e),this.eu=new dl(this.Xa)}get tu(){return this.Ha}nu(e,n){const r=n?n.ru:new rb,o=n?n.eu:this.eu;let c=n?n.mutatedKeys:this.mutatedKeys,f=o,p=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((x,S)=>{const A=o.get(x),F=hh(this.query,S)?S:null,G=!!A&&this.mutatedKeys.has(A.key),q=!!F&&(F.hasLocalMutations||this.mutatedKeys.has(F.key)&&F.hasCommittedMutations);let K=!1;A&&F?A.data.isEqual(F.data)?G!==q&&(r.track({type:3,doc:F}),K=!0):this.iu(A,F)||(r.track({type:2,doc:F}),K=!0,(g&&this.Xa(F,g)>0||y&&this.Xa(F,y)<0)&&(p=!0)):!A&&F?(r.track({type:0,doc:F}),K=!0):A&&!F&&(r.track({type:1,doc:A}),K=!0,(g||y)&&(p=!0)),K&&(F?(f=f.add(F),c=q?c.add(x):c.delete(x)):(f=f.delete(x),c=c.delete(x)))}),this.query.limit!==null)for(;f.size>this.query.limit;){const x=this.query.limitType==="F"?f.last():f.first();f=f.delete(x.key),c=c.delete(x.key),r.track({type:1,doc:x})}return{eu:f,ru:r,Ds:p,mutatedKeys:c}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,o){const c=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const f=e.ru.pa();f.sort((x,S)=>function(F,G){const q=K=>{switch(K){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ue(20277,{At:K})}};return q(F)-q(G)}(x.type,S.type)||this.Xa(x.doc,S.doc)),this.su(r),o=o!=null&&o;const p=n&&!o?this.ou():[],g=this.Za.size===0&&this.current&&!o?1:0,y=g!==this.Ya;return this.Ya=g,f.length!==0||y?{snapshot:new gl(this.query,e.eu,c,f,e.mutatedKeys,g===0,y,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:p}:{_u:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new rb,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=at(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new f2(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new h2(r))}),n}uu(e){this.Ha=e.qs,this.Za=at();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return gl.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const ng="SyncEngine";class O6{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class M6{constructor(e){this.key=e,this.lu=!1}}class L6{constructor(e,n,r,o,c,f){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=f,this.hu={},this.Pu=new vo(p=>Nx(p),dh),this.Tu=new Map,this.Iu=new Set,this.du=new Ht(Oe.comparator),this.Eu=new Map,this.Au=new Gp,this.Ru={},this.Vu=new Map,this.mu=pl.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function V6(i,e,n=!0){const r=b2(i);let o;const c=r.Pu.get(e);return c?(r.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.cu()):o=await m2(r,e,n,!0),o}async function P6(i,e){const n=b2(i);await m2(n,e,!0,!1)}async function m2(i,e,n,r){const o=await t6(i.localStore,Us(e)),c=o.targetId,f=i.sharedClientState.addLocalQueryTarget(c,n);let p;return r&&(p=await U6(i,e,c,f==="current",o.resumeToken)),i.isPrimaryClient&&n&&a2(i.remoteStore,o),p}async function U6(i,e,n,r,o){i.gu=(S,A,F)=>async function(q,K,J,Y){let z=K.view.nu(J);z.Ds&&(z=await J1(q.localStore,K.query,!1).then(({documents:M})=>K.view.nu(M,z)));const me=Y&&Y.targetChanges.get(K.targetId),fe=Y&&Y.targetMismatches.get(K.targetId)!=null,be=K.view.applyChanges(z,q.isPrimaryClient,me,fe);return cb(q,K.targetId,be._u),be.snapshot}(i,S,A,F);const c=await J1(i.localStore,e,!0),f=new D6(e,c.qs),p=f.nu(c.documents),g=ru.createSynthesizedTargetChangeForCurrentChange(n,r&&i.onlineState!=="Offline",o),y=f.applyChanges(p,i.isPrimaryClient,g);cb(i,n,y._u);const x=new O6(e,n,f);return i.Pu.set(e,x),i.Tu.has(n)?i.Tu.get(n).push(e):i.Tu.set(n,[e]),y.snapshot}async function B6(i,e,n){const r=We(i),o=r.Pu.get(e),c=r.Tu.get(o.targetId);if(c.length>1)return r.Tu.set(o.targetId,c.filter(f=>!dh(f,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await sp(r.localStore,o.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(o.targetId),n&&Kp(r.remoteStore,o.targetId),op(r,o.targetId)}).catch(wl)):(op(r,o.targetId),await sp(r.localStore,o.targetId,!0))}async function z6(i,e){const n=We(i),r=n.Pu.get(e),o=n.Tu.get(r.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Kp(n.remoteStore,r.targetId))}async function F6(i,e,n){const r=K6(i);try{const o=await function(f,p){const g=We(f),y=Ot.now(),x=p.reduce((F,G)=>F.add(G.key),at());let S,A;return g.persistence.runTransaction("Locally write mutations","readwrite",F=>{let G=Mr(),q=at();return g.Os.getEntries(F,x).next(K=>{G=K,G.forEach((J,Y)=>{Y.isValidDocument()||(q=q.add(J))})}).next(()=>g.localDocuments.getOverlayedDocuments(F,G)).next(K=>{S=K;const J=[];for(const Y of p){const z=tI(Y,S.get(Y.key).overlayedDocument);z!=null&&J.push(new bo(Y.key,z,Ex(z.value.mapValue),kr.exists(!0)))}return g.mutationQueue.addMutationBatch(F,y,J,p)}).next(K=>{A=K;const J=K.applyToLocalDocumentSet(S,q);return g.documentOverlayCache.saveOverlays(F,K.batchId,J)})}).then(()=>({batchId:A.batchId,changes:Ox(S)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(f,p,g){let y=f.Ru[f.currentUser.toKey()];y||(y=new Ht(Qe)),y=y.insert(p,g),f.Ru[f.currentUser.toKey()]=y}(r,o.batchId,n),await ou(r,o.changes),await vh(r.remoteStore)}catch(o){const c=eg(o,"Failed to persist write");n.reject(c)}}async function p2(i,e){const n=We(i);try{const r=await $I(n.localStore,e);e.targetChanges.forEach((o,c)=>{const f=n.Eu.get(c);f&&(_t(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?f.lu=!0:o.modifiedDocuments.size>0?_t(f.lu,14607):o.removedDocuments.size>0&&(_t(f.lu,42227),f.lu=!1))}),await ou(n,r,e)}catch(r){await wl(r)}}function lb(i,e,n){const r=We(i);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const o=[];r.Pu.forEach((c,f)=>{const p=f.view.va(e);p.snapshot&&o.push(p.snapshot)}),function(f,p){const g=We(f);g.onlineState=p;let y=!1;g.queries.forEach((x,S)=>{for(const A of S.wa)A.va(p)&&(y=!0)}),y&&tg(g)}(r.eventManager,e),o.length&&r.hu.J_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function H6(i,e,n){const r=We(i);r.sharedClientState.updateQueryState(e,"rejected",n);const o=r.Eu.get(e),c=o&&o.key;if(c){let f=new Ht(Oe.comparator);f=f.insert(c,Xn.newNoDocument(c,qe.min()));const p=at().add(c),g=new ph(qe.min(),new Map,new Ht(Qe),f,p);await p2(r,g),r.du=r.du.remove(c),r.Eu.delete(e),ig(r)}else await sp(r.localStore,e,!1).then(()=>op(r,e,n)).catch(wl)}async function q6(i,e){const n=We(i),r=e.batch.batchId;try{const o=await QI(n.localStore,e);y2(n,r,null),g2(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ou(n,o)}catch(o){await wl(o)}}async function G6(i,e,n){const r=We(i);try{const o=await function(f,p){const g=We(f);return g.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let x;return g.mutationQueue.lookupMutationBatch(y,p).next(S=>(_t(S!==null,37113),x=S.keys(),g.mutationQueue.removeMutationBatch(y,S))).next(()=>g.mutationQueue.performConsistencyCheck(y)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(y,x,p)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,x)).next(()=>g.localDocuments.getDocuments(y,x))})}(r.localStore,e);y2(r,e,n),g2(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ou(r,o)}catch(o){await wl(o)}}function g2(i,e){(i.Vu.get(e)||[]).forEach(n=>{n.resolve()}),i.Vu.delete(e)}function y2(i,e,n){const r=We(i);let o=r.Ru[r.currentUser.toKey()];if(o){const c=o.get(e);c&&(n?c.reject(n):c.resolve(),o=o.remove(e)),r.Ru[r.currentUser.toKey()]=o}}function op(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const r of i.Tu.get(e))i.Pu.delete(r),n&&i.hu.pu(r,n);i.Tu.delete(e),i.isPrimaryClient&&i.Au.zr(e).forEach(r=>{i.Au.containsKey(r)||v2(i,r)})}function v2(i,e){i.Iu.delete(e.path.canonicalString());const n=i.du.get(e);n!==null&&(Kp(i.remoteStore,n),i.du=i.du.remove(e),i.Eu.delete(n),ig(i))}function cb(i,e,n){for(const r of n)r instanceof h2?(i.Au.addReference(r.key,e),W6(i,r)):r instanceof f2?(Ee(ng,"Document no longer in limbo: "+r.key),i.Au.removeReference(r.key,e),i.Au.containsKey(r.key)||v2(i,r.key)):Ue(19791,{yu:r})}function W6(i,e){const n=e.key,r=n.path.canonicalString();i.du.get(n)||i.Iu.has(r)||(Ee(ng,"New document in limbo: "+n),i.Iu.add(r),ig(i))}function ig(i){for(;i.Iu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Iu.values().next().value;i.Iu.delete(e);const n=new Oe(zt.fromString(e)),r=i.mu.next();i.Eu.set(r,new M6(n)),i.du=i.du.insert(n,r),a2(i.remoteStore,new pa(Us(Bp(n.path)),r,"TargetPurposeLimboResolution",oh.ue))}}async function ou(i,e,n){const r=We(i),o=[],c=[],f=[];r.Pu.isEmpty()||(r.Pu.forEach((p,g)=>{f.push(r.gu(g,e,n).then(y=>{var x;if((y||n)&&r.isPrimaryClient){const S=y?!y.fromCache:(x=n==null?void 0:n.targetChanges.get(g.targetId))===null||x===void 0?void 0:x.current;r.sharedClientState.updateQueryState(g.targetId,S?"current":"not-current")}if(y){o.push(y);const S=Xp.Es(g.targetId,y);c.push(S)}}))}),await Promise.all(f),r.hu.J_(o),await async function(g,y){const x=We(g);try{await x.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>de.forEach(y,A=>de.forEach(A.Is,F=>x.persistence.referenceDelegate.addReference(S,A.targetId,F)).next(()=>de.forEach(A.ds,F=>x.persistence.referenceDelegate.removeReference(S,A.targetId,F)))))}catch(S){if(!Sl(S))throw S;Ee(Zp,"Failed to update sequence numbers: "+S)}for(const S of y){const A=S.targetId;if(!S.fromCache){const F=x.Fs.get(A),G=F.snapshotVersion,q=F.withLastLimboFreeSnapshotVersion(G);x.Fs=x.Fs.insert(A,q)}}}(r.localStore,c))}async function X6(i,e){const n=We(i);if(!n.currentUser.isEqual(e)){Ee(ng,"User change. New user:",e.toKey());const r=await n2(n.localStore,e);n.currentUser=e,function(c,f){c.Vu.forEach(p=>{p.forEach(g=>{g.reject(new je(pe.CANCELLED,f))})}),c.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ou(n,r.Bs)}}function Z6(i,e){const n=We(i),r=n.Eu.get(e);if(r&&r.lu)return at().add(r.key);{let o=at();const c=n.Tu.get(e);if(!c)return o;for(const f of c){const p=n.Pu.get(f);o=o.unionWith(p.view.tu)}return o}}function b2(i){const e=We(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=p2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Z6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=H6.bind(null,e),e.hu.J_=k6.bind(null,e.eventManager),e.hu.pu=N6.bind(null,e.eventManager),e}function K6(i){const e=We(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=q6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=G6.bind(null,e),e}class Yd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=gh(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return YI(this.persistence,new XI,e.initialUser,this.serializer)}Du(e){return new t2(Wp.Vi,this.serializer)}bu(e){return new i6}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Yd.provider={build:()=>new Yd};class Y6 extends Yd{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){_t(this.persistence.referenceDelegate instanceof Zd,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new jI(r,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?ci.withCacheSize(this.cacheSizeBytes):ci.DEFAULT;return new t2(r=>Zd.Vi(r,n),this.serializer)}}class lp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>lb(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=X6.bind(null,this.syncEngine),await A6(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new R6}()}createDatastore(e){const n=gh(e.databaseInfo.databaseId),r=function(c){return new l6(c)}(e.databaseInfo);return function(c,f,p,g){return new h6(c,f,p,g)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,o,c,f,p){return new m6(r,o,c,f,p)}(this.localStore,this.datastore,e.asyncQueue,n=>lb(this.syncEngine,n,0),function(){return nb.C()?new nb:new s6}())}createSyncEngine(e,n){return function(o,c,f,p,g,y,x){const S=new L6(o,c,f,p,g,y);return x&&(S.fu=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(o){const c=We(o);Ee(ho,"RemoteStore shutting down."),c.Ia.add(5),await au(c),c.Ea.shutdown(),c.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}lp.provider={build:()=>new lp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q6{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Or("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ra="FirestoreClient";class $6{constructor(e,n,r,o,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=o,this.user=Wn.UNAUTHENTICATED,this.clientId=Dp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(r,async f=>{Ee(Ra,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f}),this.appCheckCredentials.start(r,f=>(Ee(Ra,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ba;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=eg(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function jm(i,e){i.asyncQueue.verifyOperationInProgress(),Ee(Ra,"Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let r=n.initialUser;i.setCredentialChangeListener(async o=>{r.isEqual(o)||(await n2(e.localStore,o),r=o)}),e.persistence.setDatabaseDeletedListener(()=>{xa("Terminating Firestore due to IndexedDb database deletion"),i.terminate().then(()=>{Ee("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(o=>{xa("Terminating Firestore due to IndexedDb database deletion failed",o)})}),i._offlineComponents=e}async function ub(i,e){i.asyncQueue.verifyOperationInProgress();const n=await J6(i);Ee(Ra,"Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener(r=>sb(e.remoteStore,r)),i.setAppCheckTokenChangeListener((r,o)=>sb(e.remoteStore,o)),i._onlineComponents=e}async function J6(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){Ee(Ra,"Using user provided OfflineComponentProvider");try{await jm(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(o){return o.name==="FirebaseError"?o.code===pe.FAILED_PRECONDITION||o.code===pe.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(n))throw n;xa("Error using user provided cache. Falling back to memory cache: "+n),await jm(i,new Yd)}}else Ee(Ra,"Using default OfflineComponentProvider"),await jm(i,new Y6(void 0));return i._offlineComponents}async function _2(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(Ee(Ra,"Using user provided OnlineComponentProvider"),await ub(i,i._uninitializedComponentsProvider._online)):(Ee(Ra,"Using default OnlineComponentProvider"),await ub(i,new lp))),i._onlineComponents}function ek(i){return _2(i).then(e=>e.syncEngine)}async function tk(i){const e=await _2(i),n=e.eventManager;return n.onListen=V6.bind(null,e.syncEngine),n.onUnlisten=B6.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=P6.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=z6.bind(null,e.syncEngine),n}function nk(i,e,n={}){const r=new ba;return i.asyncQueue.enqueueAndForget(async()=>function(c,f,p,g,y){const x=new Q6({next:A=>{x.Ou(),f.enqueueAndForget(()=>I6(c,S));const F=A.docs.has(p);!F&&A.fromCache?y.reject(new je(pe.UNAVAILABLE,"Failed to get document because the client is offline.")):F&&A.fromCache&&g&&g.source==="server"?y.reject(new je(pe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(A)},error:A=>y.reject(A)}),S=new j6(Bp(p.path),x,{includeMetadataChanges:!0,ka:!0});return C6(c,S)}(await tk(i),i.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x2(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const db=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w2="firestore.googleapis.com",hb=!0;class fb{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new je(pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=w2,this.ssl=hb}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:hb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=e2;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<kI)throw new je(pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}m4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=x2((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(c){if(c.timeoutSeconds!==void 0){if(isNaN(c.timeoutSeconds))throw new je(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (must not be NaN)`);if(c.timeoutSeconds<5)throw new je(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (minimum allowed value is 5)`);if(c.timeoutSeconds>30)throw new je(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,o){return r.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class sg{constructor(e,n,r,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new fb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new je(pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new je(pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new fb(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new s4;switch(r.type){case"firstParty":return new l4(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new je(pe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=db.get(n);r&&(Ee("ComponentProvider","Removing Datastore"),db.delete(n),r.terminate())}(this),Promise.resolve()}}function ik(i,e,n,r={}){var o;i=zc(i,sg);const c=vl(e),f=i._getSettings(),p=Object.assign(Object.assign({},f),{emulatorOptions:i._getEmulatorOptions()}),g=`${e}:${n}`;c&&(Wb(`https://${g}`),Xb("Firestore",!0)),f.host!==w2&&f.host!==g&&xa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y=Object.assign(Object.assign({},f),{host:g,ssl:c,emulatorOptions:r});if(!_a(y,p)&&(i._setSettings(y),r.mockUserToken)){let x,S;if(typeof r.mockUserToken=="string")x=r.mockUserToken,S=Wn.MOCK_USER;else{x=KE(r.mockUserToken,(o=i._app)===null||o===void 0?void 0:o.options.projectId);const A=r.mockUserToken.sub||r.mockUserToken.user_id;if(!A)throw new je(pe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");S=new Wn(A)}i._authCredentials=new r4(new hx(x,S))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new rg(this.firestore,e,this._query)}}class An{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Zc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new An(this.firestore,e,this._key)}toJSON(){return{type:An._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(iu(n,An._jsonSchema))return new An(e,r||null,new Oe(zt.fromString(n.referencePath)))}}An._jsonSchemaVersion="firestore/documentReference/1.0",An._jsonSchema={type:an("string",An._jsonSchemaVersion),referencePath:an("string")};class Zc extends rg{constructor(e,n,r){super(e,n,Bp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new An(this.firestore,null,new Oe(e))}withConverter(e){return new Zc(this.firestore,e,this._path)}}function Zt(i,e,...n){if(i=ei(i),arguments.length===1&&(e=Dp.newId()),f4("doc","path",e),i instanceof sg){const r=zt.fromString(e,...n);return R1(r),new An(i,null,new Oe(r))}{if(!(i instanceof An||i instanceof Zc))throw new je(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(zt.fromString(e,...n));return R1(r),new An(i.firestore,i instanceof Zc?i.converter:null,new Oe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mb="AsyncQueue";class pb{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new s2(this,"async_queue_retry"),this.oc=()=>{const r=Nm();r&&Ee(mb,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const n=Nm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=Nm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new ba;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Sl(e))throw e;Ee(mb,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Or("INTERNAL UNHANDLED ERROR: ",gb(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const o=Jp.createAndSchedule(this,e,n,r,c=>this.lc(c));return this.ec.push(o),o}ac(){this.tc&&Ue(47125,{hc:gb(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function gb(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}class ag extends sg{constructor(e,n,r,o){super(e,n,r,o),this.type="firestore",this._queue=new pb,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new pb(e),this._firestoreClient=void 0,await e}}}function sk(i,e){const n=typeof i=="object"?i:gp(),r=typeof i=="string"?i:zd,o=po(n,"firestore").getImmediate({identifier:r});if(!o._initialized){const c=XE("firestore");c&&ik(o,...c)}return o}function S2(i){if(i._terminated)throw new je(pe.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||rk(i),i._firestoreClient}function rk(i){var e,n,r;const o=i._freezeSettings(),c=function(p,g,y,x){return new A4(p,g,y,x.host,x.ssl,x.experimentalForceLongPolling,x.experimentalAutoDetectLongPolling,x2(x.experimentalLongPollingOptions),x.useFetchStreams,x.isUsingEmulator)}(i._databaseId,((e=i._app)===null||e===void 0?void 0:e.options.appId)||"",i._persistenceKey,o);i._componentsProvider||!((n=o.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=o.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(i._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),i._firestoreClient=new $6(i._authCredentials,i._appCheckCredentials,i._queue,c,i._componentsProvider&&function(p){const g=p==null?void 0:p._online.build();return{_offline:p==null?void 0:p._offline.build(g),_online:g}}(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new qi(Pn.fromBase64String(e))}catch(n){throw new je(pe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new qi(Pn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:qi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(iu(e,qi._jsonSchema))return qi.fromBase64String(e.bytes)}}qi._jsonSchemaVersion="firestore/bytes/1.0",qi._jsonSchema={type:an("string",qi._jsonSchemaVersion),bytes:an("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new je(pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Vn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new je(pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new je(pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Qe(this._lat,e._lat)||Qe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:zs._jsonSchemaVersion}}static fromJSON(e){if(iu(e,zs._jsonSchema))return new zs(e.latitude,e.longitude)}}zs._jsonSchemaVersion="firestore/geoPoint/1.0",zs._jsonSchema={type:an("string",zs._jsonSchemaVersion),latitude:an("number"),longitude:an("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,o){if(r.length!==o.length)return!1;for(let c=0;c<r.length;++c)if(r[c]!==o[c])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Fs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(iu(e,Fs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Fs(e.vectorValues);throw new je(pe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Fs._jsonSchemaVersion="firestore/vectorValue/1.0",Fs._jsonSchema={type:an("string",Fs._jsonSchemaVersion),vectorValues:an("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ak=/^__.*__$/;class ok{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new bo(e,this.data,this.fieldMask,n,this.fieldTransforms):new su(e,this.data,n,this.fieldTransforms)}}function A2(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ue(40011,{Ec:i})}}class lg{constructor(e,n,r,o,c,f){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=o,c===void 0&&this.Ac(),this.fieldTransforms=c||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new lg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.Rc({path:r,mc:!1});return o.fc(e),o}gc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.Rc({path:r,mc:!1});return o.Ac(),o}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Qd(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(A2(this.Ec)&&ak.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class lk{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||gh(e)}Dc(e,n,r,o=!1){return new lg({Ec:e,methodName:n,bc:r,path:Vn.emptyPath(),mc:!1,Sc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ck(i){const e=i._freezeSettings(),n=gh(i._databaseId);return new lk(i._databaseId,!!e.ignoreUndefinedProperties,n)}function uk(i,e,n,r,o,c={}){const f=i.Dc(c.merge||c.mergeFields?2:0,e,n,o);I2("Data must be an object, but it was:",f,r);const p=R2(r,f);let g,y;if(c.merge)g=new cs(f.fieldMask),y=f.fieldTransforms;else if(c.mergeFields){const x=[];for(const S of c.mergeFields){const A=dk(e,S,n);if(!f.contains(A))throw new je(pe.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);fk(x,A)||x.push(A)}g=new cs(x),y=f.fieldTransforms.filter(S=>g.covers(S.field))}else g=null,y=f.fieldTransforms;return new ok(new Hi(p),g,y)}function T2(i,e){if(C2(i=ei(i)))return I2("Unsupported field value:",e,i),R2(i,e);if(i instanceof E2)return function(r,o){if(!A2(o.Ec))throw o.wc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.wc(`${r._methodName}() is not currently supported inside arrays`);const c=r._toFieldTransform(o);c&&o.fieldTransforms.push(c)}(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,o){const c=[];let f=0;for(const p of r){let g=T2(p,o.yc(f));g==null&&(g={nullValue:"NULL_VALUE"}),c.push(g),f++}return{arrayValue:{values:c}}}(i,e)}return function(r,o){if((r=ei(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return K4(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const c=Ot.fromDate(r);return{timestampValue:Xd(o.serializer,c)}}if(r instanceof Ot){const c=new Ot(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Xd(o.serializer,c)}}if(r instanceof zs)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof qi)return{bytesValue:Xx(o.serializer,r._byteString)};if(r instanceof An){const c=o.databaseId,f=r.firestore._databaseId;if(!f.isEqual(c))throw o.wc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:qp(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof Fs)return function(f,p){return{mapValue:{fields:{[wx]:{stringValue:Sx},[Fd]:{arrayValue:{values:f.toArray().map(y=>{if(typeof y!="number")throw p.wc("VectorValues must only contain numeric values.");return zp(p.serializer,y)})}}}}}}(r,o);throw o.wc(`Unsupported field value: ${Op(r)}`)}(i,e)}function R2(i,e){const n={};return gx(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):yo(i,(r,o)=>{const c=T2(o,e.Vc(r));c!=null&&(n[r]=c)}),{mapValue:{fields:n}}}function C2(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof Ot||i instanceof zs||i instanceof qi||i instanceof An||i instanceof E2||i instanceof Fs)}function I2(i,e,n){if(!C2(n)||!mx(n)){const r=Op(n);throw r==="an object"?e.wc(i+" a custom object"):e.wc(i+" "+r)}}function dk(i,e,n){if((e=ei(e))instanceof og)return e._internalPath;if(typeof e=="string")return k2(i,e);throw Qd("Field path arguments must be of type string or ",i,!1,void 0,n)}const hk=new RegExp("[~\\*/\\[\\]]");function k2(i,e,n){if(e.search(hk)>=0)throw Qd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new og(...e.split("."))._internalPath}catch{throw Qd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function Qd(i,e,n,r,o){const c=r&&!r.isEmpty(),f=o!==void 0;let p=`Function ${e}() called with invalid data`;n&&(p+=" (via `toFirestore()`)"),p+=". ";let g="";return(c||f)&&(g+=" (found",c&&(g+=` in field ${r}`),f&&(g+=` in document ${o}`),g+=")"),new je(pe.INVALID_ARGUMENT,p+i+g)}function fk(i,e){return i.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(e,n,r,o,c){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new An(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new mk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(j2("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class mk extends N2{data(){return super.data()}}function j2(i,e){return typeof e=="string"?k2(i,e):e instanceof og?e._internalPath:e._delegate._internalPath}class pk{convertValue(e,n="none"){switch(Aa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Jt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ea(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ue(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return yo(e,(o,c)=>{r[o]=this.convertValue(c,n)}),r}convertVectorValue(e){var n,r,o;const c=(o=(r=(n=e.fields)===null||n===void 0?void 0:n[Fd].arrayValue)===null||r===void 0?void 0:r.values)===null||o===void 0?void 0:o.map(f=>Jt(f.doubleValue));return new Fs(c)}convertGeoPoint(e){return new zs(Jt(e.latitude),Jt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=ch(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Hc(e));default:return null}}convertTimestamp(e){const n=Sa(e);return new Ot(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=zt.fromString(e);_t(Jx(r),9688,{name:e});const o=new qc(r.get(1),r.get(3)),c=new Oe(r.popFirst(5));return o.isEqual(n)||Or(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gk(i,e,n){let r;return r=i?i.toFirestore(e):e,r}class Tc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ro extends N2{constructor(e,n,r,o,c,f){super(e,n,r,o,f),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Rd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(j2("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new je(pe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ro._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ro._jsonSchemaVersion="firestore/documentSnapshot/1.0",ro._jsonSchema={type:an("string",ro._jsonSchemaVersion),bundleSource:an("string","DocumentSnapshot"),bundleName:an("string"),bundle:an("string")};class Rd extends ro{data(e={}){return super.data(e)}}class Mc{constructor(e,n,r,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new Tc(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Rd(this._firestore,this._userDataWriter,r.key,r,new Tc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new je(pe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(o,c){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map(p=>{const g=new Rd(o._firestore,o._userDataWriter,p.doc.key,p.doc,new Tc(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);return p.doc,{type:"added",doc:g,oldIndex:-1,newIndex:f++}})}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(p=>c||p.type!==3).map(p=>{const g=new Rd(o._firestore,o._userDataWriter,p.doc.key,p.doc,new Tc(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,x=-1;return p.type!==0&&(y=f.indexOf(p.doc.key),f=f.delete(p.doc.key)),p.type!==1&&(f=f.add(p.doc),x=f.indexOf(p.doc.key)),{type:yk(p.type),doc:g,oldIndex:y,newIndex:x}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new je(pe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Mc._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Dp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],o=[];return this.docs.forEach(c=>{c._document!==null&&(n.push(c._document),r.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),o.push(c.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function yk(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ue(61501,{type:i})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ln(i){i=zc(i,An);const e=zc(i.firestore,ag);return nk(S2(e),i._key).then(n=>_k(e,i,n))}Mc._jsonSchemaVersion="firestore/querySnapshot/1.0",Mc._jsonSchema={type:an("string",Mc._jsonSchemaVersion),bundleSource:an("string","QuerySnapshot"),bundleName:an("string"),bundle:an("string")};class vk extends pk{constructor(e){super(),this.firestore=e}convertBytes(e){return new qi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new An(this.firestore,null,n)}}function os(i,e,n){i=zc(i,An);const r=zc(i.firestore,ag),o=gk(i.converter,e);return bk(r,[uk(ck(r),"setDoc",i._key,o,i.converter!==null,n).toMutation(i._key,kr.none())])}function bk(i,e){return function(r,o){const c=new ba;return r.asyncQueue.enqueueAndForget(async()=>F6(await ek(r),o,c)),c.promise}(S2(i),e)}function _k(i,e,n){const r=n.docs.get(e._key),o=new vk(i);return new ro(i,o,e._key,r,new Tc(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(o){xl=o})(bl),Hs(new ds("firestore",(r,{instanceIdentifier:o,options:c})=>{const f=r.getProvider("app").getImmediate(),p=new ag(new a4(r.getProvider("auth-internal")),new c4(f,r.getProvider("app-check-internal")),function(y,x){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new je(pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new qc(y.options.projectId,x)}(f,o),f);return c=Object.assign({useFetchStreams:n},c),p._setSettings(c),p},"PUBLIC").setMultipleInstances(!0)),Gi(w1,S1,e),Gi(w1,S1,"esm2017")})();const xk={apiKey:"AIzaSyApj9cFUaYnRAZq4Hjab0NMtCJo7OwCG1w",authDomain:"roversa-2c5fd.firebaseapp.com",projectId:"roversa-2c5fd",storageBucket:"roversa-2c5fd.firebasestorage.app",messagingSenderId:"261909236286",appId:"1:261909236286:web:3714d3511e6a5c980a1f6f",measurementId:"G-NX72JNWMM2"},cg=e_(xk);BR(cg);const jt=n4(cg),Kt=sk(cg),bh="/dashboard/assets/Official_Logo_White-bdZT6TWh.png";function wk(){const i=Zs(),[e,n]=C.useState(null);return C.useEffect(()=>{Ip(jt,r=>{r&&i("/dashboard")})}),d.jsxs("div",{className:"home-container",children:[d.jsxs("div",{className:"home-header slide-in-from-top",children:[d.jsx("div",{className:"logo",onClick:()=>i("/"),style:{cursor:"pointer"},children:d.jsx("img",{src:bh,alt:"Roversa Robotics"})}),d.jsx("div",{className:"header-nav",children:d.jsx("button",{className:"nav-button fade-in-scale animate-on-mount-delay-1",onClick:()=>i("/login"),children:"Login"})})]}),d.jsx("div",{className:"home-content slide-in-from-bottom",children:d.jsx("div",{className:"hero-section",children:d.jsxs("div",{className:"hero-content",children:[d.jsx("h1",{className:"animate-on-mount-delay-2",children:"Welcome to Roversa Dashboard"}),d.jsx("div",{className:"hero-buttons",children:d.jsx("button",{className:"secondary-btn fade-in-scale animate-on-mount-delay-3",onClick:()=>i("/login"),children:"Sign In"})})]})})})]})}function Sk(){const i=Zs(),[e,n]=C.useState(""),[r,o]=C.useState(""),[c,f]=C.useState(""),[p,g]=C.useState(null),y=async()=>{try{const x=await FC(jt,e,r);i("/dashboard")}catch{f("Invalid login credentials")}};return C.useEffect(()=>{Ip(jt,x=>{x&&i("/dashboard")})}),d.jsxs("div",{className:"login-container",children:[d.jsxs("div",{className:"login-header slide-in-from-top",children:[d.jsx("div",{className:"logo",onClick:()=>i("/"),style:{cursor:"pointer"},children:d.jsx("img",{src:bh,alt:"Roversa Robotics"})}),d.jsx("div",{className:"header-nav",children:d.jsx("button",{className:"nav-button active fade-in-scale animate-on-mount-delay-1",children:"Login"})})]}),d.jsx("div",{className:"login-content slide-in-from-bottom",children:d.jsxs("div",{className:"login-card fade-in-scale animate-on-mount-delay-2",children:[d.jsxs("div",{className:"login-title animate-on-mount-delay-3",children:[d.jsx("h1",{children:"Welcome Back"}),d.jsx("p",{children:"Sign in to your account"})]}),c&&d.jsx("div",{className:"error-message animate-on-mount-delay-4",children:c}),d.jsxs("div",{className:"login-form",children:[d.jsxs("div",{className:"input-group animate-on-mount-delay-4",children:[d.jsx("label",{htmlFor:"email",children:"Email"}),d.jsx("input",{type:"email",id:"email",placeholder:"Enter your email",className:"login-input",value:e,onChange:x=>n(x.target.value)})]}),d.jsxs("div",{className:"input-group animate-on-mount-delay-5",children:[d.jsx("label",{htmlFor:"password",children:"Password"}),d.jsx("input",{type:"password",id:"password",placeholder:"Enter your password",className:"login-input",value:r,onChange:x=>o(x.target.value)})]}),d.jsx("button",{className:"login-submit-btn fade-in-scale animate-on-mount-delay-6",onClick:y,children:"Sign In"})]}),d.jsx("div",{className:"signup-link animate-on-mount-delay-7",children:d.jsxs("p",{children:["Don't have an account? ",d.jsx("button",{className:"link-button",onClick:()=>i("/signup"),children:"Sign up"})]})})]})})]})}function Ek(){const i=Zs(),[e,n]=C.useState(""),[r,o]=C.useState(""),[c,f]=C.useState(""),[p,g]=C.useState(""),[y,x]=C.useState(null),S=async()=>{try{const A=await zC(jt,r,c);await os(Zt(Kt,"users",A.user.uid,"profile"),{name:e,email:r}),console.log("Profile written:",{name:e,email:r}),await new Promise(F=>setTimeout(F,1e3)),i("/dashboard")}catch(A){g(A.message)}};return C.useEffect(()=>{Ip(jt,A=>{A&&i("/dashboard")})}),d.jsxs("div",{className:"signup-container",children:[d.jsxs("div",{className:"signup-header slide-in-from-top",children:[d.jsx("div",{className:"logo",onClick:()=>i("/"),style:{cursor:"pointer"},children:d.jsx("img",{src:bh,alt:"Roversa Robotics"})}),d.jsx("div",{className:"header-nav",children:d.jsx("button",{className:"nav-button fade-in-scale animate-on-mount-delay-1",onClick:()=>i("/login"),children:"Login"})})]}),d.jsx("div",{className:"signup-content slide-in-from-bottom",children:d.jsxs("div",{className:"signup-card fade-in-scale animate-on-mount-delay-2",children:[d.jsxs("div",{className:"signup-title animate-on-mount-delay-3",children:[d.jsx("h1",{children:"Create Account"}),d.jsx("p",{children:"Let's make your classroom experience easy"})]}),p&&d.jsx("div",{className:"error-message animate-on-mount-delay-4",children:p}),d.jsxs("div",{className:"signup-form",children:[d.jsxs("div",{className:"input-group animate-on-mount-delay-4",children:[d.jsx("label",{htmlFor:"name",children:"Name"}),d.jsx("input",{type:"text",id:"name",placeholder:"Enter your name",className:"signup-input",value:e,onChange:A=>n(A.target.value)})]}),d.jsxs("div",{className:"input-group animate-on-mount-delay-5",children:[d.jsx("label",{htmlFor:"email",children:"Email"}),d.jsx("input",{type:"email",id:"email",placeholder:"Enter your email",className:"signup-input",value:r,onChange:A=>o(A.target.value)})]}),d.jsxs("div",{className:"input-group animate-on-mount-delay-6",children:[d.jsx("label",{htmlFor:"password",children:"Password"}),d.jsx("input",{type:"password",id:"password",placeholder:"Create a password",className:"signup-input",value:c,onChange:A=>f(A.target.value)})]}),d.jsx("button",{className:"signup-submit-btn fade-in-scale animate-on-mount-delay-7",onClick:S,children:"Create Account"})]}),d.jsx("div",{className:"login-link animate-on-mount-delay-8",children:d.jsxs("p",{children:["Already have an account? ",d.jsx("button",{className:"link-button",onClick:()=>i("/login"),children:"Sign in"})]})})]})})]})}const Ak="/dashboard/assets/robotman-XVmXDZYK.png";function lu(){const i=Zs(),e=fs(),[n,r]=C.useState(null),[o,c]=C.useState(""),f=async()=>{try{await GC(jt),i("/login")}catch(p){console.error("Error signing out:",p)}};return C.useEffect(()=>{const p=jt.onAuthStateChanged(g=>{var y;g?(r(g),c(g.displayName||((y=g.email)==null?void 0:y.split("@")[0])||"User")):i("/login")});return()=>p()},[i]),d.jsxs("div",{className:"sidebar",children:[d.jsx("div",{className:"logo",style:{marginBottom:30},children:d.jsx("img",{src:bh,alt:"Roversa Robotics"})}),d.jsxs("nav",{className:"nav-menu",children:[d.jsx("div",{className:`nav-item${e.pathname==="/dashboard"?" active":""}`,onClick:()=>i("/dashboard"),style:{cursor:"pointer"},children:d.jsxs("span",{style:{display:"flex",alignItems:"center",gap:8},children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"20",height:"20",style:{marginRight:8},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"})}),"Home"]})}),d.jsx("div",{className:`nav-item${e.pathname.startsWith("/classrooms")?" active":""}`,onClick:()=>i("/classrooms"),children:d.jsxs("span",{style:{display:"flex",alignItems:"center",gap:8},children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"20",height:"20",style:{marginRight:8},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"})}),"Classrooms"]})}),d.jsx("div",{className:`nav-item${e.pathname.startsWith("/lessons")?" active":""}`,onClick:()=>i("/lessons"),style:{cursor:"pointer"},children:d.jsxs("span",{style:{display:"flex",alignItems:"center",gap:8},children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"20",height:"20",style:{marginRight:8},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.26 10.147a60.438 60.438 0 0 0-.491 6.347A48.62 48.62 0 0 1 12 20.904a48.62 48.62 0 0 1 8.232-4.41 60.46 60.46 0 0 0-.491-6.347m-15.482 0a50.636 50.636 0 0 0-2.658-.813A59.906 59.906 0 0 1 12 3.493a59.903 59.903 0 0 1 10.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0A50.717 50.717 0 0 1 12 13.489a50.702 50.702 0 0 1 7.74-3.342M6.75 15a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Zm0 0v-3.675A55.378 55.378 0 0 1 12 8.443m-7.007 11.55A5.981 5.981 0 0 0 6.75 15.75v-1.5"})}),"Lessons"]})}),d.jsx("div",{className:`nav-item${e.pathname.startsWith("/sessions")?" active":""}`,onClick:()=>i("/sessions"),children:d.jsxs("span",{style:{display:"flex",alignItems:"center",gap:8},children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"20",height:"20",style:{marginRight:8},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.383a14.406 14.406 0 0 1-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 1 0-7.517 0c.85.493 1.509 1.333 1.509 2.316V18"})}),"Sessions"]})}),d.jsx("div",{style:{height:"170px"}}),d.jsx("div",{className:"robotman-wrapper",style:{display:"flex",justifyContent:"flex-start",alignItems:"flex-end",marginTop:0,marginBottom:"0",height:"100px",marginLeft:0,marginRight:0},children:d.jsx("img",{src:Ak,alt:"Robotman",className:"robotman-img",style:{width:"250px",height:"auto",display:"block",marginLeft:"-19px"}})}),d.jsx("div",{className:"nav-item",style:{marginTop:"-50px",cursor:"pointer",opacity:.5,pointerEvents:"none"},children:d.jsxs("span",{style:{display:"flex",alignItems:"center",gap:8},children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"20",height:"20",style:{marginRight:8},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 7.5a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.5 19.5a7.5 7.5 0 0115 0v.75a.75.75 0 01-.75.75h-13.5a.75.75 0 01-.75-.75v-.75z"})}),"Profile"]})}),d.jsx("div",{className:"nav-item",style:{cursor:"pointer",opacity:.5,pointerEvents:"none"},children:d.jsxs("span",{style:{display:"flex",alignItems:"center",gap:8},children:[d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"20",height:"20",style:{marginRight:8},children:[d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.01c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.01 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.01 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.573 1.01c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.572-1.01c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.01-2.573c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.01-2.572c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.01z"}),d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Settings"]})}),d.jsx("div",{className:"nav-item logout",onClick:f,children:d.jsxs("span",{style:{display:"flex",alignItems:"center",gap:8},children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"20",height:"20",style:{marginRight:8},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 9V5.25A2.25 2.25 0 0 1 10.5 3h6a2.25 2.25 0 0 1 2.25 2.25v13.5A2.25 2.25 0 0 1 16.5 21h-6a2.25 2.25 0 0 1-2.25-2.25V15m-3 0-3-3m0 0 3-3m-3 3H15"})}),"Log out"]})})]})]})}const Tk="/dashboard/assets/tent-DiHh0Yjx.png",Rk=(i,e)=>{const n=new Date(i,e,1),o=new Date(i,e+1,0).getDate(),c=new Date(i,e,0).getDate(),f=n.getDay()===0?6:n.getDay()-1,p=[];let g=[],y=1;for(let x=0;x<6;x++){g=[];for(let S=0;S<7;S++){const A=x*7+S;A<f?g.push({day:c-(f-A-1),isCurrentMonth:!1}):y>o?(g.push({day:y-o,isCurrentMonth:!1}),y++):(g.push({day:y,isCurrentMonth:!0}),y++)}p.push(g)}return p},yb=["January","February","March","April","May","June","July","August","September","October","November","December"];function Ck({sessions:i=[]}){const e=new Date,[n,r]=C.useState(e.getFullYear()),[o,c]=C.useState(e.getMonth()),[f,p]=C.useState(2.5),g=C.useRef(null),y=C.useRef(null),x=C.useRef(null),[S,A]=C.useState(null),[F,G]=C.useState(!1),[q,K]=C.useState([]);let J=Rk(n,o);C.useEffect(()=>{var N;if(!g.current||!x.current)return;const be=1.1,M=1.4,R=.01;let I=be;for(let B=M;B>=be;B-=R){g.current.style.fontSize=`${B}rem`;const j=g.current.scrollWidth,Fe=x.current.offsetWidth-(((N=y.current)==null?void 0:N.offsetWidth)||0)-8;if(j<=Fe){I=B;break}}p(I);const L=new window.ResizeObserver(()=>{var j;let B=be;for(let Fe=M;Fe>=be;Fe-=R){g.current.style.fontSize=`${Fe}rem`;const $e=g.current.scrollWidth,ae=x.current.offsetWidth-(((j=y.current)==null?void 0:j.offsetWidth)||0)-8;if($e<=ae){B=Fe;break}}p(B)});return L.observe(x.current),()=>L.disconnect()},[o,n]);const Y=()=>{o===0?(c(11),r(n-1)):c(o-1)},z=()=>{o===11?(c(0),r(n+1)):c(o+1)},me=be=>{try{const R=new Date(n,o,be).toDateString();let I=0,L=0,N=0;return i.forEach(B=>{new Date(B.createdAt).toDateString()===R&&(B.status==="ended"?I++:B.status==="active"||B.status==="paused"?L++:B.status==="scheduled"&&N++)}),I>0||L>0||N>0?{past:I,active:L,scheduled:N}:null}catch(M){return console.error("Error getting session data:",M),null}},fe=be=>{try{const R=new Date(n,o,be).toDateString();return i.filter(I=>new Date(I.createdAt).toDateString()===R)}catch{return[]}};return d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"dashboard-calendar-card",children:[d.jsxs("div",{className:"calendar-header-row",ref:x,children:[d.jsxs("div",{className:"calendar-title",ref:g,style:{fontSize:`${f}rem`},children:[yb[o],", ",n]}),d.jsxs("div",{className:"calendar-arrows-group",ref:y,children:[d.jsx("button",{className:"calendar-arrow",onClick:Y,children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"})})}),d.jsx("button",{className:"calendar-arrow",onClick:z,children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})})})]})]}),d.jsx("div",{className:"calendar-subtitle",children:"Track your progress"}),d.jsx("div",{className:"calendar-grid",children:J.map((be,M)=>d.jsx("div",{className:"calendar-week",children:be.map((R,I)=>{const L=R.isCurrentMonth&&R.day===e.getDate()&&o===e.getMonth()&&n===e.getFullYear();return d.jsxs("div",{className:`calendar-day${R.isCurrentMonth?"":" calendar-day-outside"}${L?" calendar-day-today":""}`,onClick:()=>{R.isCurrentMonth&&(A(R.day),K(fe(R.day)),G(!0))},style:{cursor:R.isCurrentMonth?"pointer":"default"},children:[d.jsx("span",{children:R.day}),R.isCurrentMonth&&me(R.day)&&d.jsxs("div",{className:"calendar-day-dots",children:[Array.from({length:me(R.day).past||0},(N,B)=>d.jsx("div",{className:"calendar-day-dot-past"},`past-${B}`)),Array.from({length:me(R.day).active||0},(N,B)=>d.jsx("div",{className:"calendar-day-dot-active"},`active-${B}`)),Array.from({length:me(R.day).scheduled||0},(N,B)=>d.jsx("div",{className:"calendar-day-dot-scheduled"},`scheduled-${B}`))]})]},I)})},M))}),d.jsx("img",{src:Tk,alt:"Tent illustration for calendar",className:"calendar-tent-img",onError:be=>{be.target.style.display="none"}})]}),F&&PE.createPortal(d.jsx("div",{className:"modal-overlay",onClick:()=>G(!1),children:d.jsxs("div",{className:"modal-content",onClick:be=>be.stopPropagation(),style:{maxWidth:420,width:"90%",maxHeight:"80vh",overflowY:"auto",borderRadius:16},children:[d.jsx("div",{className:"modal-header",children:d.jsxs("h2",{style:{fontSize:"1.3rem",fontWeight:400,color:"#222",fontFamily:"Inter, sans-serif",textAlign:"center",margin:0},children:["Sessions on ",S," ",yb[o],", ",n]})}),d.jsx("div",{className:"modal-body",children:q.length===0?d.jsx("div",{style:{color:"#888",fontSize:15,fontFamily:"Open Sans, sans-serif",fontWeight:400,textAlign:"center",margin:"32px 0"},children:"No sessions on this day"}):d.jsx("div",{style:{display:"flex",flexDirection:"column",gap:16,width:"100%"},children:q.map(be=>d.jsxs("div",{style:{background:"#f7f8fa",borderRadius:10,padding:"12px 18px",border:"1px solid #e0e0e0",display:"flex",flexDirection:"column",gap:2},children:[d.jsx("div",{style:{fontWeight:700,color:"#4169e1",fontSize:15},children:be.name}),d.jsx("div",{style:{color:"#888",fontWeight:400,fontSize:13},children:be.status.charAt(0).toUpperCase()+be.status.slice(1)}),d.jsx("div",{style:{color:"#555",fontWeight:400,fontSize:12},children:be.block||be.blockName||be.classroomBlock||""})]},be.id))})})]})}),document.body)]})}const Ik="/dashboard/assets/chargingstation-DIe01uMz.png",kk="/dashboard/assets/dashboardbatterydesign-DalcyAxh.png",Nk="/dashboard/assets/excited_flower-DN0cCqXE.png",jk="/dashboard/assets/myrobots-BpXXry3c.png",Dk="/dashboard/assets/myclassrooms--acsbIcs.png",Ok="/dashboard/assets/accessguides-KOE7_o3r.png";function Mk(){const i=Zs(),[e,n]=C.useState(null),[r,o]=C.useState(""),[c,f]=C.useState([]),[p,g]=C.useState([]),[y,x]=C.useState([]),[S,A]=C.useState([]),[F,G]=C.useState(!1),q=C.useRef();function K({lastBatteryTime:Y,firstBatteryTime:z,lastProgramTime:me},fe=new Date){return!Y||(fe-new Date(Y))/1e3>10?"inactive_battery":me&&(fe-new Date(me))/1e3<=180?"active":me&&(fe-new Date(me))/1e3>180||!me&&z&&(fe-new Date(z))/1e3>180?"inactive":"inactive_battery"}function J(Y){if(Y.assignedTo&&typeof Y.assignedTo=="object"){if(Y.assignedTo.name)return Y.assignedTo.name;if(Y.assignedTo.group)return Y.assignedTo.group}return Y.assignedTo?Y.assignedTo:"Unassigned"}return C.useEffect(()=>{if(!F)return;function Y(z){q.current&&!q.current.contains(z.target)&&G(!1)}return document.addEventListener("mousedown",Y),()=>document.removeEventListener("mousedown",Y)},[F]),C.useEffect(()=>{const Y=async fe=>{if(!fe)return;const be=Zt(Kt,"users",fe.uid,"appdata","sessions"),M=await Ln(be);if(M.exists()){const R=M.data();g((R.sessions||[]).filter(N=>String(N.status)==="active")),x((R.sessions||[]).filter(N=>String(N.status)==="paused"));const I=(R.sessions||[]).filter(N=>String(N.status)==="ended");I.sort((N,B)=>new Date(B.endedAt||B.createdAt)-new Date(N.endedAt||N.createdAt)),f(I.slice(0,3));let L=[];(R.sessions||[]).forEach(N=>{N.robots&&Object.entries(N.robots).forEach(([B,j])=>{if(!j.batteryData||typeof j.batteryData.voltage!="number")return;const Fe=K(j);(j.batteryData.voltage<3.7||Fe==="inactive_battery")&&L.push({sessionName:N.name,sessionId:N.id,deviceId:B,robot:j})})}),A(L)}else g([]),x([]),f([]),A([])},z=async fe=>{var be;if(fe){try{const M=Zt(Kt,"users",fe.uid,"profile"),R=await Ln(M);if(R.exists()){const I=R.data();if(console.log("Profile loaded:",I),I.name&&I.name.trim()!==""){o(I.name);return}}}catch{}o(((be=fe.email)==null?void 0:be.split("@")[0])||"User")}},me=jt.onAuthStateChanged(fe=>{fe?(n(fe),z(fe),Y(fe)):i("/login")});return()=>me()},[i]),d.jsxs("div",{className:"dashboard-container",children:[d.jsx(lu,{className:"slide-in-from-left"}),F&&d.jsx("div",{className:"modal-overlay",onClick:()=>G(!1),children:d.jsxs("div",{className:"modal-content",ref:q,onClick:Y=>Y.stopPropagation(),style:{maxWidth:500,width:"90%",maxHeight:"80vh",overflowY:"auto",position:"relative",display:"flex",flexDirection:"column",alignItems:"center"},children:[d.jsx("div",{className:"modal-header",children:d.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:400,color:"#222",fontFamily:"Inter, sans-serif",textAlign:"center",margin:0},children:"Low Battery Robots"})}),d.jsx("div",{className:"modal-body",style:{width:"100%"},children:S.length===0?d.jsx("div",{style:{color:"#888",fontSize:16,fontFamily:"Open Sans, sans-serif",fontWeight:400,textAlign:"center",margin:"32px 0"},children:"All robots are sufficiently charged"}):d.jsx("div",{className:"robot-cards-container",style:{display:"flex",flexWrap:"wrap",gap:24,width:"100%",justifyContent:"center",alignItems:"flex-start"},children:S.map(({sessionName:Y,sessionId:z,deviceId:me,robot:fe},be)=>{var B;let I=0;typeof((B=fe.batteryData)==null?void 0:B.voltage)=="number"&&(I=Math.max(0,Math.min(1,(fe.batteryData.voltage-3.3)/(5-3.3))));const L=`${Math.round(I*100)}%`,N=J(fe);return d.jsxs("div",{className:"robot-card",style:{width:320,minHeight:70,background:"#fff",borderRadius:12,boxShadow:"0 2px 12px rgba(65, 105, 225, 0.08)",border:"2px solid #e0e0e0",padding:"16px 20px",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",position:"relative",textAlign:"left",gap:8},children:[d.jsxs("div",{className:"robot-card-info",style:{width:"70%",display:"flex",flexDirection:"column",alignItems:"flex-start",gap:2},children:[d.jsx("div",{style:{fontWeight:700,color:"#4169e1",fontSize:16,marginBottom:2,letterSpacing:.5},children:me}),d.jsx("div",{style:{color:"#555",fontWeight:500,fontSize:13,marginBottom:2,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:N}),d.jsx("div",{style:{color:"#888",fontWeight:400,fontSize:12,marginBottom:2,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:Y})]}),d.jsx("div",{style:{color:"#d32f2f",fontWeight:700,fontSize:20,minWidth:80,textAlign:"right"},children:L})]},z+"-"+me)})})})]})}),d.jsxs("div",{className:"main-content dashboard-home-main-content slide-in-from-bottom",children:[d.jsxs("div",{className:"dashboard-header slide-in-from-top",children:[d.jsxs("h1",{className:"dashboard-welcome",style:{fontFamily:"Bevan, serif",fontWeight:400},children:["Welcome, ",r,"!"]}),d.jsx("div",{className:"dashboard-subtitle",children:"Control the Classroom. Ignite the Circuit."})]}),d.jsxs("div",{style:{width:"100%"},children:[d.jsxs("div",{className:"dashboard-cards-row",style:{display:"flex",gap:24,marginBottom:0,paddingBottom:0},children:[d.jsxs("div",{className:"dashboard-card fade-in-scale animate-on-mount-delay-1",onClick:()=>i("/sessions"),style:{flex:"1 1 320px",minWidth:250,maxWidth:250},children:[d.jsx("img",{src:jk,alt:"My Sessions",className:"dashboard-card-bg"}),d.jsxs("div",{className:"dashboard-card-content",children:[d.jsx("div",{className:"dashboard-card-title",children:"My Sessions"}),d.jsx("div",{className:"dashboard-card-desc",children:"View and manage active sessions"})]})]}),d.jsxs("div",{className:"dashboard-card fade-in-scale animate-on-mount-delay-3",onClick:()=>i("/classrooms"),style:{flex:"1 1 320px",minWidth:250,maxWidth:250},children:[d.jsx("img",{src:Dk,alt:"My Classrooms",className:"dashboard-card-bg"}),d.jsxs("div",{className:"dashboard-card-content",children:[d.jsx("div",{className:"dashboard-card-title",children:"My Classrooms"}),d.jsx("div",{className:"dashboard-card-desc",children:"Manage your students and groups"})]})]}),d.jsxs("div",{className:"dashboard-card fade-in-scale animate-on-mount-delay-4",onClick:()=>i("/lessons"),style:{flex:"1 1 320px",minWidth:250,maxWidth:250},children:[d.jsx("img",{src:Ok,alt:"My Lessons",className:"dashboard-card-bg"}),d.jsxs("div",{className:"dashboard-card-content",children:[d.jsx("div",{className:"dashboard-card-title",children:"My Lessons"}),d.jsx("div",{className:"dashboard-card-desc",children:"View and manage lessons"})]})]}),d.jsx("div",{className:"dashboard-calendar-card animate-on-mount-delay-5",style:{minWidth:220,maxWidth:320,marginLeft:12,display:"flex",flexDirection:"column",justifyContent:"flex-end"},children:d.jsx(Ck,{sessions:[...p,...y,...c]})})]}),d.jsxs("div",{style:{display:"flex",flexDirection:"row",gap:30,width:"100%",marginTop:0,alignItems:"flex-start"},children:[d.jsxs("div",{style:{minWidth:180,maxWidth:240,marginLeft:0,padding:0,background:"#fff",border:"1.5px solid #e0e0e0",boxShadow:"0 1px 4px rgba(65,105,225,0.04)",borderRadius:20,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start",overflow:"hidden",marginTop:"-32px"},children:[d.jsxs("div",{style:{width:"100%",background:"#fff",borderTopLeftRadius:20,borderTopRightRadius:20,display:"flex",flexDirection:"column",alignItems:"center",padding:"18px 0 0 0",position:"relative",minHeight:120},children:[d.jsx("img",{src:kk,alt:"Battery Design",style:{position:"absolute",top:-50,left:0,width:"100%",height:200,objectFit:"cover",zIndex:1,pointerEvents:"none",borderTopLeftRadius:20,borderTopRightRadius:20}}),d.jsx("img",{src:Ik,alt:"Charging Station",style:{width:170,height:140,objectFit:"cover",marginBottom:10,zIndex:400,position:"relative"}})]}),d.jsxs("div",{style:{padding:"0 14px 14px 14px",width:"100%",display:"flex",flexDirection:"column",alignItems:"center"},children:[d.jsx("h2",{style:{fontSize:"1.3rem",fontWeight:700,color:"#222",margin:"12px 0 6px 0",fontFamily:"Inter, sans-serif",textAlign:"center"},children:"Time to Charge?"}),d.jsx("div",{style:{color:"#555",fontSize:"0.80rem",fontFamily:"Inter, sans-serif",fontWeight:400,textAlign:"center",marginBottom:14,maxWidth:200},children:"Monitor your robots' battery life while they're in use."}),d.jsx("button",{style:{background:"#ff7a1a",color:"#fff",fontWeight:700,fontFamily:"Bevan, serif",fontSize:"0.85rem",border:"none",borderRadius:10,padding:"10px 0",width:"100%",marginTop:6,boxShadow:"0 2px 8px rgba(0,0,0,0.10)",cursor:"pointer",transition:"background 0.15s",outline:"none",letterSpacing:.5},onClick:()=>G(!0),children:"See Activity"})]})]}),d.jsx("div",{style:{flex:1,minWidth:340,maxWidth:520,marginTop:"-32px"},children:d.jsxs("div",{className:"dashboard-card active-sessions-section fade-in-scale animate-on-mount-delay-2",style:{padding:0,width:"100%",marginBottom:8,marginTop:0,display:"flex",flexDirection:"column",background:"#fff6fa",border:"2px solid #fff",borderRadius:20},children:[d.jsxs("div",{style:{padding:"22px 28px 0 28px",display:"flex",alignItems:"center",gap:14},children:[d.jsx("img",{src:Nk,alt:"Excited Flower",style:{width:80,height:105,marginRight:8,marginBottom:20,marginLeft:-10,flexShrink:0}}),d.jsxs("div",{style:{display:"flex",flexDirection:"column",flex:1},children:[d.jsx("h2",{style:{fontSize:"2rem",fontWeight:700,color:"#222",marginBottom:6,fontFamily:"Inter, sans-serif",textAlign:"left"},children:"Active Sessions"}),d.jsx("div",{style:{color:"#555",fontSize:"0.85rem",marginBottom:25,fontFamily:"Open Sans, sans-serif",textAlign:"left"},children:"Continue or manage your currently running or paused sessions"})]})]}),d.jsx("div",{className:"session-list",style:{padding:"0 28px 0 28px",width:"100%",marginTop:6},children:[...p,...y].length>0?[...p,...y].map((Y,z)=>d.jsxs("div",{className:`session-list-item ${Y.status}-session`,onClick:()=>i(`/sessions/${Y.id}`),style:{position:"relative",overflow:"hidden",marginBottom:10,borderRadius:8,background:"#fff",border:"1.5px solid #e0e0e0",boxShadow:"0 1px 4px rgba(65,105,225,0.04)",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"14px 24px",cursor:"pointer",fontFamily:"inherit",minWidth:0,width:"100%",boxSizing:"border-box"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:18,minWidth:0},children:[d.jsx("span",{className:`status-badge ${Y.status}`,style:{fontSize:13,padding:"3px 12px",borderRadius:5,marginRight:8,marginLeft:8,marginTop:18,flexShrink:0},children:Y.status==="active"?"Active":Y.status==="paused"?"Paused":Y.status}),d.jsx("span",{style:{fontWeight:700,fontSize:"1.18rem",color:"#222",fontFamily:"Inter, sans-serif",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:220},children:Y.name}),d.jsxs("span",{className:"session-time",style:{color:"#888",fontSize:"0.93rem",fontFamily:"Inter, sans-serif",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:180},children:["Started: ",new Date(Y.createdAt).toLocaleDateString()]})]}),Y.status==="paused"&&null]},Y.id)):d.jsxs("div",{className:"session-list-item session-card-empty animate-on-mount-delay-2",style:{textAlign:"center",padding:40,color:"#888",fontFamily:"inherit"},children:[d.jsx("h3",{style:{color:"#888",fontWeight:500,fontSize:"1.1rem"},children:"No Active or Paused Sessions"}),d.jsx("p",{style:{color:"#bbb",fontSize:14},children:"Start or resume a session to see it here."})]})}),d.jsx("div",{style:{margin:"10px 28px 18px 0",textAlign:"right"},children:d.jsx("button",{style:{background:"#ff7a1a",color:"#fff",fontWeight:700,fontFamily:"Bevan, serif",fontSize:"0.75rem",border:"none",borderRadius:10,padding:"12px 0",width:"100%",marginTop:8,marginRight:28,boxShadow:"0 2px 8px rgba(0,0,0,0.10)",cursor:"pointer",transition:"background 0.15s",outline:"none",letterSpacing:.5},onClick:()=>i("/sessions"),children:"View All Sessions"})})]})}),d.jsx("div",{className:"dashboard-calendar-card animate-on-mount-delay-5",style:{minWidth:220,maxWidth:320,marginTop:"20px",marginLeft:20,display:"flex",flexDirection:"column",justifyContent:"flex-end"},children:d.jsxs("div",{className:"recent-sessions-section",style:{marginTop:0},children:[d.jsx("h2",{className:"recent-sessions-title",style:{fontSize:"1.5rem",fontWeight:700,color:"#222",marginBottom:6},children:"Recent Sessions"}),d.jsx("div",{className:"recent-sessions-subtitle",style:{color:"#555",fontSize:"0.85rem",marginBottom:24},children:"View student progress on most recently assigned sessions"}),d.jsx("div",{className:"recent-sessions-list",children:c.length>0?c.map((Y,z)=>{const me=Y.block||Y.blockName||(Y.classroomBlock?Y.classroomBlock:null),be=new Date(Y.endedAt||Y.createdAt).toLocaleDateString("en-GB",{day:"2-digit",month:"long"});return d.jsx("div",{className:`recent-session-card slide-in-from-right animate-on-mount-delay-${5+z}`,onClick:()=>i(`/sessions/${Y.id}`),style:{cursor:"pointer",position:"relative"},children:d.jsxs("div",{className:"recent-session-card-main",children:[d.jsxs("div",{className:"recent-session-card-info",children:[d.jsx("div",{className:"recent-session-card-title",style:{fontWeight:700,fontSize:"1.18rem",color:"#222",marginBottom:4},children:Y.name}),d.jsxs("div",{className:"recent-session-card-meta",style:{color:"#888",fontSize:"1.02rem",marginBottom:10},children:[d.jsx("span",{children:be}),me&&d.jsx("span",{className:"dot-separator",children:"•"}),me&&d.jsx("span",{children:me})]}),d.jsxs("div",{className:"recent-session-progress-bar",children:[d.jsx("div",{className:"recent-session-progress-bar-inner"}),d.jsx("div",{className:"recent-session-progress-dot"})]})]}),d.jsx("div",{className:"recent-session-card-menu",children:d.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[d.jsx("circle",{cx:"12",cy:"5",r:"1.5",fill:"#888"}),d.jsx("circle",{cx:"12",cy:"12",r:"1.5",fill:"#888"}),d.jsx("circle",{cx:"12",cy:"19",r:"1.5",fill:"#888"})]})})]})},Y.id)}):d.jsx("div",{className:"recent-session-item no-sessions animate-on-mount-delay-5",children:"No recent sessions"})})]})})]})]})]})]})}function Lk(){const i=Zs(),e=fs(),[n,r]=C.useState(!1),[o,c]=C.useState(""),[f,p]=C.useState([]),[g,y]=C.useState([]),[x,S]=C.useState(null),[A,F]=C.useState([]),[G,q]=C.useState(""),[K,J]=C.useState(""),[Y,z]=C.useState(!1),[me,fe]=C.useState(null),[be,M]=C.useState(!1),[R,I]=C.useState(null),L=async ie=>{if(!ie)return;const Ae=Zt(Kt,"users",ie.uid,"appdata","classrooms"),D=await Ln(Ae);D.exists()?F(D.data().classrooms||[]):F([])},N=ie=>{if(!ie)return null;const Ae=A.find(D=>D.id===ie);return Ae?Ae.name:null},B=async()=>{var ee,_e;const ie=jt.currentUser;if(!ie)return;const Ae=Zt(Kt,"users",ie.uid,"appdata","sessions"),D=await Ln(Ae);let P=[];if(D.exists()&&(P=D.data().sessions||[]),P.find(Se=>Se.status==="active")){fe({id:Date.now().toString(),name:o,classroomId:G||null,createdAt:new Date().toISOString(),createdBy:(ee=jt.currentUser)==null?void 0:ee.email,status:"active"}),z(!0);return}j({id:Date.now().toString(),name:o,classroomId:G||null,createdAt:new Date().toISOString(),createdBy:(_e=jt.currentUser)==null?void 0:_e.email,status:"active"})},j=async ie=>{const Ae=jt.currentUser,D=Zt(Kt,"users",Ae.uid,"appdata","sessions"),P=await Ln(D);let oe=[];P.exists()&&(oe=P.data().sessions||[]),console.log("Sessions.jsx: sessions before:",oe),console.log("Sessions.jsx: newSession:",ie),oe.push(ie),await os(D,{sessions:oe}),console.log("Sessions.jsx: sessions after:",oe),p([ie,...f]),r(!1),c(""),q(""),console.log("Sessions.jsx: navigating to sessionId:",ie.id),i(`/sessions/${ie.id}?name=${encodeURIComponent(ie.name)}`)},Fe=async ie=>{if(!ie)return;const Ae=Zt(Kt,"users",ie.uid,"appdata","sessions"),D=await Ln(Ae);if(D.exists()){const P=D.data(),oe=(P.sessions||[]).filter(Se=>String(Se.status)==="active"),ee=(P.sessions||[]).filter(Se=>String(Se.status)==="paused"),_e=(P.sessions||[]).filter(Se=>String(Se.status)==="ended");p([...oe,...ee]),y(_e)}else p([]),y([])},$e=ie=>{I(ie),M(!0)};C.useEffect(()=>{const ie=jt.onAuthStateChanged(Ae=>{Ae?S(Ae):i("/login")});return()=>ie()},[i]),C.useEffect(()=>{const ie=jt.onAuthStateChanged(Ae=>{Ae?(S(Ae),Fe(Ae),L(Ae)):i("/login")});return()=>ie()},[i]),C.useEffect(()=>{Fe(x)},[e.pathname,x]),C.useEffect(()=>{L(x)},[x]);const he=[...f.filter(ie=>ie.status==="active"),...f.filter(ie=>ie.status==="paused"),...g].filter(ie=>{const Ae=ie.name.toLowerCase().includes(K.toLowerCase()),P=(ie.classroomId&&N(ie.classroomId)||"").toLowerCase().includes(K.toLowerCase());return Ae||P});return d.jsxs("div",{className:"dashboard-container",children:[d.jsx(lu,{className:"slide-in-from-left"}),d.jsxs("div",{className:"main-content slide-in-from-bottom",children:[d.jsxs("div",{className:"top-bar slide-in-from-top",style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:24,marginBottom:32},children:[d.jsx("h1",{style:{margin:0,fontSize:"2rem",fontWeight:700,color:"#222"},children:"Sessions"}),d.jsxs("button",{className:"create-session-btn fade-in-scale animate-on-mount-delay-1",style:{display:"flex",alignItems:"center",gap:8},onClick:()=>r(!0),children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",width:"20",height:"20",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),"Create Session"]})]}),d.jsxs("div",{className:"sessions-content",children:[d.jsx("div",{style:{marginBottom:24,display:"flex",width:"45%"},children:d.jsxs("div",{style:{display:"flex",alignItems:"center",background:"#fff",borderRadius:8,border:"1.5px solid #e0e0e0",boxShadow:"0 1px 4px rgba(65,105,225,0.04)",width:"100%",maxWidth:"100%"},children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:20,height:20,color:"#666",marginLeft:14,marginRight:8},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})}),d.jsx("input",{type:"text",placeholder:"Search sessions by name or classroom...",value:K,onChange:ie=>J(ie.target.value),style:{padding:"10px 16px",border:"none",outline:"none",fontSize:"1rem",width:"100%",background:"transparent",color:"#222",borderRadius:8}})]})}),d.jsx("div",{className:"session-list",children:he.length>0?he.map((ie,Ae)=>d.jsxs("div",{className:`session-list-item ${ie.status}-session slide-in-from-right animate-on-mount-delay-${3+Ae}`,onClick:()=>i(`/sessions/${ie.id}`),style:{position:"relative",overflow:"hidden"},children:[d.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%"},children:d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:18},children:[d.jsx("span",{className:`status-badge ${ie.status}`,children:ie.status==="active"?"Active":ie.status==="paused"?"Paused":ie.status==="ended"?"Ended":ie.status}),d.jsx("span",{style:{fontWeight:600,fontSize:"1.15rem",color:"#222"},children:ie.name}),d.jsxs("span",{className:"session-time",style:{color:"#888",fontSize:13},children:["Started: ",new Date(ie.createdAt).toLocaleString()]}),ie.classroomId&&d.jsx("span",{className:"classroom-badge",style:{background:"#e3eafe",color:"#4169e1",padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"500"},children:N(ie.classroomId)})]})}),d.jsx("div",{className:"delete-area",onClick:D=>{D.stopPropagation(),$e(ie.id)},title:"Delete session",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"trash-icon",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})})})]},ie.id)):K.trim()?d.jsxs("div",{className:"session-list-item session-card-empty animate-on-mount-delay-3",style:{textAlign:"center",padding:40},children:[d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"#b0b0b0",width:"40",height:"40",style:{marginBottom:12},children:[d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6l4 2"}),d.jsx("circle",{cx:"12",cy:"12",r:"9",stroke:"#b0b0b0",strokeWidth:"1.5",fill:"none"})]}),d.jsx("h3",{style:{color:"#888",fontWeight:500},children:"No Sessions Found"}),d.jsx("p",{style:{color:"#bbb"},children:"Try using a different query..."})]}):d.jsxs("div",{className:"session-list-item session-card-empty animate-on-mount-delay-3",style:{textAlign:"center",padding:40},children:[d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"#b0b0b0",width:"40",height:"40",style:{marginBottom:12},children:[d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6l4 2"}),d.jsx("circle",{cx:"12",cy:"12",r:"9",stroke:"#b0b0b0",strokeWidth:"1.5",fill:"none"})]}),d.jsx("h3",{style:{color:"#888",fontWeight:500},children:"No Sessions"}),d.jsx("p",{style:{color:"#bbb"},children:"Start a new session to begin"})]})})]})]}),n&&d.jsx("div",{className:"modal-overlay fade-in-scale",onClick:()=>{r(!1),c(""),q("")},children:d.jsxs("div",{className:"modal-content create-classroom-modal",onClick:ie=>ie.stopPropagation(),children:[d.jsxs("div",{className:"modal-header",children:[d.jsx("h2",{children:"Create New Session"}),d.jsx("button",{className:"modal-close",onClick:()=>{r(!1),c(""),q("")},children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"20",height:"20",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),d.jsxs("div",{className:"modal-body",children:[d.jsxs("div",{className:"form-group",children:[d.jsxs("label",{children:["Session Name ",d.jsx("span",{style:{color:"red"},children:"*"})]}),d.jsx("input",{type:"text",value:o,onChange:ie=>c(ie.target.value),placeholder:"Enter session name",onKeyPress:ie=>ie.key==="Enter"&&o.trim()&&B()})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Classroom (Optional)"}),d.jsxs("select",{value:G,onChange:ie=>q(ie.target.value),className:"form-control",children:[d.jsx("option",{value:"",children:"Select a Classroom"}),A.map(ie=>d.jsx("option",{value:ie.id,children:ie.name},ie.id))]})]})]}),d.jsxs("div",{className:"modal-footer",children:[d.jsx("button",{className:"btn-secondary",onClick:()=>{r(!1),c(""),q("")},children:"Cancel"}),d.jsx("button",{className:"btn-primary",style:{background:o.trim()?"#4169e1":"#e0e0e0",borderColor:o.trim()?"#4169e1":"#e0e0e0",color:o.trim()?"#fff":"#b0b0b0",cursor:o.trim()?"pointer":"not-allowed",fontFamily:"Space Mono, monospace"},onClick:B,disabled:!o.trim(),children:"Create"})]})]})}),Y&&d.jsx("div",{className:"modal-overlay fade-in-scale",onClick:()=>{z(!1),fe(null)},children:d.jsxs("div",{className:"modal-content",onClick:ie=>ie.stopPropagation(),children:[d.jsx("div",{className:"modal-header",children:d.jsx("h2",{children:"Active Session Detected"})}),d.jsx("div",{className:"modal-body",children:d.jsx("p",{children:"There is already an active running session. If you create this session, the active session will be paused. Proceed?"})}),d.jsxs("div",{className:"modal-footer",children:[d.jsx("button",{className:"btn-secondary",onClick:()=>{z(!1),fe(null)},children:"Cancel"}),d.jsx("button",{className:"btn-primary",onClick:async()=>{const ie=jt.currentUser;if(!ie)return;const Ae=Zt(Kt,"users",ie.uid,"appdata","sessions"),D=await Ln(Ae);if(D.exists()){const oe=D.data().sessions||[],ee=oe.findIndex(_e=>_e.status==="active");ee!==-1&&(oe[ee].status="paused",await os(Ae,{sessions:oe}))}z(!1),me&&(await j(me),fe(null)),await Fe(ie)},children:"Proceed"})]})]})}),be&&d.jsx("div",{className:"modal-overlay fade-in-scale",onClick:()=>{M(!1),I(null)},children:d.jsxs("div",{className:"modal-content",onClick:ie=>ie.stopPropagation(),children:[d.jsx("div",{className:"modal-header",children:d.jsx("h2",{children:"Delete Session"})}),d.jsx("div",{className:"modal-body",children:d.jsx("p",{children:"Are you sure you want to delete this session? This action cannot be undone."})}),d.jsxs("div",{className:"modal-footer",children:[d.jsx("button",{className:"btn-secondary",onClick:()=>{M(!1),I(null)},children:"Cancel"}),d.jsx("button",{className:"btn-primary",style:{background:"#dc3545",borderColor:"#dc3545"},onClick:async()=>{const ie=jt.currentUser;if(!ie)return;const Ae=Zt(Kt,"users",ie.uid,"appdata","sessions"),D=await Ln(Ae);if(D.exists()){const ee=(D.data().sessions||[]).filter(_e=>String(_e.id)!==String(R));await os(Ae,{sessions:ee})}M(!1),I(null),await Fe(ie)},children:"Delete"})]})]})})]})}let Cd=null,Lc=null;function Vk(i){Cd=i}function Pk(i){Lc=i}function Uk(){return Lc}async function vb(){try{Lc&&(await Lc.cancel(),Lc=null),Cd&&(await Cd.close(),Cd=null)}catch{}}const Dm="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAACWCAMAAAAL34HQAAAAIGNIUk0AAHomAACAhAAA+gAAAIDoAAB1MAAA6mAAADqYAAAXcJy6UTwAAAHjUExURQAAABfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRjAZr3t1DvKff////v+/ZzkvSfEcO/79HrbpxvBZ9v151nSkDLHd3csD88AAACTdFJOUwAraa3O4vfNq2gpGqnr6qdmFjCm+vieLQFPw7tGPdgyCZL++4EFMd3QJ3ljmn+Pl4J+Yl4q9SUK2tWIIh62NrysNSaiEvEHZ1GxBuM7b1Sjh8mw3/Ts8ta9upZkA/CqoGBVEAtMPALbXEnXyD6YDd75IGxTdYWE/D/u1BwIfHcZn5sswLLgOZHliR9Kc53G7ZlFG34nhJYAAAABYktHRJfmbhuvAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH6QcTFCU033vrdQAAAyR6VFh0UmF3IHByb2ZpbGUgdHlwZSB4bXAAAEiJnVZBkuMgDLzrFfsEkEDCz3FsuG3VHvf528JxjGeY1OwkFScxQmq1WsL09/cf+oVXjKWQbNKsWNCoog/Nljgoa1bTRavsbLU9Ho/GhvuLJr+TTXLaJaTdQhLYFl0oFVsNG7PYmmpOim84FMEmNmlSwyqbFVmtKDbq7sE0cvD/umk18TXyCECTtDkOWY+FlzmQPF0xbFTWzCkl/eAGa4RFd1Us4R1kxdZm/cXVYMVVGwyNm0RZ/I1fQRhXxnU/AvBOJgYuPLoV3j0C1juKsHK4kAAGqEHirIsF2C/IoQLZc52QFiMmEnFkbL79DjzFjhYOlD+j76GrRrqM3NkzTkUFm+4wA3swRFpcJZyMeSjZbgFWSt30XB6TySisxWtlXAPa5UrLxUPIBhtyMmSOqrlKuLPh6TKQ5QvF6e6OJTlvGRwhoQyhVbCMakhmSE1Sv6ps3Gbbrl1nCJrGyNB6Sq5jZ0s0CgQMvrxou4hAtoKS427AL4RGapKluA5grsAAgUvBO+BuwpYywTSEuVKmCR74PczglvtHcV3EcUUEWjw4Qt1C0H3rO1LRhygAkJdXaZzXpzt6bziWnttY/FEwvkIzzUx4GdQ2urwah8bO+f8OuxqMvuow9RJ/nguhy3S7ZoLb4QpBbhAWpo9PgFdXxXtXdaer48FnG7m7sHuvbZbedlTH2f9FrWqOs48c1zZkigLBA3lk8zwVbHjfxc5A67k7JxAO3O8IEOVN7ehWgxs6X5knNasb3evx87rR15MRkkyziX7OxPPAOMYg+Rw8tjwrJveKPd35wPUJWrzsUrNP0Op8ej/gmFoOjqbGX6t4Rgb9RMUzMug4J/0M/S4bnYwC/YTxUKCBjcPdOEyRVuegQZAVQxKChN7ADBef7GDJs/AZz8TQbo+IzsJhHJNpyqiYqS0wVn2w95dPB5xqOCUiBie+MgYOwD/AUvHHDteRCx95Jz6NFL7wNFLSpo1DH/P++LAdI1/2XoIP+OljAt+v1WiVmfzZ4nX708PLsTJ5gspHFmhfPh5+6B8dljH+sg7JVwAAAAFvck5UAc+id5oAAANnSURBVHja7duHUhRBEAbgEQ9MYEAPEEUliKgoiKAoKpgjinKcOecsJsw5Zx10zfqoclIWWLWhe6Z7dq5q/gfY+6rurw0zPUK4uLi4uLi4uLi4ZGuG5AxN5OZJVPJyhw0fMZKNNConvwAHGpzRY8aOY0AVjp+gbupPsqiY1lQysVTX1J9JkwlVZVNoUJkkphKhppVX0KmkrKyaTqGqnkGJyqRmpr5qFjUqk9m6qloOlZRztFAlTCop5+qw6rhUUtapq+r5VFLOU1U1cKqknK+makQ+krFpWqCiWtjMq5JykQprMbdKqV4t2i8M0UkuQbOW8qukzMeqlvlepvfjJ1JWRSOS1erP8j5/+UrpasOplvtfpdfzvG/ffxC6VqBYK4NZnvfzFx0L9WxclQxjeR5dxVavQbDWBlzkH4uwYusQrPVRLLqK1cJVG5qiWVQV2whnbQq6xn8sooq1gFntQBZJxTaDWVugLIqKdYBZW+Es/YptA7M6MSzdiiXArBSOpVexLjAr8BIBLL2KMbJ0KsbKUq8YM0u1YtwsxYrxs5QqZoKlUDEzLHTFDLGwFTPGwlXMIAtTMaMseMXMssAVM80CVsw8C1SxOFiAisXCiq5YTKyoisXGCq9YjKywisXJCqlYvKzAisXN6qvYb8fK6j/RysrbeYOw8nZq5cPHyke1nS82Vr4GWvnSbOUnhp0fZFZ+vlr5sW/l0oidC0lWLrtZuUhp5ZKunQvgVm4XWLm5YmQrKo1kaW3cpcGswFlhjm3O7WDWDgxLd1N4J5i1C87S30IvB7N2Q1kUAwfwgcpqIItkPAM+WbZnL4RFM8xSUAJmiX3RLKrRn/1wlTgQxaIblDqIYB0KmO6kHytLHUawRFsYi3IIrwijEkeCWbQji0dRrGPHA1jEA541KJUQJ/xZxOOw8iSSJU7R/r5/TmNV4owBVSV2drgvZ/lZ9XiVOHeeWwUfKBucwgu8qnS3Ektc5GVdUlMxn3u4rKqy9fiREFe4VFd1VEI09HCgehSPHg3k2nV6VVeZrkqIbvLH0I2b+iohbt1O6VMGkr6DOVAQlrv36FT3KU9XP3hIg3qEO6kSneKOx7qm5ipq1N88efpM3dT5nOpAtU9evHz1+g3ylvG29F37+w98JhcXFxcXFxcXFxcXl6zMH8sOCq3nAGlzAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDI1LTA3LTE5VDIwOjM1OjU5KzAwOjAwFCv9uwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyNS0wNy0xOVQyMDozNTo1OSswMDowMGV2RQcAAAAodEVYdGRhdGU6dGltZXN0YW1wADIwMjUtMDctMTlUMjA6Mzc6NTIrMDA6MDA0keAfAAAAFHRFWHRwZGY6QXV0aG9yAFNvbmEgVG9teTcubfgAAABddEVYdHhtcDpDcmVhdG9yVG9vbABDYW52YSAoUmVuZGVyZXIpIGRvYz1EQUdkWnB2eVJmayB1c2VyPVVBQzVUVWNHS244IGJyYW5kPUJBQzVUZkVnaExvIHRlbXBsYXRlPcsU5u0AAAAASUVORK5CYII=",Om="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAACWCAMAAAAL34HQAAAAIGNIUk0AAHomAACAhAAA+gAAAIDoAAB1MAAA6mAAADqYAAAXcJy6UTwAAALTUExURQAAAJmXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5+dnba1tcTDw9HR0d/e3uzs7Pn5+f///6KgoMPCwuPj4/39/ePi4sPBwaOiop2bm8XDw+rp6enp6ZuZmcLBwfX09PLy8r69vbu6uvDw8LOxsevr6+rq6rSzs9LR0czLy5yamt3c3NjX1+bl5aSiou7t7aqpqfT09Ofn59fW1tbV1cnIyMbFxbW0tP7+/qimpqmnp7a0tO3t7bm4uJqYmL++vry7u9zc3Pr6+vX19dPS0vPy8vz8/N/f39nY2KOhoc/Ozq+urqupqaakpO/v7/v7+728vLe2tubm5vPz86Gfn+jn59va2tXV1ff399TT06Wjo9rZ2aqoqN3d3d7d3ayqqqWkpMfFxeTk5MXExNDPz/n4+NHQ0Ao8SYwAAACTdFJOUwAraa3O4vfNq2gpGqnr6qdmFjCm+vieLQFPw7tGPdgyCZL++4EFMd3QJ3ljmn+Pl4J+Yl4q9SUK2tWIIh62NrysNSaiEvEHZ1GxBuM7b1Sjh8mw3/Ts8ta9upZkA/CqoGBVEAtMPALbXEnXyD6YDd75IGxTdYWE/D/u1BwIfHcZn5sswLLgOZHliR9Kc53G7ZlFG34nhJYAAAABYktHRJvv2FeEAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH6QcTFCco+UzVuAAAAyF6VFh0UmF3IHByb2ZpbGUgdHlwZSB4bXAAAEiJnVZBkuMwCLzzin2CBAjk5zi2dNuqPe7zt5Gd2J7xpGYnqdiOQdBAg0R/f/+hX/jkXCvJIt2rJ8sm9rDiysnYirlN1mRlb/3xeHR2vJ9M401xKbpK0tWTCnSrTaTVZ8fCIj5rK2q4w6AIFrFLl5ZmWbzK7NWw0NZwZplT/LfFmkvIKDwAjVoPHDJvgpc6kOymGDomc2FVtQ9mICMIw1R1xTfJjKXdx4ebQ4ubdSg6d8kyxRdPSRhXxnXdHPBKLo5chHevvIYHyAeKNHM6kAAGUoPA2SZP0J8QQwOyXU4Ii+ETgQQy9lh+Ba55oIUB48/oh+tmmQ6lMLb7aahgtxVqyB4UERY3Sc+MhStZLg5m0qH6FJ+DKSis50NylgHtdIQV5CFEgwVFHZGjasESHtmIcBnIyoHiae6KRSNvBTlCQAVEa8gyqiGFQTXRcTVZuN8tO1Y9XdCtjwKuq07DfMYCkwSKmlTgW/HWLDi2CoxJBSFW46iajEeIRETBFsETWAH1UPuM6eTmCJlu8IBfO5oSoeJnuE5wEW4cT+EgXV3Qdem7pKIPUQCkv75KE3ndzdF7xXPpuZ+LfyZMSOiOMzd5ObHtbPJoHDp3zv932NFg9FWHQVFu5kIaNF2OmRB6uIKQC3iC6RMT4NVV+dpVw+gcePBbzrk7sEevLa5vO2rgHP+yNfPAOUZOcNvA8RIWKDx7xAn6jb7LIwN9xB45AXFgfoWDLG9qR5caXNCF5D6ou7rRtR4/rxt9PRlBSb2b6M+Z+NwwtjFIMQe3JXvF5Fqx3VwM3JigNcourcQEbZHP6AdsU9OWo1vlr1l8lwz6CYvvkkHbPhl76HezMZJRwZ903hTolI3N3HmYIqyRgw5CNgxGEBJ8Q2a4xmRHliKKmPFMDO4Oj+gsbMZZ3bSgYm4+QdnswdFfMR2wq2GXyCqCW8HAAfgHslTj2BE8CuIjbuWnEkZynEaqLtY5jTEfx4dlG/myjhJ8wE8fA/h+rc5ahSnOFq/Xnw4vm+TmBFW2KNC+vB1+6B9daTIIi5FANAAAAAFvck5UAc+id5oAAAS1SURBVHja7dvnd5RFFMfxEQM2sKCBiKJSRFQURFAUC/aKooTYe+9iw95717sJbCZxAZEVBSMmGgIY47IrUTQkZAmoNBUxYsE/wax5kchhZ+6duXeVc+b7Pr/zOdk9z/OcZB6lQqFQKBQKhUKhrbVtumyb17UbkOrWdbvtd9hRjLRTl+49aKDO7bzLrrsJoHruvoe7qb38Xr15TQV79vE1tbfX3oyqvvvwoDLl7cuE2q9ffz4VwICB+3OoBh3Aico0+EB/1UHcqEwH+6qGSKgADvFCFQipAA71YQ2VUgEMdVcNk1MBHOaqGi6pAjjcTTWCeEumNvIIF9WRo2RVAEe5sI6WVjl9vUZ7PzDYyz+GzDpWXgXQnao6Lhcq6D+CyDo+JywYQ1OdkBsVwIkk1km5YpHujSfnE5YjxSWTp0RLdVul0SmTS4ojhB8+5VQC6zT0bFn5WzG9WbGp06ajB04nsM7ATb494x2dpZklSNYQvOrMkZjB+LuztKH33o9jVs7Cs87G7M2eoy3NmY3ZGY1mjbWPfVBhQ2X6cK596Rw061zr1kcYVKZK69Q4NOs8y1LVx1iV1p9UWcbOR7PGm4ci1XiV1tWWy1gemlVo3JlXQ1FpXTPPODcBzTLOzF9AU2m9YL5xkIUVX0hVab0wLs76lK7Sulaa9ZmLSus6WdbnCTdWoliStajUTdX2yJMUZJEuWP+uWo6VcldpnRJjfeHDikqxFvuotF4sw6r3+mVl/3V5sr70U2n9lQhriS9riQQr/rUvqzQuwPL8wmdKCbC8P8Nsd2wvlv9nqPU3/Kykv0rrJDuL4auV5YrqxarjYNWxs2o5WA3sLI9nmo6msrOWcrCWsrMaOViN7CwOldaB9Z+yWL7yUXYWywWiiZ21jIPFfzmt5GDx33y8n+Qz8d+qp3OwmtlZEPVXzQR+VtqfVSnAWu7PWi7Aglm+qi0/yvuyvB8Ea0VYXn9GypQSYUGTn6oJZFgtjn84bS/RIsTyuy8uAynWCo8n58YVYixocGelQY4VWemqWhkRZEHyWzeV4c/yeFZR9o3v3FjfZ18sQrNMZ4Wd7thpw+AFaNaFhpX6VXTVqnrD4EVo1sWGFShbTVWtLjPt9UOzLjHNwJq1NNXaNcY5/IHKQcYdiK+jqH6wHB7Bnyy79DLzEsxA3x0T0yxTPQrQLHW5ZQvmIv+x+KP12MgVeJW60jYGzQ0xOyr2U7N16CoC62rE6c71P1s+ycS69faVwmsILDXGPgiw4ReTqnUDZqMXRaWuxUwC/JrOcoKkJt2CW7iOxLr+BtwqwMbfqjf7MGO//7ER+9ODSSqlbsQOt1W1KFX+Z2vFpk0VrX+Vp5K2I0idu4nIUjcTxp27hapSt+ZANYB6drit2+RZw+gqdfsd0ir8gbLO9bxTVlU00Yml7pJl3e2mEn7v4R5X1f/19SOl7pVS3eejUmr4JAnUJMdXjzq6/wF+1YS+viqlJrLfhh58yF+l1MOPFPpTOip6lPJCganHHudTPcH5dvWTT/Ggnqa9qWKv97hnfE2jBnKj/unZ5553N41/geuF6i304ksvv/Iq8ZLxWp/Xx77xppwpFAqFQqFQKBQKhbbK/gaAcnwn+ebi2QAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyNS0wNy0xOVQyMDozODoxMiswMDowMGeYLAsAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjUtMDctMTlUMjA6Mzg6MTIrMDA6MDAWxZS3AAAAKHRFWHRkYXRlOnRpbWVzdGFtcAAyMDI1LTA3LTE5VDIwOjM5OjQwKzAwOjAwcW3BGwAAABR0RVh0cGRmOkF1dGhvcgBTb25hIFRvbXk3Lm34AAAAXXRFWHR4bXA6Q3JlYXRvclRvb2wAQ2FudmEgKFJlbmRlcmVyKSBkb2M9REFHZFpwdnlSZmsgdXNlcj1VQUM1VFVjR0tuOCBicmFuZD1CQUM1VGZFZ2hMbyB0ZW1wbGF0ZT3LFObtAAAAAElFTkSuQmCC",Bk="/dashboard/assets/forward-C0bK_Hny.png",zk="/dashboard/assets/right-C2_LwsZ_.png",Fk="/dashboard/assets/reverse-BkDOZ5rR.png",Hk="/dashboard/assets/left-bDZiDDEe.png",qk="/dashboard/assets/connectiongraphic-BSRRSLPm.png",bb="/dashboard/assets/robotgraphic-DpxCb7B5.png";function Gk({voltage:i,cardHeight:e=60}){let o=0;typeof i=="number"&&(o=Math.max(0,Math.min(1,(i-3.3)/(5-3.3))));const c=`${Math.round(o*100)}%`;let f="#4caf50";return o<.2?f="#f44336":o<.5&&(f="#ff9800"),d.jsxs("div",{style:{position:"absolute",bottom:0,left:0,right:0,height:"28px",background:"transparent",borderBottomLeftRadius:16,borderBottomRightRadius:16,overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center",padding:"0 12px"},children:[d.jsx("div",{style:{position:"absolute",bottom:0,left:0,right:0,height:"4px",background:f,width:`${o*100}%`,transition:"width 0.4s cubic-bezier(0.4,0,0.2,1)"}}),d.jsx("div",{style:{fontSize:"11px",fontWeight:"600",color:"#666",zIndex:1,textAlign:"center"},children:c+" Charged"})]})}function _c(i){if(!i)return"";const e=new Date(i);return isNaN(e.getTime())?i:e.toLocaleString(void 0,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}function Wk({lastBatteryTime:i,firstBatteryTime:e,lastProgramTime:n},r=new Date){return!i||(r-i)/1e3>5?"inactive_battery":!n&&e&&(r-e)/1e3>180||n&&(r-n)/1e3>180?"inactive":n&&(r-n)/1e3<=180?"active":"idle"}function Xk(i){if(!i)return 0;const e=i.trim().toLowerCase().split(/\s+/);let n=4e3;for(const r of e)r==="forward"||r==="reverse"?n+=1500:(r==="left"||r==="right")&&(n+=1e3);return n}const Bt=async i=>{if(!i)return[];const e=Zt(Kt,"users",i.uid,"appdata","sessions"),n=await Ln(e);return n.exists()?n.data().sessions||[]:[]},Gn=async(i,e)=>{if(!i)return;const n=Zt(Kt,"users",i.uid,"appdata","sessions");await os(n,{sessions:e})};function Zk(){var Is,cr,zr,ur;const[i,e]=C.useState({}),n=Zs(),{sessionId:r}=HS(),o=fs(),f=(w=>new URLSearchParams(o.search).get(w))("name")||`Session ${new Date().toLocaleDateString()}`,[p,g]=C.useState(!1),[y,x]=C.useState([]),[S,A]=C.useState({}),[F,G]=C.useState(null),[q,K]=C.useState("active"),[J,Y]=C.useState(f),[z,me]=C.useState(null),[fe,be]=C.useState(!1),[M,R]=C.useState(null),[I,L]=C.useState([]),[N,B]=C.useState(null),[j,Fe]=C.useState(!1),[$e,ae]=C.useState(null),[he,ie]=C.useState(new Set),[Ae,D]=C.useState(!1),[P,oe]=C.useState(""),[ee,_e]=C.useState(new Set),[Se,Te]=C.useState(""),[lt,vt]=C.useState({connection:!1,lessonProgress:!1,robotsAndPrograms:!1,dataReceived:!0}),[ti,Un]=C.useState(!1),[yn,Ti]=C.useState(null),[Ri,ps]=C.useState(null),[Lr,ka]=C.useState(null);C.useRef();const[ke,se]=C.useState(()=>jt.currentUser);C.useEffect(()=>{const w=jt.onAuthStateChanged(k=>{se(k)});return()=>w()},[]);const[ve,Re]=C.useState("main"),[we,St]=C.useState(""),[Ge,tt]=C.useState({bold:!1,italic:!1,underline:!1,color:"#000000"}),[ot,kt]=C.useState(!1),nt=C.useRef(null),Tn=C.useRef(!1);C.useEffect(()=>(Tn.current=!0,()=>{Tn.current=!1}),[]),C.useEffect(()=>{const w=k=>{document.querySelectorAll(".dropdown").forEach(V=>{const $=V.querySelector(".dropdown-menu");$&&$.style.display==="block"&&(V.contains(k.target)||($.style.display="none"))})};return document.addEventListener("click",w),()=>{document.removeEventListener("click",w)}},[]);const vn=async w=>{if(!w)return;const k=Zt(Kt,"users",w.uid,"appdata","classrooms"),U=await Ln(k);U.exists()?L(U.data().classrooms||[]):L([])},Na=w=>w?I.find(k=>k.id===w):null,Ci=w=>{vt(k=>({...k,[w]:!k[w]}))},Ks=async w=>{if(!z)return;const k={};Object.keys(S).forEach(V=>{k[V]={...S[V],assignedTo:null,assignedToType:null,assignedToName:null}}),A(k),B(w?Na(w):null),be(!0);const U={...z,classroomId:w||null};me(U)},Ys=()=>{if(!M)return!1;const w=Object.keys(S),k=Object.keys(M.robots||{});if(w.length!==k.length)return!0;for(const $ of w)if(!M.robots[$]||JSON.stringify(S[$])!==JSON.stringify(M.robots[$]))return!0;if(y.length!==(M.receivedData||[]).length||J!==M.sessionName||we!==(M.sessionNotes||""))return!0;const U=Array.from(ee),V=Array.from(M.completedRobots||[]);if(U.length!==V.length)return!0;for(const $ of U)if(!V.includes($))return!0;return!1};C.useEffect(()=>{const w=Ys();be(w)},[S,y,J,ee,we]);const gs=C.useRef(!1);C.useEffect(()=>{!gs.current&&r&&ke&&(gs.current=!0,Vt(!0),Cs(null),Bt(ke).then(w=>{const k=w.find(U=>String(U.id)===String(r));k?(me(k),Y(k.name),K(k.status),A(k.robots||{}),x(k.receivedData||{}),_e(new Set(k.completedRobots||[])),er(k.lessonCompletions?Object.fromEntries(Object.entries(k.lessonCompletions).map(([U,V])=>[U,new Set(V)])):{}),St(k.sessionNotes||""),Vt(!1),R({robots:k.robots||{},receivedData:k.receivedData||{},sessionName:k.name,sessionNotes:k.sessionNotes||"",completedRobots:new Set(k.completedRobots||[]),lessonCompletions:k.lessonCompletions?Object.fromEntries(Object.entries(k.lessonCompletions).map(([U,V])=>[U,new Set(V)])):{}})):(Vt(!1),Cs("Session not found."),setTimeout(()=>n("/sessions"),2e3))}).catch(w=>{Vt(!1),Cs("Error loading session.")}))},[r,ke,n]),C.useEffect(()=>{const w=jt.onAuthStateChanged(k=>{k?vn(k):L([])});return()=>w()},[]),C.useEffect(()=>{if(z&&z.classroomId&&I.length>0){const w=Na(z.classroomId);B(w)}},[z,I]);const ni=C.useCallback(async()=>{try{if(q==="active"&&z&&z.id&&Bt(ke).then(w=>{const k={...z,name:J,status:q,robots:S,receivedData:y,completedRobots:Array.from(ee),lessonCompletions:Object.fromEntries(Object.entries(ze).map(([V,$])=>[V,Array.from($)])),sessionNotes:we,lastUpdated:new Date().toISOString()},U=w.findIndex(V=>String(V.id)===String(z.id));U>=0?w[U]=k:w.push(k),Gn(ke,w),R({robots:S,receivedData:y,sessionName:J,sessionNotes:we,completedRobots:ee,lessonCompletions:Object.fromEntries(Object.entries(ze).map(([V,$])=>[V,Array.from($)]))})}),p)try{await Qs()}catch(w){console.error("Error disconnecting micro:bit:",w)}}catch(w){console.error("Error in handleLeaveSession:",w)}},[q,z==null?void 0:z.id,J,p]),[ys,vs]=C.useState(!1),ja=async()=>{if(q==="active"){vs(!0);try{const w=await navigator.serial.requestPort();await w.open({baudRate:115200}),Vk(w),g(!0);const k=new TextDecoderStream;w.readable.pipeTo(k.writable);const U=k.readable.getReader();Pk(U)}catch(w){console.error("Error connecting to micro:bit:",w),g(!1)}finally{vs(!1)}}},Qs=async()=>{q==="active"&&z&&z.id&&await new Promise(w=>{Bt(ke).then(k=>{const U={...z,name:J,status:q,robots:S,receivedData:y,completedRobots:Array.from(ee),lessonCompletions:Object.fromEntries(Object.entries(ze).map(([$,ye])=>[$,Array.from(ye)])),sessionNotes:we,lastUpdated:new Date().toISOString()},V=k.findIndex($=>String($.id)===String(z.id));V>=0?k[V]=U:k.push(U),Gn(ke,k).then(w)})}),g(!1),await new Promise(w=>setTimeout(w,100)),await vb(),window.location.reload()},Da=w=>{if(w&&w.trim().length>0){const k=new Date().toISOString(),U=w.trim(),V=U.split(" ");if(V.length>=2){const $=V[0];if($.length>10)return;if(V.length===2&&!isNaN(parseFloat(V[1]))){const ye=parseFloat(V[1]),ge={type:"battery",voltage:ye,timestamp:k};A(Ie=>{var Je,De,Ze,mt,Rt,Ct,un;return{...Ie,[$]:{...Ie[$],deviceId:$,lastSeen:k,dataCount:(((Je=Ie[$])==null?void 0:Je.dataCount)||0)+1,latestData:ge,rawData:U,firstSeen:((De=Ie[$])==null?void 0:De.firstSeen)||k,status:((Ze=Ie[$])==null?void 0:Ze.status)||"inactive",batteryData:{voltage:ye,timestamp:k},lastBatteryTime:k,firstBatteryTime:((mt=Ie[$])==null?void 0:mt.firstBatteryTime)||k,buttonEvents:((Rt=Ie[$])==null?void 0:Rt.buttonEvents)||[],assignedTo:((Ct=Ie[$])==null?void 0:Ct.assignedTo)||null,assignmentTime:((un=Ie[$])==null?void 0:un.assignmentTime)||null}}}),x(Ie=>[...Array.isArray(Ie)?Ie:[],{timestamp:k,data:U}]),setTimeout(()=>Ii(),100)}else if(V.length>=2&&["PLAY","TEST"].includes(V[1])){const ye=V[1],ge=V.slice(2).join(" "),Ie={type:"button_event",button:ye,program:ge||null,timestamp:k};A(De=>{var Ze,mt,Rt,Ct,un,zn,Di,Oi,ri,Pt,yi;return{...De,[$]:{deviceId:$,lastSeen:k,dataCount:(((Ze=De[$])==null?void 0:Ze.dataCount)||0)+1,latestData:Ie,rawData:U,firstSeen:((mt=De[$])==null?void 0:mt.firstSeen)||k,status:((Rt=De[$])==null?void 0:Rt.status)||"inactive",batteryData:(Ct=De[$])!=null&&Ct.batteryData||(zn=(un=De[$])==null?void 0:un.latestData)!=null&&zn.voltage?{voltage:(Oi=(Di=De[$])==null?void 0:Di.latestData)==null?void 0:Oi.voltage}:null,buttonEvents:[...((ri=De[$])==null?void 0:ri.buttonEvents)||[],{button:ye,program:ge||null,timestamp:k}].slice(-10),assignedTo:((Pt=De[$])==null?void 0:Pt.assignedTo)||null,assignmentTime:((yi=De[$])==null?void 0:yi.assignmentTime)||null}}}),x(De=>[...Array.isArray(De)?De:[],{timestamp:k,data:U}]),setTimeout(()=>Ii(),100);const Je=Xk(ge);e(De=>({...De,[$]:Date.now()+Je}))}else{const ye=xs(U),ge=hi(U);A(Ie=>{var Je,De,Ze,mt,Rt,Ct,un,zn;return{...Ie,[ye]:{...Ie[ye],deviceId:ye,lastSeen:k,dataCount:(((Je=Ie[ye])==null?void 0:Je.dataCount)||0)+1,latestData:ge,rawData:U,firstSeen:((De=Ie[ye])==null?void 0:De.firstSeen)||k,status:((Ze=Ie[ye])==null?void 0:Ze.status)||"inactive",batteryData:((mt=Ie[ye])==null?void 0:mt.batteryData)||null,lastBatteryTime:((Rt=Ie[ye])==null?void 0:Rt.lastBatteryTime)||k,buttonEvents:((Ct=Ie[ye])==null?void 0:Ct.buttonEvents)||[],assignedTo:((un=Ie[ye])==null?void 0:un.assignedTo)||null,assignmentTime:((zn=Ie[ye])==null?void 0:zn.assignmentTime)||null}}}),x(Ie=>[...Array.isArray(Ie)?Ie:[],{timestamp:k,data:U}]),setTimeout(()=>Ii(),100)}}}},Wi=()=>{window.confirm("Are you sure you want to clear all robot data and received data? This cannot be undone.")&&(x([]),A({}))},Xi=()=>{window.confirm("Are you sure you want to clear all robots? This cannot be undone.")&&(A({}),_e(new Set),R(w=>({...w,robots:{},completedRobots:new Set})))},$s=[{id:"lesson1",name:"I Feel"},{id:"lesson2",name:"Hungry, Hungry Robot"},{id:"lesson3",name:"Grid Challenges"},{id:"lesson4",name:"Duck Duck Robot"}],[Rn,Js]=C.useState(()=>{let w=[];try{const U=localStorage.getItem("roversaLessons");if(U){const V=JSON.parse(U);Array.isArray(V)&&(w=V.map($=>({id:$.id,name:$.title||$.name||"",link:$.link||""})))}}catch{}const k=[...$s];return w.forEach(U=>{k.some(V=>V.id===U.id)||k.push(U)}),[{id:"none",name:"None"},...k]}),[Le,Vr]=C.useState("none"),[ze,er]=C.useState(()=>{const w={};return Rn.forEach(k=>{w[k.id]=new Set}),w}),[Dt,Yt]=C.useState("none");C.useEffect(()=>{er(w=>{const k={...w};return Rn.forEach(U=>{k[U.id]||(k[U.id]=new Set)}),Object.keys(k).forEach(U=>{Rn.some(V=>V.id===U)||delete k[U]}),k})},[Rn]),C.useEffect(()=>{const w=k=>{if(k.key==="roversaLessons"){let U=[];try{const $=localStorage.getItem("roversaLessons");if($){const ye=JSON.parse($);Array.isArray(ye)&&(U=ye.map(ge=>({id:ge.id,name:ge.title||ge.name||"",link:ge.link||""})))}}catch{}const V=[...$s];U.forEach($=>{V.some(ye=>ye.id===$.id)||V.push($)}),Js([{id:"none",name:"None"},...V])}};return window.addEventListener("storage",w),()=>window.removeEventListener("storage",w)},[]);const qt=w=>{er(k=>{const U={...k},V=new Set(U[Le]);if(V.has(w)?V.delete(w):V.add(w),U[Le]=V,z&&z.id){const $=Object.fromEntries(Object.entries(U).map(([ge,Ie])=>[ge,Array.from(Ie)])),ye={...z,lessonCompletions:$};Bt(ke).then(async ge=>{const Ie=ge.findIndex(Ze=>String(Ze.id)===String(z.id));Ie>=0?ge[Ie]=ye:ge.push(ye),await Gn(ke,ge);const De=(await Bt(ke)).find(Ze=>String(Ze.id)===String(z.id));De&&De.lessonCompletions&&er(Object.fromEntries(Object.entries(De.lessonCompletions).map(([Ze,mt])=>[Ze,new Set(mt)])))})}return U})},Bn=C.useCallback(()=>{if(!z){console.error("Cannot pause session: sessionData is null");return}const w={...z,name:J,status:"paused",robots:S,receivedData:y,sessionNotes:we,pausedAt:new Date().toISOString()};Bt(ke).then(k=>{const U=k.findIndex(V=>String(V.id)===String(z.id));U>=0?k[U]=w:k.push(w),Gn(ke,k),K("paused"),me(w),be(!1),R({robots:S,receivedData:y,sessionName:J,sessionNotes:we,completedRobots:ee,lessonCompletions:Object.fromEntries(Object.entries(ze).map(([V,$])=>[V,Array.from($)]))})})},[z,J,S,y,we]),[Oa,Pr]=C.useState(!1),Zi=()=>{Pr(!0)},xo=()=>{if(p&&Qs(),!z){console.error("Cannot end session: sessionData is null");return}const w={...z,name:J,status:"ended",robots:S,receivedData:y,completedRobots:Array.from(ee),lessonCompletions:Object.fromEntries(Object.entries(ze).map(([k,U])=>[k,Array.from(U)])),sessionNotes:we,endedAt:new Date().toISOString()};Bt(ke).then(k=>{const U=k.findIndex(V=>String(V.id)===String(z.id));U>=0?k[U]=w:k.push(w),Gn(ke,k),K("ended"),me(w),be(!1),R({robots:S,receivedData:y,sessionName:J,sessionNotes:we,completedRobots:ee,lessonCompletions:Object.fromEntries(Object.entries(ze).map(([V,$])=>[V,Array.from($)]))})})},bs=()=>{if(!z){console.error("Cannot resume session: sessionData is null");return}const w={...z,name:J,status:"active",robots:S,receivedData:y,completedRobots:Array.from(ee),lessonCompletions:Object.fromEntries(Object.entries(ze).map(([k,U])=>[k,Array.from(U)])),sessionNotes:we,resumedAt:new Date().toISOString()};Bt(ke).then(k=>{const U=k.findIndex(V=>String(V.id)===String(z.id));U>=0?k[U]=w:k.push(w),Gn(ke,k),K("active"),me(w),be(!1),R({robots:S,receivedData:y,sessionName:J,sessionNotes:we,completedRobots:ee,lessonCompletions:Object.fromEntries(Object.entries(ze).map(([V,$])=>[V,Array.from($)]))})})},_s=()=>{As(!0)},Ki=w=>{Ti(w),Un(!0)},di=w=>y.filter(k=>{const U=k.data.split(" ");return U.length>=1?U[0]===w:xs(k.data)===w}),ii=w=>{const k=S[w];return!k||!k.buttonEvents?[]:k.buttonEvents.filter(U=>U.program&&U.program.trim()).map(U=>({deviceId:w,robotName:k.assignedTo?k.assignedTo.name:w,button:U.button,program:U.program,timestamp:U.timestamp,robot:k})).sort((U,V)=>new Date(V.timestamp)-new Date(U.timestamp))},Cn=w=>{const k=ii(w);return k.length>0?k[0]:null},Mt=w=>y.filter(k=>{const U=k.data.split(" ");return U.length>=1?U[0]===w:xs(k.data)===w});C.useEffect(()=>{const w=jt.onAuthStateChanged(async k=>{if(!k)return;const U=Zt(Kt,"users",k.uid,"appdata","lessons"),V=await Ln(U);let $=[];if(V.exists()&&($=(V.data().lessons||[]).map(ge=>({id:ge.id,name:ge.title||ge.name||"",link:ge.link||""}))),z&&z.classroomId&&N){const ge=(N.lessons||[]).map(Je=>Je.id),Ie=$.filter(Je=>ge.includes(Je.id));Js([{id:"none",name:"None"},...Ie])}else{const ye=[...$s];$.forEach(ge=>{ye.some(Ie=>Ie.id===ge.id)||ye.push(ge)}),Js([{id:"none",name:"None"},...ye])}});return()=>w()},[z,N]),C.useEffect(()=>{z&&me(w=>({...w,robots:S,receivedData:y,completedRobots:Array.from(ee)}))},[S,y,ee,z==null?void 0:z.id]),C.useEffect(()=>{q==="active"&&J&&Ii()},[J]),C.useEffect(()=>{if(!p)return;let w=!1,k="";return(async()=>{await new Promise($=>setTimeout($,1e3));const V=Uk();for(;!w;)try{const{value:$,done:ye}=await V.read();if(ye)break;if($){k+=$;const ge=k.split(`
`);k=ge.pop();for(let Ie of ge)w||Da(Ie)}}catch($){console.error("Error reading serial data:",$);break}})(),()=>{w=!0}},[p]),C.useEffect(()=>{const w=setInterval(()=>{const k=new Date;A(U=>{let V=!1;const $={...U};return Object.keys($).forEach(ye=>{const ge=$[ye];let Ie=ge.lastBatteryTime?new Date(ge.lastBatteryTime):null;Ie&&isNaN(Ie.getTime())&&(Ie=Date.parse(ge.lastBatteryTime)?new Date(Date.parse(ge.lastBatteryTime)):null);let Je=ge.firstBatteryTime?new Date(ge.firstBatteryTime):null;Je&&isNaN(Je.getTime())&&(Je=Date.parse(ge.batteryData.timestamp)?new Date(Date.parse(ge.batteryData.timestamp)):null);let De=null;if(ge.buttonEvents&&ge.buttonEvents.length>0)for(let mt=ge.buttonEvents.length-1;mt>=0;mt--){const Rt=ge.buttonEvents[mt];if(Rt&&Rt.timestamp){const Ct=new Date(Rt.timestamp);if(!isNaN(Ct.getTime())){De=Ct;break}}}console.log("Status check",ye,{lastBatteryTime:ge.lastBatteryTime,parsed:ge.lastBatteryTime?new Date(ge.lastBatteryTime):null,now:k,diff:ge.lastBatteryTime?(k-new Date(ge.lastBatteryTime))/1e3:null,firstBatteryTime:ge.firstBatteryTime,parsedFirst:ge.firstBatteryTime?new Date(ge.firstBatteryTime):null,lastProgramTime:ge.buttonEvents&&ge.buttonEvents.length>0?ge.buttonEvents[ge.buttonEvents.length-1].timestamp:null});const Ze=Wk({lastBatteryTime:Ie,firstBatteryTime:Je,lastProgramTime:De},k);ge.status!==Ze&&($[ye]={...ge,status:Ze},V=!0)}),V?$:U})},2e3);return()=>clearInterval(w)},[]),C.useEffect(()=>{const w=setInterval(()=>{q==="active"&&z&&Ii()},5e3);return()=>clearInterval(w)},[q,z==null?void 0:z.id]),C.useEffect(()=>{const w=k=>{q==="active"&&z&&z.id&&localStorage.setItem("unsavedSession",JSON.stringify({...z,name:J,status:q,robots:S,receivedData:y,completedRobots:Array.from(ee),lessonCompletions:Object.fromEntries(Object.entries(ze).map(([U,V])=>[U,Array.from(V)])),sessionNotes:we,lastUpdated:new Date().toISOString()}))};return window.addEventListener("beforeunload",w),()=>{window.removeEventListener("beforeunload",w)}},[q,z,J,S,y,ee,ze,we]),C.useEffect(()=>{Tn.current&&q==="active"&&z&&z.id&&Bt(ke).then(w=>{const k=w.findIndex(U=>String(U.id)===String(z.id));k>=0&&w[k].status==="active"&&(w[k]={...z,name:J,status:q,robots:S,receivedData:y,completedRobots:Array.from(ee),lessonCompletions:Object.fromEntries(Object.entries(ze).map(([U,V])=>[U,Array.from(V)])),sessionNotes:we},Gn(ke,w))})},[J,q,z==null?void 0:z.id]);const Ii=()=>{try{(q==="active"||q==="paused"||q==="ended")&&z&&z.id&&Bt(ke).then(w=>{const k={...z,name:J,status:q,robots:S,receivedData:y,sessionNotes:we,completedRobots:Array.from(ee),lessonCompletions:Object.fromEntries(Object.entries(ze).map(([V,$])=>[V,Array.from($)])),lastUpdated:new Date().toISOString()},U=w.findIndex(V=>String(V.id)===String(z.id));U>=0?w[U]=k:w.push(k),Gn(ke,w),R({robots:S,receivedData:y,sessionName:J,sessionNotes:we,completedRobots:ee,lessonCompletions:Object.fromEntries(Object.entries(ze).map(([V,$])=>[V,Array.from($)]))})})}catch(w){console.error("Error in autosaveSession:",w)}},xs=w=>{const k=/[0-9A-Fa-f]{8,}/g,U=w.match(k);if(U&&U.length>0)return U[0].toUpperCase();const V=/(?:device|id)[:\s]*([0-9A-Fa-f]+)/i,$=w.match(V);if($)return $[1].toUpperCase();const ye=/[0-9A-Fa-f]{4,}/g,ge=w.match(ye);return ge&&ge.length>0?ge[0].toUpperCase():`UNKNOWN_${w.slice(0,8).replace(/[^0-9A-Za-z]/g,"")}`},hi=w=>{const k=w.split(/[,\s]+/),U={};return k.forEach((V,$)=>{if(V.includes("=")){const[ye,ge]=V.split("=");U[ye.trim()]=ge.trim()}else if(V.includes(":")){const[ye,ge]=V.split(":");U[ye.trim()]=ge.trim()}else $===0&&!V.match(/[0-9A-Fa-f]{4,}/)?U.command=V:isNaN(V)||(U[`value${$}`]=parseFloat(V))}),U},si=()=>{if(!P.trim())return S;const w=P.toLowerCase(),k={};return Object.entries(S).forEach(([U,V])=>{if(U.toLowerCase().includes(w)){k[U]=V;return}if(V.assignedTo){if(V.assignedTo.name.toLowerCase().includes(w)){k[U]=V;return}if(V.assignedTo.email&&V.assignedTo.email.toLowerCase().includes(w)){k[U]=V;return}if(V.assignedTo.studentCount&&V.assignedTo.studentCount.toString().includes(w)){k[U]=V;return}}}),k},wo=async(w,k)=>{if(!N)return;const U=N.students.find($=>$.id===k);if(!U)return;const V={...S,[w]:{...S[w],assignedTo:{type:"student",id:U.id,name:U.name,email:U.email},assignmentTime:new Date().toISOString()}};if(A(V),z&&z.id){const $={...z,robots:V};Bt(ke).then(async ye=>{const ge=ye.findIndex(De=>String(De.id)===String(z.id));ge>=0?ye[ge]=$:ye.push($),await Gn(ke,ye);const Je=(await Bt(ke)).find(De=>String(De.id)===String(z.id));Je&&A(Je.robots||{})})}},So=async(w,k)=>{if(!N)return;const U=N.groups.find($=>$.id===k);if(!U)return;const V={...S,[w]:{...S[w],assignedTo:{type:"group",id:U.id,name:U.name,studentCount:U.students.length},assignmentTime:new Date().toISOString()}};if(A(V),z&&z.id){const $={...z,robots:V};Bt(ke).then(async ye=>{const ge=ye.findIndex(De=>String(De.id)===String(z.id));ge>=0?ye[ge]=$:ye.push($),await Gn(ke,ye);const Je=(await Bt(ke)).find(De=>String(De.id)===String(z.id));Je&&A(Je.robots||{})})}},ws=w=>{const k={...S,[w]:{...S[w],assignedTo:null,assignmentTime:null}};A(k)},Eo=w=>{const k=new Set(he);k.has(w)?k.delete(w):k.add(w),ie(k)},Ss=()=>{he.size>0&&D(!0)},fi=w=>w&&w.length>12?w.slice(0,12)+"...":w,en=async(w,k,U,V={})=>{const $={...S};if(he.forEach(ye=>{$[ye]={...$[ye],assignedTo:{type:w,id:k,name:U,...V},assignmentTime:new Date().toISOString()}}),A($),ie(new Set),setIsTagSelectionMode(!1),D(!1),z&&z.id){const ye={...z,robots:$};Bt(ke).then(async ge=>{const Ie=ge.findIndex(Ze=>String(Ze.id)===String(z.id));Ie>=0?ge[Ie]=ye:ge.push(ye),await Gn(ke,ge);const De=(await Bt(ke)).find(Ze=>String(Ze.id)===String(z.id));De&&A(De.robots||{})})}},tr=w=>{if(!N)return;const k=N.students.find(U=>U.id===w);k&&en("student",k.id,k.name,{email:k.email})},Ao=w=>{if(!N)return;const k=N.groups.find(U=>U.id===w);k&&en("group",k.id,k.name,{studentCount:k.students.length})},Yi=async()=>{const w={...S};if(he.forEach(k=>{w[k]={...w[k],assignedTo:null,assignmentTime:null}}),A(w),ie(new Set),setIsTagSelectionMode(!1),D(!1),z&&z.id){const k={...z,robots:w};Bt(ke).then(async U=>{const V=U.findIndex(ge=>String(ge.id)===String(z.id));V>=0?U[V]=k:U.push(k),await Gn(ke,U);const ye=(await Bt(ke)).find(ge=>String(ge.id)===String(z.id));ye&&A(ye.robots||{})})}},nr=w=>{if(!w)return null;const k=w.toLowerCase().split(" "),U=[];return k.forEach((V,$)=>{let ye=null;switch(V.trim()){case"forward":ye=Bk;break;case"right":ye=zk;break;case"reverse":ye=Fk;break;case"left":ye=Hk;break;case"play":ye=Dm;break;case"test":ye=Om;break;default:U.push(d.jsx("span",{style:{display:"inline-block",padding:"4px 8px",background:"#f0f0f0",borderRadius:"4px",fontSize:"0.75rem",margin:"0 2px",fontFamily:"monospace",color:"#666"},children:V},$));return}ye&&U.push(d.jsx("img",{src:ye,alt:V,style:{width:"24px",height:"24px",margin:"0 2px",verticalAlign:"middle",objectFit:"contain",scale:10}},$))}),U},ir=async()=>{try{if((q==="active"||q==="paused"||q==="ended")&&z&&z.id){const w=await Bt(ke),k={...z,name:J,status:q,robots:S,receivedData:y,completedRobots:Array.from(ee),lessonCompletions:Object.fromEntries(Object.entries(ze).map(([V,$])=>[V,Array.from($)])),sessionNotes:we,lastUpdated:new Date().toISOString()},U=w.findIndex(V=>String(V.id)===String(z.id));U>=0?w[U]=k:w.push(k),await Gn(ke,w),be(!1),R({robots:S,receivedData:y,sessionName:J,sessionNotes:we,completedRobots:ee,lessonCompletions:Object.fromEntries(Object.entries(ze).map(([V,$])=>[V,Array.from($)]))})}}catch(w){console.error("Error saving session:",w)}},Ma=d.jsx("div",{className:"robot-cards-container",style:{display:"flex",flexDirection:"column",gap:"32px",width:"100%",overflow:"visible",paddingTop:"32px"},children:(()=>{const k=(()=>{if(!p)return Object.entries(si());const U=Object.entries(si());return[...U.filter(([V,$])=>$.status==="inactive"),...U.filter(([V,$])=>$.status!=="inactive")]})();return k.length>0?k.map(([U,V],$)=>{var Ie,Je,De,Ze,mt,Rt,Ct,un,zn,Di,Oi,ri,Pt,yi;let ye=null;if(V.batteryData&&V.batteryData.voltage)ye=V.batteryData.voltage;else if(V.latestData){const He=Object.keys(V.latestData);for(const bt of["vbat","battery","voltage"])if(V.latestData[bt]&&!isNaN(parseFloat(V.latestData[bt]))){ye=parseFloat(V.latestData[bt]);break}if(ye===null)for(const bt of He){const u=parseFloat(V.latestData[bt]);if(!isNaN(u)&&u>=3&&u<=4.3){ye=u;break}}}const ge=i[V.deviceId]&&i[V.deviceId]>Date.now();return d.jsxs("div",{className:`robot-card ${F===V.deviceId?"selected":""} ${he.has(V.deviceId)?"tag-selected":""} ${(Ie=ze[Le])!=null&&Ie.has(V.deviceId)?"completed":""} fade-in-scale animate-on-mount-delay-${Math.min(8+$,12)}`,onClick:()=>Ki(V.deviceId),style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"flex-start",padding:"20px 24px 36px 24px",background:Ri===V.deviceId?"#e3eafe":(Je=ze[Le])!=null&&Je.has(V.deviceId)?"#f8f9ff":"#fff",borderRadius:"16px",boxShadow:(De=ze[Le])!=null&&De.has(V.deviceId)?"0 4px 20px rgba(65, 105, 225, 0.15)":"0 2px 12px rgba(65, 105, 225, 0.08)",border:he.has(V.deviceId)?"2px solid #4169e1":"2px solid #e0e0e0",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",cursor:"pointer",position:"relative",overflow:"visible",gap:"18px",minHeight:"180px",height:"180px"},children:[d.jsx("div",{style:{position:"absolute",top:0,left:-2,zIndex:20,background:p?ge?"#ffc107":V.status==="inactive_battery"?"#b0b0b0":V.status==="active"?"#28a745":V.status==="idle"?"#333":"#dc3545":"#b0b0b0",color:"#fff",fontWeight:700,fontSize:"0.85rem",padding:"7px 22px 7px 18px",borderTopLeftRadius:"16px",borderTopRightRadius:"16px",borderBottomLeftRadius:"16px",borderBottomRightRadius:"16px",boxShadow:"0 2px 8px rgba(0,0,0,0.08)",letterSpacing:"0.02em",minWidth:"70px",textAlign:"center",border:"2px solid #e1e1e0",transform:"translateY(-60%)",pointerEvents:"none"},children:p?ge?"Running program":V.status==="inactive_battery"?"Powered off":V.status==="active"?"Active":V.status==="idle"?"Idle":"Inactive":"Waiting for connection..."}),d.jsx("div",{style:{position:"absolute",top:"20px",right:"12px",zIndex:10},onClick:He=>He.stopPropagation(),children:d.jsxs("div",{className:"dropdown",children:[d.jsx("button",{className:"dropdown-toggle",onClick:He=>{He.stopPropagation();const u=He.target.closest(".dropdown").querySelector(".dropdown-menu");u.style.display=u.style.display==="block"?"none":"block"},style:{background:"#f0f0f0",border:"none",cursor:"pointer",padding:"4px",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",color:"#333",transition:"all 0.2s ease",outline:"none"},children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"16px",height:"16px"},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM12.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM18.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z"})})}),d.jsx("div",{className:"dropdown-menu",style:{display:"none",position:"absolute",top:"100%",right:"0",background:"#fff",border:"1px solid #e0e0e0",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",zIndex:1e3,minWidth:"140px",padding:"4px 0"},children:d.jsxs("button",{onClick:He=>{if(He.stopPropagation(),window.confirm(`Are you sure you want to delete robot ${V.deviceId}? This cannot be undone.`)){const bt={...S};delete bt[V.deviceId],A(bt),ee.has(V.deviceId)&&_e(u=>{const v=new Set(u);return v.delete(V.deviceId),v})}He.target.closest(".dropdown-menu").style.display="none"},style:{width:"100%",padding:"8px 12px",background:"none",border:"none",cursor:"pointer",fontSize:"12px",fontWeight:"400",color:"#dc3545",textAlign:"left",display:"flex",alignItems:"center",gap:"8px",transition:"background-color 0.2s",outline:"none"},onMouseEnter:He=>He.target.style.backgroundColor="#fff5f5",onMouseLeave:He=>He.target.style.backgroundColor="transparent",children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"14px",height:"14px"},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})}),"Delete Robot"]})})]})}),d.jsxs("div",{style:{display:"flex",flexDirection:"row",alignItems:"flex-start",flex:1,minWidth:0,gap:"18px"},children:[d.jsx("div",{onClick:He=>{He.stopPropagation(),Eo(V.deviceId)},style:{marginRight:"0",zIndex:5,display:"flex",alignItems:"center",justifyContent:"center",alignSelf:"center",padding:"6px",borderRadius:"6px",cursor:"pointer",minWidth:"25px",minHeight:"25px",boxSizing:"border-box",userSelect:"none",width:"28px",height:"28px",border:he.has(V.deviceId)?"2px solid #4169e1":"2px solid #e0e0e0",backgroundColor:he.has(V.deviceId)?"#4169e1":"transparent",transition:"all 0.2s ease"},children:he.has(V.deviceId)&&d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:3.5,stroke:"currentColor",style:{width:25,height:25,color:"#fff"},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"})})}),d.jsx("img",{src:bb,alt:"Robot",style:{width:"60px",height:"70px",marginRight:"0",opacity:(Ze=ze[Le])!=null&&Ze.has(V.deviceId)?"0.8":"1",transition:"opacity 0.3s ease"}}),d.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:"12px",minWidth:0},children:[d.jsxs("div",{style:{display:"flex",alignItems:"flex-end",gap:"6px"},children:[d.jsx("span",{className:"robot-card-device-id",onClick:He=>He.stopPropagation(),style:{fontWeight:(mt=ze[Le])!=null&&mt.has(V.deviceId)?"600":"500",color:(Rt=ze[Le])!=null&&Rt.has(V.deviceId)?"#4169e1":"#222",transition:"all 0.3s ease",minHeight:"22px",display:"inline-flex",alignItems:"center"},children:V.deviceId}),V.assignedTo?d.jsxs("span",{style:{minWidth:"120px",minHeight:"22px",maxWidth:"200px",display:"inline-flex",alignItems:"center",background:(Ct=ze[Le])!=null&&Ct.has(V.deviceId)?"#e3eafe":"#f8f9fa",borderRadius:"12px",fontSize:"12px",color:(un=ze[Le])!=null&&un.has(V.deviceId)?"#4169e1":"#666",fontWeight:"500",border:he.has(V.deviceId)?"1px solid #4169e1":"1px solid #e0e0e0",boxSizing:"border-box",boxShadow:(zn=ze[Le])!=null&&zn.has(V.deviceId)?"0 2px 8px rgba(39, 75, 181, 0.08)":"0 1px 4px rgba(65, 105, 225, 0.08)",padding:"3px 10px",cursor:"default",gap:"8px"},children:[d.jsx("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",flex:1},children:V.assignedTo.type==="student"?`${fi(V.assignedTo.name)}`:`${fi(V.assignedTo.name)} (${V.assignedTo.studentCount} students)`}),d.jsx("button",{onClick:He=>{He.stopPropagation(),ws(V.deviceId)},title:"Remove tag",style:{background:"none",border:"none",color:(Di=ze[Le])!=null&&Di.has(V.deviceId)?"#4169e1":"#888",fontWeight:"bold",fontSize:"14px",cursor:"pointer",padding:0,lineHeight:1,display:"flex",alignItems:"center",opacity:.6,transition:"opacity 0.2s"},className:"remove-tag-x",onMouseEnter:He=>He.target.style.opacity=1,onMouseLeave:He=>He.target.style.opacity=.6,children:"×"})]}):d.jsx("span",{style:{minWidth:"120px",minHeight:"22px",maxWidth:"200px",display:"inline-flex",alignItems:"center",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",background:"transparent",borderRadius:"12px",fontSize:"12px",border:"1px solid transparent",boxSizing:"border-box",boxShadow:"none",padding:"3px 10px",cursor:"default"}})]}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",marginTop:"0",flexWrap:"wrap",rowGap:"8px",paddingLeft:"0px",marginLeft:"-6px"},children:[Le!=="none"&&d.jsxs("button",{onClick:He=>{He.stopPropagation(),qt(V.deviceId)},style:{padding:"6px 12px",background:(Oi=ze[Le])!=null&&Oi.has(V.deviceId)?"#274bb5":"#4169e1",border:"none",borderRadius:"6px",cursor:"pointer",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",display:"flex",alignItems:"center",gap:"6px",fontSize:"12px",fontWeight:"500",color:"#fff",height:"32px",minWidth:"100px",boxShadow:(ri=ze[Le])!=null&&ri.has(V.deviceId)?"0 2px 8px rgba(39, 75, 181, 0.3)":"0 1px 4px rgba(65, 105, 225, 0.2)"},title:(Pt=ze[Le])!=null&&Pt.has(V.deviceId)?"Mark as incomplete":"Mark as done",children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"14px",height:"14px"},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),(yi=ze[Le])!=null&&yi.has(V.deviceId)?"Undo Done":"Mark as Done"]}),z&&z.classroomId&&(N?d.jsxs("button",{onClick:He=>{He.stopPropagation(),ae(V.deviceId),Fe(!0)},style:{padding:"6px 12px",background:"#a259e1",border:"none",borderRadius:"6px",cursor:"pointer",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",display:"flex",alignItems:"center",gap:"8px",fontSize:"12px",fontWeight:"500",color:"#fff",height:"32px",minWidth:"100px",boxShadow:"0 1px 4px rgba(162, 89, 225, 0.2)"},title:"Edit robot tags",children:[d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"14px",height:"14px"},children:[d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.568 3H5.25A2.25 2.25 0 0 0 3 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.732.699 2.431 0l4.318-4.318c.699-.699.699-1.732 0-2.431L9.568 3Z"}),d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 6h.008v.008H6V6Z"})]}),"Assign"]}):d.jsxs("button",{disabled:!0,style:{padding:"6px 12px",background:"#e0e0e0",border:"none",borderRadius:"6px",cursor:"not-allowed",display:"flex",alignItems:"center",gap:"8px",fontSize:"12px",fontWeight:"500",color:"#888",height:"32px",minWidth:"100px",boxShadow:"none"},title:"Classroom data not loaded",children:[d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"14px",height:"14px"},children:[d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.568 3H5.25A2.25 2.25 0 0 0 3 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.732.699 2.431 0l4.318-4.318c.699-.699.699-1.732 0-2.431L9.568 3Z"}),d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 6h.008v.008H6V6Z"})]}),"Assign (classroom unavailable)"]}))]})]})]}),d.jsx("div",{style:{minWidth:0,display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"flex-end",marginRight:"200px"},children:(()=>{const He=Cn(V.deviceId);return He?d.jsxs("div",{style:{background:"#f8f9fa",borderRadius:"8px",padding:"12px",border:"1px solid #e0e0e0",width:"250px",marginBottom:"0"},children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[d.jsx("span",{style:{fontSize:"0.75rem",fontWeight:"600",color:"#4169e1"},children:"Latest Program"}),He.button==="PLAY"?d.jsx("img",{src:Dm,alt:"Play",style:{width:20,height:20,verticalAlign:"middle"}}):He.button==="TEST"?d.jsx("img",{src:Om,alt:"Test",style:{width:20,height:20,verticalAlign:"middle"}}):d.jsx("span",{style:{fontSize:"0.65rem",color:"#666",background:"#e3eafe",padding:"1px 4px",borderRadius:"3px",fontWeight:"500"},children:He.button})]}),d.jsx("span",{style:{fontSize:"0.65rem",color:"#888"},children:_c(He.timestamp)})]}),d.jsx("div",{style:{background:"#fff",padding:"6px 8px",borderRadius:"4px",border:"1px solid #e0e0e0",fontFamily:"monospace",fontSize:"0.75rem",color:"#333",wordBreak:"break-word",marginBottom:"8px",maxHeight:"60px",overflow:"hidden",display:"flex",flexWrap:"nowrap",gap:"4px",alignItems:"center"},children:nr(He.program)}),d.jsx("div",{style:{display:"flex",gap:"6px",justifyContent:"flex-end"},children:d.jsx("button",{onClick:bt=>{bt.stopPropagation(),Qi(He),$i(He.program),bn(!0)},style:{padding:"3px 6px",background:"#4169e1",color:"white",border:"none",borderRadius:"3px",cursor:"pointer",fontSize:"0.65rem",fontWeight:"500",fontFamily:"var(--font-body)",transition:"background 0.2s ease"},onMouseEnter:bt=>bt.target.style.background="#274bb5",onMouseLeave:bt=>bt.target.style.background="#4169e1",children:"View Program"})})]}):d.jsx("div",{style:{background:"transparent",borderRadius:"8px",padding:"12px",border:"1px solid transparent",width:"250px",minHeight:"110px",marginBottom:"0"}})})()}),d.jsx("div",{style:{position:"absolute",left:0,right:0,bottom:0},children:d.jsx(Gk,{voltage:ye,cardHeight:60})})]},V.deviceId)}):P.trim()?d.jsxs("div",{className:"fade-in-scale animate-on-mount-delay-8",style:{textAlign:"center",padding:"40px",color:"#666",background:"#fff",borderRadius:"12px",border:"2px dashed #e0e0e0"},children:['No robots found matching "',P,'". Try a different search term.']}):d.jsx("div",{className:"fade-in-scale animate-on-mount-delay-8",style:{textAlign:"center",padding:"40px",color:"#666",background:"#fff",borderRadius:"12px",border:"2px dashed #e0e0e0"},children:"No robots detected yet. Connect to micro:bit and send some data."})})()}),sr=Se.trim()?y.filter(w=>w.data.toLowerCase().includes(Se.toLowerCase())||w.timestamp.toLowerCase().includes(Se.toLowerCase())):y,In=d.jsx("div",{className:"data-container fade-in-scale animate-on-mount-delay-5",style:{marginTop:16},children:sr.length>0?sr.map((w,k)=>d.jsxs("div",{className:"data-item",children:[d.jsx("span",{className:"timestamp",children:_c(w.timestamp)}),d.jsx("span",{className:"data",children:w.data})]},k)):d.jsxs("div",{className:"data-item",children:["No data received",Se?" matching your search":""," yet"]})}),La=F&&d.jsxs("div",{className:"session-info fade-in-scale animate-on-mount-delay-4",children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:20},children:[d.jsxs("h2",{children:["Robot Data: ",F]}),d.jsx("button",{className:"clear-data-btn fade-in-scale animate-on-mount-delay-5",onClick:()=>G(null),children:"← Back to Robots"})]}),d.jsx("div",{className:"data-container fade-in-scale animate-on-mount-delay-6",style:{marginTop:16},children:di(F).length>0?di(F).map((w,k)=>d.jsxs("div",{className:"data-item",children:[d.jsx("span",{className:"timestamp",children:_c(w.timestamp)}),d.jsx("span",{className:"data",children:w.data})]},k)):d.jsx("div",{className:"data-item",children:"No data received from this robot yet"})})]}),Al=Array.from(he).every(w=>ee.has(w)),[mi,Va]=C.useState(""),[ki,Tl]=C.useState("");C.useEffect(()=>(ys?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[ys]);const[Gt,bn]=C.useState(!1),[on,Qi]=C.useState(null),[Xe,ft]=C.useState({x:2,y:2,dir:0,step:0,gridSize:5,offsetX:0,offsetY:0,robotScale:1,history:[{x:2,y:2,dir:0}],playing:!1}),pi=C.useRef(null),ln=w=>w?w.trim().split(/\s+/).map(k=>k.toLowerCase()):[],$i=w=>{ft({x:2,y:2,dir:0,step:0,gridSize:5,offsetX:0,offsetY:0,robotScale:1,history:[{x:2,y:2,dir:0}],playing:!1})},Pa=(w,k)=>{let{x:U,y:V,dir:$,gridSize:ye,offsetX:ge,offsetY:Ie,robotScale:Je}=w,De=$,Ze=U,mt=V,Rt=ye,Ct=ge,un=Ie,zn=Je;k==="forward"?($===0&&(mt-=1),$===1&&(Ze+=1),$===2&&(mt+=1),$===3&&(Ze-=1)):k==="reverse"?($===0&&(mt+=1),$===1&&(Ze-=1),$===2&&(mt-=1),$===3&&(Ze+=1)):k==="right"?De=($+1)%4:k==="left"&&(De=($+3)%4);const Di=-ge,Oi=ye-1-ge,ri=-Ie,Pt=ye-1-Ie;let yi=!1;if((Ze<Di||Ze>Oi||mt<ri||mt>Pt)&&(yi=!0),yi){Rt=ye+2;let He=Ze,bt=Ze,u=mt,v=mt;for(const T of w.history)He=Math.min(He,T.x),bt=Math.max(bt,T.x),u=Math.min(u,T.y),v=Math.max(v,T.y);Ct=Math.floor((Rt-1)/2)-Math.floor((bt+He)/2),un=Math.floor((Rt-1)/2)-Math.floor((v+u)/2),Rt/Math.max(w.gridSize,5)>1&&(zn=Je*.85)}return{...w,x:Ze,y:mt,dir:De,gridSize:Rt,offsetX:Ct,offsetY:un,robotScale:zn,history:[...w.history,{x:Ze,y:mt,dir:De}]}},rr=(w=!0)=>{if(!on)return;const k=ln(on.program);ft(U=>{let V=U.step;if(w&&V<k.length)return{...Pa(U,k[V]),step:V+1,playing:U.playing};if(!w&&V>0){let $={x:2,y:2,dir:0,step:0,gridSize:5,offsetX:0,offsetY:0,robotScale:1,history:[{x:2,y:2,dir:0}],playing:!1};for(let ye=0;ye<V-1;++ye)$=Pa($,k[ye]),$.step=ye+1;return{...$,playing:!1}}return U})},Ua=()=>{ft(w=>({...w,playing:!w.playing}))};C.useEffect(()=>{if(Xe.playing&&on){if(Xe.step>=ln(on.program).length){ft(w=>({...w,playing:!1}));return}pi.current=setTimeout(()=>{rr(!0)},1500)}else pi.current&&clearTimeout(pi.current);return()=>{pi.current&&clearTimeout(pi.current)}},[Xe.playing,Xe.step,on]);const[,Rl]=C.useState(0);C.useEffect(()=>{const w=setInterval(()=>{Rl(k=>k+1)},500);return()=>clearInterval(w)},[]);const[Cl,Ji]=C.useState(!1),[Es,kn]=C.useState(!1),es=()=>{Bt(ke).then(w=>{if(w.find(U=>U.status==="active"&&String(U.id)!==String(z==null?void 0:z.id))){kn(!0),Ji(!0);return}bs()})},[ts,As]=C.useState(!1),[gi,ar]=C.useState(!1),Ts=C.useRef(Date.now()),tn=C.useRef(null),Kn=()=>{Ts.current=Date.now(),gi&&ar(!1)};C.useEffect(()=>{Kn()},[S,y,ee,J]),C.useEffect(()=>{if(q!=="active")return;const w=()=>{Kn()};return document.addEventListener("click",w),document.addEventListener("keydown",w),document.addEventListener("mousemove",w),document.addEventListener("scroll",w),()=>{document.removeEventListener("click",w),document.removeEventListener("keydown",w),document.removeEventListener("mousemove",w),document.removeEventListener("scroll",w)}},[q]),C.useEffect(()=>{if(q!=="active"){console.log("Session not active, clearing inactivity timer"),tn.current&&clearTimeout(tn.current);return}console.log("Starting inactivity timer for active session"),tn.current&&clearTimeout(tn.current);const w=()=>{const U=Date.now()-Ts.current;console.log("Checking inactivity, elapsed:",U,"ms"),U>=10*60*1e3?(console.log("Inactivity detected, pausing session"),Bn(),ar(!0)):(console.log("Still active, checking again in 1 minute"),tn.current=setTimeout(w,60*1e3))};return tn.current=setTimeout(w,60*1e3),()=>{tn.current&&(console.log("Clearing inactivity timer"),clearTimeout(tn.current))}},[q,Bn]),C.useEffect(()=>{q!=="paused"&&ar(!1)},[q]);const[or,Yn]=C.useState(!1),cn={lesson1:"https://docs.google.com/document/d/15hDBUGjhOFpLSPmmkFJMXMcShzhLqdaBW9WTI3UOFXs/edit?tab=t.0#heading=h.a6lqxihc6dhl",lesson2:"https://docs.google.com/document/d/13E9Lz6l0eP4ZT-kJBxJST35SX4427fOw6XLlfcZpwm0/edit?tab=t.0#heading=h.a6lqxihc6dhl",lesson3:"https://docs.google.com/document/d/1qHoE0t6diltiHJbYG4hKiGGIJOQFLw3rRNMmLgWc-1E/edit?tab=t.0#heading=h.a6lqxihc6dhl",lesson4:"https://docs.google.com/document/d/14jte14tL0Txgm1CdY9kZsbov0lZDoqv7UyhECFW8ioI/edit?tab=t.0#heading=h.a6lqxihc6dhl"},[ns,Rs]=C.useState(!1),[Qn,Ni]=C.useState(null);C.useEffect(()=>{const w=k=>{q==="active"&&z&&z.id&&localStorage.setItem("unsavedSession",JSON.stringify({...z,name:J,status:q,robots:S,receivedData:y,completedRobots:Array.from(ee),lessonCompletions:Object.fromEntries(Object.entries(ze).map(([U,V])=>[U,Array.from(V)])),sessionNotes:we,lastUpdated:new Date().toISOString()}))};return window.addEventListener("beforeunload",w),()=>{window.removeEventListener("beforeunload",w)}},[q,z,J,S,y,ee,ze,we]),C.useEffect(()=>()=>{vb(),g(!1)},[]);const[To,Vt]=C.useState(!1),[gt,Cs]=C.useState(null);C.useEffect(()=>{const w=localStorage.getItem("unsavedSession");if(w&&ke){const k=JSON.parse(w);Bt(ke).then(U=>{const V=U.findIndex($=>String($.id)===String(k.id));V>=0?U[V]=k:U.push(k),Gn(ke,U),localStorage.removeItem("unsavedSession")})}},[ke]);const is=w=>{if(!nt.current)return;const U=window.getSelection();if(!(!U.rangeCount||U.getRangeAt(0).collapsed))switch(tt(V=>({...V,[w]:!V[w]})),w){case"bold":document.execCommand("bold",!1,null);break;case"italic":document.execCommand("italic",!1,null);break;case"underline":document.execCommand("underline",!1,null);break;default:return}},Ro=w=>{if(!nt.current)return;const U=window.getSelection();!U.rangeCount||U.getRangeAt(0).collapsed||(tt(V=>({...V,color:w})),document.execCommand("foreColor",!1,w))},Ur=()=>{if(!nt.current)return;const k=window.getSelection(),U=k.rangeCount>0&&!k.getRangeAt(0).collapsed;kt(U),U&&tt({bold:document.queryCommandState("bold"),italic:document.queryCommandState("italic"),underline:document.queryCommandState("underline"),color:Ge.color})},Br=()=>{},ji=()=>{},lr=()=>{const w=window.getSelection(),k=w&&w.toString().length>0;kt(k),tt(k?{bold:document.queryCommandState("bold"),italic:document.queryCommandState("italic"),underline:document.queryCommandState("underline"),color:Ge.color}:{bold:!1,italic:!1,underline:!1,color:Ge.color})},$n=()=>{const w=window.getSelection(),k=w&&w.toString().length>0;kt(k),tt(k?{bold:document.queryCommandState("bold"),italic:document.queryCommandState("italic"),underline:document.queryCommandState("underline"),color:Ge.color}:{bold:!1,italic:!1,underline:!1,color:Ge.color})};C.useEffect(()=>(document.addEventListener("selectionchange",$n),()=>{document.removeEventListener("selectionchange",$n)}),[]);const Co=w=>{const k=nt.current;k&&(St(k.innerHTML),(q==="active"||q==="paused"||q==="ended")&&z&&z.id&&Ii())},Il=w=>{if(w.key.length===1){if(!nt.current)return;const U=window.getSelection();if(U.rangeCount>0){const V=U.getRangeAt(0);if(V.collapsed){const $=V.startContainer,ye=V.startOffset;if($.nodeType===Node.TEXT_NODE&&ye===$.length){const ge=$.parentElement;ge&&(ge.tagName==="B"||ge.tagName==="I"||ge.tagName==="U"||ge.style.color)&&document.execCommand("removeFormat",!1,null)}}}}};return C.useEffect(()=>{const w=nt.current;w?(console.log("Setting innerHTML:",we),console.log("Current editor.innerHTML:",w.innerHTML),console.log("Active tab:",ve),we!==w.innerHTML&&(w.innerHTML=we,console.log("Updated editor.innerHTML to:",we))):console.log("Editor not found, activeTab:",ve)},[we,ve]),d.jsxs("div",{className:"dashboard-container",children:[d.jsx(lu,{className:"slide-in-from-left"}),d.jsxs("div",{className:"main-content slide-in-from-bottom",children:[d.jsx("div",{className:"top-bar slide-in-from-top",children:d.jsxs("div",{className:"session-header",children:[d.jsx("button",{className:"back-btn fade-in-scale animate-on-mount-delay-1",onClick:async()=>{if(q==="active"&&fe){Ni(()=>async()=>{n("/sessions",{replace:!0});try{await ni()}catch(w){console.error("Error in background cleanup:",w)}}),Rs(!0);return}n("/sessions",{replace:!0});try{await ni()}catch(w){console.error("Error in background cleanup:",w)}},children:"Sessions"}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:20,flex:1},children:[d.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:10,flex:1},children:[d.jsx("div",{style:{fontFamily:"Space Mono, monospace",fontSize:"0.9rem",fontWeight:"600",color:"#666",textTransform:"uppercase",letterSpacing:"0.5px",textDecoration:"underline",textUnderlineOffset:"6px"},children:"Session Name"}),d.jsx("input",{type:"text",value:J,onChange:w=>Y(w.target.value),className:"session-title-input animate-on-mount-delay-2",onFocus:w=>w.target.style.borderColor="#4169e1",onBlur:w=>w.target.style.borderColor="#e0e0e0",disabled:q==="ended",placeholder:"Enter session name...",style:{border:"1.5px solid #e0e0e0",borderRadius:"8px",padding:"12px 16px",fontSize:"1.1rem",fontWeight:"600",background:"#fff",color:"#222",transition:"border-color 0.2s ease",outline:"none",width:"100%",height:"40px",maxWidth:"250px"}})]}),d.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:10},children:[d.jsx("div",{style:{fontFamily:"Space Mono, monospace",fontSize:"0.9rem",fontWeight:"600",color:"#666",textTransform:"uppercase",letterSpacing:"0.5px",textDecoration:"underline",textUnderlineOffset:"6px"},children:"Session Controls"}),d.jsxs("div",{style:{display:"flex",gap:12},children:[(q==="active"||q==="paused"||q==="ended")&&d.jsxs(d.Fragment,{children:[d.jsxs("button",{className:"session-btn save-btn fade-in-scale animate-on-mount-delay-4",onClick:ir,disabled:!fe,style:{opacity:fe?1:.5,cursor:fe?"pointer":"not-allowed",transition:"all 0.3s ease",background:fe?"#4169e1":"#9ca3af",color:fe?"#fff":"#6b7280",border:fe?"none":"1px solid #d1d5db",boxShadow:fe?"0 2px 8px rgba(65, 105, 225, 0.2)":"none"},children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"18px",height:"18px"},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 3.75V16.5L12 14.25 7.5 16.5V3.75m9 0H18A2.25 2.25 0 0 1 20.25 6v12A2.25 2.25 0 0 1 18 20.25H6A2.25 2.25 0 0 1 3.75 18V6A2.25 2.25 0 0 1 6 3.75h1.5m9 0h-9"})}),fe?"Save":"Saved"]}),q==="active"&&d.jsxs(d.Fragment,{children:[d.jsxs("button",{className:"session-btn pause-btn fade-in-scale animate-on-mount-delay-5",onClick:Bn,children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"18px",height:"18px"},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25v13.5m-7.5-13.5v13.5"})}),"Pause"]}),d.jsxs("button",{className:"session-btn end-btn fade-in-scale animate-on-mount-delay-6",onClick:Zi,children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"18px",height:"18px"},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 7.5A2.25 2.25 0 0 1 7.5 5.25h9a2.25 2.25 0 0 1 2.25 2.25v9a2.25 2.25 0 0 1-2.25 2.25h-9a2.25 2.25 0 0 1-2.25-2.25v-9Z"})}),"End"]})]}),q==="paused"&&d.jsxs(d.Fragment,{children:[d.jsxs("button",{className:"session-btn resume-btn fade-in-scale animate-on-mount-delay-5",onClick:es,children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"18px",height:"18px"},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347c-.75.412-1.667-.13-1.667-.986V5.653Z"})}),"Resume"]}),d.jsxs("button",{className:"session-btn end-btn fade-in-scale animate-on-mount-delay-6",onClick:Zi,children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"18px",height:"18px"},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 7.5A2.25 2.25 0 0 1 7.5 5.25h9a2.25 2.25 0 0 1 2.25 2.25v9a2.25 2.25 0 0 1-2.25 2.25h-9a2.25 2.25 0 0 1-2.25-2.25v-9Z"})}),"End"]})]})]}),q==="ended"&&d.jsxs("button",{className:"session-btn delete-btn fade-in-scale animate-on-mount-delay-4",onClick:_s,children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"18px",height:"18px"},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})}),"Delete Session"]})]})]})]})]})}),z?d.jsxs("div",{className:"session-view-content",children:[d.jsxs("div",{className:"session-tabs fade-in-scale animate-on-mount-delay-1",style:{display:"flex",borderBottom:"2px solid #f0f0f0",marginBottom:"24px",gap:"0"},children:[d.jsx("button",{onClick:()=>Re("main"),style:{flex:1,padding:"12px 24px",border:"none",background:ve==="main"?"#4169e1":"transparent",color:ve==="main"?"white":"#666",cursor:"pointer",fontSize:"16px",fontWeight:"600",borderRadius:"8px 8px 0 0",transition:"all 0.2s ease",borderBottom:ve==="main"?"2px solid #4169e1":"2px solid transparent"},children:"Session"}),d.jsx("button",{onClick:()=>Re("notes"),style:{flex:1,padding:"12px 24px",border:"none",background:ve==="notes"?"#4169e1":"transparent",color:ve==="notes"?"white":"#666",cursor:"pointer",fontSize:"16px",fontWeight:"600",borderRadius:"8px 8px 0 0",transition:"all 0.2s ease",borderBottom:ve==="notes"?"2px solid #4169e1":"2px solid transparent"},children:"Notes"}),d.jsx("button",{onClick:()=>Re("settings"),style:{flex:1,padding:"12px 24px",border:"none",background:ve==="settings"?"#4169e1":"transparent",color:ve==="settings"?"white":"#666",cursor:"pointer",fontSize:"16px",fontWeight:"600",borderRadius:"8px 8px 0 0",transition:"all 0.2s ease",borderBottom:ve==="settings"?"2px solid #4169e1":"2px solid transparent"},children:"Settings"})]}),ve==="main"&&d.jsxs("div",{className:"tab-content fade-in-scale animate-on-mount-delay-2",children:[d.jsxs("div",{className:"session-section fade-in-scale animate-on-mount-delay-1",children:[d.jsxs("div",{className:"section-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer"},onClick:()=>Ci("connection"),children:[d.jsx("h2",{children:"Connection"}),d.jsx("button",{onClick:w=>{w.stopPropagation(),Ci("connection")},style:{background:"none",border:"none",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"background-color 0.2s",display:"flex",alignItems:"center",justifyContent:"center",outline:"none"},onMouseEnter:w=>w.target.style.backgroundColor="#f0f0f0",onMouseLeave:w=>w.target.style.backgroundColor="transparent",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"20px",height:"20px",transform:lt.connection?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s"},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})})})]}),!lt.connection&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{style:{marginBottom:"12px",padding:"8px 0px",backgroundColor:"transparent",borderRadius:"6px",border:"none",display:"flex",alignItems:"center",gap:"8px"},children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"16px",height:"16px",color:"#666",flexShrink:0},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.625 9.75a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H8.25m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H12m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0h-.375m-13.5 3.01c0 1.6 1.123 2.994 2.707 3.227 1.087.16 2.185.283 3.293.369V21l4.184-4.183a1.14 1.14 0 0 1 .778-.332 48.294 48.294 0 0 0 5.83-.498c1.585-.233 2.708-1.626 2.708-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0 0 12 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018Z"})}),d.jsx("p",{style:{margin:0,color:"#666",fontSize:"12px",lineHeight:"1.4",fontFamily:"Space Mono, monospace"},children:"Plug in your receiver micro:bit to your computer and click the button below to connect."})]}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16},children:[d.jsxs("button",{className:`connection-btn ${p?"disconnect":"connect"} fade-in-scale animate-on-mount-delay-2`,onClick:p?Qs:ja,disabled:q==="ended"||q==="paused",children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"18px",height:"18px"},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.288 15.038a5.25 5.25 0 0 1 7.424 0M5.106 11.856c3.807-3.808 9.98-3.808 13.788 0M1.924 8.674c5.565-5.565 14.587-5.565 20.152 0M12.53 18.22l-.53.53-.53-.53a.75.75 0 0 1 1.06 0Z"})}),p?"Disconnect":"Connect"]}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[d.jsx("div",{className:`status-dot ${p?"connected":""} animate-on-mount-delay-3`,style:{width:"12px",height:"12px",borderRadius:"50%",backgroundColor:p?"#4CAF50":"#b0b0b0",transition:"background-color 0.3s ease"}}),d.jsx("span",{style:{color:"#666",fontSize:"14px"},children:p?"Connected to micro:bit":"Not connected"})]})]})]})]}),d.jsxs("div",{className:"session-section fade-in-scale animate-on-mount-delay-2",children:[d.jsxs("div",{className:"section-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer"},onClick:()=>Ci("lessonProgress"),children:[d.jsx("h2",{children:"Lesson Progress"}),d.jsx("button",{onClick:w=>{w.stopPropagation(),Ci("lessonProgress")},style:{background:"none",border:"none",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"background-color 0.2s",display:"flex",alignItems:"center",justifyContent:"center",outline:"none"},onMouseEnter:w=>w.target.style.backgroundColor="#f0f0f0",onMouseLeave:w=>w.target.style.backgroundColor="transparent",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"20px",height:"20px",transform:lt.lessonProgress?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s"},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})})})]}),!lt.lessonProgress&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{style:{marginBottom:"12px",padding:"8px 0px",backgroundColor:"transparent",borderRadius:"6px",border:"none",display:"flex",alignItems:"center",gap:"8px"},children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"16px",height:"16px",color:"#666",flexShrink:0},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.625 9.75a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H8.25m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H12m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0h-.375m-13.5 3.01c0 1.6 1.123 2.994 2.707 3.227 1.087.16 2.185.283 3.293.369V21l4.184-4.183a1.14 1.14 0 0 1 .778-.332 48.294 48.294 0 0 0 5.83-.498c1.585-.233 2.708-1.626 2.708-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0 0 12 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018Z"})}),d.jsx("p",{style:{margin:0,color:"#666",fontSize:"12px",lineHeight:"1.4",fontFamily:"Space Mono, monospace"},children:"Select a lesson and track your students' progress. When you mark a student as complete, the progress bar will update."})]}),d.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:16,gap:16},children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"lesson-select",style:{fontWeight:600,marginRight:12},children:"Select Lesson:"}),d.jsx("select",{id:"lesson-select",value:Le,onChange:w=>{Vr(w.target.value),Yt(w.target.value)},style:{padding:"6px 12px",borderRadius:6,border:"1px solid #e0e0e0",fontSize:14,fontFamily:"Space Mono, monospace",width:"200px",minWidth:"200px"},children:Rn.map(w=>d.jsx("option",{value:w.id,style:{fontFamily:"Space Mono, monospace"},children:w.name},w.id))})]}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[d.jsx("button",{style:{padding:"8px 18px",borderRadius:8,background:"#4169e1",color:"#fff",fontWeight:600,fontSize:15,border:"none",boxShadow:"0 2px 8px rgba(65, 105, 225, 0.10)",cursor:"pointer",marginBottom:0},onClick:()=>Yn(!0),children:"Lesson History"}),d.jsx("button",{style:{padding:"8px 12px",borderRadius:8,background:Le==="none"||!cn[Le]?"#e0e0e0":"#f7f7f7",color:Le==="none"||!cn[Le]?"#b0b0b0":"#444",fontWeight:600,fontSize:15,border:"1.5px solid #d0d0d0",boxShadow:"0 2px 8px rgba(65, 105, 225, 0.04)",cursor:Le==="none"||!cn[Le]?"not-allowed":"pointer",marginBottom:0,display:"flex",alignItems:"center",gap:6,transition:"background 0.2s, color 0.2s, border 0.2s"},disabled:Le==="none"||!cn[Le],title:Le==="none"||!cn[Le]?"Select a lesson with a link to pop out":"Open lesson link in new window",onMouseEnter:w=>{Le==="none"||!cn[Le]||(w.target.style.background="#ededed",w.target.style.color="#222",w.target.style.borderColor="#b0b0b0")},onMouseLeave:w=>{Le==="none"||!cn[Le]||(w.target.style.background="#f7f7f7",w.target.style.color="#444",w.target.style.borderColor="#d0d0d0")},onClick:()=>{Le==="none"||!cn[Le]||window.open(cn[Le],"_blank","toolbar=yes,scrollbars=yes,resizable=yes,top=0,left=0,width="+window.screen.width+",height="+window.screen.height)},children:d.jsxs("span",{style:{display:"flex",alignItems:"center",gap:4,background:Le==="none"||!cn[Le]?"#e0e0e0":"#f7f7f7",borderRadius:6,padding:"0 2px",transition:"background 0.2s, color 0.2s, border 0.2s"},children:["Pop out",d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"20px",height:"20px",marginLeft:4},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"})})]})})]})]}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"20px",padding:"20px 0"},children:[d.jsx("div",{style:{flex:1,height:"32px",background:"#f8f9fa",borderRadius:"16px",overflow:"hidden",position:"relative",border:"2px solid #e0e0e0"},children:d.jsx("div",{style:{height:"100%",background:"linear-gradient(90deg, #4169e1 0%, #274bb5 100%)",borderRadius:"14px",width:`${Object.keys(S).length>0?(((Is=ze[Le])==null?void 0:Is.size)||0)/Object.keys(S).length*100:0}%`,transition:"width 0.5s cubic-bezier(0.4, 0, 0.2, 1)",position:"absolute",left:0,top:0,boxShadow:"0 2px 8px rgba(65, 105, 225, 0.2)"}})}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",fontSize:"16px",fontWeight:"600"},children:[d.jsx("span",{style:{color:"#4169e1"},children:((cr=ze[Le])==null?void 0:cr.size)||0}),d.jsx("span",{style:{color:"#666"},children:"/"}),d.jsx("span",{style:{color:"#222"},children:Object.keys(S).length}),d.jsxs("span",{style:{color:"#666",fontSize:"14px"},children:["(",Object.keys(S).length>0?Math.round((((zr=ze[Le])==null?void 0:zr.size)||0)/Object.keys(S).length*100):0,"%)"]})]})]}),d.jsxs("div",{style:{display:"flex",gap:"16px",alignItems:"center",marginTop:"8px",marginLeft:"2px",fontSize:"14px",color:"#666"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[d.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"50%",background:"#4169e1"}}),d.jsx("span",{children:"Completed"})]}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[d.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"50%",background:"#e0e0e0"}}),d.jsx("span",{children:"In Progress"})]})]})]})]}),d.jsxs("div",{className:"session-section fade-in-scale animate-on-mount-delay-3",style:{minWidth:0,height:lt.robotsAndPrograms?"auto":"600px",overflow:"hidden"},children:[d.jsxs("div",{className:"section-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer"},onClick:()=>Ci("robotsAndPrograms"),children:[d.jsx("h2",{children:"Robots"}),d.jsx("button",{onClick:w=>{w.stopPropagation(),Ci("robotsAndPrograms")},style:{background:"none",border:"none",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"background-color 0.2s",display:"flex",alignItems:"center",justifyContent:"center",outline:"none"},onMouseEnter:w=>w.target.style.backgroundColor="#f0f0f0",onMouseLeave:w=>w.target.style.backgroundColor="transparent",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"20px",height:"20px",transform:lt.robotsAndPrograms?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s"},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})})})]}),!lt.robotsAndPrograms&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{style:{marginBottom:"12px",padding:"8px 0px",backgroundColor:"transparent",borderRadius:"6px",border:"none",display:"flex",alignItems:"center",gap:"8px"},children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"16px",height:"16px",color:"#666",flexShrink:0},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.625 9.75a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H8.25m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H12m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0h-.375m-13.5 3.01c0 1.6 1.123 2.994 2.707 3.227 1.087.16 2.185.283 3.293.369V21l4.184-4.183a1.14 1.14 0 0 1 .778-.332 48.294 48.294 0 0 0 5.83-.498c1.585-.233 2.708-1.626 2.708-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0 0 12 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018Z"})}),d.jsx("p",{style:{margin:0,color:"#666",fontSize:"12px",lineHeight:"1.4",fontFamily:"Space Mono, monospace"},children:"Once you have connected your micro:bit, robots that have sent data will appear here."})]}),d.jsx("div",{style:{minWidth:0,height:"calc(100% - 60px)",overflow:"hidden"},children:d.jsxs("div",{style:{minWidth:0,height:"100%",overflow:"hidden",display:"flex",flexDirection:"column"},children:[d.jsx("div",{style:{marginBottom:"20px",flexShrink:0},children:d.jsxs("h3",{style:{fontSize:"1.1rem",fontWeight:"600",color:"#222",marginBottom:"0px"},children:["Robots (",(()=>{const w=si(),k=Object.keys(S).length,U=Object.keys(w).length;return P.trim()?`${U} of ${k}`:k})(),")"]})}),d.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px",marginBottom:"20px",padding:"12px 0",flexShrink:0},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",flexWrap:"wrap"},children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"16px",height:"16px",color:"#666"},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})}),d.jsx("input",{type:"text",placeholder:"Search robots by ID or tags...",value:P,onChange:w=>oe(w.target.value),style:{padding:"8px 12px",border:"1px solid #e0e0e0",borderRadius:"6px",fontSize:"14px",width:"290px",outline:"none",transition:"border-color 0.2s"},onFocus:w=>w.target.style.borderColor="#4169e1",onBlur:w=>w.target.style.borderColor="#e0e0e0"}),Object.keys(S).length>0&&d.jsx("button",{className:"clear-data-btn fade-in-scale animate-on-mount-delay-7",onClick:Xi,style:{padding:"8px 12px",height:"36px",fontSize:"14px",display:"flex",alignItems:"center",justifyContent:"center"},children:"Clear Robots"}),(()=>{const w=si(),k=Object.keys(w);return k.length>0&&d.jsx("button",{className:"clear-data-btn fade-in-scale animate-on-mount-delay-6",onClick:()=>{const U=k.length>0&&k.every(V=>he.has(V));ie(U?new Set:new Set(k))},style:{padding:"8px 12px",height:"36px",fontSize:"14px",display:"flex",alignItems:"center",justifyContent:"center"},children:k.length>0&&k.every(V=>he.has(V))?"Deselect All":"Select All"})})()]}),he.size>0&&d.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:"8px"},children:[d.jsxs("button",{className:"fade-in-scale animate-on-mount-delay-4",style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"14px",padding:"8px 12px",height:"36px",background:"#dc3545",color:"#fff",border:"none",borderRadius:"6px",boxShadow:"0 2px 8px rgba(220, 53, 69, 0.15)",cursor:"pointer",transition:"background 0.2s"},onClick:()=>{if(!window.confirm(`Are you sure you want to delete the selected robot${he.size>1?"s":""}? This cannot be undone.`))return;const w={...S};he.forEach(k=>{delete w[k]}),A(w),ie(new Set)},children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"14px",height:"14px"},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})}),"Delete Selected"]}),Le!=="none"&&d.jsxs("button",{className:"fade-in-scale animate-on-mount-delay-5",style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"14px",padding:"8px 12px",height:"36px",background:"#4169e1",color:"#fff",border:"none",borderRadius:"6px",boxShadow:"0 2px 8px rgba(65, 105, 225, 0.15)",cursor:"pointer",transition:"background 0.2s"},onClick:()=>{_e(w=>{const k=new Set(w);return Array.from(he).every(V=>ee.has(V))?he.forEach(V=>k.delete(V)):he.forEach(V=>k.add(V)),k})},children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"14px",height:"14px"},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),Al?"Undo Done":"Mark as Done"]}),N&&d.jsxs("button",{className:"fade-in-scale animate-on-mount-delay-5",onClick:Ss,style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"14px",padding:"8px 12px",height:"36px",background:"#a259e1",color:"#fff",border:"none",borderRadius:"6px",boxShadow:"0 2px 8px rgba(162, 89, 225, 0.15)",cursor:"pointer",transition:"background 0.2s"},children:[d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"14px",height:"14px"},children:[d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.568 3H5.25A2.25 2.25 0 0 0 3 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.732.699 2.431 0l4.318-4.318c.699-.699.699-1.732 0-2.431L9.568 3Z"}),d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 6h.008v.008H6V6Z"})]}),"Assign"]})]})]}),d.jsxs("div",{style:{flex:1,overflow:"auto"},children:[!F&&Ma,La]})]})})]})]}),d.jsxs("div",{className:"session-section fade-in-scale animate-on-mount-delay-4",children:[d.jsxs("div",{className:"section-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer"},onClick:()=>Ci("dataReceived"),children:[d.jsxs("h2",{children:["Logs (",y.length,")"]}),d.jsx("button",{onClick:w=>{w.stopPropagation(),Ci("dataReceived")},style:{background:"none",border:"none",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"background-color 0.2s",display:"flex",alignItems:"center",justifyContent:"center",outline:"none"},onMouseEnter:w=>w.target.style.backgroundColor="#f0f0f0",onMouseLeave:w=>w.target.style.backgroundColor="transparent",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"20px",height:"20px",transform:lt.dataReceived?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s"},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})})})]}),!lt.dataReceived&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{style:{marginBottom:"12px",padding:"8px 0px",backgroundColor:"transparent",borderRadius:"6px",border:"none",display:"flex",alignItems:"center",gap:"8px"},children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"16px",height:"16px",color:"#666",flexShrink:0},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.625 9.75a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H8.25m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H12m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0h-.375m-13.5 3.01c0 1.6 1.123 2.994 2.707 3.227 1.087.16 2.185.283 3.293.369V21l4.184-4.183a1.14 1.14 0 0 1 .778-.332 48.294 48.294 0 0 0 5.83-.498c1.585-.233 2.708-1.626 2.708-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0 0 12 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018Z"})}),d.jsx("p",{style:{margin:0,color:"#666",fontSize:"12px",lineHeight:"1.4",fontFamily:"Space Mono, monospace"},children:"View data being sent to your receiver micro:bit in real-time."})]}),d.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"16px",marginBottom:"12px"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"16px",height:"16px",color:"#666"},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})}),d.jsx("input",{type:"text",placeholder:"Search logs...",value:Se,onChange:w=>Te(w.target.value),style:{padding:"8px 12px",border:"1px solid #e0e0e0",borderRadius:"6px",fontSize:"14px",width:"300px",outline:"none",transition:"border-color 0.2s"},onFocus:w=>w.target.style.borderColor="#4169e1",onBlur:w=>w.target.style.borderColor="#e0e0e0"})]}),y.length>0&&d.jsx("button",{className:"clear-data-btn fade-in-scale animate-on-mount-delay-5",onClick:Wi,style:{padding:"8px 12px",height:"36px",fontSize:"14px",display:"flex",alignItems:"center",justifyContent:"center"},children:"Clear Data"})]}),In]})]})]}),ve==="notes"&&d.jsx("div",{className:"tab-content fade-in-scale animate-on-mount-delay-2",children:d.jsxs("div",{style:{padding:"24px"},children:[d.jsx("h2",{style:{marginBottom:"24px",color:"#222",fontWeight:"700"},children:"Session Notes"}),d.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"16px",padding:"12px",backgroundColor:"#f8f9fa",borderRadius:"8px",border:"1px solid #e9ecef"},children:[d.jsx("button",{onClick:()=>ot&&is("bold"),disabled:!ot,style:{padding:"8px 12px",border:"1px solid #dee2e6",borderRadius:"6px",background:Ge.bold?"#4169e1":"#fff",color:ot?Ge.bold?"#fff":"#495057":"#ccc",cursor:ot?"pointer":"not-allowed",fontWeight:"bold",fontSize:"14px",transition:"all 0.2s ease",opacity:ot?1:.5},title:ot?"Bold (Ctrl+B)":"Select text to format",children:"B"}),d.jsx("button",{onClick:()=>ot&&is("italic"),disabled:!ot,style:{padding:"8px 12px",border:"1px solid #dee2e6",borderRadius:"6px",background:Ge.italic?"#4169e1":"#fff",color:ot?Ge.italic?"#fff":"#495057":"#ccc",cursor:ot?"pointer":"not-allowed",fontStyle:"italic",fontSize:"14px",transition:"all 0.2s ease",opacity:ot?1:.5},title:ot?"Italic (Ctrl+I)":"Select text to format",children:"I"}),d.jsx("button",{onClick:()=>ot&&is("underline"),disabled:!ot,style:{padding:"8px 12px",border:"1px solid #dee2e6",borderRadius:"6px",background:Ge.underline?"#4169e1":"#fff",color:ot?Ge.underline?"#fff":"#495057":"#ccc",cursor:ot?"pointer":"not-allowed",textDecoration:"underline",fontSize:"14px",transition:"all 0.2s ease",opacity:ot?1:.5},title:ot?"Underline (Ctrl+U)":"Select text to format",children:"U"}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[d.jsx("span",{style:{fontSize:"14px",color:ot?"#495057":"#ccc"},children:"Color:"}),d.jsx("div",{style:{display:"flex",gap:"4px"},children:["#000000","#FF0000","#FFA500","#FFD700","#228B22","#0000FF","#800080"].map(w=>d.jsx("button",{onClick:()=>ot&&Ro(w),disabled:!ot,style:{width:"24px",height:"24px",backgroundColor:w,border:Ge.color===w?"2px solid #333":"1px solid #dee2e6",borderRadius:"1000px",cursor:ot?"pointer":"not-allowed",opacity:ot?1:.5,transition:"all 0.2s ease"},title:ot?`Change text color to ${w}`:"Select text to change color"},w))})]})]}),d.jsx("div",{ref:nt,contentEditable:!0,onInput:Co,onKeyDown:Il,onFocus:Br,onBlur:Ur,onKeyUp:ji,onMouseUp:lr,placeholder:"Enter your notes here...",style:{width:"100%",minHeight:"300px",padding:"16px",border:"1px solid #e0e0e0",borderRadius:"8px",fontSize:"14px",lineHeight:"1.6",fontFamily:"inherit",color:Ge.color,backgroundColor:"#fff",boxShadow:"inset 0 1px 3px rgba(0,0,0,0.1)",outline:"none",overflowY:"auto",wordWrap:"break-word"}}),d.jsxs("div",{style:{marginTop:"12px",padding:"12px",backgroundColor:"#f8f9fa",borderRadius:"6px",fontSize:"13px",color:"#6c757d"},children:[d.jsx("strong",{children:"Tip:"})," Select text and use the toolbar above to apply formatting."]})]})}),ve==="settings"&&d.jsx("div",{className:"tab-content fade-in-scale animate-on-mount-delay-2",children:d.jsxs("div",{style:{padding:"24px"},children:[d.jsx("h2",{style:{marginBottom:"24px",color:"#222",fontWeight:"700"},children:"Session Settings"}),d.jsxs("div",{style:{marginBottom:"32px",padding:"24px",backgroundColor:"#f8f9fa",borderRadius:"12px",border:"1px solid #e9ecef"},children:[d.jsx("h3",{style:{marginBottom:"16px",color:"#222",fontWeight:"600"},children:"Classroom"}),d.jsxs("p",{style:{marginBottom:"16px",color:"#666",fontSize:"14px",lineHeight:"1.5"},children:["Change the classroom associated with this session. When you change the classroom, ",d.jsx("strong",{children:"all robot assignments will be cleared."})]}),d.jsxs("div",{style:{marginBottom:"16px"},children:[d.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",color:"#333"}}),N?d.jsxs("div",{style:{display:"inline-block",padding:"8px 12px",backgroundColor:N.color||"#4169e1",color:"#fff",borderRadius:"6px",fontSize:"14px",fontWeight:"500"},children:["Current Classroom: ",N.name]}):d.jsx("div",{style:{display:"inline-block",padding:"8px 12px",backgroundColor:"#e0e0e0",color:"#666",borderRadius:"6px",fontSize:"14px",fontWeight:"500"},children:"No classroom assigned"})]}),d.jsxs("div",{style:{marginBottom:"16px"},children:[d.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",color:"#333"},children:"Change to:"}),d.jsxs("select",{value:(N==null?void 0:N.id)||"",onChange:w=>Ks(w.target.value||null),style:{width:"100%",padding:"12px 16px",border:"1px solid #e0e0e0",borderRadius:"8px",fontSize:"14px",backgroundColor:"#fff",color:"#222",fontFamily:"Space Mono, monospace"},children:[d.jsx("option",{value:"",children:"No classroom"}),I.map(w=>d.jsx("option",{value:w.id,children:w.name},w.id))]})]})]})]})})]}):d.jsx("div",{className:"session-view-content",children:d.jsx("div",{style:{textAlign:"center",padding:"50px",color:"#666"},children:"Loading session..."})})]}),j&&$e&&N&&d.jsx("div",{className:"modal-overlay",onClick:()=>Fe(!1),children:d.jsxs("div",{className:"modal-content",onClick:w=>w.stopPropagation(),style:{maxWidth:"500px"},children:[d.jsxs("div",{className:"modal-header",children:[d.jsxs("h2",{children:["Assign Robot: ",$e]}),d.jsx("button",{className:"modal-close",onClick:()=>Fe(!1),children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"20",height:"20",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),d.jsxs("div",{className:"modal-body",children:[d.jsxs("div",{style:{marginBottom:"20px"},children:[d.jsx("h3",{style:{marginBottom:"10px",color:"#222"},children:"Assign to Student"}),d.jsxs("select",{onChange:w=>{w.target.value&&(wo($e,w.target.value),Fe(!1))},defaultValue:"",style:{width:"100%",padding:"8px 12px",border:"1px solid #e0e0e0",borderRadius:"6px",fontSize:"14px"},children:[d.jsx("option",{value:"",children:"Select a student..."}),N.students.map(w=>d.jsxs("option",{value:w.id,children:[w.name," (",w.email,")"]},w.id))]})]}),d.jsxs("div",{style:{marginBottom:"20px"},children:[d.jsx("h3",{style:{marginBottom:"10px",color:"#222"},children:"Assign to Group"}),d.jsxs("select",{onChange:w=>{w.target.value&&(So($e,w.target.value),Fe(!1))},defaultValue:"",style:{width:"100%",padding:"8px 12px",border:"1px solid #e0e0e0",borderRadius:"6px",fontSize:"14px"},children:[d.jsx("option",{value:"",children:"Select a group..."}),N.groups.map(w=>d.jsxs("option",{value:w.id,children:[w.name," (",w.students.length," students)"]},w.id))]})]}),((ur=S[$e])==null?void 0:ur.assignedTo)&&d.jsxs("div",{style:{marginTop:"20px",padding:"12px",background:"#fff3cd",borderRadius:"6px",border:"1px solid #ffeaa7"},children:[d.jsx("h4",{style:{margin:"0 0 8px 0",color:"#856404"},children:"Current Assignment"}),d.jsxs("p",{style:{margin:"0",color:"#856404"},children:["Currently assigned to: ",S[$e].assignedTo.name]}),d.jsx("button",{onClick:()=>{ws($e),Fe(!1)},style:{marginTop:"8px",background:"#dc3545",color:"white",border:"none",padding:"6px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Unassign Robot"})]})]}),d.jsx("div",{className:"modal-footer",children:d.jsx("button",{className:"btn-secondary",onClick:()=>Fe(!1),children:"Cancel"})})]})}),Ae&&N&&d.jsx("div",{className:"modal-overlay",onClick:()=>D(!1),children:d.jsxs("div",{className:"modal-content",onClick:w=>w.stopPropagation(),style:{maxWidth:"500px"},children:[d.jsxs("div",{className:"modal-header",children:[d.jsxs("h2",{children:["Assign ",he.size," Robot",he.size!==1?"s":""]}),d.jsx("button",{className:"modal-close",onClick:()=>D(!1),children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"20",height:"20",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),d.jsx("div",{className:"modal-body",children:N?d.jsxs(d.Fragment,{children:[d.jsxs("div",{style:{marginBottom:"20px"},children:[d.jsx("h3",{style:{marginBottom:"10px",color:"#222"},children:"Assign to Student"}),d.jsxs("select",{onChange:w=>{w.target.value&&tr(w.target.value)},defaultValue:"",style:{width:"100%",padding:"8px 12px",border:"1px solid #e0e0e0",borderRadius:"6px",fontSize:"14px"},children:[d.jsx("option",{value:"",children:"Select a student..."}),N.students.map(w=>d.jsxs("option",{value:w.id,children:[w.name," (",w.email,")"]},w.id))]})]}),d.jsxs("div",{style:{marginBottom:"20px"},children:[d.jsx("h3",{style:{marginBottom:"10px",color:"#222"},children:"Assign to Group"}),d.jsxs("select",{onChange:w=>{w.target.value&&Ao(w.target.value)},defaultValue:"",style:{width:"100%",padding:"8px 12px",border:"1px solid #e0e0e0",borderRadius:"6px",fontSize:"14px"},children:[d.jsx("option",{value:"",children:"Select a group..."}),N.groups.map(w=>d.jsxs("option",{value:w.id,children:[w.name," (",w.students.length," students)"]},w.id))]})]}),d.jsxs("div",{style:{marginTop:"20px",padding:"12px",background:"#fff3cd",borderRadius:"6px",border:"1px solid #ffeaa7"},children:[d.jsx("h4",{style:{margin:"0 0 8px 0",color:"#856404"},children:"Remove Assignments"}),d.jsxs("p",{style:{margin:"0",color:"#856404"},children:["Remove assignments from ",he.size," selected robot",he.size!==1?"s":""]}),d.jsx("button",{onClick:Yi,style:{marginTop:"8px",background:"#dc3545",color:"white",border:"none",padding:"6px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Remove Assignments"})]})]}):d.jsx("div",{style:{color:"#dc3545",fontWeight:500,padding:"24px 0",textAlign:"center"},children:"Please select a classroom to tag robots."})}),d.jsx("div",{className:"modal-footer",children:d.jsx("button",{className:"btn-secondary",onClick:()=>D(!1),children:"Cancel"})})]})}),ti&&yn&&d.jsx("div",{className:"modal-overlay",onClick:()=>Un(!1),children:d.jsxs("div",{className:"modal-content",onClick:w=>w.stopPropagation(),style:{maxWidth:"800px",maxHeight:"80vh",overflow:"hidden",display:"flex",flexDirection:"column"},children:[d.jsxs("div",{className:"modal-header",children:[d.jsxs("h2",{children:["Robot Details: ",yn]}),d.jsx("button",{className:"modal-close",onClick:()=>Un(!1),children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"20",height:"20",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),d.jsx("div",{className:"modal-body",style:{flex:1,overflow:"hidden",display:"flex",flexDirection:"column"},children:d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"24px",height:"100%",overflow:"hidden"},children:[d.jsxs("div",{style:{display:"flex",flexDirection:"column",overflow:"hidden"},children:[d.jsxs("h3",{style:{marginBottom:"16px",fontSize:"1.1rem",fontWeight:"600",color:"#222"},children:["Recent Programs (",ii(yn).length,")"]}),d.jsx("input",{type:"text",placeholder:"Search recent programs...",value:mi,onChange:w=>Va(w.target.value),style:{marginBottom:"10px",padding:"8px 12px",border:"1px solid #e0e0e0",borderRadius:"6px",fontSize:"14px",fontFamily:"Space Mono, monospace"}}),d.jsx("div",{style:{flex:1,overflow:"auto",paddingRight:"8px"},children:(()=>{const w=ii(yn),k=mi.trim()?w.filter(U=>U.program.toLowerCase().includes(mi.toLowerCase())||U.button.toLowerCase().includes(mi.toLowerCase())||U.robotName&&U.robotName.toLowerCase().includes(mi.toLowerCase())||U.timestamp.toLowerCase().includes(mi.toLowerCase())):w;return k.length===0?d.jsx("div",{style:{textAlign:"center",padding:"40px 20px",color:"#666",fontStyle:"italic"},children:"No programs found"}):k.slice(0,10).map((U,V)=>d.jsxs("div",{style:{background:"#f8f9fa",borderRadius:"12px",padding:"16px",marginBottom:"12px",border:"1px solid #e0e0e0",transition:"all 0.2s ease"},children:[d.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"8px"},children:d.jsxs("div",{style:{flex:1},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[d.jsx("span",{style:{fontSize:"0.85rem",fontWeight:"600",color:"#4169e1",fontFamily:"monospace"},children:U.deviceId}),U.button==="PLAY"?d.jsx("img",{src:Dm,alt:"Play",style:{width:18,height:18,verticalAlign:"middle"}}):U.button==="TEST"?d.jsx("img",{src:Om,alt:"Test",style:{width:18,height:18,verticalAlign:"middle"}}):d.jsx("span",{style:{fontSize:"0.75rem",color:"#666",background:"#e3eafe",padding:"2px 6px",borderRadius:"4px",fontWeight:"500"},children:U.button})]}),d.jsx("div",{style:{fontSize:"0.8rem",color:"#888",marginBottom:"8px"},children:_c(U.timestamp)})]})}),d.jsx("div",{style:{background:"#fff",padding:"8px 12px",borderRadius:"6px",border:"1px solid #e0e0e0",fontFamily:"monospace",fontSize:"0.85rem",color:"#333",wordBreak:"break-word",marginBottom:"8px"},children:nr(U.program)}),d.jsx("div",{style:{display:"flex",gap:"8px",justifyContent:"flex-end"},children:d.jsx("button",{onClick:$=>{$.stopPropagation(),Qi(U),$i(U.program),bn(!0)},style:{padding:"4px 8px",background:"#4169e1",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.75rem",fontWeight:"500",fontFamily:"var(--font-body)",transition:"background 0.2s ease"},onMouseEnter:$=>$.target.style.background="#274bb5",onMouseLeave:$=>$.target.style.background="#4169e1",children:"View Program"})})]},`${U.deviceId}-${U.timestamp}-${V}`))})()})]}),d.jsxs("div",{style:{display:"flex",flexDirection:"column",overflow:"hidden"},children:[d.jsxs("h3",{style:{marginBottom:"16px",fontSize:"1.1rem",fontWeight:"600",color:"#222"},children:["Logs (",Mt(yn).length,")"]}),d.jsx("input",{type:"text",placeholder:"Search logs...",value:ki,onChange:w=>Tl(w.target.value),style:{marginBottom:"10px",padding:"8px 12px",border:"1px solid #e0e0e0",borderRadius:"6px",fontSize:"14px",fontFamily:"Space Mono, monospace"}}),d.jsx("div",{style:{flex:1,overflow:"auto",paddingRight:"8px"},children:(()=>{const w=Mt(yn),k=ki.trim()?w.filter(U=>U.data.toLowerCase().includes(ki.toLowerCase())||U.timestamp.toLowerCase().includes(ki.toLowerCase())):w;return k.length===0?d.jsx("div",{style:{textAlign:"center",padding:"40px 20px",color:"#666",fontStyle:"italic"},children:"No logs found"}):k.map((U,V)=>d.jsxs("div",{style:{background:"#f8f9fa",borderRadius:"8px",padding:"12px",marginBottom:"8px",border:"1px solid #e0e0e0",fontSize:"0.85rem"},children:[d.jsx("div",{style:{fontSize:"0.75rem",color:"#888",marginBottom:"4px",fontFamily:"monospace"},children:_c(U.timestamp)}),d.jsx("div",{style:{color:"#333",fontFamily:"monospace",wordBreak:"break-word"},children:U.data})]},V))})()})]})]})}),d.jsx("div",{className:"modal-footer",children:d.jsx("button",{className:"btn-secondary",onClick:()=>Un(!1),children:"Close"})})]})}),ys&&d.jsx("div",{className:"serial-popup-overlay fade-in",style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.55)",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"flex-end",paddingRight:"23vw",paddingBottom:"20vh",transition:"background 0.4s cubic-bezier(0.4,0,0.2,1)"},children:d.jsx("img",{src:qk,alt:"Connection Graphic",className:"connection-bounce",style:{width:450,height:450,objectFit:"contain",borderRadius:16,boxShadow:"0 2px 12px rgba(65,105,225,0.10)",maxWidth:"90vw",maxHeight:"90vh",transition:"opacity 0.4s cubic-bezier(0.4,0,0.2,1)"}})}),Gt&&on&&d.jsx("div",{className:"modal-overlay",onClick:()=>bn(!1),children:d.jsxs("div",{className:"modal-content",onClick:w=>w.stopPropagation(),style:{maxWidth:"600px",maxHeight:"90vh",overflow:"hidden",display:"flex",flexDirection:"column",alignItems:"center"},children:[d.jsxs("div",{className:"modal-header",style:{width:"100%"},children:[d.jsx("h2",{children:"View Program"}),d.jsx("button",{className:"modal-close",onClick:()=>bn(!1),children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"20",height:"20",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),d.jsx("div",{style:{display:"flex",gap:8,margin:"12px 0",flexWrap:"wrap",justifyContent:"center"},children:ln(on.program).map((w,k)=>d.jsx("span",{style:{fontWeight:k===Xe.step?700:400,color:k===Xe.step?"#4169e1":"#333",fontFamily:"monospace",fontSize:"1rem",opacity:k===Xe.step?1:.6,padding:"2px 6px",borderRadius:"4px",background:k===Xe.step?"#e3eafe":"transparent",transition:"all 0.2s"},children:w},k))}),d.jsxs("div",{style:{position:"relative",width:320,height:320,margin:"0 auto",background:"transparent",display:"flex",alignItems:"center",justifyContent:"center"},children:[d.jsx("svg",{width:320,height:320,style:{position:"absolute",top:0,left:0,zIndex:1},children:Array.from({length:Xe.gridSize}).map((w,k)=>Array.from({length:Xe.gridSize}).map((U,V)=>d.jsx("circle",{cx:32+V*(256/(Xe.gridSize-1)),cy:32+k*(256/(Xe.gridSize-1)),r:4*Xe.robotScale,fill:"#bbb",opacity:.5},`dot-${k}-${V}`)))}),d.jsx("img",{src:bb,alt:"Robot",className:"program-animation-robot",style:{left:32+(Xe.x+Xe.offsetX)*(256/(Xe.gridSize-1))-30*Xe.robotScale,top:32+(Xe.y+Xe.offsetY)*(256/(Xe.gridSize-1))-35*Xe.robotScale,width:60*Xe.robotScale,height:70*Xe.robotScale,zIndex:2,transform:`rotate(${Xe.dir*90}deg)`}})]}),d.jsxs("div",{style:{display:"flex",gap:16,marginTop:24,alignItems:"center",justifyContent:"center"},children:[d.jsx("button",{onClick:()=>rr(!1),disabled:Xe.step===0,style:{padding:8,borderRadius:8,border:"1px solid #ccc",background:"#f7f9fb",cursor:Xe.step===0?"not-allowed":"pointer"},children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:28,height:28,opacity:Xe.step===0?.4:1},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 16.811c0 .864-.933 1.406-1.683.977l-7.108-4.061a1.125 1.125 0 0 1 0-1.954l7.108-4.061A1.125 1.125 0 0 1 21 8.689v8.122ZM11.25 16.811c0 .864-.933 1.406-1.683.977l-7.108-4.061a1.125 1.125 0 0 1 0-1.954l7.108-4.061a1.125 1.125 0 0 1 1.683.977v8.122Z"})})}),d.jsx("button",{onClick:Ua,style:{padding:8,borderRadius:8,border:"1px solid #4169e1",background:Xe.playing?"#e3eafe":"#4169e1",color:Xe.playing?"#4169e1":"#fff",fontWeight:700,fontSize:18,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:Xe.playing?d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:28,height:28},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25v13.5m-7.5-13.5v13.5"})}):d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:28,height:28},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347a1.125 1.125 0 0 1-1.667-.986V5.653Z"})})}),d.jsx("button",{onClick:()=>rr(!0),disabled:Xe.step>=ln(on.program).length,style:{padding:8,borderRadius:8,border:"1px solid #ccc",background:"#f7f9fb",cursor:Xe.step>=ln(on.program).length?"not-allowed":"pointer"},children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:28,height:28,opacity:Xe.step>=ln(on.program).length?.4:1},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 8.689c0-.864.933-1.406 1.683-.977l7.108 4.061a1.125 1.125 0 0 1 0 1.954l-7.108 4.061A1.125 1.125 0 0 1 3 16.811V8.69ZM12.75 8.689c0-.864.933-1.406 1.683-.977l7.108 4.061a1.125 1.125 0 0 1 0 1.954l-7.108 4.061a1.125 1.125 0 0 1-1.683-.977V8.69Z"})})}),d.jsx("button",{onClick:()=>{$i(on.program)},style:{padding:8,borderRadius:8,border:"1px solid #ccc",background:"#fff",color:"#4169e1",fontWeight:700,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:28,height:28},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"})})})]})]})}),Cl&&d.jsx("div",{className:"modal-overlay",onClick:()=>{Ji(!1),kn(!1)},children:d.jsxs("div",{className:"modal-content",onClick:w=>w.stopPropagation(),children:[d.jsx("div",{className:"modal-header",children:d.jsx("h2",{children:"Active Session Detected"})}),d.jsx("div",{className:"modal-body",children:d.jsx("p",{children:"There is already an active running session. If you resume this session, the active session will be paused. Proceed?"})}),d.jsxs("div",{className:"modal-footer",children:[d.jsx("button",{className:"btn-secondary",onClick:()=>{Ji(!1),kn(!1)},children:"Cancel"}),d.jsx("button",{className:"btn-primary",onClick:()=>{Bt(ke).then(w=>{const k=w.map(U=>U.status==="active"&&String(U.id)!==String(z==null?void 0:z.id)?{...U,status:"paused"}:U);Gn(ke,k),Ji(!1),kn(!1),bs()})},children:"Proceed"})]})]})}),Oa&&d.jsx("div",{className:"modal-overlay",onClick:()=>Pr(!1),children:d.jsxs("div",{className:"modal-content",onClick:w=>w.stopPropagation(),children:[d.jsx("div",{className:"modal-header",children:d.jsx("h2",{children:"End Session"})}),d.jsx("div",{className:"modal-body",children:d.jsx("p",{children:"Are you sure you want to end this session? This action cannot be undone."})}),d.jsxs("div",{className:"modal-footer",children:[d.jsx("button",{className:"btn-secondary",onClick:()=>Pr(!1),children:"Cancel"}),d.jsx("button",{className:"btn-primary",style:{background:"#dc3545",borderColor:"#dc3545"},onClick:()=>{Pr(!1),xo()},children:"End Session"})]})]})}),ts&&d.jsx("div",{className:"modal-overlay",onClick:()=>As(!1),children:d.jsxs("div",{className:"modal-content",onClick:w=>w.stopPropagation(),children:[d.jsx("div",{className:"modal-header",children:d.jsx("h2",{children:"Delete Session"})}),d.jsx("div",{className:"modal-body",children:d.jsx("p",{children:"Are you sure you want to delete this session? This action cannot be undone."})}),d.jsxs("div",{className:"modal-footer",children:[d.jsx("button",{className:"btn-secondary",onClick:()=>As(!1),children:"Cancel"}),d.jsx("button",{className:"btn-primary",style:{background:"#dc3545",borderColor:"#dc3545"},onClick:()=>{z&&Bt(ke).then(w=>{const k=w.filter(U=>String(U.id)!==String(z.id));Gn(ke,k),As(!1),n("/sessions")})},children:"Delete"})]})]})}),gi&&d.jsx("div",{className:"modal-overlay",onClick:()=>ar(!1),children:d.jsxs("div",{className:"modal-content",onClick:w=>w.stopPropagation(),children:[d.jsx("div",{style:{marginBottom:0,textAlign:"center"},children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:60,height:60,color:"#4169e1",margin:"0 auto"},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})})}),d.jsx("div",{className:"modal-header",style:{display:"block",textAlign:"center",justifyContent:"center"},children:d.jsx("h2",{children:"Session Paused"})}),d.jsx("div",{className:"modal-body",style:{marginBottom:0,textAlign:"center"},children:d.jsx("p",{children:"Since you've been inactive for a while, your session has been paused."})}),d.jsx("div",{className:"modal-footer",style:{display:"block",marginBottom:0,textAlign:"center"},children:d.jsx("p",{style:{marginTop:0,marginBottom:0,fontSize:14,color:"#808080",textAlign:"center"},children:"Click anywhere to dismiss"})})]})}),or&&d.jsx("div",{className:"modal-overlay",onClick:()=>Yn(!1),children:d.jsxs("div",{className:"modal-content",onClick:w=>w.stopPropagation(),style:{maxWidth:"700px",maxHeight:"80vh",overflow:"auto"},children:[d.jsxs("div",{className:"modal-header",children:[d.jsx("h2",{children:"Lesson Completion History"}),d.jsx("button",{className:"modal-close",onClick:()=>Yn(!1),children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"20",height:"20",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),d.jsxs("div",{className:"modal-body",children:[d.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:15},children:[d.jsx("thead",{children:d.jsxs("tr",{style:{background:"#f8f9fa"},children:[d.jsx("th",{style:{textAlign:"left",padding:"8px",borderBottom:"2px solid #e0e0e0"},children:"Lesson"}),d.jsx("th",{style:{textAlign:"left",padding:"8px",borderBottom:"2px solid #e0e0e0"},children:"Completed Robots"})]})}),d.jsx("tbody",{children:Rn.filter(w=>w.id!=="none").filter(w=>ze[w.id]&&ze[w.id].size>0).map(w=>d.jsxs("tr",{children:[d.jsx("td",{style:{padding:"8px",borderBottom:"1px solid #e0e0e0",fontWeight:600},children:w.name}),d.jsx("td",{style:{padding:"8px",borderBottom:"1px solid #e0e0e0"},children:d.jsx("ul",{style:{margin:0,paddingLeft:18},children:Array.from(ze[w.id]).map(k=>{const U=S[k];let V="";return U!=null&&U.assignedTo&&(V=U.assignedTo.type==="student"?U.assignedTo.name:`${U.assignedTo.name} (Group)`),d.jsxs("li",{style:{marginBottom:2},children:[d.jsx("span",{style:{fontFamily:"Space Mono, monospace",fontWeight:600},children:k}),V&&d.jsxs("span",{style:{color:"#4169e1",marginLeft:8,fontWeight:500,fontSize:13},children:["[",V,"]"]})]},k)})})})]},w.id))})]}),d.jsx("div",{style:{marginTop:"20px",padding:"15px",backgroundColor:"#f8f9fa",borderRadius:"8px",border:"1px solid #e0e0e0"},children:d.jsx("p",{style:{margin:0,color:"#666",fontSize:"14px",lineHeight:"1.5"},children:"Tip: Lessons with no completed robots are not shown here."})})]}),d.jsx("div",{className:"modal-footer",children:d.jsx("button",{className:"btn-secondary",onClick:()=>Yn(!1),children:"Close"})})]})}),ns&&d.jsx("div",{className:"modal-overlay",onClick:()=>Rs(!1),children:d.jsxs("div",{className:"modal-content",onClick:w=>w.stopPropagation(),style:{maxWidth:"420px"},children:[d.jsx("div",{className:"modal-header",children:d.jsx("h2",{children:"Unsaved Changes"})}),d.jsx("div",{className:"modal-body",children:d.jsx("p",{children:"Wait! You have unsaved data you're leaving behind..."})}),d.jsxs("div",{className:"modal-footer",style:{display:"flex",gap:12,justifyContent:"flex-end"},children:[d.jsx("button",{className:"btn-secondary",onClick:async()=>{Rs(!1),Qn&&await Qn()},children:"Leave"}),d.jsx("button",{className:"btn-primary",style:{background:"#4169e1",borderColor:"#4169e1"},onClick:async()=>{await ir(),Rs(!1),Qn&&await Qn()},children:"Save"})]})]})})]})}function Kk(){const i=Zs(),[e,n]=C.useState(null),[r,o]=C.useState([]),[c,f]=C.useState(!1),[p,g]=C.useState(!1),[y,x]=C.useState(!1),[S,A]=C.useState(null),[F,G]=C.useState(""),[q,K]=C.useState(""),[J,Y]=C.useState(""),[z,me]=C.useState(""),[fe,be]=C.useState("#4169e1"),[M,R]=C.useState("blue"),[I,L]=C.useState(null),[N,B]=C.useState(null),[j,Fe]=C.useState(""),[$e,ae]=C.useState(!1),[he,ie]=C.useState(null),[Ae,D]=C.useState([]),P={blue:{name:"Blue",primary:"#4169e1",dark:"#4f7ad6",light:"#6b8cff"},red:{name:"Red",primary:"#dc3545",dark:"#d95c63",light:"#ff6b6b"},green:{name:"Green",primary:"#28a745",dark:"#4bbf6b",light:"#6bff8c"},orange:{name:"Orange",primary:"#fd7e14",dark:"#ff9c4a",light:"#ffb366"},purple:{name:"Purple",primary:"#6f42c1",dark:"#8d6fd1",light:"#b366ff"},teal:{name:"Teal",primary:"#20c997",dark:"#4fd6b0",light:"#6bffd9"},pink:{name:"Pink",primary:"#e83e8c",dark:"#e86fa7",light:"#ff6bb3"},indigo:{name:"Indigo",primary:"#6610f2",dark:"#7c4dff",light:"#9d66ff"}};C.useEffect(()=>{be(P[M].primary)},[M]),C.useEffect(()=>{S&&Fe(S.name)},[S]);const oe=se=>{Fe(se.target.value)},ee=async()=>{if(!S||!j.trim()||j===S.name)return;const se=r.map(ve=>ve.id===S.id?{...ve,name:j}:ve);await Te(e,se),o(se),A({...S,name:j})},_e=se=>{se.key==="Enter"&&(se.preventDefault(),ee(),se.target.blur())},Se=async se=>{if(!se)return;const ve=Zt(Kt,"users",se.uid,"appdata","classrooms"),Re=await Ln(ve);Re.exists()?o(Re.data().classrooms||[]):o([])},Te=async(se,ve)=>{if(!se)return;const Re=Zt(Kt,"users",se.uid,"appdata","classrooms");await os(Re,{classrooms:ve})},lt=async se=>{if(!se)return;const ve=Zt(Kt,"users",se.uid,"appdata","lessons"),Re=await Ln(ve);Re.exists()?D(Re.data().lessons||[]):D([])},vt=async(se,ve)=>{const Re=Ae.find(St=>St.id===ve);if(!Re)return;const we=r.map(St=>{if(St.id===se){const Ge=St.lessons||[];if(!Ge.find(tt=>tt.id===ve))return{...St,lessons:[...Ge,Re]}}return St});await Te(e,we),o(we),(S==null?void 0:S.id)===se&&A(we.find(St=>St.id===se))},ti=async(se,ve)=>{const Re=r.map(we=>{if(we.id===se){const St=we.lessons||[];return{...we,lessons:St.filter(Ge=>Ge.id!==ve)}}return we});await Te(e,Re),o(Re),(S==null?void 0:S.id)===se&&A(Re.find(we=>we.id===se))},Un=async()=>{if(!F.trim())return;const se=jt.currentUser,ve=Zt(Kt,"users",se.uid,"appdata","classrooms"),Re=await Ln(ve);let we=[];Re.exists()&&(we=Re.data().classrooms||[]);const Ge=[{id:Date.now().toString(),name:F,color:fe,createdAt:new Date().toISOString(),createdBy:se.email,students:[],groups:[]},...we];await Te(se,Ge),o(Ge),f(!1),G(""),be("#4169e1"),R("blue")},yn=async()=>{if(!q.trim())return;const se={id:Date.now().toString(),name:q,email:z.trim()||null,addedAt:new Date().toISOString()},ve=r.map(Re=>Re.id===S.id?{...Re,students:[...Re.students,se]}:Re);await Te(e,ve),o(ve),g(!1),K(""),me(""),A(ve.find(Re=>Re.id===S.id))},Ti=async()=>{if(!J.trim())return;const se={id:Date.now().toString(),name:J,students:[],createdAt:new Date().toISOString()},ve=r.map(Re=>Re.id===S.id?{...Re,groups:[...Re.groups,se]}:Re);await Te(e,ve),o(ve),x(!1),Y(""),A(ve.find(Re=>Re.id===S.id))},Ri=async(se,ve)=>{const Re=r.map(we=>{if(we.id===S.id){const St=we.groups.map(Ge=>{if(Ge.id===se){const tt=we.students.find(ot=>ot.id===ve);if(tt&&!Ge.students.find(ot=>ot.id===ve))return{...Ge,students:[...Ge.students,tt]}}return Ge});return{...we,groups:St}}return we});await Te(e,Re),o(Re),A(Re.find(we=>we.id===S.id))},ps=async(se,ve)=>{const Re=r.map(we=>{if(we.id===S.id){const St=we.groups.map(Ge=>Ge.id===se?{...Ge,students:Ge.students.filter(tt=>tt.id!==ve)}:Ge);return{...we,groups:St}}return we});await Te(e,Re),o(Re),A(Re.find(we=>we.id===S.id))},Lr=se=>{ie(se),ae(!0)},ka=async(se,ve)=>{if(confirm("Are you sure you want to remove this student? This action cannot be undone.")){const Re=r.map(we=>{if(we.id===se){const St=we.students.filter(tt=>tt.id!==ve),Ge=we.groups.map(tt=>({...tt,students:tt.students.filter(ot=>ot.id!==ve)}));return{...we,students:St,groups:Ge}}return we});await Te(e,Re),o(Re),(S==null?void 0:S.id)===se&&A(Re.find(we=>we.id===se))}},ke=async(se,ve)=>{if(confirm("Are you sure you want to delete this group? This action cannot be undone.")){const Re=r.map(we=>we.id===se?{...we,groups:we.groups.filter(St=>St.id!==ve)}:we);await Te(e,Re),o(Re),(S==null?void 0:S.id)===se&&A(Re.find(we=>we.id===se))}};return C.useEffect(()=>{const se=jt.onAuthStateChanged(ve=>{ve?(n(ve),Se(ve),lt(ve)):i("/login")});return()=>se()},[i]),C.useEffect(()=>{if(N===null)return;const se=()=>B(null);return window.addEventListener("click",se),()=>window.removeEventListener("click",se)},[N]),d.jsxs("div",{className:"dashboard-container",children:[d.jsx(lu,{className:"slide-in-from-left"}),d.jsxs("div",{className:"main-content slide-in-from-bottom",children:[d.jsxs("div",{className:"top-bar slide-in-from-top",style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:24,marginBottom:32},children:[d.jsx("h1",{style:{margin:0,fontSize:"2rem",fontWeight:700,color:"#222"},children:"Classrooms"}),d.jsxs("button",{className:"create-classroom-btn fade-in-scale animate-on-mount-delay-1",onClick:()=>f(!0),children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",width:"20",height:"20",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),"Create Classroom"]})]}),d.jsx("div",{className:"classrooms-content",children:r.length===0?d.jsxs("div",{className:"empty-state animate-on-mount-delay-2",children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"#b0b0b0",width:"60",height:"60",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"})}),d.jsx("h3",{children:"No Classrooms Yet"}),d.jsx("p",{children:"Create your first classroom to start managing students and groups"}),d.jsx("button",{className:"create-first-btn fade-in-scale animate-on-mount-delay-3",onClick:()=>f(!0),children:"Create Your First Classroom"})]}):d.jsx("div",{className:"classrooms-grid",children:r.map((se,ve)=>{var Ge;const Re=tt=>{tt.stopPropagation(),B(N===se.id?null:se.id)},we=tt=>{tt.stopPropagation(),B(null),A(se)},St=tt=>{tt.stopPropagation(),B(null),Lr(se.id)};return d.jsxs("div",{className:`classroom-card fade-in-scale animate-on-mount-delay-${2+ve}`,onClick:()=>A(se),style:{cursor:"pointer",position:"relative"},children:[d.jsx("div",{className:"classroom-card-header-bar",style:{background:`${(Ge=P[Object.keys(P).find(tt=>P[tt].primary===se.color)||"blue"])==null?void 0:Ge.primary}`,position:"relative"},children:d.jsx("button",{className:"classroom-card-menu-btn",onClick:Re,style:{position:"absolute",top:8,right:8,background:"none",border:"none",cursor:"pointer",zIndex:20,padding:2},onMouseDown:tt=>tt.stopPropagation(),children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"#fff",width:"22",height:"22",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM12.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM18.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z"})})})}),N===se.id&&d.jsxs("div",{className:"classroom-card-menu",style:{position:"absolute",top:38,right:8,background:"#fff",border:"1px solid #e0e0e0",borderRadius:8,boxShadow:"0 4px 16px rgba(0,0,0,0.10)",zIndex:1e4,minWidth:100,padding:"4px 0"},onClick:tt=>tt.stopPropagation(),children:[d.jsxs("button",{className:"menu-item",onClick:we,style:{width:"100%",padding:"4px 8px",background:"none",border:"none",textAlign:"left",cursor:"pointer",fontSize:"13px",fontWeight:400,color:"#222",display:"flex",alignItems:"center",gap:6},children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"16",height:"16",style:{minWidth:16},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"})}),"Edit"]}),d.jsxs("button",{className:"menu-item",onClick:St,style:{width:"100%",padding:"4px 8px",background:"none",border:"none",textAlign:"left",color:"#dc3545",cursor:"pointer",fontSize:"13px",fontWeight:400,display:"flex",alignItems:"center",gap:6},children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"16",height:"16",style:{minWidth:16},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})}),"Delete"]})]}),d.jsx("span",{className:"classroom-card-avatar",style:{background:se.color||"#4169e1",border:"4px solid #fff"},children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"28",height:"28",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"})})}),d.jsx("div",{className:"classroom-card-content",children:d.jsxs("div",{className:"classroom-info",children:[d.jsx("div",{className:"classroom-title",children:d.jsx("h3",{children:se.name})}),d.jsxs("p",{children:[se.students.length," students • ",se.groups.length," groups"]})]})})]},se.id)})})})]}),c&&d.jsx("div",{className:"modal-overlay fade-in-scale",onClick:()=>f(!1),children:d.jsxs("div",{className:"modal-content create-classroom-modal",onClick:se=>se.stopPropagation(),children:[d.jsxs("div",{className:"modal-header",children:[d.jsx("h2",{children:"Create New Classroom"}),d.jsx("button",{className:"modal-close",onClick:()=>f(!1),children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"20",height:"20",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),d.jsxs("div",{className:"modal-body",children:[d.jsxs("div",{className:"form-group",children:[d.jsxs("label",{children:["Classroom Name ",d.jsx("span",{style:{color:"red"},children:"*"})]}),d.jsx("input",{type:"text",value:F,onChange:se=>G(se.target.value),placeholder:"Enter classroom name",onKeyPress:se=>se.key==="Enter"&&Un()})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Theme"}),d.jsx("div",{className:"theme-buttons",children:Object.entries(P).map(([se,ve])=>d.jsx("button",{className:`theme-button ${M===se?"selected":""}`,style:{background:`linear-gradient(to bottom, ${ve.dark} 0%, ${ve.dark} 50%, ${ve.light} 50%, ${ve.light} 100%)`},onClick:()=>R(se),title:ve.name,"aria-label":`Select ${ve.name} theme`},se))})]})]}),d.jsxs("div",{className:"modal-footer",children:[d.jsx("button",{className:"btn-secondary",onClick:()=>f(!1),children:"Cancel"}),d.jsx("button",{className:"btn-primary",style:{background:F.trim()?"#4169e1":"#e0e0e0",borderColor:F.trim()?"#4169e1":"#e0e0e0",color:F.trim()?"#fff":"#b0b0b0",cursor:F.trim()?"pointer":"not-allowed",fontFamily:"Space Mono, monospace"},onClick:Un,disabled:!F.trim(),children:"Create"})]})]})}),S&&d.jsx("div",{className:"modal-overlay fade-in-scale",onClick:()=>A(null),children:d.jsxs("div",{className:"modal-content classroom-detail-modal",onClick:se=>se.stopPropagation(),children:[d.jsxs("div",{className:"modal-header",children:[d.jsx("div",{className:"classroom-header-info",children:d.jsx("input",{type:"text",value:j,onChange:oe,onKeyDown:_e,className:"classroom-name-input",onFocus:se=>se.target.style.borderColor="#4169e1",onBlur:se=>{se.target.style.borderColor="#e0e0e0",ee()},placeholder:"Enter classroom name...",maxLength:60,style:{border:"1.5px solid #e0e0e0",borderRadius:"8px",padding:"12px 16px",fontSize:"1.4rem",fontWeight:"600",background:"#fff",color:"#222",transition:"border-color 0.2s ease",outline:"none",width:"100%",height:"45px",maxWidth:"250px",marginTop:"-10px",marginBottom:"0px"}})}),d.jsx("button",{className:"modal-close",onClick:()=>A(null),children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"20",height:"20",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),d.jsx("div",{className:"modal-body",children:d.jsx("div",{className:"classroom-detail-tabs",children:d.jsxs("div",{className:"tab-content",children:[d.jsxs("div",{className:"section",children:[d.jsxs("div",{className:"section-header",children:[d.jsx("h3",{children:"Students"}),d.jsxs("button",{className:"add-btn",onClick:()=>g(!0),children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",width:"16",height:"16",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),"Add Student"]})]}),d.jsx("div",{className:"students-list",children:S.students.length===0?d.jsx("div",{className:"empty-list",children:d.jsx("p",{children:"No students added yet"})}):S.students.map(se=>d.jsxs("div",{className:"student-item",draggable:!0,onDragStart:ve=>{ve.dataTransfer.setData("studentId",se.id)},children:[d.jsxs("div",{className:"student-info",children:[d.jsx("div",{className:"student-avatar",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"16",height:"16",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"})})}),d.jsxs("div",{className:"student-details",children:[d.jsx("span",{className:"student-name",children:se.name}),d.jsx("span",{className:"student-email",children:se.email})]})]}),d.jsx("button",{className:"remove-btn",onClick:()=>ka(S.id,se.id),children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"14",height:"14",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]},se.id))})]}),d.jsxs("div",{className:"section",children:[d.jsxs("div",{className:"section-header",children:[d.jsx("h3",{children:"Groups"}),d.jsxs("button",{className:"add-btn",onClick:()=>x(!0),children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",width:"16",height:"16",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),"Add Group"]})]}),d.jsx("div",{className:"groups-list",children:S.groups.length===0?d.jsx("div",{className:"empty-list",children:d.jsx("p",{children:"No groups created yet"})}):S.groups.map(se=>d.jsxs("div",{className:`group-item${I===se.id?" drag-over":""}`,onDragOver:ve=>ve.preventDefault(),onDragEnter:()=>L(se.id),onDragLeave:()=>L(null),onDrop:ve=>{L(null);const Re=ve.dataTransfer.getData("studentId");Re&&Ri(se.id,Re)},children:[d.jsxs("div",{className:"group-header",children:[d.jsx("h4",{children:se.name}),d.jsx("button",{className:"remove-btn",onClick:()=>ke(S.id,se.id),children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"14",height:"14",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),d.jsx("div",{className:"group-students",children:se.students.length===0?d.jsx("p",{className:"no-students",children:"No students in this group"}):se.students.map(ve=>d.jsxs("div",{className:"group-student",children:[d.jsx("span",{children:ve.name}),d.jsx("button",{className:"remove-student-btn",onClick:()=>ps(se.id,ve.id),children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"12",height:"12",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]},ve.id))}),S.students.length>0&&d.jsx("div",{className:"add-to-group",children:d.jsxs("select",{onChange:ve=>{ve.target.value&&(Ri(se.id,ve.target.value),ve.target.value="")},defaultValue:"",style:{fontFamily:"Space Mono, monospace"},children:[d.jsx("option",{value:"",children:"Add student to group..."}),S.students.filter(ve=>!se.students.find(Re=>Re.id===ve.id)).map(ve=>d.jsx("option",{value:ve.id,children:ve.name},ve.id))]})})]},se.id))})]}),d.jsxs("div",{className:"section",children:[d.jsx("div",{className:"section-header",children:d.jsx("h3",{children:"Lessons"})}),d.jsxs("div",{className:"lessons-list",children:[(S.lessons||[]).length===0?d.jsx("div",{className:"empty-list",children:d.jsx("p",{children:"No lessons assigned to this classroom"})}):S.lessons.map(se=>d.jsxs("div",{className:"lesson-item",children:[d.jsxs("div",{className:"lesson-info",children:[d.jsx("div",{className:"lesson-avatar",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"16",height:"16",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"})})}),d.jsxs("div",{className:"lesson-details",children:[d.jsx("span",{className:"lesson-name",children:se.title}),d.jsx("span",{className:"lesson-overview",children:se.overview}),d.jsx("span",{className:"lesson-age",children:se.age})]})]}),d.jsx("button",{className:"remove-btn",onClick:()=>ti(S.id,se.id),children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"14",height:"14",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]},se.id)),Ae.length>0&&d.jsx("div",{className:"add-to-lessons",children:d.jsxs("select",{onChange:se=>{se.target.value&&(vt(S.id,se.target.value),se.target.value="")},defaultValue:"",style:{fontFamily:"Space Mono, monospace"},children:[d.jsx("option",{value:"",children:"Add lesson to classroom..."}),Ae.filter(se=>!(S.lessons||[]).find(ve=>ve.id===se.id)).map(se=>d.jsx("option",{value:se.id,children:se.title},se.id))]})})]})]})]})})})]})}),p&&d.jsx("div",{className:"modal-overlay fade-in-scale",onClick:()=>g(!1),children:d.jsxs("div",{className:"modal-content",onClick:se=>se.stopPropagation(),children:[d.jsxs("div",{className:"modal-header",children:[d.jsx("h2",{children:"Add Student"}),d.jsx("button",{className:"modal-close",onClick:()=>g(!1),children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"20",height:"20",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),d.jsxs("div",{className:"modal-body",children:[d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Student Name"}),d.jsx("input",{type:"text",value:q,onChange:se=>K(se.target.value),placeholder:"Enter student name"})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Email"}),d.jsx("input",{type:"email",value:z,onChange:se=>me(se.target.value),placeholder:"Enter student email (optional)"})]})]}),d.jsxs("div",{className:"modal-footer",children:[d.jsx("button",{className:"btn-secondary",onClick:()=>g(!1),children:"Cancel"}),d.jsx("button",{className:"btn-primary",onClick:yn,children:"Add Student"})]})]})}),y&&d.jsx("div",{className:"modal-overlay fade-in-scale",onClick:()=>x(!1),children:d.jsxs("div",{className:"modal-content",onClick:se=>se.stopPropagation(),children:[d.jsxs("div",{className:"modal-header",children:[d.jsx("h2",{children:"Add Group"}),d.jsx("button",{className:"modal-close",onClick:()=>x(!1),children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"20",height:"20",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),d.jsx("div",{className:"modal-body",children:d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Group Name"}),d.jsx("input",{type:"text",value:J,onChange:se=>Y(se.target.value),placeholder:"Enter group name",onKeyPress:se=>se.key==="Enter"&&Ti()})]})}),d.jsxs("div",{className:"modal-footer",children:[d.jsx("button",{className:"btn-secondary",onClick:()=>x(!1),children:"Cancel"}),d.jsx("button",{className:"btn-primary",onClick:Ti,children:"Add Group"})]})]})}),$e&&d.jsx("div",{className:"modal-overlay",onClick:()=>ae(!1),children:d.jsxs("div",{className:"modal-content",onClick:se=>se.stopPropagation(),children:[d.jsx("div",{className:"modal-header",children:d.jsx("h2",{children:"Delete Classroom"})}),d.jsx("div",{className:"modal-body",children:d.jsx("p",{children:"Are you sure you want to delete this classroom? This action cannot be undone."})}),d.jsxs("div",{className:"modal-footer",children:[d.jsx("button",{className:"btn-secondary",onClick:()=>ae(!1),children:"Cancel"}),d.jsx("button",{className:"btn-primary",style:{background:"#dc3545",borderColor:"#dc3545"},onClick:()=>{if(!he)return;const se=r.filter(ve=>ve.id!==he);Te(e,se),o(se),(S==null?void 0:S.id)===he&&A(null),ae(!1),ie(null)},children:"Delete"})]})]})})]})}const Yk=`
.session-view-content .lesson-details-title {
  font-family: 'Sniglet', serif !important;
  font-weight: 500 !important;
}
`,ua=[{id:"lesson1",title:"I Feel",overview:"Code Roversa to move on a grid toward an emotion based on a scenario.",age:"Pre-K - 2nd",link:"https://docs.google.com/document/d/15hDBUGjhOFpLSPmmkFJMXMcShzhLqdaBW9WTI3UOFXs/edit?tab=t.0#heading=h.a6lqxihc6dhl"},{id:"lesson2",title:"Hungry, Hungry Robot",overview:"Code Roversa to move on a grid to bring a story to life.",age:"Pre-K - 2nd",link:"https://docs.google.com/document/d/13E9Lz6l0eP4ZT-kJBxJST35SX4427fOw6XLlfcZpwm0/edit?tab=t.0#heading=h.a6lqxihc6dhl"},{id:"lesson3",title:"Grid Challenges",overview:"Code Roversa to move on a grid toward certain objectives.",age:"3rd - 5th",link:"https://docs.google.com/document/d/1qHoE0t6diltiHJbYG4hKiGGIJOQFLw3rRNMmLgWc-1E/edit?tab=t.0#heading=h.a6lqxihc6dhl"},{id:"lesson4",title:"Duck Duck Robot",overview:"Match numerals to number of obejcts and solve number facts by coding Roversa to the correct answer.",age:"Pre-K - 2nd",link:"https://docs.google.com/document/d/14jte14tL0Txgm1CdY9kZsbov0lZDoqv7UyhECFW8ioI/edit?tab=t.0#heading=h.a6lqxihc6dhl"}],_b=ua.map(i=>i.id);function to(i){if(!i)return!1;try{return new URL(i),!0}catch{return!1}}function Qk(){const[i,e]=C.useState(ua[0].id),[n,r]=C.useState(""),[o,c]=C.useState([]),[f,p]=C.useState(!1),[g,y]=C.useState({title:"",overview:"",age:"",link:""}),[x,S]=C.useState(!1),[A,F]=C.useState(null),[G,q]=C.useState(!1),[K,J]=C.useState(null),[Y,z]=C.useState([]),[me,fe]=C.useState([]),[be,M]=C.useState(""),[R,I]=C.useState([]),L=o.filter(P=>P.title.toLowerCase().includes(n.toLowerCase())||P.overview.toLowerCase().includes(n.toLowerCase())),N=L.find(P=>P.id===i)||L[0],B=Zs();Rc.useEffect(()=>{!N&&L.length>0&&e(L[0].id)},[n]);const j=async P=>{if(!P)return;const oe=Zt(Kt,"users",P.uid,"appdata","lessons"),ee=await Ln(oe);if(ee.exists()){const _e=ee.data().lessons||[];_e.length===0?(await os(oe,{lessons:[...ua]}),c([...ua])):c(_e)}else await os(oe,{lessons:[...ua]}),c([...ua])},Fe=async(P,oe)=>{if(!P)return;const ee=Zt(Kt,"users",P.uid,"appdata","lessons");await os(ee,{lessons:oe})},$e=async P=>{if(!P)return;const oe=Zt(Kt,"users",P.uid,"appdata","classrooms"),ee=await Ln(oe);ee.exists()?z(ee.data().classrooms||[]):z([])},ae=async(P,oe)=>{if(!P)return;const ee=Zt(Kt,"users",P.uid,"appdata","classrooms");await os(ee,{classrooms:oe})},he=async()=>{if(!K)return;const P=Y.map(oe=>{const ee=(oe.lessons||[]).find(Te=>Te.id===K.id),_e=me.includes(oe.id),Se=R.includes(oe.id);return _e&&!ee?{...oe,lessons:[...oe.lessons||[],K]}:Se&&ee?{...oe,lessons:(oe.lessons||[]).filter(Te=>Te.id!==K.id)}:oe});await ae(jt.currentUser,P),z(P),q(!1),J(null),fe([]),I([])},ie=P=>{J(P),fe([]),I([]),q(!0)};Rc.useEffect(()=>{const P=jt.onAuthStateChanged(oe=>{oe?(j(oe),$e(oe)):B("/login")});return()=>P()},[B]),Rc.useEffect(()=>{},[o]);const Ae=async()=>{if(!g.title.trim())return;const P=jt.currentUser,oe=Zt(Kt,"users",P.uid,"appdata","lessons"),ee=await Ln(oe);let _e=[];ee.exists()?(_e=ee.data().lessons||[],_e.length===0&&(_e=[...ua])):_e=[...ua];const Se="lesson"+Date.now(),Te=[..._e,{id:Se,title:g.title,overview:g.overview,age:g.age,link:g.link}];await os(oe,{lessons:Te}),c(Te),e(Se),p(!1),y({title:"",overview:"",age:"",link:""})},D=async P=>{var _e;const oe=jt.currentUser,ee=o.filter(Se=>Se.id!==P);if(await Fe(oe,ee),c(ee),i===P){const Se=((_e=ee[0])==null?void 0:_e.id)||"";e(Se)}S(!1),F(null)};return d.jsxs(d.Fragment,{children:[d.jsx("style",{children:Yk}),d.jsxs("div",{className:"dashboard-container",children:[d.jsx(lu,{className:"slide-in-from-left"}),d.jsxs("div",{className:"main-content slide-in-from-bottom",children:[d.jsxs("div",{className:"top-bar slide-in-from-top",style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[d.jsx("h1",{className:"dashboard-welcome",style:{fontFamily:"Bevan, serif",fontWeight:400},children:"Lessons"}),d.jsxs("button",{className:"create-classroom-btn",onClick:()=>p(!0),children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",width:"20",height:"20",style:{minWidth:20},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),"Create Lesson"]})]}),d.jsxs("div",{className:"session-view-content",style:{background:"white",borderRadius:18,boxShadow:"0 4px 24px rgba(65, 105, 225, 0.08)",padding:32,display:"flex",gap:32},children:[d.jsxs("div",{style:{minWidth:280,maxWidth:320,borderRight:"2px solid #e0e0e0",paddingRight:24},children:[d.jsxs("div",{style:{position:"relative",marginBottom:18},children:[d.jsx("span",{style:{position:"absolute",left:14,top:"50%",transform:"translateY(-50%)",pointerEvents:"none",zIndex:2,background:"transparent"},children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"#666",style:{width:20,height:20,background:"transparent",display:"block"},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})})}),d.jsx("input",{type:"text",placeholder:"Search lessons...",value:n,onChange:P=>r(P.target.value),style:{width:"100%",padding:"10px 14px 10px 40px",borderRadius:8,border:"1.5px solid #e0e0e0",fontSize:16,outline:"none",transition:"border 0.2s"},onFocus:P=>P.target.style.borderColor="#4169e1",onBlur:P=>P.target.style.borderColor="#e0e0e0"})]}),L.length===0&&d.jsx("div",{style:{color:"#888",fontStyle:"italic",marginTop:24},children:"No lessons found."}),L.map(P=>d.jsx($k,{lesson:P,isActive:i===P.id,onClick:()=>e(P.id),onDelete:()=>{F(P),S(!0)},canDelete:!_b.includes(P.id)},P.id))]}),d.jsx("div",{className:"slide-in-from-bottom",style:{flex:1,padding:24,background:"#f7f9fb",borderRadius:12,minHeight:220,position:"relative"},children:N?d.jsxs(d.Fragment,{children:[!_b.includes(N.id)&&d.jsxs("button",{onClick:()=>{F(N),S(!0)},title:"Delete lesson",style:{position:"absolute",right:30,top:27,display:"inline-flex",alignItems:"center",gap:6,padding:"6px 12px",background:"transparent",color:"#dc3545",border:"1px solid #dc3545",borderRadius:6,cursor:"pointer",fontSize:13,fontWeight:600,transition:"background 0.2s, border-color 0.2s, color 0.2s",zIndex:2},onMouseEnter:P=>{P.target.style.background="#dc3545",P.target.style.color="#fff"},onMouseLeave:P=>{P.target.style.background="transparent",P.target.style.color="#dc3545"},children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:16,height:16},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})}),"Delete lesson"]}),d.jsx("h2",{className:"lesson-details-title",style:{color:"#4169e1",fontWeight:700,marginBottom:12},children:N.title}),d.jsxs("div",{style:{marginBottom:18,fontSize:16,color:"#444"},children:[d.jsx("strong",{children:"Overview:"})," ",N.overview]}),d.jsxs("div",{style:{marginBottom:18,fontSize:16,color:"#444"},children:[d.jsx("strong",{children:"Grade Levels:"})," ",N.age]}),d.jsx("a",{href:to(N.link)?N.link:void 0,target:"_blank",rel:"noopener noreferrer",style:{display:"inline-block",padding:"10px 28px",background:to(N.link)?"#4169e1":"#e0e0e0",color:to(N.link)?"#fff":"#b0b0b0",borderRadius:8,fontWeight:600,fontSize:16,textDecoration:"none",boxShadow:"0 2px 8px rgba(65, 105, 225, 0.10)",marginTop:8,marginRight:12,transition:"background 0.2s",cursor:to(N.link)?"pointer":"not-allowed",pointerEvents:to(N.link)?"auto":"none"},tabIndex:to(N.link)?0:-1,"aria-disabled":!to(N.link),children:d.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:10},children:["View Lesson",d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:22,height:22,marginLeft:0,display:"inline-block"},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"})})]})}),d.jsx("button",{onClick:()=>ie(N),style:{display:"inline-block",padding:"10px 28px",background:"#6f42c1",color:"#fff",borderRadius:8,fontWeight:600,fontSize:16,border:"none",boxShadow:"0 2px 8px rgba(111, 66, 193, 0.10)",marginTop:8,transition:"background 0.2s",cursor:"pointer",transform:"translateY(0)"},onMouseEnter:P=>P.target.style.transform="translateY(0)",onMouseLeave:P=>P.target.style.transform="translateY(0)",children:d.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:10},children:["Assign to Classroom",d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:22,height:22,marginLeft:0,display:"inline-block"},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"})})]})})]}):d.jsx("div",{style:{color:"#888",fontStyle:"italic",marginTop:24},children:"No lesson selected."})},i)]})]}),f&&d.jsx("div",{className:"modal-overlay",onClick:()=>p(!1),children:d.jsxs("div",{className:"modal-content",onClick:P=>P.stopPropagation(),style:{maxWidth:480,paddingTop:18},children:[d.jsxs("div",{className:"modal-header",style:{marginBottom:8},children:[d.jsx("h2",{children:"Create Lesson"}),d.jsx("button",{className:"modal-close",onClick:()=>p(!1),children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"20",height:"20",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),d.jsxs("div",{className:"modal-body",children:[d.jsxs("div",{style:{marginBottom:18},children:[d.jsxs("label",{style:{fontWeight:600,color:"#4169e1",marginBottom:6,display:"block",fontFamily:"Space Mono, monospace"},children:["Lesson Name ",d.jsx("span",{style:{color:"red"},children:"*"})]}),d.jsx("input",{type:"text",value:g.title,onChange:P=>y({...g,title:P.target.value}),placeholder:"Enter lesson name",style:{width:"100%",padding:"10px 12px",borderRadius:8,border:"1.5px solid #e0e0e0",fontSize:16,marginBottom:8,fontFamily:"Space Mono, monospace"},required:!0})]}),d.jsxs("div",{style:{marginBottom:18},children:[d.jsx("label",{style:{fontWeight:600,color:"#4169e1",marginBottom:6,display:"block",fontFamily:"Space Mono, monospace"},children:"Overview"}),d.jsx("textarea",{value:g.overview,onChange:P=>y({...g,overview:P.target.value}),placeholder:"Enter lesson overview",style:{width:"100%",padding:"10px 12px",borderRadius:8,border:"1.5px solid #e0e0e0",fontSize:16,minHeight:60,resize:"vertical",fontFamily:"Space Mono, monospace"}})]}),d.jsxs("div",{style:{marginBottom:18},children:[d.jsx("label",{style:{fontWeight:600,color:"#4169e1",marginBottom:6,display:"block",fontFamily:"Space Mono, monospace"},children:"Grade Levels"}),d.jsx("input",{type:"text",value:g.age,onChange:P=>y({...g,age:P.target.value}),placeholder:"Enter grade levels",style:{width:"100%",padding:"10px 12px",borderRadius:8,border:"1.5px solid #e0e0e0",fontSize:16,fontFamily:"Space Mono, monospace"}})]}),d.jsxs("div",{style:{marginBottom:18},children:[d.jsx("label",{style:{fontWeight:600,color:"#4169e1",marginBottom:6,display:"block",fontFamily:"Space Mono, monospace"},children:"Lesson Link"}),d.jsx("input",{type:"text",value:g.link,onChange:P=>y({...g,link:P.target.value}),placeholder:"Enter lesson link",style:{width:"100%",padding:"10px 12px",borderRadius:8,border:"1.5px solid #e0e0e0",fontSize:16,fontFamily:"Space Mono, monospace"}})]})]}),d.jsxs("div",{className:"modal-footer",style:{display:"flex",gap:12,justifyContent:"flex-end"},children:[d.jsx("button",{className:"btn-secondary",onClick:()=>p(!1),children:"Cancel"}),d.jsx("button",{className:"btn-primary",style:{background:g.title.trim()?"#4169e1":"#e0e0e0",borderColor:g.title.trim()?"#4169e1":"#e0e0e0",color:g.title.trim()?"#fff":"#b0b0b0",cursor:g.title.trim()?"pointer":"not-allowed",fontFamily:"Space Mono, monospace"},onClick:Ae,disabled:!g.title.trim(),children:"Create"})]})]})}),x&&A&&d.jsx("div",{className:"modal-overlay",onClick:()=>S(!1),children:d.jsxs("div",{className:"modal-content",onClick:P=>P.stopPropagation(),style:{maxWidth:420},children:[d.jsx("div",{className:"modal-header",children:d.jsx("h2",{children:"Delete Lesson"})}),d.jsx("div",{className:"modal-body",children:d.jsxs("p",{children:["Are you sure you want to delete the lesson ",d.jsx("b",{children:A.title}),"? This action cannot be undone."]})}),d.jsxs("div",{className:"modal-footer",style:{display:"flex",gap:12,justifyContent:"flex-end"},children:[d.jsx("button",{className:"btn-secondary",onClick:()=>S(!1),children:"Cancel"}),d.jsx("button",{className:"btn-primary",style:{background:"#dc3545",borderColor:"#dc3545"},onClick:()=>D(A.id),children:"Delete"})]})]})}),G&&K&&d.jsx("div",{className:"modal-overlay",onClick:()=>q(!1),children:d.jsxs("div",{className:"modal-content",onClick:P=>P.stopPropagation(),style:{maxWidth:"480px",width:"480px",height:"600px",display:"flex",flexDirection:"column"},children:[d.jsxs("div",{className:"modal-header",children:[d.jsx("h2",{children:"Assign Lesson to Classrooms"}),d.jsx("button",{className:"modal-close",onClick:()=>q(!1),children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"20",height:"20",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),d.jsxs("div",{className:"modal-body",style:{flex:1,overflow:"hidden",display:"flex",flexDirection:"column"},children:[d.jsx("div",{style:{marginBottom:20,marginTop:-20},children:me.length>0||R.length>0?d.jsxs("div",{style:{padding:"8px 12px",backgroundColor:"#4169e1",color:"#fff",borderRadius:6,fontSize:14,fontWeight:600,textAlign:"center"},children:[me.length>0&&`${me.length} to assign`,me.length>0&&R.length>0&&" • ",R.length>0&&`${R.length} to unassign`]}):d.jsx("p",{style:{color:"#666",fontSize:14},children:"Select the classrooms you want to assign this lesson to:"})}),Y.length===0?d.jsx("div",{style:{textAlign:"center",padding:"20px",color:"#888"},children:d.jsx("p",{children:"No classrooms found. Create a classroom first to assign lessons."})}):d.jsxs(d.Fragment,{children:[d.jsxs("div",{style:{marginBottom:16,position:"relative",marginTop:-10},children:[d.jsx("span",{style:{position:"absolute",left:14,top:"50%",transform:"translateY(-50%)",pointerEvents:"none",zIndex:2,display:"flex",alignItems:"center"},children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"#666",style:{width:18,height:18},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})})}),d.jsx("input",{type:"text",placeholder:"Search classrooms...",value:be,onChange:P=>M(P.target.value),style:{width:"100%",padding:"10px 14px 10px 40px",borderRadius:8,border:"1.5px solid #e0e0e0",fontSize:14,outline:"none",transition:"border 0.2s",fontFamily:"Space Mono, monospace"},onFocus:P=>P.target.style.borderColor="#4169e1",onBlur:P=>P.target.style.borderColor="#e0e0e0"})]}),d.jsxs("div",{style:{maxHeight:"170px",overflowY:"auto",flex:1},children:[Y.filter(P=>P.name.toLowerCase().includes(be.toLowerCase())).sort((P,oe)=>{const ee=(P.lessons||[]).find(Se=>Se.id===K.id),_e=(oe.lessons||[]).find(Se=>Se.id===K.id);return ee&&!_e?-1:!ee&&_e?1:P.name.localeCompare(oe.name)}).map(P=>{var ee,_e;const oe=(P.lessons||[]).find(Se=>Se.id===K.id);return d.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"12px 16px",border:"1px solid #e0e0e0",borderRadius:8,marginBottom:8,background:P.color||"#4169e1",color:"#fff",opacity:oe?.9:1,height:"60px"},children:[d.jsx("div",{onClick:Se=>{if(Se.target.closest("input"))return;(oe?!R.includes(P.id):me.includes(P.id))?oe?I([...R,P.id]):fe(me.filter(lt=>lt!==P.id)):(oe||fe([...me,P.id]),I(R.filter(lt=>lt!==P.id)))},style:{width:"20px",height:"20px",border:"2px solid #fff",borderRadius:"4px",marginRight:12,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",backgroundColor:(oe?!R.includes(P.id):me.includes(P.id))?"#fff":"transparent",transition:"all 0.2s ease"},children:(oe?!R.includes(P.id):me.includes(P.id))&&d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:14,height:14,color:P.color||"#4169e1"},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"})})}),d.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",justifyContent:"center",height:"100%",padding:"0px 0"},children:[d.jsx("div",{style:{fontWeight:600,marginBottom:4},children:P.name}),d.jsxs("div",{style:{fontSize:12,color:"rgba(255,255,255,0.8)"},children:[((ee=P.students)==null?void 0:ee.length)||0," students • ",((_e=P.groups)==null?void 0:_e.length)||0," groups"]})]})]},P.id)}),Y.filter(P=>P.name.toLowerCase().includes(be.toLowerCase())).length===0&&be&&d.jsx("div",{style:{textAlign:"center",padding:"20px",color:"#888"},children:d.jsxs("p",{children:['No classrooms found matching "',be,'"']})})]})]})]}),d.jsxs("div",{className:"modal-footer",style:{display:"flex",gap:12,justifyContent:"flex-end"},children:[d.jsx("button",{className:"btn-secondary",onClick:()=>q(!1),children:"Cancel"}),d.jsx("button",{className:"btn-primary",style:{background:me.length>0||R.length>0?"#28a745":"#e0e0e0",borderColor:me.length>0||R.length>0?"#28a745":"#e0e0e0",color:me.length>0||R.length>0?"#fff":"#b0b0b0",cursor:me.length>0||R.length>0?"pointer":"not-allowed"},onClick:he,disabled:me.length===0&&R.length===0,children:"Apply Changes"})]})]})})]})]})}function $k({lesson:i,isActive:e,onClick:n,onDelete:r,canDelete:o}){const[c,f]=Rc.useState(!1),p=i.title.length>14?i.title.slice(0,14)+"…":i.title;return d.jsxs("div",{style:{position:"relative",display:"flex",alignItems:"center"},onMouseEnter:()=>f(!0),onMouseLeave:()=>f(!1),children:[d.jsx("button",{onClick:n,className:e?"active":"",style:{width:"100%",textAlign:"left",padding:"16px 18px",marginBottom:8,border:"none",borderRadius:10,background:e?"#f0f4ff":"none",color:e?"#4169e1":"#222",fontWeight:700,fontSize:17,cursor:"pointer",transition:"background 0.2s, color 0.2s",outline:"none",boxShadow:e?"0 2px 8px rgba(65, 105, 225, 0.08)":"none",borderLeft:e?"4px solid #4169e1":"4px solid transparent",display:"block",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:p}),o&&c&&d.jsx("button",{onClick:r,title:"Delete lesson",style:{position:"absolute",right:30,top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",padding:0,margin:0,zIndex:2,color:"#4169e1",opacity:1,transition:"color 0.2s"},children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:16,height:16},children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})})})]})}function Jk(){const i=fs(),e=C.useRef(i);return C.useEffect(()=>{const n=e.current.pathname.match(/^\/sessions\/[^/]+$/),r=i.pathname.match(/^\/sessions\/[^/]+$/);n&&!r&&window.location.reload(),e.current=i},[i]),d.jsxs(sE,{children:[d.jsx(Ar,{path:"/",element:d.jsx(wk,{})}),d.jsx(Ar,{path:"/login",element:d.jsx(Sk,{})}),d.jsx(Ar,{path:"/signup",element:d.jsx(Ek,{})}),d.jsx(Ar,{path:"/dashboard",element:d.jsx(Mk,{})}),d.jsx(Ar,{path:"/sessions",element:d.jsx(Lk,{})}),d.jsx(Ar,{path:"/sessions/:sessionId",element:d.jsx(Zk,{})}),d.jsx(Ar,{path:"/classrooms",element:d.jsx(Kk,{})}),d.jsx(Ar,{path:"/lessons",element:d.jsx(Qk,{})})]})}function eN(){return d.jsx(CE,{children:d.jsx("div",{className:"App",children:d.jsx(Jk,{})})})}hS.createRoot(document.getElementById("root")).render(d.jsx(Rc.StrictMode,{children:d.jsx(eN,{})}));
