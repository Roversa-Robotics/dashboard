(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const h of c.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&r(h)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();function w_(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var dm={exports:{}},lc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bv;function iE(){if(bv)return lc;bv=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,o,c){var h=null;if(c!==void 0&&(h=""+c),o.key!==void 0&&(h=""+o.key),"key"in o){c={};for(var p in o)p!=="key"&&(c[p]=o[p])}else c=o;return o=c.ref,{$$typeof:i,type:r,key:h,ref:o!==void 0?o:null,props:c}}return lc.Fragment=e,lc.jsx=n,lc.jsxs=n,lc}var wv;function sE(){return wv||(wv=1,dm.exports=iE()),dm.exports}var f=sE(),hm={exports:{}},Ge={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xv;function rE(){if(xv)return Ge;xv=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),h=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),E=Symbol.iterator;function A(O){return O===null||typeof O!="object"?null:(O=E&&O[E]||O["@@iterator"],typeof O=="function"?O:null)}var B={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},H=Object.assign,q={};function Q(O,re,pe){this.props=O,this.context=re,this.refs=q,this.updater=pe||B}Q.prototype.isReactComponent={},Q.prototype.setState=function(O,re){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,re,"setState")},Q.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function $(){}$.prototype=Q.prototype;function Y(O,re,pe){this.props=O,this.context=re,this.refs=q,this.updater=pe||B}var z=Y.prototype=new $;z.constructor=Y,H(z,Q.prototype),z.isPureReactComponent=!0;var ge=Array.isArray,ee={H:null,A:null,T:null,S:null,V:null},me=Object.prototype.hasOwnProperty;function D(O,re,pe,ae,be,ke){return pe=ke.ref,{$$typeof:i,type:O,key:re,ref:pe!==void 0?pe:null,props:ke}}function R(O,re){return D(O.type,re,void 0,void 0,void 0,O.props)}function C(O){return typeof O=="object"&&O!==null&&O.$$typeof===i}function L(O){var re={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(pe){return re[pe]})}var j=/\/+/g;function P(O,re){return typeof O=="object"&&O!==null&&O.key!=null?L(""+O.key):re.toString(36)}function N(){}function qe(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(N,N):(O.status="pending",O.then(function(re){O.status==="pending"&&(O.status="fulfilled",O.value=re)},function(re){O.status==="pending"&&(O.status="rejected",O.reason=re)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function Je(O,re,pe,ae,be){var ke=typeof O;(ke==="undefined"||ke==="boolean")&&(O=null);var Oe=!1;if(O===null)Oe=!0;else switch(ke){case"bigint":case"string":case"number":Oe=!0;break;case"object":switch(O.$$typeof){case i:case e:Oe=!0;break;case w:return Oe=O._init,Je(Oe(O._payload),re,pe,ae,be)}}if(Oe)return be=be(O),Oe=ae===""?"."+P(O,0):ae,ge(be)?(pe="",Oe!=null&&(pe=Oe.replace(j,"$&/")+"/"),Je(be,re,pe,"",function(Wn){return Wn})):be!=null&&(C(be)&&(be=R(be,pe+(be.key==null||O&&O.key===be.key?"":(""+be.key).replace(j,"$&/")+"/")+Oe)),re.push(be)),1;Oe=0;var ut=ae===""?".":ae+":";if(ge(O))for(var dt=0;dt<O.length;dt++)ae=O[dt],ke=ut+P(ae,dt),Oe+=Je(ae,re,pe,ke,be);else if(dt=A(O),typeof dt=="function")for(O=dt.call(O),dt=0;!(ae=O.next()).done;)ae=ae.value,ke=ut+P(ae,dt++),Oe+=Je(ae,re,pe,ke,be);else if(ke==="object"){if(typeof O.then=="function")return Je(qe(O),re,pe,ae,be);throw re=String(O),Error("Objects are not valid as a React child (found: "+(re==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":re)+"). If you meant to render a collection of children, use an array instead.")}return Oe}function se(O,re,pe){if(O==null)return O;var ae=[],be=0;return Je(O,ae,"","",function(ke){return re.call(pe,ke,be++)}),ae}function he(O){if(O._status===-1){var re=O._result;re=re(),re.then(function(pe){(O._status===0||O._status===-1)&&(O._status=1,O._result=pe)},function(pe){(O._status===0||O._status===-1)&&(O._status=2,O._result=pe)}),O._status===-1&&(O._status=0,O._result=re)}if(O._status===1)return O._result.default;throw O._result}var ne=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var re=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(re))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)};function Ee(){}return Ge.Children={map:se,forEach:function(O,re,pe){se(O,function(){re.apply(this,arguments)},pe)},count:function(O){var re=0;return se(O,function(){re++}),re},toArray:function(O){return se(O,function(re){return re})||[]},only:function(O){if(!C(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},Ge.Component=Q,Ge.Fragment=n,Ge.Profiler=o,Ge.PureComponent=Y,Ge.StrictMode=r,Ge.Suspense=g,Ge.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ee,Ge.__COMPILER_RUNTIME={__proto__:null,c:function(O){return ee.H.useMemoCache(O)}},Ge.cache=function(O){return function(){return O.apply(null,arguments)}},Ge.cloneElement=function(O,re,pe){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var ae=H({},O.props),be=O.key,ke=void 0;if(re!=null)for(Oe in re.ref!==void 0&&(ke=void 0),re.key!==void 0&&(be=""+re.key),re)!me.call(re,Oe)||Oe==="key"||Oe==="__self"||Oe==="__source"||Oe==="ref"&&re.ref===void 0||(ae[Oe]=re[Oe]);var Oe=arguments.length-2;if(Oe===1)ae.children=pe;else if(1<Oe){for(var ut=Array(Oe),dt=0;dt<Oe;dt++)ut[dt]=arguments[dt+2];ae.children=ut}return D(O.type,be,void 0,void 0,ke,ae)},Ge.createContext=function(O){return O={$$typeof:h,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:c,_context:O},O},Ge.createElement=function(O,re,pe){var ae,be={},ke=null;if(re!=null)for(ae in re.key!==void 0&&(ke=""+re.key),re)me.call(re,ae)&&ae!=="key"&&ae!=="__self"&&ae!=="__source"&&(be[ae]=re[ae]);var Oe=arguments.length-2;if(Oe===1)be.children=pe;else if(1<Oe){for(var ut=Array(Oe),dt=0;dt<Oe;dt++)ut[dt]=arguments[dt+2];be.children=ut}if(O&&O.defaultProps)for(ae in Oe=O.defaultProps,Oe)be[ae]===void 0&&(be[ae]=Oe[ae]);return D(O,ke,void 0,void 0,null,be)},Ge.createRef=function(){return{current:null}},Ge.forwardRef=function(O){return{$$typeof:p,render:O}},Ge.isValidElement=C,Ge.lazy=function(O){return{$$typeof:w,_payload:{_status:-1,_result:O},_init:he}},Ge.memo=function(O,re){return{$$typeof:y,type:O,compare:re===void 0?null:re}},Ge.startTransition=function(O){var re=ee.T,pe={};ee.T=pe;try{var ae=O(),be=ee.S;be!==null&&be(pe,ae),typeof ae=="object"&&ae!==null&&typeof ae.then=="function"&&ae.then(Ee,ne)}catch(ke){ne(ke)}finally{ee.T=re}},Ge.unstable_useCacheRefresh=function(){return ee.H.useCacheRefresh()},Ge.use=function(O){return ee.H.use(O)},Ge.useActionState=function(O,re,pe){return ee.H.useActionState(O,re,pe)},Ge.useCallback=function(O,re){return ee.H.useCallback(O,re)},Ge.useContext=function(O){return ee.H.useContext(O)},Ge.useDebugValue=function(){},Ge.useDeferredValue=function(O,re){return ee.H.useDeferredValue(O,re)},Ge.useEffect=function(O,re,pe){var ae=ee.H;if(typeof pe=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ae.useEffect(O,re)},Ge.useId=function(){return ee.H.useId()},Ge.useImperativeHandle=function(O,re,pe){return ee.H.useImperativeHandle(O,re,pe)},Ge.useInsertionEffect=function(O,re){return ee.H.useInsertionEffect(O,re)},Ge.useLayoutEffect=function(O,re){return ee.H.useLayoutEffect(O,re)},Ge.useMemo=function(O,re){return ee.H.useMemo(O,re)},Ge.useOptimistic=function(O,re){return ee.H.useOptimistic(O,re)},Ge.useReducer=function(O,re,pe){return ee.H.useReducer(O,re,pe)},Ge.useRef=function(O){return ee.H.useRef(O)},Ge.useState=function(O){return ee.H.useState(O)},Ge.useSyncExternalStore=function(O,re,pe){return ee.H.useSyncExternalStore(O,re,pe)},Ge.useTransition=function(){return ee.H.useTransition()},Ge.version="19.1.0",Ge}var Ev;function cp(){return Ev||(Ev=1,hm.exports=rE()),hm.exports}var I=cp();const _c=w_(I);var fm={exports:{}},cc={},mm={exports:{}},pm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sv;function aE(){return Sv||(Sv=1,function(i){function e(se,he){var ne=se.length;se.push(he);e:for(;0<ne;){var Ee=ne-1>>>1,O=se[Ee];if(0<o(O,he))se[Ee]=he,se[ne]=O,ne=Ee;else break e}}function n(se){return se.length===0?null:se[0]}function r(se){if(se.length===0)return null;var he=se[0],ne=se.pop();if(ne!==he){se[0]=ne;e:for(var Ee=0,O=se.length,re=O>>>1;Ee<re;){var pe=2*(Ee+1)-1,ae=se[pe],be=pe+1,ke=se[be];if(0>o(ae,ne))be<O&&0>o(ke,ae)?(se[Ee]=ke,se[be]=ne,Ee=be):(se[Ee]=ae,se[pe]=ne,Ee=pe);else if(be<O&&0>o(ke,ne))se[Ee]=ke,se[be]=ne,Ee=be;else break e}}return he}function o(se,he){var ne=se.sortIndex-he.sortIndex;return ne!==0?ne:se.id-he.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;i.unstable_now=function(){return c.now()}}else{var h=Date,p=h.now();i.unstable_now=function(){return h.now()-p}}var g=[],y=[],w=1,E=null,A=3,B=!1,H=!1,q=!1,Q=!1,$=typeof setTimeout=="function"?setTimeout:null,Y=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;function ge(se){for(var he=n(y);he!==null;){if(he.callback===null)r(y);else if(he.startTime<=se)r(y),he.sortIndex=he.expirationTime,e(g,he);else break;he=n(y)}}function ee(se){if(q=!1,ge(se),!H)if(n(g)!==null)H=!0,me||(me=!0,P());else{var he=n(y);he!==null&&Je(ee,he.startTime-se)}}var me=!1,D=-1,R=5,C=-1;function L(){return Q?!0:!(i.unstable_now()-C<R)}function j(){if(Q=!1,me){var se=i.unstable_now();C=se;var he=!0;try{e:{H=!1,q&&(q=!1,Y(D),D=-1),B=!0;var ne=A;try{t:{for(ge(se),E=n(g);E!==null&&!(E.expirationTime>se&&L());){var Ee=E.callback;if(typeof Ee=="function"){E.callback=null,A=E.priorityLevel;var O=Ee(E.expirationTime<=se);if(se=i.unstable_now(),typeof O=="function"){E.callback=O,ge(se),he=!0;break t}E===n(g)&&r(g),ge(se)}else r(g);E=n(g)}if(E!==null)he=!0;else{var re=n(y);re!==null&&Je(ee,re.startTime-se),he=!1}}break e}finally{E=null,A=ne,B=!1}he=void 0}}finally{he?P():me=!1}}}var P;if(typeof z=="function")P=function(){z(j)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,qe=N.port2;N.port1.onmessage=j,P=function(){qe.postMessage(null)}}else P=function(){$(j,0)};function Je(se,he){D=$(function(){se(i.unstable_now())},he)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(se){se.callback=null},i.unstable_forceFrameRate=function(se){0>se||125<se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<se?Math.floor(1e3/se):5},i.unstable_getCurrentPriorityLevel=function(){return A},i.unstable_next=function(se){switch(A){case 1:case 2:case 3:var he=3;break;default:he=A}var ne=A;A=he;try{return se()}finally{A=ne}},i.unstable_requestPaint=function(){Q=!0},i.unstable_runWithPriority=function(se,he){switch(se){case 1:case 2:case 3:case 4:case 5:break;default:se=3}var ne=A;A=se;try{return he()}finally{A=ne}},i.unstable_scheduleCallback=function(se,he,ne){var Ee=i.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?Ee+ne:Ee):ne=Ee,se){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=ne+O,se={id:w++,callback:he,priorityLevel:se,startTime:ne,expirationTime:O,sortIndex:-1},ne>Ee?(se.sortIndex=ne,e(y,se),n(g)===null&&se===n(y)&&(q?(Y(D),D=-1):q=!0,Je(ee,ne-Ee))):(se.sortIndex=O,e(g,se),H||B||(H=!0,me||(me=!0,P()))),se},i.unstable_shouldYield=L,i.unstable_wrapCallback=function(se){var he=A;return function(){var ne=A;A=he;try{return se.apply(this,arguments)}finally{A=ne}}}}(pm)),pm}var Av;function oE(){return Av||(Av=1,mm.exports=aE()),mm.exports}var gm={exports:{}},Dn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tv;function lE(){if(Tv)return Dn;Tv=1;var i=cp();function e(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var w=2;w<arguments.length;w++)y+="&args[]="+encodeURIComponent(arguments[w])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(g,y,w){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:E==null?null:""+E,children:g,containerInfo:y,implementation:w}}var h=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Dn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Dn.createPortal=function(g,y){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return c(g,y,null,w)},Dn.flushSync=function(g){var y=h.T,w=r.p;try{if(h.T=null,r.p=2,g)return g()}finally{h.T=y,r.p=w,r.d.f()}},Dn.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,r.d.C(g,y))},Dn.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},Dn.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var w=y.as,E=p(w,y.crossOrigin),A=typeof y.integrity=="string"?y.integrity:void 0,B=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;w==="style"?r.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:E,integrity:A,fetchPriority:B}):w==="script"&&r.d.X(g,{crossOrigin:E,integrity:A,fetchPriority:B,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Dn.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var w=p(y.as,y.crossOrigin);r.d.M(g,{crossOrigin:w,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&r.d.M(g)},Dn.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var w=y.as,E=p(w,y.crossOrigin);r.d.L(g,w,{crossOrigin:E,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Dn.preloadModule=function(g,y){if(typeof g=="string")if(y){var w=p(y.as,y.crossOrigin);r.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:w,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else r.d.m(g)},Dn.requestFormReset=function(g){r.d.r(g)},Dn.unstable_batchedUpdates=function(g,y){return g(y)},Dn.useFormState=function(g,y,w){return h.H.useFormState(g,y,w)},Dn.useFormStatus=function(){return h.H.useHostTransitionStatus()},Dn.version="19.1.0",Dn}var Rv;function x_(){if(Rv)return gm.exports;Rv=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),gm.exports=lE(),gm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cv;function cE(){if(Cv)return cc;Cv=1;var i=oE(),e=cp(),n=x_();function r(t){var s="https://react.dev/errors/"+t;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var s=t,a=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(a=s.return),t=s.return;while(t)}return s.tag===3?a:null}function h(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function p(t){if(c(t)!==t)throw Error(r(188))}function g(t){var s=t.alternate;if(!s){if(s=c(t),s===null)throw Error(r(188));return s!==t?null:t}for(var a=t,l=s;;){var d=a.return;if(d===null)break;var m=d.alternate;if(m===null){if(l=d.return,l!==null){a=l;continue}break}if(d.child===m.child){for(m=d.child;m;){if(m===a)return p(d),t;if(m===l)return p(d),s;m=m.sibling}throw Error(r(188))}if(a.return!==l.return)a=d,l=m;else{for(var b=!1,S=d.child;S;){if(S===a){b=!0,a=d,l=m;break}if(S===l){b=!0,l=d,a=m;break}S=S.sibling}if(!b){for(S=m.child;S;){if(S===a){b=!0,a=m,l=d;break}if(S===l){b=!0,l=m,a=d;break}S=S.sibling}if(!b)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?t:s}function y(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t;for(t=t.child;t!==null;){if(s=y(t),s!==null)return s;t=t.sibling}return null}var w=Object.assign,E=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),B=Symbol.for("react.portal"),H=Symbol.for("react.fragment"),q=Symbol.for("react.strict_mode"),Q=Symbol.for("react.profiler"),$=Symbol.for("react.provider"),Y=Symbol.for("react.consumer"),z=Symbol.for("react.context"),ge=Symbol.for("react.forward_ref"),ee=Symbol.for("react.suspense"),me=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),j=Symbol.iterator;function P(t){return t===null||typeof t!="object"?null:(t=j&&t[j]||t["@@iterator"],typeof t=="function"?t:null)}var N=Symbol.for("react.client.reference");function qe(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===N?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case H:return"Fragment";case Q:return"Profiler";case q:return"StrictMode";case ee:return"Suspense";case me:return"SuspenseList";case C:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case B:return"Portal";case z:return(t.displayName||"Context")+".Provider";case Y:return(t._context.displayName||"Context")+".Consumer";case ge:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case D:return s=t.displayName||null,s!==null?s:qe(t.type)||"Memo";case R:s=t._payload,t=t._init;try{return qe(t(s))}catch{}}return null}var Je=Array.isArray,se=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne={pending:!1,data:null,method:null,action:null},Ee=[],O=-1;function re(t){return{current:t}}function pe(t){0>O||(t.current=Ee[O],Ee[O]=null,O--)}function ae(t,s){O++,Ee[O]=t.current,t.current=s}var be=re(null),ke=re(null),Oe=re(null),ut=re(null);function dt(t,s){switch(ae(Oe,s),ae(ke,t),ae(be,null),s.nodeType){case 9:case 11:t=(t=s.documentElement)&&(t=t.namespaceURI)?Z0(t):0;break;default:if(t=s.tagName,s=s.namespaceURI)s=Z0(s),t=K0(s,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}pe(be),ae(be,t)}function Wn(){pe(be),pe(ke),pe(Oe)}function Pn(t){t.memoizedState!==null&&ae(ut,t);var s=be.current,a=K0(s,t.type);s!==a&&(ae(ke,t),ae(be,a))}function dn(t){ke.current===t&&(pe(be),pe(ke)),ut.current===t&&(pe(ut),ic._currentValue=ne)}var qi=Object.prototype.hasOwnProperty,ce=i.unstable_scheduleCallback,we=i.unstable_cancelCallback,De=i.unstable_shouldYield,Xe=i.unstable_requestPaint,Se=i.unstable_now,It=i.unstable_getCurrentPriorityLevel,ht=i.unstable_ImmediatePriority,Zn=i.unstable_UserBlockingPriority,Hs=i.unstable_NormalPriority,wi=i.unstable_LowPriority,Ar=i.unstable_IdlePriority,Tr=i.log,Ra=i.unstable_setDisableYieldValue,St=null,ot=null;function Un(t){if(typeof Tr=="function"&&Ra(t),ot&&typeof ot.setStrictMode=="function")try{ot.setStrictMode(St,t)}catch{}}var Wt=Math.clz32?Math.clz32:qs,fo=Math.log,bl=Math.LN2;function qs(t){return t>>>=0,t===0?32:31-(fo(t)/bl|0)|0}var Gi=256,Kn=4194304;function Yn(t){var s=t&42;if(s!==0)return s;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Me(t,s,a){var l=t.pendingLanes;if(l===0)return 0;var d=0,m=t.suspendedLanes,b=t.pingedLanes;t=t.warmLanes;var S=l&134217727;return S!==0?(l=S&~m,l!==0?d=Yn(l):(b&=S,b!==0?d=Yn(b):a||(a=S&~t,a!==0&&(d=Yn(a))))):(S=l&~m,S!==0?d=Yn(S):b!==0?d=Yn(b):a||(a=l&~t,a!==0&&(d=Yn(a)))),d===0?0:s!==0&&s!==d&&(s&m)===0&&(m=d&-d,a=s&-s,m>=a||m===32&&(a&4194048)!==0)?s:d}function Gs(t,s){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&s)===0}function We(t,s){switch(t){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fs(){var t=Gi;return Gi<<=1,(Gi&4194048)===0&&(Gi=256),t}function mo(){var t=Kn;return Kn<<=1,(Kn&62914560)===0&&(Kn=4194304),t}function Xi(t){for(var s=[],a=0;31>a;a++)s.push(t);return s}function Wi(t,s){t.pendingLanes|=s,s!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Xs(t,s,a,l,d,m){var b=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var S=t.entanglements,M=t.expirationTimes,K=t.hiddenUpdates;for(a=b&~a;0<a;){var oe=31-Wt(a),ue=1<<oe;S[oe]=0,M[oe]=-1;var J=K[oe];if(J!==null)for(K[oe]=null,oe=0;oe<J.length;oe++){var te=J[oe];te!==null&&(te.lane&=-536870913)}a&=~ue}l!==0&&xi(t,l,0),m!==0&&d===0&&t.tag!==0&&(t.suspendedLanes|=m&~(b&~s))}function xi(t,s,a){t.pendingLanes|=s,t.suspendedLanes&=~s;var l=31-Wt(s);t.entangledLanes|=s,t.entanglements[l]=t.entanglements[l]|1073741824|a&4194090}function ms(t,s){var a=t.entangledLanes|=s;for(t=t.entanglements;a;){var l=31-Wt(a),d=1<<l;d&s|t[l]&s&&(t[l]|=s),a&=~d}}function Zi(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Rr(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Ki(){var t=he.p;return t!==0?t:(t=window.event,t===void 0?32:mv(t.type))}function po(t,s){var a=he.p;try{return he.p=t,s()}finally{he.p=a}}var At=Math.random().toString(36).slice(2),Bt="__reactFiber$"+At,kt="__reactProps$"+At,Qn="__reactContainer$"+At,Cr="__reactEvents$"+At,Ws="__reactListeners$"+At,Ei="__reactHandles$"+At,go="__reactResources$"+At,Si="__reactMarker$"+At;function ps(t){delete t[Bt],delete t[kt],delete t[Cr],delete t[Ws],delete t[Ei]}function Yi(t){var s=t[Bt];if(s)return s;for(var a=t.parentNode;a;){if(s=a[Qn]||a[Bt]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(t=J0(t);t!==null;){if(a=t[Bt])return a;t=J0(t)}return s}t=a,a=t.parentNode}return null}function ci(t){if(t=t[Bt]||t[Qn]){var s=t.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return t}return null}function Ai(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t.stateNode;throw Error(r(33))}function bn(t){var s=t[go];return s||(s=t[go]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Nt(t){t[Si]=!0}var Ir=new Set,kr={};function ui(t,s){Qi(t,s),Qi(t+"Capture",s)}function Qi(t,s){for(kr[t]=s,t=0;t<s.length;t++)Ir.add(s[t])}var Ca=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ia={},Zs={};function ka(t){return qi.call(Zs,t)?!0:qi.call(Ia,t)?!1:Ca.test(t)?Zs[t]=!0:(Ia[t]=!0,!1)}function gs(t,s,a){if(ka(s))if(a===null)t.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(s);return;case"boolean":var l=s.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(s);return}}t.setAttribute(s,""+a)}}function Ti(t,s,a){if(a===null)t.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttribute(s,""+a)}}function en(t,s,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(s,a,""+l)}}var $n,yo;function Jn(t){if($n===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);$n=s&&s[1]||"",yo=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+$n+t+yo}var Nr=!1;function Dr(t,s){if(!t||Nr)return"";Nr=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(s){var ue=function(){throw Error()};if(Object.defineProperty(ue.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ue,[])}catch(te){var J=te}Reflect.construct(t,[],ue)}else{try{ue.call()}catch(te){J=te}t.call(ue.prototype)}}else{try{throw Error()}catch(te){J=te}(ue=t())&&typeof ue.catch=="function"&&ue.catch(function(){})}}catch(te){if(te&&J&&typeof te.stack=="string")return[te.stack,J.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=l.DetermineComponentFrameRoot(),b=m[0],S=m[1];if(b&&S){var M=b.split(`
`),K=S.split(`
`);for(d=l=0;l<M.length&&!M[l].includes("DetermineComponentFrameRoot");)l++;for(;d<K.length&&!K[d].includes("DetermineComponentFrameRoot");)d++;if(l===M.length||d===K.length)for(l=M.length-1,d=K.length-1;1<=l&&0<=d&&M[l]!==K[d];)d--;for(;1<=l&&0<=d;l--,d--)if(M[l]!==K[d]){if(l!==1||d!==1)do if(l--,d--,0>d||M[l]!==K[d]){var oe=`
`+M[l].replace(" at new "," at ");return t.displayName&&oe.includes("<anonymous>")&&(oe=oe.replace("<anonymous>",t.displayName)),oe}while(1<=l&&0<=d);break}}}finally{Nr=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Jn(a):""}function ys(t){switch(t.tag){case 26:case 27:case 5:return Jn(t.type);case 16:return Jn("Lazy");case 13:return Jn("Suspense");case 19:return Jn("SuspenseList");case 0:case 15:return Dr(t.type,!1);case 11:return Dr(t.type.render,!1);case 1:return Dr(t.type,!0);case 31:return Jn("Activity");default:return""}}function hn(t){try{var s="";do s+=ys(t),t=t.return;while(t);return s}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function fn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function mt(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function jr(t){var s=mt(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,s),l=""+t[s];if(!t.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,m=a.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return d.call(this)},set:function(b){l=""+b,m.call(this,b)}}),Object.defineProperty(t,s,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(b){l=""+b},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function Ri(t){t._valueTracker||(t._valueTracker=jr(t))}function Ci(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var a=s.getValue(),l="";return t&&(l=mt(t)?t.checked?"true":"false":t.value),t=l,t!==a?(s.setValue(t),!0):!1}function $i(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var vo=/[\n"\\]/g;function Dt(t){return t.replace(vo,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Bn(t,s,a,l,d,m,b,S){t.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?t.type=b:t.removeAttribute("type"),s!=null?b==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+fn(s)):t.value!==""+fn(s)&&(t.value=""+fn(s)):b!=="submit"&&b!=="reset"||t.removeAttribute("value"),s!=null?vs(t,b,fn(s)):a!=null?vs(t,b,fn(a)):l!=null&&t.removeAttribute("value"),d==null&&m!=null&&(t.defaultChecked=!!m),d!=null&&(t.checked=d&&typeof d!="function"&&typeof d!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?t.name=""+fn(S):t.removeAttribute("name")}function Ks(t,s,a,l,d,m,b,S){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),s!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||s!=null))return;a=a!=null?""+fn(a):"",s=s!=null?""+fn(s):a,S||s===t.value||(t.value=s),t.defaultValue=s}l=l??d,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=S?t.checked:!!l,t.defaultChecked=!!l,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(t.name=b)}function vs(t,s,a){s==="number"&&$i(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function ei(t,s,a,l){if(t=t.options,s){s={};for(var d=0;d<a.length;d++)s["$"+a[d]]=!0;for(a=0;a<t.length;a++)d=s.hasOwnProperty("$"+t[a].value),t[a].selected!==d&&(t[a].selected=d),d&&l&&(t[a].defaultSelected=!0)}else{for(a=""+fn(a),s=null,d=0;d<t.length;d++){if(t[d].value===a){t[d].selected=!0,l&&(t[d].defaultSelected=!0);return}s!==null||t[d].disabled||(s=t[d])}s!==null&&(s.selected=!0)}}function gt(t,s,a){if(s!=null&&(s=""+fn(s),s!==t.value&&(t.value=s),a==null)){t.defaultValue!==s&&(t.defaultValue=s);return}t.defaultValue=a!=null?""+fn(a):""}function Ii(t,s,a,l){if(s==null){if(l!=null){if(a!=null)throw Error(r(92));if(Je(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),s=a}a=fn(s),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l)}function ti(t,s){if(s){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=s;return}}t.textContent=s}var Ys=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Qs(t,s,a){var l=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="":l?t.setProperty(s,a):typeof a!="number"||a===0||Ys.has(s)?s==="float"?t.cssFloat=a:t[s]=(""+a).trim():t[s]=a+"px"}function Or(t,s,a){if(s!=null&&typeof s!="object")throw Error(r(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||s!=null&&s.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var d in s)l=s[d],s.hasOwnProperty(d)&&a[d]!==l&&Qs(t,d,l)}else for(var m in s)s.hasOwnProperty(m)&&Qs(t,m,s[m])}function _s(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _o=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ki=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function $s(t){return ki.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var Ji=null;function wn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Zt=null,es=null;function bs(t){var s=ci(t);if(s&&(t=s.stateNode)){var a=t[kt]||null;e:switch(t=s.stateNode,s.type){case"input":if(Bn(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Dt(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var l=a[s];if(l!==t&&l.form===t.form){var d=l[kt]||null;if(!d)throw Error(r(90));Bn(l,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(s=0;s<a.length;s++)l=a[s],l.form===t.form&&Ci(l)}break e;case"textarea":gt(t,a.value,a.defaultValue);break e;case"select":s=a.value,s!=null&&ei(t,!!a.multiple,s,!1)}}}var zn=!1;function bo(t,s,a){if(zn)return t(s,a);zn=!0;try{var l=t(s);return l}finally{if(zn=!1,(Zt!==null||es!==null)&&(Fu(),Zt&&(s=Zt,t=es,es=Zt=null,bs(s),t)))for(s=0;s<t.length;s++)bs(t[s])}}function Mr(t,s){var a=t.stateNode;if(a===null)return null;var l=a[kt]||null;if(l===null)return null;a=l[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(r(231,s,typeof a));return a}var In=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),di=!1;if(In)try{var ts={};Object.defineProperty(ts,"passive",{get:function(){di=!0}}),window.addEventListener("test",ts,ts),window.removeEventListener("test",ts,ts)}catch{di=!1}var hi=null,ns=null,Ni=null;function Lr(){if(Ni)return Ni;var t,s=ns,a=s.length,l,d="value"in hi?hi.value:hi.textContent,m=d.length;for(t=0;t<a&&s[t]===d[t];t++);var b=a-t;for(l=1;l<=b&&s[a-l]===d[m-l];l++);return Ni=d.slice(t,1<l?1-l:void 0)}function x(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function k(){return!0}function U(){return!1}function V(t){function s(a,l,d,m,b){this._reactName=a,this._targetInst=d,this.type=l,this.nativeEvent=m,this.target=b,this.currentTarget=null;for(var S in t)t.hasOwnProperty(S)&&(a=t[S],this[S]=a?a(m):m[S]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?k:U,this.isPropagationStopped=U,this}return w(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=k)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=k)},persist:function(){},isPersistent:k}),s}var W={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ye=V(W),ve=w({},W,{view:0,detail:0}),Re=V(ve),nt,Te,Ue,yt=w({},ve,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Na,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ue&&(Ue&&t.type==="mousemove"?(nt=t.screenX-Ue.screenX,Te=t.screenY-Ue.screenY):Te=nt=0,Ue=t),nt)},movementY:function(t){return"movementY"in t?t.movementY:Te}}),lt=V(yt),Ot=w({},yt,{dataTransfer:0}),kn=V(Ot),tn=w({},ve,{relatedTarget:0}),Fn=V(tn),ni=w({},W,{animationName:0,elapsedTime:0,pseudoElement:0}),Ht=V(ni),ws=w({},W,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Di=V(ws),wo=w({},W,{data:0}),Vr=V(wo),Fe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Kt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ii={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pr(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=ii[t])?!!s[t]:!1}function Na(){return Pr}var tu=w({},ve,{key:function(t){if(t.key){var s=Fe[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=x(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Kt[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Na,charCode:function(t){return t.type==="keypress"?x(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?x(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),xo=V(tu),nu=w({},yt,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wl=V(nu),Js=w({},ve,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Na}),iu=V(Js),su=w({},W,{propertyName:0,elapsedTime:0,pseudoElement:0}),ru=V(su),au=w({},yt,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Eo=V(au),Hn=w({},W,{newState:0,oldState:0}),ou=V(Hn),lu=[9,13,27,32],xs=In&&"CompositionEvent"in window,u=null;In&&"documentMode"in document&&(u=document.documentMode);var v=In&&"TextEvent"in window&&!u,_=In&&(!xs||u&&8<u&&11>=u),T=" ",X=!1;function ie(t,s){switch(t){case"keyup":return lu.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _e(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var it=!1;function nn(t,s){switch(t){case"compositionend":return _e(s);case"keypress":return s.which!==32?null:(X=!0,T);case"textInput":return t=s.data,t===T&&X?null:t;default:return null}}function st(t,s){if(it)return t==="compositionend"||!xs&&ie(t,s)?(t=Lr(),Ni=ns=hi=null,it=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return _&&s.locale!=="ko"?null:s.data;default:return null}}var mn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sn(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!mn[t.type]:s==="textarea"}function er(t,s,a,l){Zt?es?es.push(l):es=[l]:Zt=l,s=Zu(s,"onChange"),0<s.length&&(a=new ye("onChange","change",null,a,l),t.push({event:a,listeners:s}))}var xn=null,Es=null;function xl(t){H0(t,0)}function cu(t){var s=Ai(t);if(Ci(s))return t}function ug(t,s){if(t==="change")return s}var dg=!1;if(In){var bh;if(In){var wh="oninput"in document;if(!wh){var hg=document.createElement("div");hg.setAttribute("oninput","return;"),wh=typeof hg.oninput=="function"}bh=wh}else bh=!1;dg=bh&&(!document.documentMode||9<document.documentMode)}function fg(){xn&&(xn.detachEvent("onpropertychange",mg),Es=xn=null)}function mg(t){if(t.propertyName==="value"&&cu(Es)){var s=[];er(s,Es,t,wn(t)),bo(xl,s)}}function j2(t,s,a){t==="focusin"?(fg(),xn=s,Es=a,xn.attachEvent("onpropertychange",mg)):t==="focusout"&&fg()}function O2(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return cu(Es)}function M2(t,s){if(t==="click")return cu(s)}function L2(t,s){if(t==="input"||t==="change")return cu(s)}function V2(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var fi=typeof Object.is=="function"?Object.is:V2;function El(t,s){if(fi(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var a=Object.keys(t),l=Object.keys(s);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var d=a[l];if(!qi.call(s,d)||!fi(t[d],s[d]))return!1}return!0}function pg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function gg(t,s){var a=pg(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=s&&l>=s)return{node:a,offset:s-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=pg(a)}}function yg(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?yg(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function vg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var s=$i(t.document);s instanceof t.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)t=s.contentWindow;else break;s=$i(t.document)}return s}function xh(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}var P2=In&&"documentMode"in document&&11>=document.documentMode,So=null,Eh=null,Sl=null,Sh=!1;function _g(t,s,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Sh||So==null||So!==$i(l)||(l=So,"selectionStart"in l&&xh(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Sl&&El(Sl,l)||(Sl=l,l=Zu(Eh,"onSelect"),0<l.length&&(s=new ye("onSelect","select",null,s,a),t.push({event:s,listeners:l}),s.target=So)))}function Da(t,s){var a={};return a[t.toLowerCase()]=s.toLowerCase(),a["Webkit"+t]="webkit"+s,a["Moz"+t]="moz"+s,a}var Ao={animationend:Da("Animation","AnimationEnd"),animationiteration:Da("Animation","AnimationIteration"),animationstart:Da("Animation","AnimationStart"),transitionrun:Da("Transition","TransitionRun"),transitionstart:Da("Transition","TransitionStart"),transitioncancel:Da("Transition","TransitionCancel"),transitionend:Da("Transition","TransitionEnd")},Ah={},bg={};In&&(bg=document.createElement("div").style,"AnimationEvent"in window||(delete Ao.animationend.animation,delete Ao.animationiteration.animation,delete Ao.animationstart.animation),"TransitionEvent"in window||delete Ao.transitionend.transition);function ja(t){if(Ah[t])return Ah[t];if(!Ao[t])return t;var s=Ao[t],a;for(a in s)if(s.hasOwnProperty(a)&&a in bg)return Ah[t]=s[a];return t}var wg=ja("animationend"),xg=ja("animationiteration"),Eg=ja("animationstart"),U2=ja("transitionrun"),B2=ja("transitionstart"),z2=ja("transitioncancel"),Sg=ja("transitionend"),Ag=new Map,Th="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Th.push("scrollEnd");function is(t,s){Ag.set(t,s),ui(s,[t])}var Tg=new WeakMap;function ji(t,s){if(typeof t=="object"&&t!==null){var a=Tg.get(t);return a!==void 0?a:(s={value:t,source:s,stack:hn(s)},Tg.set(t,s),s)}return{value:t,source:s,stack:hn(s)}}var Oi=[],To=0,Rh=0;function uu(){for(var t=To,s=Rh=To=0;s<t;){var a=Oi[s];Oi[s++]=null;var l=Oi[s];Oi[s++]=null;var d=Oi[s];Oi[s++]=null;var m=Oi[s];if(Oi[s++]=null,l!==null&&d!==null){var b=l.pending;b===null?d.next=d:(d.next=b.next,b.next=d),l.pending=d}m!==0&&Rg(a,d,m)}}function du(t,s,a,l){Oi[To++]=t,Oi[To++]=s,Oi[To++]=a,Oi[To++]=l,Rh|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Ch(t,s,a,l){return du(t,s,a,l),hu(t)}function Ro(t,s){return du(t,null,null,s),hu(t)}function Rg(t,s,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var d=!1,m=t.return;m!==null;)m.childLanes|=a,l=m.alternate,l!==null&&(l.childLanes|=a),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(d=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,d&&s!==null&&(d=31-Wt(a),t=m.hiddenUpdates,l=t[d],l===null?t[d]=[s]:l.push(s),s.lane=a|536870912),m):null}function hu(t){if(50<Kl)throw Kl=0,Mf=null,Error(r(185));for(var s=t.return;s!==null;)t=s,s=t.return;return t.tag===3?t.stateNode:null}var Co={};function F2(t,s,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mi(t,s,a,l){return new F2(t,s,a,l)}function Ih(t){return t=t.prototype,!(!t||!t.isReactComponent)}function tr(t,s){var a=t.alternate;return a===null?(a=mi(t.tag,s,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=s,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,s=t.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Cg(t,s){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=s,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,s=a.dependencies,t.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),t}function fu(t,s,a,l,d,m){var b=0;if(l=t,typeof t=="function")Ih(t)&&(b=1);else if(typeof t=="string")b=qx(t,a,be.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case C:return t=mi(31,a,s,d),t.elementType=C,t.lanes=m,t;case H:return Oa(a.children,d,m,s);case q:b=8,d|=24;break;case Q:return t=mi(12,a,s,d|2),t.elementType=Q,t.lanes=m,t;case ee:return t=mi(13,a,s,d),t.elementType=ee,t.lanes=m,t;case me:return t=mi(19,a,s,d),t.elementType=me,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case $:case z:b=10;break e;case Y:b=9;break e;case ge:b=11;break e;case D:b=14;break e;case R:b=16,l=null;break e}b=29,a=Error(r(130,t===null?"null":typeof t,"")),l=null}return s=mi(b,a,s,d),s.elementType=t,s.type=l,s.lanes=m,s}function Oa(t,s,a,l){return t=mi(7,t,l,s),t.lanes=a,t}function kh(t,s,a){return t=mi(6,t,null,s),t.lanes=a,t}function Nh(t,s,a){return s=mi(4,t.children!==null?t.children:[],t.key,s),s.lanes=a,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}var Io=[],ko=0,mu=null,pu=0,Mi=[],Li=0,Ma=null,nr=1,ir="";function La(t,s){Io[ko++]=pu,Io[ko++]=mu,mu=t,pu=s}function Ig(t,s,a){Mi[Li++]=nr,Mi[Li++]=ir,Mi[Li++]=Ma,Ma=t;var l=nr;t=ir;var d=32-Wt(l)-1;l&=~(1<<d),a+=1;var m=32-Wt(s)+d;if(30<m){var b=d-d%5;m=(l&(1<<b)-1).toString(32),l>>=b,d-=b,nr=1<<32-Wt(s)+d|a<<d|l,ir=m+t}else nr=1<<m|a<<d|l,ir=t}function Dh(t){t.return!==null&&(La(t,1),Ig(t,1,0))}function jh(t){for(;t===mu;)mu=Io[--ko],Io[ko]=null,pu=Io[--ko],Io[ko]=null;for(;t===Ma;)Ma=Mi[--Li],Mi[Li]=null,ir=Mi[--Li],Mi[Li]=null,nr=Mi[--Li],Mi[Li]=null}var qn=null,zt=null,ft=!1,Va=null,Ss=!1,Oh=Error(r(519));function Pa(t){var s=Error(r(418,""));throw Rl(ji(s,t)),Oh}function kg(t){var s=t.stateNode,a=t.type,l=t.memoizedProps;switch(s[Bt]=t,s[kt]=l,a){case"dialog":$e("cancel",s),$e("close",s);break;case"iframe":case"object":case"embed":$e("load",s);break;case"video":case"audio":for(a=0;a<Ql.length;a++)$e(Ql[a],s);break;case"source":$e("error",s);break;case"img":case"image":case"link":$e("error",s),$e("load",s);break;case"details":$e("toggle",s);break;case"input":$e("invalid",s),Ks(s,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),Ri(s);break;case"select":$e("invalid",s);break;case"textarea":$e("invalid",s),Ii(s,l.value,l.defaultValue,l.children),Ri(s)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||l.suppressHydrationWarning===!0||W0(s.textContent,a)?(l.popover!=null&&($e("beforetoggle",s),$e("toggle",s)),l.onScroll!=null&&$e("scroll",s),l.onScrollEnd!=null&&$e("scrollend",s),l.onClick!=null&&(s.onclick=Ku),s=!0):s=!1,s||Pa(t)}function Ng(t){for(qn=t.return;qn;)switch(qn.tag){case 5:case 13:Ss=!1;return;case 27:case 3:Ss=!0;return;default:qn=qn.return}}function Al(t){if(t!==qn)return!1;if(!ft)return Ng(t),ft=!0,!1;var s=t.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Qf(t.type,t.memoizedProps)),a=!a),a&&zt&&Pa(t),Ng(t),s===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));e:{for(t=t.nextSibling,s=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(s===0){zt=rs(t.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++;t=t.nextSibling}zt=null}}else s===27?(s=zt,ea(t.type)?(t=tm,tm=null,zt=t):zt=s):zt=qn?rs(t.stateNode.nextSibling):null;return!0}function Tl(){zt=qn=null,ft=!1}function Dg(){var t=Va;return t!==null&&(ai===null?ai=t:ai.push.apply(ai,t),Va=null),t}function Rl(t){Va===null?Va=[t]:Va.push(t)}var Mh=re(null),Ua=null,sr=null;function Ur(t,s,a){ae(Mh,s._currentValue),s._currentValue=a}function rr(t){t._currentValue=Mh.current,pe(Mh)}function Lh(t,s,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,l!==null&&(l.childLanes|=s)):l!==null&&(l.childLanes&s)!==s&&(l.childLanes|=s),t===a)break;t=t.return}}function Vh(t,s,a,l){var d=t.child;for(d!==null&&(d.return=t);d!==null;){var m=d.dependencies;if(m!==null){var b=d.child;m=m.firstContext;e:for(;m!==null;){var S=m;m=d;for(var M=0;M<s.length;M++)if(S.context===s[M]){m.lanes|=a,S=m.alternate,S!==null&&(S.lanes|=a),Lh(m.return,a,t),l||(b=null);break e}m=S.next}}else if(d.tag===18){if(b=d.return,b===null)throw Error(r(341));b.lanes|=a,m=b.alternate,m!==null&&(m.lanes|=a),Lh(b,a,t),b=null}else b=d.child;if(b!==null)b.return=d;else for(b=d;b!==null;){if(b===t){b=null;break}if(d=b.sibling,d!==null){d.return=b.return,b=d;break}b=b.return}d=b}}function Cl(t,s,a,l){t=null;for(var d=s,m=!1;d!==null;){if(!m){if((d.flags&524288)!==0)m=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var b=d.alternate;if(b===null)throw Error(r(387));if(b=b.memoizedProps,b!==null){var S=d.type;fi(d.pendingProps.value,b.value)||(t!==null?t.push(S):t=[S])}}else if(d===ut.current){if(b=d.alternate,b===null)throw Error(r(387));b.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(t!==null?t.push(ic):t=[ic])}d=d.return}t!==null&&Vh(s,t,a,l),s.flags|=262144}function gu(t){for(t=t.firstContext;t!==null;){if(!fi(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Ba(t){Ua=t,sr=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Nn(t){return jg(Ua,t)}function yu(t,s){return Ua===null&&Ba(t),jg(t,s)}function jg(t,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},sr===null){if(t===null)throw Error(r(308));sr=s,t.dependencies={lanes:0,firstContext:s},t.flags|=524288}else sr=sr.next=s;return a}var H2=typeof AbortController<"u"?AbortController:function(){var t=[],s=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){s.aborted=!0,t.forEach(function(a){return a()})}},q2=i.unstable_scheduleCallback,G2=i.unstable_NormalPriority,rn={$$typeof:z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ph(){return{controller:new H2,data:new Map,refCount:0}}function Il(t){t.refCount--,t.refCount===0&&q2(G2,function(){t.controller.abort()})}var kl=null,Uh=0,No=0,Do=null;function X2(t,s){if(kl===null){var a=kl=[];Uh=0,No=Ff(),Do={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Uh++,s.then(Og,Og),s}function Og(){if(--Uh===0&&kl!==null){Do!==null&&(Do.status="fulfilled");var t=kl;kl=null,No=0,Do=null;for(var s=0;s<t.length;s++)(0,t[s])()}}function W2(t,s){var a=[],l={status:"pending",value:null,reason:null,then:function(d){a.push(d)}};return t.then(function(){l.status="fulfilled",l.value=s;for(var d=0;d<a.length;d++)(0,a[d])(s)},function(d){for(l.status="rejected",l.reason=d,d=0;d<a.length;d++)(0,a[d])(void 0)}),l}var Mg=se.S;se.S=function(t,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&X2(t,s),Mg!==null&&Mg(t,s)};var za=re(null);function Bh(){var t=za.current;return t!==null?t:Tt.pooledCache}function vu(t,s){s===null?ae(za,za.current):ae(za,s.pool)}function Lg(){var t=Bh();return t===null?null:{parent:rn._currentValue,pool:t}}var Nl=Error(r(460)),Vg=Error(r(474)),_u=Error(r(542)),zh={then:function(){}};function Pg(t){return t=t.status,t==="fulfilled"||t==="rejected"}function bu(){}function Ug(t,s,a){switch(a=t[a],a===void 0?t.push(s):a!==s&&(s.then(bu,bu),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,zg(t),t;default:if(typeof s.status=="string")s.then(bu,bu);else{if(t=Tt,t!==null&&100<t.shellSuspendCounter)throw Error(r(482));t=s,t.status="pending",t.then(function(l){if(s.status==="pending"){var d=s;d.status="fulfilled",d.value=l}},function(l){if(s.status==="pending"){var d=s;d.status="rejected",d.reason=l}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,zg(t),t}throw Dl=s,Nl}}var Dl=null;function Bg(){if(Dl===null)throw Error(r(459));var t=Dl;return Dl=null,t}function zg(t){if(t===Nl||t===_u)throw Error(r(483))}var Br=!1;function Fh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Hh(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function zr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Fr(t,s,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(vt&2)!==0){var d=l.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),l.pending=s,s=hu(t),Rg(t,null,a),s}return du(t,l,s,a),hu(t)}function jl(t,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var l=s.lanes;l&=t.pendingLanes,a|=l,s.lanes=a,ms(t,a)}}function qh(t,s){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var d=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var b={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?d=m=b:m=m.next=b,a=a.next}while(a!==null);m===null?d=m=s:m=m.next=s}else d=m=s;a={baseState:l.baseState,firstBaseUpdate:d,lastBaseUpdate:m,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=s:t.next=s,a.lastBaseUpdate=s}var Gh=!1;function Ol(){if(Gh){var t=Do;if(t!==null)throw t}}function Ml(t,s,a,l){Gh=!1;var d=t.updateQueue;Br=!1;var m=d.firstBaseUpdate,b=d.lastBaseUpdate,S=d.shared.pending;if(S!==null){d.shared.pending=null;var M=S,K=M.next;M.next=null,b===null?m=K:b.next=K,b=M;var oe=t.alternate;oe!==null&&(oe=oe.updateQueue,S=oe.lastBaseUpdate,S!==b&&(S===null?oe.firstBaseUpdate=K:S.next=K,oe.lastBaseUpdate=M))}if(m!==null){var ue=d.baseState;b=0,oe=K=M=null,S=m;do{var J=S.lane&-536870913,te=J!==S.lane;if(te?(rt&J)===J:(l&J)===J){J!==0&&J===No&&(Gh=!0),oe!==null&&(oe=oe.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var Be=t,je=S;J=s;var xt=a;switch(je.tag){case 1:if(Be=je.payload,typeof Be=="function"){ue=Be.call(xt,ue,J);break e}ue=Be;break e;case 3:Be.flags=Be.flags&-65537|128;case 0:if(Be=je.payload,J=typeof Be=="function"?Be.call(xt,ue,J):Be,J==null)break e;ue=w({},ue,J);break e;case 2:Br=!0}}J=S.callback,J!==null&&(t.flags|=64,te&&(t.flags|=8192),te=d.callbacks,te===null?d.callbacks=[J]:te.push(J))}else te={lane:J,tag:S.tag,payload:S.payload,callback:S.callback,next:null},oe===null?(K=oe=te,M=ue):oe=oe.next=te,b|=J;if(S=S.next,S===null){if(S=d.shared.pending,S===null)break;te=S,S=te.next,te.next=null,d.lastBaseUpdate=te,d.shared.pending=null}}while(!0);oe===null&&(M=ue),d.baseState=M,d.firstBaseUpdate=K,d.lastBaseUpdate=oe,m===null&&(d.shared.lanes=0),Yr|=b,t.lanes=b,t.memoizedState=ue}}function Fg(t,s){if(typeof t!="function")throw Error(r(191,t));t.call(s)}function Hg(t,s){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Fg(a[t],s)}var jo=re(null),wu=re(0);function qg(t,s){t=hr,ae(wu,t),ae(jo,s),hr=t|s.baseLanes}function Xh(){ae(wu,hr),ae(jo,jo.current)}function Wh(){hr=wu.current,pe(jo),pe(wu)}var Hr=0,Ze=null,bt=null,Yt=null,xu=!1,Oo=!1,Fa=!1,Eu=0,Ll=0,Mo=null,Z2=0;function qt(){throw Error(r(321))}function Zh(t,s){if(s===null)return!1;for(var a=0;a<s.length&&a<t.length;a++)if(!fi(t[a],s[a]))return!1;return!0}function Kh(t,s,a,l,d,m){return Hr=m,Ze=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,se.H=t===null||t.memoizedState===null?Ry:Cy,Fa=!1,m=a(l,d),Fa=!1,Oo&&(m=Xg(s,a,l,d)),Gg(t),m}function Gg(t){se.H=Iu;var s=bt!==null&&bt.next!==null;if(Hr=0,Yt=bt=Ze=null,xu=!1,Ll=0,Mo=null,s)throw Error(r(300));t===null||pn||(t=t.dependencies,t!==null&&gu(t)&&(pn=!0))}function Xg(t,s,a,l){Ze=t;var d=0;do{if(Oo&&(Mo=null),Ll=0,Oo=!1,25<=d)throw Error(r(301));if(d+=1,Yt=bt=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}se.H=tx,m=s(a,l)}while(Oo);return m}function K2(){var t=se.H,s=t.useState()[0];return s=typeof s.then=="function"?Vl(s):s,t=t.useState()[0],(bt!==null?bt.memoizedState:null)!==t&&(Ze.flags|=1024),s}function Yh(){var t=Eu!==0;return Eu=0,t}function Qh(t,s,a){s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~a}function $h(t){if(xu){for(t=t.memoizedState;t!==null;){var s=t.queue;s!==null&&(s.pending=null),t=t.next}xu=!1}Hr=0,Yt=bt=Ze=null,Oo=!1,Ll=Eu=0,Mo=null}function si(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Yt===null?Ze.memoizedState=Yt=t:Yt=Yt.next=t,Yt}function Qt(){if(bt===null){var t=Ze.alternate;t=t!==null?t.memoizedState:null}else t=bt.next;var s=Yt===null?Ze.memoizedState:Yt.next;if(s!==null)Yt=s,bt=t;else{if(t===null)throw Ze.alternate===null?Error(r(467)):Error(r(310));bt=t,t={memoizedState:bt.memoizedState,baseState:bt.baseState,baseQueue:bt.baseQueue,queue:bt.queue,next:null},Yt===null?Ze.memoizedState=Yt=t:Yt=Yt.next=t}return Yt}function Jh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Vl(t){var s=Ll;return Ll+=1,Mo===null&&(Mo=[]),t=Ug(Mo,t,s),s=Ze,(Yt===null?s.memoizedState:Yt.next)===null&&(s=s.alternate,se.H=s===null||s.memoizedState===null?Ry:Cy),t}function Su(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Vl(t);if(t.$$typeof===z)return Nn(t)}throw Error(r(438,String(t)))}function ef(t){var s=null,a=Ze.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var l=Ze.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(s={data:l.data.map(function(d){return d.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=Jh(),Ze.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(t),l=0;l<t;l++)a[l]=L;return s.index++,a}function ar(t,s){return typeof s=="function"?s(t):s}function Au(t){var s=Qt();return tf(s,bt,t)}function tf(t,s,a){var l=t.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var d=t.baseQueue,m=l.pending;if(m!==null){if(d!==null){var b=d.next;d.next=m.next,m.next=b}s.baseQueue=d=m,l.pending=null}if(m=t.baseState,d===null)t.memoizedState=m;else{s=d.next;var S=b=null,M=null,K=s,oe=!1;do{var ue=K.lane&-536870913;if(ue!==K.lane?(rt&ue)===ue:(Hr&ue)===ue){var J=K.revertLane;if(J===0)M!==null&&(M=M.next={lane:0,revertLane:0,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),ue===No&&(oe=!0);else if((Hr&J)===J){K=K.next,J===No&&(oe=!0);continue}else ue={lane:0,revertLane:K.revertLane,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},M===null?(S=M=ue,b=m):M=M.next=ue,Ze.lanes|=J,Yr|=J;ue=K.action,Fa&&a(m,ue),m=K.hasEagerState?K.eagerState:a(m,ue)}else J={lane:ue,revertLane:K.revertLane,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},M===null?(S=M=J,b=m):M=M.next=J,Ze.lanes|=ue,Yr|=ue;K=K.next}while(K!==null&&K!==s);if(M===null?b=m:M.next=S,!fi(m,t.memoizedState)&&(pn=!0,oe&&(a=Do,a!==null)))throw a;t.memoizedState=m,t.baseState=b,t.baseQueue=M,l.lastRenderedState=m}return d===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function nf(t){var s=Qt(),a=s.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=t;var l=a.dispatch,d=a.pending,m=s.memoizedState;if(d!==null){a.pending=null;var b=d=d.next;do m=t(m,b.action),b=b.next;while(b!==d);fi(m,s.memoizedState)||(pn=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),a.lastRenderedState=m}return[m,l]}function Wg(t,s,a){var l=Ze,d=Qt(),m=ft;if(m){if(a===void 0)throw Error(r(407));a=a()}else a=s();var b=!fi((bt||d).memoizedState,a);b&&(d.memoizedState=a,pn=!0),d=d.queue;var S=Yg.bind(null,l,d,t);if(Pl(2048,8,S,[t]),d.getSnapshot!==s||b||Yt!==null&&Yt.memoizedState.tag&1){if(l.flags|=2048,Lo(9,Tu(),Kg.bind(null,l,d,a,s),null),Tt===null)throw Error(r(349));m||(Hr&124)!==0||Zg(l,s,a)}return a}function Zg(t,s,a){t.flags|=16384,t={getSnapshot:s,value:a},s=Ze.updateQueue,s===null?(s=Jh(),Ze.updateQueue=s,s.stores=[t]):(a=s.stores,a===null?s.stores=[t]:a.push(t))}function Kg(t,s,a,l){s.value=a,s.getSnapshot=l,Qg(s)&&$g(t)}function Yg(t,s,a){return a(function(){Qg(s)&&$g(t)})}function Qg(t){var s=t.getSnapshot;t=t.value;try{var a=s();return!fi(t,a)}catch{return!0}}function $g(t){var s=Ro(t,2);s!==null&&_i(s,t,2)}function sf(t){var s=si();if(typeof t=="function"){var a=t;if(t=a(),Fa){Un(!0);try{a()}finally{Un(!1)}}}return s.memoizedState=s.baseState=t,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ar,lastRenderedState:t},s}function Jg(t,s,a,l){return t.baseState=a,tf(t,bt,typeof l=="function"?l:ar)}function Y2(t,s,a,l,d){if(Cu(t))throw Error(r(485));if(t=s.action,t!==null){var m={payload:d,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){m.listeners.push(b)}};se.T!==null?a(!0):m.isTransition=!1,l(m),a=s.pending,a===null?(m.next=s.pending=m,ey(s,m)):(m.next=a.next,s.pending=a.next=m)}}function ey(t,s){var a=s.action,l=s.payload,d=t.state;if(s.isTransition){var m=se.T,b={};se.T=b;try{var S=a(d,l),M=se.S;M!==null&&M(b,S),ty(t,s,S)}catch(K){rf(t,s,K)}finally{se.T=m}}else try{m=a(d,l),ty(t,s,m)}catch(K){rf(t,s,K)}}function ty(t,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){ny(t,s,l)},function(l){return rf(t,s,l)}):ny(t,s,a)}function ny(t,s,a){s.status="fulfilled",s.value=a,iy(s),t.state=a,s=t.pending,s!==null&&(a=s.next,a===s?t.pending=null:(a=a.next,s.next=a,ey(t,a)))}function rf(t,s,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do s.status="rejected",s.reason=a,iy(s),s=s.next;while(s!==l)}t.action=null}function iy(t){t=t.listeners;for(var s=0;s<t.length;s++)(0,t[s])()}function sy(t,s){return s}function ry(t,s){if(ft){var a=Tt.formState;if(a!==null){e:{var l=Ze;if(ft){if(zt){t:{for(var d=zt,m=Ss;d.nodeType!==8;){if(!m){d=null;break t}if(d=rs(d.nextSibling),d===null){d=null;break t}}m=d.data,d=m==="F!"||m==="F"?d:null}if(d){zt=rs(d.nextSibling),l=d.data==="F!";break e}}Pa(l)}l=!1}l&&(s=a[0])}}return a=si(),a.memoizedState=a.baseState=s,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:sy,lastRenderedState:s},a.queue=l,a=Sy.bind(null,Ze,l),l.dispatch=a,l=sf(!1),m=uf.bind(null,Ze,!1,l.queue),l=si(),d={state:s,dispatch:null,action:t,pending:null},l.queue=d,a=Y2.bind(null,Ze,d,m,a),d.dispatch=a,l.memoizedState=t,[s,a,!1]}function ay(t){var s=Qt();return oy(s,bt,t)}function oy(t,s,a){if(s=tf(t,s,sy)[0],t=Au(ar)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var l=Vl(s)}catch(b){throw b===Nl?_u:b}else l=s;s=Qt();var d=s.queue,m=d.dispatch;return a!==s.memoizedState&&(Ze.flags|=2048,Lo(9,Tu(),Q2.bind(null,d,a),null)),[l,m,t]}function Q2(t,s){t.action=s}function ly(t){var s=Qt(),a=bt;if(a!==null)return oy(s,a,t);Qt(),s=s.memoizedState,a=Qt();var l=a.queue.dispatch;return a.memoizedState=t,[s,l,!1]}function Lo(t,s,a,l){return t={tag:t,create:a,deps:l,inst:s,next:null},s=Ze.updateQueue,s===null&&(s=Jh(),Ze.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,s.lastEffect=t),t}function Tu(){return{destroy:void 0,resource:void 0}}function cy(){return Qt().memoizedState}function Ru(t,s,a,l){var d=si();l=l===void 0?null:l,Ze.flags|=t,d.memoizedState=Lo(1|s,Tu(),a,l)}function Pl(t,s,a,l){var d=Qt();l=l===void 0?null:l;var m=d.memoizedState.inst;bt!==null&&l!==null&&Zh(l,bt.memoizedState.deps)?d.memoizedState=Lo(s,m,a,l):(Ze.flags|=t,d.memoizedState=Lo(1|s,m,a,l))}function uy(t,s){Ru(8390656,8,t,s)}function dy(t,s){Pl(2048,8,t,s)}function hy(t,s){return Pl(4,2,t,s)}function fy(t,s){return Pl(4,4,t,s)}function my(t,s){if(typeof s=="function"){t=t();var a=s(t);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function py(t,s,a){a=a!=null?a.concat([t]):null,Pl(4,4,my.bind(null,s,t),a)}function af(){}function gy(t,s){var a=Qt();s=s===void 0?null:s;var l=a.memoizedState;return s!==null&&Zh(s,l[1])?l[0]:(a.memoizedState=[t,s],t)}function yy(t,s){var a=Qt();s=s===void 0?null:s;var l=a.memoizedState;if(s!==null&&Zh(s,l[1]))return l[0];if(l=t(),Fa){Un(!0);try{t()}finally{Un(!1)}}return a.memoizedState=[l,s],l}function of(t,s,a){return a===void 0||(Hr&1073741824)!==0?t.memoizedState=s:(t.memoizedState=a,t=b0(),Ze.lanes|=t,Yr|=t,a)}function vy(t,s,a,l){return fi(a,s)?a:jo.current!==null?(t=of(t,a,l),fi(t,s)||(pn=!0),t):(Hr&42)===0?(pn=!0,t.memoizedState=a):(t=b0(),Ze.lanes|=t,Yr|=t,s)}function _y(t,s,a,l,d){var m=he.p;he.p=m!==0&&8>m?m:8;var b=se.T,S={};se.T=S,uf(t,!1,s,a);try{var M=d(),K=se.S;if(K!==null&&K(S,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var oe=W2(M,l);Ul(t,s,oe,vi(t))}else Ul(t,s,l,vi(t))}catch(ue){Ul(t,s,{then:function(){},status:"rejected",reason:ue},vi())}finally{he.p=m,se.T=b}}function $2(){}function lf(t,s,a,l){if(t.tag!==5)throw Error(r(476));var d=by(t).queue;_y(t,d,s,ne,a===null?$2:function(){return wy(t),a(l)})}function by(t){var s=t.memoizedState;if(s!==null)return s;s={memoizedState:ne,baseState:ne,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ar,lastRenderedState:ne},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ar,lastRenderedState:a},next:null},t.memoizedState=s,t=t.alternate,t!==null&&(t.memoizedState=s),s}function wy(t){var s=by(t).next.queue;Ul(t,s,{},vi())}function cf(){return Nn(ic)}function xy(){return Qt().memoizedState}function Ey(){return Qt().memoizedState}function J2(t){for(var s=t.return;s!==null;){switch(s.tag){case 24:case 3:var a=vi();t=zr(a);var l=Fr(s,t,a);l!==null&&(_i(l,s,a),jl(l,s,a)),s={cache:Ph()},t.payload=s;return}s=s.return}}function ex(t,s,a){var l=vi();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Cu(t)?Ay(s,a):(a=Ch(t,s,a,l),a!==null&&(_i(a,t,l),Ty(a,s,l)))}function Sy(t,s,a){var l=vi();Ul(t,s,a,l)}function Ul(t,s,a,l){var d={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Cu(t))Ay(s,d);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var b=s.lastRenderedState,S=m(b,a);if(d.hasEagerState=!0,d.eagerState=S,fi(S,b))return du(t,s,d,0),Tt===null&&uu(),!1}catch{}finally{}if(a=Ch(t,s,d,l),a!==null)return _i(a,t,l),Ty(a,s,l),!0}return!1}function uf(t,s,a,l){if(l={lane:2,revertLane:Ff(),action:l,hasEagerState:!1,eagerState:null,next:null},Cu(t)){if(s)throw Error(r(479))}else s=Ch(t,a,l,2),s!==null&&_i(s,t,2)}function Cu(t){var s=t.alternate;return t===Ze||s!==null&&s===Ze}function Ay(t,s){Oo=xu=!0;var a=t.pending;a===null?s.next=s:(s.next=a.next,a.next=s),t.pending=s}function Ty(t,s,a){if((a&4194048)!==0){var l=s.lanes;l&=t.pendingLanes,a|=l,s.lanes=a,ms(t,a)}}var Iu={readContext:Nn,use:Su,useCallback:qt,useContext:qt,useEffect:qt,useImperativeHandle:qt,useLayoutEffect:qt,useInsertionEffect:qt,useMemo:qt,useReducer:qt,useRef:qt,useState:qt,useDebugValue:qt,useDeferredValue:qt,useTransition:qt,useSyncExternalStore:qt,useId:qt,useHostTransitionStatus:qt,useFormState:qt,useActionState:qt,useOptimistic:qt,useMemoCache:qt,useCacheRefresh:qt},Ry={readContext:Nn,use:Su,useCallback:function(t,s){return si().memoizedState=[t,s===void 0?null:s],t},useContext:Nn,useEffect:uy,useImperativeHandle:function(t,s,a){a=a!=null?a.concat([t]):null,Ru(4194308,4,my.bind(null,s,t),a)},useLayoutEffect:function(t,s){return Ru(4194308,4,t,s)},useInsertionEffect:function(t,s){Ru(4,2,t,s)},useMemo:function(t,s){var a=si();s=s===void 0?null:s;var l=t();if(Fa){Un(!0);try{t()}finally{Un(!1)}}return a.memoizedState=[l,s],l},useReducer:function(t,s,a){var l=si();if(a!==void 0){var d=a(s);if(Fa){Un(!0);try{a(s)}finally{Un(!1)}}}else d=s;return l.memoizedState=l.baseState=d,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:d},l.queue=t,t=t.dispatch=ex.bind(null,Ze,t),[l.memoizedState,t]},useRef:function(t){var s=si();return t={current:t},s.memoizedState=t},useState:function(t){t=sf(t);var s=t.queue,a=Sy.bind(null,Ze,s);return s.dispatch=a,[t.memoizedState,a]},useDebugValue:af,useDeferredValue:function(t,s){var a=si();return of(a,t,s)},useTransition:function(){var t=sf(!1);return t=_y.bind(null,Ze,t.queue,!0,!1),si().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,s,a){var l=Ze,d=si();if(ft){if(a===void 0)throw Error(r(407));a=a()}else{if(a=s(),Tt===null)throw Error(r(349));(rt&124)!==0||Zg(l,s,a)}d.memoizedState=a;var m={value:a,getSnapshot:s};return d.queue=m,uy(Yg.bind(null,l,m,t),[t]),l.flags|=2048,Lo(9,Tu(),Kg.bind(null,l,m,a,s),null),a},useId:function(){var t=si(),s=Tt.identifierPrefix;if(ft){var a=ir,l=nr;a=(l&~(1<<32-Wt(l)-1)).toString(32)+a,s="«"+s+"R"+a,a=Eu++,0<a&&(s+="H"+a.toString(32)),s+="»"}else a=Z2++,s="«"+s+"r"+a.toString(32)+"»";return t.memoizedState=s},useHostTransitionStatus:cf,useFormState:ry,useActionState:ry,useOptimistic:function(t){var s=si();s.memoizedState=s.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=uf.bind(null,Ze,!0,a),a.dispatch=s,[t,s]},useMemoCache:ef,useCacheRefresh:function(){return si().memoizedState=J2.bind(null,Ze)}},Cy={readContext:Nn,use:Su,useCallback:gy,useContext:Nn,useEffect:dy,useImperativeHandle:py,useInsertionEffect:hy,useLayoutEffect:fy,useMemo:yy,useReducer:Au,useRef:cy,useState:function(){return Au(ar)},useDebugValue:af,useDeferredValue:function(t,s){var a=Qt();return vy(a,bt.memoizedState,t,s)},useTransition:function(){var t=Au(ar)[0],s=Qt().memoizedState;return[typeof t=="boolean"?t:Vl(t),s]},useSyncExternalStore:Wg,useId:xy,useHostTransitionStatus:cf,useFormState:ay,useActionState:ay,useOptimistic:function(t,s){var a=Qt();return Jg(a,bt,t,s)},useMemoCache:ef,useCacheRefresh:Ey},tx={readContext:Nn,use:Su,useCallback:gy,useContext:Nn,useEffect:dy,useImperativeHandle:py,useInsertionEffect:hy,useLayoutEffect:fy,useMemo:yy,useReducer:nf,useRef:cy,useState:function(){return nf(ar)},useDebugValue:af,useDeferredValue:function(t,s){var a=Qt();return bt===null?of(a,t,s):vy(a,bt.memoizedState,t,s)},useTransition:function(){var t=nf(ar)[0],s=Qt().memoizedState;return[typeof t=="boolean"?t:Vl(t),s]},useSyncExternalStore:Wg,useId:xy,useHostTransitionStatus:cf,useFormState:ly,useActionState:ly,useOptimistic:function(t,s){var a=Qt();return bt!==null?Jg(a,bt,t,s):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:ef,useCacheRefresh:Ey},Vo=null,Bl=0;function ku(t){var s=Bl;return Bl+=1,Vo===null&&(Vo=[]),Ug(Vo,t,s)}function zl(t,s){s=s.props.ref,t.ref=s!==void 0?s:null}function Nu(t,s){throw s.$$typeof===E?Error(r(525)):(t=Object.prototype.toString.call(s),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t)))}function Iy(t){var s=t._init;return s(t._payload)}function ky(t){function s(G,F){if(t){var Z=G.deletions;Z===null?(G.deletions=[F],G.flags|=16):Z.push(F)}}function a(G,F){if(!t)return null;for(;F!==null;)s(G,F),F=F.sibling;return null}function l(G){for(var F=new Map;G!==null;)G.key!==null?F.set(G.key,G):F.set(G.index,G),G=G.sibling;return F}function d(G,F){return G=tr(G,F),G.index=0,G.sibling=null,G}function m(G,F,Z){return G.index=Z,t?(Z=G.alternate,Z!==null?(Z=Z.index,Z<F?(G.flags|=67108866,F):Z):(G.flags|=67108866,F)):(G.flags|=1048576,F)}function b(G){return t&&G.alternate===null&&(G.flags|=67108866),G}function S(G,F,Z,le){return F===null||F.tag!==6?(F=kh(Z,G.mode,le),F.return=G,F):(F=d(F,Z),F.return=G,F)}function M(G,F,Z,le){var Ae=Z.type;return Ae===H?oe(G,F,Z.props.children,le,Z.key):F!==null&&(F.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===R&&Iy(Ae)===F.type)?(F=d(F,Z.props),zl(F,Z),F.return=G,F):(F=fu(Z.type,Z.key,Z.props,null,G.mode,le),zl(F,Z),F.return=G,F)}function K(G,F,Z,le){return F===null||F.tag!==4||F.stateNode.containerInfo!==Z.containerInfo||F.stateNode.implementation!==Z.implementation?(F=Nh(Z,G.mode,le),F.return=G,F):(F=d(F,Z.children||[]),F.return=G,F)}function oe(G,F,Z,le,Ae){return F===null||F.tag!==7?(F=Oa(Z,G.mode,le,Ae),F.return=G,F):(F=d(F,Z),F.return=G,F)}function ue(G,F,Z){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return F=kh(""+F,G.mode,Z),F.return=G,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case A:return Z=fu(F.type,F.key,F.props,null,G.mode,Z),zl(Z,F),Z.return=G,Z;case B:return F=Nh(F,G.mode,Z),F.return=G,F;case R:var le=F._init;return F=le(F._payload),ue(G,F,Z)}if(Je(F)||P(F))return F=Oa(F,G.mode,Z,null),F.return=G,F;if(typeof F.then=="function")return ue(G,ku(F),Z);if(F.$$typeof===z)return ue(G,yu(G,F),Z);Nu(G,F)}return null}function J(G,F,Z,le){var Ae=F!==null?F.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return Ae!==null?null:S(G,F,""+Z,le);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case A:return Z.key===Ae?M(G,F,Z,le):null;case B:return Z.key===Ae?K(G,F,Z,le):null;case R:return Ae=Z._init,Z=Ae(Z._payload),J(G,F,Z,le)}if(Je(Z)||P(Z))return Ae!==null?null:oe(G,F,Z,le,null);if(typeof Z.then=="function")return J(G,F,ku(Z),le);if(Z.$$typeof===z)return J(G,F,yu(G,Z),le);Nu(G,Z)}return null}function te(G,F,Z,le,Ae){if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return G=G.get(Z)||null,S(F,G,""+le,Ae);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case A:return G=G.get(le.key===null?Z:le.key)||null,M(F,G,le,Ae);case B:return G=G.get(le.key===null?Z:le.key)||null,K(F,G,le,Ae);case R:var Ye=le._init;return le=Ye(le._payload),te(G,F,Z,le,Ae)}if(Je(le)||P(le))return G=G.get(Z)||null,oe(F,G,le,Ae,null);if(typeof le.then=="function")return te(G,F,Z,ku(le),Ae);if(le.$$typeof===z)return te(G,F,Z,yu(F,le),Ae);Nu(F,le)}return null}function Be(G,F,Z,le){for(var Ae=null,Ye=null,Ce=F,Le=F=0,yn=null;Ce!==null&&Le<Z.length;Le++){Ce.index>Le?(yn=Ce,Ce=null):yn=Ce.sibling;var ct=J(G,Ce,Z[Le],le);if(ct===null){Ce===null&&(Ce=yn);break}t&&Ce&&ct.alternate===null&&s(G,Ce),F=m(ct,F,Le),Ye===null?Ae=ct:Ye.sibling=ct,Ye=ct,Ce=yn}if(Le===Z.length)return a(G,Ce),ft&&La(G,Le),Ae;if(Ce===null){for(;Le<Z.length;Le++)Ce=ue(G,Z[Le],le),Ce!==null&&(F=m(Ce,F,Le),Ye===null?Ae=Ce:Ye.sibling=Ce,Ye=Ce);return ft&&La(G,Le),Ae}for(Ce=l(Ce);Le<Z.length;Le++)yn=te(Ce,G,Le,Z[Le],le),yn!==null&&(t&&yn.alternate!==null&&Ce.delete(yn.key===null?Le:yn.key),F=m(yn,F,Le),Ye===null?Ae=yn:Ye.sibling=yn,Ye=yn);return t&&Ce.forEach(function(ra){return s(G,ra)}),ft&&La(G,Le),Ae}function je(G,F,Z,le){if(Z==null)throw Error(r(151));for(var Ae=null,Ye=null,Ce=F,Le=F=0,yn=null,ct=Z.next();Ce!==null&&!ct.done;Le++,ct=Z.next()){Ce.index>Le?(yn=Ce,Ce=null):yn=Ce.sibling;var ra=J(G,Ce,ct.value,le);if(ra===null){Ce===null&&(Ce=yn);break}t&&Ce&&ra.alternate===null&&s(G,Ce),F=m(ra,F,Le),Ye===null?Ae=ra:Ye.sibling=ra,Ye=ra,Ce=yn}if(ct.done)return a(G,Ce),ft&&La(G,Le),Ae;if(Ce===null){for(;!ct.done;Le++,ct=Z.next())ct=ue(G,ct.value,le),ct!==null&&(F=m(ct,F,Le),Ye===null?Ae=ct:Ye.sibling=ct,Ye=ct);return ft&&La(G,Le),Ae}for(Ce=l(Ce);!ct.done;Le++,ct=Z.next())ct=te(Ce,G,Le,ct.value,le),ct!==null&&(t&&ct.alternate!==null&&Ce.delete(ct.key===null?Le:ct.key),F=m(ct,F,Le),Ye===null?Ae=ct:Ye.sibling=ct,Ye=ct);return t&&Ce.forEach(function(nE){return s(G,nE)}),ft&&La(G,Le),Ae}function xt(G,F,Z,le){if(typeof Z=="object"&&Z!==null&&Z.type===H&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case A:e:{for(var Ae=Z.key;F!==null;){if(F.key===Ae){if(Ae=Z.type,Ae===H){if(F.tag===7){a(G,F.sibling),le=d(F,Z.props.children),le.return=G,G=le;break e}}else if(F.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===R&&Iy(Ae)===F.type){a(G,F.sibling),le=d(F,Z.props),zl(le,Z),le.return=G,G=le;break e}a(G,F);break}else s(G,F);F=F.sibling}Z.type===H?(le=Oa(Z.props.children,G.mode,le,Z.key),le.return=G,G=le):(le=fu(Z.type,Z.key,Z.props,null,G.mode,le),zl(le,Z),le.return=G,G=le)}return b(G);case B:e:{for(Ae=Z.key;F!==null;){if(F.key===Ae)if(F.tag===4&&F.stateNode.containerInfo===Z.containerInfo&&F.stateNode.implementation===Z.implementation){a(G,F.sibling),le=d(F,Z.children||[]),le.return=G,G=le;break e}else{a(G,F);break}else s(G,F);F=F.sibling}le=Nh(Z,G.mode,le),le.return=G,G=le}return b(G);case R:return Ae=Z._init,Z=Ae(Z._payload),xt(G,F,Z,le)}if(Je(Z))return Be(G,F,Z,le);if(P(Z)){if(Ae=P(Z),typeof Ae!="function")throw Error(r(150));return Z=Ae.call(Z),je(G,F,Z,le)}if(typeof Z.then=="function")return xt(G,F,ku(Z),le);if(Z.$$typeof===z)return xt(G,F,yu(G,Z),le);Nu(G,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint"?(Z=""+Z,F!==null&&F.tag===6?(a(G,F.sibling),le=d(F,Z),le.return=G,G=le):(a(G,F),le=kh(Z,G.mode,le),le.return=G,G=le),b(G)):a(G,F)}return function(G,F,Z,le){try{Bl=0;var Ae=xt(G,F,Z,le);return Vo=null,Ae}catch(Ce){if(Ce===Nl||Ce===_u)throw Ce;var Ye=mi(29,Ce,null,G.mode);return Ye.lanes=le,Ye.return=G,Ye}finally{}}}var Po=ky(!0),Ny=ky(!1),Vi=re(null),As=null;function qr(t){var s=t.alternate;ae(an,an.current&1),ae(Vi,t),As===null&&(s===null||jo.current!==null||s.memoizedState!==null)&&(As=t)}function Dy(t){if(t.tag===22){if(ae(an,an.current),ae(Vi,t),As===null){var s=t.alternate;s!==null&&s.memoizedState!==null&&(As=t)}}else Gr()}function Gr(){ae(an,an.current),ae(Vi,Vi.current)}function or(t){pe(Vi),As===t&&(As=null),pe(an)}var an=re(0);function Du(t){for(var s=t;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||em(a)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function df(t,s,a,l){s=t.memoizedState,a=a(l,s),a=a==null?s:w({},s,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var hf={enqueueSetState:function(t,s,a){t=t._reactInternals;var l=vi(),d=zr(l);d.payload=s,a!=null&&(d.callback=a),s=Fr(t,d,l),s!==null&&(_i(s,t,l),jl(s,t,l))},enqueueReplaceState:function(t,s,a){t=t._reactInternals;var l=vi(),d=zr(l);d.tag=1,d.payload=s,a!=null&&(d.callback=a),s=Fr(t,d,l),s!==null&&(_i(s,t,l),jl(s,t,l))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var a=vi(),l=zr(a);l.tag=2,s!=null&&(l.callback=s),s=Fr(t,l,a),s!==null&&(_i(s,t,a),jl(s,t,a))}};function jy(t,s,a,l,d,m,b){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,m,b):s.prototype&&s.prototype.isPureReactComponent?!El(a,l)||!El(d,m):!0}function Oy(t,s,a,l){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,l),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,l),s.state!==t&&hf.enqueueReplaceState(s,s.state,null)}function Ha(t,s){var a=s;if("ref"in s){a={};for(var l in s)l!=="ref"&&(a[l]=s[l])}if(t=t.defaultProps){a===s&&(a=w({},a));for(var d in t)a[d]===void 0&&(a[d]=t[d])}return a}var ju=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function My(t){ju(t)}function Ly(t){console.error(t)}function Vy(t){ju(t)}function Ou(t,s){try{var a=t.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(l){setTimeout(function(){throw l})}}function Py(t,s,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function ff(t,s,a){return a=zr(a),a.tag=3,a.payload={element:null},a.callback=function(){Ou(t,s)},a}function Uy(t){return t=zr(t),t.tag=3,t}function By(t,s,a,l){var d=a.type.getDerivedStateFromError;if(typeof d=="function"){var m=l.value;t.payload=function(){return d(m)},t.callback=function(){Py(s,a,l)}}var b=a.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(t.callback=function(){Py(s,a,l),typeof d!="function"&&(Qr===null?Qr=new Set([this]):Qr.add(this));var S=l.stack;this.componentDidCatch(l.value,{componentStack:S!==null?S:""})})}function nx(t,s,a,l,d){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(s=a.alternate,s!==null&&Cl(s,a,d,!0),a=Vi.current,a!==null){switch(a.tag){case 13:return As===null?Vf():a.alternate===null&&Ft===0&&(Ft=3),a.flags&=-257,a.flags|=65536,a.lanes=d,l===zh?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([l]):s.add(l),Uf(t,l,d)),!1;case 22:return a.flags|=65536,l===zh?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([l]):a.add(l)),Uf(t,l,d)),!1}throw Error(r(435,a.tag))}return Uf(t,l,d),Vf(),!1}if(ft)return s=Vi.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=d,l!==Oh&&(t=Error(r(422),{cause:l}),Rl(ji(t,a)))):(l!==Oh&&(s=Error(r(423),{cause:l}),Rl(ji(s,a))),t=t.current.alternate,t.flags|=65536,d&=-d,t.lanes|=d,l=ji(l,a),d=ff(t.stateNode,l,d),qh(t,d),Ft!==4&&(Ft=2)),!1;var m=Error(r(520),{cause:l});if(m=ji(m,a),Zl===null?Zl=[m]:Zl.push(m),Ft!==4&&(Ft=2),s===null)return!0;l=ji(l,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,t=d&-d,a.lanes|=t,t=ff(a.stateNode,l,t),qh(a,t),!1;case 1:if(s=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Qr===null||!Qr.has(m))))return a.flags|=65536,d&=-d,a.lanes|=d,d=Uy(d),By(d,t,a,l),qh(a,d),!1}a=a.return}while(a!==null);return!1}var zy=Error(r(461)),pn=!1;function En(t,s,a,l){s.child=t===null?Ny(s,null,a,l):Po(s,t.child,a,l)}function Fy(t,s,a,l,d){a=a.render;var m=s.ref;if("ref"in l){var b={};for(var S in l)S!=="ref"&&(b[S]=l[S])}else b=l;return Ba(s),l=Kh(t,s,a,b,m,d),S=Yh(),t!==null&&!pn?(Qh(t,s,d),lr(t,s,d)):(ft&&S&&Dh(s),s.flags|=1,En(t,s,l,d),s.child)}function Hy(t,s,a,l,d){if(t===null){var m=a.type;return typeof m=="function"&&!Ih(m)&&m.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=m,qy(t,s,m,l,d)):(t=fu(a.type,null,l,s,s.mode,d),t.ref=s.ref,t.return=s,s.child=t)}if(m=t.child,!wf(t,d)){var b=m.memoizedProps;if(a=a.compare,a=a!==null?a:El,a(b,l)&&t.ref===s.ref)return lr(t,s,d)}return s.flags|=1,t=tr(m,l),t.ref=s.ref,t.return=s,s.child=t}function qy(t,s,a,l,d){if(t!==null){var m=t.memoizedProps;if(El(m,l)&&t.ref===s.ref)if(pn=!1,s.pendingProps=l=m,wf(t,d))(t.flags&131072)!==0&&(pn=!0);else return s.lanes=t.lanes,lr(t,s,d)}return mf(t,s,a,l,d)}function Gy(t,s,a){var l=s.pendingProps,d=l.children,m=t!==null?t.memoizedState:null;if(l.mode==="hidden"){if((s.flags&128)!==0){if(l=m!==null?m.baseLanes|a:a,t!==null){for(d=s.child=t.child,m=0;d!==null;)m=m|d.lanes|d.childLanes,d=d.sibling;s.childLanes=m&~l}else s.childLanes=0,s.child=null;return Xy(t,s,l,a)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},t!==null&&vu(s,m!==null?m.cachePool:null),m!==null?qg(s,m):Xh(),Dy(s);else return s.lanes=s.childLanes=536870912,Xy(t,s,m!==null?m.baseLanes|a:a,a)}else m!==null?(vu(s,m.cachePool),qg(s,m),Gr(),s.memoizedState=null):(t!==null&&vu(s,null),Xh(),Gr());return En(t,s,d,a),s.child}function Xy(t,s,a,l){var d=Bh();return d=d===null?null:{parent:rn._currentValue,pool:d},s.memoizedState={baseLanes:a,cachePool:d},t!==null&&vu(s,null),Xh(),Dy(s),t!==null&&Cl(t,s,l,!0),null}function Mu(t,s){var a=s.ref;if(a===null)t!==null&&t.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(t===null||t.ref!==a)&&(s.flags|=4194816)}}function mf(t,s,a,l,d){return Ba(s),a=Kh(t,s,a,l,void 0,d),l=Yh(),t!==null&&!pn?(Qh(t,s,d),lr(t,s,d)):(ft&&l&&Dh(s),s.flags|=1,En(t,s,a,d),s.child)}function Wy(t,s,a,l,d,m){return Ba(s),s.updateQueue=null,a=Xg(s,l,a,d),Gg(t),l=Yh(),t!==null&&!pn?(Qh(t,s,m),lr(t,s,m)):(ft&&l&&Dh(s),s.flags|=1,En(t,s,a,m),s.child)}function Zy(t,s,a,l,d){if(Ba(s),s.stateNode===null){var m=Co,b=a.contextType;typeof b=="object"&&b!==null&&(m=Nn(b)),m=new a(l,m),s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=hf,s.stateNode=m,m._reactInternals=s,m=s.stateNode,m.props=l,m.state=s.memoizedState,m.refs={},Fh(s),b=a.contextType,m.context=typeof b=="object"&&b!==null?Nn(b):Co,m.state=s.memoizedState,b=a.getDerivedStateFromProps,typeof b=="function"&&(df(s,a,b,l),m.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(b=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),b!==m.state&&hf.enqueueReplaceState(m,m.state,null),Ml(s,l,m,d),Ol(),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308),l=!0}else if(t===null){m=s.stateNode;var S=s.memoizedProps,M=Ha(a,S);m.props=M;var K=m.context,oe=a.contextType;b=Co,typeof oe=="object"&&oe!==null&&(b=Nn(oe));var ue=a.getDerivedStateFromProps;oe=typeof ue=="function"||typeof m.getSnapshotBeforeUpdate=="function",S=s.pendingProps!==S,oe||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(S||K!==b)&&Oy(s,m,l,b),Br=!1;var J=s.memoizedState;m.state=J,Ml(s,l,m,d),Ol(),K=s.memoizedState,S||J!==K||Br?(typeof ue=="function"&&(df(s,a,ue,l),K=s.memoizedState),(M=Br||jy(s,a,M,l,J,K,b))?(oe||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(s.flags|=4194308)):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=l,s.memoizedState=K),m.props=l,m.state=K,m.context=b,l=M):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),l=!1)}else{m=s.stateNode,Hh(t,s),b=s.memoizedProps,oe=Ha(a,b),m.props=oe,ue=s.pendingProps,J=m.context,K=a.contextType,M=Co,typeof K=="object"&&K!==null&&(M=Nn(K)),S=a.getDerivedStateFromProps,(K=typeof S=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(b!==ue||J!==M)&&Oy(s,m,l,M),Br=!1,J=s.memoizedState,m.state=J,Ml(s,l,m,d),Ol();var te=s.memoizedState;b!==ue||J!==te||Br||t!==null&&t.dependencies!==null&&gu(t.dependencies)?(typeof S=="function"&&(df(s,a,S,l),te=s.memoizedState),(oe=Br||jy(s,a,oe,l,J,te,M)||t!==null&&t.dependencies!==null&&gu(t.dependencies))?(K||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(l,te,M),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(l,te,M)),typeof m.componentDidUpdate=="function"&&(s.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof m.componentDidUpdate!="function"||b===t.memoizedProps&&J===t.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&J===t.memoizedState||(s.flags|=1024),s.memoizedProps=l,s.memoizedState=te),m.props=l,m.state=te,m.context=M,l=oe):(typeof m.componentDidUpdate!="function"||b===t.memoizedProps&&J===t.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&J===t.memoizedState||(s.flags|=1024),l=!1)}return m=l,Mu(t,s),l=(s.flags&128)!==0,m||l?(m=s.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:m.render(),s.flags|=1,t!==null&&l?(s.child=Po(s,t.child,null,d),s.child=Po(s,null,a,d)):En(t,s,a,d),s.memoizedState=m.state,t=s.child):t=lr(t,s,d),t}function Ky(t,s,a,l){return Tl(),s.flags|=256,En(t,s,a,l),s.child}var pf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function gf(t){return{baseLanes:t,cachePool:Lg()}}function yf(t,s,a){return t=t!==null?t.childLanes&~a:0,s&&(t|=Pi),t}function Yy(t,s,a){var l=s.pendingProps,d=!1,m=(s.flags&128)!==0,b;if((b=m)||(b=t!==null&&t.memoizedState===null?!1:(an.current&2)!==0),b&&(d=!0,s.flags&=-129),b=(s.flags&32)!==0,s.flags&=-33,t===null){if(ft){if(d?qr(s):Gr(),ft){var S=zt,M;if(M=S){e:{for(M=S,S=Ss;M.nodeType!==8;){if(!S){S=null;break e}if(M=rs(M.nextSibling),M===null){S=null;break e}}S=M}S!==null?(s.memoizedState={dehydrated:S,treeContext:Ma!==null?{id:nr,overflow:ir}:null,retryLane:536870912,hydrationErrors:null},M=mi(18,null,null,0),M.stateNode=S,M.return=s,s.child=M,qn=s,zt=null,M=!0):M=!1}M||Pa(s)}if(S=s.memoizedState,S!==null&&(S=S.dehydrated,S!==null))return em(S)?s.lanes=32:s.lanes=536870912,null;or(s)}return S=l.children,l=l.fallback,d?(Gr(),d=s.mode,S=Lu({mode:"hidden",children:S},d),l=Oa(l,d,a,null),S.return=s,l.return=s,S.sibling=l,s.child=S,d=s.child,d.memoizedState=gf(a),d.childLanes=yf(t,b,a),s.memoizedState=pf,l):(qr(s),vf(s,S))}if(M=t.memoizedState,M!==null&&(S=M.dehydrated,S!==null)){if(m)s.flags&256?(qr(s),s.flags&=-257,s=_f(t,s,a)):s.memoizedState!==null?(Gr(),s.child=t.child,s.flags|=128,s=null):(Gr(),d=l.fallback,S=s.mode,l=Lu({mode:"visible",children:l.children},S),d=Oa(d,S,a,null),d.flags|=2,l.return=s,d.return=s,l.sibling=d,s.child=l,Po(s,t.child,null,a),l=s.child,l.memoizedState=gf(a),l.childLanes=yf(t,b,a),s.memoizedState=pf,s=d);else if(qr(s),em(S)){if(b=S.nextSibling&&S.nextSibling.dataset,b)var K=b.dgst;b=K,l=Error(r(419)),l.stack="",l.digest=b,Rl({value:l,source:null,stack:null}),s=_f(t,s,a)}else if(pn||Cl(t,s,a,!1),b=(a&t.childLanes)!==0,pn||b){if(b=Tt,b!==null&&(l=a&-a,l=(l&42)!==0?1:Zi(l),l=(l&(b.suspendedLanes|a))!==0?0:l,l!==0&&l!==M.retryLane))throw M.retryLane=l,Ro(t,l),_i(b,t,l),zy;S.data==="$?"||Vf(),s=_f(t,s,a)}else S.data==="$?"?(s.flags|=192,s.child=t.child,s=null):(t=M.treeContext,zt=rs(S.nextSibling),qn=s,ft=!0,Va=null,Ss=!1,t!==null&&(Mi[Li++]=nr,Mi[Li++]=ir,Mi[Li++]=Ma,nr=t.id,ir=t.overflow,Ma=s),s=vf(s,l.children),s.flags|=4096);return s}return d?(Gr(),d=l.fallback,S=s.mode,M=t.child,K=M.sibling,l=tr(M,{mode:"hidden",children:l.children}),l.subtreeFlags=M.subtreeFlags&65011712,K!==null?d=tr(K,d):(d=Oa(d,S,a,null),d.flags|=2),d.return=s,l.return=s,l.sibling=d,s.child=l,l=d,d=s.child,S=t.child.memoizedState,S===null?S=gf(a):(M=S.cachePool,M!==null?(K=rn._currentValue,M=M.parent!==K?{parent:K,pool:K}:M):M=Lg(),S={baseLanes:S.baseLanes|a,cachePool:M}),d.memoizedState=S,d.childLanes=yf(t,b,a),s.memoizedState=pf,l):(qr(s),a=t.child,t=a.sibling,a=tr(a,{mode:"visible",children:l.children}),a.return=s,a.sibling=null,t!==null&&(b=s.deletions,b===null?(s.deletions=[t],s.flags|=16):b.push(t)),s.child=a,s.memoizedState=null,a)}function vf(t,s){return s=Lu({mode:"visible",children:s},t.mode),s.return=t,t.child=s}function Lu(t,s){return t=mi(22,t,null,s),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function _f(t,s,a){return Po(s,t.child,null,a),t=vf(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function Qy(t,s,a){t.lanes|=s;var l=t.alternate;l!==null&&(l.lanes|=s),Lh(t.return,s,a)}function bf(t,s,a,l,d){var m=t.memoizedState;m===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:d}:(m.isBackwards=s,m.rendering=null,m.renderingStartTime=0,m.last=l,m.tail=a,m.tailMode=d)}function $y(t,s,a){var l=s.pendingProps,d=l.revealOrder,m=l.tail;if(En(t,s,l.children,a),l=an.current,(l&2)!==0)l=l&1|2,s.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Qy(t,a,s);else if(t.tag===19)Qy(t,a,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch(ae(an,l),d){case"forwards":for(a=s.child,d=null;a!==null;)t=a.alternate,t!==null&&Du(t)===null&&(d=a),a=a.sibling;a=d,a===null?(d=s.child,s.child=null):(d=a.sibling,a.sibling=null),bf(s,!1,d,a,m);break;case"backwards":for(a=null,d=s.child,s.child=null;d!==null;){if(t=d.alternate,t!==null&&Du(t)===null){s.child=d;break}t=d.sibling,d.sibling=a,a=d,d=t}bf(s,!0,a,null,m);break;case"together":bf(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function lr(t,s,a){if(t!==null&&(s.dependencies=t.dependencies),Yr|=s.lanes,(a&s.childLanes)===0)if(t!==null){if(Cl(t,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(t!==null&&s.child!==t.child)throw Error(r(153));if(s.child!==null){for(t=s.child,a=tr(t,t.pendingProps),s.child=a,a.return=s;t.sibling!==null;)t=t.sibling,a=a.sibling=tr(t,t.pendingProps),a.return=s;a.sibling=null}return s.child}function wf(t,s){return(t.lanes&s)!==0?!0:(t=t.dependencies,!!(t!==null&&gu(t)))}function ix(t,s,a){switch(s.tag){case 3:dt(s,s.stateNode.containerInfo),Ur(s,rn,t.memoizedState.cache),Tl();break;case 27:case 5:Pn(s);break;case 4:dt(s,s.stateNode.containerInfo);break;case 10:Ur(s,s.type,s.memoizedProps.value);break;case 13:var l=s.memoizedState;if(l!==null)return l.dehydrated!==null?(qr(s),s.flags|=128,null):(a&s.child.childLanes)!==0?Yy(t,s,a):(qr(s),t=lr(t,s,a),t!==null?t.sibling:null);qr(s);break;case 19:var d=(t.flags&128)!==0;if(l=(a&s.childLanes)!==0,l||(Cl(t,s,a,!1),l=(a&s.childLanes)!==0),d){if(l)return $y(t,s,a);s.flags|=128}if(d=s.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),ae(an,an.current),l)break;return null;case 22:case 23:return s.lanes=0,Gy(t,s,a);case 24:Ur(s,rn,t.memoizedState.cache)}return lr(t,s,a)}function Jy(t,s,a){if(t!==null)if(t.memoizedProps!==s.pendingProps)pn=!0;else{if(!wf(t,a)&&(s.flags&128)===0)return pn=!1,ix(t,s,a);pn=(t.flags&131072)!==0}else pn=!1,ft&&(s.flags&1048576)!==0&&Ig(s,pu,s.index);switch(s.lanes=0,s.tag){case 16:e:{t=s.pendingProps;var l=s.elementType,d=l._init;if(l=d(l._payload),s.type=l,typeof l=="function")Ih(l)?(t=Ha(l,t),s.tag=1,s=Zy(null,s,l,t,a)):(s.tag=0,s=mf(null,s,l,t,a));else{if(l!=null){if(d=l.$$typeof,d===ge){s.tag=11,s=Fy(null,s,l,t,a);break e}else if(d===D){s.tag=14,s=Hy(null,s,l,t,a);break e}}throw s=qe(l)||l,Error(r(306,s,""))}}return s;case 0:return mf(t,s,s.type,s.pendingProps,a);case 1:return l=s.type,d=Ha(l,s.pendingProps),Zy(t,s,l,d,a);case 3:e:{if(dt(s,s.stateNode.containerInfo),t===null)throw Error(r(387));l=s.pendingProps;var m=s.memoizedState;d=m.element,Hh(t,s),Ml(s,l,null,a);var b=s.memoizedState;if(l=b.cache,Ur(s,rn,l),l!==m.cache&&Vh(s,[rn],a,!0),Ol(),l=b.element,m.isDehydrated)if(m={element:l,isDehydrated:!1,cache:b.cache},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){s=Ky(t,s,l,a);break e}else if(l!==d){d=ji(Error(r(424)),s),Rl(d),s=Ky(t,s,l,a);break e}else{switch(t=s.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(zt=rs(t.firstChild),qn=s,ft=!0,Va=null,Ss=!0,a=Ny(s,null,l,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Tl(),l===d){s=lr(t,s,a);break e}En(t,s,l,a)}s=s.child}return s;case 26:return Mu(t,s),t===null?(a=iv(s.type,null,s.pendingProps,null))?s.memoizedState=a:ft||(a=s.type,t=s.pendingProps,l=Yu(Oe.current).createElement(a),l[Bt]=s,l[kt]=t,An(l,a,t),Nt(l),s.stateNode=l):s.memoizedState=iv(s.type,t.memoizedProps,s.pendingProps,t.memoizedState),null;case 27:return Pn(s),t===null&&ft&&(l=s.stateNode=ev(s.type,s.pendingProps,Oe.current),qn=s,Ss=!0,d=zt,ea(s.type)?(tm=d,zt=rs(l.firstChild)):zt=d),En(t,s,s.pendingProps.children,a),Mu(t,s),t===null&&(s.flags|=4194304),s.child;case 5:return t===null&&ft&&((d=l=zt)&&(l=Nx(l,s.type,s.pendingProps,Ss),l!==null?(s.stateNode=l,qn=s,zt=rs(l.firstChild),Ss=!1,d=!0):d=!1),d||Pa(s)),Pn(s),d=s.type,m=s.pendingProps,b=t!==null?t.memoizedProps:null,l=m.children,Qf(d,m)?l=null:b!==null&&Qf(d,b)&&(s.flags|=32),s.memoizedState!==null&&(d=Kh(t,s,K2,null,null,a),ic._currentValue=d),Mu(t,s),En(t,s,l,a),s.child;case 6:return t===null&&ft&&((t=a=zt)&&(a=Dx(a,s.pendingProps,Ss),a!==null?(s.stateNode=a,qn=s,zt=null,t=!0):t=!1),t||Pa(s)),null;case 13:return Yy(t,s,a);case 4:return dt(s,s.stateNode.containerInfo),l=s.pendingProps,t===null?s.child=Po(s,null,l,a):En(t,s,l,a),s.child;case 11:return Fy(t,s,s.type,s.pendingProps,a);case 7:return En(t,s,s.pendingProps,a),s.child;case 8:return En(t,s,s.pendingProps.children,a),s.child;case 12:return En(t,s,s.pendingProps.children,a),s.child;case 10:return l=s.pendingProps,Ur(s,s.type,l.value),En(t,s,l.children,a),s.child;case 9:return d=s.type._context,l=s.pendingProps.children,Ba(s),d=Nn(d),l=l(d),s.flags|=1,En(t,s,l,a),s.child;case 14:return Hy(t,s,s.type,s.pendingProps,a);case 15:return qy(t,s,s.type,s.pendingProps,a);case 19:return $y(t,s,a);case 31:return l=s.pendingProps,a=s.mode,l={mode:l.mode,children:l.children},t===null?(a=Lu(l,a),a.ref=s.ref,s.child=a,a.return=s,s=a):(a=tr(t.child,l),a.ref=s.ref,s.child=a,a.return=s,s=a),s;case 22:return Gy(t,s,a);case 24:return Ba(s),l=Nn(rn),t===null?(d=Bh(),d===null&&(d=Tt,m=Ph(),d.pooledCache=m,m.refCount++,m!==null&&(d.pooledCacheLanes|=a),d=m),s.memoizedState={parent:l,cache:d},Fh(s),Ur(s,rn,d)):((t.lanes&a)!==0&&(Hh(t,s),Ml(s,null,null,a),Ol()),d=t.memoizedState,m=s.memoizedState,d.parent!==l?(d={parent:l,cache:l},s.memoizedState=d,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=d),Ur(s,rn,l)):(l=m.cache,Ur(s,rn,l),l!==d.cache&&Vh(s,[rn],a,!0))),En(t,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function cr(t){t.flags|=4}function e0(t,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!lv(s)){if(s=Vi.current,s!==null&&((rt&4194048)===rt?As!==null:(rt&62914560)!==rt&&(rt&536870912)===0||s!==As))throw Dl=zh,Vg;t.flags|=8192}}function Vu(t,s){s!==null&&(t.flags|=4),t.flags&16384&&(s=t.tag!==22?mo():536870912,t.lanes|=s,Fo|=s)}function Fl(t,s){if(!ft)switch(t.tailMode){case"hidden":s=t.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function Mt(t){var s=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(s)for(var d=t.child;d!==null;)a|=d.lanes|d.childLanes,l|=d.subtreeFlags&65011712,l|=d.flags&65011712,d.return=t,d=d.sibling;else for(d=t.child;d!==null;)a|=d.lanes|d.childLanes,l|=d.subtreeFlags,l|=d.flags,d.return=t,d=d.sibling;return t.subtreeFlags|=l,t.childLanes=a,s}function sx(t,s,a){var l=s.pendingProps;switch(jh(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mt(s),null;case 1:return Mt(s),null;case 3:return a=s.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),rr(rn),Wn(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Al(s)?cr(s):t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Dg())),Mt(s),null;case 26:return a=s.memoizedState,t===null?(cr(s),a!==null?(Mt(s),e0(s,a)):(Mt(s),s.flags&=-16777217)):a?a!==t.memoizedState?(cr(s),Mt(s),e0(s,a)):(Mt(s),s.flags&=-16777217):(t.memoizedProps!==l&&cr(s),Mt(s),s.flags&=-16777217),null;case 27:dn(s),a=Oe.current;var d=s.type;if(t!==null&&s.stateNode!=null)t.memoizedProps!==l&&cr(s);else{if(!l){if(s.stateNode===null)throw Error(r(166));return Mt(s),null}t=be.current,Al(s)?kg(s):(t=ev(d,l,a),s.stateNode=t,cr(s))}return Mt(s),null;case 5:if(dn(s),a=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==l&&cr(s);else{if(!l){if(s.stateNode===null)throw Error(r(166));return Mt(s),null}if(t=be.current,Al(s))kg(s);else{switch(d=Yu(Oe.current),t){case 1:t=d.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=d.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=d.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=d.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=d.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?d.createElement("select",{is:l.is}):d.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?d.createElement(a,{is:l.is}):d.createElement(a)}}t[Bt]=s,t[kt]=l;e:for(d=s.child;d!==null;){if(d.tag===5||d.tag===6)t.appendChild(d.stateNode);else if(d.tag!==4&&d.tag!==27&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===s)break e;for(;d.sibling===null;){if(d.return===null||d.return===s)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}s.stateNode=t;e:switch(An(t,a,l),a){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&cr(s)}}return Mt(s),s.flags&=-16777217,null;case 6:if(t&&s.stateNode!=null)t.memoizedProps!==l&&cr(s);else{if(typeof l!="string"&&s.stateNode===null)throw Error(r(166));if(t=Oe.current,Al(s)){if(t=s.stateNode,a=s.memoizedProps,l=null,d=qn,d!==null)switch(d.tag){case 27:case 5:l=d.memoizedProps}t[Bt]=s,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||W0(t.nodeValue,a)),t||Pa(s)}else t=Yu(t).createTextNode(l),t[Bt]=s,s.stateNode=t}return Mt(s),null;case 13:if(l=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(d=Al(s),l!==null&&l.dehydrated!==null){if(t===null){if(!d)throw Error(r(318));if(d=s.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(317));d[Bt]=s}else Tl(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Mt(s),d=!1}else d=Dg(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=d),d=!0;if(!d)return s.flags&256?(or(s),s):(or(s),null)}if(or(s),(s.flags&128)!==0)return s.lanes=a,s;if(a=l!==null,t=t!==null&&t.memoizedState!==null,a){l=s.child,d=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(d=l.alternate.memoizedState.cachePool.pool);var m=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==d&&(l.flags|=2048)}return a!==t&&a&&(s.child.flags|=8192),Vu(s,s.updateQueue),Mt(s),null;case 4:return Wn(),t===null&&Xf(s.stateNode.containerInfo),Mt(s),null;case 10:return rr(s.type),Mt(s),null;case 19:if(pe(an),d=s.memoizedState,d===null)return Mt(s),null;if(l=(s.flags&128)!==0,m=d.rendering,m===null)if(l)Fl(d,!1);else{if(Ft!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(m=Du(t),m!==null){for(s.flags|=128,Fl(d,!1),t=m.updateQueue,s.updateQueue=t,Vu(s,t),s.subtreeFlags=0,t=a,a=s.child;a!==null;)Cg(a,t),a=a.sibling;return ae(an,an.current&1|2),s.child}t=t.sibling}d.tail!==null&&Se()>Bu&&(s.flags|=128,l=!0,Fl(d,!1),s.lanes=4194304)}else{if(!l)if(t=Du(m),t!==null){if(s.flags|=128,l=!0,t=t.updateQueue,s.updateQueue=t,Vu(s,t),Fl(d,!0),d.tail===null&&d.tailMode==="hidden"&&!m.alternate&&!ft)return Mt(s),null}else 2*Se()-d.renderingStartTime>Bu&&a!==536870912&&(s.flags|=128,l=!0,Fl(d,!1),s.lanes=4194304);d.isBackwards?(m.sibling=s.child,s.child=m):(t=d.last,t!==null?t.sibling=m:s.child=m,d.last=m)}return d.tail!==null?(s=d.tail,d.rendering=s,d.tail=s.sibling,d.renderingStartTime=Se(),s.sibling=null,t=an.current,ae(an,l?t&1|2:t&1),s):(Mt(s),null);case 22:case 23:return or(s),Wh(),l=s.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(s.flags|=8192):l&&(s.flags|=8192),l?(a&536870912)!==0&&(s.flags&128)===0&&(Mt(s),s.subtreeFlags&6&&(s.flags|=8192)):Mt(s),a=s.updateQueue,a!==null&&Vu(s,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),l!==a&&(s.flags|=2048),t!==null&&pe(za),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),rr(rn),Mt(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function rx(t,s){switch(jh(s),s.tag){case 1:return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return rr(rn),Wn(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 26:case 27:case 5:return dn(s),null;case 13:if(or(s),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(r(340));Tl()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return pe(an),null;case 4:return Wn(),null;case 10:return rr(s.type),null;case 22:case 23:return or(s),Wh(),t!==null&&pe(za),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 24:return rr(rn),null;case 25:return null;default:return null}}function t0(t,s){switch(jh(s),s.tag){case 3:rr(rn),Wn();break;case 26:case 27:case 5:dn(s);break;case 4:Wn();break;case 13:or(s);break;case 19:pe(an);break;case 10:rr(s.type);break;case 22:case 23:or(s),Wh(),t!==null&&pe(za);break;case 24:rr(rn)}}function Hl(t,s){try{var a=s.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var d=l.next;a=d;do{if((a.tag&t)===t){l=void 0;var m=a.create,b=a.inst;l=m(),b.destroy=l}a=a.next}while(a!==d)}}catch(S){Et(s,s.return,S)}}function Xr(t,s,a){try{var l=s.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var m=d.next;l=m;do{if((l.tag&t)===t){var b=l.inst,S=b.destroy;if(S!==void 0){b.destroy=void 0,d=s;var M=a,K=S;try{K()}catch(oe){Et(d,M,oe)}}}l=l.next}while(l!==m)}}catch(oe){Et(s,s.return,oe)}}function n0(t){var s=t.updateQueue;if(s!==null){var a=t.stateNode;try{Hg(s,a)}catch(l){Et(t,t.return,l)}}}function i0(t,s,a){a.props=Ha(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){Et(t,s,l)}}function ql(t,s){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(d){Et(t,s,d)}}function Ts(t,s){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(d){Et(t,s,d)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(d){Et(t,s,d)}else a.current=null}function s0(t){var s=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(d){Et(t,t.return,d)}}function xf(t,s,a){try{var l=t.stateNode;Tx(l,t.type,a,s),l[kt]=s}catch(d){Et(t,t.return,d)}}function r0(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&ea(t.type)||t.tag===4}function Ef(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||r0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&ea(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Sf(t,s,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(t),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Ku));else if(l!==4&&(l===27&&ea(t.type)&&(a=t.stateNode,s=null),t=t.child,t!==null))for(Sf(t,s,a),t=t.sibling;t!==null;)Sf(t,s,a),t=t.sibling}function Pu(t,s,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,s?a.insertBefore(t,s):a.appendChild(t);else if(l!==4&&(l===27&&ea(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Pu(t,s,a),t=t.sibling;t!==null;)Pu(t,s,a),t=t.sibling}function a0(t){var s=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,d=s.attributes;d.length;)s.removeAttributeNode(d[0]);An(s,l,a),s[Bt]=t,s[kt]=a}catch(m){Et(t,t.return,m)}}var ur=!1,Gt=!1,Af=!1,o0=typeof WeakSet=="function"?WeakSet:Set,gn=null;function ax(t,s){if(t=t.containerInfo,Kf=nd,t=vg(t),xh(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var d=l.anchorOffset,m=l.focusNode;l=l.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var b=0,S=-1,M=-1,K=0,oe=0,ue=t,J=null;t:for(;;){for(var te;ue!==a||d!==0&&ue.nodeType!==3||(S=b+d),ue!==m||l!==0&&ue.nodeType!==3||(M=b+l),ue.nodeType===3&&(b+=ue.nodeValue.length),(te=ue.firstChild)!==null;)J=ue,ue=te;for(;;){if(ue===t)break t;if(J===a&&++K===d&&(S=b),J===m&&++oe===l&&(M=b),(te=ue.nextSibling)!==null)break;ue=J,J=ue.parentNode}ue=te}a=S===-1||M===-1?null:{start:S,end:M}}else a=null}a=a||{start:0,end:0}}else a=null;for(Yf={focusedElem:t,selectionRange:a},nd=!1,gn=s;gn!==null;)if(s=gn,t=s.child,(s.subtreeFlags&1024)!==0&&t!==null)t.return=s,gn=t;else for(;gn!==null;){switch(s=gn,m=s.alternate,t=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,a=s,d=m.memoizedProps,m=m.memoizedState,l=a.stateNode;try{var Be=Ha(a.type,d,a.elementType===a.type);t=l.getSnapshotBeforeUpdate(Be,m),l.__reactInternalSnapshotBeforeUpdate=t}catch(je){Et(a,a.return,je)}}break;case 3:if((t&1024)!==0){if(t=s.stateNode.containerInfo,a=t.nodeType,a===9)Jf(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Jf(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(r(163))}if(t=s.sibling,t!==null){t.return=s.return,gn=t;break}gn=s.return}}function l0(t,s,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Wr(t,a),l&4&&Hl(5,a);break;case 1:if(Wr(t,a),l&4)if(t=a.stateNode,s===null)try{t.componentDidMount()}catch(b){Et(a,a.return,b)}else{var d=Ha(a.type,s.memoizedProps);s=s.memoizedState;try{t.componentDidUpdate(d,s,t.__reactInternalSnapshotBeforeUpdate)}catch(b){Et(a,a.return,b)}}l&64&&n0(a),l&512&&ql(a,a.return);break;case 3:if(Wr(t,a),l&64&&(t=a.updateQueue,t!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{Hg(t,s)}catch(b){Et(a,a.return,b)}}break;case 27:s===null&&l&4&&a0(a);case 26:case 5:Wr(t,a),s===null&&l&4&&s0(a),l&512&&ql(a,a.return);break;case 12:Wr(t,a);break;case 13:Wr(t,a),l&4&&d0(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=px.bind(null,a),jx(t,a))));break;case 22:if(l=a.memoizedState!==null||ur,!l){s=s!==null&&s.memoizedState!==null||Gt,d=ur;var m=Gt;ur=l,(Gt=s)&&!m?Zr(t,a,(a.subtreeFlags&8772)!==0):Wr(t,a),ur=d,Gt=m}break;case 30:break;default:Wr(t,a)}}function c0(t){var s=t.alternate;s!==null&&(t.alternate=null,c0(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&ps(s)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var jt=null,ri=!1;function dr(t,s,a){for(a=a.child;a!==null;)u0(t,s,a),a=a.sibling}function u0(t,s,a){if(ot&&typeof ot.onCommitFiberUnmount=="function")try{ot.onCommitFiberUnmount(St,a)}catch{}switch(a.tag){case 26:Gt||Ts(a,s),dr(t,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Gt||Ts(a,s);var l=jt,d=ri;ea(a.type)&&(jt=a.stateNode,ri=!1),dr(t,s,a),Jl(a.stateNode),jt=l,ri=d;break;case 5:Gt||Ts(a,s);case 6:if(l=jt,d=ri,jt=null,dr(t,s,a),jt=l,ri=d,jt!==null)if(ri)try{(jt.nodeType===9?jt.body:jt.nodeName==="HTML"?jt.ownerDocument.body:jt).removeChild(a.stateNode)}catch(m){Et(a,s,m)}else try{jt.removeChild(a.stateNode)}catch(m){Et(a,s,m)}break;case 18:jt!==null&&(ri?(t=jt,$0(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),oc(t)):$0(jt,a.stateNode));break;case 4:l=jt,d=ri,jt=a.stateNode.containerInfo,ri=!0,dr(t,s,a),jt=l,ri=d;break;case 0:case 11:case 14:case 15:Gt||Xr(2,a,s),Gt||Xr(4,a,s),dr(t,s,a);break;case 1:Gt||(Ts(a,s),l=a.stateNode,typeof l.componentWillUnmount=="function"&&i0(a,s,l)),dr(t,s,a);break;case 21:dr(t,s,a);break;case 22:Gt=(l=Gt)||a.memoizedState!==null,dr(t,s,a),Gt=l;break;default:dr(t,s,a)}}function d0(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{oc(t)}catch(a){Et(s,s.return,a)}}function ox(t){switch(t.tag){case 13:case 19:var s=t.stateNode;return s===null&&(s=t.stateNode=new o0),s;case 22:return t=t.stateNode,s=t._retryCache,s===null&&(s=t._retryCache=new o0),s;default:throw Error(r(435,t.tag))}}function Tf(t,s){var a=ox(t);s.forEach(function(l){var d=gx.bind(null,t,l);a.has(l)||(a.add(l),l.then(d,d))})}function pi(t,s){var a=s.deletions;if(a!==null)for(var l=0;l<a.length;l++){var d=a[l],m=t,b=s,S=b;e:for(;S!==null;){switch(S.tag){case 27:if(ea(S.type)){jt=S.stateNode,ri=!1;break e}break;case 5:jt=S.stateNode,ri=!1;break e;case 3:case 4:jt=S.stateNode.containerInfo,ri=!0;break e}S=S.return}if(jt===null)throw Error(r(160));u0(m,b,d),jt=null,ri=!1,m=d.alternate,m!==null&&(m.return=null),d.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)h0(s,t),s=s.sibling}var ss=null;function h0(t,s){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:pi(s,t),gi(t),l&4&&(Xr(3,t,t.return),Hl(3,t),Xr(5,t,t.return));break;case 1:pi(s,t),gi(t),l&512&&(Gt||a===null||Ts(a,a.return)),l&64&&ur&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var d=ss;if(pi(s,t),gi(t),l&512&&(Gt||a===null||Ts(a,a.return)),l&4){var m=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,d=d.ownerDocument||d;t:switch(l){case"title":m=d.getElementsByTagName("title")[0],(!m||m[Si]||m[Bt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=d.createElement(l),d.head.insertBefore(m,d.querySelector("head > title"))),An(m,l,a),m[Bt]=t,Nt(m),l=m;break e;case"link":var b=av("link","href",d).get(l+(a.href||""));if(b){for(var S=0;S<b.length;S++)if(m=b[S],m.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){b.splice(S,1);break t}}m=d.createElement(l),An(m,l,a),d.head.appendChild(m);break;case"meta":if(b=av("meta","content",d).get(l+(a.content||""))){for(S=0;S<b.length;S++)if(m=b[S],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){b.splice(S,1);break t}}m=d.createElement(l),An(m,l,a),d.head.appendChild(m);break;default:throw Error(r(468,l))}m[Bt]=t,Nt(m),l=m}t.stateNode=l}else ov(d,t.type,t.stateNode);else t.stateNode=rv(d,l,t.memoizedProps);else m!==l?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,l===null?ov(d,t.type,t.stateNode):rv(d,l,t.memoizedProps)):l===null&&t.stateNode!==null&&xf(t,t.memoizedProps,a.memoizedProps)}break;case 27:pi(s,t),gi(t),l&512&&(Gt||a===null||Ts(a,a.return)),a!==null&&l&4&&xf(t,t.memoizedProps,a.memoizedProps);break;case 5:if(pi(s,t),gi(t),l&512&&(Gt||a===null||Ts(a,a.return)),t.flags&32){d=t.stateNode;try{ti(d,"")}catch(te){Et(t,t.return,te)}}l&4&&t.stateNode!=null&&(d=t.memoizedProps,xf(t,d,a!==null?a.memoizedProps:d)),l&1024&&(Af=!0);break;case 6:if(pi(s,t),gi(t),l&4){if(t.stateNode===null)throw Error(r(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(te){Et(t,t.return,te)}}break;case 3:if(Ju=null,d=ss,ss=Qu(s.containerInfo),pi(s,t),ss=d,gi(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{oc(s.containerInfo)}catch(te){Et(t,t.return,te)}Af&&(Af=!1,f0(t));break;case 4:l=ss,ss=Qu(t.stateNode.containerInfo),pi(s,t),gi(t),ss=l;break;case 12:pi(s,t),gi(t);break;case 13:pi(s,t),gi(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Df=Se()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Tf(t,l)));break;case 22:d=t.memoizedState!==null;var M=a!==null&&a.memoizedState!==null,K=ur,oe=Gt;if(ur=K||d,Gt=oe||M,pi(s,t),Gt=oe,ur=K,gi(t),l&8192)e:for(s=t.stateNode,s._visibility=d?s._visibility&-2:s._visibility|1,d&&(a===null||M||ur||Gt||qa(t)),a=null,s=t;;){if(s.tag===5||s.tag===26){if(a===null){M=a=s;try{if(m=M.stateNode,d)b=m.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{S=M.stateNode;var ue=M.memoizedProps.style,J=ue!=null&&ue.hasOwnProperty("display")?ue.display:null;S.style.display=J==null||typeof J=="boolean"?"":(""+J).trim()}}catch(te){Et(M,M.return,te)}}}else if(s.tag===6){if(a===null){M=s;try{M.stateNode.nodeValue=d?"":M.memoizedProps}catch(te){Et(M,M.return,te)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===t)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Tf(t,a))));break;case 19:pi(s,t),gi(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Tf(t,l)));break;case 30:break;case 21:break;default:pi(s,t),gi(t)}}function gi(t){var s=t.flags;if(s&2){try{for(var a,l=t.return;l!==null;){if(r0(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var d=a.stateNode,m=Ef(t);Pu(t,m,d);break;case 5:var b=a.stateNode;a.flags&32&&(ti(b,""),a.flags&=-33);var S=Ef(t);Pu(t,S,b);break;case 3:case 4:var M=a.stateNode.containerInfo,K=Ef(t);Sf(t,K,M);break;default:throw Error(r(161))}}catch(oe){Et(t,t.return,oe)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function f0(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var s=t;f0(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),t=t.sibling}}function Wr(t,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)l0(t,s.alternate,s),s=s.sibling}function qa(t){for(t=t.child;t!==null;){var s=t;switch(s.tag){case 0:case 11:case 14:case 15:Xr(4,s,s.return),qa(s);break;case 1:Ts(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&i0(s,s.return,a),qa(s);break;case 27:Jl(s.stateNode);case 26:case 5:Ts(s,s.return),qa(s);break;case 22:s.memoizedState===null&&qa(s);break;case 30:qa(s);break;default:qa(s)}t=t.sibling}}function Zr(t,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var l=s.alternate,d=t,m=s,b=m.flags;switch(m.tag){case 0:case 11:case 15:Zr(d,m,a),Hl(4,m);break;case 1:if(Zr(d,m,a),l=m,d=l.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(K){Et(l,l.return,K)}if(l=m,d=l.updateQueue,d!==null){var S=l.stateNode;try{var M=d.shared.hiddenCallbacks;if(M!==null)for(d.shared.hiddenCallbacks=null,d=0;d<M.length;d++)Fg(M[d],S)}catch(K){Et(l,l.return,K)}}a&&b&64&&n0(m),ql(m,m.return);break;case 27:a0(m);case 26:case 5:Zr(d,m,a),a&&l===null&&b&4&&s0(m),ql(m,m.return);break;case 12:Zr(d,m,a);break;case 13:Zr(d,m,a),a&&b&4&&d0(d,m);break;case 22:m.memoizedState===null&&Zr(d,m,a),ql(m,m.return);break;case 30:break;default:Zr(d,m,a)}s=s.sibling}}function Rf(t,s){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(t=s.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&Il(a))}function Cf(t,s){t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&Il(t))}function Rs(t,s,a,l){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)m0(t,s,a,l),s=s.sibling}function m0(t,s,a,l){var d=s.flags;switch(s.tag){case 0:case 11:case 15:Rs(t,s,a,l),d&2048&&Hl(9,s);break;case 1:Rs(t,s,a,l);break;case 3:Rs(t,s,a,l),d&2048&&(t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&Il(t)));break;case 12:if(d&2048){Rs(t,s,a,l),t=s.stateNode;try{var m=s.memoizedProps,b=m.id,S=m.onPostCommit;typeof S=="function"&&S(b,s.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(M){Et(s,s.return,M)}}else Rs(t,s,a,l);break;case 13:Rs(t,s,a,l);break;case 23:break;case 22:m=s.stateNode,b=s.alternate,s.memoizedState!==null?m._visibility&2?Rs(t,s,a,l):Gl(t,s):m._visibility&2?Rs(t,s,a,l):(m._visibility|=2,Uo(t,s,a,l,(s.subtreeFlags&10256)!==0)),d&2048&&Rf(b,s);break;case 24:Rs(t,s,a,l),d&2048&&Cf(s.alternate,s);break;default:Rs(t,s,a,l)}}function Uo(t,s,a,l,d){for(d=d&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var m=t,b=s,S=a,M=l,K=b.flags;switch(b.tag){case 0:case 11:case 15:Uo(m,b,S,M,d),Hl(8,b);break;case 23:break;case 22:var oe=b.stateNode;b.memoizedState!==null?oe._visibility&2?Uo(m,b,S,M,d):Gl(m,b):(oe._visibility|=2,Uo(m,b,S,M,d)),d&&K&2048&&Rf(b.alternate,b);break;case 24:Uo(m,b,S,M,d),d&&K&2048&&Cf(b.alternate,b);break;default:Uo(m,b,S,M,d)}s=s.sibling}}function Gl(t,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=t,l=s,d=l.flags;switch(l.tag){case 22:Gl(a,l),d&2048&&Rf(l.alternate,l);break;case 24:Gl(a,l),d&2048&&Cf(l.alternate,l);break;default:Gl(a,l)}s=s.sibling}}var Xl=8192;function Bo(t){if(t.subtreeFlags&Xl)for(t=t.child;t!==null;)p0(t),t=t.sibling}function p0(t){switch(t.tag){case 26:Bo(t),t.flags&Xl&&t.memoizedState!==null&&Xx(ss,t.memoizedState,t.memoizedProps);break;case 5:Bo(t);break;case 3:case 4:var s=ss;ss=Qu(t.stateNode.containerInfo),Bo(t),ss=s;break;case 22:t.memoizedState===null&&(s=t.alternate,s!==null&&s.memoizedState!==null?(s=Xl,Xl=16777216,Bo(t),Xl=s):Bo(t));break;default:Bo(t)}}function g0(t){var s=t.alternate;if(s!==null&&(t=s.child,t!==null)){s.child=null;do s=t.sibling,t.sibling=null,t=s;while(t!==null)}}function Wl(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];gn=l,v0(l,t)}g0(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)y0(t),t=t.sibling}function y0(t){switch(t.tag){case 0:case 11:case 15:Wl(t),t.flags&2048&&Xr(9,t,t.return);break;case 3:Wl(t);break;case 12:Wl(t);break;case 22:var s=t.stateNode;t.memoizedState!==null&&s._visibility&2&&(t.return===null||t.return.tag!==13)?(s._visibility&=-3,Uu(t)):Wl(t);break;default:Wl(t)}}function Uu(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];gn=l,v0(l,t)}g0(t)}for(t=t.child;t!==null;){switch(s=t,s.tag){case 0:case 11:case 15:Xr(8,s,s.return),Uu(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,Uu(s));break;default:Uu(s)}t=t.sibling}}function v0(t,s){for(;gn!==null;){var a=gn;switch(a.tag){case 0:case 11:case 15:Xr(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Il(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,gn=l;else e:for(a=t;gn!==null;){l=gn;var d=l.sibling,m=l.return;if(c0(l),l===a){gn=null;break e}if(d!==null){d.return=m,gn=d;break e}gn=m}}}var lx={getCacheForType:function(t){var s=Nn(rn),a=s.data.get(t);return a===void 0&&(a=t(),s.data.set(t,a)),a}},cx=typeof WeakMap=="function"?WeakMap:Map,vt=0,Tt=null,Qe=null,rt=0,_t=0,yi=null,Kr=!1,zo=!1,If=!1,hr=0,Ft=0,Yr=0,Ga=0,kf=0,Pi=0,Fo=0,Zl=null,ai=null,Nf=!1,Df=0,Bu=1/0,zu=null,Qr=null,Sn=0,$r=null,Ho=null,qo=0,jf=0,Of=null,_0=null,Kl=0,Mf=null;function vi(){if((vt&2)!==0&&rt!==0)return rt&-rt;if(se.T!==null){var t=No;return t!==0?t:Ff()}return Ki()}function b0(){Pi===0&&(Pi=(rt&536870912)===0||ft?fs():536870912);var t=Vi.current;return t!==null&&(t.flags|=32),Pi}function _i(t,s,a){(t===Tt&&(_t===2||_t===9)||t.cancelPendingCommit!==null)&&(Go(t,0),Jr(t,rt,Pi,!1)),Wi(t,a),((vt&2)===0||t!==Tt)&&(t===Tt&&((vt&2)===0&&(Ga|=a),Ft===4&&Jr(t,rt,Pi,!1)),Cs(t))}function w0(t,s,a){if((vt&6)!==0)throw Error(r(327));var l=!a&&(s&124)===0&&(s&t.expiredLanes)===0||Gs(t,s),d=l?hx(t,s):Pf(t,s,!0),m=l;do{if(d===0){zo&&!l&&Jr(t,s,0,!1);break}else{if(a=t.current.alternate,m&&!ux(a)){d=Pf(t,s,!1),m=!1;continue}if(d===2){if(m=s,t.errorRecoveryDisabledLanes&m)var b=0;else b=t.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){s=b;e:{var S=t;d=Zl;var M=S.current.memoizedState.isDehydrated;if(M&&(Go(S,b).flags|=256),b=Pf(S,b,!1),b!==2){if(If&&!M){S.errorRecoveryDisabledLanes|=m,Ga|=m,d=4;break e}m=ai,ai=d,m!==null&&(ai===null?ai=m:ai.push.apply(ai,m))}d=b}if(m=!1,d!==2)continue}}if(d===1){Go(t,0),Jr(t,s,0,!0);break}e:{switch(l=t,m=d,m){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:Jr(l,s,Pi,!Kr);break e;case 2:ai=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(d=Df+300-Se(),10<d)){if(Jr(l,s,Pi,!Kr),Me(l,0,!0)!==0)break e;l.timeoutHandle=Y0(x0.bind(null,l,a,ai,zu,Nf,s,Pi,Ga,Fo,Kr,m,2,-0,0),d);break e}x0(l,a,ai,zu,Nf,s,Pi,Ga,Fo,Kr,m,0,-0,0)}}break}while(!0);Cs(t)}function x0(t,s,a,l,d,m,b,S,M,K,oe,ue,J,te){if(t.timeoutHandle=-1,ue=s.subtreeFlags,(ue&8192||(ue&16785408)===16785408)&&(nc={stylesheets:null,count:0,unsuspend:Gx},p0(s),ue=Wx(),ue!==null)){t.cancelPendingCommit=ue(I0.bind(null,t,s,m,a,l,d,b,S,M,oe,1,J,te)),Jr(t,m,b,!K);return}I0(t,s,m,a,l,d,b,S,M)}function ux(t){for(var s=t;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var d=a[l],m=d.getSnapshot;d=d.value;try{if(!fi(m(),d))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Jr(t,s,a,l){s&=~kf,s&=~Ga,t.suspendedLanes|=s,t.pingedLanes&=~s,l&&(t.warmLanes|=s),l=t.expirationTimes;for(var d=s;0<d;){var m=31-Wt(d),b=1<<m;l[m]=-1,d&=~b}a!==0&&xi(t,a,s)}function Fu(){return(vt&6)===0?(Yl(0),!1):!0}function Lf(){if(Qe!==null){if(_t===0)var t=Qe.return;else t=Qe,sr=Ua=null,$h(t),Vo=null,Bl=0,t=Qe;for(;t!==null;)t0(t.alternate,t),t=t.return;Qe=null}}function Go(t,s){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,Cx(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Lf(),Tt=t,Qe=a=tr(t.current,null),rt=s,_t=0,yi=null,Kr=!1,zo=Gs(t,s),If=!1,Fo=Pi=kf=Ga=Yr=Ft=0,ai=Zl=null,Nf=!1,(s&8)!==0&&(s|=s&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=s;0<l;){var d=31-Wt(l),m=1<<d;s|=t[d],l&=~m}return hr=s,uu(),a}function E0(t,s){Ze=null,se.H=Iu,s===Nl||s===_u?(s=Bg(),_t=3):s===Vg?(s=Bg(),_t=4):_t=s===zy?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,yi=s,Qe===null&&(Ft=1,Ou(t,ji(s,t.current)))}function S0(){var t=se.H;return se.H=Iu,t===null?Iu:t}function A0(){var t=se.A;return se.A=lx,t}function Vf(){Ft=4,Kr||(rt&4194048)!==rt&&Vi.current!==null||(zo=!0),(Yr&134217727)===0&&(Ga&134217727)===0||Tt===null||Jr(Tt,rt,Pi,!1)}function Pf(t,s,a){var l=vt;vt|=2;var d=S0(),m=A0();(Tt!==t||rt!==s)&&(zu=null,Go(t,s)),s=!1;var b=Ft;e:do try{if(_t!==0&&Qe!==null){var S=Qe,M=yi;switch(_t){case 8:Lf(),b=6;break e;case 3:case 2:case 9:case 6:Vi.current===null&&(s=!0);var K=_t;if(_t=0,yi=null,Xo(t,S,M,K),a&&zo){b=0;break e}break;default:K=_t,_t=0,yi=null,Xo(t,S,M,K)}}dx(),b=Ft;break}catch(oe){E0(t,oe)}while(!0);return s&&t.shellSuspendCounter++,sr=Ua=null,vt=l,se.H=d,se.A=m,Qe===null&&(Tt=null,rt=0,uu()),b}function dx(){for(;Qe!==null;)T0(Qe)}function hx(t,s){var a=vt;vt|=2;var l=S0(),d=A0();Tt!==t||rt!==s?(zu=null,Bu=Se()+500,Go(t,s)):zo=Gs(t,s);e:do try{if(_t!==0&&Qe!==null){s=Qe;var m=yi;t:switch(_t){case 1:_t=0,yi=null,Xo(t,s,m,1);break;case 2:case 9:if(Pg(m)){_t=0,yi=null,R0(s);break}s=function(){_t!==2&&_t!==9||Tt!==t||(_t=7),Cs(t)},m.then(s,s);break e;case 3:_t=7;break e;case 4:_t=5;break e;case 7:Pg(m)?(_t=0,yi=null,R0(s)):(_t=0,yi=null,Xo(t,s,m,7));break;case 5:var b=null;switch(Qe.tag){case 26:b=Qe.memoizedState;case 5:case 27:var S=Qe;if(!b||lv(b)){_t=0,yi=null;var M=S.sibling;if(M!==null)Qe=M;else{var K=S.return;K!==null?(Qe=K,Hu(K)):Qe=null}break t}}_t=0,yi=null,Xo(t,s,m,5);break;case 6:_t=0,yi=null,Xo(t,s,m,6);break;case 8:Lf(),Ft=6;break e;default:throw Error(r(462))}}fx();break}catch(oe){E0(t,oe)}while(!0);return sr=Ua=null,se.H=l,se.A=d,vt=a,Qe!==null?0:(Tt=null,rt=0,uu(),Ft)}function fx(){for(;Qe!==null&&!De();)T0(Qe)}function T0(t){var s=Jy(t.alternate,t,hr);t.memoizedProps=t.pendingProps,s===null?Hu(t):Qe=s}function R0(t){var s=t,a=s.alternate;switch(s.tag){case 15:case 0:s=Wy(a,s,s.pendingProps,s.type,void 0,rt);break;case 11:s=Wy(a,s,s.pendingProps,s.type.render,s.ref,rt);break;case 5:$h(s);default:t0(a,s),s=Qe=Cg(s,hr),s=Jy(a,s,hr)}t.memoizedProps=t.pendingProps,s===null?Hu(t):Qe=s}function Xo(t,s,a,l){sr=Ua=null,$h(s),Vo=null,Bl=0;var d=s.return;try{if(nx(t,d,s,a,rt)){Ft=1,Ou(t,ji(a,t.current)),Qe=null;return}}catch(m){if(d!==null)throw Qe=d,m;Ft=1,Ou(t,ji(a,t.current)),Qe=null;return}s.flags&32768?(ft||l===1?t=!0:zo||(rt&536870912)!==0?t=!1:(Kr=t=!0,(l===2||l===9||l===3||l===6)&&(l=Vi.current,l!==null&&l.tag===13&&(l.flags|=16384))),C0(s,t)):Hu(s)}function Hu(t){var s=t;do{if((s.flags&32768)!==0){C0(s,Kr);return}t=s.return;var a=sx(s.alternate,s,hr);if(a!==null){Qe=a;return}if(s=s.sibling,s!==null){Qe=s;return}Qe=s=t}while(s!==null);Ft===0&&(Ft=5)}function C0(t,s){do{var a=rx(t.alternate,t);if(a!==null){a.flags&=32767,Qe=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(t=t.sibling,t!==null)){Qe=t;return}Qe=t=a}while(t!==null);Ft=6,Qe=null}function I0(t,s,a,l,d,m,b,S,M){t.cancelPendingCommit=null;do qu();while(Sn!==0);if((vt&6)!==0)throw Error(r(327));if(s!==null){if(s===t.current)throw Error(r(177));if(m=s.lanes|s.childLanes,m|=Rh,Xs(t,a,m,b,S,M),t===Tt&&(Qe=Tt=null,rt=0),Ho=s,$r=t,qo=a,jf=m,Of=d,_0=l,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,yx(Hs,function(){return O0(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||l){l=se.T,se.T=null,d=he.p,he.p=2,b=vt,vt|=4;try{ax(t,s,a)}finally{vt=b,he.p=d,se.T=l}}Sn=1,k0(),N0(),D0()}}function k0(){if(Sn===1){Sn=0;var t=$r,s=Ho,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=se.T,se.T=null;var l=he.p;he.p=2;var d=vt;vt|=4;try{h0(s,t);var m=Yf,b=vg(t.containerInfo),S=m.focusedElem,M=m.selectionRange;if(b!==S&&S&&S.ownerDocument&&yg(S.ownerDocument.documentElement,S)){if(M!==null&&xh(S)){var K=M.start,oe=M.end;if(oe===void 0&&(oe=K),"selectionStart"in S)S.selectionStart=K,S.selectionEnd=Math.min(oe,S.value.length);else{var ue=S.ownerDocument||document,J=ue&&ue.defaultView||window;if(J.getSelection){var te=J.getSelection(),Be=S.textContent.length,je=Math.min(M.start,Be),xt=M.end===void 0?je:Math.min(M.end,Be);!te.extend&&je>xt&&(b=xt,xt=je,je=b);var G=gg(S,je),F=gg(S,xt);if(G&&F&&(te.rangeCount!==1||te.anchorNode!==G.node||te.anchorOffset!==G.offset||te.focusNode!==F.node||te.focusOffset!==F.offset)){var Z=ue.createRange();Z.setStart(G.node,G.offset),te.removeAllRanges(),je>xt?(te.addRange(Z),te.extend(F.node,F.offset)):(Z.setEnd(F.node,F.offset),te.addRange(Z))}}}}for(ue=[],te=S;te=te.parentNode;)te.nodeType===1&&ue.push({element:te,left:te.scrollLeft,top:te.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<ue.length;S++){var le=ue[S];le.element.scrollLeft=le.left,le.element.scrollTop=le.top}}nd=!!Kf,Yf=Kf=null}finally{vt=d,he.p=l,se.T=a}}t.current=s,Sn=2}}function N0(){if(Sn===2){Sn=0;var t=$r,s=Ho,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=se.T,se.T=null;var l=he.p;he.p=2;var d=vt;vt|=4;try{l0(t,s.alternate,s)}finally{vt=d,he.p=l,se.T=a}}Sn=3}}function D0(){if(Sn===4||Sn===3){Sn=0,Xe();var t=$r,s=Ho,a=qo,l=_0;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Sn=5:(Sn=0,Ho=$r=null,j0(t,t.pendingLanes));var d=t.pendingLanes;if(d===0&&(Qr=null),Rr(a),s=s.stateNode,ot&&typeof ot.onCommitFiberRoot=="function")try{ot.onCommitFiberRoot(St,s,void 0,(s.current.flags&128)===128)}catch{}if(l!==null){s=se.T,d=he.p,he.p=2,se.T=null;try{for(var m=t.onRecoverableError,b=0;b<l.length;b++){var S=l[b];m(S.value,{componentStack:S.stack})}}finally{se.T=s,he.p=d}}(qo&3)!==0&&qu(),Cs(t),d=t.pendingLanes,(a&4194090)!==0&&(d&42)!==0?t===Mf?Kl++:(Kl=0,Mf=t):Kl=0,Yl(0)}}function j0(t,s){(t.pooledCacheLanes&=s)===0&&(s=t.pooledCache,s!=null&&(t.pooledCache=null,Il(s)))}function qu(t){return k0(),N0(),D0(),O0()}function O0(){if(Sn!==5)return!1;var t=$r,s=jf;jf=0;var a=Rr(qo),l=se.T,d=he.p;try{he.p=32>a?32:a,se.T=null,a=Of,Of=null;var m=$r,b=qo;if(Sn=0,Ho=$r=null,qo=0,(vt&6)!==0)throw Error(r(331));var S=vt;if(vt|=4,y0(m.current),m0(m,m.current,b,a),vt=S,Yl(0,!1),ot&&typeof ot.onPostCommitFiberRoot=="function")try{ot.onPostCommitFiberRoot(St,m)}catch{}return!0}finally{he.p=d,se.T=l,j0(t,s)}}function M0(t,s,a){s=ji(a,s),s=ff(t.stateNode,s,2),t=Fr(t,s,2),t!==null&&(Wi(t,2),Cs(t))}function Et(t,s,a){if(t.tag===3)M0(t,t,a);else for(;s!==null;){if(s.tag===3){M0(s,t,a);break}else if(s.tag===1){var l=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Qr===null||!Qr.has(l))){t=ji(a,t),a=Uy(2),l=Fr(s,a,2),l!==null&&(By(a,l,s,t),Wi(l,2),Cs(l));break}}s=s.return}}function Uf(t,s,a){var l=t.pingCache;if(l===null){l=t.pingCache=new cx;var d=new Set;l.set(s,d)}else d=l.get(s),d===void 0&&(d=new Set,l.set(s,d));d.has(a)||(If=!0,d.add(a),t=mx.bind(null,t,s,a),s.then(t,t))}function mx(t,s,a){var l=t.pingCache;l!==null&&l.delete(s),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,Tt===t&&(rt&a)===a&&(Ft===4||Ft===3&&(rt&62914560)===rt&&300>Se()-Df?(vt&2)===0&&Go(t,0):kf|=a,Fo===rt&&(Fo=0)),Cs(t)}function L0(t,s){s===0&&(s=mo()),t=Ro(t,s),t!==null&&(Wi(t,s),Cs(t))}function px(t){var s=t.memoizedState,a=0;s!==null&&(a=s.retryLane),L0(t,a)}function gx(t,s){var a=0;switch(t.tag){case 13:var l=t.stateNode,d=t.memoizedState;d!==null&&(a=d.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(s),L0(t,a)}function yx(t,s){return ce(t,s)}var Gu=null,Wo=null,Bf=!1,Xu=!1,zf=!1,Xa=0;function Cs(t){t!==Wo&&t.next===null&&(Wo===null?Gu=Wo=t:Wo=Wo.next=t),Xu=!0,Bf||(Bf=!0,_x())}function Yl(t,s){if(!zf&&Xu){zf=!0;do for(var a=!1,l=Gu;l!==null;){if(t!==0){var d=l.pendingLanes;if(d===0)var m=0;else{var b=l.suspendedLanes,S=l.pingedLanes;m=(1<<31-Wt(42|t)+1)-1,m&=d&~(b&~S),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(a=!0,B0(l,m))}else m=rt,m=Me(l,l===Tt?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(m&3)===0||Gs(l,m)||(a=!0,B0(l,m));l=l.next}while(a);zf=!1}}function vx(){V0()}function V0(){Xu=Bf=!1;var t=0;Xa!==0&&(Rx()&&(t=Xa),Xa=0);for(var s=Se(),a=null,l=Gu;l!==null;){var d=l.next,m=P0(l,s);m===0?(l.next=null,a===null?Gu=d:a.next=d,d===null&&(Wo=a)):(a=l,(t!==0||(m&3)!==0)&&(Xu=!0)),l=d}Yl(t)}function P0(t,s){for(var a=t.suspendedLanes,l=t.pingedLanes,d=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var b=31-Wt(m),S=1<<b,M=d[b];M===-1?((S&a)===0||(S&l)!==0)&&(d[b]=We(S,s)):M<=s&&(t.expiredLanes|=S),m&=~S}if(s=Tt,a=rt,a=Me(t,t===s?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===s&&(_t===2||_t===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&we(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||Gs(t,a)){if(s=a&-a,s===t.callbackPriority)return s;switch(l!==null&&we(l),Rr(a)){case 2:case 8:a=Zn;break;case 32:a=Hs;break;case 268435456:a=Ar;break;default:a=Hs}return l=U0.bind(null,t),a=ce(a,l),t.callbackPriority=s,t.callbackNode=a,s}return l!==null&&l!==null&&we(l),t.callbackPriority=2,t.callbackNode=null,2}function U0(t,s){if(Sn!==0&&Sn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(qu()&&t.callbackNode!==a)return null;var l=rt;return l=Me(t,t===Tt?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(w0(t,l,s),P0(t,Se()),t.callbackNode!=null&&t.callbackNode===a?U0.bind(null,t):null)}function B0(t,s){if(qu())return null;w0(t,s,!0)}function _x(){Ix(function(){(vt&6)!==0?ce(ht,vx):V0()})}function Ff(){return Xa===0&&(Xa=fs()),Xa}function z0(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:$s(""+t)}function F0(t,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,t.id&&a.setAttribute("form",t.id),s.parentNode.insertBefore(a,s),t=new FormData(t),a.parentNode.removeChild(a),t}function bx(t,s,a,l,d){if(s==="submit"&&a&&a.stateNode===d){var m=z0((d[kt]||null).action),b=l.submitter;b&&(s=(s=b[kt]||null)?z0(s.formAction):b.getAttribute("formAction"),s!==null&&(m=s,b=null));var S=new ye("action","action",null,l,d);t.push({event:S,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Xa!==0){var M=b?F0(d,b):new FormData(d);lf(a,{pending:!0,data:M,method:d.method,action:m},null,M)}}else typeof m=="function"&&(S.preventDefault(),M=b?F0(d,b):new FormData(d),lf(a,{pending:!0,data:M,method:d.method,action:m},m,M))},currentTarget:d}]})}}for(var Hf=0;Hf<Th.length;Hf++){var qf=Th[Hf],wx=qf.toLowerCase(),xx=qf[0].toUpperCase()+qf.slice(1);is(wx,"on"+xx)}is(wg,"onAnimationEnd"),is(xg,"onAnimationIteration"),is(Eg,"onAnimationStart"),is("dblclick","onDoubleClick"),is("focusin","onFocus"),is("focusout","onBlur"),is(U2,"onTransitionRun"),is(B2,"onTransitionStart"),is(z2,"onTransitionCancel"),is(Sg,"onTransitionEnd"),Qi("onMouseEnter",["mouseout","mouseover"]),Qi("onMouseLeave",["mouseout","mouseover"]),Qi("onPointerEnter",["pointerout","pointerover"]),Qi("onPointerLeave",["pointerout","pointerover"]),ui("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ui("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ui("onBeforeInput",["compositionend","keypress","textInput","paste"]),ui("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ui("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ui("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ql="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ex=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ql));function H0(t,s){s=(s&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],d=l.event;l=l.listeners;e:{var m=void 0;if(s)for(var b=l.length-1;0<=b;b--){var S=l[b],M=S.instance,K=S.currentTarget;if(S=S.listener,M!==m&&d.isPropagationStopped())break e;m=S,d.currentTarget=K;try{m(d)}catch(oe){ju(oe)}d.currentTarget=null,m=M}else for(b=0;b<l.length;b++){if(S=l[b],M=S.instance,K=S.currentTarget,S=S.listener,M!==m&&d.isPropagationStopped())break e;m=S,d.currentTarget=K;try{m(d)}catch(oe){ju(oe)}d.currentTarget=null,m=M}}}}function $e(t,s){var a=s[Cr];a===void 0&&(a=s[Cr]=new Set);var l=t+"__bubble";a.has(l)||(q0(s,t,2,!1),a.add(l))}function Gf(t,s,a){var l=0;s&&(l|=4),q0(a,t,l,s)}var Wu="_reactListening"+Math.random().toString(36).slice(2);function Xf(t){if(!t[Wu]){t[Wu]=!0,Ir.forEach(function(a){a!=="selectionchange"&&(Ex.has(a)||Gf(a,!1,t),Gf(a,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[Wu]||(s[Wu]=!0,Gf("selectionchange",!1,s))}}function q0(t,s,a,l){switch(mv(s)){case 2:var d=Yx;break;case 8:d=Qx;break;default:d=am}a=d.bind(null,s,a,t),d=void 0,!di||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(d=!0),l?d!==void 0?t.addEventListener(s,a,{capture:!0,passive:d}):t.addEventListener(s,a,!0):d!==void 0?t.addEventListener(s,a,{passive:d}):t.addEventListener(s,a,!1)}function Wf(t,s,a,l,d){var m=l;if((s&1)===0&&(s&2)===0&&l!==null)e:for(;;){if(l===null)return;var b=l.tag;if(b===3||b===4){var S=l.stateNode.containerInfo;if(S===d)break;if(b===4)for(b=l.return;b!==null;){var M=b.tag;if((M===3||M===4)&&b.stateNode.containerInfo===d)return;b=b.return}for(;S!==null;){if(b=Yi(S),b===null)return;if(M=b.tag,M===5||M===6||M===26||M===27){l=m=b;continue e}S=S.parentNode}}l=l.return}bo(function(){var K=m,oe=wn(a),ue=[];e:{var J=Ag.get(t);if(J!==void 0){var te=ye,Be=t;switch(t){case"keypress":if(x(a)===0)break e;case"keydown":case"keyup":te=xo;break;case"focusin":Be="focus",te=Fn;break;case"focusout":Be="blur",te=Fn;break;case"beforeblur":case"afterblur":te=Fn;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":te=lt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":te=kn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":te=iu;break;case wg:case xg:case Eg:te=Ht;break;case Sg:te=ru;break;case"scroll":case"scrollend":te=Re;break;case"wheel":te=Eo;break;case"copy":case"cut":case"paste":te=Di;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":te=wl;break;case"toggle":case"beforetoggle":te=ou}var je=(s&4)!==0,xt=!je&&(t==="scroll"||t==="scrollend"),G=je?J!==null?J+"Capture":null:J;je=[];for(var F=K,Z;F!==null;){var le=F;if(Z=le.stateNode,le=le.tag,le!==5&&le!==26&&le!==27||Z===null||G===null||(le=Mr(F,G),le!=null&&je.push($l(F,le,Z))),xt)break;F=F.return}0<je.length&&(J=new te(J,Be,null,a,oe),ue.push({event:J,listeners:je}))}}if((s&7)===0){e:{if(J=t==="mouseover"||t==="pointerover",te=t==="mouseout"||t==="pointerout",J&&a!==Ji&&(Be=a.relatedTarget||a.fromElement)&&(Yi(Be)||Be[Qn]))break e;if((te||J)&&(J=oe.window===oe?oe:(J=oe.ownerDocument)?J.defaultView||J.parentWindow:window,te?(Be=a.relatedTarget||a.toElement,te=K,Be=Be?Yi(Be):null,Be!==null&&(xt=c(Be),je=Be.tag,Be!==xt||je!==5&&je!==27&&je!==6)&&(Be=null)):(te=null,Be=K),te!==Be)){if(je=lt,le="onMouseLeave",G="onMouseEnter",F="mouse",(t==="pointerout"||t==="pointerover")&&(je=wl,le="onPointerLeave",G="onPointerEnter",F="pointer"),xt=te==null?J:Ai(te),Z=Be==null?J:Ai(Be),J=new je(le,F+"leave",te,a,oe),J.target=xt,J.relatedTarget=Z,le=null,Yi(oe)===K&&(je=new je(G,F+"enter",Be,a,oe),je.target=Z,je.relatedTarget=xt,le=je),xt=le,te&&Be)t:{for(je=te,G=Be,F=0,Z=je;Z;Z=Zo(Z))F++;for(Z=0,le=G;le;le=Zo(le))Z++;for(;0<F-Z;)je=Zo(je),F--;for(;0<Z-F;)G=Zo(G),Z--;for(;F--;){if(je===G||G!==null&&je===G.alternate)break t;je=Zo(je),G=Zo(G)}je=null}else je=null;te!==null&&G0(ue,J,te,je,!1),Be!==null&&xt!==null&&G0(ue,xt,Be,je,!0)}}e:{if(J=K?Ai(K):window,te=J.nodeName&&J.nodeName.toLowerCase(),te==="select"||te==="input"&&J.type==="file")var Ae=ug;else if(sn(J))if(dg)Ae=L2;else{Ae=O2;var Ye=j2}else te=J.nodeName,!te||te.toLowerCase()!=="input"||J.type!=="checkbox"&&J.type!=="radio"?K&&_s(K.elementType)&&(Ae=ug):Ae=M2;if(Ae&&(Ae=Ae(t,K))){er(ue,Ae,a,oe);break e}Ye&&Ye(t,J,K),t==="focusout"&&K&&J.type==="number"&&K.memoizedProps.value!=null&&vs(J,"number",J.value)}switch(Ye=K?Ai(K):window,t){case"focusin":(sn(Ye)||Ye.contentEditable==="true")&&(So=Ye,Eh=K,Sl=null);break;case"focusout":Sl=Eh=So=null;break;case"mousedown":Sh=!0;break;case"contextmenu":case"mouseup":case"dragend":Sh=!1,_g(ue,a,oe);break;case"selectionchange":if(P2)break;case"keydown":case"keyup":_g(ue,a,oe)}var Ce;if(xs)e:{switch(t){case"compositionstart":var Le="onCompositionStart";break e;case"compositionend":Le="onCompositionEnd";break e;case"compositionupdate":Le="onCompositionUpdate";break e}Le=void 0}else it?ie(t,a)&&(Le="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Le="onCompositionStart");Le&&(_&&a.locale!=="ko"&&(it||Le!=="onCompositionStart"?Le==="onCompositionEnd"&&it&&(Ce=Lr()):(hi=oe,ns="value"in hi?hi.value:hi.textContent,it=!0)),Ye=Zu(K,Le),0<Ye.length&&(Le=new Vr(Le,t,null,a,oe),ue.push({event:Le,listeners:Ye}),Ce?Le.data=Ce:(Ce=_e(a),Ce!==null&&(Le.data=Ce)))),(Ce=v?nn(t,a):st(t,a))&&(Le=Zu(K,"onBeforeInput"),0<Le.length&&(Ye=new Vr("onBeforeInput","beforeinput",null,a,oe),ue.push({event:Ye,listeners:Le}),Ye.data=Ce)),bx(ue,t,K,a,oe)}H0(ue,s)})}function $l(t,s,a){return{instance:t,listener:s,currentTarget:a}}function Zu(t,s){for(var a=s+"Capture",l=[];t!==null;){var d=t,m=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||m===null||(d=Mr(t,a),d!=null&&l.unshift($l(t,d,m)),d=Mr(t,s),d!=null&&l.push($l(t,d,m))),t.tag===3)return l;t=t.return}return[]}function Zo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function G0(t,s,a,l,d){for(var m=s._reactName,b=[];a!==null&&a!==l;){var S=a,M=S.alternate,K=S.stateNode;if(S=S.tag,M!==null&&M===l)break;S!==5&&S!==26&&S!==27||K===null||(M=K,d?(K=Mr(a,m),K!=null&&b.unshift($l(a,K,M))):d||(K=Mr(a,m),K!=null&&b.push($l(a,K,M)))),a=a.return}b.length!==0&&t.push({event:s,listeners:b})}var Sx=/\r\n?/g,Ax=/\u0000|\uFFFD/g;function X0(t){return(typeof t=="string"?t:""+t).replace(Sx,`
`).replace(Ax,"")}function W0(t,s){return s=X0(s),X0(t)===s}function Ku(){}function wt(t,s,a,l,d,m){switch(a){case"children":typeof l=="string"?s==="body"||s==="textarea"&&l===""||ti(t,l):(typeof l=="number"||typeof l=="bigint")&&s!=="body"&&ti(t,""+l);break;case"className":Ti(t,"class",l);break;case"tabIndex":Ti(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Ti(t,a,l);break;case"style":Or(t,l,m);break;case"data":if(s!=="object"){Ti(t,"data",l);break}case"src":case"href":if(l===""&&(s!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=$s(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(s!=="input"&&wt(t,s,"name",d.name,d,null),wt(t,s,"formEncType",d.formEncType,d,null),wt(t,s,"formMethod",d.formMethod,d,null),wt(t,s,"formTarget",d.formTarget,d,null)):(wt(t,s,"encType",d.encType,d,null),wt(t,s,"method",d.method,d,null),wt(t,s,"target",d.target,d,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=$s(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=Ku);break;case"onScroll":l!=null&&$e("scroll",t);break;case"onScrollEnd":l!=null&&$e("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(d.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=$s(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":$e("beforetoggle",t),$e("toggle",t),gs(t,"popover",l);break;case"xlinkActuate":en(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":en(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":en(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":en(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":en(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":en(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":en(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":en(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":en(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":gs(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=_o.get(a)||a,gs(t,a,l))}}function Zf(t,s,a,l,d,m){switch(a){case"style":Or(t,l,m);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(d.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"children":typeof l=="string"?ti(t,l):(typeof l=="number"||typeof l=="bigint")&&ti(t,""+l);break;case"onScroll":l!=null&&$e("scroll",t);break;case"onScrollEnd":l!=null&&$e("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Ku);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!kr.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(d=a.endsWith("Capture"),s=a.slice(2,d?a.length-7:void 0),m=t[kt]||null,m=m!=null?m[a]:null,typeof m=="function"&&t.removeEventListener(s,m,d),typeof l=="function")){typeof m!="function"&&m!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(s,l,d);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):gs(t,a,l)}}}function An(t,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":$e("error",t),$e("load",t);var l=!1,d=!1,m;for(m in a)if(a.hasOwnProperty(m)){var b=a[m];if(b!=null)switch(m){case"src":l=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:wt(t,s,m,b,a,null)}}d&&wt(t,s,"srcSet",a.srcSet,a,null),l&&wt(t,s,"src",a.src,a,null);return;case"input":$e("invalid",t);var S=m=b=d=null,M=null,K=null;for(l in a)if(a.hasOwnProperty(l)){var oe=a[l];if(oe!=null)switch(l){case"name":d=oe;break;case"type":b=oe;break;case"checked":M=oe;break;case"defaultChecked":K=oe;break;case"value":m=oe;break;case"defaultValue":S=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(r(137,s));break;default:wt(t,s,l,oe,a,null)}}Ks(t,m,S,M,K,b,d,!1),Ri(t);return;case"select":$e("invalid",t),l=b=m=null;for(d in a)if(a.hasOwnProperty(d)&&(S=a[d],S!=null))switch(d){case"value":m=S;break;case"defaultValue":b=S;break;case"multiple":l=S;default:wt(t,s,d,S,a,null)}s=m,a=b,t.multiple=!!l,s!=null?ei(t,!!l,s,!1):a!=null&&ei(t,!!l,a,!0);return;case"textarea":$e("invalid",t),m=d=l=null;for(b in a)if(a.hasOwnProperty(b)&&(S=a[b],S!=null))switch(b){case"value":l=S;break;case"defaultValue":d=S;break;case"children":m=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(r(91));break;default:wt(t,s,b,S,a,null)}Ii(t,l,d,m),Ri(t);return;case"option":for(M in a)if(a.hasOwnProperty(M)&&(l=a[M],l!=null))switch(M){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:wt(t,s,M,l,a,null)}return;case"dialog":$e("beforetoggle",t),$e("toggle",t),$e("cancel",t),$e("close",t);break;case"iframe":case"object":$e("load",t);break;case"video":case"audio":for(l=0;l<Ql.length;l++)$e(Ql[l],t);break;case"image":$e("error",t),$e("load",t);break;case"details":$e("toggle",t);break;case"embed":case"source":case"link":$e("error",t),$e("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(K in a)if(a.hasOwnProperty(K)&&(l=a[K],l!=null))switch(K){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:wt(t,s,K,l,a,null)}return;default:if(_s(s)){for(oe in a)a.hasOwnProperty(oe)&&(l=a[oe],l!==void 0&&Zf(t,s,oe,l,a,void 0));return}}for(S in a)a.hasOwnProperty(S)&&(l=a[S],l!=null&&wt(t,s,S,l,a,null))}function Tx(t,s,a,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,m=null,b=null,S=null,M=null,K=null,oe=null;for(te in a){var ue=a[te];if(a.hasOwnProperty(te)&&ue!=null)switch(te){case"checked":break;case"value":break;case"defaultValue":M=ue;default:l.hasOwnProperty(te)||wt(t,s,te,null,l,ue)}}for(var J in l){var te=l[J];if(ue=a[J],l.hasOwnProperty(J)&&(te!=null||ue!=null))switch(J){case"type":m=te;break;case"name":d=te;break;case"checked":K=te;break;case"defaultChecked":oe=te;break;case"value":b=te;break;case"defaultValue":S=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(r(137,s));break;default:te!==ue&&wt(t,s,J,te,l,ue)}}Bn(t,b,S,M,K,oe,m,d);return;case"select":te=b=S=J=null;for(m in a)if(M=a[m],a.hasOwnProperty(m)&&M!=null)switch(m){case"value":break;case"multiple":te=M;default:l.hasOwnProperty(m)||wt(t,s,m,null,l,M)}for(d in l)if(m=l[d],M=a[d],l.hasOwnProperty(d)&&(m!=null||M!=null))switch(d){case"value":J=m;break;case"defaultValue":S=m;break;case"multiple":b=m;default:m!==M&&wt(t,s,d,m,l,M)}s=S,a=b,l=te,J!=null?ei(t,!!a,J,!1):!!l!=!!a&&(s!=null?ei(t,!!a,s,!0):ei(t,!!a,a?[]:"",!1));return;case"textarea":te=J=null;for(S in a)if(d=a[S],a.hasOwnProperty(S)&&d!=null&&!l.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:wt(t,s,S,null,l,d)}for(b in l)if(d=l[b],m=a[b],l.hasOwnProperty(b)&&(d!=null||m!=null))switch(b){case"value":J=d;break;case"defaultValue":te=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(r(91));break;default:d!==m&&wt(t,s,b,d,l,m)}gt(t,J,te);return;case"option":for(var Be in a)if(J=a[Be],a.hasOwnProperty(Be)&&J!=null&&!l.hasOwnProperty(Be))switch(Be){case"selected":t.selected=!1;break;default:wt(t,s,Be,null,l,J)}for(M in l)if(J=l[M],te=a[M],l.hasOwnProperty(M)&&J!==te&&(J!=null||te!=null))switch(M){case"selected":t.selected=J&&typeof J!="function"&&typeof J!="symbol";break;default:wt(t,s,M,J,l,te)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var je in a)J=a[je],a.hasOwnProperty(je)&&J!=null&&!l.hasOwnProperty(je)&&wt(t,s,je,null,l,J);for(K in l)if(J=l[K],te=a[K],l.hasOwnProperty(K)&&J!==te&&(J!=null||te!=null))switch(K){case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(r(137,s));break;default:wt(t,s,K,J,l,te)}return;default:if(_s(s)){for(var xt in a)J=a[xt],a.hasOwnProperty(xt)&&J!==void 0&&!l.hasOwnProperty(xt)&&Zf(t,s,xt,void 0,l,J);for(oe in l)J=l[oe],te=a[oe],!l.hasOwnProperty(oe)||J===te||J===void 0&&te===void 0||Zf(t,s,oe,J,l,te);return}}for(var G in a)J=a[G],a.hasOwnProperty(G)&&J!=null&&!l.hasOwnProperty(G)&&wt(t,s,G,null,l,J);for(ue in l)J=l[ue],te=a[ue],!l.hasOwnProperty(ue)||J===te||J==null&&te==null||wt(t,s,ue,J,l,te)}var Kf=null,Yf=null;function Yu(t){return t.nodeType===9?t:t.ownerDocument}function Z0(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function K0(t,s){if(t===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&s==="foreignObject"?0:t}function Qf(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var $f=null;function Rx(){var t=window.event;return t&&t.type==="popstate"?t===$f?!1:($f=t,!0):($f=null,!1)}var Y0=typeof setTimeout=="function"?setTimeout:void 0,Cx=typeof clearTimeout=="function"?clearTimeout:void 0,Q0=typeof Promise=="function"?Promise:void 0,Ix=typeof queueMicrotask=="function"?queueMicrotask:typeof Q0<"u"?function(t){return Q0.resolve(null).then(t).catch(kx)}:Y0;function kx(t){setTimeout(function(){throw t})}function ea(t){return t==="head"}function $0(t,s){var a=s,l=0,d=0;do{var m=a.nextSibling;if(t.removeChild(a),m&&m.nodeType===8)if(a=m.data,a==="/$"){if(0<l&&8>l){a=l;var b=t.ownerDocument;if(a&1&&Jl(b.documentElement),a&2&&Jl(b.body),a&4)for(a=b.head,Jl(a),b=a.firstChild;b;){var S=b.nextSibling,M=b.nodeName;b[Si]||M==="SCRIPT"||M==="STYLE"||M==="LINK"&&b.rel.toLowerCase()==="stylesheet"||a.removeChild(b),b=S}}if(d===0){t.removeChild(m),oc(s);return}d--}else a==="$"||a==="$?"||a==="$!"?d++:l=a.charCodeAt(0)-48;else l=0;a=m}while(a);oc(s)}function Jf(t){var s=t.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Jf(a),ps(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function Nx(t,s,a,l){for(;t.nodeType===1;){var d=a;if(t.nodeName.toLowerCase()!==s.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Si])switch(s){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==d.rel||t.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||t.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||t.getAttribute("title")!==(d.title==null?null:d.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(d.src==null?null:d.src)||t.getAttribute("type")!==(d.type==null?null:d.type)||t.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(s==="input"&&t.type==="hidden"){var m=d.name==null?null:""+d.name;if(d.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=rs(t.nextSibling),t===null)break}return null}function Dx(t,s,a){if(s==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=rs(t.nextSibling),t===null))return null;return t}function em(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function jx(t,s){var a=t.ownerDocument;if(t.data!=="$?"||a.readyState==="complete")s();else{var l=function(){s(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function rs(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return t}var tm=null;function J0(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return t;s--}else a==="/$"&&s++}t=t.previousSibling}return null}function ev(t,s,a){switch(s=Yu(a),t){case"html":if(t=s.documentElement,!t)throw Error(r(452));return t;case"head":if(t=s.head,!t)throw Error(r(453));return t;case"body":if(t=s.body,!t)throw Error(r(454));return t;default:throw Error(r(451))}}function Jl(t){for(var s=t.attributes;s.length;)t.removeAttributeNode(s[0]);ps(t)}var Ui=new Map,tv=new Set;function Qu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var fr=he.d;he.d={f:Ox,r:Mx,D:Lx,C:Vx,L:Px,m:Ux,X:zx,S:Bx,M:Fx};function Ox(){var t=fr.f(),s=Fu();return t||s}function Mx(t){var s=ci(t);s!==null&&s.tag===5&&s.type==="form"?wy(s):fr.r(t)}var Ko=typeof document>"u"?null:document;function nv(t,s,a){var l=Ko;if(l&&typeof s=="string"&&s){var d=Dt(s);d='link[rel="'+t+'"][href="'+d+'"]',typeof a=="string"&&(d+='[crossorigin="'+a+'"]'),tv.has(d)||(tv.add(d),t={rel:t,crossOrigin:a,href:s},l.querySelector(d)===null&&(s=l.createElement("link"),An(s,"link",t),Nt(s),l.head.appendChild(s)))}}function Lx(t){fr.D(t),nv("dns-prefetch",t,null)}function Vx(t,s){fr.C(t,s),nv("preconnect",t,s)}function Px(t,s,a){fr.L(t,s,a);var l=Ko;if(l&&t&&s){var d='link[rel="preload"][as="'+Dt(s)+'"]';s==="image"&&a&&a.imageSrcSet?(d+='[imagesrcset="'+Dt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(d+='[imagesizes="'+Dt(a.imageSizes)+'"]')):d+='[href="'+Dt(t)+'"]';var m=d;switch(s){case"style":m=Yo(t);break;case"script":m=Qo(t)}Ui.has(m)||(t=w({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:t,as:s},a),Ui.set(m,t),l.querySelector(d)!==null||s==="style"&&l.querySelector(ec(m))||s==="script"&&l.querySelector(tc(m))||(s=l.createElement("link"),An(s,"link",t),Nt(s),l.head.appendChild(s)))}}function Ux(t,s){fr.m(t,s);var a=Ko;if(a&&t){var l=s&&typeof s.as=="string"?s.as:"script",d='link[rel="modulepreload"][as="'+Dt(l)+'"][href="'+Dt(t)+'"]',m=d;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Qo(t)}if(!Ui.has(m)&&(t=w({rel:"modulepreload",href:t},s),Ui.set(m,t),a.querySelector(d)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(tc(m)))return}l=a.createElement("link"),An(l,"link",t),Nt(l),a.head.appendChild(l)}}}function Bx(t,s,a){fr.S(t,s,a);var l=Ko;if(l&&t){var d=bn(l).hoistableStyles,m=Yo(t);s=s||"default";var b=d.get(m);if(!b){var S={loading:0,preload:null};if(b=l.querySelector(ec(m)))S.loading=5;else{t=w({rel:"stylesheet",href:t,"data-precedence":s},a),(a=Ui.get(m))&&nm(t,a);var M=b=l.createElement("link");Nt(M),An(M,"link",t),M._p=new Promise(function(K,oe){M.onload=K,M.onerror=oe}),M.addEventListener("load",function(){S.loading|=1}),M.addEventListener("error",function(){S.loading|=2}),S.loading|=4,$u(b,s,l)}b={type:"stylesheet",instance:b,count:1,state:S},d.set(m,b)}}}function zx(t,s){fr.X(t,s);var a=Ko;if(a&&t){var l=bn(a).hoistableScripts,d=Qo(t),m=l.get(d);m||(m=a.querySelector(tc(d)),m||(t=w({src:t,async:!0},s),(s=Ui.get(d))&&im(t,s),m=a.createElement("script"),Nt(m),An(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(d,m))}}function Fx(t,s){fr.M(t,s);var a=Ko;if(a&&t){var l=bn(a).hoistableScripts,d=Qo(t),m=l.get(d);m||(m=a.querySelector(tc(d)),m||(t=w({src:t,async:!0,type:"module"},s),(s=Ui.get(d))&&im(t,s),m=a.createElement("script"),Nt(m),An(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(d,m))}}function iv(t,s,a,l){var d=(d=Oe.current)?Qu(d):null;if(!d)throw Error(r(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=Yo(a.href),a=bn(d).hoistableStyles,l=a.get(s),l||(l={type:"style",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=Yo(a.href);var m=bn(d).hoistableStyles,b=m.get(t);if(b||(d=d.ownerDocument||d,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,b),(m=d.querySelector(ec(t)))&&!m._p&&(b.instance=m,b.state.loading=5),Ui.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Ui.set(t,a),m||Hx(d,t,a,b.state))),s&&l===null)throw Error(r(528,""));return b}if(s&&l!==null)throw Error(r(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Qo(a),a=bn(d).hoistableScripts,l=a.get(s),l||(l={type:"script",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,t))}}function Yo(t){return'href="'+Dt(t)+'"'}function ec(t){return'link[rel="stylesheet"]['+t+"]"}function sv(t){return w({},t,{"data-precedence":t.precedence,precedence:null})}function Hx(t,s,a,l){t.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=t.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),An(s,"link",a),Nt(s),t.head.appendChild(s))}function Qo(t){return'[src="'+Dt(t)+'"]'}function tc(t){return"script[async]"+t}function rv(t,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var l=t.querySelector('style[data-href~="'+Dt(a.href)+'"]');if(l)return s.instance=l,Nt(l),l;var d=w({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),Nt(l),An(l,"style",d),$u(l,a.precedence,t),s.instance=l;case"stylesheet":d=Yo(a.href);var m=t.querySelector(ec(d));if(m)return s.state.loading|=4,s.instance=m,Nt(m),m;l=sv(a),(d=Ui.get(d))&&nm(l,d),m=(t.ownerDocument||t).createElement("link"),Nt(m);var b=m;return b._p=new Promise(function(S,M){b.onload=S,b.onerror=M}),An(m,"link",l),s.state.loading|=4,$u(m,a.precedence,t),s.instance=m;case"script":return m=Qo(a.src),(d=t.querySelector(tc(m)))?(s.instance=d,Nt(d),d):(l=a,(d=Ui.get(m))&&(l=w({},a),im(l,d)),t=t.ownerDocument||t,d=t.createElement("script"),Nt(d),An(d,"link",l),t.head.appendChild(d),s.instance=d);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(l=s.instance,s.state.loading|=4,$u(l,a.precedence,t));return s.instance}function $u(t,s,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=l.length?l[l.length-1]:null,m=d,b=0;b<l.length;b++){var S=l[b];if(S.dataset.precedence===s)m=S;else if(m!==d)break}m?m.parentNode.insertBefore(t,m.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(t,s.firstChild))}function nm(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.title==null&&(t.title=s.title)}function im(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.integrity==null&&(t.integrity=s.integrity)}var Ju=null;function av(t,s,a){if(Ju===null){var l=new Map,d=Ju=new Map;d.set(a,l)}else d=Ju,l=d.get(a),l||(l=new Map,d.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),d=0;d<a.length;d++){var m=a[d];if(!(m[Si]||m[Bt]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var b=m.getAttribute(s)||"";b=t+b;var S=l.get(b);S?S.push(m):l.set(b,[m])}}return l}function ov(t,s,a){t=t.ownerDocument||t,t.head.insertBefore(a,s==="title"?t.querySelector("head > title"):null)}function qx(t,s,a){if(a===1||s.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return t=s.disabled,typeof s.precedence=="string"&&t==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function lv(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var nc=null;function Gx(){}function Xx(t,s,a){if(nc===null)throw Error(r(475));var l=nc;if(s.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var d=Yo(a.href),m=t.querySelector(ec(d));if(m){t=m._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=ed.bind(l),t.then(l,l)),s.state.loading|=4,s.instance=m,Nt(m);return}m=t.ownerDocument||t,a=sv(a),(d=Ui.get(d))&&nm(a,d),m=m.createElement("link"),Nt(m);var b=m;b._p=new Promise(function(S,M){b.onload=S,b.onerror=M}),An(m,"link",a),s.instance=m}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(s,t),(t=s.state.preload)&&(s.state.loading&3)===0&&(l.count++,s=ed.bind(l),t.addEventListener("load",s),t.addEventListener("error",s))}}function Wx(){if(nc===null)throw Error(r(475));var t=nc;return t.stylesheets&&t.count===0&&sm(t,t.stylesheets),0<t.count?function(s){var a=setTimeout(function(){if(t.stylesheets&&sm(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=s,function(){t.unsuspend=null,clearTimeout(a)}}:null}function ed(){if(this.count--,this.count===0){if(this.stylesheets)sm(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var td=null;function sm(t,s){t.stylesheets=null,t.unsuspend!==null&&(t.count++,td=new Map,s.forEach(Zx,t),td=null,ed.call(t))}function Zx(t,s){if(!(s.state.loading&4)){var a=td.get(t);if(a)var l=a.get(null);else{a=new Map,td.set(t,a);for(var d=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<d.length;m++){var b=d[m];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(a.set(b.dataset.precedence,b),l=b)}l&&a.set(null,l)}d=s.instance,b=d.getAttribute("data-precedence"),m=a.get(b)||l,m===l&&a.set(null,d),a.set(b,d),this.count++,l=ed.bind(this),d.addEventListener("load",l),d.addEventListener("error",l),m?m.parentNode.insertBefore(d,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(d,t.firstChild)),s.state.loading|=4}}var ic={$$typeof:z,Provider:null,Consumer:null,_currentValue:ne,_currentValue2:ne,_threadCount:0};function Kx(t,s,a,l,d,m,b,S){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Xi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xi(0),this.hiddenUpdates=Xi(null),this.identifierPrefix=l,this.onUncaughtError=d,this.onCaughtError=m,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=S,this.incompleteTransitions=new Map}function cv(t,s,a,l,d,m,b,S,M,K,oe,ue){return t=new Kx(t,s,a,b,S,M,K,ue),s=1,m===!0&&(s|=24),m=mi(3,null,null,s),t.current=m,m.stateNode=t,s=Ph(),s.refCount++,t.pooledCache=s,s.refCount++,m.memoizedState={element:l,isDehydrated:a,cache:s},Fh(m),t}function uv(t){return t?(t=Co,t):Co}function dv(t,s,a,l,d,m){d=uv(d),l.context===null?l.context=d:l.pendingContext=d,l=zr(s),l.payload={element:a},m=m===void 0?null:m,m!==null&&(l.callback=m),a=Fr(t,l,s),a!==null&&(_i(a,t,s),jl(a,t,s))}function hv(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<s?a:s}}function rm(t,s){hv(t,s),(t=t.alternate)&&hv(t,s)}function fv(t){if(t.tag===13){var s=Ro(t,67108864);s!==null&&_i(s,t,67108864),rm(t,67108864)}}var nd=!0;function Yx(t,s,a,l){var d=se.T;se.T=null;var m=he.p;try{he.p=2,am(t,s,a,l)}finally{he.p=m,se.T=d}}function Qx(t,s,a,l){var d=se.T;se.T=null;var m=he.p;try{he.p=8,am(t,s,a,l)}finally{he.p=m,se.T=d}}function am(t,s,a,l){if(nd){var d=om(l);if(d===null)Wf(t,s,l,id,a),pv(t,l);else if(Jx(d,t,s,a,l))l.stopPropagation();else if(pv(t,l),s&4&&-1<$x.indexOf(t)){for(;d!==null;){var m=ci(d);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var b=Yn(m.pendingLanes);if(b!==0){var S=m;for(S.pendingLanes|=2,S.entangledLanes|=2;b;){var M=1<<31-Wt(b);S.entanglements[1]|=M,b&=~M}Cs(m),(vt&6)===0&&(Bu=Se()+500,Yl(0))}}break;case 13:S=Ro(m,2),S!==null&&_i(S,m,2),Fu(),rm(m,2)}if(m=om(l),m===null&&Wf(t,s,l,id,a),m===d)break;d=m}d!==null&&l.stopPropagation()}else Wf(t,s,l,null,a)}}function om(t){return t=wn(t),lm(t)}var id=null;function lm(t){if(id=null,t=Yi(t),t!==null){var s=c(t);if(s===null)t=null;else{var a=s.tag;if(a===13){if(t=h(s),t!==null)return t;t=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null)}}return id=t,null}function mv(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(It()){case ht:return 2;case Zn:return 8;case Hs:case wi:return 32;case Ar:return 268435456;default:return 32}default:return 32}}var cm=!1,ta=null,na=null,ia=null,sc=new Map,rc=new Map,sa=[],$x="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function pv(t,s){switch(t){case"focusin":case"focusout":ta=null;break;case"dragenter":case"dragleave":na=null;break;case"mouseover":case"mouseout":ia=null;break;case"pointerover":case"pointerout":sc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":rc.delete(s.pointerId)}}function ac(t,s,a,l,d,m){return t===null||t.nativeEvent!==m?(t={blockedOn:s,domEventName:a,eventSystemFlags:l,nativeEvent:m,targetContainers:[d]},s!==null&&(s=ci(s),s!==null&&fv(s)),t):(t.eventSystemFlags|=l,s=t.targetContainers,d!==null&&s.indexOf(d)===-1&&s.push(d),t)}function Jx(t,s,a,l,d){switch(s){case"focusin":return ta=ac(ta,t,s,a,l,d),!0;case"dragenter":return na=ac(na,t,s,a,l,d),!0;case"mouseover":return ia=ac(ia,t,s,a,l,d),!0;case"pointerover":var m=d.pointerId;return sc.set(m,ac(sc.get(m)||null,t,s,a,l,d)),!0;case"gotpointercapture":return m=d.pointerId,rc.set(m,ac(rc.get(m)||null,t,s,a,l,d)),!0}return!1}function gv(t){var s=Yi(t.target);if(s!==null){var a=c(s);if(a!==null){if(s=a.tag,s===13){if(s=h(a),s!==null){t.blockedOn=s,po(t.priority,function(){if(a.tag===13){var l=vi();l=Zi(l);var d=Ro(a,l);d!==null&&_i(d,a,l),rm(a,l)}});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function sd(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var a=om(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Ji=l,a.target.dispatchEvent(l),Ji=null}else return s=ci(a),s!==null&&fv(s),t.blockedOn=a,!1;s.shift()}return!0}function yv(t,s,a){sd(t)&&a.delete(s)}function eE(){cm=!1,ta!==null&&sd(ta)&&(ta=null),na!==null&&sd(na)&&(na=null),ia!==null&&sd(ia)&&(ia=null),sc.forEach(yv),rc.forEach(yv)}function rd(t,s){t.blockedOn===s&&(t.blockedOn=null,cm||(cm=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,eE)))}var ad=null;function vv(t){ad!==t&&(ad=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){ad===t&&(ad=null);for(var s=0;s<t.length;s+=3){var a=t[s],l=t[s+1],d=t[s+2];if(typeof l!="function"){if(lm(l||a)===null)continue;break}var m=ci(a);m!==null&&(t.splice(s,3),s-=3,lf(m,{pending:!0,data:d,method:a.method,action:l},l,d))}}))}function oc(t){function s(M){return rd(M,t)}ta!==null&&rd(ta,t),na!==null&&rd(na,t),ia!==null&&rd(ia,t),sc.forEach(s),rc.forEach(s);for(var a=0;a<sa.length;a++){var l=sa[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<sa.length&&(a=sa[0],a.blockedOn===null);)gv(a),a.blockedOn===null&&sa.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var d=a[l],m=a[l+1],b=d[kt]||null;if(typeof m=="function")b||vv(a);else if(b){var S=null;if(m&&m.hasAttribute("formAction")){if(d=m,b=m[kt]||null)S=b.formAction;else if(lm(d)!==null)continue}else S=b.action;typeof S=="function"?a[l+1]=S:(a.splice(l,3),l-=3),vv(a)}}}function um(t){this._internalRoot=t}od.prototype.render=um.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(r(409));var a=s.current,l=vi();dv(a,l,t,s,null,null)},od.prototype.unmount=um.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;dv(t.current,2,null,t,null,null),Fu(),s[Qn]=null}};function od(t){this._internalRoot=t}od.prototype.unstable_scheduleHydration=function(t){if(t){var s=Ki();t={blockedOn:null,target:t,priority:s};for(var a=0;a<sa.length&&s!==0&&s<sa[a].priority;a++);sa.splice(a,0,t),a===0&&gv(t)}};var _v=e.version;if(_v!=="19.1.0")throw Error(r(527,_v,"19.1.0"));he.findDOMNode=function(t){var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=g(s),t=t!==null?y(t):null,t=t===null?null:t.stateNode,t};var tE={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:se,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ld=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ld.isDisabled&&ld.supportsFiber)try{St=ld.inject(tE),ot=ld}catch{}}return cc.createRoot=function(t,s){if(!o(t))throw Error(r(299));var a=!1,l="",d=My,m=Ly,b=Vy,S=null;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(l=s.identifierPrefix),s.onUncaughtError!==void 0&&(d=s.onUncaughtError),s.onCaughtError!==void 0&&(m=s.onCaughtError),s.onRecoverableError!==void 0&&(b=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(S=s.unstable_transitionCallbacks)),s=cv(t,1,!1,null,null,a,l,d,m,b,S,null),t[Qn]=s.current,Xf(t),new um(s)},cc.hydrateRoot=function(t,s,a){if(!o(t))throw Error(r(299));var l=!1,d="",m=My,b=Ly,S=Vy,M=null,K=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(b=a.onCaughtError),a.onRecoverableError!==void 0&&(S=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(M=a.unstable_transitionCallbacks),a.formState!==void 0&&(K=a.formState)),s=cv(t,1,!0,s,a??null,l,d,m,b,S,M,K),s.context=uv(null),a=s.current,l=vi(),l=Zi(l),d=zr(l),d.callback=null,Fr(a,d,l),a=l,s.current.lanes=a,Wi(s,a),Cs(s),t[Qn]=s.current,Xf(t),new od(s)},cc.version="19.1.0",cc}var Iv;function uE(){if(Iv)return fm.exports;Iv=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),fm.exports=cE(),fm.exports}var dE=uE();const hE=w_(dE);var uc={},kv;function fE(){if(kv)return uc;kv=1,Object.defineProperty(uc,"__esModule",{value:!0}),uc.parse=h,uc.serialize=y;const i=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,c=(()=>{const A=function(){};return A.prototype=Object.create(null),A})();function h(A,B){const H=new c,q=A.length;if(q<2)return H;const Q=(B==null?void 0:B.decode)||w;let $=0;do{const Y=A.indexOf("=",$);if(Y===-1)break;const z=A.indexOf(";",$),ge=z===-1?q:z;if(Y>ge){$=A.lastIndexOf(";",Y-1)+1;continue}const ee=p(A,$,Y),me=g(A,Y,ee),D=A.slice(ee,me);if(H[D]===void 0){let R=p(A,Y+1,ge),C=g(A,ge,R);const L=Q(A.slice(R,C));H[D]=L}$=ge+1}while($<q);return H}function p(A,B,H){do{const q=A.charCodeAt(B);if(q!==32&&q!==9)return B}while(++B<H);return H}function g(A,B,H){for(;B>H;){const q=A.charCodeAt(--B);if(q!==32&&q!==9)return B+1}return H}function y(A,B,H){const q=(H==null?void 0:H.encode)||encodeURIComponent;if(!i.test(A))throw new TypeError(`argument name is invalid: ${A}`);const Q=q(B);if(!e.test(Q))throw new TypeError(`argument val is invalid: ${B}`);let $=A+"="+Q;if(!H)return $;if(H.maxAge!==void 0){if(!Number.isInteger(H.maxAge))throw new TypeError(`option maxAge is invalid: ${H.maxAge}`);$+="; Max-Age="+H.maxAge}if(H.domain){if(!n.test(H.domain))throw new TypeError(`option domain is invalid: ${H.domain}`);$+="; Domain="+H.domain}if(H.path){if(!r.test(H.path))throw new TypeError(`option path is invalid: ${H.path}`);$+="; Path="+H.path}if(H.expires){if(!E(H.expires)||!Number.isFinite(H.expires.valueOf()))throw new TypeError(`option expires is invalid: ${H.expires}`);$+="; Expires="+H.expires.toUTCString()}if(H.httpOnly&&($+="; HttpOnly"),H.secure&&($+="; Secure"),H.partitioned&&($+="; Partitioned"),H.priority)switch(typeof H.priority=="string"?H.priority.toLowerCase():void 0){case"low":$+="; Priority=Low";break;case"medium":$+="; Priority=Medium";break;case"high":$+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${H.priority}`)}if(H.sameSite)switch(typeof H.sameSite=="string"?H.sameSite.toLowerCase():H.sameSite){case!0:case"strict":$+="; SameSite=Strict";break;case"lax":$+="; SameSite=Lax";break;case"none":$+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${H.sameSite}`)}return $}function w(A){if(A.indexOf("%")===-1)return A;try{return decodeURIComponent(A)}catch{return A}}function E(A){return o.call(A)==="[object Date]"}return uc}fE();var Nv="popstate";function mE(i={}){function e(o,c){let{pathname:h="/",search:p="",hash:g=""}=so(o.location.hash.substring(1));return!h.startsWith("/")&&!h.startsWith(".")&&(h="/"+h),Mm("",{pathname:h,search:p,hash:g},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function n(o,c){let h=o.document.querySelector("base"),p="";if(h&&h.getAttribute("href")){let g=o.location.href,y=g.indexOf("#");p=y===-1?g:g.slice(0,y)}return p+"#"+(typeof c=="string"?c:Ic(c))}function r(o,c){ls(o.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(c)})`)}return gE(e,n,r,i)}function Pt(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function ls(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function pE(){return Math.random().toString(36).substring(2,10)}function Dv(i,e){return{usr:i.state,key:i.key,idx:e}}function Mm(i,e,n=null,r){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?so(e):e,state:n,key:e&&e.key||r||pE()}}function Ic({pathname:i="/",search:e="",hash:n=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(i+=n.charAt(0)==="#"?n:"#"+n),i}function so(i){let e={};if(i){let n=i.indexOf("#");n>=0&&(e.hash=i.substring(n),i=i.substring(0,n));let r=i.indexOf("?");r>=0&&(e.search=i.substring(r),i=i.substring(0,r)),i&&(e.pathname=i)}return e}function gE(i,e,n,r={}){let{window:o=document.defaultView,v5Compat:c=!1}=r,h=o.history,p="POP",g=null,y=w();y==null&&(y=0,h.replaceState({...h.state,idx:y},""));function w(){return(h.state||{idx:null}).idx}function E(){p="POP";let Q=w(),$=Q==null?null:Q-y;y=Q,g&&g({action:p,location:q.location,delta:$})}function A(Q,$){p="PUSH";let Y=Mm(q.location,Q,$);n&&n(Y,Q),y=w()+1;let z=Dv(Y,y),ge=q.createHref(Y);try{h.pushState(z,"",ge)}catch(ee){if(ee instanceof DOMException&&ee.name==="DataCloneError")throw ee;o.location.assign(ge)}c&&g&&g({action:p,location:q.location,delta:1})}function B(Q,$){p="REPLACE";let Y=Mm(q.location,Q,$);n&&n(Y,Q),y=w();let z=Dv(Y,y),ge=q.createHref(Y);h.replaceState(z,"",ge),c&&g&&g({action:p,location:q.location,delta:0})}function H(Q){return yE(Q)}let q={get action(){return p},get location(){return i(o,h)},listen(Q){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(Nv,E),g=Q,()=>{o.removeEventListener(Nv,E),g=null}},createHref(Q){return e(o,Q)},createURL:H,encodeLocation(Q){let $=H(Q);return{pathname:$.pathname,search:$.search,hash:$.hash}},push:A,replace:B,go(Q){return h.go(Q)}};return q}function yE(i,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Pt(n,"No window.location.(origin|href) available to create URL");let r=typeof i=="string"?i:Ic(i);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function E_(i,e,n="/"){return vE(i,e,n,!1)}function vE(i,e,n,r){let o=typeof e=="string"?so(e):e,c=br(o.pathname||"/",n);if(c==null)return null;let h=S_(i);_E(h);let p=null;for(let g=0;p==null&&g<h.length;++g){let y=kE(c);p=CE(h[g],y,r)}return p}function S_(i,e=[],n=[],r=""){let o=(c,h,p)=>{let g={relativePath:p===void 0?c.path||"":p,caseSensitive:c.caseSensitive===!0,childrenIndex:h,route:c};g.relativePath.startsWith("/")&&(Pt(g.relativePath.startsWith(r),`Absolute route path "${g.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(r.length));let y=yr([r,g.relativePath]),w=n.concat(g);c.children&&c.children.length>0&&(Pt(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),S_(c.children,e,w,y)),!(c.path==null&&!c.index)&&e.push({path:y,score:TE(y,c.index),routesMeta:w})};return i.forEach((c,h)=>{var p;if(c.path===""||!((p=c.path)!=null&&p.includes("?")))o(c,h);else for(let g of A_(c.path))o(c,h,g)}),e}function A_(i){let e=i.split("/");if(e.length===0)return[];let[n,...r]=e,o=n.endsWith("?"),c=n.replace(/\?$/,"");if(r.length===0)return o?[c,""]:[c];let h=A_(r.join("/")),p=[];return p.push(...h.map(g=>g===""?c:[c,g].join("/"))),o&&p.push(...h),p.map(g=>i.startsWith("/")&&g===""?"/":g)}function _E(i){i.sort((e,n)=>e.score!==n.score?n.score-e.score:RE(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var bE=/^:[\w-]+$/,wE=3,xE=2,EE=1,SE=10,AE=-2,jv=i=>i==="*";function TE(i,e){let n=i.split("/"),r=n.length;return n.some(jv)&&(r+=AE),e&&(r+=xE),n.filter(o=>!jv(o)).reduce((o,c)=>o+(bE.test(c)?wE:c===""?EE:SE),r)}function RE(i,e){return i.length===e.length&&i.slice(0,-1).every((r,o)=>r===e[o])?i[i.length-1]-e[e.length-1]:0}function CE(i,e,n=!1){let{routesMeta:r}=i,o={},c="/",h=[];for(let p=0;p<r.length;++p){let g=r[p],y=p===r.length-1,w=c==="/"?e:e.slice(c.length)||"/",E=Id({path:g.relativePath,caseSensitive:g.caseSensitive,end:y},w),A=g.route;if(!E&&y&&n&&!r[r.length-1].route.index&&(E=Id({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},w)),!E)return null;Object.assign(o,E.params),h.push({params:o,pathname:yr([c,E.pathname]),pathnameBase:OE(yr([c,E.pathnameBase])),route:A}),E.pathnameBase!=="/"&&(c=yr([c,E.pathnameBase]))}return h}function Id(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[n,r]=IE(i.path,i.caseSensitive,i.end),o=e.match(n);if(!o)return null;let c=o[0],h=c.replace(/(.)\/+$/,"$1"),p=o.slice(1);return{params:r.reduce((y,{paramName:w,isOptional:E},A)=>{if(w==="*"){let H=p[A]||"";h=c.slice(0,c.length-H.length).replace(/(.)\/+$/,"$1")}const B=p[A];return E&&!B?y[w]=void 0:y[w]=(B||"").replace(/%2F/g,"/"),y},{}),pathname:c,pathnameBase:h,pattern:i}}function IE(i,e=!1,n=!0){ls(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let r=[],o="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,p,g)=>(r.push({paramName:p,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(r.push({paramName:"*"}),o+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":i!==""&&i!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),r]}function kE(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ls(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function br(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=i.charAt(n);return r&&r!=="/"?null:i.slice(n)||"/"}function NE(i,e="/"){let{pathname:n,search:r="",hash:o=""}=typeof i=="string"?so(i):i;return{pathname:n?n.startsWith("/")?n:DE(n,e):e,search:ME(r),hash:LE(o)}}function DE(i,e){let n=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function ym(i,e,n,r){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function jE(i){return i.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function T_(i){let e=jE(i);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function R_(i,e,n,r=!1){let o;typeof i=="string"?o=so(i):(o={...i},Pt(!o.pathname||!o.pathname.includes("?"),ym("?","pathname","search",o)),Pt(!o.pathname||!o.pathname.includes("#"),ym("#","pathname","hash",o)),Pt(!o.search||!o.search.includes("#"),ym("#","search","hash",o)));let c=i===""||o.pathname==="",h=c?"/":o.pathname,p;if(h==null)p=n;else{let E=e.length-1;if(!r&&h.startsWith("..")){let A=h.split("/");for(;A[0]==="..";)A.shift(),E-=1;o.pathname=A.join("/")}p=E>=0?e[E]:"/"}let g=NE(o,p),y=h&&h!=="/"&&h.endsWith("/"),w=(c||h===".")&&n.endsWith("/");return!g.pathname.endsWith("/")&&(y||w)&&(g.pathname+="/"),g}var yr=i=>i.join("/").replace(/\/\/+/g,"/"),OE=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),ME=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,LE=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function VE(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}var C_=["POST","PUT","PATCH","DELETE"];new Set(C_);var PE=["GET",...C_];new Set(PE);var hl=I.createContext(null);hl.displayName="DataRouter";var $d=I.createContext(null);$d.displayName="DataRouterState";var I_=I.createContext({isTransitioning:!1});I_.displayName="ViewTransition";var UE=I.createContext(new Map);UE.displayName="Fetchers";var BE=I.createContext(null);BE.displayName="Await";var Bs=I.createContext(null);Bs.displayName="Navigation";var zc=I.createContext(null);zc.displayName="Location";var zs=I.createContext({outlet:null,matches:[],isDataRoute:!1});zs.displayName="Route";var up=I.createContext(null);up.displayName="RouteError";function zE(i,{relative:e}={}){Pt(Fc(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=I.useContext(Bs),{hash:o,pathname:c,search:h}=Hc(i,{relative:e}),p=c;return n!=="/"&&(p=c==="/"?n:yr([n,c])),r.createHref({pathname:p,search:h,hash:o})}function Fc(){return I.useContext(zc)!=null}function ds(){return Pt(Fc(),"useLocation() may be used only in the context of a <Router> component."),I.useContext(zc).location}var k_="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function N_(i){I.useContext(Bs).static||I.useLayoutEffect(i)}function Fs(){let{isDataRoute:i}=I.useContext(zs);return i?tS():FE()}function FE(){Pt(Fc(),"useNavigate() may be used only in the context of a <Router> component.");let i=I.useContext(hl),{basename:e,navigator:n}=I.useContext(Bs),{matches:r}=I.useContext(zs),{pathname:o}=ds(),c=JSON.stringify(T_(r)),h=I.useRef(!1);return N_(()=>{h.current=!0}),I.useCallback((g,y={})=>{if(ls(h.current,k_),!h.current)return;if(typeof g=="number"){n.go(g);return}let w=R_(g,JSON.parse(c),o,y.relative==="path");i==null&&e!=="/"&&(w.pathname=w.pathname==="/"?e:yr([e,w.pathname])),(y.replace?n.replace:n.push)(w,y.state,y)},[e,n,c,o,i])}I.createContext(null);function HE(){let{matches:i}=I.useContext(zs),e=i[i.length-1];return e?e.params:{}}function Hc(i,{relative:e}={}){let{matches:n}=I.useContext(zs),{pathname:r}=ds(),o=JSON.stringify(T_(n));return I.useMemo(()=>R_(i,JSON.parse(o),r,e==="path"),[i,o,r,e])}function qE(i,e){return D_(i,e)}function D_(i,e,n,r){var $;Pt(Fc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=I.useContext(Bs),{matches:c}=I.useContext(zs),h=c[c.length-1],p=h?h.params:{},g=h?h.pathname:"/",y=h?h.pathnameBase:"/",w=h&&h.route;{let Y=w&&w.path||"";j_(g,!w||Y.endsWith("*")||Y.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${Y}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${Y}"> to <Route path="${Y==="/"?"*":`${Y}/*`}">.`)}let E=ds(),A;if(e){let Y=typeof e=="string"?so(e):e;Pt(y==="/"||(($=Y.pathname)==null?void 0:$.startsWith(y)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${Y.pathname}" was given in the \`location\` prop.`),A=Y}else A=E;let B=A.pathname||"/",H=B;if(y!=="/"){let Y=y.replace(/^\//,"").split("/");H="/"+B.replace(/^\//,"").split("/").slice(Y.length).join("/")}let q=E_(i,{pathname:H});ls(w||q!=null,`No routes matched location "${A.pathname}${A.search}${A.hash}" `),ls(q==null||q[q.length-1].route.element!==void 0||q[q.length-1].route.Component!==void 0||q[q.length-1].route.lazy!==void 0,`Matched leaf route at location "${A.pathname}${A.search}${A.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let Q=KE(q&&q.map(Y=>Object.assign({},Y,{params:Object.assign({},p,Y.params),pathname:yr([y,o.encodeLocation?o.encodeLocation(Y.pathname).pathname:Y.pathname]),pathnameBase:Y.pathnameBase==="/"?y:yr([y,o.encodeLocation?o.encodeLocation(Y.pathnameBase).pathname:Y.pathnameBase])})),c,n,r);return e&&Q?I.createElement(zc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...A},navigationType:"POP"}},Q):Q}function GE(){let i=eS(),e=VE(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),n=i instanceof Error?i.stack:null,r="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:r},c={padding:"2px 4px",backgroundColor:r},h=null;return console.error("Error handled by React Router default ErrorBoundary:",i),h=I.createElement(I.Fragment,null,I.createElement("p",null,"💿 Hey developer 👋"),I.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",I.createElement("code",{style:c},"ErrorBoundary")," or"," ",I.createElement("code",{style:c},"errorElement")," prop on your route.")),I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},e),n?I.createElement("pre",{style:o},n):null,h)}var XE=I.createElement(GE,null),WE=class extends I.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){console.error("React Router caught the following error during render",i,e)}render(){return this.state.error!==void 0?I.createElement(zs.Provider,{value:this.props.routeContext},I.createElement(up.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function ZE({routeContext:i,match:e,children:n}){let r=I.useContext(hl);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),I.createElement(zs.Provider,{value:i},n)}function KE(i,e=[],n=null,r=null){if(i==null){if(!n)return null;if(n.errors)i=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)i=n.matches;else return null}let o=i,c=n==null?void 0:n.errors;if(c!=null){let g=o.findIndex(y=>y.route.id&&(c==null?void 0:c[y.route.id])!==void 0);Pt(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),o=o.slice(0,Math.min(o.length,g+1))}let h=!1,p=-1;if(n)for(let g=0;g<o.length;g++){let y=o[g];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(p=g),y.route.id){let{loaderData:w,errors:E}=n,A=y.route.loader&&!w.hasOwnProperty(y.route.id)&&(!E||E[y.route.id]===void 0);if(y.route.lazy||A){h=!0,p>=0?o=o.slice(0,p+1):o=[o[0]];break}}}return o.reduceRight((g,y,w)=>{let E,A=!1,B=null,H=null;n&&(E=c&&y.route.id?c[y.route.id]:void 0,B=y.route.errorElement||XE,h&&(p<0&&w===0?(j_("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),A=!0,H=null):p===w&&(A=!0,H=y.route.hydrateFallbackElement||null)));let q=e.concat(o.slice(0,w+1)),Q=()=>{let $;return E?$=B:A?$=H:y.route.Component?$=I.createElement(y.route.Component,null):y.route.element?$=y.route.element:$=g,I.createElement(ZE,{match:y,routeContext:{outlet:g,matches:q,isDataRoute:n!=null},children:$})};return n&&(y.route.ErrorBoundary||y.route.errorElement||w===0)?I.createElement(WE,{location:n.location,revalidation:n.revalidation,component:B,error:E,children:Q(),routeContext:{outlet:null,matches:q,isDataRoute:!0}}):Q()},null)}function dp(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function YE(i){let e=I.useContext(hl);return Pt(e,dp(i)),e}function QE(i){let e=I.useContext($d);return Pt(e,dp(i)),e}function $E(i){let e=I.useContext(zs);return Pt(e,dp(i)),e}function hp(i){let e=$E(i),n=e.matches[e.matches.length-1];return Pt(n.route.id,`${i} can only be used on routes that contain a unique "id"`),n.route.id}function JE(){return hp("useRouteId")}function eS(){var r;let i=I.useContext(up),e=QE("useRouteError"),n=hp("useRouteError");return i!==void 0?i:(r=e.errors)==null?void 0:r[n]}function tS(){let{router:i}=YE("useNavigate"),e=hp("useNavigate"),n=I.useRef(!1);return N_(()=>{n.current=!0}),I.useCallback(async(o,c={})=>{ls(n.current,k_),n.current&&(typeof o=="number"?i.navigate(o):await i.navigate(o,{fromRouteId:e,...c}))},[i,e])}var Ov={};function j_(i,e,n){!e&&!Ov[i]&&(Ov[i]=!0,ls(!1,n))}I.memo(nS);function nS({routes:i,future:e,state:n}){return D_(i,void 0,n,e)}function mr(i){Pt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function iS({basename:i="/",children:e=null,location:n,navigationType:r="POP",navigator:o,static:c=!1}){Pt(!Fc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=i.replace(/^\/*/,"/"),p=I.useMemo(()=>({basename:h,navigator:o,static:c,future:{}}),[h,o,c]);typeof n=="string"&&(n=so(n));let{pathname:g="/",search:y="",hash:w="",state:E=null,key:A="default"}=n,B=I.useMemo(()=>{let H=br(g,h);return H==null?null:{location:{pathname:H,search:y,hash:w,state:E,key:A},navigationType:r}},[h,g,y,w,E,A,r]);return ls(B!=null,`<Router basename="${h}"> is not able to match the URL "${g}${y}${w}" because it does not start with the basename, so the <Router> won't render anything.`),B==null?null:I.createElement(Bs.Provider,{value:p},I.createElement(zc.Provider,{children:e,value:B}))}function sS({children:i,location:e}){return qE(Lm(i),e)}function Lm(i,e=[]){let n=[];return I.Children.forEach(i,(r,o)=>{if(!I.isValidElement(r))return;let c=[...e,o];if(r.type===I.Fragment){n.push.apply(n,Lm(r.props.children,c));return}Pt(r.type===mr,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Pt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let h={id:r.props.id||c.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(h.children=Lm(r.props.children,c)),n.push(h)}),n}var gd="get",yd="application/x-www-form-urlencoded";function Jd(i){return i!=null&&typeof i.tagName=="string"}function rS(i){return Jd(i)&&i.tagName.toLowerCase()==="button"}function aS(i){return Jd(i)&&i.tagName.toLowerCase()==="form"}function oS(i){return Jd(i)&&i.tagName.toLowerCase()==="input"}function lS(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function cS(i,e){return i.button===0&&(!e||e==="_self")&&!lS(i)}var cd=null;function uS(){if(cd===null)try{new FormData(document.createElement("form"),0),cd=!1}catch{cd=!0}return cd}var dS=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function vm(i){return i!=null&&!dS.has(i)?(ls(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${yd}"`),null):i}function hS(i,e){let n,r,o,c,h;if(aS(i)){let p=i.getAttribute("action");r=p?br(p,e):null,n=i.getAttribute("method")||gd,o=vm(i.getAttribute("enctype"))||yd,c=new FormData(i)}else if(rS(i)||oS(i)&&(i.type==="submit"||i.type==="image")){let p=i.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=i.getAttribute("formaction")||p.getAttribute("action");if(r=g?br(g,e):null,n=i.getAttribute("formmethod")||p.getAttribute("method")||gd,o=vm(i.getAttribute("formenctype"))||vm(p.getAttribute("enctype"))||yd,c=new FormData(p,i),!uS()){let{name:y,type:w,value:E}=i;if(w==="image"){let A=y?`${y}.`:"";c.append(`${A}x`,"0"),c.append(`${A}y`,"0")}else y&&c.append(y,E)}}else{if(Jd(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=gd,r=null,o=yd,h=i}return c&&o==="text/plain"&&(h=c,c=void 0),{action:r,method:n.toLowerCase(),encType:o,formData:c,body:h}}function fp(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}async function fS(i,e){if(i.id in e)return e[i.id];try{let n=await import(i.module);return e[i.id]=n,n}catch(n){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function mS(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function pS(i,e,n){let r=await Promise.all(i.map(async o=>{let c=e.routes[o.route.id];if(c){let h=await fS(c,n);return h.links?h.links():[]}return[]}));return _S(r.flat(1).filter(mS).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function Mv(i,e,n,r,o,c){let h=(g,y)=>n[y]?g.route.id!==n[y].route.id:!0,p=(g,y)=>{var w;return n[y].pathname!==g.pathname||((w=n[y].route.path)==null?void 0:w.endsWith("*"))&&n[y].params["*"]!==g.params["*"]};return c==="assets"?e.filter((g,y)=>h(g,y)||p(g,y)):c==="data"?e.filter((g,y)=>{var E;let w=r.routes[g.route.id];if(!w||!w.hasLoader)return!1;if(h(g,y)||p(g,y))return!0;if(g.route.shouldRevalidate){let A=g.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((E=n[0])==null?void 0:E.params)||{},nextUrl:new URL(i,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof A=="boolean")return A}return!0}):[]}function gS(i,e,{includeHydrateFallback:n}={}){return yS(i.map(r=>{let o=e.routes[r.route.id];if(!o)return[];let c=[o.module];return o.clientActionModule&&(c=c.concat(o.clientActionModule)),o.clientLoaderModule&&(c=c.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(c=c.concat(o.hydrateFallbackModule)),o.imports&&(c=c.concat(o.imports)),c}).flat(1))}function yS(i){return[...new Set(i)]}function vS(i){let e={},n=Object.keys(i).sort();for(let r of n)e[r]=i[r];return e}function _S(i,e){let n=new Set;return new Set(e),i.reduce((r,o)=>{let c=JSON.stringify(vS(o));return n.has(c)||(n.add(c),r.push({key:c,link:o})),r},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var bS=new Set([100,101,204,205]);function wS(i,e){let n=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return n.pathname==="/"?n.pathname="_root.data":e&&br(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function O_(){let i=I.useContext(hl);return fp(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function xS(){let i=I.useContext($d);return fp(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var mp=I.createContext(void 0);mp.displayName="FrameworkContext";function M_(){let i=I.useContext(mp);return fp(i,"You must render this element inside a <HydratedRouter> element"),i}function ES(i,e){let n=I.useContext(mp),[r,o]=I.useState(!1),[c,h]=I.useState(!1),{onFocus:p,onBlur:g,onMouseEnter:y,onMouseLeave:w,onTouchStart:E}=e,A=I.useRef(null);I.useEffect(()=>{if(i==="render"&&h(!0),i==="viewport"){let q=$=>{$.forEach(Y=>{h(Y.isIntersecting)})},Q=new IntersectionObserver(q,{threshold:.5});return A.current&&Q.observe(A.current),()=>{Q.disconnect()}}},[i]),I.useEffect(()=>{if(r){let q=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(q)}}},[r]);let B=()=>{o(!0)},H=()=>{o(!1),h(!1)};return n?i!=="intent"?[c,A,{}]:[c,A,{onFocus:dc(p,B),onBlur:dc(g,H),onMouseEnter:dc(y,B),onMouseLeave:dc(w,H),onTouchStart:dc(E,B)}]:[!1,A,{}]}function dc(i,e){return n=>{i&&i(n),n.defaultPrevented||e(n)}}function SS({page:i,...e}){let{router:n}=O_(),r=I.useMemo(()=>E_(n.routes,i,n.basename),[n.routes,i,n.basename]);return r?I.createElement(TS,{page:i,matches:r,...e}):null}function AS(i){let{manifest:e,routeModules:n}=M_(),[r,o]=I.useState([]);return I.useEffect(()=>{let c=!1;return pS(i,e,n).then(h=>{c||o(h)}),()=>{c=!0}},[i,e,n]),r}function TS({page:i,matches:e,...n}){let r=ds(),{manifest:o,routeModules:c}=M_(),{basename:h}=O_(),{loaderData:p,matches:g}=xS(),y=I.useMemo(()=>Mv(i,e,g,o,r,"data"),[i,e,g,o,r]),w=I.useMemo(()=>Mv(i,e,g,o,r,"assets"),[i,e,g,o,r]),E=I.useMemo(()=>{if(i===r.pathname+r.search+r.hash)return[];let H=new Set,q=!1;if(e.forEach($=>{var z;let Y=o.routes[$.route.id];!Y||!Y.hasLoader||(!y.some(ge=>ge.route.id===$.route.id)&&$.route.id in p&&((z=c[$.route.id])!=null&&z.shouldRevalidate)||Y.hasClientLoader?q=!0:H.add($.route.id))}),H.size===0)return[];let Q=wS(i,h);return q&&H.size>0&&Q.searchParams.set("_routes",e.filter($=>H.has($.route.id)).map($=>$.route.id).join(",")),[Q.pathname+Q.search]},[h,p,r,o,y,e,i,c]),A=I.useMemo(()=>gS(w,o),[w,o]),B=AS(w);return I.createElement(I.Fragment,null,E.map(H=>I.createElement("link",{key:H,rel:"prefetch",as:"fetch",href:H,...n})),A.map(H=>I.createElement("link",{key:H,rel:"modulepreload",href:H,...n})),B.map(({key:H,link:q})=>I.createElement("link",{key:H,...q})))}function RS(...i){return e=>{i.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var L_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{L_&&(window.__reactRouterVersion="7.6.1")}catch{}function CS({basename:i,children:e,window:n}){let r=I.useRef();r.current==null&&(r.current=mE({window:n,v5Compat:!0}));let o=r.current,[c,h]=I.useState({action:o.action,location:o.location}),p=I.useCallback(g=>{I.startTransition(()=>h(g))},[h]);return I.useLayoutEffect(()=>o.listen(p),[o,p]),I.createElement(iS,{basename:i,children:e,location:c.location,navigationType:c.action,navigator:o})}var V_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,P_=I.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:o,reloadDocument:c,replace:h,state:p,target:g,to:y,preventScrollReset:w,viewTransition:E,...A},B){let{basename:H}=I.useContext(Bs),q=typeof y=="string"&&V_.test(y),Q,$=!1;if(typeof y=="string"&&q&&(Q=y,L_))try{let C=new URL(window.location.href),L=y.startsWith("//")?new URL(C.protocol+y):new URL(y),j=br(L.pathname,H);L.origin===C.origin&&j!=null?y=j+L.search+L.hash:$=!0}catch{ls(!1,`<Link to="${y}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let Y=zE(y,{relative:o}),[z,ge,ee]=ES(r,A),me=DS(y,{replace:h,state:p,target:g,preventScrollReset:w,relative:o,viewTransition:E});function D(C){e&&e(C),C.defaultPrevented||me(C)}let R=I.createElement("a",{...A,...ee,href:Q||Y,onClick:$||c?e:D,ref:RS(B,ge),target:g,"data-discover":!q&&n==="render"?"true":void 0});return z&&!q?I.createElement(I.Fragment,null,R,I.createElement(SS,{page:Y})):R});P_.displayName="Link";var IS=I.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:o=!1,style:c,to:h,viewTransition:p,children:g,...y},w){let E=Hc(h,{relative:y.relative}),A=ds(),B=I.useContext($d),{navigator:H,basename:q}=I.useContext(Bs),Q=B!=null&&VS(E)&&p===!0,$=H.encodeLocation?H.encodeLocation(E).pathname:E.pathname,Y=A.pathname,z=B&&B.navigation&&B.navigation.location?B.navigation.location.pathname:null;n||(Y=Y.toLowerCase(),z=z?z.toLowerCase():null,$=$.toLowerCase()),z&&q&&(z=br(z,q)||z);const ge=$!=="/"&&$.endsWith("/")?$.length-1:$.length;let ee=Y===$||!o&&Y.startsWith($)&&Y.charAt(ge)==="/",me=z!=null&&(z===$||!o&&z.startsWith($)&&z.charAt($.length)==="/"),D={isActive:ee,isPending:me,isTransitioning:Q},R=ee?e:void 0,C;typeof r=="function"?C=r(D):C=[r,ee?"active":null,me?"pending":null,Q?"transitioning":null].filter(Boolean).join(" ");let L=typeof c=="function"?c(D):c;return I.createElement(P_,{...y,"aria-current":R,className:C,ref:w,style:L,to:h,viewTransition:p},typeof g=="function"?g(D):g)});IS.displayName="NavLink";var kS=I.forwardRef(({discover:i="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:o,state:c,method:h=gd,action:p,onSubmit:g,relative:y,preventScrollReset:w,viewTransition:E,...A},B)=>{let H=MS(),q=LS(p,{relative:y}),Q=h.toLowerCase()==="get"?"get":"post",$=typeof p=="string"&&V_.test(p),Y=z=>{if(g&&g(z),z.defaultPrevented)return;z.preventDefault();let ge=z.nativeEvent.submitter,ee=(ge==null?void 0:ge.getAttribute("formmethod"))||h;H(ge||z.currentTarget,{fetcherKey:e,method:ee,navigate:n,replace:o,state:c,relative:y,preventScrollReset:w,viewTransition:E})};return I.createElement("form",{ref:B,method:Q,action:q,onSubmit:r?g:Y,...A,"data-discover":!$&&i==="render"?"true":void 0})});kS.displayName="Form";function NS(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function U_(i){let e=I.useContext(hl);return Pt(e,NS(i)),e}function DS(i,{target:e,replace:n,state:r,preventScrollReset:o,relative:c,viewTransition:h}={}){let p=Fs(),g=ds(),y=Hc(i,{relative:c});return I.useCallback(w=>{if(cS(w,e)){w.preventDefault();let E=n!==void 0?n:Ic(g)===Ic(y);p(i,{replace:E,state:r,preventScrollReset:o,relative:c,viewTransition:h})}},[g,p,y,n,r,e,i,o,c,h])}var jS=0,OS=()=>`__${String(++jS)}__`;function MS(){let{router:i}=U_("useSubmit"),{basename:e}=I.useContext(Bs),n=JE();return I.useCallback(async(r,o={})=>{let{action:c,method:h,encType:p,formData:g,body:y}=hS(r,e);if(o.navigate===!1){let w=o.fetcherKey||OS();await i.fetch(w,n,o.action||c,{preventScrollReset:o.preventScrollReset,formData:g,body:y,formMethod:o.method||h,formEncType:o.encType||p,flushSync:o.flushSync})}else await i.navigate(o.action||c,{preventScrollReset:o.preventScrollReset,formData:g,body:y,formMethod:o.method||h,formEncType:o.encType||p,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[i,e,n])}function LS(i,{relative:e}={}){let{basename:n}=I.useContext(Bs),r=I.useContext(zs);Pt(r,"useFormAction must be used inside a RouteContext");let[o]=r.matches.slice(-1),c={...Hc(i||".",{relative:e})},h=ds();if(i==null){c.search=h.search;let p=new URLSearchParams(c.search),g=p.getAll("index");if(g.some(w=>w==="")){p.delete("index"),g.filter(E=>E).forEach(E=>p.append("index",E));let w=p.toString();c.search=w?`?${w}`:""}}return(!i||i===".")&&o.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(c.pathname=c.pathname==="/"?n:yr([n,c.pathname])),Ic(c)}function VS(i,e={}){let n=I.useContext(I_);Pt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=U_("useViewTransitionState"),o=Hc(i,{relative:e.relative});if(!n.isTransitioning)return!1;let c=br(n.currentLocation.pathname,r)||n.currentLocation.pathname,h=br(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Id(o.pathname,h)!=null||Id(o.pathname,c)!=null}[...bS];var PS=x_();const US=()=>{};var Lv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B_=function(i){const e=[];let n=0;for(let r=0;r<i.length;r++){let o=i.charCodeAt(r);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&r+1<i.length&&(i.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++r)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},BS=function(i){const e=[];let n=0,r=0;for(;n<i.length;){const o=i[n++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const c=i[n++];e[r++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=i[n++],h=i[n++],p=i[n++],g=((o&7)<<18|(c&63)<<12|(h&63)<<6|p&63)-65536;e[r++]=String.fromCharCode(55296+(g>>10)),e[r++]=String.fromCharCode(56320+(g&1023))}else{const c=i[n++],h=i[n++];e[r++]=String.fromCharCode((o&15)<<12|(c&63)<<6|h&63)}}return e.join("")},z_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<i.length;o+=3){const c=i[o],h=o+1<i.length,p=h?i[o+1]:0,g=o+2<i.length,y=g?i[o+2]:0,w=c>>2,E=(c&3)<<4|p>>4;let A=(p&15)<<2|y>>6,B=y&63;g||(B=64,h||(A=64)),r.push(n[w],n[E],n[A],n[B])}return r.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(B_(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):BS(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<i.length;){const c=n[i.charAt(o++)],p=o<i.length?n[i.charAt(o)]:0;++o;const y=o<i.length?n[i.charAt(o)]:64;++o;const E=o<i.length?n[i.charAt(o)]:64;if(++o,c==null||p==null||y==null||E==null)throw new zS;const A=c<<2|p>>4;if(r.push(A),y!==64){const B=p<<4&240|y>>2;if(r.push(B),E!==64){const H=y<<6&192|E;r.push(H)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class zS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const FS=function(i){const e=B_(i);return z_.encodeByteArray(e,!0)},kd=function(i){return FS(i).replace(/\./g,"")},F_=function(i){try{return z_.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qS=()=>HS().__FIREBASE_DEFAULTS__,GS=()=>{if(typeof process>"u"||typeof Lv>"u")return;const i=Lv.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},XS=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&F_(i[1]);return e&&JSON.parse(e)},eh=()=>{try{return US()||qS()||GS()||XS()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},H_=i=>{var e,n;return(n=(e=eh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[i]},WS=i=>{const e=H_(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},q_=()=>{var i;return(i=eh())===null||i===void 0?void 0:i.config},G_=i=>{var e;return(e=eh())===null||e===void 0?void 0:e[`_${i}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fl(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function X_(i){return(await fetch(i,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KS(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",o=i.iat||0,c=i.sub||i.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}}},i);return[kd(JSON.stringify(n)),kd(JSON.stringify(h)),""].join(".")}const bc={};function YS(){const i={prod:[],emulator:[]};for(const e of Object.keys(bc))bc[e]?i.emulator.push(e):i.prod.push(e);return i}function QS(i){let e=document.getElementById(i),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),n=!0),{created:n,element:e}}let Vv=!1;function W_(i,e){if(typeof window>"u"||typeof document>"u"||!fl(window.location.host)||bc[i]===e||bc[i]||Vv)return;bc[i]=e;function n(A){return`__firebase__banner__${A}`}const r="__firebase__banner",c=YS().prod.length>0;function h(){const A=document.getElementById(r);A&&A.remove()}function p(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function g(A,B){A.setAttribute("width","24"),A.setAttribute("id",B),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function y(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{Vv=!0,h()},A}function w(A,B){A.setAttribute("id",B),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function E(){const A=QS(r),B=n("text"),H=document.getElementById(B)||document.createElement("span"),q=n("learnmore"),Q=document.getElementById(q)||document.createElement("a"),$=n("preprendIcon"),Y=document.getElementById($)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const z=A.element;p(z),w(Q,q);const ge=y();g(Y,$),z.append(Y,H,Q,ge),document.body.appendChild(z)}c?(H.innerText="Preview backend disconnected.",Y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,H.innerText="Preview backend running in this workspace."),H.setAttribute("id",B)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function $S(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Vn())}function JS(){var i;const e=(i=eh())===null||i===void 0?void 0:i.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function eA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Z_(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function tA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function nA(){const i=Vn();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function iA(){return!JS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function K_(){try{return typeof indexedDB=="object"}catch{return!1}}function Y_(){return new Promise((i,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(r),i(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var c;e(((c=o.error)===null||c===void 0?void 0:c.message)||"")}}catch(n){e(n)}})}function sA(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rA="FirebaseError";class hs extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=rA,Object.setPrototypeOf(this,hs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ro.prototype.create)}}class ro{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},o=`${this.service}/${e}`,c=this.errors[e],h=c?aA(c,r):"Error",p=`${this.serviceName}: ${h} (${o}).`;return new hs(o,p,r)}}function aA(i,e){return i.replace(oA,(n,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const oA=/\{\$([^}]+)}/g;function lA(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function ya(i,e){if(i===e)return!0;const n=Object.keys(i),r=Object.keys(e);for(const o of n){if(!r.includes(o))return!1;const c=i[o],h=e[o];if(Pv(c)&&Pv(h)){if(!ya(c,h))return!1}else if(c!==h)return!1}for(const o of r)if(!n.includes(o))return!1;return!0}function Pv(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qc(i){const e=[];for(const[n,r]of Object.entries(i))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function fc(i){const e={};return i.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[o,c]=r.split("=");e[decodeURIComponent(o)]=decodeURIComponent(c)}}),e}function mc(i){const e=i.indexOf("?");if(!e)return"";const n=i.indexOf("#",e);return i.substring(e,n>0?n:void 0)}function cA(i,e){const n=new uA(i,e);return n.subscribe.bind(n)}class uA{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let o;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");dA(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:r},o.next===void 0&&(o.next=_m),o.error===void 0&&(o.error=_m),o.complete===void 0&&(o.complete=_m);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function dA(i,e){if(typeof i!="object"||i===null)return!1;for(const n of e)if(n in i&&typeof i[n]=="function")return!0;return!1}function _m(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hA=1e3,fA=2,mA=4*60*60*1e3,pA=.5;function Uv(i,e=hA,n=fA){const r=e*Math.pow(n,i),o=Math.round(pA*r*(Math.random()-.5)*2);return Math.min(mA,r+o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xn(i){return i&&i._delegate?i._delegate:i}class cs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Za="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new ZS;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(c){if(o)return null;throw c}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(vA(e))try{this.getOrInitializeService({instanceIdentifier:Za})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:o});r.resolve(c)}catch{}}}}clearInstance(e=Za){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Za){return this.instances.has(e)}getOptions(e=Za){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[c,h]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(c);r===p&&h.resolve(o)}return o}onInit(e,n){var r;const o=this.normalizeInstanceIdentifier(n),c=(r=this.onInitCallbacks.get(o))!==null&&r!==void 0?r:new Set;c.add(e),this.onInitCallbacks.set(o,c);const h=this.instances.get(o);return h&&e(h,o),()=>{c.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const o of r)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:yA(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Za){return this.component?this.component.multipleInstances?e:Za:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function yA(i){return i===Za?void 0:i}function vA(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new gA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var et;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(et||(et={}));const bA={debug:et.DEBUG,verbose:et.VERBOSE,info:et.INFO,warn:et.WARN,error:et.ERROR,silent:et.SILENT},wA=et.INFO,xA={[et.DEBUG]:"log",[et.VERBOSE]:"log",[et.INFO]:"info",[et.WARN]:"warn",[et.ERROR]:"error"},EA=(i,e,...n)=>{if(e<i.logLevel)return;const r=new Date().toISOString(),o=xA[e];if(o)console[o](`[${r}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class th{constructor(e){this.name=e,this._logLevel=wA,this._logHandler=EA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in et))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?bA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,et.DEBUG,...e),this._logHandler(this,et.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,et.VERBOSE,...e),this._logHandler(this,et.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,et.INFO,...e),this._logHandler(this,et.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,et.WARN,...e),this._logHandler(this,et.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,et.ERROR,...e),this._logHandler(this,et.ERROR,...e)}}const SA=(i,e)=>e.some(n=>i instanceof n);let Bv,zv;function AA(){return Bv||(Bv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function TA(){return zv||(zv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Q_=new WeakMap,Vm=new WeakMap,$_=new WeakMap,bm=new WeakMap,pp=new WeakMap;function RA(i){const e=new Promise((n,r)=>{const o=()=>{i.removeEventListener("success",c),i.removeEventListener("error",h)},c=()=>{n(fa(i.result)),o()},h=()=>{r(i.error),o()};i.addEventListener("success",c),i.addEventListener("error",h)});return e.then(n=>{n instanceof IDBCursor&&Q_.set(n,i)}).catch(()=>{}),pp.set(e,i),e}function CA(i){if(Vm.has(i))return;const e=new Promise((n,r)=>{const o=()=>{i.removeEventListener("complete",c),i.removeEventListener("error",h),i.removeEventListener("abort",h)},c=()=>{n(),o()},h=()=>{r(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",c),i.addEventListener("error",h),i.addEventListener("abort",h)});Vm.set(i,e)}let Pm={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return Vm.get(i);if(e==="objectStoreNames")return i.objectStoreNames||$_.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return fa(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function IA(i){Pm=i(Pm)}function kA(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=i.call(wm(this),e,...n);return $_.set(r,e.sort?e.sort():[e]),fa(r)}:TA().includes(i)?function(...e){return i.apply(wm(this),e),fa(Q_.get(this))}:function(...e){return fa(i.apply(wm(this),e))}}function NA(i){return typeof i=="function"?kA(i):(i instanceof IDBTransaction&&CA(i),SA(i,AA())?new Proxy(i,Pm):i)}function fa(i){if(i instanceof IDBRequest)return RA(i);if(bm.has(i))return bm.get(i);const e=NA(i);return e!==i&&(bm.set(i,e),pp.set(e,i)),e}const wm=i=>pp.get(i);function J_(i,e,{blocked:n,upgrade:r,blocking:o,terminated:c}={}){const h=indexedDB.open(i,e),p=fa(h);return r&&h.addEventListener("upgradeneeded",g=>{r(fa(h.result),g.oldVersion,g.newVersion,fa(h.transaction),g)}),n&&h.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),p.then(g=>{c&&g.addEventListener("close",()=>c()),o&&g.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),p}const DA=["get","getKey","getAll","getAllKeys","count"],jA=["put","add","delete","clear"],xm=new Map;function Fv(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(xm.get(e))return xm.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,o=jA.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(o||DA.includes(n)))return;const c=async function(h,...p){const g=this.transaction(h,o?"readwrite":"readonly");let y=g.store;return r&&(y=y.index(p.shift())),(await Promise.all([y[n](...p),o&&g.done]))[0]};return xm.set(e,c),c}IA(i=>({...i,get:(e,n,r)=>Fv(e,n)||i.get(e,n,r),has:(e,n)=>!!Fv(e,n)||i.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(MA(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function MA(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Um="@firebase/app",Hv="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wr=new th("@firebase/app"),LA="@firebase/app-compat",VA="@firebase/analytics-compat",PA="@firebase/analytics",UA="@firebase/app-check-compat",BA="@firebase/app-check",zA="@firebase/auth",FA="@firebase/auth-compat",HA="@firebase/database",qA="@firebase/data-connect",GA="@firebase/database-compat",XA="@firebase/functions",WA="@firebase/functions-compat",ZA="@firebase/installations",KA="@firebase/installations-compat",YA="@firebase/messaging",QA="@firebase/messaging-compat",$A="@firebase/performance",JA="@firebase/performance-compat",eT="@firebase/remote-config",tT="@firebase/remote-config-compat",nT="@firebase/storage",iT="@firebase/storage-compat",sT="@firebase/firestore",rT="@firebase/ai",aT="@firebase/firestore-compat",oT="firebase",lT="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bm="[DEFAULT]",cT={[Um]:"fire-core",[LA]:"fire-core-compat",[PA]:"fire-analytics",[VA]:"fire-analytics-compat",[BA]:"fire-app-check",[UA]:"fire-app-check-compat",[zA]:"fire-auth",[FA]:"fire-auth-compat",[HA]:"fire-rtdb",[qA]:"fire-data-connect",[GA]:"fire-rtdb-compat",[XA]:"fire-fn",[WA]:"fire-fn-compat",[ZA]:"fire-iid",[KA]:"fire-iid-compat",[YA]:"fire-fcm",[QA]:"fire-fcm-compat",[$A]:"fire-perf",[JA]:"fire-perf-compat",[eT]:"fire-rc",[tT]:"fire-rc-compat",[nT]:"fire-gcs",[iT]:"fire-gcs-compat",[sT]:"fire-fst",[aT]:"fire-fst-compat",[rT]:"fire-vertex","fire-js":"fire-js",[oT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nd=new Map,uT=new Map,zm=new Map;function qv(i,e){try{i.container.addComponent(e)}catch(n){wr.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function Vs(i){const e=i.name;if(zm.has(e))return wr.debug(`There were multiple attempts to register component ${e}.`),!1;zm.set(e,i);for(const n of Nd.values())qv(n,i);for(const n of uT.values())qv(n,i);return!0}function ao(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}function Bi(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ma=new ro("app","Firebase",dT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new cs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ma.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ml=lT;function eb(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Bm,automaticDataCollectionEnabled:!0},e),o=r.name;if(typeof o!="string"||!o)throw ma.create("bad-app-name",{appName:String(o)});if(n||(n=q_()),!n)throw ma.create("no-options");const c=Nd.get(o);if(c){if(ya(n,c.options)&&ya(r,c.config))return c;throw ma.create("duplicate-app",{appName:o})}const h=new _A(o);for(const g of zm.values())h.addComponent(g);const p=new hT(n,r,h);return Nd.set(o,p),p}function gp(i=Bm){const e=Nd.get(i);if(!e&&i===Bm&&q_())return eb();if(!e)throw ma.create("no-app",{appName:i});return e}function Hi(i,e,n){var r;let o=(r=cT[i])!==null&&r!==void 0?r:i;n&&(o+=`-${n}`);const c=o.match(/\s|\//),h=e.match(/\s|\//);if(c||h){const p=[`Unable to register library "${o}" with version "${e}":`];c&&p.push(`library name "${o}" contains illegal characters (whitespace or "/")`),c&&h&&p.push("and"),h&&p.push(`version name "${e}" contains illegal characters (whitespace or "/")`),wr.warn(p.join(" "));return}Vs(new cs(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fT="firebase-heartbeat-database",mT=1,kc="firebase-heartbeat-store";let Em=null;function tb(){return Em||(Em=J_(fT,mT,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(kc)}catch(n){console.warn(n)}}}}).catch(i=>{throw ma.create("idb-open",{originalErrorMessage:i.message})})),Em}async function pT(i){try{const n=(await tb()).transaction(kc),r=await n.objectStore(kc).get(nb(i));return await n.done,r}catch(e){if(e instanceof hs)wr.warn(e.message);else{const n=ma.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});wr.warn(n.message)}}}async function Gv(i,e){try{const r=(await tb()).transaction(kc,"readwrite");await r.objectStore(kc).put(e,nb(i)),await r.done}catch(n){if(n instanceof hs)wr.warn(n.message);else{const r=ma.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});wr.warn(r.message)}}}function nb(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gT=1024,yT=30;class vT{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new bT(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=Xv();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(h=>h.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:o}),this._heartbeatsCache.heartbeats.length>yT){const h=wT(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){wr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Xv(),{heartbeatsToSend:r,unsentEntries:o}=_T(this._heartbeatsCache.heartbeats),c=kd(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(n){return wr.warn(n),""}}}function Xv(){return new Date().toISOString().substring(0,10)}function _T(i,e=gT){const n=[];let r=i.slice();for(const o of i){const c=n.find(h=>h.agent===o.agent);if(c){if(c.dates.push(o.date),Wv(n)>e){c.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),Wv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class bT{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return K_()?Y_().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await pT(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return Gv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return Gv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function Wv(i){return kd(JSON.stringify({version:2,heartbeats:i})).length}function wT(i){if(i.length===0)return-1;let e=0,n=i[0].date;for(let r=1;r<i.length;r++)i[r].date<n&&(n=i[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xT(i){Vs(new cs("platform-logger",e=>new OA(e),"PRIVATE")),Vs(new cs("heartbeat",e=>new vT(e),"PRIVATE")),Hi(Um,Hv,i),Hi(Um,Hv,"esm2017"),Hi("fire-js","")}xT("");var ET="firebase",ST="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Hi(ET,ST,"app");const ib="@firebase/installations",yp="0.6.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sb=1e4,rb=`w:${yp}`,ab="FIS_v2",AT="https://firebaseinstallations.googleapis.com/v1",TT=60*60*1e3,RT="installations",CT="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IT={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},$a=new ro(RT,CT,IT);function ob(i){return i instanceof hs&&i.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lb({projectId:i}){return`${AT}/projects/${i}/installations`}function cb(i){return{token:i.token,requestStatus:2,expiresIn:NT(i.expiresIn),creationTime:Date.now()}}async function ub(i,e){const r=(await e.json()).error;return $a.create("request-failed",{requestName:i,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function db({apiKey:i}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":i})}function kT(i,{refreshToken:e}){const n=db(i);return n.append("Authorization",DT(e)),n}async function hb(i){const e=await i();return e.status>=500&&e.status<600?i():e}function NT(i){return Number(i.replace("s","000"))}function DT(i){return`${ab} ${i}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jT({appConfig:i,heartbeatServiceProvider:e},{fid:n}){const r=lb(i),o=db(i),c=e.getImmediate({optional:!0});if(c){const y=await c.getHeartbeatsHeader();y&&o.append("x-firebase-client",y)}const h={fid:n,authVersion:ab,appId:i.appId,sdkVersion:rb},p={method:"POST",headers:o,body:JSON.stringify(h)},g=await hb(()=>fetch(r,p));if(g.ok){const y=await g.json();return{fid:y.fid||n,registrationStatus:2,refreshToken:y.refreshToken,authToken:cb(y.authToken)}}else throw await ub("Create Installation",g)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fb(i){return new Promise(e=>{setTimeout(e,i)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OT(i){return btoa(String.fromCharCode(...i)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MT=/^[cdef][\w-]{21}$/,Fm="";function LT(){try{const i=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(i),i[0]=112+i[0]%16;const n=VT(i);return MT.test(n)?n:Fm}catch{return Fm}}function VT(i){return OT(i).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nh(i){return`${i.appName}!${i.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mb=new Map;function pb(i,e){const n=nh(i);gb(n,e),PT(n,e)}function gb(i,e){const n=mb.get(i);if(n)for(const r of n)r(e)}function PT(i,e){const n=UT();n&&n.postMessage({key:i,fid:e}),BT()}let Ka=null;function UT(){return!Ka&&"BroadcastChannel"in self&&(Ka=new BroadcastChannel("[Firebase] FID Change"),Ka.onmessage=i=>{gb(i.data.key,i.data.fid)}),Ka}function BT(){mb.size===0&&Ka&&(Ka.close(),Ka=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zT="firebase-installations-database",FT=1,Ja="firebase-installations-store";let Sm=null;function vp(){return Sm||(Sm=J_(zT,FT,{upgrade:(i,e)=>{switch(e){case 0:i.createObjectStore(Ja)}}})),Sm}async function Dd(i,e){const n=nh(i),o=(await vp()).transaction(Ja,"readwrite"),c=o.objectStore(Ja),h=await c.get(n);return await c.put(e,n),await o.done,(!h||h.fid!==e.fid)&&pb(i,e.fid),e}async function yb(i){const e=nh(i),r=(await vp()).transaction(Ja,"readwrite");await r.objectStore(Ja).delete(e),await r.done}async function ih(i,e){const n=nh(i),o=(await vp()).transaction(Ja,"readwrite"),c=o.objectStore(Ja),h=await c.get(n),p=e(h);return p===void 0?await c.delete(n):await c.put(p,n),await o.done,p&&(!h||h.fid!==p.fid)&&pb(i,p.fid),p}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _p(i){let e;const n=await ih(i.appConfig,r=>{const o=HT(r),c=qT(i,o);return e=c.registrationPromise,c.installationEntry});return n.fid===Fm?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function HT(i){const e=i||{fid:LT(),registrationStatus:0};return vb(e)}function qT(i,e){if(e.registrationStatus===0){if(!navigator.onLine){const o=Promise.reject($a.create("app-offline"));return{installationEntry:e,registrationPromise:o}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=GT(i,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:XT(i)}:{installationEntry:e}}async function GT(i,e){try{const n=await jT(i,e);return Dd(i.appConfig,n)}catch(n){throw ob(n)&&n.customData.serverCode===409?await yb(i.appConfig):await Dd(i.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function XT(i){let e=await Zv(i.appConfig);for(;e.registrationStatus===1;)await fb(100),e=await Zv(i.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await _p(i);return r||n}return e}function Zv(i){return ih(i,e=>{if(!e)throw $a.create("installation-not-found");return vb(e)})}function vb(i){return WT(i)?{fid:i.fid,registrationStatus:0}:i}function WT(i){return i.registrationStatus===1&&i.registrationTime+sb<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZT({appConfig:i,heartbeatServiceProvider:e},n){const r=KT(i,n),o=kT(i,n),c=e.getImmediate({optional:!0});if(c){const y=await c.getHeartbeatsHeader();y&&o.append("x-firebase-client",y)}const h={installation:{sdkVersion:rb,appId:i.appId}},p={method:"POST",headers:o,body:JSON.stringify(h)},g=await hb(()=>fetch(r,p));if(g.ok){const y=await g.json();return cb(y)}else throw await ub("Generate Auth Token",g)}function KT(i,{fid:e}){return`${lb(i)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bp(i,e=!1){let n;const r=await ih(i.appConfig,c=>{if(!_b(c))throw $a.create("not-registered");const h=c.authToken;if(!e&&$T(h))return c;if(h.requestStatus===1)return n=YT(i,e),c;{if(!navigator.onLine)throw $a.create("app-offline");const p=eR(c);return n=QT(i,p),p}});return n?await n:r.authToken}async function YT(i,e){let n=await Kv(i.appConfig);for(;n.authToken.requestStatus===1;)await fb(100),n=await Kv(i.appConfig);const r=n.authToken;return r.requestStatus===0?bp(i,e):r}function Kv(i){return ih(i,e=>{if(!_b(e))throw $a.create("not-registered");const n=e.authToken;return tR(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function QT(i,e){try{const n=await ZT(i,e),r=Object.assign(Object.assign({},e),{authToken:n});return await Dd(i.appConfig,r),n}catch(n){if(ob(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await yb(i.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Dd(i.appConfig,r)}throw n}}function _b(i){return i!==void 0&&i.registrationStatus===2}function $T(i){return i.requestStatus===2&&!JT(i)}function JT(i){const e=Date.now();return e<i.creationTime||i.creationTime+i.expiresIn<e+TT}function eR(i){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},i),{authToken:e})}function tR(i){return i.requestStatus===1&&i.requestTime+sb<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nR(i){const e=i,{installationEntry:n,registrationPromise:r}=await _p(e);return r?r.catch(console.error):bp(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iR(i,e=!1){const n=i;return await sR(n),(await bp(n,e)).token}async function sR(i){const{registrationPromise:e}=await _p(i);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rR(i){if(!i||!i.options)throw Am("App Configuration");if(!i.name)throw Am("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!i.options[n])throw Am(n);return{appName:i.name,projectId:i.options.projectId,apiKey:i.options.apiKey,appId:i.options.appId}}function Am(i){return $a.create("missing-app-config-values",{valueName:i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bb="installations",aR="installations-internal",oR=i=>{const e=i.getProvider("app").getImmediate(),n=rR(e),r=ao(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},lR=i=>{const e=i.getProvider("app").getImmediate(),n=ao(e,bb).getImmediate();return{getId:()=>nR(n),getToken:o=>iR(n,o)}};function cR(){Vs(new cs(bb,oR,"PUBLIC")),Vs(new cs(aR,lR,"PRIVATE"))}cR();Hi(ib,yp);Hi(ib,yp,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jd="analytics",uR="firebase_id",dR="origin",hR=60*1e3,fR="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",wp="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const li=new th("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mR={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},bi=new ro("analytics","Analytics",mR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pR(i){if(!i.startsWith(wp)){const e=bi.create("invalid-gtag-resource",{gtagURL:i});return li.warn(e.message),""}return i}function wb(i){return Promise.all(i.map(e=>e.catch(n=>n)))}function gR(i,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(i,e)),n}function yR(i,e){const n=gR("firebase-js-sdk-policy",{createScriptURL:pR}),r=document.createElement("script"),o=`${wp}?l=${i}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(o):o,r.async=!0,document.head.appendChild(r)}function vR(i){let e=[];return Array.isArray(window[i])?e=window[i]:window[i]=e,e}async function _R(i,e,n,r,o,c){const h=r[o];try{if(h)await e[h];else{const g=(await wb(n)).find(y=>y.measurementId===o);g&&await e[g.appId]}}catch(p){li.error(p)}i("config",o,c)}async function bR(i,e,n,r,o){try{let c=[];if(o&&o.send_to){let h=o.send_to;Array.isArray(h)||(h=[h]);const p=await wb(n);for(const g of h){const y=p.find(E=>E.measurementId===g),w=y&&e[y.appId];if(w)c.push(w);else{c=[];break}}}c.length===0&&(c=Object.values(e)),await Promise.all(c),i("event",r,o||{})}catch(c){li.error(c)}}function wR(i,e,n,r){async function o(c,...h){try{if(c==="event"){const[p,g]=h;await bR(i,e,n,p,g)}else if(c==="config"){const[p,g]=h;await _R(i,e,n,r,p,g)}else if(c==="consent"){const[p,g]=h;i("consent",p,g)}else if(c==="get"){const[p,g,y]=h;i("get",p,g,y)}else if(c==="set"){const[p]=h;i("set",p)}else i(c,...h)}catch(p){li.error(p)}}return o}function xR(i,e,n,r,o){let c=function(...h){window[r].push(arguments)};return window[o]&&typeof window[o]=="function"&&(c=window[o]),window[o]=wR(c,i,e,n),{gtagCore:c,wrappedGtag:window[o]}}function ER(i){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(wp)&&n.src.includes(i))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SR=30,AR=1e3;class TR{constructor(e={},n=AR){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const xb=new TR;function RR(i){return new Headers({Accept:"application/json","x-goog-api-key":i})}async function CR(i){var e;const{appId:n,apiKey:r}=i,o={method:"GET",headers:RR(r)},c=fR.replace("{app-id}",n),h=await fetch(c,o);if(h.status!==200&&h.status!==304){let p="";try{const g=await h.json();!((e=g.error)===null||e===void 0)&&e.message&&(p=g.error.message)}catch{}throw bi.create("config-fetch-failed",{httpStatus:h.status,responseMessage:p})}return h.json()}async function IR(i,e=xb,n){const{appId:r,apiKey:o,measurementId:c}=i.options;if(!r)throw bi.create("no-app-id");if(!o){if(c)return{measurementId:c,appId:r};throw bi.create("no-api-key")}const h=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},p=new DR;return setTimeout(async()=>{p.abort()},hR),Eb({appId:r,apiKey:o,measurementId:c},h,p,e)}async function Eb(i,{throttleEndTimeMillis:e,backoffCount:n},r,o=xb){var c;const{appId:h,measurementId:p}=i;try{await kR(r,e)}catch(g){if(p)return li.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${p} provided in the "measurementId" field in the local Firebase config. [${g==null?void 0:g.message}]`),{appId:h,measurementId:p};throw g}try{const g=await CR(i);return o.deleteThrottleMetadata(h),g}catch(g){const y=g;if(!NR(y)){if(o.deleteThrottleMetadata(h),p)return li.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${p} provided in the "measurementId" field in the local Firebase config. [${y==null?void 0:y.message}]`),{appId:h,measurementId:p};throw g}const w=Number((c=y==null?void 0:y.customData)===null||c===void 0?void 0:c.httpStatus)===503?Uv(n,o.intervalMillis,SR):Uv(n,o.intervalMillis),E={throttleEndTimeMillis:Date.now()+w,backoffCount:n+1};return o.setThrottleMetadata(h,E),li.debug(`Calling attemptFetch again in ${w} millis`),Eb(i,E,r,o)}}function kR(i,e){return new Promise((n,r)=>{const o=Math.max(e-Date.now(),0),c=setTimeout(n,o);i.addEventListener(()=>{clearTimeout(c),r(bi.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function NR(i){if(!(i instanceof hs)||!i.customData)return!1;const e=Number(i.customData.httpStatus);return e===429||e===500||e===503||e===504}class DR{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function jR(i,e,n,r,o){if(o&&o.global){i("event",n,r);return}else{const c=await e,h=Object.assign(Object.assign({},r),{send_to:c});i("event",n,h)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OR(){if(K_())try{await Y_()}catch(i){return li.warn(bi.create("indexeddb-unavailable",{errorInfo:i==null?void 0:i.toString()}).message),!1}else return li.warn(bi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function MR(i,e,n,r,o,c,h){var p;const g=IR(i);g.then(B=>{n[B.measurementId]=B.appId,i.options.measurementId&&B.measurementId!==i.options.measurementId&&li.warn(`The measurement ID in the local Firebase config (${i.options.measurementId}) does not match the measurement ID fetched from the server (${B.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(B=>li.error(B)),e.push(g);const y=OR().then(B=>{if(B)return r.getId()}),[w,E]=await Promise.all([g,y]);ER(c)||yR(c,w.measurementId),o("js",new Date);const A=(p=h==null?void 0:h.config)!==null&&p!==void 0?p:{};return A[dR]="firebase",A.update=!0,E!=null&&(A[uR]=E),o("config",w.measurementId,A),w.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(e){this.app=e}_delete(){return delete wc[this.app.options.appId],Promise.resolve()}}let wc={},Yv=[];const Qv={};let Tm="dataLayer",VR="gtag",$v,Sb,Jv=!1;function PR(){const i=[];if(Z_()&&i.push("This is a browser extension environment."),sA()||i.push("Cookies are not available."),i.length>0){const e=i.map((r,o)=>`(${o+1}) ${r}`).join(" "),n=bi.create("invalid-analytics-context",{errorInfo:e});li.warn(n.message)}}function UR(i,e,n){PR();const r=i.options.appId;if(!r)throw bi.create("no-app-id");if(!i.options.apiKey)if(i.options.measurementId)li.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${i.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw bi.create("no-api-key");if(wc[r]!=null)throw bi.create("already-exists",{id:r});if(!Jv){vR(Tm);const{wrappedGtag:c,gtagCore:h}=xR(wc,Yv,Qv,Tm,VR);Sb=c,$v=h,Jv=!0}return wc[r]=MR(i,Yv,Qv,e,$v,Tm,n),new LR(i)}function BR(i=gp()){i=Xn(i);const e=ao(i,jd);return e.isInitialized()?e.getImmediate():zR(i)}function zR(i,e={}){const n=ao(i,jd);if(n.isInitialized()){const o=n.getImmediate();if(ya(e,n.getOptions()))return o;throw bi.create("already-initialized")}return n.initialize({options:e})}function FR(i,e,n,r){i=Xn(i),jR(Sb,wc[i.app.options.appId],e,n,r).catch(o=>li.error(o))}const e1="@firebase/analytics",t1="0.10.17";function HR(){Vs(new cs(jd,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("installations-internal").getImmediate();return UR(r,o,n)},"PUBLIC")),Vs(new cs("analytics-internal",i,"PRIVATE")),Hi(e1,t1),Hi(e1,t1,"esm2017");function i(e){try{const n=e.getProvider(jd).getImmediate();return{logEvent:(r,o,c)=>FR(n,r,o,c)}}catch(n){throw bi.create("interop-component-reg-failed",{reason:n})}}}HR();function xp(i,e){var n={};for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&e.indexOf(r)<0&&(n[r]=i[r]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(i);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(i,r[o])&&(n[r[o]]=i[r[o]]);return n}function Ab(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const qR=Ab,Tb=new ro("auth","Firebase",Ab());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Od=new th("@firebase/auth");function GR(i,...e){Od.logLevel<=et.WARN&&Od.warn(`Auth (${ml}): ${i}`,...e)}function vd(i,...e){Od.logLevel<=et.ERROR&&Od.error(`Auth (${ml}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function us(i,...e){throw Ep(i,...e)}function Ns(i,...e){return Ep(i,...e)}function Rb(i,e,n){const r=Object.assign(Object.assign({},qR()),{[e]:n});return new ro("auth","Firebase",r).create(e,{appName:i.name})}function vr(i){return Rb(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ep(i,...e){if(typeof i!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=i.name),i._errorFactory.create(n,...r)}return Tb.create(i,...e)}function Ve(i,e,...n){if(!i)throw Ep(e,...n)}function pr(i){const e="INTERNAL ASSERTION FAILED: "+i;throw vd(e),new Error(e)}function xr(i,e){i||pr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hm(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.href)||""}function XR(){return n1()==="http:"||n1()==="https:"}function n1(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(XR()||Z_()||"connection"in navigator)?navigator.onLine:!0}function ZR(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(e,n){this.shortDelay=e,this.longDelay=n,xr(n>e,"Short delay should be less than long delay!"),this.isMobile=$S()||tA()}get(){return WR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sp(i,e){xr(i.emulator,"Emulator should always be set here");const{url:n}=i.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cb{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;pr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;pr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;pr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],QR=new Gc(3e4,6e4);function Aa(i,e){return i.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:i.tenantId}):e}async function Ta(i,e,n,r,o={}){return Ib(i,o,async()=>{let c={},h={};r&&(e==="GET"?h=r:c={body:JSON.stringify(r)});const p=qc(Object.assign({key:i.config.apiKey},h)).slice(1),g=await i._getAdditionalHeaders();g["Content-Type"]="application/json",i.languageCode&&(g["X-Firebase-Locale"]=i.languageCode);const y=Object.assign({method:e,headers:g},c);return eA()||(y.referrerPolicy="no-referrer"),i.emulatorConfig&&fl(i.emulatorConfig.host)&&(y.credentials="include"),Cb.fetch()(await kb(i,i.config.apiHost,n,p),y)})}async function Ib(i,e,n){i._canInitEmulator=!1;const r=Object.assign(Object.assign({},KR),e);try{const o=new JR(i),c=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const h=await c.json();if("needConfirmation"in h)throw ud(i,"account-exists-with-different-credential",h);if(c.ok&&!("errorMessage"in h))return h;{const p=c.ok?h.errorMessage:h.error.message,[g,y]=p.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw ud(i,"credential-already-in-use",h);if(g==="EMAIL_EXISTS")throw ud(i,"email-already-in-use",h);if(g==="USER_DISABLED")throw ud(i,"user-disabled",h);const w=r[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw Rb(i,w,y);us(i,w)}}catch(o){if(o instanceof hs)throw o;us(i,"network-request-failed",{message:String(o)})}}async function Xc(i,e,n,r,o={}){const c=await Ta(i,e,n,r,o);return"mfaPendingCredential"in c&&us(i,"multi-factor-auth-required",{_serverResponse:c}),c}async function kb(i,e,n,r){const o=`${e}${n}?${r}`,c=i,h=c.config.emulator?Sp(i.config,o):`${i.config.apiScheme}://${o}`;return YR.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(h).toString():h}function $R(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class JR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Ns(this.auth,"network-request-failed")),QR.get())})}}function ud(i,e,n){const r={appName:i.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const o=Ns(i,e,r);return o.customData._tokenResponse=n,o}function i1(i){return i!==void 0&&i.enterprise!==void 0}class eC{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return $R(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function tC(i,e){return Ta(i,"GET","/v2/recaptchaConfig",Aa(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nC(i,e){return Ta(i,"POST","/v1/accounts:delete",e)}async function Md(i,e){return Ta(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xc(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function iC(i,e=!1){const n=Xn(i),r=await n.getIdToken(e),o=Ap(r);Ve(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,h=c==null?void 0:c.sign_in_provider;return{claims:o,token:r,authTime:xc(Rm(o.auth_time)),issuedAtTime:xc(Rm(o.iat)),expirationTime:xc(Rm(o.exp)),signInProvider:h||null,signInSecondFactor:(c==null?void 0:c.sign_in_second_factor)||null}}function Rm(i){return Number(i)*1e3}function Ap(i){const[e,n,r]=i.split(".");if(e===void 0||n===void 0||r===void 0)return vd("JWT malformed, contained fewer than 3 sections"),null;try{const o=F_(n);return o?JSON.parse(o):(vd("Failed to decode base64 JWT payload"),null)}catch(o){return vd("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function s1(i){const e=Ap(i);return Ve(e,"internal-error"),Ve(typeof e.exp<"u","internal-error"),Ve(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nc(i,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof hs&&sC(r)&&i.auth.currentUser===i&&await i.auth.signOut(),r}}function sC({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const o=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=xc(this.lastLoginAt),this.creationTime=xc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ld(i){var e;const n=i.auth,r=await i.getIdToken(),o=await Nc(i,Md(n,{idToken:r}));Ve(o==null?void 0:o.users.length,n,"internal-error");const c=o.users[0];i._notifyReloadListener(c);const h=!((e=c.providerUserInfo)===null||e===void 0)&&e.length?Nb(c.providerUserInfo):[],p=oC(i.providerData,h),g=i.isAnonymous,y=!(i.email&&c.passwordHash)&&!(p!=null&&p.length),w=g?y:!1,E={uid:c.localId,displayName:c.displayName||null,photoURL:c.photoUrl||null,email:c.email||null,emailVerified:c.emailVerified||!1,phoneNumber:c.phoneNumber||null,tenantId:c.tenantId||null,providerData:p,metadata:new qm(c.createdAt,c.lastLoginAt),isAnonymous:w};Object.assign(i,E)}async function aC(i){const e=Xn(i);await Ld(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function oC(i,e){return[...i.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function Nb(i){return i.map(e=>{var{providerId:n}=e,r=xp(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lC(i,e){const n=await Ib(i,{},async()=>{const r=qc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:c}=i.config,h=await kb(i,o,"/v1/token",`key=${c}`),p=await i._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:p,body:r};return i.emulatorConfig&&fl(i.emulatorConfig.host)&&(g.credentials="include"),Cb.fetch()(h,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function cC(i,e){return Ta(i,"POST","/v2/accounts:revokeToken",Aa(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ve(e.idToken,"internal-error"),Ve(typeof e.idToken<"u","internal-error"),Ve(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):s1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ve(e.length!==0,"internal-error");const n=s1(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ve(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:o,expiresIn:c}=await lC(e,n);this.updateTokensAndExpiration(r,o,Number(c))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:o,expirationTime:c}=n,h=new il;return r&&(Ve(typeof r=="string","internal-error",{appName:e}),h.refreshToken=r),o&&(Ve(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),c&&(Ve(typeof c=="number","internal-error",{appName:e}),h.expirationTime=c),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new il,this.toJSON())}_performRefresh(){return pr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aa(i,e){Ve(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class as{constructor(e){var{uid:n,auth:r,stsTokenManager:o}=e,c=xp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new rC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=c.displayName||null,this.email=c.email||null,this.emailVerified=c.emailVerified||!1,this.phoneNumber=c.phoneNumber||null,this.photoURL=c.photoURL||null,this.isAnonymous=c.isAnonymous||!1,this.tenantId=c.tenantId||null,this.providerData=c.providerData?[...c.providerData]:[],this.metadata=new qm(c.createdAt||void 0,c.lastLoginAt||void 0)}async getIdToken(e){const n=await Nc(this,this.stsTokenManager.getToken(this.auth,e));return Ve(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return iC(this,e)}reload(){return aC(this)}_assign(e){this!==e&&(Ve(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new as(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Ve(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Ld(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Bi(this.auth.app))return Promise.reject(vr(this.auth));const e=await this.getIdToken();return await Nc(this,nC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,o,c,h,p,g,y,w;const E=(r=n.displayName)!==null&&r!==void 0?r:void 0,A=(o=n.email)!==null&&o!==void 0?o:void 0,B=(c=n.phoneNumber)!==null&&c!==void 0?c:void 0,H=(h=n.photoURL)!==null&&h!==void 0?h:void 0,q=(p=n.tenantId)!==null&&p!==void 0?p:void 0,Q=(g=n._redirectEventId)!==null&&g!==void 0?g:void 0,$=(y=n.createdAt)!==null&&y!==void 0?y:void 0,Y=(w=n.lastLoginAt)!==null&&w!==void 0?w:void 0,{uid:z,emailVerified:ge,isAnonymous:ee,providerData:me,stsTokenManager:D}=n;Ve(z&&D,e,"internal-error");const R=il.fromJSON(this.name,D);Ve(typeof z=="string",e,"internal-error"),aa(E,e.name),aa(A,e.name),Ve(typeof ge=="boolean",e,"internal-error"),Ve(typeof ee=="boolean",e,"internal-error"),aa(B,e.name),aa(H,e.name),aa(q,e.name),aa(Q,e.name),aa($,e.name),aa(Y,e.name);const C=new as({uid:z,auth:e,email:A,emailVerified:ge,displayName:E,isAnonymous:ee,photoURL:H,phoneNumber:B,tenantId:q,stsTokenManager:R,createdAt:$,lastLoginAt:Y});return me&&Array.isArray(me)&&(C.providerData=me.map(L=>Object.assign({},L))),Q&&(C._redirectEventId=Q),C}static async _fromIdTokenResponse(e,n,r=!1){const o=new il;o.updateFromServerResponse(n);const c=new as({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await Ld(c),c}static async _fromGetAccountInfoResponse(e,n,r){const o=n.users[0];Ve(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?Nb(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!(c!=null&&c.length),p=new il;p.updateFromIdToken(r);const g=new as({uid:o.localId,auth:e,stsTokenManager:p,isAnonymous:h}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new qm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(c!=null&&c.length)};return Object.assign(g,y),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r1=new Map;function gr(i){xr(i instanceof Function,"Expected a class definition");let e=r1.get(i);return e?(xr(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,r1.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Db.type="NONE";const a1=Db;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _d(i,e,n){return`firebase:${i}:${e}:${n}`}class sl{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:o,name:c}=this.auth;this.fullUserKey=_d(this.userKey,o.apiKey,c),this.fullPersistenceKey=_d("persistence",o.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Md(this.auth,{idToken:e}).catch(()=>{});return n?as._fromGetAccountInfoResponse(this.auth,n,e):null}return as._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new sl(gr(a1),e,r);const o=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let c=o[0]||gr(a1);const h=_d(r,e.config.apiKey,e.name);let p=null;for(const y of n)try{const w=await y._get(h);if(w){let E;if(typeof w=="string"){const A=await Md(e,{idToken:w}).catch(()=>{});if(!A)break;E=await as._fromGetAccountInfoResponse(e,A,w)}else E=as._fromJSON(e,w);y!==c&&(p=E),c=y;break}}catch{}const g=o.filter(y=>y._shouldAllowMigration);return!c._shouldAllowMigration||!g.length?new sl(c,e,r):(c=g[0],p&&await c._set(h,p.toJSON()),await Promise.all(n.map(async y=>{if(y!==c)try{await y._remove(h)}catch{}})),new sl(c,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o1(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Lb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(jb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Pb(e))return"Blackberry";if(Ub(e))return"Webos";if(Ob(e))return"Safari";if((e.includes("chrome/")||Mb(e))&&!e.includes("edge/"))return"Chrome";if(Vb(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=i.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function jb(i=Vn()){return/firefox\//i.test(i)}function Ob(i=Vn()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Mb(i=Vn()){return/crios\//i.test(i)}function Lb(i=Vn()){return/iemobile/i.test(i)}function Vb(i=Vn()){return/android/i.test(i)}function Pb(i=Vn()){return/blackberry/i.test(i)}function Ub(i=Vn()){return/webos/i.test(i)}function Tp(i=Vn()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function uC(i=Vn()){var e;return Tp(i)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function dC(){return nA()&&document.documentMode===10}function Bb(i=Vn()){return Tp(i)||Vb(i)||Ub(i)||Pb(i)||/windows phone/i.test(i)||Lb(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zb(i,e=[]){let n;switch(i){case"Browser":n=o1(Vn());break;case"Worker":n=`${o1(Vn())}-${i}`;break;default:n=i}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ml}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=c=>new Promise((h,p)=>{try{const g=e(c);h(g)}catch(g){p(g)}});r.onAbort=n,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fC(i,e={}){return Ta(i,"GET","/v2/passwordPolicy",Aa(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mC=6;class pC{constructor(e){var n,r,o,c;const h=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=h.minPasswordLength)!==null&&n!==void 0?n:mC,h.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=h.maxPasswordLength),h.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=h.containsLowercaseCharacter),h.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=h.containsUppercaseCharacter),h.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=h.containsNumericCharacter),h.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=h.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(c=e.forceUpgradeOnSignin)!==null&&c!==void 0?c:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,o,c,h,p;const g={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,g),this.validatePasswordCharacterOptions(e,g),g.isValid&&(g.isValid=(n=g.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),g.isValid&&(g.isValid=(r=g.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),g.isValid&&(g.isValid=(o=g.containsLowercaseLetter)!==null&&o!==void 0?o:!0),g.isValid&&(g.isValid=(c=g.containsUppercaseLetter)!==null&&c!==void 0?c:!0),g.isValid&&(g.isValid=(h=g.containsNumericCharacter)!==null&&h!==void 0?h:!0),g.isValid&&(g.isValid=(p=g.containsNonAlphanumericCharacter)!==null&&p!==void 0?p:!0),g}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,o,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(e,n,r,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new l1(this),this.idTokenSubscription=new l1(this),this.beforeStateQueue=new hC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Tb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=gr(n)),this._initializationPromise=this.queue(async()=>{var r,o,c;if(!this._deleted&&(this.persistenceManager=await sl.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((c=this.currentUser)===null||c===void 0?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Md(this,{idToken:e}),r=await as._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Bi(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(p=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(p,p))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let o=r,c=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,p=o==null?void 0:o._redirectEventId,g=await this.tryRedirectSignIn(e);(!h||h===p)&&(g!=null&&g.user)&&(o=g.user,c=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(c)try{await this.beforeStateQueue.runMiddleware(o)}catch(h){o=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Ve(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ld(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=ZR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Bi(this.app))return Promise.reject(vr(this));const n=e?Xn(e):null;return n&&Ve(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ve(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Bi(this.app)?Promise.reject(vr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Bi(this.app)?Promise.reject(vr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(gr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await fC(this),n=new pC(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ro("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await cC(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&gr(e)||this._popupRedirectResolver;Ve(n,this,"argument-error"),this.redirectPersistenceManager=await sl.create(this,[gr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,o){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let h=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ve(p,this,"internal-error"),p.then(()=>{h||c(this.currentUser)}),typeof n=="function"){const g=e.addObserver(n,r,o);return()=>{h=!0,g()}}else{const g=e.addObserver(n);return()=>{h=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ve(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=zb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const o=await this._getAppCheckToken();return o&&(n["X-Firebase-AppCheck"]=o),n}async _getAppCheckToken(){var e;if(Bi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&GR(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function oo(i){return Xn(i)}class l1{constructor(e){this.auth=e,this.observer=null,this.addObserver=cA(n=>this.observer=n)}get next(){return Ve(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function yC(i){sh=i}function Fb(i){return sh.loadJS(i)}function vC(){return sh.recaptchaEnterpriseScript}function _C(){return sh.gapiScript}function bC(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class wC{constructor(){this.enterprise=new xC}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class xC{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const EC="recaptcha-enterprise",Hb="NO_RECAPTCHA";class SC{constructor(e){this.type=EC,this.auth=oo(e)}async verify(e="verify",n=!1){async function r(c){if(!n){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(h,p)=>{tC(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const y=new eC(g);return c.tenantId==null?c._agentRecaptchaConfig=y:c._tenantRecaptchaConfigs[c.tenantId]=y,h(y.siteKey)}}).catch(g=>{p(g)})})}function o(c,h,p){const g=window.grecaptcha;i1(g)?g.enterprise.ready(()=>{g.enterprise.execute(c,{action:e}).then(y=>{h(y)}).catch(()=>{h(Hb)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new wC().execute("siteKey",{action:"verify"}):new Promise((c,h)=>{r(this.auth).then(p=>{if(!n&&i1(window.grecaptcha))o(p,c,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let g=vC();g.length!==0&&(g+=p),Fb(g).then(()=>{o(p,c,h)}).catch(y=>{h(y)})}}).catch(p=>{h(p)})})}}async function c1(i,e,n,r=!1,o=!1){const c=new SC(i);let h;if(o)h=Hb;else try{h=await c.verify(n)}catch{h=await c.verify(n,!0)}const p=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const g=p.phoneEnrollmentInfo.phoneNumber,y=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:y,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const g=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return r?Object.assign(p,{captchaResp:h}):Object.assign(p,{captchaResponse:h}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function Gm(i,e,n,r,o){var c;if(!((c=i._getRecaptchaConfig())===null||c===void 0)&&c.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const h=await c1(i,e,n,n==="getOobCode");return r(i,h)}else return r(i,e).catch(async h=>{if(h.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const p=await c1(i,e,n,n==="getOobCode");return r(i,p)}else return Promise.reject(h)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AC(i,e){const n=ao(i,"auth");if(n.isInitialized()){const o=n.getImmediate(),c=n.getOptions();if(ya(c,e??{}))return o;us(o,"already-initialized")}return n.initialize({options:e})}function TC(i,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(gr);e!=null&&e.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function RC(i,e,n){const r=oo(i);Ve(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,c=qb(e),{host:h,port:p}=CC(e),g=p===null?"":`:${p}`,y={url:`${c}//${h}${g}/`},w=Object.freeze({host:h,port:p,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){Ve(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ve(ya(y,r.config.emulator)&&ya(w,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=y,r.emulatorConfig=w,r.settings.appVerificationDisabledForTesting=!0,fl(h)?(X_(`${c}//${h}${g}`),W_("Auth",!0)):IC()}function qb(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function CC(i){const e=qb(i),n=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const c=o[1];return{host:c,port:u1(r.substr(c.length+1))}}else{const[c,h]=r.split(":");return{host:c,port:u1(h)}}}function u1(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function IC(){function i(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return pr("not implemented")}_getIdTokenResponse(e){return pr("not implemented")}_linkToIdToken(e,n){return pr("not implemented")}_getReauthenticationResolver(e){return pr("not implemented")}}async function kC(i,e){return Ta(i,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NC(i,e){return Xc(i,"POST","/v1/accounts:signInWithPassword",Aa(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DC(i,e){return Xc(i,"POST","/v1/accounts:signInWithEmailLink",Aa(i,e))}async function jC(i,e){return Xc(i,"POST","/v1/accounts:signInWithEmailLink",Aa(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc extends Rp{constructor(e,n,r,o=null){super("password",r),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new Dc(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Dc(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Gm(e,n,"signInWithPassword",NC);case"emailLink":return DC(e,{email:this._email,oobCode:this._password});default:us(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Gm(e,r,"signUpPassword",kC);case"emailLink":return jC(e,{idToken:n,email:this._email,oobCode:this._password});default:us(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rl(i,e){return Xc(i,"POST","/v1/accounts:signInWithIdp",Aa(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC="http://localhost";class eo extends Rp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new eo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):us("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o}=n,c=xp(n,["providerId","signInMethod"]);if(!r||!o)return null;const h=new eo(r,o);return h.idToken=c.idToken||void 0,h.accessToken=c.accessToken||void 0,h.secret=c.secret,h.nonce=c.nonce,h.pendingToken=c.pendingToken||null,h}_getIdTokenResponse(e){const n=this.buildRequest();return rl(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,rl(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,rl(e,n)}buildRequest(){const e={requestUri:OC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=qc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MC(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function LC(i){const e=fc(mc(i)).link,n=e?fc(mc(e)).deep_link_id:null,r=fc(mc(i)).deep_link_id;return(r?fc(mc(r)).link:null)||r||n||e||i}class Cp{constructor(e){var n,r,o,c,h,p;const g=fc(mc(e)),y=(n=g.apiKey)!==null&&n!==void 0?n:null,w=(r=g.oobCode)!==null&&r!==void 0?r:null,E=MC((o=g.mode)!==null&&o!==void 0?o:null);Ve(y&&w&&E,"argument-error"),this.apiKey=y,this.operation=E,this.code=w,this.continueUrl=(c=g.continueUrl)!==null&&c!==void 0?c:null,this.languageCode=(h=g.lang)!==null&&h!==void 0?h:null,this.tenantId=(p=g.tenantId)!==null&&p!==void 0?p:null}static parseLink(e){const n=LC(e);try{return new Cp(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(){this.providerId=pl.PROVIDER_ID}static credential(e,n){return Dc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Cp.parseLink(n);return Ve(r,"argument-error"),Dc._fromEmailAndCode(e,r.code,r.tenantId)}}pl.PROVIDER_ID="password";pl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";pl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc extends Gb{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la extends Wc{constructor(){super("facebook.com")}static credential(e){return eo._fromParams({providerId:la.PROVIDER_ID,signInMethod:la.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return la.credentialFromTaggedObject(e)}static credentialFromError(e){return la.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return la.credential(e.oauthAccessToken)}catch{return null}}}la.FACEBOOK_SIGN_IN_METHOD="facebook.com";la.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca extends Wc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return eo._fromParams({providerId:ca.PROVIDER_ID,signInMethod:ca.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ca.credentialFromTaggedObject(e)}static credentialFromError(e){return ca.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ca.credential(n,r)}catch{return null}}}ca.GOOGLE_SIGN_IN_METHOD="google.com";ca.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua extends Wc{constructor(){super("github.com")}static credential(e){return eo._fromParams({providerId:ua.PROVIDER_ID,signInMethod:ua.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ua.credentialFromTaggedObject(e)}static credentialFromError(e){return ua.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ua.credential(e.oauthAccessToken)}catch{return null}}}ua.GITHUB_SIGN_IN_METHOD="github.com";ua.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da extends Wc{constructor(){super("twitter.com")}static credential(e,n){return eo._fromParams({providerId:da.PROVIDER_ID,signInMethod:da.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return da.credentialFromTaggedObject(e)}static credentialFromError(e){return da.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return da.credential(n,r)}catch{return null}}}da.TWITTER_SIGN_IN_METHOD="twitter.com";da.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VC(i,e){return Xc(i,"POST","/v1/accounts:signUp",Aa(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,o=!1){const c=await as._fromIdTokenResponse(e,r,o),h=d1(r);return new to({user:c,providerId:h,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const o=d1(r);return new to({user:e,providerId:o,_tokenResponse:r,operationType:n})}}function d1(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd extends hs{constructor(e,n,r,o){var c;super(n.code,n.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,Vd.prototype),this.customData={appName:e.name,tenantId:(c=e.tenantId)!==null&&c!==void 0?c:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,o){return new Vd(e,n,r,o)}}function Xb(i,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(i):n._getIdTokenResponse(i)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Vd._fromErrorAndOperation(i,c,e,r):c})}async function PC(i,e,n=!1){const r=await Nc(i,e._linkToIdToken(i.auth,await i.getIdToken()),n);return to._forOperation(i,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UC(i,e,n=!1){const{auth:r}=i;if(Bi(r.app))return Promise.reject(vr(r));const o="reauthenticate";try{const c=await Nc(i,Xb(r,o,e,i),n);Ve(c.idToken,r,"internal-error");const h=Ap(c.idToken);Ve(h,r,"internal-error");const{sub:p}=h;return Ve(i.uid===p,r,"user-mismatch"),to._forOperation(i,o,c)}catch(c){throw(c==null?void 0:c.code)==="auth/user-not-found"&&us(r,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wb(i,e,n=!1){if(Bi(i.app))return Promise.reject(vr(i));const r="signIn",o=await Xb(i,r,e),c=await to._fromIdTokenResponse(i,r,o);return n||await i._updateCurrentUser(c.user),c}async function BC(i,e){return Wb(oo(i),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zb(i){const e=oo(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function zC(i,e,n){if(Bi(i.app))return Promise.reject(vr(i));const r=oo(i),h=await Gm(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",VC).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&Zb(i),g}),p=await to._fromIdTokenResponse(r,"signIn",h);return await r._updateCurrentUser(p.user),p}function FC(i,e,n){return Bi(i.app)?Promise.reject(vr(i)):BC(Xn(i),pl.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Zb(i),r})}function HC(i,e,n,r){return Xn(i).onIdTokenChanged(e,n,r)}function qC(i,e,n){return Xn(i).beforeAuthStateChanged(e,n)}function Ip(i,e,n,r){return Xn(i).onAuthStateChanged(e,n,r)}function GC(i){return Xn(i).signOut()}const Pd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Pd,"1"),this.storage.removeItem(Pd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XC=1e3,WC=10;class Yb extends Kb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Bb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),o=this.localCache[n];r!==o&&e(n,o,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((h,p,g)=>{this.notifyListeners(h,g)});return}const r=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(r);!n&&this.localCache[r]===h||this.notifyListeners(r,h)},c=this.storage.getItem(r);dC()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,WC):o()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},XC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Yb.type="LOCAL";const ZC=Yb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb extends Kb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Qb.type="SESSION";const $b=Qb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KC(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const r=new rh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:o,data:c}=n.data,h=this.handlersMap[o];if(!(h!=null&&h.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const p=Array.from(h).map(async y=>y(n.origin,c)),g=await KC(p);n.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:g})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}rh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kp(i="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return i+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,h;return new Promise((p,g)=>{const y=kp("",20);o.port1.start();const w=setTimeout(()=>{g(new Error("unsupported_event"))},r);h={messageChannel:o,onMessage(E){const A=E;if(A.data.eventId===y)switch(A.data.status){case"ack":clearTimeout(w),c=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),p(A.data.response);break;default:clearTimeout(w),clearTimeout(c),g(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:y,data:n},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ds(){return window}function QC(i){Ds().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jb(){return typeof Ds().WorkerGlobalScope<"u"&&typeof Ds().importScripts=="function"}async function $C(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function JC(){var i;return((i=navigator==null?void 0:navigator.serviceWorker)===null||i===void 0?void 0:i.controller)||null}function eI(){return Jb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ew="firebaseLocalStorageDb",tI=1,Ud="firebaseLocalStorage",tw="fbase_key";class Zc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function ah(i,e){return i.transaction([Ud],e?"readwrite":"readonly").objectStore(Ud)}function nI(){const i=indexedDB.deleteDatabase(ew);return new Zc(i).toPromise()}function Xm(){const i=indexedDB.open(ew,tI);return new Promise((e,n)=>{i.addEventListener("error",()=>{n(i.error)}),i.addEventListener("upgradeneeded",()=>{const r=i.result;try{r.createObjectStore(Ud,{keyPath:tw})}catch(o){n(o)}}),i.addEventListener("success",async()=>{const r=i.result;r.objectStoreNames.contains(Ud)?e(r):(r.close(),await nI(),e(await Xm()))})})}async function h1(i,e,n){const r=ah(i,!0).put({[tw]:e,value:n});return new Zc(r).toPromise()}async function iI(i,e){const n=ah(i,!1).get(e),r=await new Zc(n).toPromise();return r===void 0?null:r.value}function f1(i,e){const n=ah(i,!0).delete(e);return new Zc(n).toPromise()}const sI=800,rI=3;class nw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Xm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>rI)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Jb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=rh._getInstance(eI()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await $C(),!this.activeServiceWorker)return;this.sender=new YC(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||JC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Xm();return await h1(e,Pd,"1"),await f1(e,Pd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>h1(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>iI(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>f1(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const c=ah(o,!1).getAll();return new Zc(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:c}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),sI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}nw.type="LOCAL";const aI=nw;new Gc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oI(i,e){return e?gr(e):(Ve(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np extends Rp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return rl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return rl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return rl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function lI(i){return Wb(i.auth,new Np(i),i.bypassAuthState)}function cI(i){const{auth:e,user:n}=i;return Ve(n,e,"internal-error"),UC(n,new Np(i),i.bypassAuthState)}async function uI(i){const{auth:e,user:n}=i;return Ve(n,e,"internal-error"),PC(n,new Np(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iw{constructor(e,n,r,o,c=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:o,tenantId:c,error:h,type:p}=e;if(h){this.reject(h);return}const g={auth:this.auth,requestUri:n,sessionId:r,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return lI;case"linkViaPopup":case"linkViaRedirect":return uI;case"reauthViaPopup":case"reauthViaRedirect":return cI;default:us(this.auth,"internal-error")}}resolve(e){xr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){xr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dI=new Gc(2e3,1e4);class nl extends iw{constructor(e,n,r,o,c){super(e,n,o,c),this.provider=r,this.authWindow=null,this.pollId=null,nl.currentPopupAction&&nl.currentPopupAction.cancel(),nl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ve(e,this.auth,"internal-error"),e}async onExecution(){xr(this.filter.length===1,"Popup operations only handle one event");const e=kp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ns(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ns(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,nl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ns(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,dI.get())};e()}}nl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hI="pendingRedirect",bd=new Map;class fI extends iw{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=bd.get(this.auth._key());if(!e){try{const r=await mI(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}bd.set(this.auth._key(),e)}return this.bypassAuthState||bd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function mI(i,e){const n=yI(e),r=gI(i);if(!await r._isAvailable())return!1;const o=await r._get(n)==="true";return await r._remove(n),o}function pI(i,e){bd.set(i._key(),e)}function gI(i){return gr(i._redirectPersistence)}function yI(i){return _d(hI,i.config.apiKey,i.name)}async function vI(i,e,n=!1){if(Bi(i.app))return Promise.reject(vr(i));const r=oo(i),o=oI(r,e),h=await new fI(r,o,n).execute();return h&&!n&&(delete h.user._redirectEventId,await r._persistUserIfCurrent(h.user),await r._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _I=10*60*1e3;class bI{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!wI(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!sw(e)){const o=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Ns(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=_I&&this.cachedEventUids.clear(),this.cachedEventUids.has(m1(e))}saveEventToCache(e){this.cachedEventUids.add(m1(e)),this.lastProcessedEventTime=Date.now()}}function m1(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function sw({type:i,error:e}){return i==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function wI(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return sw(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xI(i,e={}){return Ta(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,SI=/^https?/;async function AI(i){if(i.config.emulator)return;const{authorizedDomains:e}=await xI(i);for(const n of e)try{if(TI(n))return}catch{}us(i,"unauthorized-domain")}function TI(i){const e=Hm(),{protocol:n,hostname:r}=new URL(e);if(i.startsWith("chrome-extension://")){const h=new URL(i);return h.hostname===""&&r===""?n==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&h.hostname===r}if(!SI.test(n))return!1;if(EI.test(i))return r===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RI=new Gc(3e4,6e4);function p1(){const i=Ds().___jsl;if(i!=null&&i.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let n=0;n<i.CP.length;n++)i.CP[n]=null}}function CI(i){return new Promise((e,n)=>{var r,o,c;function h(){p1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{p1(),n(Ns(i,"network-request-failed"))},timeout:RI.get()})}if(!((o=(r=Ds().gapi)===null||r===void 0?void 0:r.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((c=Ds().gapi)===null||c===void 0)&&c.load)h();else{const p=bC("iframefcb");return Ds()[p]=()=>{gapi.load?h():n(Ns(i,"network-request-failed"))},Fb(`${_C()}?onload=${p}`).catch(g=>n(g))}}).catch(e=>{throw wd=null,e})}let wd=null;function II(i){return wd=wd||CI(i),wd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kI=new Gc(5e3,15e3),NI="__/auth/iframe",DI="emulator/auth/iframe",jI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},OI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function MI(i){const e=i.config;Ve(e.authDomain,i,"auth-domain-config-required");const n=e.emulator?Sp(e,DI):`https://${i.config.authDomain}/${NI}`,r={apiKey:e.apiKey,appName:i.name,v:ml},o=OI.get(i.config.apiHost);o&&(r.eid=o);const c=i._getFrameworks();return c.length&&(r.fw=c.join(",")),`${n}?${qc(r).slice(1)}`}async function LI(i){const e=await II(i),n=Ds().gapi;return Ve(n,i,"internal-error"),e.open({where:document.body,url:MI(i),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:jI,dontclear:!0},r=>new Promise(async(o,c)=>{await r.restyle({setHideOnLeave:!1});const h=Ns(i,"network-request-failed"),p=Ds().setTimeout(()=>{c(h)},kI.get());function g(){Ds().clearTimeout(p),o(r)}r.ping(g).then(g,()=>{c(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},PI=500,UI=600,BI="_blank",zI="http://localhost";class g1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function FI(i,e,n,r=PI,o=UI){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-r)/2,0).toString();let p="";const g=Object.assign(Object.assign({},VI),{width:r.toString(),height:o.toString(),top:c,left:h}),y=Vn().toLowerCase();n&&(p=Mb(y)?BI:n),jb(y)&&(e=e||zI,g.scrollbars="yes");const w=Object.entries(g).reduce((A,[B,H])=>`${A}${B}=${H},`,"");if(uC(y)&&p!=="_self")return HI(e||"",p),new g1(null);const E=window.open(e||"",p,w);Ve(E,i,"popup-blocked");try{E.focus()}catch{}return new g1(E)}function HI(i,e){const n=document.createElement("a");n.href=i,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qI="__/auth/handler",GI="emulator/auth/handler",XI=encodeURIComponent("fac");async function y1(i,e,n,r,o,c){Ve(i.config.authDomain,i,"auth-domain-config-required"),Ve(i.config.apiKey,i,"invalid-api-key");const h={apiKey:i.config.apiKey,appName:i.name,authType:n,redirectUrl:r,v:ml,eventId:o};if(e instanceof Gb){e.setDefaultLanguage(i.languageCode),h.providerId=e.providerId||"",lA(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[w,E]of Object.entries({}))h[w]=E}if(e instanceof Wc){const w=e.getScopes().filter(E=>E!=="");w.length>0&&(h.scopes=w.join(","))}i.tenantId&&(h.tid=i.tenantId);const p=h;for(const w of Object.keys(p))p[w]===void 0&&delete p[w];const g=await i._getAppCheckToken(),y=g?`#${XI}=${encodeURIComponent(g)}`:"";return`${WI(i)}?${qc(p).slice(1)}${y}`}function WI({config:i}){return i.emulator?Sp(i,GI):`https://${i.authDomain}/${qI}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cm="webStorageSupport";class ZI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=$b,this._completeRedirectFn=vI,this._overrideRedirectResult=pI}async _openPopup(e,n,r,o){var c;xr((c=this.eventManagers[e._key()])===null||c===void 0?void 0:c.manager,"_initialize() not called before _openPopup()");const h=await y1(e,n,r,Hm(),o);return FI(e,h,kp())}async _openRedirect(e,n,r,o){await this._originValidation(e);const c=await y1(e,n,r,Hm(),o);return QC(c),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:c}=this.eventManagers[n];return o?Promise.resolve(o):(xr(c,"If manager is not set, promise should be"),c)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await LI(e),r=new bI(e);return n.register("authEvent",o=>(Ve(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Cm,{type:Cm},o=>{var c;const h=(c=o==null?void 0:o[0])===null||c===void 0?void 0:c[Cm];h!==void 0&&n(!!h),us(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=AI(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Bb()||Ob()||Tp()}}const KI=ZI;var v1="@firebase/auth",_1="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ve(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QI(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function $I(i){Vs(new cs("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:h,authDomain:p}=r.options;Ve(h&&!h.includes(":"),"invalid-api-key",{appName:r.name});const g={apiKey:h,authDomain:p,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:zb(i)},y=new gC(r,o,c,g);return TC(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Vs(new cs("auth-internal",e=>{const n=oo(e.getProvider("auth").getImmediate());return(r=>new YI(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Hi(v1,_1,QI(i)),Hi(v1,_1,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JI=5*60,e5=G_("authIdTokenMaxAge")||JI;let b1=null;const t5=i=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>e5)return;const o=n==null?void 0:n.token;b1!==o&&(b1=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function n5(i=gp()){const e=ao(i,"auth");if(e.isInitialized())return e.getImmediate();const n=AC(i,{popupRedirectResolver:KI,persistence:[aI,ZC,$b]}),r=G_("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(r,location.origin);if(location.origin===c.origin){const h=t5(c.toString());qC(n,h,()=>h(n.currentUser)),HC(n,p=>h(p))}}const o=H_("auth");return o&&RC(n,`http://${o}`),n}function i5(){var i,e;return(e=(i=document.getElementsByTagName("head"))===null||i===void 0?void 0:i[0])!==null&&e!==void 0?e:document}yC({loadJS(i){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",i),r.onload=e,r.onerror=o=>{const c=Ns("internal-error");c.customData=o,n(c)},r.type="text/javascript",r.charset="UTF-8",i5().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});$I("Browser");var w1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var pa,rw;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,R){function C(){}C.prototype=R.prototype,D.D=R.prototype,D.prototype=new C,D.prototype.constructor=D,D.C=function(L,j,P){for(var N=Array(arguments.length-2),qe=2;qe<arguments.length;qe++)N[qe-2]=arguments[qe];return R.prototype[j].apply(L,N)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(D,R,C){C||(C=0);var L=Array(16);if(typeof R=="string")for(var j=0;16>j;++j)L[j]=R.charCodeAt(C++)|R.charCodeAt(C++)<<8|R.charCodeAt(C++)<<16|R.charCodeAt(C++)<<24;else for(j=0;16>j;++j)L[j]=R[C++]|R[C++]<<8|R[C++]<<16|R[C++]<<24;R=D.g[0],C=D.g[1],j=D.g[2];var P=D.g[3],N=R+(P^C&(j^P))+L[0]+3614090360&4294967295;R=C+(N<<7&4294967295|N>>>25),N=P+(j^R&(C^j))+L[1]+3905402710&4294967295,P=R+(N<<12&4294967295|N>>>20),N=j+(C^P&(R^C))+L[2]+606105819&4294967295,j=P+(N<<17&4294967295|N>>>15),N=C+(R^j&(P^R))+L[3]+3250441966&4294967295,C=j+(N<<22&4294967295|N>>>10),N=R+(P^C&(j^P))+L[4]+4118548399&4294967295,R=C+(N<<7&4294967295|N>>>25),N=P+(j^R&(C^j))+L[5]+1200080426&4294967295,P=R+(N<<12&4294967295|N>>>20),N=j+(C^P&(R^C))+L[6]+2821735955&4294967295,j=P+(N<<17&4294967295|N>>>15),N=C+(R^j&(P^R))+L[7]+4249261313&4294967295,C=j+(N<<22&4294967295|N>>>10),N=R+(P^C&(j^P))+L[8]+1770035416&4294967295,R=C+(N<<7&4294967295|N>>>25),N=P+(j^R&(C^j))+L[9]+2336552879&4294967295,P=R+(N<<12&4294967295|N>>>20),N=j+(C^P&(R^C))+L[10]+4294925233&4294967295,j=P+(N<<17&4294967295|N>>>15),N=C+(R^j&(P^R))+L[11]+2304563134&4294967295,C=j+(N<<22&4294967295|N>>>10),N=R+(P^C&(j^P))+L[12]+1804603682&4294967295,R=C+(N<<7&4294967295|N>>>25),N=P+(j^R&(C^j))+L[13]+4254626195&4294967295,P=R+(N<<12&4294967295|N>>>20),N=j+(C^P&(R^C))+L[14]+2792965006&4294967295,j=P+(N<<17&4294967295|N>>>15),N=C+(R^j&(P^R))+L[15]+1236535329&4294967295,C=j+(N<<22&4294967295|N>>>10),N=R+(j^P&(C^j))+L[1]+4129170786&4294967295,R=C+(N<<5&4294967295|N>>>27),N=P+(C^j&(R^C))+L[6]+3225465664&4294967295,P=R+(N<<9&4294967295|N>>>23),N=j+(R^C&(P^R))+L[11]+643717713&4294967295,j=P+(N<<14&4294967295|N>>>18),N=C+(P^R&(j^P))+L[0]+3921069994&4294967295,C=j+(N<<20&4294967295|N>>>12),N=R+(j^P&(C^j))+L[5]+3593408605&4294967295,R=C+(N<<5&4294967295|N>>>27),N=P+(C^j&(R^C))+L[10]+38016083&4294967295,P=R+(N<<9&4294967295|N>>>23),N=j+(R^C&(P^R))+L[15]+3634488961&4294967295,j=P+(N<<14&4294967295|N>>>18),N=C+(P^R&(j^P))+L[4]+3889429448&4294967295,C=j+(N<<20&4294967295|N>>>12),N=R+(j^P&(C^j))+L[9]+568446438&4294967295,R=C+(N<<5&4294967295|N>>>27),N=P+(C^j&(R^C))+L[14]+3275163606&4294967295,P=R+(N<<9&4294967295|N>>>23),N=j+(R^C&(P^R))+L[3]+4107603335&4294967295,j=P+(N<<14&4294967295|N>>>18),N=C+(P^R&(j^P))+L[8]+1163531501&4294967295,C=j+(N<<20&4294967295|N>>>12),N=R+(j^P&(C^j))+L[13]+2850285829&4294967295,R=C+(N<<5&4294967295|N>>>27),N=P+(C^j&(R^C))+L[2]+4243563512&4294967295,P=R+(N<<9&4294967295|N>>>23),N=j+(R^C&(P^R))+L[7]+1735328473&4294967295,j=P+(N<<14&4294967295|N>>>18),N=C+(P^R&(j^P))+L[12]+2368359562&4294967295,C=j+(N<<20&4294967295|N>>>12),N=R+(C^j^P)+L[5]+4294588738&4294967295,R=C+(N<<4&4294967295|N>>>28),N=P+(R^C^j)+L[8]+2272392833&4294967295,P=R+(N<<11&4294967295|N>>>21),N=j+(P^R^C)+L[11]+1839030562&4294967295,j=P+(N<<16&4294967295|N>>>16),N=C+(j^P^R)+L[14]+4259657740&4294967295,C=j+(N<<23&4294967295|N>>>9),N=R+(C^j^P)+L[1]+2763975236&4294967295,R=C+(N<<4&4294967295|N>>>28),N=P+(R^C^j)+L[4]+1272893353&4294967295,P=R+(N<<11&4294967295|N>>>21),N=j+(P^R^C)+L[7]+4139469664&4294967295,j=P+(N<<16&4294967295|N>>>16),N=C+(j^P^R)+L[10]+3200236656&4294967295,C=j+(N<<23&4294967295|N>>>9),N=R+(C^j^P)+L[13]+681279174&4294967295,R=C+(N<<4&4294967295|N>>>28),N=P+(R^C^j)+L[0]+3936430074&4294967295,P=R+(N<<11&4294967295|N>>>21),N=j+(P^R^C)+L[3]+3572445317&4294967295,j=P+(N<<16&4294967295|N>>>16),N=C+(j^P^R)+L[6]+76029189&4294967295,C=j+(N<<23&4294967295|N>>>9),N=R+(C^j^P)+L[9]+3654602809&4294967295,R=C+(N<<4&4294967295|N>>>28),N=P+(R^C^j)+L[12]+3873151461&4294967295,P=R+(N<<11&4294967295|N>>>21),N=j+(P^R^C)+L[15]+530742520&4294967295,j=P+(N<<16&4294967295|N>>>16),N=C+(j^P^R)+L[2]+3299628645&4294967295,C=j+(N<<23&4294967295|N>>>9),N=R+(j^(C|~P))+L[0]+4096336452&4294967295,R=C+(N<<6&4294967295|N>>>26),N=P+(C^(R|~j))+L[7]+1126891415&4294967295,P=R+(N<<10&4294967295|N>>>22),N=j+(R^(P|~C))+L[14]+2878612391&4294967295,j=P+(N<<15&4294967295|N>>>17),N=C+(P^(j|~R))+L[5]+4237533241&4294967295,C=j+(N<<21&4294967295|N>>>11),N=R+(j^(C|~P))+L[12]+1700485571&4294967295,R=C+(N<<6&4294967295|N>>>26),N=P+(C^(R|~j))+L[3]+2399980690&4294967295,P=R+(N<<10&4294967295|N>>>22),N=j+(R^(P|~C))+L[10]+4293915773&4294967295,j=P+(N<<15&4294967295|N>>>17),N=C+(P^(j|~R))+L[1]+2240044497&4294967295,C=j+(N<<21&4294967295|N>>>11),N=R+(j^(C|~P))+L[8]+1873313359&4294967295,R=C+(N<<6&4294967295|N>>>26),N=P+(C^(R|~j))+L[15]+4264355552&4294967295,P=R+(N<<10&4294967295|N>>>22),N=j+(R^(P|~C))+L[6]+2734768916&4294967295,j=P+(N<<15&4294967295|N>>>17),N=C+(P^(j|~R))+L[13]+1309151649&4294967295,C=j+(N<<21&4294967295|N>>>11),N=R+(j^(C|~P))+L[4]+4149444226&4294967295,R=C+(N<<6&4294967295|N>>>26),N=P+(C^(R|~j))+L[11]+3174756917&4294967295,P=R+(N<<10&4294967295|N>>>22),N=j+(R^(P|~C))+L[2]+718787259&4294967295,j=P+(N<<15&4294967295|N>>>17),N=C+(P^(j|~R))+L[9]+3951481745&4294967295,D.g[0]=D.g[0]+R&4294967295,D.g[1]=D.g[1]+(j+(N<<21&4294967295|N>>>11))&4294967295,D.g[2]=D.g[2]+j&4294967295,D.g[3]=D.g[3]+P&4294967295}r.prototype.u=function(D,R){R===void 0&&(R=D.length);for(var C=R-this.blockSize,L=this.B,j=this.h,P=0;P<R;){if(j==0)for(;P<=C;)o(this,D,P),P+=this.blockSize;if(typeof D=="string"){for(;P<R;)if(L[j++]=D.charCodeAt(P++),j==this.blockSize){o(this,L),j=0;break}}else for(;P<R;)if(L[j++]=D[P++],j==this.blockSize){o(this,L),j=0;break}}this.h=j,this.o+=R},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var R=1;R<D.length-8;++R)D[R]=0;var C=8*this.o;for(R=D.length-8;R<D.length;++R)D[R]=C&255,C/=256;for(this.u(D),D=Array(16),R=C=0;4>R;++R)for(var L=0;32>L;L+=8)D[C++]=this.g[R]>>>L&255;return D};function c(D,R){var C=p;return Object.prototype.hasOwnProperty.call(C,D)?C[D]:C[D]=R(D)}function h(D,R){this.h=R;for(var C=[],L=!0,j=D.length-1;0<=j;j--){var P=D[j]|0;L&&P==R||(C[j]=P,L=!1)}this.g=C}var p={};function g(D){return-128<=D&&128>D?c(D,function(R){return new h([R|0],0>R?-1:0)}):new h([D|0],0>D?-1:0)}function y(D){if(isNaN(D)||!isFinite(D))return E;if(0>D)return Q(y(-D));for(var R=[],C=1,L=0;D>=C;L++)R[L]=D/C|0,C*=4294967296;return new h(R,0)}function w(D,R){if(D.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(D.charAt(0)=="-")return Q(w(D.substring(1),R));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=y(Math.pow(R,8)),L=E,j=0;j<D.length;j+=8){var P=Math.min(8,D.length-j),N=parseInt(D.substring(j,j+P),R);8>P?(P=y(Math.pow(R,P)),L=L.j(P).add(y(N))):(L=L.j(C),L=L.add(y(N)))}return L}var E=g(0),A=g(1),B=g(16777216);i=h.prototype,i.m=function(){if(q(this))return-Q(this).m();for(var D=0,R=1,C=0;C<this.g.length;C++){var L=this.i(C);D+=(0<=L?L:4294967296+L)*R,R*=4294967296}return D},i.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(H(this))return"0";if(q(this))return"-"+Q(this).toString(D);for(var R=y(Math.pow(D,6)),C=this,L="";;){var j=ge(C,R).g;C=$(C,j.j(R));var P=((0<C.g.length?C.g[0]:C.h)>>>0).toString(D);if(C=j,H(C))return P+L;for(;6>P.length;)P="0"+P;L=P+L}},i.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function H(D){if(D.h!=0)return!1;for(var R=0;R<D.g.length;R++)if(D.g[R]!=0)return!1;return!0}function q(D){return D.h==-1}i.l=function(D){return D=$(this,D),q(D)?-1:H(D)?0:1};function Q(D){for(var R=D.g.length,C=[],L=0;L<R;L++)C[L]=~D.g[L];return new h(C,~D.h).add(A)}i.abs=function(){return q(this)?Q(this):this},i.add=function(D){for(var R=Math.max(this.g.length,D.g.length),C=[],L=0,j=0;j<=R;j++){var P=L+(this.i(j)&65535)+(D.i(j)&65535),N=(P>>>16)+(this.i(j)>>>16)+(D.i(j)>>>16);L=N>>>16,P&=65535,N&=65535,C[j]=N<<16|P}return new h(C,C[C.length-1]&-2147483648?-1:0)};function $(D,R){return D.add(Q(R))}i.j=function(D){if(H(this)||H(D))return E;if(q(this))return q(D)?Q(this).j(Q(D)):Q(Q(this).j(D));if(q(D))return Q(this.j(Q(D)));if(0>this.l(B)&&0>D.l(B))return y(this.m()*D.m());for(var R=this.g.length+D.g.length,C=[],L=0;L<2*R;L++)C[L]=0;for(L=0;L<this.g.length;L++)for(var j=0;j<D.g.length;j++){var P=this.i(L)>>>16,N=this.i(L)&65535,qe=D.i(j)>>>16,Je=D.i(j)&65535;C[2*L+2*j]+=N*Je,Y(C,2*L+2*j),C[2*L+2*j+1]+=P*Je,Y(C,2*L+2*j+1),C[2*L+2*j+1]+=N*qe,Y(C,2*L+2*j+1),C[2*L+2*j+2]+=P*qe,Y(C,2*L+2*j+2)}for(L=0;L<R;L++)C[L]=C[2*L+1]<<16|C[2*L];for(L=R;L<2*R;L++)C[L]=0;return new h(C,0)};function Y(D,R){for(;(D[R]&65535)!=D[R];)D[R+1]+=D[R]>>>16,D[R]&=65535,R++}function z(D,R){this.g=D,this.h=R}function ge(D,R){if(H(R))throw Error("division by zero");if(H(D))return new z(E,E);if(q(D))return R=ge(Q(D),R),new z(Q(R.g),Q(R.h));if(q(R))return R=ge(D,Q(R)),new z(Q(R.g),R.h);if(30<D.g.length){if(q(D)||q(R))throw Error("slowDivide_ only works with positive integers.");for(var C=A,L=R;0>=L.l(D);)C=ee(C),L=ee(L);var j=me(C,1),P=me(L,1);for(L=me(L,2),C=me(C,2);!H(L);){var N=P.add(L);0>=N.l(D)&&(j=j.add(C),P=N),L=me(L,1),C=me(C,1)}return R=$(D,j.j(R)),new z(j,R)}for(j=E;0<=D.l(R);){for(C=Math.max(1,Math.floor(D.m()/R.m())),L=Math.ceil(Math.log(C)/Math.LN2),L=48>=L?1:Math.pow(2,L-48),P=y(C),N=P.j(R);q(N)||0<N.l(D);)C-=L,P=y(C),N=P.j(R);H(P)&&(P=A),j=j.add(P),D=$(D,N)}return new z(j,D)}i.A=function(D){return ge(this,D).h},i.and=function(D){for(var R=Math.max(this.g.length,D.g.length),C=[],L=0;L<R;L++)C[L]=this.i(L)&D.i(L);return new h(C,this.h&D.h)},i.or=function(D){for(var R=Math.max(this.g.length,D.g.length),C=[],L=0;L<R;L++)C[L]=this.i(L)|D.i(L);return new h(C,this.h|D.h)},i.xor=function(D){for(var R=Math.max(this.g.length,D.g.length),C=[],L=0;L<R;L++)C[L]=this.i(L)^D.i(L);return new h(C,this.h^D.h)};function ee(D){for(var R=D.g.length+1,C=[],L=0;L<R;L++)C[L]=D.i(L)<<1|D.i(L-1)>>>31;return new h(C,D.h)}function me(D,R){var C=R>>5;R%=32;for(var L=D.g.length-C,j=[],P=0;P<L;P++)j[P]=0<R?D.i(P+C)>>>R|D.i(P+C+1)<<32-R:D.i(P+C);return new h(j,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,rw=r,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=y,h.fromString=w,pa=h}).apply(typeof w1<"u"?w1:typeof self<"u"?self:typeof window<"u"?window:{});var dd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var aw,pc,ow,xd,Wm,lw,cw,uw;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,v,_){return u==Array.prototype||u==Object.prototype||(u[v]=_.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof dd=="object"&&dd];for(var v=0;v<u.length;++v){var _=u[v];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=n(this);function o(u,v){if(v)e:{var _=r;u=u.split(".");for(var T=0;T<u.length-1;T++){var X=u[T];if(!(X in _))break e;_=_[X]}u=u[u.length-1],T=_[u],v=v(T),v!=T&&v!=null&&e(_,u,{configurable:!0,writable:!0,value:v})}}function c(u,v){u instanceof String&&(u+="");var _=0,T=!1,X={next:function(){if(!T&&_<u.length){var ie=_++;return{value:v(ie,u[ie]),done:!1}}return T=!0,{done:!0,value:void 0}}};return X[Symbol.iterator]=function(){return X},X}o("Array.prototype.values",function(u){return u||function(){return c(this,function(v,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},p=this||self;function g(u){var v=typeof u;return v=v!="object"?v:u?Array.isArray(u)?"array":v:"null",v=="array"||v=="object"&&typeof u.length=="number"}function y(u){var v=typeof u;return v=="object"&&u!=null||v=="function"}function w(u,v,_){return u.call.apply(u.bind,arguments)}function E(u,v,_){if(!u)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var X=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(X,T),u.apply(v,X)}}return function(){return u.apply(v,arguments)}}function A(u,v,_){return A=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?w:E,A.apply(null,arguments)}function B(u,v){var _=Array.prototype.slice.call(arguments,1);return function(){var T=_.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function H(u,v){function _(){}_.prototype=v.prototype,u.aa=v.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(T,X,ie){for(var _e=Array(arguments.length-2),it=2;it<arguments.length;it++)_e[it-2]=arguments[it];return v.prototype[X].apply(T,_e)}}function q(u){const v=u.length;if(0<v){const _=Array(v);for(let T=0;T<v;T++)_[T]=u[T];return _}return[]}function Q(u,v){for(let _=1;_<arguments.length;_++){const T=arguments[_];if(g(T)){const X=u.length||0,ie=T.length||0;u.length=X+ie;for(let _e=0;_e<ie;_e++)u[X+_e]=T[_e]}else u.push(T)}}class ${constructor(v,_){this.i=v,this.j=_,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function Y(u){return/^[\s\xa0]*$/.test(u)}function z(){var u=p.navigator;return u&&(u=u.userAgent)?u:""}function ge(u){return ge[" "](u),u}ge[" "]=function(){};var ee=z().indexOf("Gecko")!=-1&&!(z().toLowerCase().indexOf("webkit")!=-1&&z().indexOf("Edge")==-1)&&!(z().indexOf("Trident")!=-1||z().indexOf("MSIE")!=-1)&&z().indexOf("Edge")==-1;function me(u,v,_){for(const T in u)v.call(_,u[T],T,u)}function D(u,v){for(const _ in u)v.call(void 0,u[_],_,u)}function R(u){const v={};for(const _ in u)v[_]=u[_];return v}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(u,v){let _,T;for(let X=1;X<arguments.length;X++){T=arguments[X];for(_ in T)u[_]=T[_];for(let ie=0;ie<C.length;ie++)_=C[ie],Object.prototype.hasOwnProperty.call(T,_)&&(u[_]=T[_])}}function j(u){var v=1;u=u.split(":");const _=[];for(;0<v&&u.length;)_.push(u.shift()),v--;return u.length&&_.push(u.join(":")),_}function P(u){p.setTimeout(()=>{throw u},0)}function N(){var u=Ee;let v=null;return u.g&&(v=u.g,u.g=u.g.next,u.g||(u.h=null),v.next=null),v}class qe{constructor(){this.h=this.g=null}add(v,_){const T=Je.get();T.set(v,_),this.h?this.h.next=T:this.g=T,this.h=T}}var Je=new $(()=>new se,u=>u.reset());class se{constructor(){this.next=this.g=this.h=null}set(v,_){this.h=v,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let he,ne=!1,Ee=new qe,O=()=>{const u=p.Promise.resolve(void 0);he=()=>{u.then(re)}};var re=()=>{for(var u;u=N();){try{u.h.call(u.g)}catch(_){P(_)}var v=Je;v.j(u),100>v.h&&(v.h++,u.next=v.g,v.g=u)}ne=!1};function pe(){this.s=this.s,this.C=this.C}pe.prototype.s=!1,pe.prototype.ma=function(){this.s||(this.s=!0,this.N())},pe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ae(u,v){this.type=u,this.g=this.target=v,this.defaultPrevented=!1}ae.prototype.h=function(){this.defaultPrevented=!0};var be=function(){if(!p.addEventListener||!Object.defineProperty)return!1;var u=!1,v=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};p.addEventListener("test",_,v),p.removeEventListener("test",_,v)}catch{}return u}();function ke(u,v){if(ae.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=v,v=u.relatedTarget){if(ee){e:{try{ge(v.nodeName);var X=!0;break e}catch{}X=!1}X||(v=null)}}else _=="mouseover"?v=u.fromElement:_=="mouseout"&&(v=u.toElement);this.relatedTarget=v,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Oe[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&ke.aa.h.call(this)}}H(ke,ae);var Oe={2:"touch",3:"pen",4:"mouse"};ke.prototype.h=function(){ke.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ut="closure_listenable_"+(1e6*Math.random()|0),dt=0;function Wn(u,v,_,T,X){this.listener=u,this.proxy=null,this.src=v,this.type=_,this.capture=!!T,this.ha=X,this.key=++dt,this.da=this.fa=!1}function Pn(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function dn(u){this.src=u,this.g={},this.h=0}dn.prototype.add=function(u,v,_,T,X){var ie=u.toString();u=this.g[ie],u||(u=this.g[ie]=[],this.h++);var _e=ce(u,v,T,X);return-1<_e?(v=u[_e],_||(v.fa=!1)):(v=new Wn(v,this.src,ie,!!T,X),v.fa=_,u.push(v)),v};function qi(u,v){var _=v.type;if(_ in u.g){var T=u.g[_],X=Array.prototype.indexOf.call(T,v,void 0),ie;(ie=0<=X)&&Array.prototype.splice.call(T,X,1),ie&&(Pn(v),u.g[_].length==0&&(delete u.g[_],u.h--))}}function ce(u,v,_,T){for(var X=0;X<u.length;++X){var ie=u[X];if(!ie.da&&ie.listener==v&&ie.capture==!!_&&ie.ha==T)return X}return-1}var we="closure_lm_"+(1e6*Math.random()|0),De={};function Xe(u,v,_,T,X){if(Array.isArray(v)){for(var ie=0;ie<v.length;ie++)Xe(u,v[ie],_,T,X);return null}return _=Ra(_),u&&u[ut]?u.K(v,_,y(T)?!!T.capture:!1,X):Se(u,v,_,!1,T,X)}function Se(u,v,_,T,X,ie){if(!v)throw Error("Invalid event type");var _e=y(X)?!!X.capture:!!X,it=Ar(u);if(it||(u[we]=it=new dn(u)),_=it.add(v,_,T,_e,ie),_.proxy)return _;if(T=It(),_.proxy=T,T.src=u,T.listener=_,u.addEventListener)be||(X=_e),X===void 0&&(X=!1),u.addEventListener(v.toString(),T,X);else if(u.attachEvent)u.attachEvent(Hs(v.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return _}function It(){function u(_){return v.call(u.src,u.listener,_)}const v=wi;return u}function ht(u,v,_,T,X){if(Array.isArray(v))for(var ie=0;ie<v.length;ie++)ht(u,v[ie],_,T,X);else T=y(T)?!!T.capture:!!T,_=Ra(_),u&&u[ut]?(u=u.i,v=String(v).toString(),v in u.g&&(ie=u.g[v],_=ce(ie,_,T,X),-1<_&&(Pn(ie[_]),Array.prototype.splice.call(ie,_,1),ie.length==0&&(delete u.g[v],u.h--)))):u&&(u=Ar(u))&&(v=u.g[v.toString()],u=-1,v&&(u=ce(v,_,T,X)),(_=-1<u?v[u]:null)&&Zn(_))}function Zn(u){if(typeof u!="number"&&u&&!u.da){var v=u.src;if(v&&v[ut])qi(v.i,u);else{var _=u.type,T=u.proxy;v.removeEventListener?v.removeEventListener(_,T,u.capture):v.detachEvent?v.detachEvent(Hs(_),T):v.addListener&&v.removeListener&&v.removeListener(T),(_=Ar(v))?(qi(_,u),_.h==0&&(_.src=null,v[we]=null)):Pn(u)}}}function Hs(u){return u in De?De[u]:De[u]="on"+u}function wi(u,v){if(u.da)u=!0;else{v=new ke(v,this);var _=u.listener,T=u.ha||u.src;u.fa&&Zn(u),u=_.call(T,v)}return u}function Ar(u){return u=u[we],u instanceof dn?u:null}var Tr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ra(u){return typeof u=="function"?u:(u[Tr]||(u[Tr]=function(v){return u.handleEvent(v)}),u[Tr])}function St(){pe.call(this),this.i=new dn(this),this.M=this,this.F=null}H(St,pe),St.prototype[ut]=!0,St.prototype.removeEventListener=function(u,v,_,T){ht(this,u,v,_,T)};function ot(u,v){var _,T=u.F;if(T)for(_=[];T;T=T.F)_.push(T);if(u=u.M,T=v.type||v,typeof v=="string")v=new ae(v,u);else if(v instanceof ae)v.target=v.target||u;else{var X=v;v=new ae(T,u),L(v,X)}if(X=!0,_)for(var ie=_.length-1;0<=ie;ie--){var _e=v.g=_[ie];X=Un(_e,T,!0,v)&&X}if(_e=v.g=u,X=Un(_e,T,!0,v)&&X,X=Un(_e,T,!1,v)&&X,_)for(ie=0;ie<_.length;ie++)_e=v.g=_[ie],X=Un(_e,T,!1,v)&&X}St.prototype.N=function(){if(St.aa.N.call(this),this.i){var u=this.i,v;for(v in u.g){for(var _=u.g[v],T=0;T<_.length;T++)Pn(_[T]);delete u.g[v],u.h--}}this.F=null},St.prototype.K=function(u,v,_,T){return this.i.add(String(u),v,!1,_,T)},St.prototype.L=function(u,v,_,T){return this.i.add(String(u),v,!0,_,T)};function Un(u,v,_,T){if(v=u.i.g[String(v)],!v)return!0;v=v.concat();for(var X=!0,ie=0;ie<v.length;++ie){var _e=v[ie];if(_e&&!_e.da&&_e.capture==_){var it=_e.listener,nn=_e.ha||_e.src;_e.fa&&qi(u.i,_e),X=it.call(nn,T)!==!1&&X}}return X&&!T.defaultPrevented}function Wt(u,v,_){if(typeof u=="function")_&&(u=A(u,_));else if(u&&typeof u.handleEvent=="function")u=A(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:p.setTimeout(u,v||0)}function fo(u){u.g=Wt(()=>{u.g=null,u.i&&(u.i=!1,fo(u))},u.l);const v=u.h;u.h=null,u.m.apply(null,v)}class bl extends pe{constructor(v,_){super(),this.m=v,this.l=_,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:fo(this)}N(){super.N(),this.g&&(p.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function qs(u){pe.call(this),this.h=u,this.g={}}H(qs,pe);var Gi=[];function Kn(u){me(u.g,function(v,_){this.g.hasOwnProperty(_)&&Zn(v)},u),u.g={}}qs.prototype.N=function(){qs.aa.N.call(this),Kn(this)},qs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Yn=p.JSON.stringify,Me=p.JSON.parse,Gs=class{stringify(u){return p.JSON.stringify(u,void 0)}parse(u){return p.JSON.parse(u,void 0)}};function We(){}We.prototype.h=null;function fs(u){return u.h||(u.h=u.i())}function mo(){}var Xi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Wi(){ae.call(this,"d")}H(Wi,ae);function Xs(){ae.call(this,"c")}H(Xs,ae);var xi={},ms=null;function Zi(){return ms=ms||new St}xi.La="serverreachability";function Rr(u){ae.call(this,xi.La,u)}H(Rr,ae);function Ki(u){const v=Zi();ot(v,new Rr(v))}xi.STAT_EVENT="statevent";function po(u,v){ae.call(this,xi.STAT_EVENT,u),this.stat=v}H(po,ae);function At(u){const v=Zi();ot(v,new po(v,u))}xi.Ma="timingevent";function Bt(u,v){ae.call(this,xi.Ma,u),this.size=v}H(Bt,ae);function kt(u,v){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return p.setTimeout(function(){u()},v)}function Qn(){this.g=!0}Qn.prototype.xa=function(){this.g=!1};function Cr(u,v,_,T,X,ie){u.info(function(){if(u.g)if(ie)for(var _e="",it=ie.split("&"),nn=0;nn<it.length;nn++){var st=it[nn].split("=");if(1<st.length){var mn=st[0];st=st[1];var sn=mn.split("_");_e=2<=sn.length&&sn[1]=="type"?_e+(mn+"="+st+"&"):_e+(mn+"=redacted&")}}else _e=null;else _e=ie;return"XMLHTTP REQ ("+T+") [attempt "+X+"]: "+v+`
`+_+`
`+_e})}function Ws(u,v,_,T,X,ie,_e){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+X+"]: "+v+`
`+_+`
`+ie+" "+_e})}function Ei(u,v,_,T){u.info(function(){return"XMLHTTP TEXT ("+v+"): "+Si(u,_)+(T?" "+T:"")})}function go(u,v){u.info(function(){return"TIMEOUT: "+v})}Qn.prototype.info=function(){};function Si(u,v){if(!u.g)return v;if(!v)return null;try{var _=JSON.parse(v);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var T=_[u];if(!(2>T.length)){var X=T[1];if(Array.isArray(X)&&!(1>X.length)){var ie=X[0];if(ie!="noop"&&ie!="stop"&&ie!="close")for(var _e=1;_e<X.length;_e++)X[_e]=""}}}}return Yn(_)}catch{return v}}var ps={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Yi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ci;function Ai(){}H(Ai,We),Ai.prototype.g=function(){return new XMLHttpRequest},Ai.prototype.i=function(){return{}},ci=new Ai;function bn(u,v,_,T){this.j=u,this.i=v,this.l=_,this.R=T||1,this.U=new qs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Nt}function Nt(){this.i=null,this.g="",this.h=!1}var Ir={},kr={};function ui(u,v,_){u.L=1,u.v=Ii(Bn(v)),u.m=_,u.P=!0,Qi(u,null)}function Qi(u,v){u.F=Date.now(),Zs(u),u.A=Bn(u.v);var _=u.A,T=u.R;Array.isArray(T)||(T=[String(T)]),bs(_.i,"t",T),u.C=0,_=u.j.J,u.h=new Nt,u.g=ru(u.j,_?v:null,!u.m),0<u.O&&(u.M=new bl(A(u.Y,u,u.g),u.O)),v=u.U,_=u.g,T=u.ca;var X="readystatechange";Array.isArray(X)||(X&&(Gi[0]=X.toString()),X=Gi);for(var ie=0;ie<X.length;ie++){var _e=Xe(_,X[ie],T||v.handleEvent,!1,v.h||v);if(!_e)break;v.g[_e.key]=_e}v=u.H?R(u.H):{},u.m?(u.u||(u.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,v)):(u.u="GET",u.g.ea(u.A,u.u,null,v)),Ki(),Cr(u.i,u.u,u.A,u.l,u.R,u.m)}bn.prototype.ca=function(u){u=u.target;const v=this.M;v&&lt(u)==3?v.j():this.Y(u)},bn.prototype.Y=function(u){try{if(u==this.g)e:{const sn=lt(this.g);var v=this.g.Ba();const er=this.g.Z();if(!(3>sn)&&(sn!=3||this.g&&(this.h.h||this.g.oa()||Ot(this.g)))){this.J||sn!=4||v==7||(v==8||0>=er?Ki(3):Ki(2)),gs(this);var _=this.g.Z();this.X=_;t:if(Ca(this)){var T=Ot(this.g);u="";var X=T.length,ie=lt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){en(this),Ti(this);var _e="";break t}this.h.i=new p.TextDecoder}for(v=0;v<X;v++)this.h.h=!0,u+=this.h.i.decode(T[v],{stream:!(ie&&v==X-1)});T.length=0,this.h.g+=u,this.C=0,_e=this.h.g}else _e=this.g.oa();if(this.o=_==200,Ws(this.i,this.u,this.A,this.l,this.R,sn,_),this.o){if(this.T&&!this.K){t:{if(this.g){var it,nn=this.g;if((it=nn.g?nn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Y(it)){var st=it;break t}}st=null}if(_=st)Ei(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,$n(this,_);else{this.o=!1,this.s=3,At(12),en(this),Ti(this);break e}}if(this.P){_=!0;let xn;for(;!this.J&&this.C<_e.length;)if(xn=Ia(this,_e),xn==kr){sn==4&&(this.s=4,At(14),_=!1),Ei(this.i,this.l,null,"[Incomplete Response]");break}else if(xn==Ir){this.s=4,At(15),Ei(this.i,this.l,_e,"[Invalid Chunk]"),_=!1;break}else Ei(this.i,this.l,xn,null),$n(this,xn);if(Ca(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),sn!=4||_e.length!=0||this.h.h||(this.s=1,At(16),_=!1),this.o=this.o&&_,!_)Ei(this.i,this.l,_e,"[Invalid Chunked Response]"),en(this),Ti(this);else if(0<_e.length&&!this.W){this.W=!0;var mn=this.j;mn.g==this&&mn.ba&&!mn.M&&(mn.j.info("Great, no buffering proxy detected. Bytes received: "+_e.length),Na(mn),mn.M=!0,At(11))}}else Ei(this.i,this.l,_e,null),$n(this,_e);sn==4&&en(this),this.o&&!this.J&&(sn==4?nu(this.j,this):(this.o=!1,Zs(this)))}else kn(this.g),_==400&&0<_e.indexOf("Unknown SID")?(this.s=3,At(12)):(this.s=0,At(13)),en(this),Ti(this)}}}catch{}finally{}};function Ca(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Ia(u,v){var _=u.C,T=v.indexOf(`
`,_);return T==-1?kr:(_=Number(v.substring(_,T)),isNaN(_)?Ir:(T+=1,T+_>v.length?kr:(v=v.slice(T,T+_),u.C=T+_,v)))}bn.prototype.cancel=function(){this.J=!0,en(this)};function Zs(u){u.S=Date.now()+u.I,ka(u,u.I)}function ka(u,v){if(u.B!=null)throw Error("WatchDog timer not null");u.B=kt(A(u.ba,u),v)}function gs(u){u.B&&(p.clearTimeout(u.B),u.B=null)}bn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(go(this.i,this.A),this.L!=2&&(Ki(),At(17)),en(this),this.s=2,Ti(this)):ka(this,this.S-u)};function Ti(u){u.j.G==0||u.J||nu(u.j,u)}function en(u){gs(u);var v=u.M;v&&typeof v.ma=="function"&&v.ma(),u.M=null,Kn(u.U),u.g&&(v=u.g,u.g=null,v.abort(),v.ma())}function $n(u,v){try{var _=u.j;if(_.G!=0&&(_.g==u||ys(_.h,u))){if(!u.K&&ys(_.h,u)&&_.G==3){try{var T=_.Da.g.parse(v)}catch{T=null}if(Array.isArray(T)&&T.length==3){var X=T;if(X[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)xo(_),Ht(_);else break e;Pr(_),At(18)}}else _.za=X[1],0<_.za-_.T&&37500>X[2]&&_.F&&_.v==0&&!_.C&&(_.C=kt(A(_.Za,_),6e3));if(1>=Dr(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Js(_,11)}else if((u.K||_.g==u)&&xo(_),!Y(v))for(X=_.Da.g.parse(v),v=0;v<X.length;v++){let st=X[v];if(_.T=st[0],st=st[1],_.G==2)if(st[0]=="c"){_.K=st[1],_.ia=st[2];const mn=st[3];mn!=null&&(_.la=mn,_.j.info("VER="+_.la));const sn=st[4];sn!=null&&(_.Aa=sn,_.j.info("SVER="+_.Aa));const er=st[5];er!=null&&typeof er=="number"&&0<er&&(T=1.5*er,_.L=T,_.j.info("backChannelRequestTimeoutMs_="+T)),T=_;const xn=u.g;if(xn){const Es=xn.g?xn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Es){var ie=T.h;ie.g||Es.indexOf("spdy")==-1&&Es.indexOf("quic")==-1&&Es.indexOf("h2")==-1||(ie.j=ie.l,ie.g=new Set,ie.h&&(hn(ie,ie.h),ie.h=null))}if(T.D){const xl=xn.g?xn.g.getResponseHeader("X-HTTP-Session-Id"):null;xl&&(T.ya=xl,gt(T.I,T.D,xl))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),T=_;var _e=u;if(T.qa=su(T,T.J?T.ia:null,T.W),_e.K){fn(T.h,_e);var it=_e,nn=T.L;nn&&(it.I=nn),it.B&&(gs(it),Zs(it)),T.g=_e}else ii(T);0<_.i.length&&Di(_)}else st[0]!="stop"&&st[0]!="close"||Js(_,7);else _.G==3&&(st[0]=="stop"||st[0]=="close"?st[0]=="stop"?Js(_,7):ni(_):st[0]!="noop"&&_.l&&_.l.ta(st),_.v=0)}}Ki(4)}catch{}}var yo=class{constructor(u,v){this.g=u,this.map=v}};function Jn(u){this.l=u||10,p.PerformanceNavigationTiming?(u=p.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(p.chrome&&p.chrome.loadTimes&&p.chrome.loadTimes()&&p.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Nr(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Dr(u){return u.h?1:u.g?u.g.size:0}function ys(u,v){return u.h?u.h==v:u.g?u.g.has(v):!1}function hn(u,v){u.g?u.g.add(v):u.h=v}function fn(u,v){u.h&&u.h==v?u.h=null:u.g&&u.g.has(v)&&u.g.delete(v)}Jn.prototype.cancel=function(){if(this.i=mt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function mt(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let v=u.i;for(const _ of u.g.values())v=v.concat(_.D);return v}return q(u.i)}function jr(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(g(u)){for(var v=[],_=u.length,T=0;T<_;T++)v.push(u[T]);return v}v=[],_=0;for(T in u)v[_++]=u[T];return v}function Ri(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(g(u)||typeof u=="string"){var v=[];u=u.length;for(var _=0;_<u;_++)v.push(_);return v}v=[],_=0;for(const T in u)v[_++]=T;return v}}}function Ci(u,v){if(u.forEach&&typeof u.forEach=="function")u.forEach(v,void 0);else if(g(u)||typeof u=="string")Array.prototype.forEach.call(u,v,void 0);else for(var _=Ri(u),T=jr(u),X=T.length,ie=0;ie<X;ie++)v.call(void 0,T[ie],_&&_[ie],u)}var $i=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function vo(u,v){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var T=u[_].indexOf("="),X=null;if(0<=T){var ie=u[_].substring(0,T);X=u[_].substring(T+1)}else ie=u[_];v(ie,X?decodeURIComponent(X.replace(/\+/g," ")):"")}}}function Dt(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Dt){this.h=u.h,Ks(this,u.j),this.o=u.o,this.g=u.g,vs(this,u.s),this.l=u.l;var v=u.i,_=new Ji;_.i=v.i,v.g&&(_.g=new Map(v.g),_.h=v.h),ei(this,_),this.m=u.m}else u&&(v=String(u).match($i))?(this.h=!1,Ks(this,v[1]||"",!0),this.o=ti(v[2]||""),this.g=ti(v[3]||"",!0),vs(this,v[4]),this.l=ti(v[5]||"",!0),ei(this,v[6]||"",!0),this.m=ti(v[7]||"")):(this.h=!1,this.i=new Ji(null,this.h))}Dt.prototype.toString=function(){var u=[],v=this.j;v&&u.push(Ys(v,Or,!0),":");var _=this.g;return(_||v=="file")&&(u.push("//"),(v=this.o)&&u.push(Ys(v,Or,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(Ys(_,_.charAt(0)=="/"?_o:_s,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",Ys(_,$s)),u.join("")};function Bn(u){return new Dt(u)}function Ks(u,v,_){u.j=_?ti(v,!0):v,u.j&&(u.j=u.j.replace(/:$/,""))}function vs(u,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);u.s=v}else u.s=null}function ei(u,v,_){v instanceof Ji?(u.i=v,bo(u.i,u.h)):(_||(v=Ys(v,ki)),u.i=new Ji(v,u.h))}function gt(u,v,_){u.i.set(v,_)}function Ii(u){return gt(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function ti(u,v){return u?v?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Ys(u,v,_){return typeof u=="string"?(u=encodeURI(u).replace(v,Qs),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Qs(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Or=/[#\/\?@]/g,_s=/[#\?:]/g,_o=/[#\?]/g,ki=/[#\?@]/g,$s=/#/g;function Ji(u,v){this.h=this.g=null,this.i=u||null,this.j=!!v}function wn(u){u.g||(u.g=new Map,u.h=0,u.i&&vo(u.i,function(v,_){u.add(decodeURIComponent(v.replace(/\+/g," ")),_)}))}i=Ji.prototype,i.add=function(u,v){wn(this),this.i=null,u=zn(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(v),this.h+=1,this};function Zt(u,v){wn(u),v=zn(u,v),u.g.has(v)&&(u.i=null,u.h-=u.g.get(v).length,u.g.delete(v))}function es(u,v){return wn(u),v=zn(u,v),u.g.has(v)}i.forEach=function(u,v){wn(this),this.g.forEach(function(_,T){_.forEach(function(X){u.call(v,X,T,this)},this)},this)},i.na=function(){wn(this);const u=Array.from(this.g.values()),v=Array.from(this.g.keys()),_=[];for(let T=0;T<v.length;T++){const X=u[T];for(let ie=0;ie<X.length;ie++)_.push(v[T])}return _},i.V=function(u){wn(this);let v=[];if(typeof u=="string")es(this,u)&&(v=v.concat(this.g.get(zn(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)v=v.concat(u[_])}return v},i.set=function(u,v){return wn(this),this.i=null,u=zn(this,u),es(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[v]),this.h+=1,this},i.get=function(u,v){return u?(u=this.V(u),0<u.length?String(u[0]):v):v};function bs(u,v,_){Zt(u,v),0<_.length&&(u.i=null,u.g.set(zn(u,v),q(_)),u.h+=_.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],v=Array.from(this.g.keys());for(var _=0;_<v.length;_++){var T=v[_];const ie=encodeURIComponent(String(T)),_e=this.V(T);for(T=0;T<_e.length;T++){var X=ie;_e[T]!==""&&(X+="="+encodeURIComponent(String(_e[T]))),u.push(X)}}return this.i=u.join("&")};function zn(u,v){return v=String(v),u.j&&(v=v.toLowerCase()),v}function bo(u,v){v&&!u.j&&(wn(u),u.i=null,u.g.forEach(function(_,T){var X=T.toLowerCase();T!=X&&(Zt(this,T),bs(this,X,_))},u)),u.j=v}function Mr(u,v){const _=new Qn;if(p.Image){const T=new Image;T.onload=B(di,_,"TestLoadImage: loaded",!0,v,T),T.onerror=B(di,_,"TestLoadImage: error",!1,v,T),T.onabort=B(di,_,"TestLoadImage: abort",!1,v,T),T.ontimeout=B(di,_,"TestLoadImage: timeout",!1,v,T),p.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else v(!1)}function In(u,v){const _=new Qn,T=new AbortController,X=setTimeout(()=>{T.abort(),di(_,"TestPingServer: timeout",!1,v)},1e4);fetch(u,{signal:T.signal}).then(ie=>{clearTimeout(X),ie.ok?di(_,"TestPingServer: ok",!0,v):di(_,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(X),di(_,"TestPingServer: error",!1,v)})}function di(u,v,_,T,X){try{X&&(X.onload=null,X.onerror=null,X.onabort=null,X.ontimeout=null),T(_)}catch{}}function ts(){this.g=new Gs}function hi(u,v,_){const T=_||"";try{Ci(u,function(X,ie){let _e=X;y(X)&&(_e=Yn(X)),v.push(T+ie+"="+encodeURIComponent(_e))})}catch(X){throw v.push(T+"type="+encodeURIComponent("_badmap")),X}}function ns(u){this.l=u.Ub||null,this.j=u.eb||!1}H(ns,We),ns.prototype.g=function(){return new Ni(this.l,this.j)},ns.prototype.i=function(u){return function(){return u}}({});function Ni(u,v){St.call(this),this.D=u,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}H(Ni,St),i=Ni.prototype,i.open=function(u,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=v,this.readyState=1,k(this)},i.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(v.body=u),(this.D||p).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,x(this)),this.readyState=0},i.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,k(this)),this.g&&(this.readyState=3,k(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof p.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Lr(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Lr(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}i.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var v=u.value?u.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!u.done}))&&(this.response=this.responseText+=v)}u.done?x(this):k(this),this.readyState==3&&Lr(this)}},i.Ra=function(u){this.g&&(this.response=this.responseText=u,x(this))},i.Qa=function(u){this.g&&(this.response=u,x(this))},i.ga=function(){this.g&&x(this)};function x(u){u.readyState=4,u.l=null,u.j=null,u.v=null,k(u)}i.setRequestHeader=function(u,v){this.u.append(u,v)},i.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],v=this.h.entries();for(var _=v.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=v.next();return u.join(`\r
`)};function k(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Ni.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function U(u){let v="";return me(u,function(_,T){v+=T,v+=":",v+=_,v+=`\r
`}),v}function V(u,v,_){e:{for(T in _){var T=!1;break e}T=!0}T||(_=U(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):gt(u,v,_))}function W(u){St.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}H(W,St);var ye=/^https?$/i,ve=["POST","PUT"];i=W.prototype,i.Ha=function(u){this.J=u},i.ea=function(u,v,_,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);v=v?v.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ci.g(),this.v=this.o?fs(this.o):fs(ci),this.g.onreadystatechange=A(this.Ea,this);try{this.B=!0,this.g.open(v,String(u),!0),this.B=!1}catch(ie){Re(this,ie);return}if(u=_||"",_=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var X in T)_.set(X,T[X]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const ie of T.keys())_.set(ie,T.get(ie));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(_.keys()).find(ie=>ie.toLowerCase()=="content-type"),X=p.FormData&&u instanceof p.FormData,!(0<=Array.prototype.indexOf.call(ve,v,void 0))||T||X||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ie,_e]of _)this.g.setRequestHeader(ie,_e);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{yt(this),this.u=!0,this.g.send(u),this.u=!1}catch(ie){Re(this,ie)}};function Re(u,v){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=v,u.m=5,nt(u),Ue(u)}function nt(u){u.A||(u.A=!0,ot(u,"complete"),ot(u,"error"))}i.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,ot(this,"complete"),ot(this,"abort"),Ue(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ue(this,!0)),W.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?Te(this):this.bb())},i.bb=function(){Te(this)};function Te(u){if(u.h&&typeof h<"u"&&(!u.v[1]||lt(u)!=4||u.Z()!=2)){if(u.u&&lt(u)==4)Wt(u.Ea,0,u);else if(ot(u,"readystatechange"),lt(u)==4){u.h=!1;try{const _e=u.Z();e:switch(_e){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var _;if(!(_=v)){var T;if(T=_e===0){var X=String(u.D).match($i)[1]||null;!X&&p.self&&p.self.location&&(X=p.self.location.protocol.slice(0,-1)),T=!ye.test(X?X.toLowerCase():"")}_=T}if(_)ot(u,"complete"),ot(u,"success");else{u.m=6;try{var ie=2<lt(u)?u.g.statusText:""}catch{ie=""}u.l=ie+" ["+u.Z()+"]",nt(u)}}finally{Ue(u)}}}}function Ue(u,v){if(u.g){yt(u);const _=u.g,T=u.v[0]?()=>{}:null;u.g=null,u.v=null,v||ot(u,"ready");try{_.onreadystatechange=T}catch{}}}function yt(u){u.I&&(p.clearTimeout(u.I),u.I=null)}i.isActive=function(){return!!this.g};function lt(u){return u.g?u.g.readyState:0}i.Z=function(){try{return 2<lt(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(u){if(this.g){var v=this.g.responseText;return u&&v.indexOf(u)==0&&(v=v.substring(u.length)),Me(v)}};function Ot(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function kn(u){const v={};u=(u.g&&2<=lt(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(Y(u[T]))continue;var _=j(u[T]);const X=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const ie=v[X]||[];v[X]=ie,ie.push(_)}D(v,function(T){return T.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function tn(u,v,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||v}function Fn(u){this.Aa=0,this.i=[],this.j=new Qn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=tn("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=tn("baseRetryDelayMs",5e3,u),this.cb=tn("retryDelaySeedMs",1e4,u),this.Wa=tn("forwardChannelMaxRetries",2,u),this.wa=tn("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Jn(u&&u.concurrentRequestLimit),this.Da=new ts,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=Fn.prototype,i.la=8,i.G=1,i.connect=function(u,v,_,T){At(0),this.W=u,this.H=v||{},_&&T!==void 0&&(this.H.OSID=_,this.H.OAID=T),this.F=this.X,this.I=su(this,null,this.W),Di(this)};function ni(u){if(ws(u),u.G==3){var v=u.U++,_=Bn(u.I);if(gt(_,"SID",u.K),gt(_,"RID",v),gt(_,"TYPE","terminate"),Fe(u,_),v=new bn(u,u.j,v),v.L=2,v.v=Ii(Bn(_)),_=!1,p.navigator&&p.navigator.sendBeacon)try{_=p.navigator.sendBeacon(v.v.toString(),"")}catch{}!_&&p.Image&&(new Image().src=v.v,_=!0),_||(v.g=ru(v.j,null),v.g.ea(v.v)),v.F=Date.now(),Zs(v)}iu(u)}function Ht(u){u.g&&(Na(u),u.g.cancel(),u.g=null)}function ws(u){Ht(u),u.u&&(p.clearTimeout(u.u),u.u=null),xo(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&p.clearTimeout(u.s),u.s=null)}function Di(u){if(!Nr(u.h)&&!u.s){u.s=!0;var v=u.Ga;he||O(),ne||(he(),ne=!0),Ee.add(v,u),u.B=0}}function wo(u,v){return Dr(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=v.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=kt(A(u.Ga,u,v),wl(u,u.B)),u.B++,!0)}i.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const X=new bn(this,this.j,u);let ie=this.o;if(this.S&&(ie?(ie=R(ie),L(ie,this.S)):ie=this.S),this.m!==null||this.O||(X.H=ie,ie=null),this.P)e:{for(var v=0,_=0;_<this.i.length;_++){t:{var T=this.i[_];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(v+=T,4096<v){v=_;break e}if(v===4096||_===this.i.length-1){v=_+1;break e}}v=1e3}else v=1e3;v=Kt(this,X,v),_=Bn(this.I),gt(_,"RID",u),gt(_,"CVER",22),this.D&&gt(_,"X-HTTP-Session-Id",this.D),Fe(this,_),ie&&(this.O?v="headers="+encodeURIComponent(String(U(ie)))+"&"+v:this.m&&V(_,this.m,ie)),hn(this.h,X),this.Ua&&gt(_,"TYPE","init"),this.P?(gt(_,"$req",v),gt(_,"SID","null"),X.T=!0,ui(X,_,null)):ui(X,_,v),this.G=2}}else this.G==3&&(u?Vr(this,u):this.i.length==0||Nr(this.h)||Vr(this))};function Vr(u,v){var _;v?_=v.l:_=u.U++;const T=Bn(u.I);gt(T,"SID",u.K),gt(T,"RID",_),gt(T,"AID",u.T),Fe(u,T),u.m&&u.o&&V(T,u.m,u.o),_=new bn(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),v&&(u.i=v.D.concat(u.i)),v=Kt(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),hn(u.h,_),ui(_,T,v)}function Fe(u,v){u.H&&me(u.H,function(_,T){gt(v,T,_)}),u.l&&Ci({},function(_,T){gt(v,T,_)})}function Kt(u,v,_){_=Math.min(u.i.length,_);var T=u.l?A(u.l.Na,u.l,u):null;e:{var X=u.i;let ie=-1;for(;;){const _e=["count="+_];ie==-1?0<_?(ie=X[0].g,_e.push("ofs="+ie)):ie=0:_e.push("ofs="+ie);let it=!0;for(let nn=0;nn<_;nn++){let st=X[nn].g;const mn=X[nn].map;if(st-=ie,0>st)ie=Math.max(0,X[nn].g-100),it=!1;else try{hi(mn,_e,"req"+st+"_")}catch{T&&T(mn)}}if(it){T=_e.join("&");break e}}}return u=u.i.splice(0,_),v.D=u,T}function ii(u){if(!u.g&&!u.u){u.Y=1;var v=u.Fa;he||O(),ne||(he(),ne=!0),Ee.add(v,u),u.v=0}}function Pr(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=kt(A(u.Fa,u),wl(u,u.v)),u.v++,!0)}i.Fa=function(){if(this.u=null,tu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=kt(A(this.ab,this),u)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,At(10),Ht(this),tu(this))};function Na(u){u.A!=null&&(p.clearTimeout(u.A),u.A=null)}function tu(u){u.g=new bn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var v=Bn(u.qa);gt(v,"RID","rpc"),gt(v,"SID",u.K),gt(v,"AID",u.T),gt(v,"CI",u.F?"0":"1"),!u.F&&u.ja&&gt(v,"TO",u.ja),gt(v,"TYPE","xmlhttp"),Fe(u,v),u.m&&u.o&&V(v,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=Ii(Bn(v)),_.m=null,_.P=!0,Qi(_,u)}i.Za=function(){this.C!=null&&(this.C=null,Ht(this),Pr(this),At(19))};function xo(u){u.C!=null&&(p.clearTimeout(u.C),u.C=null)}function nu(u,v){var _=null;if(u.g==v){xo(u),Na(u),u.g=null;var T=2}else if(ys(u.h,v))_=v.D,fn(u.h,v),T=1;else return;if(u.G!=0){if(v.o)if(T==1){_=v.m?v.m.length:0,v=Date.now()-v.F;var X=u.B;T=Zi(),ot(T,new Bt(T,_)),Di(u)}else ii(u);else if(X=v.s,X==3||X==0&&0<v.X||!(T==1&&wo(u,v)||T==2&&Pr(u)))switch(_&&0<_.length&&(v=u.h,v.i=v.i.concat(_)),X){case 1:Js(u,5);break;case 4:Js(u,10);break;case 3:Js(u,6);break;default:Js(u,2)}}}function wl(u,v){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*v}function Js(u,v){if(u.j.info("Error code "+v),v==2){var _=A(u.fb,u),T=u.Xa;const X=!T;T=new Dt(T||"//www.google.com/images/cleardot.gif"),p.location&&p.location.protocol=="http"||Ks(T,"https"),Ii(T),X?Mr(T.toString(),_):In(T.toString(),_)}else At(2);u.G=0,u.l&&u.l.sa(v),iu(u),ws(u)}i.fb=function(u){u?(this.j.info("Successfully pinged google.com"),At(2)):(this.j.info("Failed to ping google.com"),At(1))};function iu(u){if(u.G=0,u.ka=[],u.l){const v=mt(u.h);(v.length!=0||u.i.length!=0)&&(Q(u.ka,v),Q(u.ka,u.i),u.h.i.length=0,q(u.i),u.i.length=0),u.l.ra()}}function su(u,v,_){var T=_ instanceof Dt?Bn(_):new Dt(_);if(T.g!="")v&&(T.g=v+"."+T.g),vs(T,T.s);else{var X=p.location;T=X.protocol,v=v?v+"."+X.hostname:X.hostname,X=+X.port;var ie=new Dt(null);T&&Ks(ie,T),v&&(ie.g=v),X&&vs(ie,X),_&&(ie.l=_),T=ie}return _=u.D,v=u.ya,_&&v&&gt(T,_,v),gt(T,"VER",u.la),Fe(u,T),T}function ru(u,v,_){if(v&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=u.Ca&&!u.pa?new W(new ns({eb:_})):new W(u.pa),v.Ha(u.J),v}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function au(){}i=au.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function Eo(){}Eo.prototype.g=function(u,v){return new Hn(u,v)};function Hn(u,v){St.call(this),this.g=new Fn(v),this.l=u,this.h=v&&v.messageUrlParams||null,u=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(u?u["X-WebChannel-Content-Type"]=v.messageContentType:u={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(u?u["X-WebChannel-Client-Profile"]=v.va:u={"X-WebChannel-Client-Profile":v.va}),this.g.S=u,(u=v&&v.Sb)&&!Y(u)&&(this.g.m=u),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!Y(v)&&(this.g.D=v,u=this.h,u!==null&&v in u&&(u=this.h,v in u&&delete u[v])),this.j=new xs(this)}H(Hn,St),Hn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Hn.prototype.close=function(){ni(this.g)},Hn.prototype.o=function(u){var v=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=Yn(u),u=_);v.i.push(new yo(v.Ya++,u)),v.G==3&&Di(v)},Hn.prototype.N=function(){this.g.l=null,delete this.j,ni(this.g),delete this.g,Hn.aa.N.call(this)};function ou(u){Wi.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var v=u.__sm__;if(v){e:{for(const _ in v){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,v=v!==null&&u in v?v[u]:void 0),this.data=v}else this.data=u}H(ou,Wi);function lu(){Xs.call(this),this.status=1}H(lu,Xs);function xs(u){this.g=u}H(xs,au),xs.prototype.ua=function(){ot(this.g,"a")},xs.prototype.ta=function(u){ot(this.g,new ou(u))},xs.prototype.sa=function(u){ot(this.g,new lu)},xs.prototype.ra=function(){ot(this.g,"b")},Eo.prototype.createWebChannel=Eo.prototype.g,Hn.prototype.send=Hn.prototype.o,Hn.prototype.open=Hn.prototype.m,Hn.prototype.close=Hn.prototype.close,uw=function(){return new Eo},cw=function(){return Zi()},lw=xi,Wm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ps.NO_ERROR=0,ps.TIMEOUT=8,ps.HTTP_ERROR=6,xd=ps,Yi.COMPLETE="complete",ow=Yi,mo.EventType=Xi,Xi.OPEN="a",Xi.CLOSE="b",Xi.ERROR="c",Xi.MESSAGE="d",St.prototype.listen=St.prototype.K,pc=mo,W.prototype.listenOnce=W.prototype.L,W.prototype.getLastError=W.prototype.Ka,W.prototype.getLastErrorCode=W.prototype.Ba,W.prototype.getStatus=W.prototype.Z,W.prototype.getResponseJson=W.prototype.Oa,W.prototype.getResponseText=W.prototype.oa,W.prototype.send=W.prototype.ea,W.prototype.setWithCredentials=W.prototype.Ha,aw=W}).apply(typeof dd<"u"?dd:typeof self<"u"?self:typeof window<"u"?window:{});const x1="@firebase/firestore",E1="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Mn.UNAUTHENTICATED=new Mn(null),Mn.GOOGLE_CREDENTIALS=new Mn("google-credentials-uid"),Mn.FIRST_PARTY=new Mn("first-party-uid"),Mn.MOCK_USER=new Mn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gl="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const no=new th("@firebase/firestore");function $o(){return no.logLevel}function xe(i,...e){if(no.logLevel<=et.DEBUG){const n=e.map(Dp);no.debug(`Firestore (${gl}): ${i}`,...n)}}function Er(i,...e){if(no.logLevel<=et.ERROR){const n=e.map(Dp);no.error(`Firestore (${gl}): ${i}`,...n)}}function va(i,...e){if(no.logLevel<=et.WARN){const n=e.map(Dp);no.warn(`Firestore (${gl}): ${i}`,...n)}}function Dp(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pe(i,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,dw(i,r,n)}function dw(i,e,n){let r=`FIRESTORE (${gl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Er(r),new Error(r)}function pt(i,e,n,r){let o="Unexpected state";typeof n=="string"?o=n:r=n,i||dw(e,o,r)}function He(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ie extends hs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class s5{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Mn.UNAUTHENTICATED))}shutdown(){}}class r5{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class a5{constructor(e){this.t=e,this.currentUser=Mn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){pt(this.o===void 0,42304);let r=this.i;const o=g=>this.i!==r?(r=this.i,n(g)):Promise.resolve();let c=new ga;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new ga,e.enqueueRetryable(()=>o(this.currentUser))};const h=()=>{const g=c;e.enqueueRetryable(async()=>{await g.promise,await o(this.currentUser)})},p=g=>{xe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit(g=>p(g)),setTimeout(()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?p(g):(xe("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new ga)}},0),h()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(xe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(pt(typeof r.accessToken=="string",31837,{l:r}),new hw(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return pt(e===null||typeof e=="string",2055,{h:e}),new Mn(e)}}class o5{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Mn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class l5{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new o5(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Mn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class S1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class c5{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Bi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){pt(this.o===void 0,3512);const r=c=>{c.error!=null&&xe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const h=c.token!==this.m;return this.m=c.token,xe("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>r(c))};const o=c=>{xe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(c=>o(c)),setTimeout(()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?o(c):xe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new S1(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(pt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new S1(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u5(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<i;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fw(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=u5(40);for(let c=0;c<o.length;++c)r.length<20&&o[c]<n&&(r+=e.charAt(o[c]%62))}return r}}function Ke(i,e){return i<e?-1:i>e?1:0}function Zm(i,e){let n=0;for(;n<i.length&&n<e.length;){const r=i.codePointAt(n),o=e.codePointAt(n);if(r!==o){if(r<128&&o<128)return Ke(r,o);{const c=fw(),h=d5(c.encode(A1(i,n)),c.encode(A1(e,n)));return h!==0?h:Ke(r,o)}}n+=r>65535?2:1}return Ke(i.length,e.length)}function A1(i,e){return i.codePointAt(e)>65535?i.substring(e,e+2):i.substring(e,e+1)}function d5(i,e){for(let n=0;n<i.length&&n<e.length;++n)if(i[n]!==e[n])return Ke(i[n],e[n]);return Ke(i.length,e.length)}function ol(i,e,n){return i.length===e.length&&i.every((r,o)=>n(r,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T1="__name__";class Is{constructor(e,n,r){n===void 0?n=0:n>e.length&&Pe(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Pe(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Is.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Is?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let o=0;o<r;o++){const c=Is.compareSegments(e.get(o),n.get(o));if(c!==0)return c}return Ke(e.length,n.length)}static compareSegments(e,n){const r=Is.isNumericId(e),o=Is.isNumericId(n);return r&&!o?-1:!r&&o?1:r&&o?Is.extractNumericId(e).compare(Is.extractNumericId(n)):Zm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return pa.fromString(e.substring(4,e.length-2))}}class Vt extends Is{construct(e,n,r){return new Vt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ie(fe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(o=>o.length>0))}return new Vt(n)}static emptyPath(){return new Vt([])}}const h5=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Rn extends Is{construct(e,n,r){return new Rn(e,n,r)}static isValidIdentifier(e){return h5.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Rn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===T1}static keyField(){return new Rn([T1])}static fromServerFormat(e){const n=[];let r="",o=0;const c=()=>{if(r.length===0)throw new Ie(fe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let h=!1;for(;o<e.length;){const p=e[o];if(p==="\\"){if(o+1===e.length)throw new Ie(fe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new Ie(fe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=g,o+=2}else p==="`"?(h=!h,o++):p!=="."||h?(r+=p,o++):(c(),o++)}if(c(),h)throw new Ie(fe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Rn(n)}static emptyPath(){return new Rn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e){this.path=e}static fromPath(e){return new Ne(Vt.fromString(e))}static fromName(e){return new Ne(Vt.fromString(e).popFirst(5))}static empty(){return new Ne(Vt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Vt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Vt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ne(new Vt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f5(i,e,n){if(!n)throw new Ie(fe.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function m5(i,e,n,r){if(e===!0&&r===!0)throw new Ie(fe.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function R1(i){if(!Ne.isDocumentKey(i))throw new Ie(fe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function mw(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function Op(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":Pe(12329,{type:typeof i})}function jc(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new Ie(fe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Op(i);throw new Ie(fe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jt(i,e){const n={typeString:i};return e&&(n.value=e),n}function Kc(i,e){if(!mw(i))throw new Ie(fe.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const o=e[r].typeString,c="value"in e[r]?{value:e[r].value}:void 0;if(!(r in i)){n=`JSON missing required field: '${r}'`;break}const h=i[r];if(o&&typeof h!==o){n=`JSON field '${r}' must be a ${o}.`;break}if(c!==void 0&&h!==c.value){n=`Expected '${r}' field to equal '${c.value}'`;break}}if(n)throw new Ie(fe.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C1=-62135596800,I1=1e6;class Ct{static now(){return Ct.fromMillis(Date.now())}static fromDate(e){return Ct.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*I1);return new Ct(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ie(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ie(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<C1)throw new Ie(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ie(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/I1}_compareTo(e){return this.seconds===e.seconds?Ke(this.nanoseconds,e.nanoseconds):Ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ct._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Kc(e,Ct._jsonSchema))return new Ct(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-C1;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ct._jsonSchemaVersion="firestore/timestamp/1.0",Ct._jsonSchema={type:Jt("string",Ct._jsonSchemaVersion),seconds:Jt("number"),nanoseconds:Jt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{static fromTimestamp(e){return new ze(e)}static min(){return new ze(new Ct(0,0))}static max(){return new ze(new Ct(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oc=-1;function p5(i,e){const n=i.toTimestamp().seconds,r=i.toTimestamp().nanoseconds+1,o=ze.fromTimestamp(r===1e9?new Ct(n+1,0):new Ct(n,r));return new _a(o,Ne.empty(),e)}function g5(i){return new _a(i.readTime,i.key,Oc)}class _a{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new _a(ze.min(),Ne.empty(),Oc)}static max(){return new _a(ze.max(),Ne.empty(),Oc)}}function y5(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=Ne.comparator(i.documentKey,e.documentKey),n!==0?n:Ke(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v5="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class _5{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yl(i){if(i.code!==fe.FAILED_PRECONDITION||i.message!==v5)throw i;xe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Pe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new de((r,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(r,o)},this.catchCallback=c=>{this.wrapFailure(n,c).next(r,o)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof de?n:de.resolve(n)}catch(n){return de.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):de.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):de.reject(n)}static resolve(e){return new de((n,r)=>{n(e)})}static reject(e){return new de((n,r)=>{r(e)})}static waitFor(e){return new de((n,r)=>{let o=0,c=0,h=!1;e.forEach(p=>{++o,p.next(()=>{++c,h&&c===o&&n()},g=>r(g))}),h=!0,c===o&&n()})}static or(e){let n=de.resolve(!1);for(const r of e)n=n.next(o=>o?de.resolve(o):r());return n}static forEach(e,n){const r=[];return e.forEach((o,c)=>{r.push(n.call(this,o,c))}),this.waitFor(r)}static mapArray(e,n){return new de((r,o)=>{const c=e.length,h=new Array(c);let p=0;for(let g=0;g<c;g++){const y=g;n(e[y]).next(w=>{h[y]=w,++p,p===c&&r(h)},w=>o(w))}})}static doWhile(e,n){return new de((r,o)=>{const c=()=>{e()===!0?n().next(()=>{c()},o):r()};c()})}}function b5(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function vl(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this._e(r),this.ae=r=>n.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}oh.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mp=-1;function lh(i){return i==null}function Bd(i){return i===0&&1/i==-1/0}function w5(i){return typeof i=="number"&&Number.isInteger(i)&&!Bd(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pw="";function x5(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=k1(e)),e=E5(i.get(n),e);return k1(e)}function E5(i,e){let n=e;const r=i.length;for(let o=0;o<r;o++){const c=i.charAt(o);switch(c){case"\0":n+="";break;case pw:n+="";break;default:n+=c}}return n}function k1(i){return i+pw+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N1(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function lo(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function gw(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e,n){this.comparator=e,this.root=n||Tn.EMPTY}insert(e,n){return new Ut(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Tn.BLACK,null,null))}remove(e){return new Ut(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Tn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return n+r.left.size;o<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new hd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new hd(this.root,e,this.comparator,!1)}getReverseIterator(){return new hd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new hd(this.root,e,this.comparator,!0)}}class hd{constructor(e,n,r,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?r(e.key,n):1,n&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Tn{constructor(e,n,r,o,c){this.key=e,this.value=n,this.color=r??Tn.RED,this.left=o??Tn.EMPTY,this.right=c??Tn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,o,c){return new Tn(e??this.key,n??this.value,r??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let o=this;const c=r(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,n,r),null):c===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Tn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return Tn.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Tn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Tn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Pe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Pe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Pe(27949);return e+(this.isRed()?0:1)}}Tn.EMPTY=null,Tn.RED=!0,Tn.BLACK=!1;Tn.EMPTY=new class{constructor(){this.size=0}get key(){throw Pe(57766)}get value(){throw Pe(16141)}get color(){throw Pe(16727)}get left(){throw Pe(29726)}get right(){throw Pe(36894)}copy(e,n,r,o,c){return this}insert(e,n,r){return new Tn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.comparator=e,this.data=new Ut(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new D1(this.data.getIterator())}getIteratorFrom(e){return new D1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof un)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=r.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new un(this.comparator);return n.data=e,n}}class D1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(e){this.fields=e,e.sort(Rn.comparator)}static empty(){return new os([])}unionWith(e){let n=new un(Rn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new os(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ol(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new yw("Invalid base64 string: "+c):c}}(e);return new Cn(n)}static fromUint8Array(e){const n=function(o){let c="";for(let h=0;h<o.length;++h)c+=String.fromCharCode(o[h]);return c}(e);return new Cn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Cn.EMPTY_BYTE_STRING=new Cn("");const S5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ba(i){if(pt(!!i,39018),typeof i=="string"){let e=0;const n=S5.exec(i);if(pt(!!n,46558,{timestamp:i}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(i);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Xt(i.seconds),nanos:Xt(i.nanos)}}function Xt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function wa(i){return typeof i=="string"?Cn.fromBase64String(i):Cn.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vw="server_timestamp",_w="__type__",bw="__previous_value__",ww="__local_write_time__";function Lp(i){var e,n;return((n=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[_w])===null||n===void 0?void 0:n.stringValue)===vw}function ch(i){const e=i.mapValue.fields[bw];return Lp(e)?ch(e):e}function Mc(i){const e=ba(i.mapValue.fields[ww].timestampValue);return new Ct(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A5{constructor(e,n,r,o,c,h,p,g,y,w){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=o,this.ssl=c,this.forceLongPolling=h,this.autoDetectLongPolling=p,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=w}}const zd="(default)";class Lc{constructor(e,n){this.projectId=e,this.database=n||zd}static empty(){return new Lc("","")}get isDefaultDatabase(){return this.database===zd}isEqual(e){return e instanceof Lc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xw="__type__",T5="__max__",fd={mapValue:{}},Ew="__vector__",Fd="value";function xa(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Lp(i)?4:C5(i)?9007199254740991:R5(i)?10:11:Pe(28295,{value:i})}function Ps(i,e){if(i===e)return!0;const n=xa(i);if(n!==xa(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Mc(i).isEqual(Mc(e));case 3:return function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const h=ba(o.timestampValue),p=ba(c.timestampValue);return h.seconds===p.seconds&&h.nanos===p.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return function(o,c){return wa(o.bytesValue).isEqual(wa(c.bytesValue))}(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return function(o,c){return Xt(o.geoPointValue.latitude)===Xt(c.geoPointValue.latitude)&&Xt(o.geoPointValue.longitude)===Xt(c.geoPointValue.longitude)}(i,e);case 2:return function(o,c){if("integerValue"in o&&"integerValue"in c)return Xt(o.integerValue)===Xt(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const h=Xt(o.doubleValue),p=Xt(c.doubleValue);return h===p?Bd(h)===Bd(p):isNaN(h)&&isNaN(p)}return!1}(i,e);case 9:return ol(i.arrayValue.values||[],e.arrayValue.values||[],Ps);case 10:case 11:return function(o,c){const h=o.mapValue.fields||{},p=c.mapValue.fields||{};if(N1(h)!==N1(p))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(p[g]===void 0||!Ps(h[g],p[g])))return!1;return!0}(i,e);default:return Pe(52216,{left:i})}}function Vc(i,e){return(i.values||[]).find(n=>Ps(n,e))!==void 0}function ll(i,e){if(i===e)return 0;const n=xa(i),r=xa(e);if(n!==r)return Ke(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ke(i.booleanValue,e.booleanValue);case 2:return function(c,h){const p=Xt(c.integerValue||c.doubleValue),g=Xt(h.integerValue||h.doubleValue);return p<g?-1:p>g?1:p===g?0:isNaN(p)?isNaN(g)?0:-1:1}(i,e);case 3:return j1(i.timestampValue,e.timestampValue);case 4:return j1(Mc(i),Mc(e));case 5:return Zm(i.stringValue,e.stringValue);case 6:return function(c,h){const p=wa(c),g=wa(h);return p.compareTo(g)}(i.bytesValue,e.bytesValue);case 7:return function(c,h){const p=c.split("/"),g=h.split("/");for(let y=0;y<p.length&&y<g.length;y++){const w=Ke(p[y],g[y]);if(w!==0)return w}return Ke(p.length,g.length)}(i.referenceValue,e.referenceValue);case 8:return function(c,h){const p=Ke(Xt(c.latitude),Xt(h.latitude));return p!==0?p:Ke(Xt(c.longitude),Xt(h.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return O1(i.arrayValue,e.arrayValue);case 10:return function(c,h){var p,g,y,w;const E=c.fields||{},A=h.fields||{},B=(p=E[Fd])===null||p===void 0?void 0:p.arrayValue,H=(g=A[Fd])===null||g===void 0?void 0:g.arrayValue,q=Ke(((y=B==null?void 0:B.values)===null||y===void 0?void 0:y.length)||0,((w=H==null?void 0:H.values)===null||w===void 0?void 0:w.length)||0);return q!==0?q:O1(B,H)}(i.mapValue,e.mapValue);case 11:return function(c,h){if(c===fd.mapValue&&h===fd.mapValue)return 0;if(c===fd.mapValue)return 1;if(h===fd.mapValue)return-1;const p=c.fields||{},g=Object.keys(p),y=h.fields||{},w=Object.keys(y);g.sort(),w.sort();for(let E=0;E<g.length&&E<w.length;++E){const A=Zm(g[E],w[E]);if(A!==0)return A;const B=ll(p[g[E]],y[w[E]]);if(B!==0)return B}return Ke(g.length,w.length)}(i.mapValue,e.mapValue);default:throw Pe(23264,{le:n})}}function j1(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Ke(i,e);const n=ba(i),r=ba(e),o=Ke(n.seconds,r.seconds);return o!==0?o:Ke(n.nanos,r.nanos)}function O1(i,e){const n=i.values||[],r=e.values||[];for(let o=0;o<n.length&&o<r.length;++o){const c=ll(n[o],r[o]);if(c)return c}return Ke(n.length,r.length)}function cl(i){return Km(i)}function Km(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(n){const r=ba(n);return`time(${r.seconds},${r.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?function(n){return wa(n).toBase64()}(i.bytesValue):"referenceValue"in i?function(n){return Ne.fromName(n).toString()}(i.referenceValue):"geoPointValue"in i?function(n){return`geo(${n.latitude},${n.longitude})`}(i.geoPointValue):"arrayValue"in i?function(n){let r="[",o=!0;for(const c of n.values||[])o?o=!1:r+=",",r+=Km(c);return r+"]"}(i.arrayValue):"mapValue"in i?function(n){const r=Object.keys(n.fields||{}).sort();let o="{",c=!0;for(const h of r)c?c=!1:o+=",",o+=`${h}:${Km(n.fields[h])}`;return o+"}"}(i.mapValue):Pe(61005,{value:i})}function Ed(i){switch(xa(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ch(i);return e?16+Ed(e):16;case 5:return 2*i.stringValue.length;case 6:return wa(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((o,c)=>o+Ed(c),0)}(i.arrayValue);case 10:case 11:return function(r){let o=0;return lo(r.fields,(c,h)=>{o+=c.length+Ed(h)}),o}(i.mapValue);default:throw Pe(13486,{value:i})}}function Ym(i){return!!i&&"integerValue"in i}function Vp(i){return!!i&&"arrayValue"in i}function M1(i){return!!i&&"nullValue"in i}function L1(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Sd(i){return!!i&&"mapValue"in i}function R5(i){var e,n;return((n=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[xw])===null||n===void 0?void 0:n.stringValue)===Ew}function Ec(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return lo(i.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ec(r)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ec(i.arrayValue.values[n]);return e}return Object.assign({},i)}function C5(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===T5}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e){this.value=e}static empty(){return new zi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Sd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ec(n)}setAll(e){let n=Rn.emptyPath(),r={},o=[];e.forEach((h,p)=>{if(!n.isImmediateParentOf(p)){const g=this.getFieldsMap(n);this.applyChanges(g,r,o),r={},o=[],n=p.popLast()}h?r[p.lastSegment()]=Ec(h):o.push(p.lastSegment())});const c=this.getFieldsMap(n);this.applyChanges(c,r,o)}delete(e){const n=this.field(e.popLast());Sd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ps(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=n.mapValue.fields[e.get(r)];Sd(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,r){lo(n,(o,c)=>e[o]=c);for(const o of r)delete e[o]}clone(){return new zi(Ec(this.value))}}function Sw(i){const e=[];return lo(i.fields,(n,r)=>{const o=new Rn([n]);if(Sd(r)){const c=Sw(r.mapValue).fields;if(c.length===0)e.push(o);else for(const h of c)e.push(o.child(h))}else e.push(o)}),new os(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e,n,r,o,c,h,p){this.key=e,this.documentType=n,this.version=r,this.readTime=o,this.createTime=c,this.data=h,this.documentState=p}static newInvalidDocument(e){return new Ln(e,0,ze.min(),ze.min(),ze.min(),zi.empty(),0)}static newFoundDocument(e,n,r,o){return new Ln(e,1,n,ze.min(),r,o,0)}static newNoDocument(e,n){return new Ln(e,2,n,ze.min(),ze.min(),zi.empty(),0)}static newUnknownDocument(e,n){return new Ln(e,3,n,ze.min(),ze.min(),zi.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ze.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=zi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=zi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ze.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ln&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ln(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(e,n){this.position=e,this.inclusive=n}}function V1(i,e,n){let r=0;for(let o=0;o<i.position.length;o++){const c=e[o],h=i.position[o];if(c.field.isKeyField()?r=Ne.comparator(Ne.fromName(h.referenceValue),n.key):r=ll(h,n.data.field(c.field)),c.dir==="desc"&&(r*=-1),r!==0)break}return r}function P1(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!Ps(i.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{constructor(e,n="asc"){this.field=e,this.dir=n}}function I5(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{}class cn extends Aw{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new N5(e,n,r):n==="array-contains"?new O5(e,r):n==="in"?new M5(e,r):n==="not-in"?new L5(e,r):n==="array-contains-any"?new V5(e,r):new cn(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new D5(e,r):new j5(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ll(n,this.value)):n!==null&&xa(this.value)===xa(n)&&this.matchesComparison(ll(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Pe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Us extends Aw{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new Us(e,n)}matches(e){return Tw(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function Tw(i){return i.op==="and"}function Rw(i){return k5(i)&&Tw(i)}function k5(i){for(const e of i.filters)if(e instanceof Us)return!1;return!0}function Qm(i){if(i instanceof cn)return i.field.canonicalString()+i.op.toString()+cl(i.value);if(Rw(i))return i.filters.map(e=>Qm(e)).join(",");{const e=i.filters.map(n=>Qm(n)).join(",");return`${i.op}(${e})`}}function Cw(i,e){return i instanceof cn?function(r,o){return o instanceof cn&&r.op===o.op&&r.field.isEqual(o.field)&&Ps(r.value,o.value)}(i,e):i instanceof Us?function(r,o){return o instanceof Us&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce((c,h,p)=>c&&Cw(h,o.filters[p]),!0):!1}(i,e):void Pe(19439)}function Iw(i){return i instanceof cn?function(n){return`${n.field.canonicalString()} ${n.op} ${cl(n.value)}`}(i):i instanceof Us?function(n){return n.op.toString()+" {"+n.getFilters().map(Iw).join(" ,")+"}"}(i):"Filter"}class N5 extends cn{constructor(e,n,r){super(e,n,r),this.key=Ne.fromName(r.referenceValue)}matches(e){const n=Ne.comparator(e.key,this.key);return this.matchesComparison(n)}}class D5 extends cn{constructor(e,n){super(e,"in",n),this.keys=kw("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class j5 extends cn{constructor(e,n){super(e,"not-in",n),this.keys=kw("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function kw(i,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Ne.fromName(r.referenceValue))}class O5 extends cn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Vp(n)&&Vc(n.arrayValue,this.value)}}class M5 extends cn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Vc(this.value.arrayValue,n)}}class L5 extends cn{constructor(e,n){super(e,"not-in",n)}matches(e){if(Vc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Vc(this.value.arrayValue,n)}}class V5 extends cn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Vp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Vc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P5{constructor(e,n=null,r=[],o=[],c=null,h=null,p=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=o,this.limit=c,this.startAt=h,this.endAt=p,this.Pe=null}}function U1(i,e=null,n=[],r=[],o=null,c=null,h=null){return new P5(i,e,n,r,o,c,h)}function Pp(i){const e=He(i);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Qm(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(c){return c.field.canonicalString()+c.dir}(r)).join(","),lh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>cl(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>cl(r)).join(",")),e.Pe=n}return e.Pe}function Up(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!I5(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!Cw(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!P1(i.startAt,e.startAt)&&P1(i.endAt,e.endAt)}function $m(i){return Ne.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(e,n=null,r=[],o=[],c=null,h="F",p=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=o,this.limit=c,this.limitType=h,this.startAt=p,this.endAt=g,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function U5(i,e,n,r,o,c,h,p){return new uh(i,e,n,r,o,c,h,p)}function Bp(i){return new uh(i)}function B1(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function B5(i){return i.collectionGroup!==null}function Sc(i){const e=He(i);if(e.Te===null){e.Te=[];const n=new Set;for(const c of e.explicitOrderBy)e.Te.push(c),n.add(c.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let p=new un(Rn.comparator);return h.filters.forEach(g=>{g.getFlattenedFilters().forEach(y=>{y.isInequality()&&(p=p.add(y.field))})}),p})(e).forEach(c=>{n.has(c.canonicalString())||c.isKeyField()||e.Te.push(new qd(c,r))}),n.has(Rn.keyField().canonicalString())||e.Te.push(new qd(Rn.keyField(),r))}return e.Te}function js(i){const e=He(i);return e.Ie||(e.Ie=z5(e,Sc(i))),e.Ie}function z5(i,e){if(i.limitType==="F")return U1(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(o=>{const c=o.dir==="desc"?"asc":"desc";return new qd(o.field,c)});const n=i.endAt?new Hd(i.endAt.position,i.endAt.inclusive):null,r=i.startAt?new Hd(i.startAt.position,i.startAt.inclusive):null;return U1(i.path,i.collectionGroup,e,i.filters,i.limit,n,r)}}function Jm(i,e,n){return new uh(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function dh(i,e){return Up(js(i),js(e))&&i.limitType===e.limitType}function Nw(i){return`${Pp(js(i))}|lt:${i.limitType}`}function Jo(i){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(o=>Iw(o)).join(", ")}]`),lh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(o=>function(h){return`${h.field.canonicalString()} (${h.dir})`}(o)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(o=>cl(o)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(o=>cl(o)).join(",")),`Target(${r})`}(js(i))}; limitType=${i.limitType})`}function hh(i,e){return e.isFoundDocument()&&function(r,o){const c=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(c):Ne.isDocumentKey(r.path)?r.path.isEqual(c):r.path.isImmediateParentOf(c)}(i,e)&&function(r,o){for(const c of Sc(r))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0}(i,e)&&function(r,o){for(const c of r.filters)if(!c.matches(o))return!1;return!0}(i,e)&&function(r,o){return!(r.startAt&&!function(h,p,g){const y=V1(h,p,g);return h.inclusive?y<=0:y<0}(r.startAt,Sc(r),o)||r.endAt&&!function(h,p,g){const y=V1(h,p,g);return h.inclusive?y>=0:y>0}(r.endAt,Sc(r),o))}(i,e)}function F5(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function Dw(i){return(e,n)=>{let r=!1;for(const o of Sc(i)){const c=H5(o,e,n);if(c!==0)return c;r=r||o.field.isKeyField()}return 0}}function H5(i,e,n){const r=i.field.isKeyField()?Ne.comparator(e.key,n.key):function(c,h,p){const g=h.data.field(c),y=p.data.field(c);return g!==null&&y!==null?ll(g,y):Pe(42886)}(i.field,e,n);switch(i.dir){case"asc":return r;case"desc":return-1*r;default:return Pe(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[o,c]of r)if(this.equalsFn(o,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[n]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){lo(this.inner,(n,r)=>{for(const[o,c]of r)e(o,c)})}isEmpty(){return gw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q5=new Ut(Ne.comparator);function Sr(){return q5}const jw=new Ut(Ne.comparator);function gc(...i){let e=jw;for(const n of i)e=e.insert(n.key,n);return e}function Ow(i){let e=jw;return i.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ya(){return Ac()}function Mw(){return Ac()}function Ac(){return new co(i=>i.toString(),(i,e)=>i.isEqual(e))}const G5=new Ut(Ne.comparator),X5=new un(Ne.comparator);function tt(...i){let e=X5;for(const n of i)e=e.add(n);return e}const W5=new un(Ke);function Z5(){return W5}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zp(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bd(e)?"-0":e}}function Lw(i){return{integerValue:""+i}}function K5(i,e){return w5(e)?Lw(e):zp(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(){this._=void 0}}function Y5(i,e,n){return i instanceof Gd?function(o,c){const h={fields:{[_w]:{stringValue:vw},[ww]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&Lp(c)&&(c=ch(c)),c&&(h.fields[bw]=c),{mapValue:h}}(n,e):i instanceof Pc?Pw(i,e):i instanceof Uc?Uw(i,e):function(o,c){const h=Vw(o,c),p=z1(h)+z1(o.Ee);return Ym(h)&&Ym(o.Ee)?Lw(p):zp(o.serializer,p)}(i,e)}function Q5(i,e,n){return i instanceof Pc?Pw(i,e):i instanceof Uc?Uw(i,e):n}function Vw(i,e){return i instanceof Xd?function(r){return Ym(r)||function(c){return!!c&&"doubleValue"in c}(r)}(e)?e:{integerValue:0}:null}class Gd extends fh{}class Pc extends fh{constructor(e){super(),this.elements=e}}function Pw(i,e){const n=Bw(e);for(const r of i.elements)n.some(o=>Ps(o,r))||n.push(r);return{arrayValue:{values:n}}}class Uc extends fh{constructor(e){super(),this.elements=e}}function Uw(i,e){let n=Bw(e);for(const r of i.elements)n=n.filter(o=>!Ps(o,r));return{arrayValue:{values:n}}}class Xd extends fh{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function z1(i){return Xt(i.integerValue||i.doubleValue)}function Bw(i){return Vp(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function $5(i,e){return i.field.isEqual(e.field)&&function(r,o){return r instanceof Pc&&o instanceof Pc||r instanceof Uc&&o instanceof Uc?ol(r.elements,o.elements,Ps):r instanceof Xd&&o instanceof Xd?Ps(r.Ee,o.Ee):r instanceof Gd&&o instanceof Gd}(i.transform,e.transform)}class J5{constructor(e,n){this.version=e,this.transformResults=n}}class _r{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new _r}static exists(e){return new _r(void 0,e)}static updateTime(e){return new _r(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ad(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class mh{}function zw(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new Hw(i.key,_r.none()):new Yc(i.key,i.data,_r.none());{const n=i.data,r=zi.empty();let o=new un(Rn.comparator);for(let c of e.fields)if(!o.has(c)){let h=n.field(c);h===null&&c.length>1&&(c=c.popLast(),h=n.field(c)),h===null?r.delete(c):r.set(c,h),o=o.add(c)}return new uo(i.key,r,new os(o.toArray()),_r.none())}}function e4(i,e,n){i instanceof Yc?function(o,c,h){const p=o.value.clone(),g=H1(o.fieldTransforms,c,h.transformResults);p.setAll(g),c.convertToFoundDocument(h.version,p).setHasCommittedMutations()}(i,e,n):i instanceof uo?function(o,c,h){if(!Ad(o.precondition,c))return void c.convertToUnknownDocument(h.version);const p=H1(o.fieldTransforms,c,h.transformResults),g=c.data;g.setAll(Fw(o)),g.setAll(p),c.convertToFoundDocument(h.version,g).setHasCommittedMutations()}(i,e,n):function(o,c,h){c.convertToNoDocument(h.version).setHasCommittedMutations()}(0,e,n)}function Tc(i,e,n,r){return i instanceof Yc?function(c,h,p,g){if(!Ad(c.precondition,h))return p;const y=c.value.clone(),w=q1(c.fieldTransforms,g,h);return y.setAll(w),h.convertToFoundDocument(h.version,y).setHasLocalMutations(),null}(i,e,n,r):i instanceof uo?function(c,h,p,g){if(!Ad(c.precondition,h))return p;const y=q1(c.fieldTransforms,g,h),w=h.data;return w.setAll(Fw(c)),w.setAll(y),h.convertToFoundDocument(h.version,w).setHasLocalMutations(),p===null?null:p.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(E=>E.field))}(i,e,n,r):function(c,h,p){return Ad(c.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):p}(i,e,n)}function t4(i,e){let n=null;for(const r of i.fieldTransforms){const o=e.data.field(r.field),c=Vw(r.transform,o||null);c!=null&&(n===null&&(n=zi.empty()),n.set(r.field,c))}return n||null}function F1(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&ol(r,o,(c,h)=>$5(c,h))}(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class Yc extends mh{constructor(e,n,r,o=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class uo extends mh{constructor(e,n,r,o,c=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function Fw(i){const e=new Map;return i.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=i.data.field(n);e.set(n,r)}}),e}function H1(i,e,n){const r=new Map;pt(i.length===n.length,32656,{Ae:n.length,Re:i.length});for(let o=0;o<n.length;o++){const c=i[o],h=c.transform,p=e.data.field(c.field);r.set(c.field,Q5(h,p,n[o]))}return r}function q1(i,e,n){const r=new Map;for(const o of i){const c=o.transform,h=n.data.field(o.field);r.set(o.field,Y5(c,h,e))}return r}class Hw extends mh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class n4 extends mh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i4{constructor(e,n,r,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&e4(c,e,r[o])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Tc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Tc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Mw();return this.mutations.forEach(o=>{const c=e.get(o.key),h=c.overlayedDocument;let p=this.applyToLocalView(h,c.mutatedFields);p=n.has(o.key)?null:p;const g=zw(h,p);g!==null&&r.set(o.key,g),h.isValidDocument()||h.convertToNoDocument(ze.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),tt())}isEqual(e){return this.batchId===e.batchId&&ol(this.mutations,e.mutations,(n,r)=>F1(n,r))&&ol(this.baseMutations,e.baseMutations,(n,r)=>F1(n,r))}}class Fp{constructor(e,n,r,o){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=o}static from(e,n,r){pt(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let o=function(){return G5}();const c=e.mutations;for(let h=0;h<c.length;h++)o=o.insert(c[h].key,r[h].version);return new Fp(e,n,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s4{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r4{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $t,at;function a4(i){switch(i){case fe.OK:return Pe(64938);case fe.CANCELLED:case fe.UNKNOWN:case fe.DEADLINE_EXCEEDED:case fe.RESOURCE_EXHAUSTED:case fe.INTERNAL:case fe.UNAVAILABLE:case fe.UNAUTHENTICATED:return!1;case fe.INVALID_ARGUMENT:case fe.NOT_FOUND:case fe.ALREADY_EXISTS:case fe.PERMISSION_DENIED:case fe.FAILED_PRECONDITION:case fe.ABORTED:case fe.OUT_OF_RANGE:case fe.UNIMPLEMENTED:case fe.DATA_LOSS:return!0;default:return Pe(15467,{code:i})}}function qw(i){if(i===void 0)return Er("GRPC error has no .code"),fe.UNKNOWN;switch(i){case $t.OK:return fe.OK;case $t.CANCELLED:return fe.CANCELLED;case $t.UNKNOWN:return fe.UNKNOWN;case $t.DEADLINE_EXCEEDED:return fe.DEADLINE_EXCEEDED;case $t.RESOURCE_EXHAUSTED:return fe.RESOURCE_EXHAUSTED;case $t.INTERNAL:return fe.INTERNAL;case $t.UNAVAILABLE:return fe.UNAVAILABLE;case $t.UNAUTHENTICATED:return fe.UNAUTHENTICATED;case $t.INVALID_ARGUMENT:return fe.INVALID_ARGUMENT;case $t.NOT_FOUND:return fe.NOT_FOUND;case $t.ALREADY_EXISTS:return fe.ALREADY_EXISTS;case $t.PERMISSION_DENIED:return fe.PERMISSION_DENIED;case $t.FAILED_PRECONDITION:return fe.FAILED_PRECONDITION;case $t.ABORTED:return fe.ABORTED;case $t.OUT_OF_RANGE:return fe.OUT_OF_RANGE;case $t.UNIMPLEMENTED:return fe.UNIMPLEMENTED;case $t.DATA_LOSS:return fe.DATA_LOSS;default:return Pe(39323,{code:i})}}(at=$t||($t={}))[at.OK=0]="OK",at[at.CANCELLED=1]="CANCELLED",at[at.UNKNOWN=2]="UNKNOWN",at[at.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",at[at.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",at[at.NOT_FOUND=5]="NOT_FOUND",at[at.ALREADY_EXISTS=6]="ALREADY_EXISTS",at[at.PERMISSION_DENIED=7]="PERMISSION_DENIED",at[at.UNAUTHENTICATED=16]="UNAUTHENTICATED",at[at.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",at[at.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",at[at.ABORTED=10]="ABORTED",at[at.OUT_OF_RANGE=11]="OUT_OF_RANGE",at[at.UNIMPLEMENTED=12]="UNIMPLEMENTED",at[at.INTERNAL=13]="INTERNAL",at[at.UNAVAILABLE=14]="UNAVAILABLE",at[at.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o4=new pa([4294967295,4294967295],0);function G1(i){const e=fw().encode(i),n=new rw;return n.update(e),new Uint8Array(n.digest())}function X1(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new pa([n,r],0),new pa([o,c],0)]}class Hp{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new yc(`Invalid padding: ${n}`);if(r<0)throw new yc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new yc(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new yc(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=pa.fromNumber(this.fe)}pe(e,n,r){let o=e.add(n.multiply(pa.fromNumber(r)));return o.compare(o4)===1&&(o=new pa([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=G1(e),[r,o]=X1(n);for(let c=0;c<this.hashCount;c++){const h=this.pe(r,o,c);if(!this.ye(h))return!1}return!0}static create(e,n,r){const o=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),h=new Hp(c,o,n);return r.forEach(p=>h.insert(p)),h}insert(e){if(this.fe===0)return;const n=G1(e),[r,o]=X1(n);for(let c=0;c<this.hashCount;c++){const h=this.pe(r,o,c);this.we(h)}}we(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class yc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(e,n,r,o,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const o=new Map;return o.set(e,Qc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new ph(ze.min(),o,new Ut(Ke),Sr(),tt())}}class Qc{constructor(e,n,r,o,c){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Qc(r,n,tt(),tt(),tt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(e,n,r,o){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=o}}class Gw{constructor(e,n){this.targetId=e,this.De=n}}class Xw{constructor(e,n,r=Cn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=o}}class W1{constructor(){this.ve=0,this.Ce=Z1(),this.Fe=Cn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=tt(),n=tt(),r=tt();return this.Ce.forEach((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:r=r.add(o);break;default:Pe(38017,{changeType:c})}}),new Qc(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=Z1()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,pt(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class l4{constructor(e){this.We=e,this.Ge=new Map,this.ze=Sr(),this.je=md(),this.Je=md(),this.He=new Ut(Ke)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:Pe(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,o)=>{this.nt(o)&&n(o)})}it(e){const n=e.targetId,r=e.De.count,o=this.st(n);if(o){const c=o.target;if($m(c))if(r===0){const h=new Ne(c.path);this.Xe(n,h,Ln.newNoDocument(h,ze.min()))}else pt(r===1,20013,{expectedCount:r});else{const h=this.ot(n);if(h!==r){const p=this._t(e),g=p?this.ut(p,e,h):1;if(g!==0){this.rt(n);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,y)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:c=0}=n;let h,p;try{h=wa(r).toUint8Array()}catch(g){if(g instanceof yw)return va("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{p=new Hp(h,o,c)}catch(g){return va(g instanceof yc?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return p.fe===0?null:p}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){const r=this.We.getRemoteKeysForTarget(n);let o=0;return r.forEach(c=>{const h=this.We.lt(),p=`projects/${h.projectId}/databases/${h.database}/documents/${c.path.canonicalString()}`;e.mightContain(p)||(this.Xe(n,c,null),o++)}),o}Pt(e){const n=new Map;this.Ge.forEach((c,h)=>{const p=this.st(h);if(p){if(c.current&&$m(p.target)){const g=new Ne(p.target.path);this.Tt(g).has(h)||this.It(h,g)||this.Xe(h,g,Ln.newNoDocument(g,e))}c.Ne&&(n.set(h,c.Le()),c.ke())}});let r=tt();this.Je.forEach((c,h)=>{let p=!0;h.forEachWhile(g=>{const y=this.st(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)}),p&&(r=r.add(c))}),this.ze.forEach((c,h)=>h.setReadTime(e));const o=new ph(e,n,this.He,this.ze,r);return this.ze=Sr(),this.je=md(),this.Je=md(),this.He=new Ut(Ke),o}Ze(e,n){if(!this.nt(e))return;const r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;const o=this.tt(e);this.It(e,n)?o.qe(n,1):o.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new W1,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new un(Ke),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new un(Ke),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||xe("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new W1),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function md(){return new Ut(Ne.comparator)}function Z1(){return new Ut(Ne.comparator)}const c4={asc:"ASCENDING",desc:"DESCENDING"},u4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},d4={and:"AND",or:"OR"};class h4{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function ep(i,e){return i.useProto3Json||lh(e)?e:{value:e}}function Wd(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ww(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function f4(i,e){return Wd(i,e.toTimestamp())}function Os(i){return pt(!!i,49232),ze.fromTimestamp(function(n){const r=ba(n);return new Ct(r.seconds,r.nanos)}(i))}function qp(i,e){return tp(i,e).canonicalString()}function tp(i,e){const n=function(o){return new Vt(["projects",o.projectId,"databases",o.database])}(i).child("documents");return e===void 0?n:n.child(e)}function Zw(i){const e=Vt.fromString(i);return pt(Jw(e),10190,{key:e.toString()}),e}function np(i,e){return qp(i.databaseId,e.path)}function Im(i,e){const n=Zw(e);if(n.get(1)!==i.databaseId.projectId)throw new Ie(fe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new Ie(fe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new Ne(Yw(n))}function Kw(i,e){return qp(i.databaseId,e)}function m4(i){const e=Zw(i);return e.length===4?Vt.emptyPath():Yw(e)}function ip(i){return new Vt(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function Yw(i){return pt(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function K1(i,e,n){return{name:np(i,e),fields:n.value.mapValue.fields}}function p4(i,e){let n;if("targetChange"in e){e.targetChange;const r=function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Pe(39313,{state:y})}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],c=function(y,w){return y.useProto3Json?(pt(w===void 0||typeof w=="string",58123),Cn.fromBase64String(w||"")):(pt(w===void 0||w instanceof Buffer||w instanceof Uint8Array,16193),Cn.fromUint8Array(w||new Uint8Array))}(i,e.targetChange.resumeToken),h=e.targetChange.cause,p=h&&function(y){const w=y.code===void 0?fe.UNKNOWN:qw(y.code);return new Ie(w,y.message||"")}(h);n=new Xw(r,o,c,p||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=Im(i,r.document.name),c=Os(r.document.updateTime),h=r.document.createTime?Os(r.document.createTime):ze.min(),p=new zi({mapValue:{fields:r.document.fields}}),g=Ln.newFoundDocument(o,c,h,p),y=r.targetIds||[],w=r.removedTargetIds||[];n=new Td(y,w,g.key,g)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=Im(i,r.document),c=r.readTime?Os(r.readTime):ze.min(),h=Ln.newNoDocument(o,c),p=r.removedTargetIds||[];n=new Td([],p,h.key,h)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=Im(i,r.document),c=r.removedTargetIds||[];n=new Td([],c,o,null)}else{if(!("filter"in e))return Pe(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:c}=r,h=new r4(o,c),p=r.targetId;n=new Gw(p,h)}}return n}function g4(i,e){let n;if(e instanceof Yc)n={update:K1(i,e.key,e.value)};else if(e instanceof Hw)n={delete:np(i,e.key)};else if(e instanceof uo)n={update:K1(i,e.key,e.data),updateMask:A4(e.fieldMask)};else{if(!(e instanceof n4))return Pe(16599,{Rt:e.type});n={verify:np(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(c,h){const p=h.transform;if(p instanceof Gd)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof Pc)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof Uc)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof Xd)return{fieldPath:h.field.canonicalString(),increment:p.Ee};throw Pe(20930,{transform:h.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(o,c){return c.updateTime!==void 0?{updateTime:f4(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Pe(27497)}(i,e.precondition)),n}function y4(i,e){return i&&i.length>0?(pt(e!==void 0,14353),i.map(n=>function(o,c){let h=o.updateTime?Os(o.updateTime):Os(c);return h.isEqual(ze.min())&&(h=Os(c)),new J5(h,o.transformResults||[])}(n,e))):[]}function v4(i,e){return{documents:[Kw(i,e.path)]}}function _4(i,e){const n={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Kw(i,o);const c=function(y){if(y.length!==0)return $w(Us.create(y,"and"))}(e.filters);c&&(n.structuredQuery.where=c);const h=function(y){if(y.length!==0)return y.map(w=>function(A){return{field:el(A.field),direction:x4(A.dir)}}(w))}(e.orderBy);h&&(n.structuredQuery.orderBy=h);const p=ep(i,e.limit);return p!==null&&(n.structuredQuery.limit=p),e.startAt&&(n.structuredQuery.startAt=function(y){return{before:y.inclusive,values:y.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(y){return{before:!y.inclusive,values:y.position}}(e.endAt)),{Vt:n,parent:o}}function b4(i){let e=m4(i.parent);const n=i.structuredQuery,r=n.from?n.from.length:0;let o=null;if(r>0){pt(r===1,65062);const w=n.from[0];w.allDescendants?o=w.collectionId:e=e.child(w.collectionId)}let c=[];n.where&&(c=function(E){const A=Qw(E);return A instanceof Us&&Rw(A)?A.getFilters():[A]}(n.where));let h=[];n.orderBy&&(h=function(E){return E.map(A=>function(H){return new qd(tl(H.field),function(Q){switch(Q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(H.direction))}(A))}(n.orderBy));let p=null;n.limit&&(p=function(E){let A;return A=typeof E=="object"?E.value:E,lh(A)?null:A}(n.limit));let g=null;n.startAt&&(g=function(E){const A=!!E.before,B=E.values||[];return new Hd(B,A)}(n.startAt));let y=null;return n.endAt&&(y=function(E){const A=!E.before,B=E.values||[];return new Hd(B,A)}(n.endAt)),U5(e,o,h,c,p,"F",g,y)}function w4(i,e){const n=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Pe(28987,{purpose:o})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Qw(i){return i.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=tl(n.unaryFilter.field);return cn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=tl(n.unaryFilter.field);return cn.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=tl(n.unaryFilter.field);return cn.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=tl(n.unaryFilter.field);return cn.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Pe(61313);default:return Pe(60726)}}(i):i.fieldFilter!==void 0?function(n){return cn.create(tl(n.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Pe(58110);default:return Pe(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(i):i.compositeFilter!==void 0?function(n){return Us.create(n.compositeFilter.filters.map(r=>Qw(r)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Pe(1026)}}(n.compositeFilter.op))}(i):Pe(30097,{filter:i})}function x4(i){return c4[i]}function E4(i){return u4[i]}function S4(i){return d4[i]}function el(i){return{fieldPath:i.canonicalString()}}function tl(i){return Rn.fromServerFormat(i.fieldPath)}function $w(i){return i instanceof cn?function(n){if(n.op==="=="){if(L1(n.value))return{unaryFilter:{field:el(n.field),op:"IS_NAN"}};if(M1(n.value))return{unaryFilter:{field:el(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(L1(n.value))return{unaryFilter:{field:el(n.field),op:"IS_NOT_NAN"}};if(M1(n.value))return{unaryFilter:{field:el(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:el(n.field),op:E4(n.op),value:n.value}}}(i):i instanceof Us?function(n){const r=n.getFilters().map(o=>$w(o));return r.length===1?r[0]:{compositeFilter:{op:S4(n.op),filters:r}}}(i):Pe(54877,{filter:i})}function A4(i){const e=[];return i.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Jw(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(e,n,r,o,c=ze.min(),h=ze.min(),p=Cn.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=p,this.expectedCount=g}withSequenceNumber(e){return new ha(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ha(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ha(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ha(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T4{constructor(e){this.gt=e}}function R4(i){const e=b4({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?Jm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C4{constructor(){this.Dn=new I4}addToCollectionParentIndex(e,n){return this.Dn.add(n),de.resolve()}getCollectionParents(e,n){return de.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return de.resolve()}deleteFieldIndex(e,n){return de.resolve()}deleteAllFieldIndexes(e){return de.resolve()}createTargetIndexes(e,n){return de.resolve()}getDocumentsMatchingTarget(e,n){return de.resolve(null)}getIndexType(e,n){return de.resolve(0)}getFieldIndexes(e,n){return de.resolve([])}getNextCollectionGroupToUpdate(e){return de.resolve(null)}getMinOffset(e,n){return de.resolve(_a.min())}getMinOffsetFromCollectionGroup(e,n){return de.resolve(_a.min())}updateCollectionGroup(e,n,r){return de.resolve()}updateIndexEntries(e,n){return de.resolve()}}class I4{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),o=this.index[n]||new un(Vt.comparator),c=!o.has(r);return this.index[n]=o.add(r),c}has(e){const n=e.lastSegment(),r=e.popLast(),o=this.index[n];return o&&o.has(r)}getEntries(e){return(this.index[e]||new un(Vt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},e2=41943040;class oi{static withCacheSize(e){return new oi(e,oi.DEFAULT_COLLECTION_PERCENTILE,oi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */oi.DEFAULT_COLLECTION_PERCENTILE=10,oi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,oi.DEFAULT=new oi(e2,oi.DEFAULT_COLLECTION_PERCENTILE,oi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),oi.DISABLED=new oi(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new ul(0)}static ur(){return new ul(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q1="LruGarbageCollector",k4=1048576;function $1([i,e],[n,r]){const o=Ke(i,n);return o===0?Ke(e,r):o}class N4{constructor(e){this.Tr=e,this.buffer=new un($1),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();$1(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class D4{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){xe(Q1,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){vl(n)?xe(Q1,"Ignoring IndexedDB error during garbage collection: ",n):await yl(n)}await this.Rr(3e5)})}}class j4{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return de.resolve(oh.ue);const r=new N4(n);return this.Vr.forEachTarget(e,o=>r.Er(o.sequenceNumber)).next(()=>this.Vr.gr(e,o=>r.Er(o))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(xe("LruGarbageCollector","Garbage collection skipped; disabled"),de.resolve(Y1)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(xe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Y1):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,o,c,h,p,g,y;const w=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(E=>(E>this.params.maximumSequenceNumbersToCollect?(xe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,h=Date.now(),this.nthSequenceNumber(e,o))).next(E=>(r=E,p=Date.now(),this.removeTargets(e,r,n))).next(E=>(c=E,g=Date.now(),this.removeOrphanedDocuments(e,r))).next(E=>(y=Date.now(),$o()<=et.DEBUG&&xe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-w}ms
	Determined least recently used ${o} in `+(p-h)+`ms
	Removed ${c} targets in `+(g-p)+`ms
	Removed ${E} documents in `+(y-g)+`ms
Total Duration: ${y-w}ms`),de.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:E})))}}function O4(i,e){return new j4(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M4{constructor(){this.changes=new co(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ln.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?de.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L4{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V4{constructor(e,n,r,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(o=>(r=o,this.remoteDocumentCache.getEntry(e,n))).next(o=>(r!==null&&Tc(r.mutation,o,os.empty(),Ct.now()),o))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,tt()).next(()=>r))}getLocalViewOfDocuments(e,n,r=tt()){const o=Ya();return this.populateOverlays(e,o,n).next(()=>this.computeViews(e,n,o,r).next(c=>{let h=gc();return c.forEach((p,g)=>{h=h.insert(p,g.overlayedDocument)}),h}))}getOverlayedDocuments(e,n){const r=Ya();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,tt()))}populateOverlays(e,n,r){const o=[];return r.forEach(c=>{n.has(c)||o.push(c)}),this.documentOverlayCache.getOverlays(e,o).next(c=>{c.forEach((h,p)=>{n.set(h,p)})})}computeViews(e,n,r,o){let c=Sr();const h=Ac(),p=function(){return Ac()}();return n.forEach((g,y)=>{const w=r.get(y.key);o.has(y.key)&&(w===void 0||w.mutation instanceof uo)?c=c.insert(y.key,y):w!==void 0?(h.set(y.key,w.mutation.getFieldMask()),Tc(w.mutation,y,w.mutation.getFieldMask(),Ct.now())):h.set(y.key,os.empty())}),this.recalculateAndSaveOverlays(e,c).next(g=>(g.forEach((y,w)=>h.set(y,w)),n.forEach((y,w)=>{var E;return p.set(y,new L4(w,(E=h.get(y))!==null&&E!==void 0?E:null))}),p))}recalculateAndSaveOverlays(e,n){const r=Ac();let o=new Ut((h,p)=>h-p),c=tt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(h=>{for(const p of h)p.keys().forEach(g=>{const y=n.get(g);if(y===null)return;let w=r.get(g)||os.empty();w=p.applyToLocalView(y,w),r.set(g,w);const E=(o.get(p.batchId)||tt()).add(g);o=o.insert(p.batchId,E)})}).next(()=>{const h=[],p=o.getReverseIterator();for(;p.hasNext();){const g=p.getNext(),y=g.key,w=g.value,E=Mw();w.forEach(A=>{if(!c.has(A)){const B=zw(n.get(A),r.get(A));B!==null&&E.set(A,B),c=c.add(A)}}),h.push(this.documentOverlayCache.saveOverlays(e,y,E))}return de.waitFor(h)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,o){return function(h){return Ne.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):B5(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,o):this.getDocumentsMatchingCollectionQuery(e,n,r,o)}getNextDocuments(e,n,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,o).next(c=>{const h=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,o-c.size):de.resolve(Ya());let p=Oc,g=c;return h.next(y=>de.forEach(y,(w,E)=>(p<E.largestBatchId&&(p=E.largestBatchId),c.get(w)?de.resolve():this.remoteDocumentCache.getEntry(e,w).next(A=>{g=g.insert(w,A)}))).next(()=>this.populateOverlays(e,y,c)).next(()=>this.computeViews(e,g,y,tt())).next(w=>({batchId:p,changes:Ow(w)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ne(n)).next(r=>{let o=gc();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,n,r,o){const c=n.collectionGroup;let h=gc();return this.indexManager.getCollectionParents(e,c).next(p=>de.forEach(p,g=>{const y=function(E,A){return new uh(A,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)}(n,g.child(c));return this.getDocumentsMatchingCollectionQuery(e,y,r,o).next(w=>{w.forEach((E,A)=>{h=h.insert(E,A)})})}).next(()=>h))}getDocumentsMatchingCollectionQuery(e,n,r,o){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(h=>(c=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,c,o))).next(h=>{c.forEach((g,y)=>{const w=y.getKey();h.get(w)===null&&(h=h.insert(w,Ln.newInvalidDocument(w)))});let p=gc();return h.forEach((g,y)=>{const w=c.get(g);w!==void 0&&Tc(w.mutation,y,os.empty(),Ct.now()),hh(n,y)&&(p=p.insert(g,y))}),p})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P4{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return de.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(o){return{id:o.id,version:o.version,createTime:Os(o.createTime)}}(n)),de.resolve()}getNamedQuery(e,n){return de.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(o){return{name:o.name,query:R4(o.bundledQuery),readTime:Os(o.readTime)}}(n)),de.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U4{constructor(){this.overlays=new Ut(Ne.comparator),this.kr=new Map}getOverlay(e,n){return de.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ya();return de.forEach(n,o=>this.getOverlay(e,o).next(c=>{c!==null&&r.set(o,c)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((o,c)=>{this.wt(e,n,c)}),de.resolve()}removeOverlaysForBatchId(e,n,r){const o=this.kr.get(r);return o!==void 0&&(o.forEach(c=>this.overlays=this.overlays.remove(c)),this.kr.delete(r)),de.resolve()}getOverlaysForCollection(e,n,r){const o=Ya(),c=n.length+1,h=new Ne(n.child("")),p=this.overlays.getIteratorFrom(h);for(;p.hasNext();){const g=p.getNext().value,y=g.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===c&&g.largestBatchId>r&&o.set(g.getKey(),g)}return de.resolve(o)}getOverlaysForCollectionGroup(e,n,r,o){let c=new Ut((y,w)=>y-w);const h=this.overlays.getIterator();for(;h.hasNext();){const y=h.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>r){let w=c.get(y.largestBatchId);w===null&&(w=Ya(),c=c.insert(y.largestBatchId,w)),w.set(y.getKey(),y)}}const p=Ya(),g=c.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((y,w)=>p.set(y,w)),!(p.size()>=o)););return de.resolve(p)}wt(e,n,r){const o=this.overlays.get(r.key);if(o!==null){const h=this.kr.get(o.largestBatchId).delete(r.key);this.kr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(r.key,new s4(n,r));let c=this.kr.get(n);c===void 0&&(c=tt(),this.kr.set(n,c)),this.kr.set(n,c.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B4{constructor(){this.sessionToken=Cn.EMPTY_BYTE_STRING}getSessionToken(e){return de.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,de.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(){this.qr=new un(vn.Qr),this.$r=new un(vn.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const r=new vn(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new vn(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){const n=new Ne(new Vt([])),r=new vn(n,e),o=new vn(n,e+1),c=[];return this.$r.forEachInRange([r,o],h=>{this.Wr(h),c.push(h.key)}),c}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new Ne(new Vt([])),r=new vn(n,e),o=new vn(n,e+1);let c=tt();return this.$r.forEachInRange([r,o],h=>{c=c.add(h.key)}),c}containsKey(e){const n=new vn(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class vn{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return Ne.comparator(e.key,n.key)||Ke(e.Hr,n.Hr)}static Ur(e,n){return Ke(e.Hr,n.Hr)||Ne.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z4{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new un(vn.Qr)}checkEmpty(e){return de.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,o){const c=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new i4(c,n,r,o);this.mutationQueue.push(h);for(const p of o)this.Yr=this.Yr.add(new vn(p.key,c)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return de.resolve(h)}lookupMutationBatch(e,n){return de.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,o=this.Xr(r),c=o<0?0:o;return de.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return de.resolve(this.mutationQueue.length===0?Mp:this.er-1)}getAllMutationBatches(e){return de.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new vn(n,0),o=new vn(n,Number.POSITIVE_INFINITY),c=[];return this.Yr.forEachInRange([r,o],h=>{const p=this.Zr(h.Hr);c.push(p)}),de.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new un(Ke);return n.forEach(o=>{const c=new vn(o,0),h=new vn(o,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([c,h],p=>{r=r.add(p.Hr)})}),de.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,o=r.length+1;let c=r;Ne.isDocumentKey(c)||(c=c.child(""));const h=new vn(new Ne(c),0);let p=new un(Ke);return this.Yr.forEachWhile(g=>{const y=g.key.path;return!!r.isPrefixOf(y)&&(y.length===o&&(p=p.add(g.Hr)),!0)},h),de.resolve(this.ei(p))}ei(e){const n=[];return e.forEach(r=>{const o=this.Zr(r);o!==null&&n.push(o)}),n}removeMutationBatch(e,n){pt(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return de.forEach(n.mutations,o=>{const c=new vn(o.key,n.batchId);return r=r.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){const r=new vn(n,0),o=this.Yr.firstAfterOrEqual(r);return de.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,de.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F4{constructor(e){this.ni=e,this.docs=function(){return new Ut(Ne.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,o=this.docs.get(r),c=o?o.size:0,h=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:h}),this.size+=h-c,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return de.resolve(r?r.document.mutableCopy():Ln.newInvalidDocument(n))}getEntries(e,n){let r=Sr();return n.forEach(o=>{const c=this.docs.get(o);r=r.insert(o,c?c.document.mutableCopy():Ln.newInvalidDocument(o))}),de.resolve(r)}getDocumentsMatchingQuery(e,n,r,o){let c=Sr();const h=n.path,p=new Ne(h.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(p);for(;g.hasNext();){const{key:y,value:{document:w}}=g.getNext();if(!h.isPrefixOf(y.path))break;y.path.length>h.length+1||y5(g5(w),r)<=0||(o.has(w.key)||hh(n,w))&&(c=c.insert(w.key,w.mutableCopy()))}return de.resolve(c)}getAllFromCollectionGroup(e,n,r,o){Pe(9500)}ri(e,n){return de.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new H4(this)}getSize(e){return de.resolve(this.size)}}class H4 extends M4{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?n.push(this.Or.addEntry(e,o)):this.Or.removeEntry(r)}),de.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q4{constructor(e){this.persistence=e,this.ii=new co(n=>Pp(n),Up),this.lastRemoteSnapshotVersion=ze.min(),this.highestTargetId=0,this.si=0,this.oi=new Gp,this.targetCount=0,this._i=ul.ar()}forEachTarget(e,n){return this.ii.forEach((r,o)=>n(o)),de.resolve()}getLastRemoteSnapshotVersion(e){return de.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return de.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),de.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),de.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new ul(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,de.resolve()}updateTargetData(e,n){return this.hr(n),de.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,de.resolve()}removeTargets(e,n,r){let o=0;const c=[];return this.ii.forEach((h,p)=>{p.sequenceNumber<=n&&r.get(p.targetId)===null&&(this.ii.delete(h),c.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)}),de.waitFor(c).next(()=>o)}getTargetCount(e){return de.resolve(this.targetCount)}getTargetData(e,n){const r=this.ii.get(n)||null;return de.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),de.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);const o=this.persistence.referenceDelegate,c=[];return o&&n.forEach(h=>{c.push(o.markPotentiallyOrphaned(e,h))}),de.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),de.resolve()}getMatchingKeysForTargetId(e,n){const r=this.oi.Jr(n);return de.resolve(r)}containsKey(e,n){return de.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{constructor(e,n){this.ai={},this.overlays={},this.ui=new oh(0),this.ci=!1,this.ci=!0,this.li=new B4,this.referenceDelegate=e(this),this.hi=new q4(this),this.indexManager=new C4,this.remoteDocumentCache=function(o){return new F4(o)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new T4(n),this.Ti=new P4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new U4,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new z4(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){xe("MemoryPersistence","Starting transaction:",e);const o=new G4(this.ui.next());return this.referenceDelegate.Ii(),r(o).next(c=>this.referenceDelegate.di(o).next(()=>c)).toPromise().then(c=>(o.raiseOnCommittedEvent(),c))}Ei(e,n){return de.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}}class G4 extends _5{constructor(e){super(),this.currentSequenceNumber=e}}class Xp{constructor(e){this.persistence=e,this.Ai=new Gp,this.Ri=null}static Vi(e){return new Xp(e)}get mi(){if(this.Ri)return this.Ri;throw Pe(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),de.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),de.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),de.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(o=>this.mi.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(o=>{o.forEach(c=>this.mi.add(c.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return de.forEach(this.mi,r=>{const o=Ne.fromPath(r);return this.fi(e,o).next(c=>{c||n.removeEntry(o,ze.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return de.or([()=>de.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Zd{constructor(e,n){this.persistence=e,this.gi=new co(r=>x5(r.path),(r,o)=>r.isEqual(o)),this.garbageCollector=O4(this,n)}static Vi(e,n){return new Zd(e,n)}Ii(){}di(e){return de.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(o=>r+o))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return de.forEach(this.gi,(r,o)=>this.Sr(e,r,o).next(c=>c?de.resolve():n(o)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const o=this.persistence.getRemoteDocumentCache(),c=o.newChangeBuffer();return o.ri(e,h=>this.Sr(e,h,n).next(p=>{p||(r++,c.removeEntry(h,ze.min()))})).next(()=>c.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),de.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),de.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),de.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),de.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Ed(e.data.value)),n}Sr(e,n,r){return de.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.gi.get(n);return de.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(e,n,r,o){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=o}static Es(e,n){let r=tt(),o=tt();for(const c of n.docChanges)switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new Wp(e,n.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W4{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return iA()?8:b5(Vn())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,o){const c={result:null};return this.ps(e,n).next(h=>{c.result=h}).next(()=>{if(!c.result)return this.ys(e,n,o,r).next(h=>{c.result=h})}).next(()=>{if(c.result)return;const h=new X4;return this.ws(e,n,h).next(p=>{if(c.result=p,this.Rs)return this.Ss(e,n,h,p.size)})}).next(()=>c.result)}Ss(e,n,r,o){return r.documentReadCount<this.Vs?($o()<=et.DEBUG&&xe("QueryEngine","SDK will not create cache indexes for query:",Jo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),de.resolve()):($o()<=et.DEBUG&&xe("QueryEngine","Query:",Jo(n),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.fs*o?($o()<=et.DEBUG&&xe("QueryEngine","The SDK decides to create cache indexes for query:",Jo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,js(n))):de.resolve())}ps(e,n){if(B1(n))return de.resolve(null);let r=js(n);return this.indexManager.getIndexType(e,r).next(o=>o===0?null:(n.limit!==null&&o===1&&(n=Jm(n,null,"F"),r=js(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(c=>{const h=tt(...c);return this.gs.getDocuments(e,h).next(p=>this.indexManager.getMinOffset(e,r).next(g=>{const y=this.bs(n,p);return this.Ds(n,y,h,g.readTime)?this.ps(e,Jm(n,null,"F")):this.vs(e,y,n,g)}))})))}ys(e,n,r,o){return B1(n)||o.isEqual(ze.min())?de.resolve(null):this.gs.getDocuments(e,r).next(c=>{const h=this.bs(n,c);return this.Ds(n,h,r,o)?de.resolve(null):($o()<=et.DEBUG&&xe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Jo(n)),this.vs(e,h,n,p5(o,Oc)).next(p=>p))})}bs(e,n){let r=new un(Dw(e));return n.forEach((o,c)=>{hh(e,c)&&(r=r.add(c))}),r}Ds(e,n,r,o){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}ws(e,n,r){return $o()<=et.DEBUG&&xe("QueryEngine","Using full collection scan to execute query:",Jo(n)),this.gs.getDocumentsMatchingQuery(e,n,_a.min(),r)}vs(e,n,r,o){return this.gs.getDocumentsMatchingQuery(e,r,o).next(c=>(n.forEach(h=>{c=c.insert(h.key,h)}),c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zp="LocalStore",Z4=3e8;class K4{constructor(e,n,r,o){this.persistence=e,this.Cs=n,this.serializer=o,this.Fs=new Ut(Ke),this.Ms=new co(c=>Pp(c),Up),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new V4(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function Y4(i,e,n,r){return new K4(i,e,n,r)}async function n2(i,e){const n=He(i);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let o;return n.mutationQueue.getAllMutationBatches(r).next(c=>(o=c,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(c=>{const h=[],p=[];let g=tt();for(const y of o){h.push(y.batchId);for(const w of y.mutations)g=g.add(w.key)}for(const y of c){p.push(y.batchId);for(const w of y.mutations)g=g.add(w.key)}return n.localDocuments.getDocuments(r,g).next(y=>({Bs:y,removedBatchIds:h,addedBatchIds:p}))})})}function Q4(i,e){const n=He(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),c=n.Os.newChangeBuffer({trackRemovals:!0});return function(p,g,y,w){const E=y.batch,A=E.keys();let B=de.resolve();return A.forEach(H=>{B=B.next(()=>w.getEntry(g,H)).next(q=>{const Q=y.docVersions.get(H);pt(Q!==null,48541),q.version.compareTo(Q)<0&&(E.applyToRemoteDocument(q,y),q.isValidDocument()&&(q.setReadTime(y.commitVersion),w.addEntry(q)))})}),B.next(()=>p.mutationQueue.removeMutationBatch(g,E))}(n,r,e,c).next(()=>c.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(p){let g=tt();for(let y=0;y<p.mutationResults.length;++y)p.mutationResults[y].transformResults.length>0&&(g=g.add(p.batch.mutations[y].key));return g}(e))).next(()=>n.localDocuments.getDocuments(r,o))})}function i2(i){const e=He(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function $4(i,e){const n=He(i),r=e.snapshotVersion;let o=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const h=n.Os.newChangeBuffer({trackRemovals:!0});o=n.Fs;const p=[];e.targetChanges.forEach((w,E)=>{const A=o.get(E);if(!A)return;p.push(n.hi.removeMatchingKeys(c,w.removedDocuments,E).next(()=>n.hi.addMatchingKeys(c,w.addedDocuments,E)));let B=A.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(E)!==null?B=B.withResumeToken(Cn.EMPTY_BYTE_STRING,ze.min()).withLastLimboFreeSnapshotVersion(ze.min()):w.resumeToken.approximateByteSize()>0&&(B=B.withResumeToken(w.resumeToken,r)),o=o.insert(E,B),function(q,Q,$){return q.resumeToken.approximateByteSize()===0||Q.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=Z4?!0:$.addedDocuments.size+$.modifiedDocuments.size+$.removedDocuments.size>0}(A,B,w)&&p.push(n.hi.updateTargetData(c,B))});let g=Sr(),y=tt();if(e.documentUpdates.forEach(w=>{e.resolvedLimboDocuments.has(w)&&p.push(n.persistence.referenceDelegate.updateLimboDocument(c,w))}),p.push(J4(c,h,e.documentUpdates).next(w=>{g=w.Ls,y=w.ks})),!r.isEqual(ze.min())){const w=n.hi.getLastRemoteSnapshotVersion(c).next(E=>n.hi.setTargetsMetadata(c,c.currentSequenceNumber,r));p.push(w)}return de.waitFor(p).next(()=>h.apply(c)).next(()=>n.localDocuments.getLocalViewOfDocuments(c,g,y)).next(()=>g)}).then(c=>(n.Fs=o,c))}function J4(i,e,n){let r=tt(),o=tt();return n.forEach(c=>r=r.add(c)),e.getEntries(i,r).next(c=>{let h=Sr();return n.forEach((p,g)=>{const y=c.get(p);g.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(p)),g.isNoDocument()&&g.version.isEqual(ze.min())?(e.removeEntry(p,g.readTime),h=h.insert(p,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),h=h.insert(p,g)):xe(Zp,"Ignoring outdated watch update for ",p,". Current version:",y.version," Watch version:",g.version)}),{Ls:h,ks:o}})}function e6(i,e){const n=He(i);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Mp),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function t6(i,e){const n=He(i);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return n.hi.getTargetData(r,e).next(c=>c?(o=c,de.resolve(o)):n.hi.allocateTargetId(r).next(h=>(o=new ha(e,h,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=n.Fs.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}async function sp(i,e,n){const r=He(i),o=r.Fs.get(e),c=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",c,h=>r.persistence.referenceDelegate.removeTarget(h,o))}catch(h){if(!vl(h))throw h;xe(Zp,`Failed to update sequence numbers for target ${e}: ${h}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(o.target)}function J1(i,e,n){const r=He(i);let o=ze.min(),c=tt();return r.persistence.runTransaction("Execute query","readwrite",h=>function(g,y,w){const E=He(g),A=E.Ms.get(w);return A!==void 0?de.resolve(E.Fs.get(A)):E.hi.getTargetData(y,w)}(r,h,js(e)).next(p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(h,p.targetId).next(g=>{c=g})}).next(()=>r.Cs.getDocumentsMatchingQuery(h,e,n?o:ze.min(),n?c:tt())).next(p=>(n6(r,F5(e),p),{documents:p,qs:c})))}function n6(i,e,n){let r=i.xs.get(e)||ze.min();n.forEach((o,c)=>{c.readTime.compareTo(r)>0&&(r=c.readTime)}),i.xs.set(e,r)}class e_{constructor(){this.activeTargetIds=Z5()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class i6{constructor(){this.Fo=new e_,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new e_,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s6{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t_="ConnectivityMonitor";class n_{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){xe(t_,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){xe(t_,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pd=null;function rp(){return pd===null?pd=function(){return 268435456+Math.round(2147483648*Math.random())}():pd++,"0x"+pd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const km="RestConnection",r6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class a6{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${o}`,this.Ko=this.databaseId.database===zd?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Wo(e,n,r,o,c){const h=rp(),p=this.Go(e,n.toUriEncodedString());xe(km,`Sending RPC '${e}' ${h}:`,p,r);const g={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(g,o,c);const{host:y}=new URL(p),w=fl(y);return this.jo(e,p,g,r,w).then(E=>(xe(km,`Received RPC '${e}' ${h}: `,E),E),E=>{throw va(km,`RPC '${e}' ${h} failed with error: `,E,"url: ",p,"request:",r),E})}Jo(e,n,r,o,c,h){return this.Wo(e,n,r,o,c)}zo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+gl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((o,c)=>e[c]=o),r&&r.headers.forEach((o,c)=>e[c]=o)}Go(e,n){const r=r6[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o6{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jn="WebChannelConnection";class l6 extends a6{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,o,c){const h=rp();return new Promise((p,g)=>{const y=new aw;y.setWithCredentials(!0),y.listenOnce(ow.COMPLETE,()=>{try{switch(y.getLastErrorCode()){case xd.NO_ERROR:const E=y.getResponseJson();xe(jn,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(E)),p(E);break;case xd.TIMEOUT:xe(jn,`RPC '${e}' ${h} timed out`),g(new Ie(fe.DEADLINE_EXCEEDED,"Request time out"));break;case xd.HTTP_ERROR:const A=y.getStatus();if(xe(jn,`RPC '${e}' ${h} failed with status:`,A,"response text:",y.getResponseText()),A>0){let B=y.getResponseJson();Array.isArray(B)&&(B=B[0]);const H=B==null?void 0:B.error;if(H&&H.status&&H.message){const q=function($){const Y=$.toLowerCase().replace(/_/g,"-");return Object.values(fe).indexOf(Y)>=0?Y:fe.UNKNOWN}(H.status);g(new Ie(q,H.message))}else g(new Ie(fe.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new Ie(fe.UNAVAILABLE,"Connection failed."));break;default:Pe(9055,{c_:e,streamId:h,l_:y.getLastErrorCode(),h_:y.getLastError()})}}finally{xe(jn,`RPC '${e}' ${h} completed.`)}});const w=JSON.stringify(o);xe(jn,`RPC '${e}' ${h} sending request:`,o),y.send(n,"POST",w,r,15)})}P_(e,n,r){const o=rp(),c=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=uw(),p=cw(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(g.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(g.useFetchStreams=!0),this.zo(g.initMessageHeaders,n,r),g.encodeInitMessageHeaders=!0;const w=c.join("");xe(jn,`Creating RPC '${e}' stream ${o}: ${w}`,g);const E=h.createWebChannel(w,g);this.T_(E);let A=!1,B=!1;const H=new o6({Ho:Q=>{B?xe(jn,`Not sending because RPC '${e}' stream ${o} is closed:`,Q):(A||(xe(jn,`Opening RPC '${e}' stream ${o} transport.`),E.open(),A=!0),xe(jn,`RPC '${e}' stream ${o} sending:`,Q),E.send(Q))},Yo:()=>E.close()}),q=(Q,$,Y)=>{Q.listen($,z=>{try{Y(z)}catch(ge){setTimeout(()=>{throw ge},0)}})};return q(E,pc.EventType.OPEN,()=>{B||(xe(jn,`RPC '${e}' stream ${o} transport opened.`),H.s_())}),q(E,pc.EventType.CLOSE,()=>{B||(B=!0,xe(jn,`RPC '${e}' stream ${o} transport closed`),H.__(),this.I_(E))}),q(E,pc.EventType.ERROR,Q=>{B||(B=!0,va(jn,`RPC '${e}' stream ${o} transport errored. Name:`,Q.name,"Message:",Q.message),H.__(new Ie(fe.UNAVAILABLE,"The operation could not be completed")))}),q(E,pc.EventType.MESSAGE,Q=>{var $;if(!B){const Y=Q.data[0];pt(!!Y,16349);const z=Y,ge=(z==null?void 0:z.error)||(($=z[0])===null||$===void 0?void 0:$.error);if(ge){xe(jn,`RPC '${e}' stream ${o} received error:`,ge);const ee=ge.status;let me=function(C){const L=$t[C];if(L!==void 0)return qw(L)}(ee),D=ge.message;me===void 0&&(me=fe.INTERNAL,D="Unknown error status: "+ee+" with message "+ge.message),B=!0,H.__(new Ie(me,D)),E.close()}else xe(jn,`RPC '${e}' stream ${o} received:`,Y),H.a_(Y)}}),q(p,lw.STAT_EVENT,Q=>{Q.stat===Wm.PROXY?xe(jn,`RPC '${e}' stream ${o} detected buffering proxy`):Q.stat===Wm.NOPROXY&&xe(jn,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{H.o_()},0),H}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}function Nm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gh(i){return new h4(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{constructor(e,n,r=1e3,o=1.5,c=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=o,this.A_=c,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),o=Math.max(0,n-r);o>0&&xe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,o,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i_="PersistentStream";class r2{constructor(e,n,r,o,c,h,p,g){this.Fi=e,this.w_=r,this.S_=o,this.connection=c,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=p,this.listener=g,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new s2(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===fe.RESOURCE_EXHAUSTED?(Er(n.toString()),Er("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===fe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.b_===n&&this.W_(r,o)},r=>{e(()=>{const o=new Ie(fe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(o)})})}W_(e,n){const r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(o=>{r(()=>this.G_(o))}),this.stream.onMessage(o=>{r(()=>++this.C_==1?this.j_(o):this.onNext(o))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return xe(i_,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(xe(i_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class c6 extends r2{constructor(e,n,r,o,c,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,o,h),this.serializer=c}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=p4(this.serializer,e),r=function(c){if(!("targetChange"in c))return ze.min();const h=c.targetChange;return h.targetIds&&h.targetIds.length?ze.min():h.readTime?Os(h.readTime):ze.min()}(e);return this.listener.J_(n,r)}H_(e){const n={};n.database=ip(this.serializer),n.addTarget=function(c,h){let p;const g=h.target;if(p=$m(g)?{documents:v4(c,g)}:{query:_4(c,g).Vt},p.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){p.resumeToken=Ww(c,h.resumeToken);const y=ep(c,h.expectedCount);y!==null&&(p.expectedCount=y)}else if(h.snapshotVersion.compareTo(ze.min())>0){p.readTime=Wd(c,h.snapshotVersion.toTimestamp());const y=ep(c,h.expectedCount);y!==null&&(p.expectedCount=y)}return p}(this.serializer,e);const r=w4(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){const n={};n.database=ip(this.serializer),n.removeTarget=e,this.k_(n)}}class u6 extends r2{constructor(e,n,r,o,c,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,o,h),this.serializer=c}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return pt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,pt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){pt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=y4(e.writeResults,e.commitTime),r=Os(e.commitTime);return this.listener.ta(r,n)}na(){const e={};e.database=ip(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>g4(this.serializer,r))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d6{}class h6 extends d6{constructor(e,n,r,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=o,this.ra=!1}ia(){if(this.ra)throw new Ie(fe.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,h])=>this.connection.Wo(e,tp(n,r),o,c,h)).catch(c=>{throw c.name==="FirebaseError"?(c.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Ie(fe.UNKNOWN,c.toString())})}Jo(e,n,r,o,c){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,p])=>this.connection.Jo(e,tp(n,r),o,h,p,c)).catch(h=>{throw h.name==="FirebaseError"?(h.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new Ie(fe.UNKNOWN,h.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class f6{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Er(n),this._a=!1):xe("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const io="RemoteStore";class m6{constructor(e,n,r,o,c){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=c,this.Ea.xo(h=>{r.enqueueAndForget(async()=>{ho(this)&&(xe(io,"Restarting streams for network reachability change."),await async function(g){const y=He(g);y.Ia.add(4),await $c(y),y.Aa.set("Unknown"),y.Ia.delete(4),await yh(y)}(this))})}),this.Aa=new f6(r,o)}}async function yh(i){if(ho(i))for(const e of i.da)await e(!0)}async function $c(i){for(const e of i.da)await e(!1)}function a2(i,e){const n=He(i);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),$p(n)?Qp(n):_l(n).x_()&&Yp(n,e))}function Kp(i,e){const n=He(i),r=_l(n);n.Ta.delete(e),r.x_()&&o2(n,e),n.Ta.size===0&&(r.x_()?r.B_():ho(n)&&n.Aa.set("Unknown"))}function Yp(i,e){if(i.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ze.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}_l(i).H_(e)}function o2(i,e){i.Ra.$e(e),_l(i).Y_(e)}function Qp(i){i.Ra=new l4({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>i.Ta.get(e)||null,lt:()=>i.datastore.serializer.databaseId}),_l(i).start(),i.Aa.aa()}function $p(i){return ho(i)&&!_l(i).M_()&&i.Ta.size>0}function ho(i){return He(i).Ia.size===0}function l2(i){i.Ra=void 0}async function p6(i){i.Aa.set("Online")}async function g6(i){i.Ta.forEach((e,n)=>{Yp(i,e)})}async function y6(i,e){l2(i),$p(i)?(i.Aa.la(e),Qp(i)):i.Aa.set("Unknown")}async function v6(i,e,n){if(i.Aa.set("Online"),e instanceof Xw&&e.state===2&&e.cause)try{await async function(o,c){const h=c.cause;for(const p of c.targetIds)o.Ta.has(p)&&(await o.remoteSyncer.rejectListen(p,h),o.Ta.delete(p),o.Ra.removeTarget(p))}(i,e)}catch(r){xe(io,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Kd(i,r)}else if(e instanceof Td?i.Ra.Ye(e):e instanceof Gw?i.Ra.it(e):i.Ra.et(e),!n.isEqual(ze.min()))try{const r=await i2(i.localStore);n.compareTo(r)>=0&&await function(c,h){const p=c.Ra.Pt(h);return p.targetChanges.forEach((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const w=c.Ta.get(y);w&&c.Ta.set(y,w.withResumeToken(g.resumeToken,h))}}),p.targetMismatches.forEach((g,y)=>{const w=c.Ta.get(g);if(!w)return;c.Ta.set(g,w.withResumeToken(Cn.EMPTY_BYTE_STRING,w.snapshotVersion)),o2(c,g);const E=new ha(w.target,g,y,w.sequenceNumber);Yp(c,E)}),c.remoteSyncer.applyRemoteEvent(p)}(i,n)}catch(r){xe(io,"Failed to raise snapshot:",r),await Kd(i,r)}}async function Kd(i,e,n){if(!vl(e))throw e;i.Ia.add(1),await $c(i),i.Aa.set("Offline"),n||(n=()=>i2(i.localStore)),i.asyncQueue.enqueueRetryable(async()=>{xe(io,"Retrying IndexedDB access"),await n(),i.Ia.delete(1),await yh(i)})}function c2(i,e){return e().catch(n=>Kd(i,n,e))}async function vh(i){const e=He(i),n=Ea(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Mp;for(;_6(e);)try{const o=await e6(e.localStore,r);if(o===null){e.Pa.length===0&&n.B_();break}r=o.batchId,b6(e,o)}catch(o){await Kd(e,o)}u2(e)&&d2(e)}function _6(i){return ho(i)&&i.Pa.length<10}function b6(i,e){i.Pa.push(e);const n=Ea(i);n.x_()&&n.Z_&&n.X_(e.mutations)}function u2(i){return ho(i)&&!Ea(i).M_()&&i.Pa.length>0}function d2(i){Ea(i).start()}async function w6(i){Ea(i).na()}async function x6(i){const e=Ea(i);for(const n of i.Pa)e.X_(n.mutations)}async function E6(i,e,n){const r=i.Pa.shift(),o=Fp.from(r,e,n);await c2(i,()=>i.remoteSyncer.applySuccessfulWrite(o)),await vh(i)}async function S6(i,e){e&&Ea(i).Z_&&await async function(r,o){if(function(h){return a4(h)&&h!==fe.ABORTED}(o.code)){const c=r.Pa.shift();Ea(r).N_(),await c2(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,o)),await vh(r)}}(i,e),u2(i)&&d2(i)}async function s_(i,e){const n=He(i);n.asyncQueue.verifyOperationInProgress(),xe(io,"RemoteStore received new credentials");const r=ho(n);n.Ia.add(3),await $c(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await yh(n)}async function A6(i,e){const n=He(i);e?(n.Ia.delete(2),await yh(n)):e||(n.Ia.add(2),await $c(n),n.Aa.set("Unknown"))}function _l(i){return i.Va||(i.Va=function(n,r,o){const c=He(n);return c.ia(),new c6(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)}(i.datastore,i.asyncQueue,{Zo:p6.bind(null,i),e_:g6.bind(null,i),n_:y6.bind(null,i),J_:v6.bind(null,i)}),i.da.push(async e=>{e?(i.Va.N_(),$p(i)?Qp(i):i.Aa.set("Unknown")):(await i.Va.stop(),l2(i))})),i.Va}function Ea(i){return i.ma||(i.ma=function(n,r,o){const c=He(n);return c.ia(),new u6(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)}(i.datastore,i.asyncQueue,{Zo:()=>Promise.resolve(),e_:w6.bind(null,i),n_:S6.bind(null,i),ea:x6.bind(null,i),ta:E6.bind(null,i)}),i.da.push(async e=>{e?(i.ma.N_(),await vh(i)):(await i.ma.stop(),i.Pa.length>0&&(xe(io,`Stopping write stream with ${i.Pa.length} pending writes`),i.Pa=[]))})),i.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(e,n,r,o,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=o,this.removalCallback=c,this.deferred=new ga,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,o,c){const h=Date.now()+r,p=new Jp(e,n,h,o,c);return p.start(r),p}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ie(fe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function eg(i,e){if(Er("AsyncQueue",`${e}: ${i}`),vl(i))return new Ie(fe.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{static emptySet(e){return new al(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Ne.comparator(n.key,r.key):(n,r)=>Ne.comparator(n.key,r.key),this.keyedMap=gc(),this.sortedSet=new Ut(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof al)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=r.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new al;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_{constructor(){this.fa=new Ut(Ne.comparator)}track(e){const n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):Pe(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}}class dl{constructor(e,n,r,o,c,h,p,g,y){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=c,this.fromCache=h,this.syncStateChanged=p,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,n,r,o,c){const h=[];return n.forEach(p=>{h.push({type:0,doc:p})}),new dl(e,n,al.emptySet(n),h,r,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&dh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==r[o].type||!n[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T6{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class R6{constructor(){this.queries=a_(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){const o=He(n),c=o.queries;o.queries=a_(),c.forEach((h,p)=>{for(const g of p.wa)g.onError(r)})})(this,new Ie(fe.ABORTED,"Firestore shutting down"))}}function a_(){return new co(i=>Nw(i),dh)}async function C6(i,e){const n=He(i);let r=3;const o=e.query;let c=n.queries.get(o);c?!c.Sa()&&e.ba()&&(r=2):(c=new T6,r=e.ba()?0:1);try{switch(r){case 0:c.ya=await n.onListen(o,!0);break;case 1:c.ya=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(h){const p=eg(h,`Initialization of query '${Jo(e.query)}' failed`);return void e.onError(p)}n.queries.set(o,c),c.wa.push(e),e.va(n.onlineState),c.ya&&e.Ca(c.ya)&&tg(n)}async function I6(i,e){const n=He(i),r=e.query;let o=3;const c=n.queries.get(r);if(c){const h=c.wa.indexOf(e);h>=0&&(c.wa.splice(h,1),c.wa.length===0?o=e.ba()?0:1:!c.Sa()&&e.ba()&&(o=2))}switch(o){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function k6(i,e){const n=He(i);let r=!1;for(const o of e){const c=o.query,h=n.queries.get(c);if(h){for(const p of h.wa)p.Ca(o)&&(r=!0);h.ya=o}}r&&tg(n)}function N6(i,e,n){const r=He(i),o=r.queries.get(e);if(o)for(const c of o.wa)c.onError(n);r.queries.delete(e)}function tg(i){i.Da.forEach(e=>{e.next()})}var ap,o_;(o_=ap||(ap={})).Fa="default",o_.Cache="cache";class D6{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new dl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=dl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==ap.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(e){this.key=e}}class f2{constructor(e){this.key=e}}class j6{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=tt(),this.mutatedKeys=tt(),this.Xa=Dw(e),this.eu=new al(this.Xa)}get tu(){return this.Ha}nu(e,n){const r=n?n.ru:new r_,o=n?n.eu:this.eu;let c=n?n.mutatedKeys:this.mutatedKeys,h=o,p=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((w,E)=>{const A=o.get(w),B=hh(this.query,E)?E:null,H=!!A&&this.mutatedKeys.has(A.key),q=!!B&&(B.hasLocalMutations||this.mutatedKeys.has(B.key)&&B.hasCommittedMutations);let Q=!1;A&&B?A.data.isEqual(B.data)?H!==q&&(r.track({type:3,doc:B}),Q=!0):this.iu(A,B)||(r.track({type:2,doc:B}),Q=!0,(g&&this.Xa(B,g)>0||y&&this.Xa(B,y)<0)&&(p=!0)):!A&&B?(r.track({type:0,doc:B}),Q=!0):A&&!B&&(r.track({type:1,doc:A}),Q=!0,(g||y)&&(p=!0)),Q&&(B?(h=h.add(B),c=q?c.add(w):c.delete(w)):(h=h.delete(w),c=c.delete(w)))}),this.query.limit!==null)for(;h.size>this.query.limit;){const w=this.query.limitType==="F"?h.last():h.first();h=h.delete(w.key),c=c.delete(w.key),r.track({type:1,doc:w})}return{eu:h,ru:r,Ds:p,mutatedKeys:c}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,o){const c=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const h=e.ru.pa();h.sort((w,E)=>function(B,H){const q=Q=>{switch(Q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Pe(20277,{At:Q})}};return q(B)-q(H)}(w.type,E.type)||this.Xa(w.doc,E.doc)),this.su(r),o=o!=null&&o;const p=n&&!o?this.ou():[],g=this.Za.size===0&&this.current&&!o?1:0,y=g!==this.Ya;return this.Ya=g,h.length!==0||y?{snapshot:new dl(this.query,e.eu,c,h,e.mutatedKeys,g===0,y,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:p}:{_u:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new r_,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=tt(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new f2(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new h2(r))}),n}uu(e){this.Ha=e.qs,this.Za=tt();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return dl.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const ng="SyncEngine";class O6{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class M6{constructor(e){this.key=e,this.lu=!1}}class L6{constructor(e,n,r,o,c,h){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=h,this.hu={},this.Pu=new co(p=>Nw(p),dh),this.Tu=new Map,this.Iu=new Set,this.du=new Ut(Ne.comparator),this.Eu=new Map,this.Au=new Gp,this.Ru={},this.Vu=new Map,this.mu=ul.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function V6(i,e,n=!0){const r=_2(i);let o;const c=r.Pu.get(e);return c?(r.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.cu()):o=await m2(r,e,n,!0),o}async function P6(i,e){const n=_2(i);await m2(n,e,!0,!1)}async function m2(i,e,n,r){const o=await t6(i.localStore,js(e)),c=o.targetId,h=i.sharedClientState.addLocalQueryTarget(c,n);let p;return r&&(p=await U6(i,e,c,h==="current",o.resumeToken)),i.isPrimaryClient&&n&&a2(i.remoteStore,o),p}async function U6(i,e,n,r,o){i.gu=(E,A,B)=>async function(q,Q,$,Y){let z=Q.view.nu($);z.Ds&&(z=await J1(q.localStore,Q.query,!1).then(({documents:D})=>Q.view.nu(D,z)));const ge=Y&&Y.targetChanges.get(Q.targetId),ee=Y&&Y.targetMismatches.get(Q.targetId)!=null,me=Q.view.applyChanges(z,q.isPrimaryClient,ge,ee);return c_(q,Q.targetId,me._u),me.snapshot}(i,E,A,B);const c=await J1(i.localStore,e,!0),h=new j6(e,c.qs),p=h.nu(c.documents),g=Qc.createSynthesizedTargetChangeForCurrentChange(n,r&&i.onlineState!=="Offline",o),y=h.applyChanges(p,i.isPrimaryClient,g);c_(i,n,y._u);const w=new O6(e,n,h);return i.Pu.set(e,w),i.Tu.has(n)?i.Tu.get(n).push(e):i.Tu.set(n,[e]),y.snapshot}async function B6(i,e,n){const r=He(i),o=r.Pu.get(e),c=r.Tu.get(o.targetId);if(c.length>1)return r.Tu.set(o.targetId,c.filter(h=>!dh(h,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await sp(r.localStore,o.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(o.targetId),n&&Kp(r.remoteStore,o.targetId),op(r,o.targetId)}).catch(yl)):(op(r,o.targetId),await sp(r.localStore,o.targetId,!0))}async function z6(i,e){const n=He(i),r=n.Pu.get(e),o=n.Tu.get(r.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Kp(n.remoteStore,r.targetId))}async function F6(i,e,n){const r=K6(i);try{const o=await function(h,p){const g=He(h),y=Ct.now(),w=p.reduce((B,H)=>B.add(H.key),tt());let E,A;return g.persistence.runTransaction("Locally write mutations","readwrite",B=>{let H=Sr(),q=tt();return g.Os.getEntries(B,w).next(Q=>{H=Q,H.forEach(($,Y)=>{Y.isValidDocument()||(q=q.add($))})}).next(()=>g.localDocuments.getOverlayedDocuments(B,H)).next(Q=>{E=Q;const $=[];for(const Y of p){const z=t4(Y,E.get(Y.key).overlayedDocument);z!=null&&$.push(new uo(Y.key,z,Sw(z.value.mapValue),_r.exists(!0)))}return g.mutationQueue.addMutationBatch(B,y,$,p)}).next(Q=>{A=Q;const $=Q.applyToLocalDocumentSet(E,q);return g.documentOverlayCache.saveOverlays(B,Q.batchId,$)})}).then(()=>({batchId:A.batchId,changes:Ow(E)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(h,p,g){let y=h.Ru[h.currentUser.toKey()];y||(y=new Ut(Ke)),y=y.insert(p,g),h.Ru[h.currentUser.toKey()]=y}(r,o.batchId,n),await Jc(r,o.changes),await vh(r.remoteStore)}catch(o){const c=eg(o,"Failed to persist write");n.reject(c)}}async function p2(i,e){const n=He(i);try{const r=await $4(n.localStore,e);e.targetChanges.forEach((o,c)=>{const h=n.Eu.get(c);h&&(pt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.lu=!0:o.modifiedDocuments.size>0?pt(h.lu,14607):o.removedDocuments.size>0&&(pt(h.lu,42227),h.lu=!1))}),await Jc(n,r,e)}catch(r){await yl(r)}}function l_(i,e,n){const r=He(i);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const o=[];r.Pu.forEach((c,h)=>{const p=h.view.va(e);p.snapshot&&o.push(p.snapshot)}),function(h,p){const g=He(h);g.onlineState=p;let y=!1;g.queries.forEach((w,E)=>{for(const A of E.wa)A.va(p)&&(y=!0)}),y&&tg(g)}(r.eventManager,e),o.length&&r.hu.J_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function H6(i,e,n){const r=He(i);r.sharedClientState.updateQueryState(e,"rejected",n);const o=r.Eu.get(e),c=o&&o.key;if(c){let h=new Ut(Ne.comparator);h=h.insert(c,Ln.newNoDocument(c,ze.min()));const p=tt().add(c),g=new ph(ze.min(),new Map,new Ut(Ke),h,p);await p2(r,g),r.du=r.du.remove(c),r.Eu.delete(e),ig(r)}else await sp(r.localStore,e,!1).then(()=>op(r,e,n)).catch(yl)}async function q6(i,e){const n=He(i),r=e.batch.batchId;try{const o=await Q4(n.localStore,e);y2(n,r,null),g2(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Jc(n,o)}catch(o){await yl(o)}}async function G6(i,e,n){const r=He(i);try{const o=await function(h,p){const g=He(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let w;return g.mutationQueue.lookupMutationBatch(y,p).next(E=>(pt(E!==null,37113),w=E.keys(),g.mutationQueue.removeMutationBatch(y,E))).next(()=>g.mutationQueue.performConsistencyCheck(y)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(y,w,p)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,w)).next(()=>g.localDocuments.getDocuments(y,w))})}(r.localStore,e);y2(r,e,n),g2(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Jc(r,o)}catch(o){await yl(o)}}function g2(i,e){(i.Vu.get(e)||[]).forEach(n=>{n.resolve()}),i.Vu.delete(e)}function y2(i,e,n){const r=He(i);let o=r.Ru[r.currentUser.toKey()];if(o){const c=o.get(e);c&&(n?c.reject(n):c.resolve(),o=o.remove(e)),r.Ru[r.currentUser.toKey()]=o}}function op(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const r of i.Tu.get(e))i.Pu.delete(r),n&&i.hu.pu(r,n);i.Tu.delete(e),i.isPrimaryClient&&i.Au.zr(e).forEach(r=>{i.Au.containsKey(r)||v2(i,r)})}function v2(i,e){i.Iu.delete(e.path.canonicalString());const n=i.du.get(e);n!==null&&(Kp(i.remoteStore,n),i.du=i.du.remove(e),i.Eu.delete(n),ig(i))}function c_(i,e,n){for(const r of n)r instanceof h2?(i.Au.addReference(r.key,e),X6(i,r)):r instanceof f2?(xe(ng,"Document no longer in limbo: "+r.key),i.Au.removeReference(r.key,e),i.Au.containsKey(r.key)||v2(i,r.key)):Pe(19791,{yu:r})}function X6(i,e){const n=e.key,r=n.path.canonicalString();i.du.get(n)||i.Iu.has(r)||(xe(ng,"New document in limbo: "+n),i.Iu.add(r),ig(i))}function ig(i){for(;i.Iu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Iu.values().next().value;i.Iu.delete(e);const n=new Ne(Vt.fromString(e)),r=i.mu.next();i.Eu.set(r,new M6(n)),i.du=i.du.insert(n,r),a2(i.remoteStore,new ha(js(Bp(n.path)),r,"TargetPurposeLimboResolution",oh.ue))}}async function Jc(i,e,n){const r=He(i),o=[],c=[],h=[];r.Pu.isEmpty()||(r.Pu.forEach((p,g)=>{h.push(r.gu(g,e,n).then(y=>{var w;if((y||n)&&r.isPrimaryClient){const E=y?!y.fromCache:(w=n==null?void 0:n.targetChanges.get(g.targetId))===null||w===void 0?void 0:w.current;r.sharedClientState.updateQueryState(g.targetId,E?"current":"not-current")}if(y){o.push(y);const E=Wp.Es(g.targetId,y);c.push(E)}}))}),await Promise.all(h),r.hu.J_(o),await async function(g,y){const w=He(g);try{await w.persistence.runTransaction("notifyLocalViewChanges","readwrite",E=>de.forEach(y,A=>de.forEach(A.Is,B=>w.persistence.referenceDelegate.addReference(E,A.targetId,B)).next(()=>de.forEach(A.ds,B=>w.persistence.referenceDelegate.removeReference(E,A.targetId,B)))))}catch(E){if(!vl(E))throw E;xe(Zp,"Failed to update sequence numbers: "+E)}for(const E of y){const A=E.targetId;if(!E.fromCache){const B=w.Fs.get(A),H=B.snapshotVersion,q=B.withLastLimboFreeSnapshotVersion(H);w.Fs=w.Fs.insert(A,q)}}}(r.localStore,c))}async function W6(i,e){const n=He(i);if(!n.currentUser.isEqual(e)){xe(ng,"User change. New user:",e.toKey());const r=await n2(n.localStore,e);n.currentUser=e,function(c,h){c.Vu.forEach(p=>{p.forEach(g=>{g.reject(new Ie(fe.CANCELLED,h))})}),c.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Jc(n,r.Bs)}}function Z6(i,e){const n=He(i),r=n.Eu.get(e);if(r&&r.lu)return tt().add(r.key);{let o=tt();const c=n.Tu.get(e);if(!c)return o;for(const h of c){const p=n.Pu.get(h);o=o.unionWith(p.view.tu)}return o}}function _2(i){const e=He(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=p2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Z6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=H6.bind(null,e),e.hu.J_=k6.bind(null,e.eventManager),e.hu.pu=N6.bind(null,e.eventManager),e}function K6(i){const e=He(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=q6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=G6.bind(null,e),e}class Yd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=gh(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return Y4(this.persistence,new W4,e.initialUser,this.serializer)}Du(e){return new t2(Xp.Vi,this.serializer)}bu(e){return new i6}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Yd.provider={build:()=>new Yd};class Y6 extends Yd{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){pt(this.persistence.referenceDelegate instanceof Zd,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new D4(r,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?oi.withCacheSize(this.cacheSizeBytes):oi.DEFAULT;return new t2(r=>Zd.Vi(r,n),this.serializer)}}class lp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>l_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=W6.bind(null,this.syncEngine),await A6(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new R6}()}createDatastore(e){const n=gh(e.databaseInfo.databaseId),r=function(c){return new l6(c)}(e.databaseInfo);return function(c,h,p,g){return new h6(c,h,p,g)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,o,c,h,p){return new m6(r,o,c,h,p)}(this.localStore,this.datastore,e.asyncQueue,n=>l_(this.syncEngine,n,0),function(){return n_.C()?new n_:new s6}())}createSyncEngine(e,n){return function(o,c,h,p,g,y,w){const E=new L6(o,c,h,p,g,y);return w&&(E.fu=!0),E}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(o){const c=He(o);xe(io,"RemoteStore shutting down."),c.Ia.add(5),await $c(c),c.Ea.shutdown(),c.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}lp.provider={build:()=>new lp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q6{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Er("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sa="FirestoreClient";class $6{constructor(e,n,r,o,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=o,this.user=Mn.UNAUTHENTICATED,this.clientId=jp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(r,async h=>{xe(Sa,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h}),this.appCheckCredentials.start(r,h=>(xe(Sa,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ga;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=eg(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Dm(i,e){i.asyncQueue.verifyOperationInProgress(),xe(Sa,"Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let r=n.initialUser;i.setCredentialChangeListener(async o=>{r.isEqual(o)||(await n2(e.localStore,o),r=o)}),e.persistence.setDatabaseDeletedListener(()=>{va("Terminating Firestore due to IndexedDb database deletion"),i.terminate().then(()=>{xe("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(o=>{va("Terminating Firestore due to IndexedDb database deletion failed",o)})}),i._offlineComponents=e}async function u_(i,e){i.asyncQueue.verifyOperationInProgress();const n=await J6(i);xe(Sa,"Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener(r=>s_(e.remoteStore,r)),i.setAppCheckTokenChangeListener((r,o)=>s_(e.remoteStore,o)),i._onlineComponents=e}async function J6(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){xe(Sa,"Using user provided OfflineComponentProvider");try{await Dm(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(o){return o.name==="FirebaseError"?o.code===fe.FAILED_PRECONDITION||o.code===fe.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(n))throw n;va("Error using user provided cache. Falling back to memory cache: "+n),await Dm(i,new Yd)}}else xe(Sa,"Using default OfflineComponentProvider"),await Dm(i,new Y6(void 0));return i._offlineComponents}async function b2(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(xe(Sa,"Using user provided OnlineComponentProvider"),await u_(i,i._uninitializedComponentsProvider._online)):(xe(Sa,"Using default OnlineComponentProvider"),await u_(i,new lp))),i._onlineComponents}function ek(i){return b2(i).then(e=>e.syncEngine)}async function tk(i){const e=await b2(i),n=e.eventManager;return n.onListen=V6.bind(null,e.syncEngine),n.onUnlisten=B6.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=P6.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=z6.bind(null,e.syncEngine),n}function nk(i,e,n={}){const r=new ga;return i.asyncQueue.enqueueAndForget(async()=>function(c,h,p,g,y){const w=new Q6({next:A=>{w.Ou(),h.enqueueAndForget(()=>I6(c,E));const B=A.docs.has(p);!B&&A.fromCache?y.reject(new Ie(fe.UNAVAILABLE,"Failed to get document because the client is offline.")):B&&A.fromCache&&g&&g.source==="server"?y.reject(new Ie(fe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(A)},error:A=>y.reject(A)}),E=new D6(Bp(p.path),w,{includeMetadataChanges:!0,ka:!0});return C6(c,E)}(await tk(i),i.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w2(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d_=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x2="firestore.googleapis.com",h_=!0;class f_{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Ie(fe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=x2,this.ssl=h_}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:h_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=e2;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<k4)throw new Ie(fe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}m5("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=w2((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(c){if(c.timeoutSeconds!==void 0){if(isNaN(c.timeoutSeconds))throw new Ie(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (must not be NaN)`);if(c.timeoutSeconds<5)throw new Ie(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (minimum allowed value is 5)`);if(c.timeoutSeconds>30)throw new Ie(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,o){return r.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class sg{constructor(e,n,r,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new f_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ie(fe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ie(fe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new f_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new s5;switch(r.type){case"firstParty":return new l5(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ie(fe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=d_.get(n);r&&(xe("ComponentProvider","Removing Datastore"),d_.delete(n),r.terminate())}(this),Promise.resolve()}}function ik(i,e,n,r={}){var o;i=jc(i,sg);const c=fl(e),h=i._getSettings(),p=Object.assign(Object.assign({},h),{emulatorOptions:i._getEmulatorOptions()}),g=`${e}:${n}`;c&&(X_(`https://${g}`),W_("Firestore",!0)),h.host!==x2&&h.host!==g&&va("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y=Object.assign(Object.assign({},h),{host:g,ssl:c,emulatorOptions:r});if(!ya(y,p)&&(i._setSettings(y),r.mockUserToken)){let w,E;if(typeof r.mockUserToken=="string")w=r.mockUserToken,E=Mn.MOCK_USER;else{w=KS(r.mockUserToken,(o=i._app)===null||o===void 0?void 0:o.options.projectId);const A=r.mockUserToken.sub||r.mockUserToken.user_id;if(!A)throw new Ie(fe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new Mn(A)}i._authCredentials=new r5(new hw(w,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new rg(this.firestore,e,this._query)}}class _n{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Bc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new _n(this.firestore,e,this._key)}toJSON(){return{type:_n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Kc(n,_n._jsonSchema))return new _n(e,r||null,new Ne(Vt.fromString(n.referencePath)))}}_n._jsonSchemaVersion="firestore/documentReference/1.0",_n._jsonSchema={type:Jt("string",_n._jsonSchemaVersion),referencePath:Jt("string")};class Bc extends rg{constructor(e,n,r){super(e,n,Bp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new _n(this.firestore,null,new Ne(e))}withConverter(e){return new Bc(this.firestore,e,this._path)}}function on(i,e,...n){if(i=Xn(i),arguments.length===1&&(e=jp.newId()),f5("doc","path",e),i instanceof sg){const r=Vt.fromString(e,...n);return R1(r),new _n(i,null,new Ne(r))}{if(!(i instanceof _n||i instanceof Bc))throw new Ie(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(Vt.fromString(e,...n));return R1(r),new _n(i.firestore,i instanceof Bc?i.converter:null,new Ne(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m_="AsyncQueue";class p_{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new s2(this,"async_queue_retry"),this.oc=()=>{const r=Nm();r&&xe(m_,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const n=Nm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=Nm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new ga;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!vl(e))throw e;xe(m_,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Er("INTERNAL UNHANDLED ERROR: ",g_(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const o=Jp.createAndSchedule(this,e,n,r,c=>this.lc(c));return this.ec.push(o),o}ac(){this.tc&&Pe(47125,{hc:g_(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function g_(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}class ag extends sg{constructor(e,n,r,o){super(e,n,r,o),this.type="firestore",this._queue=new p_,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new p_(e),this._firestoreClient=void 0,await e}}}function sk(i,e){const n=typeof i=="object"?i:gp(),r=typeof i=="string"?i:zd,o=ao(n,"firestore").getImmediate({identifier:r});if(!o._initialized){const c=WS("firestore");c&&ik(o,...c)}return o}function E2(i){if(i._terminated)throw new Ie(fe.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||rk(i),i._firestoreClient}function rk(i){var e,n,r;const o=i._freezeSettings(),c=function(p,g,y,w){return new A5(p,g,y,w.host,w.ssl,w.experimentalForceLongPolling,w.experimentalAutoDetectLongPolling,w2(w.experimentalLongPollingOptions),w.useFetchStreams,w.isUsingEmulator)}(i._databaseId,((e=i._app)===null||e===void 0?void 0:e.options.appId)||"",i._persistenceKey,o);i._componentsProvider||!((n=o.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=o.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(i._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),i._firestoreClient=new $6(i._authCredentials,i._appCheckCredentials,i._queue,c,i._componentsProvider&&function(p){const g=p==null?void 0:p._online.build();return{_offline:p==null?void 0:p._offline.build(g),_online:g}}(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Fi(Cn.fromBase64String(e))}catch(n){throw new Ie(fe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Fi(Cn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Fi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Kc(e,Fi._jsonSchema))return Fi.fromBase64String(e.bytes)}}Fi._jsonSchemaVersion="firestore/bytes/1.0",Fi._jsonSchema={type:Jt("string",Fi._jsonSchemaVersion),bytes:Jt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ie(fe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Rn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ie(fe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ie(fe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ke(this._lat,e._lat)||Ke(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ms._jsonSchemaVersion}}static fromJSON(e){if(Kc(e,Ms._jsonSchema))return new Ms(e.latitude,e.longitude)}}Ms._jsonSchemaVersion="firestore/geoPoint/1.0",Ms._jsonSchema={type:Jt("string",Ms._jsonSchemaVersion),latitude:Jt("number"),longitude:Jt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,o){if(r.length!==o.length)return!1;for(let c=0;c<r.length;++c)if(r[c]!==o[c])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Ls._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Kc(e,Ls._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Ls(e.vectorValues);throw new Ie(fe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ls._jsonSchemaVersion="firestore/vectorValue/1.0",Ls._jsonSchema={type:Jt("string",Ls._jsonSchemaVersion),vectorValues:Jt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ak=/^__.*__$/;class ok{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new uo(e,this.data,this.fieldMask,n,this.fieldTransforms):new Yc(e,this.data,n,this.fieldTransforms)}}function A2(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Pe(40011,{Ec:i})}}class lg{constructor(e,n,r,o,c,h){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=o,c===void 0&&this.Ac(),this.fieldTransforms=c||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new lg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.Rc({path:r,mc:!1});return o.fc(e),o}gc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.Rc({path:r,mc:!1});return o.Ac(),o}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Qd(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(A2(this.Ec)&&ak.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class lk{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||gh(e)}Dc(e,n,r,o=!1){return new lg({Ec:e,methodName:n,bc:r,path:Rn.emptyPath(),mc:!1,Sc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ck(i){const e=i._freezeSettings(),n=gh(i._databaseId);return new lk(i._databaseId,!!e.ignoreUndefinedProperties,n)}function uk(i,e,n,r,o,c={}){const h=i.Dc(c.merge||c.mergeFields?2:0,e,n,o);I2("Data must be an object, but it was:",h,r);const p=R2(r,h);let g,y;if(c.merge)g=new os(h.fieldMask),y=h.fieldTransforms;else if(c.mergeFields){const w=[];for(const E of c.mergeFields){const A=dk(e,E,n);if(!h.contains(A))throw new Ie(fe.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);fk(w,A)||w.push(A)}g=new os(w),y=h.fieldTransforms.filter(E=>g.covers(E.field))}else g=null,y=h.fieldTransforms;return new ok(new zi(p),g,y)}function T2(i,e){if(C2(i=Xn(i)))return I2("Unsupported field value:",e,i),R2(i,e);if(i instanceof S2)return function(r,o){if(!A2(o.Ec))throw o.wc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.wc(`${r._methodName}() is not currently supported inside arrays`);const c=r._toFieldTransform(o);c&&o.fieldTransforms.push(c)}(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,o){const c=[];let h=0;for(const p of r){let g=T2(p,o.yc(h));g==null&&(g={nullValue:"NULL_VALUE"}),c.push(g),h++}return{arrayValue:{values:c}}}(i,e)}return function(r,o){if((r=Xn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return K5(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const c=Ct.fromDate(r);return{timestampValue:Wd(o.serializer,c)}}if(r instanceof Ct){const c=new Ct(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Wd(o.serializer,c)}}if(r instanceof Ms)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Fi)return{bytesValue:Ww(o.serializer,r._byteString)};if(r instanceof _n){const c=o.databaseId,h=r.firestore._databaseId;if(!h.isEqual(c))throw o.wc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:qp(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof Ls)return function(h,p){return{mapValue:{fields:{[xw]:{stringValue:Ew},[Fd]:{arrayValue:{values:h.toArray().map(y=>{if(typeof y!="number")throw p.wc("VectorValues must only contain numeric values.");return zp(p.serializer,y)})}}}}}}(r,o);throw o.wc(`Unsupported field value: ${Op(r)}`)}(i,e)}function R2(i,e){const n={};return gw(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):lo(i,(r,o)=>{const c=T2(o,e.Vc(r));c!=null&&(n[r]=c)}),{mapValue:{fields:n}}}function C2(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof Ct||i instanceof Ms||i instanceof Fi||i instanceof _n||i instanceof S2||i instanceof Ls)}function I2(i,e,n){if(!C2(n)||!mw(n)){const r=Op(n);throw r==="an object"?e.wc(i+" a custom object"):e.wc(i+" "+r)}}function dk(i,e,n){if((e=Xn(e))instanceof og)return e._internalPath;if(typeof e=="string")return k2(i,e);throw Qd("Field path arguments must be of type string or ",i,!1,void 0,n)}const hk=new RegExp("[~\\*/\\[\\]]");function k2(i,e,n){if(e.search(hk)>=0)throw Qd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new og(...e.split("."))._internalPath}catch{throw Qd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function Qd(i,e,n,r,o){const c=r&&!r.isEmpty(),h=o!==void 0;let p=`Function ${e}() called with invalid data`;n&&(p+=" (via `toFirestore()`)"),p+=". ";let g="";return(c||h)&&(g+=" (found",c&&(g+=` in field ${r}`),h&&(g+=` in document ${o}`),g+=")"),new Ie(fe.INVALID_ARGUMENT,p+i+g)}function fk(i,e){return i.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(e,n,r,o,c){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new _n(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new mk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(D2("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class mk extends N2{data(){return super.data()}}function D2(i,e){return typeof e=="string"?k2(i,e):e instanceof og?e._internalPath:e._delegate._internalPath}class pk{convertValue(e,n="none"){switch(xa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Xt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(wa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Pe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return lo(e,(o,c)=>{r[o]=this.convertValue(c,n)}),r}convertVectorValue(e){var n,r,o;const c=(o=(r=(n=e.fields)===null||n===void 0?void 0:n[Fd].arrayValue)===null||r===void 0?void 0:r.values)===null||o===void 0?void 0:o.map(h=>Xt(h.doubleValue));return new Ls(c)}convertGeoPoint(e){return new Ms(Xt(e.latitude),Xt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=ch(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Mc(e));default:return null}}convertTimestamp(e){const n=ba(e);return new Ct(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Vt.fromString(e);pt(Jw(r),9688,{name:e});const o=new Lc(r.get(1),r.get(3)),c=new Ne(r.popFirst(5));return o.isEqual(n)||Er(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gk(i,e,n){let r;return r=i?i.toFirestore(e):e,r}class vc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Qa extends N2{constructor(e,n,r,o,c,h){super(e,n,r,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Rd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(D2("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ie(fe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Qa._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Qa._jsonSchemaVersion="firestore/documentSnapshot/1.0",Qa._jsonSchema={type:Jt("string",Qa._jsonSchemaVersion),bundleSource:Jt("string","DocumentSnapshot"),bundleName:Jt("string"),bundle:Jt("string")};class Rd extends Qa{data(e={}){return super.data(e)}}class Rc{constructor(e,n,r,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new vc(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Rd(this._firestore,this._userDataWriter,r.key,r,new vc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ie(fe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(o,c){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map(p=>{const g=new Rd(o._firestore,o._userDataWriter,p.doc.key,p.doc,new vc(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);return p.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}})}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(p=>c||p.type!==3).map(p=>{const g=new Rd(o._firestore,o._userDataWriter,p.doc.key,p.doc,new vc(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,w=-1;return p.type!==0&&(y=h.indexOf(p.doc.key),h=h.delete(p.doc.key)),p.type!==1&&(h=h.add(p.doc),w=h.indexOf(p.doc.key)),{type:yk(p.type),doc:g,oldIndex:y,newIndex:w}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ie(fe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Rc._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=jp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],o=[];return this.docs.forEach(c=>{c._document!==null&&(n.push(c._document),r.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),o.push(c.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function yk(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Pe(61501,{type:i})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gn(i){i=jc(i,_n);const e=jc(i.firestore,ag);return nk(E2(e),i._key).then(n=>bk(e,i,n))}Rc._jsonSchemaVersion="firestore/querySnapshot/1.0",Rc._jsonSchema={type:Jt("string",Rc._jsonSchemaVersion),bundleSource:Jt("string","QuerySnapshot"),bundleName:Jt("string"),bundle:Jt("string")};class vk extends pk{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new _n(this.firestore,null,n)}}function ks(i,e,n){i=jc(i,_n);const r=jc(i.firestore,ag),o=gk(i.converter,e);return _k(r,[uk(ck(r),"setDoc",i._key,o,i.converter!==null,n).toMutation(i._key,_r.none())])}function _k(i,e){return function(r,o){const c=new ga;return r.asyncQueue.enqueueAndForget(async()=>F6(await ek(r),o,c)),c.promise}(E2(i),e)}function bk(i,e,n){const r=n.docs.get(e._key),o=new vk(i);return new Qa(i,o,e._key,r,new vc(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(o){gl=o})(ml),Vs(new cs("firestore",(r,{instanceIdentifier:o,options:c})=>{const h=r.getProvider("app").getImmediate(),p=new ag(new a5(r.getProvider("auth-internal")),new c5(h,r.getProvider("app-check-internal")),function(y,w){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new Ie(fe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Lc(y.options.projectId,w)}(h,o),h);return c=Object.assign({useFetchStreams:n},c),p._setSettings(c),p},"PUBLIC").setMultipleInstances(!0)),Hi(x1,E1,e),Hi(x1,E1,"esm2017")})();const wk={apiKey:"AIzaSyApj9cFUaYnRAZq4Hjab0NMtCJo7OwCG1w",authDomain:"roversa-2c5fd.firebaseapp.com",projectId:"roversa-2c5fd",storageBucket:"roversa-2c5fd.firebasestorage.app",messagingSenderId:"261909236286",appId:"1:261909236286:web:3714d3511e6a5c980a1f6f",measurementId:"G-NX72JNWMM2"},cg=eb(wk);BR(cg);const Rt=n5(cg),ln=sk(cg),_h="/dashboard/assets/Official_Logo_White-bdZT6TWh.png";function xk(){const i=Fs(),[e,n]=I.useState(null);return I.useEffect(()=>{Ip(Rt,r=>{r&&i("/dashboard")})}),f.jsxs("div",{className:"home-container",children:[f.jsxs("div",{className:"home-header slide-in-from-top",children:[f.jsx("div",{className:"logo",onClick:()=>i("/"),style:{cursor:"pointer"},children:f.jsx("img",{src:_h,alt:"Roversa Robotics"})}),f.jsx("div",{className:"header-nav",children:f.jsx("button",{className:"nav-button fade-in-scale animate-on-mount-delay-1",onClick:()=>i("/login"),children:"Login"})})]}),f.jsx("div",{className:"home-content slide-in-from-bottom",children:f.jsx("div",{className:"hero-section",children:f.jsxs("div",{className:"hero-content",children:[f.jsx("h1",{className:"animate-on-mount-delay-2",children:"Welcome to Roversa Dashboard"}),f.jsx("div",{className:"hero-buttons",children:f.jsx("button",{className:"secondary-btn fade-in-scale animate-on-mount-delay-3",onClick:()=>i("/login"),children:"Sign In"})})]})})})]})}function Ek(){const i=Fs(),[e,n]=I.useState(""),[r,o]=I.useState(""),[c,h]=I.useState(""),[p,g]=I.useState(null),y=async()=>{try{const w=await FC(Rt,e,r);i("/dashboard")}catch{h("Invalid login credentials")}};return I.useEffect(()=>{Ip(Rt,w=>{w&&i("/dashboard")})}),f.jsxs("div",{className:"login-container",children:[f.jsxs("div",{className:"login-header slide-in-from-top",children:[f.jsx("div",{className:"logo",onClick:()=>i("/"),style:{cursor:"pointer"},children:f.jsx("img",{src:_h,alt:"Roversa Robotics"})}),f.jsx("div",{className:"header-nav",children:f.jsx("button",{className:"nav-button active fade-in-scale animate-on-mount-delay-1",children:"Login"})})]}),f.jsx("div",{className:"login-content slide-in-from-bottom",children:f.jsxs("div",{className:"login-card fade-in-scale animate-on-mount-delay-2",children:[f.jsxs("div",{className:"login-title animate-on-mount-delay-3",children:[f.jsx("h1",{children:"Welcome Back"}),f.jsx("p",{children:"Sign in to your Roversa Dashboard"})]}),c&&f.jsx("div",{className:"error-message animate-on-mount-delay-4",children:c}),f.jsxs("div",{className:"login-form",children:[f.jsxs("div",{className:"input-group animate-on-mount-delay-4",children:[f.jsx("label",{htmlFor:"email",children:"Email"}),f.jsx("input",{type:"email",id:"email",placeholder:"Enter your email",className:"login-input",value:e,onChange:w=>n(w.target.value)})]}),f.jsxs("div",{className:"input-group animate-on-mount-delay-5",children:[f.jsx("label",{htmlFor:"password",children:"Password"}),f.jsx("input",{type:"password",id:"password",placeholder:"Enter your password",className:"login-input",value:r,onChange:w=>o(w.target.value)})]}),f.jsx("button",{className:"login-submit-btn fade-in-scale animate-on-mount-delay-6",onClick:y,children:"Sign In"})]}),f.jsx("div",{className:"signup-link animate-on-mount-delay-7",children:f.jsxs("p",{children:["Don't have an account? ",f.jsx("button",{className:"link-button",onClick:()=>i("/signup"),children:"Sign up"})]})})]})})]})}function Sk(){const i=Fs(),[e,n]=I.useState(""),[r,o]=I.useState(""),[c,h]=I.useState(""),[p,g]=I.useState(""),[y,w]=I.useState(null),E=async()=>{try{const A=await zC(Rt,r,c);await ks(on(ln,"users",A.user.uid,"profile"),{name:e,email:r}),console.log("Profile written:",{name:e,email:r}),await new Promise(B=>setTimeout(B,1e3)),i("/dashboard")}catch(A){g(A.message)}};return I.useEffect(()=>{Ip(Rt,A=>{A&&i("/dashboard")})}),f.jsxs("div",{className:"signup-container",children:[f.jsxs("div",{className:"signup-header slide-in-from-top",children:[f.jsx("div",{className:"logo",onClick:()=>i("/"),style:{cursor:"pointer"},children:f.jsx("img",{src:_h,alt:"Roversa Robotics"})}),f.jsx("div",{className:"header-nav",children:f.jsx("button",{className:"nav-button fade-in-scale animate-on-mount-delay-1",onClick:()=>i("/login"),children:"Login"})})]}),f.jsx("div",{className:"signup-content slide-in-from-bottom",children:f.jsxs("div",{className:"signup-card fade-in-scale animate-on-mount-delay-2",children:[f.jsxs("div",{className:"signup-title animate-on-mount-delay-3",children:[f.jsx("h1",{children:"Create Account"}),f.jsx("p",{children:"Let's make your classroom experience easy"})]}),p&&f.jsx("div",{className:"error-message animate-on-mount-delay-4",children:p}),f.jsxs("div",{className:"signup-form",children:[f.jsxs("div",{className:"input-group animate-on-mount-delay-4",children:[f.jsx("label",{htmlFor:"name",children:"Name"}),f.jsx("input",{type:"text",id:"name",placeholder:"Enter your name",className:"signup-input",value:e,onChange:A=>n(A.target.value)})]}),f.jsxs("div",{className:"input-group animate-on-mount-delay-5",children:[f.jsx("label",{htmlFor:"email",children:"Email"}),f.jsx("input",{type:"email",id:"email",placeholder:"Enter your email",className:"signup-input",value:r,onChange:A=>o(A.target.value)})]}),f.jsxs("div",{className:"input-group animate-on-mount-delay-6",children:[f.jsx("label",{htmlFor:"password",children:"Password"}),f.jsx("input",{type:"password",id:"password",placeholder:"Create a password",className:"signup-input",value:c,onChange:A=>h(A.target.value)})]}),f.jsx("button",{className:"signup-submit-btn fade-in-scale animate-on-mount-delay-7",onClick:E,children:"Create Account"})]}),f.jsx("div",{className:"login-link animate-on-mount-delay-8",children:f.jsxs("p",{children:["Already have an account? ",f.jsx("button",{className:"link-button",onClick:()=>i("/login"),children:"Sign in"})]})})]})})]})}const Ak="/dashboard/assets/robotman-XVmXDZYK.png";function eu(){const i=Fs(),e=ds(),[n,r]=I.useState(null),[o,c]=I.useState(""),h=async()=>{try{await GC(Rt),i("/login")}catch(p){console.error("Error signing out:",p)}};return I.useEffect(()=>{const p=Rt.onAuthStateChanged(g=>{var y;g?(r(g),c(g.displayName||((y=g.email)==null?void 0:y.split("@")[0])||"User")):i("/login")});return()=>p()},[i]),f.jsxs("div",{className:"sidebar",children:[f.jsx("div",{className:"logo",style:{marginBottom:30},children:f.jsx("img",{src:_h,alt:"Roversa Robotics"})}),f.jsxs("nav",{className:"nav-menu",children:[f.jsx("div",{className:`nav-item${e.pathname==="/dashboard"?" active":""}`,onClick:()=>i("/dashboard"),style:{cursor:"pointer"},children:f.jsxs("span",{style:{display:"flex",alignItems:"center",gap:8},children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"20",height:"20",style:{marginRight:8},children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"})}),"Home"]})}),f.jsx("div",{className:`nav-item${e.pathname.startsWith("/sessions")?" active":""}`,onClick:()=>i("/sessions"),children:f.jsxs("span",{style:{display:"flex",alignItems:"center",gap:8},children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"20",height:"20",style:{marginRight:8},children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.383a14.406 14.406 0 0 1-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 1 0-7.517 0c.85.493 1.509 1.333 1.509 2.316V18"})}),"Sessions"]})}),f.jsx("div",{className:`nav-item${e.pathname.startsWith("/classrooms")?" active":""}`,onClick:()=>i("/classrooms"),children:f.jsxs("span",{style:{display:"flex",alignItems:"center",gap:8},children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"20",height:"20",style:{marginRight:8},children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"})}),"Classrooms"]})}),f.jsx("div",{className:`nav-item${e.pathname.startsWith("/lessons")?" active":""}`,onClick:()=>i("/lessons"),style:{cursor:"pointer"},children:f.jsxs("span",{style:{display:"flex",alignItems:"center",gap:8},children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"20",height:"20",style:{marginRight:8},children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.26 10.147a60.438 60.438 0 0 0-.491 6.347A48.62 48.62 0 0 1 12 20.904a48.62 48.62 0 0 1 8.232-4.41 60.46 60.46 0 0 0-.491-6.347m-15.482 0a50.636 50.636 0 0 0-2.658-.813A59.906 59.906 0 0 1 12 3.493a59.903 59.903 0 0 1 10.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0A50.717 50.717 0 0 1 12 13.489a50.702 50.702 0 0 1 7.74-3.342M6.75 15a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Zm0 0v-3.675A55.378 55.378 0 0 1 12 8.443m-7.007 11.55A5.981 5.981 0 0 0 6.75 15.75v-1.5"})}),"Lessons"]})}),f.jsx("div",{style:{height:"170px"}}),f.jsx("div",{className:"robotman-wrapper",style:{display:"flex",justifyContent:"flex-start",alignItems:"flex-end",marginTop:0,marginBottom:"0",height:"100px",marginLeft:0,marginRight:0},children:f.jsx("img",{src:Ak,alt:"Robotman",className:"robotman-img",style:{width:"250px",height:"auto",display:"block",marginLeft:"-19px"}})}),f.jsx("div",{className:"nav-item",style:{marginTop:"-50px",cursor:"pointer",opacity:.5,pointerEvents:"none"},children:f.jsxs("span",{style:{display:"flex",alignItems:"center",gap:8},children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"20",height:"20",style:{marginRight:8},children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 7.5a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.5 19.5a7.5 7.5 0 0115 0v.75a.75.75 0 01-.75.75h-13.5a.75.75 0 01-.75-.75v-.75z"})}),"Profile"]})}),f.jsx("div",{className:"nav-item",style:{cursor:"pointer",opacity:.5,pointerEvents:"none"},children:f.jsxs("span",{style:{display:"flex",alignItems:"center",gap:8},children:[f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"20",height:"20",style:{marginRight:8},children:[f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.01c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.01 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.01 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.573 1.01c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.572-1.01c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.01-2.573c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.01-2.572c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.01z"}),f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Settings"]})}),f.jsx("div",{className:"nav-item logout",onClick:h,children:f.jsxs("span",{style:{display:"flex",alignItems:"center",gap:8},children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"20",height:"20",style:{marginRight:8},children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 9V5.25A2.25 2.25 0 0 1 10.5 3h6a2.25 2.25 0 0 1 2.25 2.25v13.5A2.25 2.25 0 0 1 16.5 21h-6a2.25 2.25 0 0 1-2.25-2.25V15m-3 0-3-3m0 0 3-3m-3 3H15"})}),"Log out"]})})]})]})}const Tk="/dashboard/assets/tent-DiHh0Yjx.png",Rk=(i,e)=>{const n=new Date(i,e,1),o=new Date(i,e+1,0).getDate(),c=new Date(i,e,0).getDate(),h=n.getDay()===0?6:n.getDay()-1,p=[];let g=[],y=1;for(let w=0;w<6;w++){g=[];for(let E=0;E<7;E++){const A=w*7+E;A<h?g.push({day:c-(h-A-1),isCurrentMonth:!1}):y>o?(g.push({day:y-o,isCurrentMonth:!1}),y++):(g.push({day:y,isCurrentMonth:!0}),y++)}p.push(g)}return p},y_=["January","February","March","April","May","June","July","August","September","October","November","December"];function Ck({sessions:i=[]}){const e=new Date,[n,r]=I.useState(e.getFullYear()),[o,c]=I.useState(e.getMonth()),[h,p]=I.useState(2.5),g=I.useRef(null),y=I.useRef(null),w=I.useRef(null),[E,A]=I.useState(null),[B,H]=I.useState(!1),[q,Q]=I.useState([]);let $=Rk(n,o);I.useEffect(()=>{var j;if(!g.current||!w.current)return;const me=1.1,D=1.4,R=.01;let C=me;for(let P=D;P>=me;P-=R){g.current.style.fontSize=`${P}rem`;const N=g.current.scrollWidth,qe=w.current.offsetWidth-(((j=y.current)==null?void 0:j.offsetWidth)||0)-8;if(N<=qe){C=P;break}}p(C);const L=new window.ResizeObserver(()=>{var N;let P=me;for(let qe=D;qe>=me;qe-=R){g.current.style.fontSize=`${qe}rem`;const Je=g.current.scrollWidth,se=w.current.offsetWidth-(((N=y.current)==null?void 0:N.offsetWidth)||0)-8;if(Je<=se){P=qe;break}}p(P)});return L.observe(w.current),()=>L.disconnect()},[o,n]);const Y=()=>{o===0?(c(11),r(n-1)):c(o-1)},z=()=>{o===11?(c(0),r(n+1)):c(o+1)},ge=me=>{try{const R=new Date(n,o,me).toDateString();let C=0,L=0,j=0;return i.forEach(P=>{new Date(P.createdAt).toDateString()===R&&(P.status==="ended"?C++:P.status==="active"||P.status==="paused"?L++:P.status==="scheduled"&&j++)}),C>0||L>0||j>0?{past:C,active:L,scheduled:j}:null}catch(D){return console.error("Error getting session data:",D),null}},ee=me=>{try{const R=new Date(n,o,me).toDateString();return i.filter(C=>new Date(C.createdAt).toDateString()===R)}catch{return[]}};return f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"dashboard-calendar-card",children:[f.jsxs("div",{className:"calendar-header-row",ref:w,children:[f.jsxs("div",{className:"calendar-title",ref:g,style:{fontSize:`${h}rem`},children:[y_[o],", ",n]}),f.jsxs("div",{className:"calendar-arrows-group",ref:y,children:[f.jsx("button",{className:"calendar-arrow",onClick:Y,children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"})})}),f.jsx("button",{className:"calendar-arrow",onClick:z,children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})})})]})]}),f.jsx("div",{className:"calendar-subtitle",children:"Track your progress"}),f.jsx("div",{className:"calendar-grid",children:$.map((me,D)=>f.jsx("div",{className:"calendar-week",children:me.map((R,C)=>{const L=R.isCurrentMonth&&R.day===e.getDate()&&o===e.getMonth()&&n===e.getFullYear();return f.jsxs("div",{className:`calendar-day${R.isCurrentMonth?"":" calendar-day-outside"}${L?" calendar-day-today":""}`,onClick:()=>{R.isCurrentMonth&&(A(R.day),Q(ee(R.day)),H(!0))},style:{cursor:R.isCurrentMonth?"pointer":"default"},children:[f.jsx("span",{children:R.day}),R.isCurrentMonth&&ge(R.day)&&f.jsxs("div",{className:"calendar-day-dots",children:[Array.from({length:ge(R.day).past||0},(j,P)=>f.jsx("div",{className:"calendar-day-dot-past"},`past-${P}`)),Array.from({length:ge(R.day).active||0},(j,P)=>f.jsx("div",{className:"calendar-day-dot-active"},`active-${P}`)),Array.from({length:ge(R.day).scheduled||0},(j,P)=>f.jsx("div",{className:"calendar-day-dot-scheduled"},`scheduled-${P}`))]})]},C)})},D))}),f.jsx("img",{src:Tk,alt:"Tent illustration for calendar",className:"calendar-tent-img",onError:me=>{me.target.style.display="none"}})]}),B&&PS.createPortal(f.jsx("div",{className:"modal-overlay",onClick:()=>H(!1),children:f.jsxs("div",{className:"modal-content",onClick:me=>me.stopPropagation(),style:{maxWidth:420,width:"90%",maxHeight:"80vh",overflowY:"auto",borderRadius:16},children:[f.jsx("div",{className:"modal-header",children:f.jsxs("h2",{style:{fontSize:"1.3rem",fontWeight:400,color:"#222",fontFamily:"Inter, sans-serif",textAlign:"center",margin:0},children:["Sessions on ",E," ",y_[o],", ",n]})}),f.jsx("div",{className:"modal-body",children:q.length===0?f.jsx("div",{style:{color:"#888",fontSize:15,fontFamily:"Open Sans, sans-serif",fontWeight:400,textAlign:"center",margin:"32px 0"},children:"No sessions on this day"}):f.jsx("div",{style:{display:"flex",flexDirection:"column",gap:16,width:"100%"},children:q.map(me=>f.jsxs("div",{style:{background:"#f7f8fa",borderRadius:10,padding:"12px 18px",border:"1px solid #e0e0e0",display:"flex",flexDirection:"column",gap:2},children:[f.jsx("div",{style:{fontWeight:700,color:"#4169e1",fontSize:15},children:me.name}),f.jsx("div",{style:{color:"#888",fontWeight:400,fontSize:13},children:me.status.charAt(0).toUpperCase()+me.status.slice(1)}),f.jsx("div",{style:{color:"#555",fontWeight:400,fontSize:12},children:me.block||me.blockName||me.classroomBlock||""})]},me.id))})})]})}),document.body)]})}const Ik="/dashboard/assets/chargingstation-DIe01uMz.png",kk="/dashboard/assets/dashboardbatterydesign-DalcyAxh.png",Nk="/dashboard/assets/excited_flower-DN0cCqXE.png",Dk="/dashboard/assets/myrobots-BpXXry3c.png",jk="/dashboard/assets/myclassrooms--acsbIcs.png",Ok="/dashboard/assets/accessguides-KOE7_o3r.png";function Mk(){const i=Fs(),[e,n]=I.useState(null),[r,o]=I.useState(""),[c,h]=I.useState([]),[p,g]=I.useState([]),[y,w]=I.useState([]),[E,A]=I.useState([]),[B,H]=I.useState(!1),q=I.useRef();function Q({lastBatteryTime:Y,firstBatteryTime:z,lastProgramTime:ge},ee=new Date){return!Y||(ee-new Date(Y))/1e3>10?"inactive_battery":ge&&(ee-new Date(ge))/1e3<=180?"active":ge&&(ee-new Date(ge))/1e3>180||!ge&&z&&(ee-new Date(z))/1e3>180?"inactive":"inactive_battery"}function $(Y){if(Y.assignedTo&&typeof Y.assignedTo=="object"){if(Y.assignedTo.name)return Y.assignedTo.name;if(Y.assignedTo.group)return Y.assignedTo.group}return Y.assignedTo?Y.assignedTo:"Unassigned"}return I.useEffect(()=>{if(!B)return;function Y(z){q.current&&!q.current.contains(z.target)&&H(!1)}return document.addEventListener("mousedown",Y),()=>document.removeEventListener("mousedown",Y)},[B]),I.useEffect(()=>{const Y=async ee=>{if(!ee)return;const me=on(ln,"users",ee.uid,"appdata","sessions"),D=await Gn(me);if(D.exists()){const R=D.data();g((R.sessions||[]).filter(j=>String(j.status)==="active")),w((R.sessions||[]).filter(j=>String(j.status)==="paused"));const C=(R.sessions||[]).filter(j=>String(j.status)==="ended");C.sort((j,P)=>new Date(P.endedAt||P.createdAt)-new Date(j.endedAt||j.createdAt)),h(C.slice(0,3));let L=[];(R.sessions||[]).forEach(j=>{j.robots&&Object.entries(j.robots).forEach(([P,N])=>{if(!N.batteryData||typeof N.batteryData.voltage!="number")return;const qe=Q(N);(N.batteryData.voltage<3.7||qe==="inactive_battery")&&L.push({sessionName:j.name,sessionId:j.id,deviceId:P,robot:N})})}),A(L)}else g([]),w([]),h([]),A([])},z=async ee=>{var me;if(ee){try{const D=on(ln,"users",ee.uid,"profile"),R=await Gn(D);if(R.exists()){const C=R.data();if(console.log("Profile loaded:",C),C.name&&C.name.trim()!==""){o(C.name);return}}}catch{}o(((me=ee.email)==null?void 0:me.split("@")[0])||"User")}},ge=Rt.onAuthStateChanged(ee=>{ee?(n(ee),z(ee),Y(ee)):i("/login")});return()=>ge()},[i]),f.jsxs("div",{className:"dashboard-container",children:[f.jsx(eu,{className:"slide-in-from-left"}),B&&f.jsx("div",{className:"modal-overlay",onClick:()=>H(!1),children:f.jsxs("div",{className:"modal-content",ref:q,onClick:Y=>Y.stopPropagation(),style:{maxWidth:500,width:"90%",maxHeight:"80vh",overflowY:"auto",position:"relative",display:"flex",flexDirection:"column",alignItems:"center"},children:[f.jsx("div",{className:"modal-header",children:f.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:400,color:"#222",fontFamily:"Inter, sans-serif",textAlign:"center",margin:0},children:"Low Battery Robots"})}),f.jsx("div",{className:"modal-body",style:{width:"100%"},children:E.length===0?f.jsx("div",{style:{color:"#888",fontSize:16,fontFamily:"Open Sans, sans-serif",fontWeight:400,textAlign:"center",margin:"32px 0"},children:"All robots are sufficiently charged"}):f.jsx("div",{className:"robot-cards-container",style:{display:"flex",flexWrap:"wrap",gap:24,width:"100%",justifyContent:"center",alignItems:"flex-start"},children:E.map(({sessionName:Y,sessionId:z,deviceId:ge,robot:ee},me)=>{var P;let C=0;typeof((P=ee.batteryData)==null?void 0:P.voltage)=="number"&&(C=Math.max(0,Math.min(1,(ee.batteryData.voltage-3.3)/(5-3.3))));const L=`${Math.round(C*100)}%`,j=$(ee);return f.jsxs("div",{className:"robot-card",style:{width:320,minHeight:70,background:"#fff",borderRadius:12,boxShadow:"0 2px 12px rgba(65, 105, 225, 0.08)",border:"2px solid #e0e0e0",padding:"16px 20px",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",position:"relative",textAlign:"left",gap:8},children:[f.jsxs("div",{className:"robot-card-info",style:{width:"70%",display:"flex",flexDirection:"column",alignItems:"flex-start",gap:2},children:[f.jsx("div",{style:{fontWeight:700,color:"#4169e1",fontSize:16,marginBottom:2,letterSpacing:.5},children:ge}),f.jsx("div",{style:{color:"#555",fontWeight:500,fontSize:13,marginBottom:2,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:j}),f.jsx("div",{style:{color:"#888",fontWeight:400,fontSize:12,marginBottom:2,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:Y})]}),f.jsx("div",{style:{color:"#d32f2f",fontWeight:700,fontSize:20,minWidth:80,textAlign:"right"},children:L})]},z+"-"+ge)})})})]})}),f.jsxs("div",{className:"main-content dashboard-home-main-content slide-in-from-bottom",children:[f.jsxs("div",{className:"dashboard-header slide-in-from-top",children:[f.jsxs("h1",{className:"dashboard-welcome",style:{fontFamily:"Bevan, serif",fontWeight:400},children:["Welcome, ",r,"!"]}),f.jsx("div",{className:"dashboard-subtitle",children:"Control the Classroom. Ignite the Circuit."})]}),f.jsxs("div",{style:{width:"100%"},children:[f.jsxs("div",{className:"dashboard-cards-row",style:{display:"flex",gap:24,marginBottom:0,paddingBottom:0},children:[f.jsxs("div",{className:"dashboard-card fade-in-scale animate-on-mount-delay-1",onClick:()=>i("/sessions"),style:{flex:"1 1 320px",minWidth:250,maxWidth:250},children:[f.jsx("img",{src:Dk,alt:"My Sessions",className:"dashboard-card-bg"}),f.jsxs("div",{className:"dashboard-card-content",children:[f.jsx("div",{className:"dashboard-card-title",children:"My Sessions"}),f.jsx("div",{className:"dashboard-card-desc",children:"View and manage active sessions"})]})]}),f.jsxs("div",{className:"dashboard-card fade-in-scale animate-on-mount-delay-3",onClick:()=>i("/classrooms"),style:{flex:"1 1 320px",minWidth:250,maxWidth:250},children:[f.jsx("img",{src:jk,alt:"My Classrooms",className:"dashboard-card-bg"}),f.jsxs("div",{className:"dashboard-card-content",children:[f.jsx("div",{className:"dashboard-card-title",children:"My Classrooms"}),f.jsx("div",{className:"dashboard-card-desc",children:"Manage your students and groups"})]})]}),f.jsxs("div",{className:"dashboard-card fade-in-scale animate-on-mount-delay-4",onClick:()=>i("/lessons"),style:{flex:"1 1 320px",minWidth:250,maxWidth:250},children:[f.jsx("img",{src:Ok,alt:"My Lessons",className:"dashboard-card-bg"}),f.jsxs("div",{className:"dashboard-card-content",children:[f.jsx("div",{className:"dashboard-card-title",children:"My Lessons"}),f.jsx("div",{className:"dashboard-card-desc",children:"View and manage lessons"})]})]}),f.jsx("div",{className:"dashboard-calendar-card animate-on-mount-delay-5",style:{minWidth:220,maxWidth:320,marginLeft:12,display:"flex",flexDirection:"column",justifyContent:"flex-end"},children:f.jsx(Ck,{sessions:[...p,...y,...c]})})]}),f.jsxs("div",{style:{display:"flex",flexDirection:"row",gap:30,width:"100%",marginTop:0,alignItems:"flex-start"},children:[f.jsxs("div",{style:{minWidth:180,maxWidth:240,marginLeft:0,padding:0,background:"#fff",border:"1.5px solid #e0e0e0",boxShadow:"0 1px 4px rgba(65,105,225,0.04)",borderRadius:20,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start",overflow:"hidden",marginTop:"-32px"},children:[f.jsxs("div",{style:{width:"100%",background:"#fff",borderTopLeftRadius:20,borderTopRightRadius:20,display:"flex",flexDirection:"column",alignItems:"center",padding:"18px 0 0 0",position:"relative",minHeight:120},children:[f.jsx("img",{src:kk,alt:"Battery Design",style:{position:"absolute",top:-50,left:0,width:"100%",height:200,objectFit:"cover",zIndex:1,pointerEvents:"none",borderTopLeftRadius:20,borderTopRightRadius:20}}),f.jsx("img",{src:Ik,alt:"Charging Station",style:{width:170,height:140,objectFit:"cover",marginBottom:10,zIndex:400,position:"relative"}})]}),f.jsxs("div",{style:{padding:"0 14px 14px 14px",width:"100%",display:"flex",flexDirection:"column",alignItems:"center"},children:[f.jsx("h2",{style:{fontSize:"1.3rem",fontWeight:700,color:"#222",margin:"12px 0 6px 0",fontFamily:"Inter, sans-serif",textAlign:"center"},children:"Time to Charge?"}),f.jsx("div",{style:{color:"#555",fontSize:"0.80rem",fontFamily:"Inter, sans-serif",fontWeight:400,textAlign:"center",marginBottom:14,maxWidth:200},children:"Monitor your robots' battery life while they're in use."}),f.jsx("button",{style:{background:"#ff7a1a",color:"#fff",fontWeight:700,fontFamily:"Bevan, serif",fontSize:"0.85rem",border:"none",borderRadius:10,padding:"10px 0",width:"100%",marginTop:6,boxShadow:"0 2px 8px rgba(0,0,0,0.10)",cursor:"pointer",transition:"background 0.15s",outline:"none",letterSpacing:.5},onClick:()=>H(!0),children:"See Activity"})]})]}),f.jsx("div",{style:{flex:1,minWidth:340,maxWidth:520,marginTop:"-32px"},children:f.jsxs("div",{className:"dashboard-card active-sessions-section fade-in-scale animate-on-mount-delay-2",style:{padding:0,width:"100%",marginBottom:8,marginTop:0,display:"flex",flexDirection:"column",background:"#fff6fa",border:"2px solid #fff",borderRadius:20},children:[f.jsxs("div",{style:{padding:"22px 28px 0 28px",display:"flex",alignItems:"center",gap:14},children:[f.jsx("img",{src:Nk,alt:"Excited Flower",style:{width:80,height:105,marginRight:8,marginBottom:20,marginLeft:-10,flexShrink:0}}),f.jsxs("div",{style:{display:"flex",flexDirection:"column",flex:1},children:[f.jsx("h2",{style:{fontSize:"2rem",fontWeight:700,color:"#222",marginBottom:6,fontFamily:"Inter, sans-serif",textAlign:"left"},children:"Active Sessions"}),f.jsx("div",{style:{color:"#555",fontSize:"0.85rem",marginBottom:25,fontFamily:"Open Sans, sans-serif",textAlign:"left"},children:"Continue or manage your currently running or paused sessions"})]})]}),f.jsx("div",{className:"session-list",style:{padding:"0 28px 0 28px",width:"100%",marginTop:6},children:[...p,...y].length>0?[...p,...y].map((Y,z)=>f.jsxs("div",{className:`session-list-item ${Y.status}-session`,onClick:()=>i(`/sessions/${Y.id}`),style:{position:"relative",overflow:"hidden",marginBottom:10,borderRadius:8,background:"#fff",border:"1.5px solid #e0e0e0",boxShadow:"0 1px 4px rgba(65,105,225,0.04)",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"14px 24px",cursor:"pointer",fontFamily:"inherit",minWidth:0,width:"100%",boxSizing:"border-box"},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:18,minWidth:0},children:[f.jsx("span",{className:`status-badge ${Y.status}`,style:{fontSize:13,padding:"3px 12px",borderRadius:5,marginRight:8,marginLeft:8,marginTop:18,flexShrink:0},children:Y.status==="active"?"Active":Y.status==="paused"?"Paused":Y.status}),f.jsx("span",{style:{fontWeight:700,fontSize:"1.18rem",color:"#222",fontFamily:"Inter, sans-serif",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:220},children:Y.name}),f.jsxs("span",{className:"session-time",style:{color:"#888",fontSize:"0.93rem",fontFamily:"Inter, sans-serif",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:180},children:["Started: ",new Date(Y.createdAt).toLocaleDateString()]})]}),Y.status==="paused"&&null]},Y.id)):f.jsxs("div",{className:"session-list-item session-card-empty animate-on-mount-delay-2",style:{textAlign:"center",padding:40,color:"#888",fontFamily:"inherit"},children:[f.jsx("h3",{style:{color:"#888",fontWeight:500,fontSize:"1.1rem"},children:"No Active or Paused Sessions"}),f.jsx("p",{style:{color:"#bbb",fontSize:14},children:"Start or resume a session to see it here."})]})}),f.jsx("div",{style:{margin:"10px 28px 18px 0",textAlign:"right"},children:f.jsx("button",{style:{background:"#ff7a1a",color:"#fff",fontWeight:700,fontFamily:"Bevan, serif",fontSize:"0.75rem",border:"none",borderRadius:10,padding:"12px 0",width:"100%",marginTop:8,marginRight:28,boxShadow:"0 2px 8px rgba(0,0,0,0.10)",cursor:"pointer",transition:"background 0.15s",outline:"none",letterSpacing:.5},onClick:()=>i("/sessions"),children:"View All Sessions"})})]})}),f.jsx("div",{className:"dashboard-calendar-card animate-on-mount-delay-5",style:{minWidth:220,maxWidth:320,marginTop:"20px",marginLeft:20,display:"flex",flexDirection:"column",justifyContent:"flex-end"},children:f.jsxs("div",{className:"recent-sessions-section",style:{marginTop:0},children:[f.jsx("h2",{className:"recent-sessions-title",style:{fontSize:"1.5rem",fontWeight:700,color:"#222",marginBottom:6},children:"Recent Sessions"}),f.jsx("div",{className:"recent-sessions-subtitle",style:{color:"#555",fontSize:"0.85rem",marginBottom:24},children:"View student progress on most recently assigned sessions"}),f.jsx("div",{className:"recent-sessions-list",children:c.length>0?c.map((Y,z)=>{const ge=Y.block||Y.blockName||(Y.classroomBlock?Y.classroomBlock:null),me=new Date(Y.endedAt||Y.createdAt).toLocaleDateString("en-GB",{day:"2-digit",month:"long"});return f.jsx("div",{className:`recent-session-card slide-in-from-right animate-on-mount-delay-${5+z}`,onClick:()=>i(`/sessions/${Y.id}`),style:{cursor:"pointer",position:"relative"},children:f.jsxs("div",{className:"recent-session-card-main",children:[f.jsxs("div",{className:"recent-session-card-info",children:[f.jsx("div",{className:"recent-session-card-title",style:{fontWeight:700,fontSize:"1.18rem",color:"#222",marginBottom:4},children:Y.name}),f.jsxs("div",{className:"recent-session-card-meta",style:{color:"#888",fontSize:"1.02rem",marginBottom:10},children:[f.jsx("span",{children:me}),ge&&f.jsx("span",{className:"dot-separator",children:"•"}),ge&&f.jsx("span",{children:ge})]}),f.jsxs("div",{className:"recent-session-progress-bar",children:[f.jsx("div",{className:"recent-session-progress-bar-inner"}),f.jsx("div",{className:"recent-session-progress-dot"})]})]}),f.jsx("div",{className:"recent-session-card-menu",children:f.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[f.jsx("circle",{cx:"12",cy:"5",r:"1.5",fill:"#888"}),f.jsx("circle",{cx:"12",cy:"12",r:"1.5",fill:"#888"}),f.jsx("circle",{cx:"12",cy:"19",r:"1.5",fill:"#888"})]})})]})},Y.id)}):f.jsx("div",{className:"recent-session-item no-sessions animate-on-mount-delay-5",children:"No recent sessions"})})]})})]})]})]})]})}function Lk(){const i=Fs(),e=ds(),[n,r]=I.useState(!1),[o,c]=I.useState(""),[h,p]=I.useState([]),[g,y]=I.useState([]),[w,E]=I.useState(null),[A,B]=I.useState([]),[H,q]=I.useState(""),[Q,$]=I.useState(""),[Y,z]=I.useState(!1),[ge,ee]=I.useState(null),[me,D]=I.useState(!1),[R,C]=I.useState(null),L=async ne=>{if(!ne)return;const Ee=on(ln,"users",ne.uid,"appdata","classrooms"),O=await Gn(Ee);O.exists()?B(O.data().classrooms||[]):B([])},j=ne=>{if(!ne)return null;const Ee=A.find(O=>O.id===ne);return Ee?Ee.name:null},P=async()=>{var ae,be;const ne=Rt.currentUser;if(!ne)return;const Ee=on(ln,"users",ne.uid,"appdata","sessions"),O=await Gn(Ee);let re=[];if(O.exists()&&(re=O.data().sessions||[]),re.find(ke=>ke.status==="active")){ee({id:Date.now().toString(),name:o,classroomId:H||null,createdAt:new Date().toISOString(),createdBy:(ae=Rt.currentUser)==null?void 0:ae.email,status:"active"}),z(!0);return}N({id:Date.now().toString(),name:o,classroomId:H||null,createdAt:new Date().toISOString(),createdBy:(be=Rt.currentUser)==null?void 0:be.email,status:"active"})},N=async ne=>{const Ee=Rt.currentUser,O=on(ln,"users",Ee.uid,"appdata","sessions"),re=await Gn(O);let pe=[];re.exists()&&(pe=re.data().sessions||[]),console.log("Sessions.jsx: sessions before:",pe),console.log("Sessions.jsx: newSession:",ne),pe.push(ne),await ks(O,{sessions:pe}),console.log("Sessions.jsx: sessions after:",pe),p([ne,...h]),r(!1),c(""),q(""),console.log("Sessions.jsx: navigating to sessionId:",ne.id),i(`/sessions/${ne.id}?name=${encodeURIComponent(ne.name)}`)},qe=async ne=>{if(!ne)return;const Ee=on(ln,"users",ne.uid,"appdata","sessions"),O=await Gn(Ee);if(O.exists()){const re=O.data(),pe=(re.sessions||[]).filter(ke=>String(ke.status)==="active"),ae=(re.sessions||[]).filter(ke=>String(ke.status)==="paused"),be=(re.sessions||[]).filter(ke=>String(ke.status)==="ended");p([...pe,...ae]),y(be)}else p([]),y([])},Je=ne=>{C(ne),D(!0)};I.useEffect(()=>{const ne=Rt.onAuthStateChanged(Ee=>{Ee?E(Ee):i("/login")});return()=>ne()},[i]),I.useEffect(()=>{const ne=Rt.onAuthStateChanged(Ee=>{Ee?(E(Ee),qe(Ee),L(Ee)):i("/login")});return()=>ne()},[i]),I.useEffect(()=>{qe(w)},[e.pathname,w]),I.useEffect(()=>{L(w)},[w]);const he=[...h.filter(ne=>ne.status==="active"),...h.filter(ne=>ne.status==="paused"),...g].filter(ne=>{const Ee=ne.name.toLowerCase().includes(Q.toLowerCase()),re=(ne.classroomId&&j(ne.classroomId)||"").toLowerCase().includes(Q.toLowerCase());return Ee||re});return f.jsxs("div",{className:"dashboard-container",children:[f.jsx(eu,{className:"slide-in-from-left"}),f.jsxs("div",{className:"main-content slide-in-from-bottom",children:[f.jsxs("div",{className:"top-bar slide-in-from-top",style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:24,marginBottom:32},children:[f.jsx("h1",{style:{margin:0,fontSize:"2rem",fontWeight:700,color:"#222"},children:"Sessions"}),f.jsxs("button",{className:"create-session-btn fade-in-scale animate-on-mount-delay-1",style:{display:"flex",alignItems:"center",gap:8},onClick:()=>r(!0),children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",width:"20",height:"20",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),"Create Session"]})]}),f.jsxs("div",{className:"sessions-content",children:[f.jsx("div",{style:{marginBottom:24,display:"flex",width:"45%"},children:f.jsxs("div",{style:{display:"flex",alignItems:"center",background:"#fff",borderRadius:8,border:"1.5px solid #e0e0e0",boxShadow:"0 1px 4px rgba(65,105,225,0.04)",width:"100%",maxWidth:"100%"},children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:20,height:20,color:"#666",marginLeft:14,marginRight:8},children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})}),f.jsx("input",{type:"text",placeholder:"Search sessions by name or classroom...",value:Q,onChange:ne=>$(ne.target.value),style:{padding:"10px 16px",border:"none",outline:"none",fontSize:"1rem",width:"100%",background:"transparent",color:"#222",borderRadius:8}})]})}),f.jsx("div",{className:"session-list",children:he.length>0?he.map((ne,Ee)=>f.jsxs("div",{className:`session-list-item ${ne.status}-session slide-in-from-right animate-on-mount-delay-${3+Ee}`,onClick:()=>i(`/sessions/${ne.id}`),style:{position:"relative",overflow:"hidden"},children:[f.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%"},children:f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:18},children:[f.jsx("span",{className:`status-badge ${ne.status}`,children:ne.status==="active"?"Active":ne.status==="paused"?"Paused":ne.status==="ended"?"Ended":ne.status}),f.jsx("span",{style:{fontWeight:600,fontSize:"1.15rem",color:"#222"},children:ne.name}),f.jsxs("span",{className:"session-time",style:{color:"#888",fontSize:13},children:["Started: ",new Date(ne.createdAt).toLocaleString()]}),ne.classroomId&&f.jsx("span",{className:"classroom-badge",style:{background:"#e3eafe",color:"#4169e1",padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"500"},children:j(ne.classroomId)})]})}),f.jsx("div",{className:"delete-area",onClick:O=>{O.stopPropagation(),Je(ne.id)},title:"Delete session",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"trash-icon",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})})})]},ne.id)):Q.trim()?f.jsxs("div",{className:"session-list-item session-card-empty animate-on-mount-delay-3",style:{textAlign:"center",padding:40},children:[f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"#b0b0b0",width:"40",height:"40",style:{marginBottom:12},children:[f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6l4 2"}),f.jsx("circle",{cx:"12",cy:"12",r:"9",stroke:"#b0b0b0",strokeWidth:"1.5",fill:"none"})]}),f.jsx("h3",{style:{color:"#888",fontWeight:500},children:"No Sessions Found"}),f.jsx("p",{style:{color:"#bbb"},children:"Try using a different query..."})]}):f.jsxs("div",{className:"session-list-item session-card-empty animate-on-mount-delay-3",style:{textAlign:"center",padding:40},children:[f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"#b0b0b0",width:"40",height:"40",style:{marginBottom:12},children:[f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6l4 2"}),f.jsx("circle",{cx:"12",cy:"12",r:"9",stroke:"#b0b0b0",strokeWidth:"1.5",fill:"none"})]}),f.jsx("h3",{style:{color:"#888",fontWeight:500},children:"No Sessions"}),f.jsx("p",{style:{color:"#bbb"},children:"Start a new session to begin"})]})})]})]}),n&&f.jsx("div",{className:"modal-overlay fade-in-scale",onClick:()=>{r(!1),c(""),q("")},children:f.jsxs("div",{className:"modal-content create-classroom-modal",onClick:ne=>ne.stopPropagation(),children:[f.jsxs("div",{className:"modal-header",children:[f.jsx("h2",{children:"Create New Session"}),f.jsx("button",{className:"modal-close",onClick:()=>{r(!1),c(""),q("")},children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"20",height:"20",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),f.jsxs("div",{className:"modal-body",children:[f.jsxs("div",{className:"form-group",children:[f.jsxs("label",{children:["Session Name ",f.jsx("span",{style:{color:"red"},children:"*"})]}),f.jsx("input",{type:"text",value:o,onChange:ne=>c(ne.target.value),placeholder:"Enter session name",onKeyPress:ne=>ne.key==="Enter"&&o.trim()&&P()})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Classroom (Optional)"}),f.jsxs("select",{value:H,onChange:ne=>q(ne.target.value),className:"form-control",children:[f.jsx("option",{value:"",children:"Select a Classroom"}),A.map(ne=>f.jsx("option",{value:ne.id,children:ne.name},ne.id))]})]})]}),f.jsxs("div",{className:"modal-footer",children:[f.jsx("button",{className:"btn-secondary",onClick:()=>{r(!1),c(""),q("")},children:"Cancel"}),f.jsx("button",{className:"btn-primary",style:{background:o.trim()?"#4169e1":"#e0e0e0",borderColor:o.trim()?"#4169e1":"#e0e0e0",color:o.trim()?"#fff":"#b0b0b0",cursor:o.trim()?"pointer":"not-allowed",fontFamily:"Space Mono, monospace"},onClick:P,disabled:!o.trim(),children:"Create"})]})]})}),Y&&f.jsx("div",{className:"modal-overlay fade-in-scale",onClick:()=>{z(!1),ee(null)},children:f.jsxs("div",{className:"modal-content",onClick:ne=>ne.stopPropagation(),children:[f.jsx("div",{className:"modal-header",children:f.jsx("h2",{children:"Active Session Detected"})}),f.jsx("div",{className:"modal-body",children:f.jsx("p",{children:"There is already an active running session. If you create this session, the active session will be paused. Proceed?"})}),f.jsxs("div",{className:"modal-footer",children:[f.jsx("button",{className:"btn-secondary",onClick:()=>{z(!1),ee(null)},children:"Cancel"}),f.jsx("button",{className:"btn-primary",onClick:async()=>{const ne=Rt.currentUser;if(!ne)return;const Ee=on(ln,"users",ne.uid,"appdata","sessions"),O=await Gn(Ee);if(O.exists()){const pe=O.data().sessions||[],ae=pe.findIndex(be=>be.status==="active");ae!==-1&&(pe[ae].status="paused",await ks(Ee,{sessions:pe}))}z(!1),ge&&(await N(ge),ee(null)),await qe(ne)},children:"Proceed"})]})]})}),me&&f.jsx("div",{className:"modal-overlay fade-in-scale",onClick:()=>{D(!1),C(null)},children:f.jsxs("div",{className:"modal-content",onClick:ne=>ne.stopPropagation(),children:[f.jsx("div",{className:"modal-header",children:f.jsx("h2",{children:"Delete Session"})}),f.jsx("div",{className:"modal-body",children:f.jsx("p",{children:"Are you sure you want to delete this session? This action cannot be undone."})}),f.jsxs("div",{className:"modal-footer",children:[f.jsx("button",{className:"btn-secondary",onClick:()=>{D(!1),C(null)},children:"Cancel"}),f.jsx("button",{className:"btn-primary",style:{background:"#dc3545",borderColor:"#dc3545"},onClick:async()=>{const ne=Rt.currentUser;if(!ne)return;const Ee=on(ln,"users",ne.uid,"appdata","sessions"),O=await Gn(Ee);if(O.exists()){const ae=(O.data().sessions||[]).filter(be=>String(be.id)!==String(R));await ks(Ee,{sessions:ae})}D(!1),C(null),await qe(ne)},children:"Delete"})]})]})})]})}let Cd=null,Cc=null;function Vk(i){Cd=i}function Pk(i){Cc=i}function Uk(){return Cc}async function v_(){try{Cc&&(await Cc.cancel(),Cc=null),Cd&&(await Cd.close(),Cd=null)}catch{}}const jm="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAACWCAMAAAAL34HQAAAAIGNIUk0AAHomAACAhAAA+gAAAIDoAAB1MAAA6mAAADqYAAAXcJy6UTwAAAHjUExURQAAABfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRfAZRjAZr3t1DvKff////v+/ZzkvSfEcO/79HrbpxvBZ9v151nSkDLHd3csD88AAACTdFJOUwAraa3O4vfNq2gpGqnr6qdmFjCm+vieLQFPw7tGPdgyCZL++4EFMd3QJ3ljmn+Pl4J+Yl4q9SUK2tWIIh62NrysNSaiEvEHZ1GxBuM7b1Sjh8mw3/Ts8ta9upZkA/CqoGBVEAtMPALbXEnXyD6YDd75IGxTdYWE/D/u1BwIfHcZn5sswLLgOZHliR9Kc53G7ZlFG34nhJYAAAABYktHRJfmbhuvAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH6QcTFCU033vrdQAAAyR6VFh0UmF3IHByb2ZpbGUgdHlwZSB4bXAAAEiJnVZBkuMgDLzrFfsEkEDCz3FsuG3VHvf528JxjGeY1OwkFScxQmq1WsL09/cf+oVXjKWQbNKsWNCoog/Nljgoa1bTRavsbLU9Ho/GhvuLJr+TTXLaJaTdQhLYFl0oFVsNG7PYmmpOim84FMEmNmlSwyqbFVmtKDbq7sE0cvD/umk18TXyCECTtDkOWY+FlzmQPF0xbFTWzCkl/eAGa4RFd1Us4R1kxdZm/cXVYMVVGwyNm0RZ/I1fQRhXxnU/AvBOJgYuPLoV3j0C1juKsHK4kAAGqEHirIsF2C/IoQLZc52QFiMmEnFkbL79DjzFjhYOlD+j76GrRrqM3NkzTkUFm+4wA3swRFpcJZyMeSjZbgFWSt30XB6TySisxWtlXAPa5UrLxUPIBhtyMmSOqrlKuLPh6TKQ5QvF6e6OJTlvGRwhoQyhVbCMakhmSE1Sv6ps3Gbbrl1nCJrGyNB6Sq5jZ0s0CgQMvrxou4hAtoKS427AL4RGapKluA5grsAAgUvBO+BuwpYywTSEuVKmCR74PczglvtHcV3EcUUEWjw4Qt1C0H3rO1LRhygAkJdXaZzXpzt6bziWnttY/FEwvkIzzUx4GdQ2urwah8bO+f8OuxqMvuow9RJ/nguhy3S7ZoLb4QpBbhAWpo9PgFdXxXtXdaer48FnG7m7sHuvbZbedlTH2f9FrWqOs48c1zZkigLBA3lk8zwVbHjfxc5A67k7JxAO3O8IEOVN7ehWgxs6X5knNasb3evx87rR15MRkkyziX7OxPPAOMYg+Rw8tjwrJveKPd35wPUJWrzsUrNP0Op8ej/gmFoOjqbGX6t4Rgb9RMUzMug4J/0M/S4bnYwC/YTxUKCBjcPdOEyRVuegQZAVQxKChN7ADBef7GDJs/AZz8TQbo+IzsJhHJNpyqiYqS0wVn2w95dPB5xqOCUiBie+MgYOwD/AUvHHDteRCx95Jz6NFL7wNFLSpo1DH/P++LAdI1/2XoIP+OljAt+v1WiVmfzZ4nX708PLsTJ5gspHFmhfPh5+6B8dljH+sg7JVwAAAAFvck5UAc+id5oAAANnSURBVHja7duHUhRBEAbgEQ9MYEAPEEUliKgoiKAoKpgjinKcOecsJsw5Zx10zfqoclIWWLWhe6Z7dq5q/gfY+6rurw0zPUK4uLi4uLi4uLi4ZGuG5AxN5OZJVPJyhw0fMZKNNConvwAHGpzRY8aOY0AVjp+gbupPsqiY1lQysVTX1J9JkwlVZVNoUJkkphKhppVX0KmkrKyaTqGqnkGJyqRmpr5qFjUqk9m6qloOlZRztFAlTCop5+qw6rhUUtapq+r5VFLOU1U1cKqknK+makQ+krFpWqCiWtjMq5JykQprMbdKqV4t2i8M0UkuQbOW8qukzMeqlvlepvfjJ1JWRSOS1erP8j5/+UrpasOplvtfpdfzvG/ffxC6VqBYK4NZnvfzFx0L9WxclQxjeR5dxVavQbDWBlzkH4uwYusQrPVRLLqK1cJVG5qiWVQV2whnbQq6xn8sooq1gFntQBZJxTaDWVugLIqKdYBZW+Es/YptA7M6MSzdiiXArBSOpVexLjAr8BIBLL2KMbJ0KsbKUq8YM0u1YtwsxYrxs5QqZoKlUDEzLHTFDLGwFTPGwlXMIAtTMaMseMXMssAVM80CVsw8C1SxOFiAisXCiq5YTKyoisXGCq9YjKywisXJCqlYvKzAisXN6qvYb8fK6j/RysrbeYOw8nZq5cPHyke1nS82Vr4GWvnSbOUnhp0fZFZ+vlr5sW/l0oidC0lWLrtZuUhp5ZKunQvgVm4XWLm5YmQrKo1kaW3cpcGswFlhjm3O7WDWDgxLd1N4J5i1C87S30IvB7N2Q1kUAwfwgcpqIItkPAM+WbZnL4RFM8xSUAJmiX3RLKrRn/1wlTgQxaIblDqIYB0KmO6kHytLHUawRFsYi3IIrwijEkeCWbQji0dRrGPHA1jEA541KJUQJ/xZxOOw8iSSJU7R/r5/TmNV4owBVSV2drgvZ/lZ9XiVOHeeWwUfKBucwgu8qnS3Ektc5GVdUlMxn3u4rKqy9fiREFe4VFd1VEI09HCgehSPHg3k2nV6VVeZrkqIbvLH0I2b+iohbt1O6VMGkr6DOVAQlrv36FT3KU9XP3hIg3qEO6kSneKOx7qm5ipq1N88efpM3dT5nOpAtU9evHz1+g3ylvG29F37+w98JhcXFxcXFxcXFxcXl6zMH8sOCq3nAGlzAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDI1LTA3LTE5VDIwOjM1OjU5KzAwOjAwFCv9uwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyNS0wNy0xOVQyMDozNTo1OSswMDowMGV2RQcAAAAodEVYdGRhdGU6dGltZXN0YW1wADIwMjUtMDctMTlUMjA6Mzc6NTIrMDA6MDA0keAfAAAAFHRFWHRwZGY6QXV0aG9yAFNvbmEgVG9teTcubfgAAABddEVYdHhtcDpDcmVhdG9yVG9vbABDYW52YSAoUmVuZGVyZXIpIGRvYz1EQUdkWnB2eVJmayB1c2VyPVVBQzVUVWNHS244IGJyYW5kPUJBQzVUZkVnaExvIHRlbXBsYXRlPcsU5u0AAAAASUVORK5CYII=",Om="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAACWCAMAAAAL34HQAAAAIGNIUk0AAHomAACAhAAA+gAAAIDoAAB1MAAA6mAAADqYAAAXcJy6UTwAAALTUExURQAAAJmXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5mXl5+dnba1tcTDw9HR0d/e3uzs7Pn5+f///6KgoMPCwuPj4/39/ePi4sPBwaOiop2bm8XDw+rp6enp6ZuZmcLBwfX09PLy8r69vbu6uvDw8LOxsevr6+rq6rSzs9LR0czLy5yamt3c3NjX1+bl5aSiou7t7aqpqfT09Ofn59fW1tbV1cnIyMbFxbW0tP7+/qimpqmnp7a0tO3t7bm4uJqYmL++vry7u9zc3Pr6+vX19dPS0vPy8vz8/N/f39nY2KOhoc/Ozq+urqupqaakpO/v7/v7+728vLe2tubm5vPz86Gfn+jn59va2tXV1ff399TT06Wjo9rZ2aqoqN3d3d7d3ayqqqWkpMfFxeTk5MXExNDPz/n4+NHQ0Ao8SYwAAACTdFJOUwAraa3O4vfNq2gpGqnr6qdmFjCm+vieLQFPw7tGPdgyCZL++4EFMd3QJ3ljmn+Pl4J+Yl4q9SUK2tWIIh62NrysNSaiEvEHZ1GxBuM7b1Sjh8mw3/Ts8ta9upZkA/CqoGBVEAtMPALbXEnXyD6YDd75IGxTdYWE/D/u1BwIfHcZn5sswLLgOZHliR9Kc53G7ZlFG34nhJYAAAABYktHRJvv2FeEAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH6QcTFCco+UzVuAAAAyF6VFh0UmF3IHByb2ZpbGUgdHlwZSB4bXAAAEiJnVZBkuMwCLzzin2CBAjk5zi2dNuqPe7zt5Gd2J7xpGYnqdiOQdBAg0R/f/+hX/jkXCvJIt2rJ8sm9rDiysnYirlN1mRlb/3xeHR2vJ9M401xKbpK0tWTCnSrTaTVZ8fCIj5rK2q4w6AIFrFLl5ZmWbzK7NWw0NZwZplT/LfFmkvIKDwAjVoPHDJvgpc6kOymGDomc2FVtQ9mICMIw1R1xTfJjKXdx4ebQ4ubdSg6d8kyxRdPSRhXxnXdHPBKLo5chHevvIYHyAeKNHM6kAAGUoPA2SZP0J8QQwOyXU4Ii+ETgQQy9lh+Ba55oIUB48/oh+tmmQ6lMLb7aahgtxVqyB4UERY3Sc+MhStZLg5m0qH6FJ+DKSis50NylgHtdIQV5CFEgwVFHZGjasESHtmIcBnIyoHiae6KRSNvBTlCQAVEa8gyqiGFQTXRcTVZuN8tO1Y9XdCtjwKuq07DfMYCkwSKmlTgW/HWLDi2CoxJBSFW46iajEeIRETBFsETWAH1UPuM6eTmCJlu8IBfO5oSoeJnuE5wEW4cT+EgXV3Qdem7pKIPUQCkv75KE3ndzdF7xXPpuZ+LfyZMSOiOMzd5ObHtbPJoHDp3zv932NFg9FWHQVFu5kIaNF2OmRB6uIKQC3iC6RMT4NVV+dpVw+gcePBbzrk7sEevLa5vO2rgHP+yNfPAOUZOcNvA8RIWKDx7xAn6jb7LIwN9xB45AXFgfoWDLG9qR5caXNCF5D6ou7rRtR4/rxt9PRlBSb2b6M+Z+NwwtjFIMQe3JXvF5Fqx3VwM3JigNcourcQEbZHP6AdsU9OWo1vlr1l8lwz6CYvvkkHbPhl76HezMZJRwZ903hTolI3N3HmYIqyRgw5CNgxGEBJ8Q2a4xmRHliKKmPFMDO4Oj+gsbMZZ3bSgYm4+QdnswdFfMR2wq2GXyCqCW8HAAfgHslTj2BE8CuIjbuWnEkZynEaqLtY5jTEfx4dlG/myjhJ8wE8fA/h+rc5ahSnOFq/Xnw4vm+TmBFW2KNC+vB1+6B9daTIIi5FANAAAAAFvck5UAc+id5oAAAS1SURBVHja7dvnd5RFFMfxEQM2sKCBiKJSRFQURFAUC/aKooTYe+9iw95717sJbCZxAZEVBSMmGgIY47IrUTQkZAmoNBUxYsE/wax5kchhZ+6duXeVc+b7Pr/zOdk9z/OcZB6lQqFQKBQKhUKhrbVtumyb17UbkOrWdbvtd9hRjLRTl+49aKDO7bzLrrsJoHruvoe7qb38Xr15TQV79vE1tbfX3oyqvvvwoDLl7cuE2q9ffz4VwICB+3OoBh3Aico0+EB/1UHcqEwH+6qGSKgADvFCFQipAA71YQ2VUgEMdVcNk1MBHOaqGi6pAjjcTTWCeEumNvIIF9WRo2RVAEe5sI6WVjl9vUZ7PzDYyz+GzDpWXgXQnao6Lhcq6D+CyDo+JywYQ1OdkBsVwIkk1km5YpHujSfnE5YjxSWTp0RLdVul0SmTS4ojhB8+5VQC6zT0bFn5WzG9WbGp06ajB04nsM7ATb494x2dpZklSNYQvOrMkZjB+LuztKH33o9jVs7Cs87G7M2eoy3NmY3ZGY1mjbWPfVBhQ2X6cK596Rw061zr1kcYVKZK69Q4NOs8y1LVx1iV1p9UWcbOR7PGm4ci1XiV1tWWy1gemlVo3JlXQ1FpXTPPODcBzTLOzF9AU2m9YL5xkIUVX0hVab0wLs76lK7Sulaa9ZmLSus6WdbnCTdWoliStajUTdX2yJMUZJEuWP+uWo6VcldpnRJjfeHDikqxFvuotF4sw6r3+mVl/3V5sr70U2n9lQhriS9riQQr/rUvqzQuwPL8wmdKCbC8P8Nsd2wvlv9nqPU3/Kykv0rrJDuL4auV5YrqxarjYNWxs2o5WA3sLI9nmo6msrOWcrCWsrMaOViN7CwOldaB9Z+yWL7yUXYWywWiiZ21jIPFfzmt5GDx33y8n+Qz8d+qp3OwmtlZEPVXzQR+VtqfVSnAWu7PWi7Aglm+qi0/yvuyvB8Ea0VYXn9GypQSYUGTn6oJZFgtjn84bS/RIsTyuy8uAynWCo8n58YVYixocGelQY4VWemqWhkRZEHyWzeV4c/yeFZR9o3v3FjfZ18sQrNMZ4Wd7thpw+AFaNaFhpX6VXTVqnrD4EVo1sWGFShbTVWtLjPt9UOzLjHNwJq1NNXaNcY5/IHKQcYdiK+jqH6wHB7Bnyy79DLzEsxA3x0T0yxTPQrQLHW5ZQvmIv+x+KP12MgVeJW60jYGzQ0xOyr2U7N16CoC62rE6c71P1s+ycS69faVwmsILDXGPgiw4ReTqnUDZqMXRaWuxUwC/JrOcoKkJt2CW7iOxLr+BtwqwMbfqjf7MGO//7ER+9ODSSqlbsQOt1W1KFX+Z2vFpk0VrX+Vp5K2I0idu4nIUjcTxp27hapSt+ZANYB6drit2+RZw+gqdfsd0ir8gbLO9bxTVlU00Yml7pJl3e2mEn7v4R5X1f/19SOl7pVS3eejUmr4JAnUJMdXjzq6/wF+1YS+viqlJrLfhh58yF+l1MOPFPpTOip6lPJCganHHudTPcH5dvWTT/Ggnqa9qWKv97hnfE2jBnKj/unZ5553N41/geuF6i304ksvv/Iq8ZLxWp/Xx77xppwpFAqFQqFQKBQKhbbK/gaAcnwn+ebi2QAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyNS0wNy0xOVQyMDozODoxMiswMDowMGeYLAsAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjUtMDctMTlUMjA6Mzg6MTIrMDA6MDAWxZS3AAAAKHRFWHRkYXRlOnRpbWVzdGFtcAAyMDI1LTA3LTE5VDIwOjM5OjQwKzAwOjAwcW3BGwAAABR0RVh0cGRmOkF1dGhvcgBTb25hIFRvbXk3Lm34AAAAXXRFWHR4bXA6Q3JlYXRvclRvb2wAQ2FudmEgKFJlbmRlcmVyKSBkb2M9REFHZFpwdnlSZmsgdXNlcj1VQUM1VFVjR0tuOCBicmFuZD1CQUM1VGZFZ2hMbyB0ZW1wbGF0ZT3LFObtAAAAAElFTkSuQmCC",Bk="/dashboard/assets/forward-C0bK_Hny.png",zk="/dashboard/assets/right-C2_LwsZ_.png",Fk="/dashboard/assets/reverse-BkDOZ5rR.png",Hk="/dashboard/assets/left-bDZiDDEe.png",qk="/dashboard/assets/connectiongraphic-BSRRSLPm.png",__="/dashboard/assets/robotgraphic-DpxCb7B5.png";function Gk({voltage:i,cardHeight:e=60}){let o=0;typeof i=="number"&&(o=Math.max(0,Math.min(1,(i-3.3)/(5-3.3))));const c=`${Math.round(o*100)}%`;let h="#4caf50";return o<.2?h="#f44336":o<.5&&(h="#ff9800"),f.jsxs("div",{style:{position:"absolute",bottom:0,left:0,right:0,height:"30px",background:"transparent",borderBottomLeftRadius:16,borderBottomRightRadius:16,overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center",padding:"0 12px"},children:[f.jsx("div",{style:{position:"absolute",bottom:0,left:0,right:0,height:"4px",background:h,width:`${o*100}%`,transition:"width 0.4s cubic-bezier(0.4,0,0.2,1)"}}),f.jsxs("div",{style:{fontSize:"11px",fontWeight:"600",color:"#666",zIndex:1,textAlign:"center"},children:[c," • ",i?`${i.toFixed(2)}V`:"—"]})]})}function hc(i){if(!i)return"";const e=new Date(i);return isNaN(e.getTime())?i:e.toLocaleString(void 0,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}function Xk({lastBatteryTime:i,firstBatteryTime:e,lastProgramTime:n},r=new Date){return!i||(r-i)/1e3>10?"inactive_battery":!n&&e&&(r-e)/1e3>180||n&&(r-n)/1e3>180?"inactive":n&&(r-n)/1e3<=180?"active":"idle"}function Wk(i){if(!i)return 0;const e=i.trim().toLowerCase().split(/\s+/);let n=4e3;for(const r of e)r==="forward"||r==="reverse"?n+=1500:(r==="left"||r==="right")&&(n+=1e3);return n}const Lt=async i=>{if(!i)return[];const e=on(ln,"users",i.uid,"appdata","sessions"),n=await Gn(e);return n.exists()?n.data().sessions||[]:[]},On=async(i,e)=>{if(!i)return;const n=on(ln,"users",i.uid,"appdata","sessions");await ks(n,{sessions:e})};function Zk(){var hi,ns,Ni,Lr;const[i,e]=I.useState({}),n=Fs(),{sessionId:r}=HE(),o=ds(),h=(x=>new URLSearchParams(o.search).get(x))("name")||`Session ${new Date().toLocaleDateString()}`,[p,g]=I.useState(!1),[y,w]=I.useState([]),[E,A]=I.useState({}),[B,H]=I.useState(null),[q,Q]=I.useState("active"),[$,Y]=I.useState(h),[z,ge]=I.useState(null),[ee,me]=I.useState(!1),[D,R]=I.useState(null),[C,L]=I.useState([]),[j,P]=I.useState(null),[N,qe]=I.useState(!1),[Je,se]=I.useState(null),[he,ne]=I.useState(new Set),[Ee,O]=I.useState(!1),[re,pe]=I.useState(""),[ae,be]=I.useState(new Set),[ke,Oe]=I.useState(""),[ut,dt]=I.useState({connection:!1,lessonProgress:!1,robotsAndPrograms:!1,dataReceived:!0}),[Wn,Pn]=I.useState(!1),[dn,qi]=I.useState(null),[ce,we]=I.useState(null),[De,Xe]=I.useState(null);I.useRef();const[Se,It]=I.useState(()=>Rt.currentUser);I.useEffect(()=>{const x=Rt.onAuthStateChanged(k=>{It(k)});return()=>x()},[]);const ht=I.useRef(!1);I.useEffect(()=>(ht.current=!0,()=>{ht.current=!1}),[]),I.useEffect(()=>{const x=k=>{document.querySelectorAll(".dropdown").forEach(V=>{const W=V.querySelector(".dropdown-menu");W&&W.style.display==="block"&&(V.contains(k.target)||(W.style.display="none"))})};return document.addEventListener("click",x),()=>{document.removeEventListener("click",x)}},[]);const Zn=async x=>{if(!x)return;const k=on(ln,"users",x.uid,"appdata","classrooms"),U=await Gn(k);U.exists()?L(U.data().classrooms||[]):L([])},Hs=x=>x?C.find(k=>k.id===x):null,wi=x=>{dt(k=>({...k,[x]:!k[x]}))},Ar=()=>{if(!D)return!1;const x=Object.keys(E),k=Object.keys(D.robots||{});if(x.length!==k.length)return!0;for(const W of x)if(!D.robots[W]||JSON.stringify(E[W])!==JSON.stringify(D.robots[W]))return!0;if(y.length!==(D.receivedData||[]).length||$!==D.sessionName)return!0;const U=Array.from(ae),V=Array.from(D.completedRobots||[]);if(U.length!==V.length)return!0;for(const W of U)if(!V.includes(W))return!0;return!1};I.useEffect(()=>{const x=Ar();me(x)},[E,y,$,ae]);const Tr=I.useRef(!1);I.useEffect(()=>{!Tr.current&&r&&Se&&(Tr.current=!0,In(!0),ts(null),Lt(Se).then(x=>{const k=x.find(U=>String(U.id)===String(r));k?(ge(k),Y(k.name),Q(k.status),A(k.robots||{}),w(k.receivedData||{}),be(new Set(k.completedRobots||[])),fs(k.lessonCompletions?Object.fromEntries(Object.entries(k.lessonCompletions).map(([U,V])=>[U,new Set(V)])):{}),In(!1)):(In(!1),ts("Session not found."),setTimeout(()=>n("/sessions"),2e3))}).catch(x=>{In(!1),ts("Error loading session.")}))},[r,Se,n]),I.useEffect(()=>{const x=Rt.onAuthStateChanged(k=>{k?Zn(k):L([])});return()=>x()},[]),I.useEffect(()=>{if(z&&z.classroomId&&C.length>0){const x=Hs(z.classroomId);P(x)}},[z,C]);const Ra=I.useCallback(async()=>{try{if(q==="active"&&z&&z.id&&Lt(Se).then(x=>{const k={...z,name:$,status:q,robots:E,receivedData:y,completedRobots:Array.from(ae),lessonCompletions:Object.fromEntries(Object.entries(We).map(([V,W])=>[V,Array.from(W)])),lastUpdated:new Date().toISOString()},U=x.findIndex(V=>String(V.id)===String(z.id));U>=0?x[U]=k:x.push(k),On(Se,x),R({robots:E,receivedData:y,sessionName:$,completedRobots:ae})}),p)try{await Wt()}catch(x){console.error("Error disconnecting micro:bit:",x)}}catch(x){console.error("Error in handleLeaveSession:",x)}},[q,z==null?void 0:z.id,$,p]),[St,ot]=I.useState(!1),Un=async()=>{if(q==="active"){ot(!0);try{const x=await navigator.serial.requestPort();await x.open({baudRate:115200}),Vk(x),g(!0);const k=new TextDecoderStream;x.readable.pipeTo(k.writable);const U=k.readable.getReader();Pk(U)}catch(x){console.error("Error connecting to micro:bit:",x),g(!1)}finally{ot(!1)}}},Wt=async()=>{q==="active"&&z&&z.id&&await new Promise(x=>{Lt(Se).then(k=>{const U={...z,name:$,status:q,robots:E,receivedData:y,completedRobots:Array.from(ae),lessonCompletions:Object.fromEntries(Object.entries(We).map(([W,ye])=>[W,Array.from(ye)])),lastUpdated:new Date().toISOString()},V=k.findIndex(W=>String(W.id)===String(z.id));V>=0?k[V]=U:k.push(U),On(Se,k).then(x)})}),g(!1),await new Promise(x=>setTimeout(x,100)),await v_(),window.location.reload()},fo=x=>{if(x&&x.trim().length>0){const k=new Date().toISOString(),U=x.trim(),V=U.split(" ");if(V.length>=2){const W=V[0];if(W.length>10)return;if(V.length===2&&!isNaN(parseFloat(V[1]))){const ye=parseFloat(V[1]),ve={type:"battery",voltage:ye,timestamp:k};A(Re=>{var nt,Te,Ue,yt,lt,Ot,kn;return{...Re,[W]:{...Re[W],deviceId:W,lastSeen:k,dataCount:(((nt=Re[W])==null?void 0:nt.dataCount)||0)+1,latestData:ve,rawData:U,firstSeen:((Te=Re[W])==null?void 0:Te.firstSeen)||k,status:((Ue=Re[W])==null?void 0:Ue.status)||"inactive",batteryData:{voltage:ye,timestamp:k},lastBatteryTime:k,firstBatteryTime:((yt=Re[W])==null?void 0:yt.firstBatteryTime)||k,buttonEvents:((lt=Re[W])==null?void 0:lt.buttonEvents)||[],assignedTo:((Ot=Re[W])==null?void 0:Ot.assignedTo)||null,assignmentTime:((kn=Re[W])==null?void 0:kn.assignmentTime)||null}}}),w(Re=>[...Array.isArray(Re)?Re:[],{timestamp:k,data:U}]),setTimeout(()=>Ws(),100)}else if(V.length>=2&&["PLAY","TEST"].includes(V[1])){const ye=V[1],ve=V.slice(2).join(" "),Re={type:"button_event",button:ye,program:ve||null,timestamp:k};A(Te=>{var Ue,yt,lt,Ot,kn,tn,Fn,ni,Ht,ws,Di;return{...Te,[W]:{deviceId:W,lastSeen:k,dataCount:(((Ue=Te[W])==null?void 0:Ue.dataCount)||0)+1,latestData:Re,rawData:U,firstSeen:((yt=Te[W])==null?void 0:yt.firstSeen)||k,status:((lt=Te[W])==null?void 0:lt.status)||"inactive",batteryData:(Ot=Te[W])!=null&&Ot.batteryData||(tn=(kn=Te[W])==null?void 0:kn.latestData)!=null&&tn.voltage?{voltage:(ni=(Fn=Te[W])==null?void 0:Fn.latestData)==null?void 0:ni.voltage}:null,buttonEvents:[...((Ht=Te[W])==null?void 0:Ht.buttonEvents)||[],{button:ye,program:ve||null,timestamp:k}].slice(-10),assignedTo:((ws=Te[W])==null?void 0:ws.assignedTo)||null,assignmentTime:((Di=Te[W])==null?void 0:Di.assignmentTime)||null}}}),w(Te=>[...Array.isArray(Te)?Te:[],{timestamp:k,data:U}]),setTimeout(()=>Ws(),100);const nt=Wk(ve);e(Te=>({...Te,[W]:Date.now()+nt}))}else{const ye=Ei(U),ve=go(U);A(Re=>{var nt,Te,Ue,yt,lt,Ot;return{...Re,[ye]:{...Re[ye],deviceId:ye,lastSeen:k,dataCount:(((nt=Re[ye])==null?void 0:nt.dataCount)||0)+1,latestData:ve,rawData:U,firstSeen:((Te=Re[ye])==null?void 0:Te.firstSeen)||k,status:((Ue=Re[ye])==null?void 0:Ue.status)||"inactive",batteryData:{voltage:batteryLevel,timestamp:k},lastBatteryTime:k,buttonEvents:((yt=Re[ye])==null?void 0:yt.buttonEvents)||[],assignedTo:((lt=Re[ye])==null?void 0:lt.assignedTo)||null,assignmentTime:((Ot=Re[ye])==null?void 0:Ot.assignmentTime)||null}}}),w(Re=>[...Array.isArray(Re)?Re:[],{timestamp:k,data:U}]),setTimeout(()=>Ws(),100)}}}},bl=()=>{window.confirm("Are you sure you want to clear all robot data and received data? This cannot be undone.")&&(w([]),A({}))},qs=()=>{window.confirm("Are you sure you want to clear all robots? This cannot be undone.")&&(A({}),be(new Set),R(x=>({...x,robots:{},completedRobots:new Set})))},Gi=[{id:"lesson1",name:"I Feel"},{id:"lesson2",name:"Hungry, Hungry Robot"},{id:"lesson3",name:"Grid Challenges"},{id:"lesson4",name:"Duck Duck Robot"}],[Kn,Yn]=I.useState(()=>{let x=[];try{const U=localStorage.getItem("roversaLessons");if(U){const V=JSON.parse(U);Array.isArray(V)&&(x=V.map(W=>({id:W.id,name:W.title||W.name||"",link:W.link||""})))}}catch{}const k=[...Gi];return x.forEach(U=>{k.some(V=>V.id===U.id)||k.push(U)}),[{id:"none",name:"None"},...k]}),[Me,Gs]=I.useState("none"),[We,fs]=I.useState(()=>{const x={};return Kn.forEach(k=>{x[k.id]=new Set}),x}),[mo,Xi]=I.useState("none");I.useEffect(()=>{fs(x=>{const k={...x};return Kn.forEach(U=>{k[U.id]||(k[U.id]=new Set)}),Object.keys(k).forEach(U=>{Kn.some(V=>V.id===U)||delete k[U]}),k})},[Kn]),I.useEffect(()=>{const x=k=>{if(k.key==="roversaLessons"){let U=[];try{const W=localStorage.getItem("roversaLessons");if(W){const ye=JSON.parse(W);Array.isArray(ye)&&(U=ye.map(ve=>({id:ve.id,name:ve.title||ve.name||"",link:ve.link||""})))}}catch{}const V=[...Gi];U.forEach(W=>{V.some(ye=>ye.id===W.id)||V.push(W)}),Yn([{id:"none",name:"None"},...V])}};return window.addEventListener("storage",x),()=>window.removeEventListener("storage",x)},[]);const Wi=x=>{fs(k=>{const U={...k},V=new Set(U[Me]);if(V.has(x)?V.delete(x):V.add(x),U[Me]=V,z&&z.id){const W=Object.fromEntries(Object.entries(U).map(([ve,Re])=>[ve,Array.from(Re)])),ye={...z,lessonCompletions:W};Lt(Se).then(async ve=>{const Re=ve.findIndex(Ue=>String(Ue.id)===String(z.id));Re>=0?ve[Re]=ye:ve.push(ye),await On(Se,ve);const Te=(await Lt(Se)).find(Ue=>String(Ue.id)===String(z.id));Te&&Te.lessonCompletions&&fs(Object.fromEntries(Object.entries(Te.lessonCompletions).map(([Ue,yt])=>[Ue,new Set(yt)])))})}return U})},Xs=I.useCallback(()=>{if(!z){console.error("Cannot pause session: sessionData is null");return}const x={...z,name:$,status:"paused",robots:E,receivedData:y,pausedAt:new Date().toISOString()};Lt(Se).then(k=>{const U=k.findIndex(V=>String(V.id)===String(z.id));U>=0?k[U]=x:k.push(x),On(Se,k),Q("paused"),ge(x),me(!1),R({robots:E,receivedData:y,sessionName:$})})},[z,$,E,y]),[xi,ms]=I.useState(!1),Zi=()=>{ms(!0)},Rr=()=>{if(p&&Wt(),!z){console.error("Cannot end session: sessionData is null");return}const x={...z,name:$,status:"ended",robots:E,receivedData:y,completedRobots:Array.from(ae),lessonCompletions:Object.fromEntries(Object.entries(We).map(([k,U])=>[k,Array.from(U)])),endedAt:new Date().toISOString()};Lt(Se).then(k=>{const U=k.findIndex(V=>String(V.id)===String(z.id));U>=0?k[U]=x:k.push(x),On(Se,k),Q("ended"),ge(x),me(!1),R({robots:E,receivedData:y,sessionName:$})})},Ki=()=>{if(!z){console.error("Cannot resume session: sessionData is null");return}const x={...z,name:$,status:"active",robots:E,receivedData:y,completedRobots:Array.from(ae),lessonCompletions:Object.fromEntries(Object.entries(We).map(([k,U])=>[k,Array.from(U)])),resumedAt:new Date().toISOString()};Lt(Se).then(k=>{const U=k.findIndex(V=>String(V.id)===String(z.id));U>=0?k[U]=x:k.push(x),On(Se,k),Q("active"),ge(x),me(!1),R({robots:E,receivedData:y,sessionName:$})})},po=()=>{Qs(!0)},At=x=>{qi(x),Pn(!0)},Bt=x=>y.filter(k=>{const U=k.data.split(" ");return U.length>=1?U[0]===x:Ei(k.data)===x}),kt=x=>{const k=E[x];return!k||!k.buttonEvents?[]:k.buttonEvents.filter(U=>U.program&&U.program.trim()).map(U=>({deviceId:x,robotName:k.assignedTo?k.assignedTo.name:x,button:U.button,program:U.program,timestamp:U.timestamp,robot:k})).sort((U,V)=>new Date(V.timestamp)-new Date(U.timestamp))},Qn=x=>{const k=kt(x);return k.length>0?k[0]:null},Cr=x=>y.filter(k=>{const U=k.data.split(" ");return U.length>=1?U[0]===x:Ei(k.data)===x});I.useEffect(()=>{const x=Rt.onAuthStateChanged(async k=>{if(!k)return;const U=on(ln,"users",k.uid,"appdata","lessons"),V=await Gn(U);let W=[];V.exists()&&(W=(V.data().lessons||[]).map(Re=>({id:Re.id,name:Re.title||Re.name||"",link:Re.link||""})));const ye=[...Gi];W.forEach(ve=>{ye.some(Re=>Re.id===ve.id)||ye.push(ve)}),Yn([{id:"none",name:"None"},...ye])});return()=>x()},[]),I.useEffect(()=>{z&&ge(x=>({...x,robots:E,receivedData:y,completedRobots:Array.from(ae)}))},[E,y,ae,z==null?void 0:z.id]),I.useEffect(()=>{q==="active"&&$&&Ws()},[$]),I.useEffect(()=>{if(!p)return;let x=!1,k="";return(async()=>{await new Promise(W=>setTimeout(W,1e3));const V=Uk();for(;!x;)try{const{value:W,done:ye}=await V.read();if(ye)break;if(W){k+=W;const ve=k.split(`
`);k=ve.pop();for(let Re of ve)x||fo(Re)}}catch(W){console.error("Error reading serial data:",W);break}})(),()=>{x=!0}},[p]),I.useEffect(()=>{const x=setInterval(()=>{const k=new Date;A(U=>{let V=!1;const W={...U};return Object.keys(W).forEach(ye=>{const ve=W[ye];let Re=ve.lastBatteryTime?new Date(ve.lastBatteryTime):null;Re&&isNaN(Re.getTime())&&(Re=Date.parse(ve.lastBatteryTime)?new Date(Date.parse(ve.lastBatteryTime)):null);let nt=ve.firstBatteryTime?new Date(ve.firstBatteryTime):null;nt&&isNaN(nt.getTime())&&(nt=Date.parse(ve.batteryData.timestamp)?new Date(Date.parse(ve.batteryData.timestamp)):null);let Te=null;if(ve.buttonEvents&&ve.buttonEvents.length>0)for(let yt=ve.buttonEvents.length-1;yt>=0;yt--){const lt=ve.buttonEvents[yt];if(lt&&lt.timestamp){const Ot=new Date(lt.timestamp);if(!isNaN(Ot.getTime())){Te=Ot;break}}}console.log("Status check",ye,{lastBatteryTime:ve.lastBatteryTime,parsed:ve.lastBatteryTime?new Date(ve.lastBatteryTime):null,now:k,diff:ve.lastBatteryTime?(k-new Date(ve.lastBatteryTime))/1e3:null,firstBatteryTime:ve.firstBatteryTime,parsedFirst:ve.firstBatteryTime?new Date(ve.firstBatteryTime):null,lastProgramTime:ve.buttonEvents&&ve.buttonEvents.length>0?ve.buttonEvents[ve.buttonEvents.length-1].timestamp:null});const Ue=Xk({lastBatteryTime:Re,firstBatteryTime:nt,lastProgramTime:Te},k);ve.status!==Ue&&(W[ye]={...ve,status:Ue},V=!0)}),V?W:U})},2e3);return()=>clearInterval(x)},[]),I.useEffect(()=>{const x=setInterval(()=>{q==="active"&&z&&Ws()},5e3);return()=>clearInterval(x)},[q,z==null?void 0:z.id]),I.useEffect(()=>{const x=k=>{q==="active"&&z&&z.id&&localStorage.setItem("unsavedSession",JSON.stringify({...z,name:$,status:q,robots:E,receivedData:y,completedRobots:Array.from(ae),lessonCompletions:Object.fromEntries(Object.entries(We).map(([U,V])=>[U,Array.from(V)])),lastUpdated:new Date().toISOString()}))};return window.addEventListener("beforeunload",x),()=>{window.removeEventListener("beforeunload",x)}},[q,z,$,E,y,ae,We]),I.useEffect(()=>{ht.current&&q==="active"&&z&&z.id&&Lt(Se).then(x=>{const k=x.findIndex(U=>String(U.id)===String(z.id));k>=0&&x[k].status==="active"&&(x[k]={...z,name:$,status:q,robots:E,receivedData:y,completedRobots:Array.from(ae),lessonCompletions:Object.fromEntries(Object.entries(We).map(([U,V])=>[U,Array.from(V)]))},On(Se,x))})},[$,q,z==null?void 0:z.id]);const Ws=()=>{try{q==="active"&&z&&z.id&&Lt(Se).then(x=>{const k={...z,name:$,status:q,robots:E,receivedData:y,completedRobots:Array.from(ae),lessonCompletions:Object.fromEntries(Object.entries(We).map(([V,W])=>[V,Array.from(W)])),lastUpdated:new Date().toISOString()},U=x.findIndex(V=>String(V.id)===String(z.id));U>=0?x[U]=k:x.push(k),On(Se,x),R({robots:E,receivedData:y,sessionName:$,completedRobots:ae,lessonCompletions:Object.fromEntries(Object.entries(We).map(([V,W])=>[V,Array.from(W)]))})})}catch(x){console.error("Error in autosaveSession:",x)}},Ei=x=>{const k=/[0-9A-Fa-f]{8,}/g,U=x.match(k);if(U&&U.length>0)return U[0].toUpperCase();const V=/(?:device|id)[:\s]*([0-9A-Fa-f]+)/i,W=x.match(V);if(W)return W[1].toUpperCase();const ye=/[0-9A-Fa-f]{4,}/g,ve=x.match(ye);return ve&&ve.length>0?ve[0].toUpperCase():`UNKNOWN_${x.slice(0,8).replace(/[^0-9A-Za-z]/g,"")}`},go=x=>{const k=x.split(/[,\s]+/),U={};return k.forEach((V,W)=>{if(V.includes("=")){const[ye,ve]=V.split("=");U[ye.trim()]=ve.trim()}else if(V.includes(":")){const[ye,ve]=V.split(":");U[ye.trim()]=ve.trim()}else W===0&&!V.match(/[0-9A-Fa-f]{4,}/)?U.command=V:isNaN(V)||(U[`value${W}`]=parseFloat(V))}),U},Si=()=>{if(!re.trim())return E;const x=re.toLowerCase(),k={};return Object.entries(E).forEach(([U,V])=>{if(U.toLowerCase().includes(x)){k[U]=V;return}if(V.assignedTo){if(V.assignedTo.name.toLowerCase().includes(x)){k[U]=V;return}if(V.assignedTo.email&&V.assignedTo.email.toLowerCase().includes(x)){k[U]=V;return}if(V.assignedTo.studentCount&&V.assignedTo.studentCount.toString().includes(x)){k[U]=V;return}}}),k},ps=async(x,k)=>{if(!j)return;const U=j.students.find(W=>W.id===k);if(!U)return;const V={...E,[x]:{...E[x],assignedTo:{type:"student",id:U.id,name:U.name,email:U.email},assignmentTime:new Date().toISOString()}};if(A(V),z&&z.id){const W={...z,robots:V};Lt(Se).then(async ye=>{const ve=ye.findIndex(Te=>String(Te.id)===String(z.id));ve>=0?ye[ve]=W:ye.push(W),await On(Se,ye);const nt=(await Lt(Se)).find(Te=>String(Te.id)===String(z.id));nt&&A(nt.robots||{})})}},Yi=async(x,k)=>{if(!j)return;const U=j.groups.find(W=>W.id===k);if(!U)return;const V={...E,[x]:{...E[x],assignedTo:{type:"group",id:U.id,name:U.name,studentCount:U.students.length},assignmentTime:new Date().toISOString()}};if(A(V),z&&z.id){const W={...z,robots:V};Lt(Se).then(async ye=>{const ve=ye.findIndex(Te=>String(Te.id)===String(z.id));ve>=0?ye[ve]=W:ye.push(W),await On(Se,ye);const nt=(await Lt(Se)).find(Te=>String(Te.id)===String(z.id));nt&&A(nt.robots||{})})}},ci=x=>{const k={...E,[x]:{...E[x],assignedTo:null,assignmentTime:null}};A(k)},Ai=x=>{const k=new Set(he);k.has(x)?k.delete(x):k.add(x),ne(k)},bn=()=>{he.size>0&&O(!0)},Nt=x=>x&&x.length>12?x.slice(0,12)+"...":x,Ir=async(x,k,U,V={})=>{const W={...E};if(he.forEach(ye=>{W[ye]={...W[ye],assignedTo:{type:x,id:k,name:U,...V},assignmentTime:new Date().toISOString()}}),A(W),ne(new Set),setIsTagSelectionMode(!1),O(!1),z&&z.id){const ye={...z,robots:W};Lt(Se).then(async ve=>{const Re=ve.findIndex(Ue=>String(Ue.id)===String(z.id));Re>=0?ve[Re]=ye:ve.push(ye),await On(Se,ve);const Te=(await Lt(Se)).find(Ue=>String(Ue.id)===String(z.id));Te&&A(Te.robots||{})})}},kr=x=>{if(!j)return;const k=j.students.find(U=>U.id===x);k&&Ir("student",k.id,k.name,{email:k.email})},ui=x=>{if(!j)return;const k=j.groups.find(U=>U.id===x);k&&Ir("group",k.id,k.name,{studentCount:k.students.length})},Qi=async()=>{const x={...E};if(he.forEach(k=>{x[k]={...x[k],assignedTo:null,assignmentTime:null}}),A(x),ne(new Set),setIsTagSelectionMode(!1),O(!1),z&&z.id){const k={...z,robots:x};Lt(Se).then(async U=>{const V=U.findIndex(ve=>String(ve.id)===String(z.id));V>=0?U[V]=k:U.push(k),await On(Se,U);const ye=(await Lt(Se)).find(ve=>String(ve.id)===String(z.id));ye&&A(ye.robots||{})})}},Ca=x=>{if(!x)return null;const k=x.toLowerCase().split(" "),U=[];return k.forEach((V,W)=>{let ye=null;switch(V.trim()){case"forward":ye=Bk;break;case"right":ye=zk;break;case"reverse":ye=Fk;break;case"left":ye=Hk;break;case"play":ye=jm;break;case"test":ye=Om;break;default:U.push(f.jsx("span",{style:{display:"inline-block",padding:"4px 8px",background:"#f0f0f0",borderRadius:"4px",fontSize:"0.75rem",margin:"0 2px",fontFamily:"monospace",color:"#666"},children:V},W));return}ye&&U.push(f.jsx("img",{src:ye,alt:V,style:{width:"24px",height:"24px",margin:"0 2px",verticalAlign:"middle",objectFit:"contain",scale:10}},W))}),U},Ia=async()=>{try{if(q==="active"&&z&&z.id){const x=await Lt(Se),k={...z,name:$,status:q,robots:E,receivedData:y,completedRobots:Array.from(ae),lessonCompletions:Object.fromEntries(Object.entries(We).map(([V,W])=>[V,Array.from(W)])),lastUpdated:new Date().toISOString()},U=x.findIndex(V=>String(V.id)===String(z.id));U>=0?x[U]=k:x.push(k),await On(Se,x),me(!1),R({robots:E,receivedData:y,sessionName:$,completedRobots:ae})}}catch(x){console.error("Error saving session:",x)}},Zs=f.jsx("div",{className:"robot-cards-container",style:{display:"flex",flexDirection:"column",gap:"32px",width:"100%",overflow:"visible",paddingTop:"32px"},children:(()=>{const k=(()=>{if(!p)return Object.entries(Si());const U=Object.entries(Si());return[...U.filter(([V,W])=>W.status==="inactive"),...U.filter(([V,W])=>W.status!=="inactive")]})();return k.length>0?k.map(([U,V],W)=>{var Re,nt,Te,Ue,yt,lt,Ot,kn,tn,Fn,ni,Ht,ws,Di,wo,Vr;let ye=null;if(V.batteryData&&V.batteryData.voltage)ye=V.batteryData.voltage;else if(V.latestData){const Fe=Object.keys(V.latestData);for(const Kt of["vbat","battery","voltage"])if(V.latestData[Kt]&&!isNaN(parseFloat(V.latestData[Kt]))){ye=parseFloat(V.latestData[Kt]);break}if(ye===null)for(const Kt of Fe){const ii=parseFloat(V.latestData[Kt]);if(!isNaN(ii)&&ii>=3&&ii<=4.3){ye=ii;break}}}const ve=i[V.deviceId]&&i[V.deviceId]>Date.now();return f.jsxs("div",{className:`robot-card ${B===V.deviceId?"selected":""} ${he.has(V.deviceId)?"tag-selected":""} ${(Re=We[Me])!=null&&Re.has(V.deviceId)?"completed":""} fade-in-scale animate-on-mount-delay-${Math.min(8+W,12)}`,onClick:()=>At(V.deviceId),style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"flex-start",padding:"20px 24px 36px 24px",background:ce===V.deviceId?"#e3eafe":(nt=We[Me])!=null&&nt.has(V.deviceId)?"#f8f9ff":"#fff",borderRadius:"16px",boxShadow:(Te=We[Me])!=null&&Te.has(V.deviceId)?"0 4px 20px rgba(65, 105, 225, 0.15)":"0 2px 12px rgba(65, 105, 225, 0.08)",border:ce===V.deviceId||(Ue=We[Me])!=null&&Ue.has(V.deviceId)?"2px solid #4169e1":"2px solid #e0e0e0",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",cursor:"pointer",position:"relative",overflow:"visible",gap:"18px",minHeight:"180px",height:"180px"},children:[f.jsx("div",{style:{position:"absolute",top:0,left:-2,zIndex:20,background:p?ve?"#ffc107":V.status==="inactive_battery"?"#b0b0b0":V.status==="active"?"#28a745":V.status==="idle"?"#333":"#dc3545":"#b0b0b0",color:"#fff",fontWeight:700,fontSize:"0.85rem",padding:"7px 22px 7px 18px",borderTopLeftRadius:"16px",borderTopRightRadius:"16px",borderBottomLeftRadius:"16px",borderBottomRightRadius:"16px",boxShadow:"0 2px 8px rgba(0,0,0,0.08)",letterSpacing:"0.02em",minWidth:"70px",textAlign:"center",border:"2px solid #e1e1e0",transform:"translateY(-60%)",pointerEvents:"none"},children:p?ve?"Running program":V.status==="inactive_battery"?"Powered off":V.status==="active"?"Active":V.status==="idle"?"Idle":"Inactive":"Waiting for connection..."}),f.jsx("div",{style:{position:"absolute",top:"20px",right:"12px",zIndex:10},onClick:Fe=>Fe.stopPropagation(),children:f.jsxs("div",{className:"dropdown",children:[f.jsx("button",{className:"dropdown-toggle",onClick:Fe=>{Fe.stopPropagation();const ii=Fe.target.closest(".dropdown").querySelector(".dropdown-menu");ii.style.display=ii.style.display==="block"?"none":"block"},style:{background:"#f0f0f0",border:"none",cursor:"pointer",padding:"4px",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",color:"#333",transition:"all 0.2s ease",outline:"none"},children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"16px",height:"16px"},children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM12.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM18.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z"})})}),f.jsx("div",{className:"dropdown-menu",style:{display:"none",position:"absolute",top:"100%",right:"0",background:"#fff",border:"1px solid #e0e0e0",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",zIndex:1e3,minWidth:"140px",padding:"4px 0"},children:f.jsxs("button",{onClick:Fe=>{if(Fe.stopPropagation(),window.confirm(`Are you sure you want to delete robot ${V.deviceId}? This cannot be undone.`)){const Kt={...E};delete Kt[V.deviceId],A(Kt),ae.has(V.deviceId)&&be(ii=>{const Pr=new Set(ii);return Pr.delete(V.deviceId),Pr})}Fe.target.closest(".dropdown-menu").style.display="none"},style:{width:"100%",padding:"8px 12px",background:"none",border:"none",cursor:"pointer",fontSize:"12px",fontWeight:"400",color:"#dc3545",textAlign:"left",display:"flex",alignItems:"center",gap:"8px",transition:"background-color 0.2s",outline:"none"},onMouseEnter:Fe=>Fe.target.style.backgroundColor="#fff5f5",onMouseLeave:Fe=>Fe.target.style.backgroundColor="transparent",children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"14px",height:"14px"},children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})}),"Delete Robot"]})})]})}),f.jsxs("div",{style:{display:"flex",flexDirection:"row",alignItems:"flex-start",flex:1,minWidth:0,gap:"18px"},children:[f.jsx("label",{style:{marginRight:"0",zIndex:5,display:"flex",alignItems:"center",justifyContent:"center",height:"100%",alignSelf:"center",padding:"6px",borderRadius:"6px",cursor:"pointer",minWidth:"32px",minHeight:"32px",boxSizing:"border-box",userSelect:"none"},onClick:Fe=>Fe.stopPropagation(),children:f.jsx("input",{type:"checkbox",checked:he.has(V.deviceId),onChange:()=>Ai(V.deviceId),style:{width:"18px",height:"18px",cursor:"pointer",margin:0}})}),f.jsx("img",{src:__,alt:"Robot",style:{width:"60px",height:"70px",marginRight:"0",opacity:(yt=We[Me])!=null&&yt.has(V.deviceId)?"0.8":"1",transition:"opacity 0.3s ease"}}),f.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:"12px",minWidth:0},children:[f.jsxs("div",{style:{display:"flex",alignItems:"flex-end",gap:"6px"},children:[f.jsx("span",{className:"robot-card-device-id",onClick:Fe=>Fe.stopPropagation(),style:{fontWeight:(lt=We[Me])!=null&&lt.has(V.deviceId)?"600":"500",color:(Ot=We[Me])!=null&&Ot.has(V.deviceId)?"#4169e1":"#222",transition:"all 0.3s ease"},children:V.deviceId}),V.assignedTo?f.jsxs("span",{style:{minWidth:"120px",minHeight:"22px",maxWidth:"200px",display:"inline-flex",alignItems:"center",background:(kn=We[Me])!=null&&kn.has(V.deviceId)?"#e3eafe":"#f8f9fa",borderRadius:"12px",fontSize:"12px",color:(tn=We[Me])!=null&&tn.has(V.deviceId)?"#4169e1":"#666",fontWeight:"500",border:(Fn=We[Me])!=null&&Fn.has(V.deviceId)?"1px solid #4169e1":"1px solid #e0e0e0",boxSizing:"border-box",boxShadow:(ni=We[Me])!=null&&ni.has(V.deviceId)?"0 2px 8px rgba(39, 75, 181, 0.08)":"0 1px 4px rgba(65, 105, 225, 0.08)",padding:"3px 10px",cursor:"default",gap:"8px"},children:[f.jsx("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",flex:1},children:V.assignedTo.type==="student"?`Assigned: ${Nt(V.assignedTo.name)}`:`Assigned: ${Nt(V.assignedTo.name)} (${V.assignedTo.studentCount} students)`}),f.jsx("button",{onClick:Fe=>{Fe.stopPropagation(),ci(V.deviceId)},title:"Remove tag",style:{background:"none",border:"none",color:(Ht=We[Me])!=null&&Ht.has(V.deviceId)?"#4169e1":"#888",fontWeight:"bold",fontSize:"14px",cursor:"pointer",padding:0,lineHeight:1,display:"flex",alignItems:"center",opacity:.6,transition:"opacity 0.2s"},className:"remove-tag-x",onMouseEnter:Fe=>Fe.target.style.opacity=1,onMouseLeave:Fe=>Fe.target.style.opacity=.6,children:"×"})]}):f.jsx("span",{style:{minWidth:"120px",minHeight:"22px",maxWidth:"200px",display:"inline-flex",alignItems:"center",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",background:"transparent",borderRadius:"12px",fontSize:"12px",border:"1px solid transparent",boxSizing:"border-box",boxShadow:"none",padding:"3px 10px",cursor:"default"}})]}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",marginTop:"0",flexWrap:"wrap",rowGap:"8px",paddingLeft:"0px",marginLeft:"-6px"},children:[Me!=="none"&&f.jsxs("button",{onClick:Fe=>{Fe.stopPropagation(),Wi(V.deviceId)},style:{padding:"6px 12px",background:(ws=We[Me])!=null&&ws.has(V.deviceId)?"#274bb5":"#4169e1",border:"none",borderRadius:"6px",cursor:"pointer",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",display:"flex",alignItems:"center",gap:"6px",fontSize:"12px",fontWeight:"500",color:"#fff",height:"32px",minWidth:"100px",boxShadow:(Di=We[Me])!=null&&Di.has(V.deviceId)?"0 2px 8px rgba(39, 75, 181, 0.3)":"0 1px 4px rgba(65, 105, 225, 0.2)"},title:(wo=We[Me])!=null&&wo.has(V.deviceId)?"Mark as incomplete":"Mark as done",children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"14px",height:"14px"},children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),(Vr=We[Me])!=null&&Vr.has(V.deviceId)?"Undo Done":"Mark as Done"]}),z&&z.classroomId&&(j?f.jsxs("button",{onClick:Fe=>{Fe.stopPropagation(),se(V.deviceId),qe(!0)},style:{padding:"6px 12px",background:"#a259e1",border:"none",borderRadius:"6px",cursor:"pointer",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",display:"flex",alignItems:"center",gap:"8px",fontSize:"12px",fontWeight:"500",color:"#fff",height:"32px",minWidth:"100px",boxShadow:"0 1px 4px rgba(162, 89, 225, 0.2)"},title:"Edit robot tags",children:[f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"14px",height:"14px"},children:[f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.568 3H5.25A2.25 2.25 0 0 0 3 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.732.699 2.431 0l4.318-4.318c.699-.699.699-1.732 0-2.431L9.568 3Z"}),f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 6h.008v.008H6V6Z"})]}),"Assign"]}):f.jsxs("button",{disabled:!0,style:{padding:"6px 12px",background:"#e0e0e0",border:"none",borderRadius:"6px",cursor:"not-allowed",display:"flex",alignItems:"center",gap:"8px",fontSize:"12px",fontWeight:"500",color:"#888",height:"32px",minWidth:"100px",boxShadow:"none"},title:"Classroom data not loaded",children:[f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"14px",height:"14px"},children:[f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.568 3H5.25A2.25 2.25 0 0 0 3 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.732.699 2.431 0l4.318-4.318c.699-.699.699-1.732 0-2.431L9.568 3Z"}),f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 6h.008v.008H6V6Z"})]}),"Assign (classroom unavailable)"]}))]})]})]}),f.jsx("div",{style:{minWidth:0,display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"flex-end",marginRight:"200px"},children:(()=>{const Fe=Qn(V.deviceId);return Fe?f.jsxs("div",{style:{background:"#f8f9fa",borderRadius:"8px",padding:"12px",border:"1px solid #e0e0e0",width:"250px",marginBottom:"0"},children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[f.jsx("span",{style:{fontSize:"0.75rem",fontWeight:"600",color:"#4169e1"},children:"Latest Program"}),Fe.button==="PLAY"?f.jsx("img",{src:jm,alt:"Play",style:{width:20,height:20,verticalAlign:"middle"}}):Fe.button==="TEST"?f.jsx("img",{src:Om,alt:"Test",style:{width:20,height:20,verticalAlign:"middle"}}):f.jsx("span",{style:{fontSize:"0.65rem",color:"#666",background:"#e3eafe",padding:"1px 4px",borderRadius:"3px",fontWeight:"500"},children:Fe.button})]}),f.jsx("span",{style:{fontSize:"0.65rem",color:"#888"},children:hc(Fe.timestamp)})]}),f.jsx("div",{style:{background:"#fff",padding:"6px 8px",borderRadius:"4px",border:"1px solid #e0e0e0",fontFamily:"monospace",fontSize:"0.75rem",color:"#333",wordBreak:"break-word",marginBottom:"8px",maxHeight:"60px",overflow:"hidden",display:"flex",flexWrap:"nowrap",gap:"4px",alignItems:"center"},children:Ca(Fe.program)}),f.jsx("div",{style:{display:"flex",gap:"6px",justifyContent:"flex-end"},children:f.jsx("button",{onClick:Kt=>{Kt.stopPropagation(),fn(Fe),$i(Fe.program),ys(!0)},style:{padding:"3px 6px",background:"#4169e1",color:"white",border:"none",borderRadius:"3px",cursor:"pointer",fontSize:"0.65rem",fontWeight:"500",fontFamily:"var(--font-body)",transition:"background 0.2s ease"},onMouseEnter:Kt=>Kt.target.style.background="#274bb5",onMouseLeave:Kt=>Kt.target.style.background="#4169e1",children:"View Program"})})]}):f.jsx("div",{style:{background:"transparent",borderRadius:"8px",padding:"12px",border:"1px solid transparent",width:"250px",minHeight:"110px",marginBottom:"0"}})})()}),f.jsx("div",{style:{position:"absolute",left:0,right:0,bottom:0},children:f.jsx(Gk,{voltage:ye,cardHeight:60})})]},V.deviceId)}):re.trim()?f.jsxs("div",{className:"fade-in-scale animate-on-mount-delay-8",style:{textAlign:"center",padding:"40px",color:"#666",background:"#fff",borderRadius:"12px",border:"2px dashed #e0e0e0"},children:['No robots found matching "',re,'". Try a different search term.']}):f.jsx("div",{className:"fade-in-scale animate-on-mount-delay-8",style:{textAlign:"center",padding:"40px",color:"#666",background:"#fff",borderRadius:"12px",border:"2px dashed #e0e0e0"},children:"No robots detected yet. Connect to micro:bit and send some data."})})()}),ka=ke.trim()?y.filter(x=>x.data.toLowerCase().includes(ke.toLowerCase())||x.timestamp.toLowerCase().includes(ke.toLowerCase())):y,gs=f.jsx("div",{className:"data-container fade-in-scale animate-on-mount-delay-5",style:{marginTop:16},children:ka.length>0?ka.map((x,k)=>f.jsxs("div",{className:"data-item",children:[f.jsx("span",{className:"timestamp",children:hc(x.timestamp)}),f.jsx("span",{className:"data",children:x.data})]},k)):f.jsxs("div",{className:"data-item",children:["No data received",ke?" matching your search":""," yet"]})}),Ti=B&&f.jsxs("div",{className:"session-info fade-in-scale animate-on-mount-delay-4",children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:20},children:[f.jsxs("h2",{children:["Robot Data: ",B]}),f.jsx("button",{className:"clear-data-btn fade-in-scale animate-on-mount-delay-5",onClick:()=>H(null),children:"← Back to Robots"})]}),f.jsx("div",{className:"data-container fade-in-scale animate-on-mount-delay-6",style:{marginTop:16},children:Bt(B).length>0?Bt(B).map((x,k)=>f.jsxs("div",{className:"data-item",children:[f.jsx("span",{className:"timestamp",children:hc(x.timestamp)}),f.jsx("span",{className:"data",children:x.data})]},k)):f.jsx("div",{className:"data-item",children:"No data received from this robot yet"})})]}),en=Array.from(he).every(x=>ae.has(x)),[$n,yo]=I.useState(""),[Jn,Nr]=I.useState("");I.useEffect(()=>(St?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[St]);const[Dr,ys]=I.useState(!1),[hn,fn]=I.useState(null),[mt,jr]=I.useState({x:2,y:2,dir:0,step:0,gridSize:5,offsetX:0,offsetY:0,history:[{x:2,y:2,dir:0}],playing:!1}),Ri=I.useRef(null),Ci=x=>x?x.trim().split(/\s+/).map(k=>k.toLowerCase()):[],$i=x=>{jr({x:2,y:2,dir:0,step:0,gridSize:5,offsetX:0,offsetY:0,history:[{x:2,y:2,dir:0}],playing:!1})},vo=(x,k)=>{let{x:U,y:V,dir:W,gridSize:ye,offsetX:ve,offsetY:Re}=x,nt=W,Te=U,Ue=V;k==="forward"?(W===0&&(Ue-=1),W===1&&(Te+=1),W===2&&(Ue+=1),W===3&&(Te-=1)):k==="reverse"?(W===0&&(Ue+=1),W===1&&(Te-=1),W===2&&(Ue-=1),W===3&&(Te+=1)):k==="right"?nt=(W+1)%4:k==="left"&&(nt=(W+3)%4);let yt=Te,lt=Te,Ot=Ue,kn=Ue;for(const Ht of x.history)yt=Math.min(yt,Ht.x),lt=Math.max(lt,Ht.x),Ot=Math.min(Ot,Ht.y),kn=Math.max(kn,Ht.y);let tn=x.gridSize,Fn=x.offsetX,ni=x.offsetY;return Te<0&&(Fn+=1,Te+=1,x.history.forEach(Ht=>Ht.x+=1),yt+=1,lt+=1),Ue<0&&(ni+=1,Ue+=1,x.history.forEach(Ht=>Ht.y+=1),Ot+=1,kn+=1),Te>=tn&&(tn=Te+1),Ue>=tn&&(tn=Ue+1),{...x,x:Te,y:Ue,dir:nt,gridSize:Math.max(tn,5),offsetX:Fn,offsetY:ni,history:[...x.history,{x:Te,y:Ue,dir:nt}]}},Dt=(x=!0)=>{if(!hn)return;const k=Ci(hn.program);jr(U=>{let V=U.step;if(x&&V<k.length)return{...vo(U,k[V]),step:V+1,playing:U.playing};if(!x&&V>0){let W={x:2,y:2,dir:0,step:0,gridSize:5,offsetX:0,offsetY:0,history:[{x:2,y:2,dir:0}],playing:!1};for(let ye=0;ye<V-1;++ye)W=vo(W,k[ye]),W.step=ye+1;return{...W,playing:!1}}return U})},Bn=()=>{jr(x=>({...x,playing:!x.playing}))};I.useEffect(()=>{if(mt.playing&&hn){if(mt.step>=Ci(hn.program).length){jr(x=>({...x,playing:!1}));return}Ri.current=setTimeout(()=>{Dt(!0)},1500)}else Ri.current&&clearTimeout(Ri.current);return()=>{Ri.current&&clearTimeout(Ri.current)}},[mt.playing,mt.step,hn]);const[,Ks]=I.useState(0);I.useEffect(()=>{const x=setInterval(()=>{Ks(k=>k+1)},500);return()=>clearInterval(x)},[]);const[vs,ei]=I.useState(!1),[gt,Ii]=I.useState(!1),ti=()=>{Lt(Se).then(x=>{if(x.find(U=>U.status==="active"&&String(U.id)!==String(z==null?void 0:z.id))){Ii(!0),ei(!0);return}Ki()})},[Ys,Qs]=I.useState(!1),[Or,_s]=I.useState(!1),_o=I.useRef(Date.now()),ki=I.useRef(null),$s=()=>{_o.current=Date.now(),Or&&_s(!1)};I.useEffect(()=>{$s()},[E,y,ae,$]),I.useEffect(()=>{if(q!=="active")return;const x=()=>{$s()};return document.addEventListener("click",x),document.addEventListener("keydown",x),document.addEventListener("mousemove",x),document.addEventListener("scroll",x),()=>{document.removeEventListener("click",x),document.removeEventListener("keydown",x),document.removeEventListener("mousemove",x),document.removeEventListener("scroll",x)}},[q]),I.useEffect(()=>{if(q!=="active"){console.log("Session not active, clearing inactivity timer"),ki.current&&clearTimeout(ki.current);return}console.log("Starting inactivity timer for active session"),ki.current&&clearTimeout(ki.current);const x=()=>{const U=Date.now()-_o.current;console.log("Checking inactivity, elapsed:",U,"ms"),U>=10*60*1e3?(console.log("Inactivity detected, pausing session"),Xs(),_s(!0)):(console.log("Still active, checking again in 1 minute"),ki.current=setTimeout(x,60*1e3))};return ki.current=setTimeout(x,60*1e3),()=>{ki.current&&(console.log("Clearing inactivity timer"),clearTimeout(ki.current))}},[q,Xs]),I.useEffect(()=>{q!=="paused"&&_s(!1)},[q]);const[Ji,wn]=I.useState(!1),Zt={lesson1:"https://docs.google.com/document/d/15hDBUGjhOFpLSPmmkFJMXMcShzhLqdaBW9WTI3UOFXs/edit?tab=t.0#heading=h.a6lqxihc6dhl",lesson2:"https://docs.google.com/document/d/13E9Lz6l0eP4ZT-kJBxJST35SX4427fOw6XLlfcZpwm0/edit?tab=t.0#heading=h.a6lqxihc6dhl",lesson3:"https://docs.google.com/document/d/1qHoE0t6diltiHJbYG4hKiGGIJOQFLw3rRNMmLgWc-1E/edit?tab=t.0#heading=h.a6lqxihc6dhl",lesson4:"https://docs.google.com/document/d/14jte14tL0Txgm1CdY9kZsbov0lZDoqv7UyhECFW8ioI/edit?tab=t.0#heading=h.a6lqxihc6dhl"},[es,bs]=I.useState(!1),[zn,bo]=I.useState(null);I.useEffect(()=>{const x=k=>{q==="active"&&z&&z.id&&localStorage.setItem("unsavedSession",JSON.stringify({...z,name:$,status:q,robots:E,receivedData:y,completedRobots:Array.from(ae),lessonCompletions:Object.fromEntries(Object.entries(We).map(([U,V])=>[U,Array.from(V)])),lastUpdated:new Date().toISOString()}))};return window.addEventListener("beforeunload",x),()=>{window.removeEventListener("beforeunload",x)}},[q,z,$,E,y,ae,We]),I.useEffect(()=>()=>{v_(),g(!1)},[]);const[Mr,In]=I.useState(!1),[di,ts]=I.useState(null);return I.useEffect(()=>{const x=localStorage.getItem("unsavedSession");if(x&&Se){const k=JSON.parse(x);Lt(Se).then(U=>{const V=U.findIndex(W=>String(W.id)===String(k.id));V>=0?U[V]=k:U.push(k),On(Se,U),localStorage.removeItem("unsavedSession")})}},[Se]),f.jsxs("div",{className:"dashboard-container",children:[f.jsx(eu,{className:"slide-in-from-left"}),f.jsxs("div",{className:"main-content slide-in-from-bottom",children:[f.jsx("div",{className:"top-bar slide-in-from-top",children:f.jsxs("div",{className:"session-header",children:[f.jsx("button",{className:"back-btn fade-in-scale animate-on-mount-delay-1",onClick:async()=>{if(q==="active"&&ee){bo(()=>async()=>{n("/sessions",{replace:!0});try{await Ra()}catch(x){console.error("Error in background cleanup:",x)}}),bs(!0);return}n("/sessions",{replace:!0});try{await Ra()}catch(x){console.error("Error in background cleanup:",x)}},children:"Sessions"}),f.jsx("div",{style:{display:"flex",alignItems:"center",gap:20,flex:1},children:f.jsx("input",{type:"text",value:$,onChange:x=>Y(x.target.value),className:"session-name-input animate-on-mount-delay-2",onFocus:x=>x.target.style.borderBottomColor="#4169e1",onBlur:x=>x.target.style.borderBottomColor="transparent",disabled:q==="ended",placeholder:"Enter session name..."})}),f.jsxs("div",{style:{display:"flex",gap:12},children:[q==="active"&&f.jsxs(f.Fragment,{children:[f.jsxs("button",{className:"session-btn save-btn fade-in-scale animate-on-mount-delay-4",onClick:Ia,disabled:!ee,style:{opacity:ee?1:.5,cursor:ee?"pointer":"not-allowed",transition:"all 0.3s ease",background:ee?"#4169e1":"#9ca3af",color:ee?"#fff":"#6b7280",border:ee?"none":"1px solid #d1d5db",boxShadow:ee?"0 2px 8px rgba(65, 105, 225, 0.2)":"none"},children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"18px",height:"18px"},children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 3.75V16.5L12 14.25 7.5 16.5V3.75m9 0H18A2.25 2.25 0 0 1 20.25 6v12A2.25 2.25 0 0 1 18 20.25H6A2.25 2.25 0 0 1 3.75 18V6A2.25 2.25 0 0 1 6 3.75h1.5m9 0h-9"})}),ee?"Save":"Saved"]}),f.jsxs("button",{className:"session-btn pause-btn fade-in-scale animate-on-mount-delay-5",onClick:Xs,children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"18px",height:"18px"},children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25v13.5m-7.5-13.5v13.5"})}),"Pause"]}),f.jsxs("button",{className:"session-btn end-btn fade-in-scale animate-on-mount-delay-6",onClick:Zi,children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"18px",height:"18px"},children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 7.5A2.25 2.25 0 0 1 7.5 5.25h9a2.25 2.25 0 0 1 2.25 2.25v9a2.25 2.25 0 0 1-2.25 2.25h-9a2.25 2.25 0 0 1-2.25-2.25v-9Z"})}),"End"]})]}),q==="paused"&&f.jsxs(f.Fragment,{children:[f.jsxs("button",{className:"session-btn resume-btn fade-in-scale animate-on-mount-delay-4",onClick:ti,children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"18px",height:"18px"},children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347c-.75.412-1.667-.13-1.667-.986V5.653Z"})}),"Resume"]}),f.jsxs("button",{className:"session-btn end-btn fade-in-scale animate-on-mount-delay-5",onClick:Zi,children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"18px",height:"18px"},children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 7.5A2.25 2.25 0 0 1 7.5 5.25h9a2.25 2.25 0 0 1 2.25 2.25v9a2.25 2.25 0 0 1-2.25 2.25h-9a2.25 2.25 0 0 1-2.25-2.25v-9Z"})}),"End"]})]}),q==="ended"&&f.jsxs("button",{className:"session-btn delete-btn fade-in-scale animate-on-mount-delay-4",onClick:po,children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"18px",height:"18px"},children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})}),"Delete Session"]})]})]})}),z?f.jsxs("div",{className:"session-view-content",children:[f.jsxs("div",{className:"session-section fade-in-scale animate-on-mount-delay-1",children:[f.jsxs("div",{className:"section-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer"},onClick:()=>wi("connection"),children:[f.jsx("h2",{children:"Connection"}),f.jsx("button",{onClick:x=>{x.stopPropagation(),wi("connection")},style:{background:"none",border:"none",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"background-color 0.2s",display:"flex",alignItems:"center",justifyContent:"center",outline:"none"},onMouseEnter:x=>x.target.style.backgroundColor="#f0f0f0",onMouseLeave:x=>x.target.style.backgroundColor="transparent",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"20px",height:"20px",transform:ut.connection?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s"},children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})})})]}),!ut.connection&&f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16},children:[f.jsxs("button",{className:`connection-btn ${p?"disconnect":"connect"} fade-in-scale animate-on-mount-delay-2`,onClick:p?Wt:Un,disabled:q==="ended"||q==="paused",children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"18px",height:"18px"},children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.288 15.038a5.25 5.25 0 0 1 7.424 0M5.106 11.856c3.807-3.808 9.98-3.808 13.788 0M1.924 8.674c5.565-5.565 14.587-5.565 20.152 0M12.53 18.22l-.53.53-.53-.53a.75.75 0 0 1 1.06 0Z"})}),p?"Disconnect":"Connect"]}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[f.jsx("div",{className:`status-dot ${p?"connected":""} animate-on-mount-delay-3`,style:{width:"12px",height:"12px",borderRadius:"50%",backgroundColor:p?"#4CAF50":"#b0b0b0",transition:"background-color 0.3s ease"}}),f.jsx("span",{style:{color:"#666",fontSize:"14px"},children:p?"Connected to micro:bit":"Not connected"})]})]})]}),f.jsxs("div",{className:"session-section fade-in-scale animate-on-mount-delay-2",children:[f.jsxs("div",{className:"section-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer"},onClick:()=>wi("lessonProgress"),children:[f.jsx("h2",{children:"Lesson Progress"}),f.jsx("button",{onClick:x=>{x.stopPropagation(),wi("lessonProgress")},style:{background:"none",border:"none",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"background-color 0.2s",display:"flex",alignItems:"center",justifyContent:"center",outline:"none"},onMouseEnter:x=>x.target.style.backgroundColor="#f0f0f0",onMouseLeave:x=>x.target.style.backgroundColor="transparent",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"20px",height:"20px",transform:ut.lessonProgress?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s"},children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})})})]}),!ut.lessonProgress&&f.jsxs(f.Fragment,{children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:16,gap:16},children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"lesson-select",style:{fontWeight:600,marginRight:12},children:"Select Lesson:"}),f.jsx("select",{id:"lesson-select",value:Me,onChange:x=>{Gs(x.target.value),Xi(x.target.value)},style:{padding:"6px 12px",borderRadius:6,border:"1px solid #e0e0e0",fontSize:14,fontFamily:"Space Mono, monospace"},children:Kn.map(x=>f.jsx("option",{value:x.id,style:{fontFamily:"Space Mono, monospace"},children:x.name},x.id))})]}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[f.jsx("button",{style:{padding:"8px 18px",borderRadius:8,background:"#4169e1",color:"#fff",fontWeight:600,fontSize:15,border:"none",boxShadow:"0 2px 8px rgba(65, 105, 225, 0.10)",cursor:"pointer",marginBottom:0},onClick:()=>wn(!0),children:"Lesson History"}),f.jsx("button",{style:{padding:"8px 12px",borderRadius:8,background:Me==="none"||!Zt[Me]?"#e0e0e0":"#f7f7f7",color:Me==="none"||!Zt[Me]?"#b0b0b0":"#444",fontWeight:600,fontSize:15,border:"1.5px solid #d0d0d0",boxShadow:"0 2px 8px rgba(65, 105, 225, 0.04)",cursor:Me==="none"||!Zt[Me]?"not-allowed":"pointer",marginBottom:0,display:"flex",alignItems:"center",gap:6,transition:"background 0.2s, color 0.2s, border 0.2s"},disabled:Me==="none"||!Zt[Me],title:Me==="none"||!Zt[Me]?"Select a lesson with a link to pop out":"Open lesson link in new window",onMouseEnter:x=>{Me==="none"||!Zt[Me]||(x.target.style.background="#ededed",x.target.style.color="#222",x.target.style.borderColor="#b0b0b0")},onMouseLeave:x=>{Me==="none"||!Zt[Me]||(x.target.style.background="#f7f7f7",x.target.style.color="#444",x.target.style.borderColor="#d0d0d0")},onClick:()=>{Me==="none"||!Zt[Me]||window.open(Zt[Me],"_blank","toolbar=yes,scrollbars=yes,resizable=yes,top=0,left=0,width="+window.screen.width+",height="+window.screen.height)},children:f.jsxs("span",{style:{display:"flex",alignItems:"center",gap:4,background:Me==="none"||!Zt[Me]?"#e0e0e0":"#f7f7f7",borderRadius:6,padding:"0 2px",transition:"background 0.2s, color 0.2s, border 0.2s"},children:["Pop out",f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"20px",height:"20px",marginLeft:4},children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"})})]})})]})]}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"20px",padding:"20px 0"},children:[f.jsx("div",{style:{flex:1,height:"32px",background:"#f8f9fa",borderRadius:"16px",overflow:"hidden",position:"relative",border:"2px solid #e0e0e0"},children:f.jsx("div",{style:{height:"100%",background:"linear-gradient(90deg, #4169e1 0%, #274bb5 100%)",borderRadius:"14px",width:`${Object.keys(E).length>0?(((hi=We[Me])==null?void 0:hi.size)||0)/Object.keys(E).length*100:0}%`,transition:"width 0.5s cubic-bezier(0.4, 0, 0.2, 1)",position:"absolute",left:0,top:0,boxShadow:"0 2px 8px rgba(65, 105, 225, 0.2)"}})}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",fontSize:"16px",fontWeight:"600"},children:[f.jsx("span",{style:{color:"#4169e1"},children:((ns=We[Me])==null?void 0:ns.size)||0}),f.jsx("span",{style:{color:"#666"},children:"/"}),f.jsx("span",{style:{color:"#222"},children:Object.keys(E).length}),f.jsxs("span",{style:{color:"#666",fontSize:"14px"},children:["(",Object.keys(E).length>0?Math.round((((Ni=We[Me])==null?void 0:Ni.size)||0)/Object.keys(E).length*100):0,"%)"]})]})]}),f.jsxs("div",{style:{display:"flex",gap:"16px",alignItems:"center",marginTop:"8px",marginLeft:"2px",fontSize:"14px",color:"#666"},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[f.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"50%",background:"#4169e1"}}),f.jsx("span",{children:"Completed"})]}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[f.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"50%",background:"#e0e0e0"}}),f.jsx("span",{children:"In Progress"})]})]})]})]}),f.jsxs("div",{className:"session-section fade-in-scale animate-on-mount-delay-3",style:{minWidth:0,height:ut.robotsAndPrograms?"auto":"600px",overflow:"hidden"},children:[f.jsxs("div",{className:"section-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer"},onClick:()=>wi("robotsAndPrograms"),children:[f.jsx("h2",{children:"Robots"}),f.jsx("button",{onClick:x=>{x.stopPropagation(),wi("robotsAndPrograms")},style:{background:"none",border:"none",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"background-color 0.2s",display:"flex",alignItems:"center",justifyContent:"center",outline:"none"},onMouseEnter:x=>x.target.style.backgroundColor="#f0f0f0",onMouseLeave:x=>x.target.style.backgroundColor="transparent",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"20px",height:"20px",transform:ut.robotsAndPrograms?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s"},children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})})})]}),!ut.robotsAndPrograms&&f.jsx(f.Fragment,{children:f.jsx("div",{style:{minWidth:0,height:"calc(100% - 60px)",overflow:"hidden"},children:f.jsxs("div",{style:{minWidth:0,height:"100%",overflow:"hidden",display:"flex",flexDirection:"column"},children:[f.jsx("div",{style:{marginBottom:"20px",flexShrink:0},children:f.jsxs("h3",{style:{fontSize:"1.1rem",fontWeight:"600",color:"#222",marginBottom:"0px"},children:["Robots (",(()=>{const x=Si(),k=Object.keys(E).length,U=Object.keys(x).length;return re.trim()?`${U} of ${k}`:k})(),")"]})}),f.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px",marginBottom:"20px",padding:"12px 0",flexShrink:0},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",flexWrap:"wrap"},children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"16px",height:"16px",color:"#666"},children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})}),f.jsx("input",{type:"text",placeholder:"Search robots by ID or tags...",value:re,onChange:x=>pe(x.target.value),style:{padding:"8px 12px",border:"1px solid #e0e0e0",borderRadius:"6px",fontSize:"14px",width:"290px",outline:"none",transition:"border-color 0.2s"},onFocus:x=>x.target.style.borderColor="#4169e1",onBlur:x=>x.target.style.borderColor="#e0e0e0"}),Object.keys(E).length>0&&f.jsx("button",{className:"clear-data-btn fade-in-scale animate-on-mount-delay-7",onClick:qs,style:{padding:"8px 12px",height:"36px",fontSize:"14px",display:"flex",alignItems:"center",justifyContent:"center"},children:"Clear Robots"}),(()=>{const x=Si(),k=Object.keys(x);return k.length>0&&f.jsx("button",{className:"clear-data-btn fade-in-scale animate-on-mount-delay-6",onClick:()=>{const U=k.length>0&&k.every(V=>he.has(V));ne(U?new Set:new Set(k))},style:{padding:"8px 12px",height:"36px",fontSize:"14px",display:"flex",alignItems:"center",justifyContent:"center"},children:k.length>0&&k.every(V=>he.has(V))?"Deselect All":"Select All"})})()]}),he.size>0&&f.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:"8px"},children:[f.jsxs("button",{className:"fade-in-scale animate-on-mount-delay-4",style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"14px",padding:"8px 12px",height:"36px",background:"#dc3545",color:"#fff",border:"none",borderRadius:"6px",boxShadow:"0 2px 8px rgba(220, 53, 69, 0.15)",cursor:"pointer",transition:"background 0.2s"},onClick:()=>{if(!window.confirm(`Are you sure you want to delete the selected robot${he.size>1?"s":""}? This cannot be undone.`))return;const x={...E};he.forEach(k=>{delete x[k]}),A(x),ne(new Set)},children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"14px",height:"14px"},children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})}),"Delete Selected"]}),Me!=="none"&&f.jsxs("button",{className:"fade-in-scale animate-on-mount-delay-5",style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"14px",padding:"8px 12px",height:"36px",background:"#4169e1",color:"#fff",border:"none",borderRadius:"6px",boxShadow:"0 2px 8px rgba(65, 105, 225, 0.15)",cursor:"pointer",transition:"background 0.2s"},onClick:()=>{be(x=>{const k=new Set(x);return Array.from(he).every(V=>ae.has(V))?he.forEach(V=>k.delete(V)):he.forEach(V=>k.add(V)),k})},children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"14px",height:"14px"},children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),en?"Undo Done":"Mark as Done"]}),j&&f.jsxs("button",{className:"fade-in-scale animate-on-mount-delay-5",onClick:bn,style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"14px",padding:"8px 12px",height:"36px",background:"#a259e1",color:"#fff",border:"none",borderRadius:"6px",boxShadow:"0 2px 8px rgba(162, 89, 225, 0.15)",cursor:"pointer",transition:"background 0.2s"},children:[f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"14px",height:"14px"},children:[f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.568 3H5.25A2.25 2.25 0 0 0 3 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.732.699 2.431 0l4.318-4.318c.699-.699.699-1.732 0-2.431L9.568 3Z"}),f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 6h.008v.008H6V6Z"})]}),"Assign"]})]})]}),f.jsxs("div",{style:{flex:1,overflow:"auto"},children:[!B&&Zs,Ti]})]})})})]}),f.jsxs("div",{className:"session-section fade-in-scale animate-on-mount-delay-4",children:[f.jsxs("div",{className:"section-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer"},onClick:()=>wi("dataReceived"),children:[f.jsxs("h2",{children:["Logs (",y.length,")"]}),f.jsx("button",{onClick:x=>{x.stopPropagation(),wi("dataReceived")},style:{background:"none",border:"none",cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"background-color 0.2s",display:"flex",alignItems:"center",justifyContent:"center",outline:"none"},onMouseEnter:x=>x.target.style.backgroundColor="#f0f0f0",onMouseLeave:x=>x.target.style.backgroundColor="transparent",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"20px",height:"20px",transform:ut.dataReceived?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s"},children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})})})]}),!ut.dataReceived&&f.jsxs(f.Fragment,{children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"16px",marginBottom:"12px"},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:"16px",height:"16px",color:"#666"},children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})}),f.jsx("input",{type:"text",placeholder:"Search logs...",value:ke,onChange:x=>Oe(x.target.value),style:{padding:"8px 12px",border:"1px solid #e0e0e0",borderRadius:"6px",fontSize:"14px",width:"300px",outline:"none",transition:"border-color 0.2s"},onFocus:x=>x.target.style.borderColor="#4169e1",onBlur:x=>x.target.style.borderColor="#e0e0e0"})]}),y.length>0&&f.jsx("button",{className:"clear-data-btn fade-in-scale animate-on-mount-delay-5",onClick:bl,style:{padding:"8px 12px",height:"36px",fontSize:"14px",display:"flex",alignItems:"center",justifyContent:"center"},children:"Clear Data"})]}),gs]})]})]}):f.jsx("div",{className:"session-view-content",children:f.jsx("div",{style:{textAlign:"center",padding:"50px",color:"#666"},children:"Loading session..."})})]}),N&&Je&&j&&f.jsx("div",{className:"modal-overlay",onClick:()=>qe(!1),children:f.jsxs("div",{className:"modal-content",onClick:x=>x.stopPropagation(),style:{maxWidth:"500px"},children:[f.jsxs("div",{className:"modal-header",children:[f.jsxs("h2",{children:["Assign Robot: ",Je]}),f.jsx("button",{className:"modal-close",onClick:()=>qe(!1),children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"20",height:"20",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),f.jsxs("div",{className:"modal-body",children:[f.jsxs("div",{style:{marginBottom:"20px"},children:[f.jsx("h3",{style:{marginBottom:"10px",color:"#222"},children:"Assign to Student"}),f.jsxs("select",{onChange:x=>{x.target.value&&(ps(Je,x.target.value),qe(!1))},defaultValue:"",style:{width:"100%",padding:"8px 12px",border:"1px solid #e0e0e0",borderRadius:"6px",fontSize:"14px"},children:[f.jsx("option",{value:"",children:"Select a student..."}),j.students.map(x=>f.jsxs("option",{value:x.id,children:[x.name," (",x.email,")"]},x.id))]})]}),f.jsxs("div",{style:{marginBottom:"20px"},children:[f.jsx("h3",{style:{marginBottom:"10px",color:"#222"},children:"Assign to Group"}),f.jsxs("select",{onChange:x=>{x.target.value&&(Yi(Je,x.target.value),qe(!1))},defaultValue:"",style:{width:"100%",padding:"8px 12px",border:"1px solid #e0e0e0",borderRadius:"6px",fontSize:"14px"},children:[f.jsx("option",{value:"",children:"Select a group..."}),j.groups.map(x=>f.jsxs("option",{value:x.id,children:[x.name," (",x.students.length," students)"]},x.id))]})]}),((Lr=E[Je])==null?void 0:Lr.assignedTo)&&f.jsxs("div",{style:{marginTop:"20px",padding:"12px",background:"#fff3cd",borderRadius:"6px",border:"1px solid #ffeaa7"},children:[f.jsx("h4",{style:{margin:"0 0 8px 0",color:"#856404"},children:"Current Assignment"}),f.jsxs("p",{style:{margin:"0",color:"#856404"},children:["Currently assigned to: ",E[Je].assignedTo.name]}),f.jsx("button",{onClick:()=>{ci(Je),qe(!1)},style:{marginTop:"8px",background:"#dc3545",color:"white",border:"none",padding:"6px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Unassign Robot"})]})]}),f.jsx("div",{className:"modal-footer",children:f.jsx("button",{className:"btn-secondary",onClick:()=>qe(!1),children:"Cancel"})})]})}),Ee&&j&&f.jsx("div",{className:"modal-overlay",onClick:()=>O(!1),children:f.jsxs("div",{className:"modal-content",onClick:x=>x.stopPropagation(),style:{maxWidth:"500px"},children:[f.jsxs("div",{className:"modal-header",children:[f.jsxs("h2",{children:["Assign ",he.size," Robot",he.size!==1?"s":""]}),f.jsx("button",{className:"modal-close",onClick:()=>O(!1),children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"20",height:"20",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),f.jsx("div",{className:"modal-body",children:j?f.jsxs(f.Fragment,{children:[f.jsxs("div",{style:{marginBottom:"20px"},children:[f.jsx("h3",{style:{marginBottom:"10px",color:"#222"},children:"Assign to Student"}),f.jsxs("select",{onChange:x=>{x.target.value&&kr(x.target.value)},defaultValue:"",style:{width:"100%",padding:"8px 12px",border:"1px solid #e0e0e0",borderRadius:"6px",fontSize:"14px"},children:[f.jsx("option",{value:"",children:"Select a student..."}),j.students.map(x=>f.jsxs("option",{value:x.id,children:[x.name," (",x.email,")"]},x.id))]})]}),f.jsxs("div",{style:{marginBottom:"20px"},children:[f.jsx("h3",{style:{marginBottom:"10px",color:"#222"},children:"Assign to Group"}),f.jsxs("select",{onChange:x=>{x.target.value&&ui(x.target.value)},defaultValue:"",style:{width:"100%",padding:"8px 12px",border:"1px solid #e0e0e0",borderRadius:"6px",fontSize:"14px"},children:[f.jsx("option",{value:"",children:"Select a group..."}),j.groups.map(x=>f.jsxs("option",{value:x.id,children:[x.name," (",x.students.length," students)"]},x.id))]})]}),f.jsxs("div",{style:{marginTop:"20px",padding:"12px",background:"#fff3cd",borderRadius:"6px",border:"1px solid #ffeaa7"},children:[f.jsx("h4",{style:{margin:"0 0 8px 0",color:"#856404"},children:"Remove Assignments"}),f.jsxs("p",{style:{margin:"0",color:"#856404"},children:["Remove assignments from ",he.size," selected robot",he.size!==1?"s":""]}),f.jsx("button",{onClick:Qi,style:{marginTop:"8px",background:"#dc3545",color:"white",border:"none",padding:"6px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Remove Assignments"})]})]}):f.jsx("div",{style:{color:"#dc3545",fontWeight:500,padding:"24px 0",textAlign:"center"},children:"Please select a classroom to tag robots."})}),f.jsx("div",{className:"modal-footer",children:f.jsx("button",{className:"btn-secondary",onClick:()=>O(!1),children:"Cancel"})})]})}),Wn&&dn&&f.jsx("div",{className:"modal-overlay",onClick:()=>Pn(!1),children:f.jsxs("div",{className:"modal-content",onClick:x=>x.stopPropagation(),style:{maxWidth:"800px",maxHeight:"80vh",overflow:"hidden",display:"flex",flexDirection:"column"},children:[f.jsxs("div",{className:"modal-header",children:[f.jsxs("h2",{children:["Robot Details: ",dn]}),f.jsx("button",{className:"modal-close",onClick:()=>Pn(!1),children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"20",height:"20",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),f.jsx("div",{className:"modal-body",style:{flex:1,overflow:"hidden",display:"flex",flexDirection:"column"},children:f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"24px",height:"100%",overflow:"hidden"},children:[f.jsxs("div",{style:{display:"flex",flexDirection:"column",overflow:"hidden"},children:[f.jsxs("h3",{style:{marginBottom:"16px",fontSize:"1.1rem",fontWeight:"600",color:"#222"},children:["Recent Programs (",kt(dn).length,")"]}),f.jsx("input",{type:"text",placeholder:"Search recent programs...",value:$n,onChange:x=>yo(x.target.value),style:{marginBottom:"10px",padding:"8px 12px",border:"1px solid #e0e0e0",borderRadius:"6px",fontSize:"14px"}}),f.jsx("div",{style:{flex:1,overflow:"auto",paddingRight:"8px"},children:(()=>{const x=kt(dn),k=$n.trim()?x.filter(U=>U.program.toLowerCase().includes($n.toLowerCase())||U.button.toLowerCase().includes($n.toLowerCase())||U.robotName&&U.robotName.toLowerCase().includes($n.toLowerCase())||U.timestamp.toLowerCase().includes($n.toLowerCase())):x;return k.length===0?f.jsx("div",{style:{textAlign:"center",padding:"40px 20px",color:"#666",fontStyle:"italic"},children:"No programs found"}):k.slice(0,10).map((U,V)=>f.jsxs("div",{style:{background:"#f8f9fa",borderRadius:"12px",padding:"16px",marginBottom:"12px",border:"1px solid #e0e0e0",transition:"all 0.2s ease"},children:[f.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"8px"},children:f.jsxs("div",{style:{flex:1},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[f.jsx("span",{style:{fontSize:"0.85rem",fontWeight:"600",color:"#4169e1",fontFamily:"monospace"},children:U.deviceId}),U.button==="PLAY"?f.jsx("img",{src:jm,alt:"Play",style:{width:18,height:18,verticalAlign:"middle"}}):U.button==="TEST"?f.jsx("img",{src:Om,alt:"Test",style:{width:18,height:18,verticalAlign:"middle"}}):f.jsx("span",{style:{fontSize:"0.75rem",color:"#666",background:"#e3eafe",padding:"2px 6px",borderRadius:"4px",fontWeight:"500"},children:U.button})]}),f.jsx("div",{style:{fontSize:"0.8rem",color:"#888",marginBottom:"8px"},children:hc(U.timestamp)})]})}),f.jsx("div",{style:{background:"#fff",padding:"8px 12px",borderRadius:"6px",border:"1px solid #e0e0e0",fontFamily:"monospace",fontSize:"0.85rem",color:"#333",wordBreak:"break-word",marginBottom:"8px"},children:Ca(U.program)}),f.jsx("div",{style:{display:"flex",gap:"8px",justifyContent:"flex-end"},children:f.jsx("button",{onClick:W=>{W.stopPropagation(),fn(U),$i(U.program),ys(!0)},style:{padding:"4px 8px",background:"#4169e1",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.75rem",fontWeight:"500",fontFamily:"var(--font-body)",transition:"background 0.2s ease"},onMouseEnter:W=>W.target.style.background="#274bb5",onMouseLeave:W=>W.target.style.background="#4169e1",children:"View Program"})})]},`${U.deviceId}-${U.timestamp}-${V}`))})()})]}),f.jsxs("div",{style:{display:"flex",flexDirection:"column",overflow:"hidden"},children:[f.jsxs("h3",{style:{marginBottom:"16px",fontSize:"1.1rem",fontWeight:"600",color:"#222"},children:["Logs (",Cr(dn).length,")"]}),f.jsx("input",{type:"text",placeholder:"Search logs...",value:Jn,onChange:x=>Nr(x.target.value),style:{marginBottom:"10px",padding:"8px 12px",border:"1px solid #e0e0e0",borderRadius:"6px",fontSize:"14px"}}),f.jsx("div",{style:{flex:1,overflow:"auto",paddingRight:"8px"},children:(()=>{const x=Cr(dn),k=Jn.trim()?x.filter(U=>U.data.toLowerCase().includes(Jn.toLowerCase())||U.timestamp.toLowerCase().includes(Jn.toLowerCase())):x;return k.length===0?f.jsx("div",{style:{textAlign:"center",padding:"40px 20px",color:"#666",fontStyle:"italic"},children:"No logs found"}):k.map((U,V)=>f.jsxs("div",{style:{background:"#f8f9fa",borderRadius:"8px",padding:"12px",marginBottom:"8px",border:"1px solid #e0e0e0",fontSize:"0.85rem"},children:[f.jsx("div",{style:{fontSize:"0.75rem",color:"#888",marginBottom:"4px",fontFamily:"monospace"},children:hc(U.timestamp)}),f.jsx("div",{style:{color:"#333",fontFamily:"monospace",wordBreak:"break-word"},children:U.data})]},V))})()})]})]})}),f.jsx("div",{className:"modal-footer",children:f.jsx("button",{className:"btn-secondary",onClick:()=>Pn(!1),children:"Close"})})]})}),St&&f.jsx("div",{className:"serial-popup-overlay fade-in",style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.55)",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"flex-end",paddingRight:"23vw",paddingBottom:"20vh",transition:"background 0.4s cubic-bezier(0.4,0,0.2,1)"},children:f.jsx("img",{src:qk,alt:"Connection Graphic",className:"connection-bounce",style:{width:450,height:450,objectFit:"contain",borderRadius:16,boxShadow:"0 2px 12px rgba(65,105,225,0.10)",maxWidth:"90vw",maxHeight:"90vh",transition:"opacity 0.4s cubic-bezier(0.4,0,0.2,1)"}})}),Dr&&hn&&f.jsx("div",{className:"modal-overlay",onClick:()=>ys(!1),children:f.jsxs("div",{className:"modal-content",onClick:x=>x.stopPropagation(),style:{maxWidth:"600px",maxHeight:"90vh",overflow:"hidden",display:"flex",flexDirection:"column",alignItems:"center"},children:[f.jsxs("div",{className:"modal-header",style:{width:"100%"},children:[f.jsx("h2",{children:"View Program"}),f.jsx("button",{className:"modal-close",onClick:()=>ys(!1),children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"20",height:"20",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),f.jsx("div",{style:{display:"flex",gap:8,margin:"12px 0",flexWrap:"wrap",justifyContent:"center"},children:Ci(hn.program).map((x,k)=>f.jsx("span",{style:{fontWeight:k===mt.step?700:400,color:k===mt.step?"#4169e1":"#333",fontFamily:"monospace",fontSize:"1rem",opacity:k===mt.step?1:.6,padding:"2px 6px",borderRadius:"4px",background:k===mt.step?"#e3eafe":"transparent",transition:"all 0.2s"},children:x},k))}),f.jsxs("div",{style:{position:"relative",width:320,height:320,margin:"0 auto",background:"transparent",display:"flex",alignItems:"center",justifyContent:"center"},children:[f.jsx("svg",{width:320,height:320,style:{position:"absolute",top:0,left:0,zIndex:1},children:Array.from({length:mt.gridSize}).map((x,k)=>Array.from({length:mt.gridSize}).map((U,V)=>f.jsx("circle",{cx:32+V*64,cy:32+k*64,r:4,fill:"#bbb",opacity:.5},`dot-${k}-${V}`)))}),f.jsx("img",{src:__,alt:"Robot",className:"program-animation-robot",style:{left:25+(mt.x-mt.offsetX)*64-24,top:20+(mt.y-mt.offsetY)*64-24,width:60,height:70,zIndex:2,transform:`rotate(${mt.dir*90}deg)`}})]}),f.jsxs("div",{style:{display:"flex",gap:16,marginTop:24,alignItems:"center",justifyContent:"center"},children:[f.jsx("button",{onClick:()=>Dt(!1),disabled:mt.step===0,style:{padding:8,borderRadius:8,border:"1px solid #ccc",background:"#f7f9fb",cursor:mt.step===0?"not-allowed":"pointer"},children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:28,height:28,opacity:mt.step===0?.4:1},children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 16.811c0 .864-.933 1.406-1.683.977l-7.108-4.061a1.125 1.125 0 0 1 0-1.954l7.108-4.061A1.125 1.125 0 0 1 21 8.689v8.122ZM11.25 16.811c0 .864-.933 1.406-1.683.977l-7.108-4.061a1.125 1.125 0 0 1 0-1.954l7.108-4.061a1.125 1.125 0 0 1 1.683.977v8.122Z"})})}),f.jsx("button",{onClick:Bn,style:{padding:8,borderRadius:8,border:"1px solid #4169e1",background:mt.playing?"#e3eafe":"#4169e1",color:mt.playing?"#4169e1":"#fff",fontWeight:700,fontSize:18,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:mt.playing?f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:28,height:28},children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25v13.5m-7.5-13.5v13.5"})}):f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:28,height:28},children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347a1.125 1.125 0 0 1-1.667-.986V5.653Z"})})}),f.jsx("button",{onClick:()=>Dt(!0),disabled:mt.step>=Ci(hn.program).length,style:{padding:8,borderRadius:8,border:"1px solid #ccc",background:"#f7f9fb",cursor:mt.step>=Ci(hn.program).length?"not-allowed":"pointer"},children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:28,height:28,opacity:mt.step>=Ci(hn.program).length?.4:1},children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 8.689c0-.864.933-1.406 1.683-.977l7.108 4.061a1.125 1.125 0 0 1 0 1.954l-7.108 4.061A1.125 1.125 0 0 1 3 16.811V8.69ZM12.75 8.689c0-.864.933-1.406 1.683-.977l7.108 4.061a1.125 1.125 0 0 1 0 1.954l-7.108 4.061a1.125 1.125 0 0 1-1.683-.977V8.69Z"})})}),f.jsx("button",{onClick:()=>{$i(hn.program)},style:{padding:8,borderRadius:8,border:"1px solid #ccc",background:"#fff",color:"#4169e1",fontWeight:700,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:28,height:28},children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"})})})]})]})}),vs&&f.jsx("div",{className:"modal-overlay",onClick:()=>{ei(!1),Ii(!1)},children:f.jsxs("div",{className:"modal-content",onClick:x=>x.stopPropagation(),children:[f.jsx("div",{className:"modal-header",children:f.jsx("h2",{children:"Active Session Detected"})}),f.jsx("div",{className:"modal-body",children:f.jsx("p",{children:"There is already an active running session. If you resume this session, the active session will be paused. Proceed?"})}),f.jsxs("div",{className:"modal-footer",children:[f.jsx("button",{className:"btn-secondary",onClick:()=>{ei(!1),Ii(!1)},children:"Cancel"}),f.jsx("button",{className:"btn-primary",onClick:()=>{Lt(Se).then(x=>{const k=x.map(U=>U.status==="active"&&String(U.id)!==String(z==null?void 0:z.id)?{...U,status:"paused"}:U);On(Se,k),ei(!1),Ii(!1),Ki()})},children:"Proceed"})]})]})}),xi&&f.jsx("div",{className:"modal-overlay",onClick:()=>ms(!1),children:f.jsxs("div",{className:"modal-content",onClick:x=>x.stopPropagation(),children:[f.jsx("div",{className:"modal-header",children:f.jsx("h2",{children:"End Session"})}),f.jsx("div",{className:"modal-body",children:f.jsx("p",{children:"Are you sure you want to end this session? This action cannot be undone."})}),f.jsxs("div",{className:"modal-footer",children:[f.jsx("button",{className:"btn-secondary",onClick:()=>ms(!1),children:"Cancel"}),f.jsx("button",{className:"btn-primary",style:{background:"#dc3545",borderColor:"#dc3545"},onClick:()=>{ms(!1),Rr()},children:"End Session"})]})]})}),Ys&&f.jsx("div",{className:"modal-overlay",onClick:()=>Qs(!1),children:f.jsxs("div",{className:"modal-content",onClick:x=>x.stopPropagation(),children:[f.jsx("div",{className:"modal-header",children:f.jsx("h2",{children:"Delete Session"})}),f.jsx("div",{className:"modal-body",children:f.jsx("p",{children:"Are you sure you want to delete this session? This action cannot be undone."})}),f.jsxs("div",{className:"modal-footer",children:[f.jsx("button",{className:"btn-secondary",onClick:()=>Qs(!1),children:"Cancel"}),f.jsx("button",{className:"btn-primary",style:{background:"#dc3545",borderColor:"#dc3545"},onClick:()=>{z&&Lt(Se).then(x=>{const k=x.filter(U=>String(U.id)!==String(z.id));On(Se,k),Qs(!1),n("/sessions")})},children:"Delete"})]})]})}),Or&&f.jsx("div",{className:"modal-overlay",onClick:()=>_s(!1),children:f.jsxs("div",{className:"modal-content",onClick:x=>x.stopPropagation(),children:[f.jsx("div",{style:{marginBottom:0,textAlign:"center"},children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:60,height:60,color:"#4169e1",margin:"0 auto"},children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})})}),f.jsx("div",{className:"modal-header",style:{display:"block",textAlign:"center",justifyContent:"center"},children:f.jsx("h2",{children:"Session Paused"})}),f.jsx("div",{className:"modal-body",style:{marginBottom:0,textAlign:"center"},children:f.jsx("p",{children:"Since you've been inactive for a while, your session has been paused."})}),f.jsx("div",{className:"modal-footer",style:{display:"block",marginBottom:0,textAlign:"center"},children:f.jsx("p",{style:{marginTop:0,marginBottom:0,fontSize:14,color:"#808080",textAlign:"center"},children:"Click anywhere to dismiss"})})]})}),Ji&&f.jsx("div",{className:"modal-overlay",onClick:()=>wn(!1),children:f.jsxs("div",{className:"modal-content",onClick:x=>x.stopPropagation(),style:{maxWidth:"700px",maxHeight:"80vh",overflow:"auto"},children:[f.jsxs("div",{className:"modal-header",children:[f.jsx("h2",{children:"Lesson Completion History"}),f.jsx("button",{className:"modal-close",onClick:()=>wn(!1),children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"20",height:"20",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),f.jsx("div",{className:"modal-body",children:f.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:15},children:[f.jsx("thead",{children:f.jsxs("tr",{style:{background:"#f8f9fa"},children:[f.jsx("th",{style:{textAlign:"left",padding:"8px",borderBottom:"2px solid #e0e0e0"},children:"Lesson"}),f.jsx("th",{style:{textAlign:"left",padding:"8px",borderBottom:"2px solid #e0e0e0"},children:"Completed Robots"})]})}),f.jsx("tbody",{children:Kn.filter(x=>x.id!=="none").map(x=>f.jsxs("tr",{children:[f.jsx("td",{style:{padding:"8px",borderBottom:"1px solid #e0e0e0",fontWeight:600},children:x.name}),f.jsx("td",{style:{padding:"8px",borderBottom:"1px solid #e0e0e0"},children:We[x.id]&&We[x.id].size>0?f.jsx("ul",{style:{margin:0,paddingLeft:18},children:Array.from(We[x.id]).map(k=>{const U=E[k];let V="";return U!=null&&U.assignedTo&&(V=U.assignedTo.type==="student"?U.assignedTo.name:`${U.assignedTo.name} (Group)`),f.jsxs("li",{style:{marginBottom:2},children:[f.jsx("span",{style:{fontFamily:"Space Mono, monospace",fontWeight:600},children:k}),V&&f.jsxs("span",{style:{color:"#4169e1",marginLeft:8,fontWeight:500,fontSize:13},children:["[",V,"]"]})]},k)})}):f.jsx("span",{style:{color:"#888"},children:"No robots completed"})})]},x.id))})]})}),f.jsx("div",{className:"modal-footer",children:f.jsx("button",{className:"btn-secondary",onClick:()=>wn(!1),children:"Close"})})]})}),es&&f.jsx("div",{className:"modal-overlay",onClick:()=>bs(!1),children:f.jsxs("div",{className:"modal-content",onClick:x=>x.stopPropagation(),style:{maxWidth:"420px"},children:[f.jsx("div",{className:"modal-header",children:f.jsx("h2",{children:"Unsaved Changes"})}),f.jsx("div",{className:"modal-body",children:f.jsx("p",{children:"Wait! You have unsaved data you're leaving behind..."})}),f.jsxs("div",{className:"modal-footer",style:{display:"flex",gap:12,justifyContent:"flex-end"},children:[f.jsx("button",{className:"btn-secondary",onClick:async()=>{bs(!1),zn&&await zn()},children:"Leave"}),f.jsx("button",{className:"btn-primary",style:{background:"#4169e1",borderColor:"#4169e1"},onClick:async()=>{await Ia(),bs(!1),zn&&await zn()},children:"Save"})]})]})})]})}function Kk(){const i=Fs(),[e,n]=I.useState(null),[r,o]=I.useState([]),[c,h]=I.useState(!1),[p,g]=I.useState(!1),[y,w]=I.useState(!1),[E,A]=I.useState(null),[B,H]=I.useState(""),[q,Q]=I.useState(""),[$,Y]=I.useState(""),[z,ge]=I.useState(""),[ee,me]=I.useState("#4169e1"),[D,R]=I.useState("blue"),[C,L]=I.useState(null),[j,P]=I.useState(null),[N,qe]=I.useState(""),[Je,se]=I.useState(!1),[he,ne]=I.useState(null),Ee={blue:{name:"Blue",primary:"#4169e1",dark:"#4f7ad6",light:"#6b8cff"},red:{name:"Red",primary:"#dc3545",dark:"#d95c63",light:"#ff6b6b"},green:{name:"Green",primary:"#28a745",dark:"#4bbf6b",light:"#6bff8c"},orange:{name:"Orange",primary:"#fd7e14",dark:"#ff9c4a",light:"#ffb366"},purple:{name:"Purple",primary:"#6f42c1",dark:"#8d6fd1",light:"#b366ff"},teal:{name:"Teal",primary:"#20c997",dark:"#4fd6b0",light:"#6bffd9"},pink:{name:"Pink",primary:"#e83e8c",dark:"#e86fa7",light:"#ff6bb3"},indigo:{name:"Indigo",primary:"#6610f2",dark:"#7c4dff",light:"#9d66ff"}};I.useEffect(()=>{me(Ee[D].primary)},[D]),I.useEffect(()=>{E&&qe(E.name)},[E]);const O=ce=>{qe(ce.target.value)},re=async()=>{if(!E||!N.trim()||N===E.name)return;const ce=r.map(we=>we.id===E.id?{...we,name:N}:we);await be(e,ce),o(ce),A({...E,name:N})},pe=ce=>{ce.key==="Enter"&&(ce.preventDefault(),re(),ce.target.blur())},ae=async ce=>{if(!ce)return;const we=on(ln,"users",ce.uid,"appdata","classrooms"),De=await Gn(we);De.exists()?o(De.data().classrooms||[]):o([])},be=async(ce,we)=>{if(!ce)return;const De=on(ln,"users",ce.uid,"appdata","classrooms");await ks(De,{classrooms:we})},ke=async()=>{if(!B.trim())return;const ce=Rt.currentUser,we=on(ln,"users",ce.uid,"appdata","classrooms"),De=await Gn(we);let Xe=[];De.exists()&&(Xe=De.data().classrooms||[]);const It=[{id:Date.now().toString(),name:B,color:ee,createdAt:new Date().toISOString(),createdBy:ce.email,students:[],groups:[]},...Xe];await be(ce,It),o(It),h(!1),H(""),me("#4169e1"),R("blue")},Oe=async()=>{if(!q.trim()||!z.trim())return;const ce={id:Date.now().toString(),name:q,email:z,addedAt:new Date().toISOString()},we=r.map(De=>De.id===E.id?{...De,students:[...De.students,ce]}:De);await be(e,we),o(we),g(!1),Q(""),ge(""),A(we.find(De=>De.id===E.id))},ut=async()=>{if(!$.trim())return;const ce={id:Date.now().toString(),name:$,students:[],createdAt:new Date().toISOString()},we=r.map(De=>De.id===E.id?{...De,groups:[...De.groups,ce]}:De);await be(e,we),o(we),w(!1),Y(""),A(we.find(De=>De.id===E.id))},dt=async(ce,we)=>{const De=r.map(Xe=>{if(Xe.id===E.id){const Se=Xe.groups.map(It=>{if(It.id===ce){const ht=Xe.students.find(Zn=>Zn.id===we);if(ht&&!It.students.find(Zn=>Zn.id===we))return{...It,students:[...It.students,ht]}}return It});return{...Xe,groups:Se}}return Xe});await be(e,De),o(De),A(De.find(Xe=>Xe.id===E.id))},Wn=async(ce,we)=>{const De=r.map(Xe=>{if(Xe.id===E.id){const Se=Xe.groups.map(It=>It.id===ce?{...It,students:It.students.filter(ht=>ht.id!==we)}:It);return{...Xe,groups:Se}}return Xe});await be(e,De),o(De),A(De.find(Xe=>Xe.id===E.id))},Pn=ce=>{ne(ce),se(!0)},dn=async(ce,we)=>{if(confirm("Are you sure you want to remove this student? This action cannot be undone.")){const De=r.map(Xe=>{if(Xe.id===ce){const Se=Xe.students.filter(ht=>ht.id!==we),It=Xe.groups.map(ht=>({...ht,students:ht.students.filter(Zn=>Zn.id!==we)}));return{...Xe,students:Se,groups:It}}return Xe});await be(e,De),o(De),(E==null?void 0:E.id)===ce&&A(De.find(Xe=>Xe.id===ce))}},qi=async(ce,we)=>{if(confirm("Are you sure you want to delete this group? This action cannot be undone.")){const De=r.map(Xe=>Xe.id===ce?{...Xe,groups:Xe.groups.filter(Se=>Se.id!==we)}:Xe);await be(e,De),o(De),(E==null?void 0:E.id)===ce&&A(De.find(Xe=>Xe.id===ce))}};return I.useEffect(()=>{const ce=Rt.onAuthStateChanged(we=>{we?(n(we),ae(we)):i("/login")});return()=>ce()},[i]),I.useEffect(()=>{if(j===null)return;const ce=()=>P(null);return window.addEventListener("click",ce),()=>window.removeEventListener("click",ce)},[j]),f.jsxs("div",{className:"dashboard-container",children:[f.jsx(eu,{className:"slide-in-from-left"}),f.jsxs("div",{className:"main-content slide-in-from-bottom",children:[f.jsxs("div",{className:"top-bar slide-in-from-top",style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:24,marginBottom:32},children:[f.jsx("h1",{style:{margin:0,fontSize:"2rem",fontWeight:700,color:"#222"},children:"Classrooms"}),f.jsxs("button",{className:"create-classroom-btn fade-in-scale animate-on-mount-delay-1",onClick:()=>h(!0),children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",width:"20",height:"20",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),"Create Classroom"]})]}),f.jsx("div",{className:"classrooms-content",children:r.length===0?f.jsxs("div",{className:"empty-state animate-on-mount-delay-2",children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"#b0b0b0",width:"60",height:"60",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"})}),f.jsx("h3",{children:"No Classrooms Yet"}),f.jsx("p",{children:"Create your first classroom to start managing students and groups"}),f.jsx("button",{className:"create-first-btn fade-in-scale animate-on-mount-delay-3",onClick:()=>h(!0),children:"Create Your First Classroom"})]}):f.jsx("div",{className:"classrooms-grid",children:r.map((ce,we)=>{var It;const De=ht=>{ht.stopPropagation(),P(j===ce.id?null:ce.id)},Xe=ht=>{ht.stopPropagation(),P(null),A(ce)},Se=ht=>{ht.stopPropagation(),P(null),Pn(ce.id)};return f.jsxs("div",{className:`classroom-card fade-in-scale animate-on-mount-delay-${2+we}`,onClick:()=>A(ce),style:{cursor:"pointer",position:"relative"},children:[f.jsx("div",{className:"classroom-card-header-bar",style:{background:`${(It=Ee[Object.keys(Ee).find(ht=>Ee[ht].primary===ce.color)||"blue"])==null?void 0:It.primary}`,position:"relative"},children:f.jsx("button",{className:"classroom-card-menu-btn",onClick:De,style:{position:"absolute",top:8,right:8,background:"none",border:"none",cursor:"pointer",zIndex:20,padding:2},onMouseDown:ht=>ht.stopPropagation(),children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"#fff",width:"22",height:"22",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM12.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM18.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z"})})})}),j===ce.id&&f.jsxs("div",{className:"classroom-card-menu",style:{position:"absolute",top:38,right:8,background:"#fff",border:"1px solid #e0e0e0",borderRadius:8,boxShadow:"0 4px 16px rgba(0,0,0,0.10)",zIndex:1e4,minWidth:100,padding:"4px 0"},onClick:ht=>ht.stopPropagation(),children:[f.jsxs("button",{className:"menu-item",onClick:Xe,style:{width:"100%",padding:"4px 8px",background:"none",border:"none",textAlign:"left",cursor:"pointer",fontSize:"13px",fontWeight:400,color:"#222",display:"flex",alignItems:"center",gap:6},children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"16",height:"16",style:{minWidth:16},children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"})}),"Edit"]}),f.jsxs("button",{className:"menu-item",onClick:Se,style:{width:"100%",padding:"4px 8px",background:"none",border:"none",textAlign:"left",color:"#dc3545",cursor:"pointer",fontSize:"13px",fontWeight:400,display:"flex",alignItems:"center",gap:6},children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"16",height:"16",style:{minWidth:16},children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})}),"Delete"]})]}),f.jsx("span",{className:"classroom-card-avatar",style:{background:ce.color||"#4169e1",border:"4px solid #fff"},children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"28",height:"28",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"})})}),f.jsx("div",{className:"classroom-card-content",children:f.jsxs("div",{className:"classroom-info",children:[f.jsx("div",{className:"classroom-title",children:f.jsx("h3",{children:ce.name})}),f.jsxs("p",{children:[ce.students.length," students • ",ce.groups.length," groups"]})]})})]},ce.id)})})})]}),c&&f.jsx("div",{className:"modal-overlay fade-in-scale",onClick:()=>h(!1),children:f.jsxs("div",{className:"modal-content create-classroom-modal",onClick:ce=>ce.stopPropagation(),children:[f.jsxs("div",{className:"modal-header",children:[f.jsx("h2",{children:"Create New Classroom"}),f.jsx("button",{className:"modal-close",onClick:()=>h(!1),children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"20",height:"20",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),f.jsxs("div",{className:"modal-body",children:[f.jsxs("div",{className:"form-group",children:[f.jsxs("label",{children:["Classroom Name ",f.jsx("span",{style:{color:"red"},children:"*"})]}),f.jsx("input",{type:"text",value:B,onChange:ce=>H(ce.target.value),placeholder:"Enter classroom name",onKeyPress:ce=>ce.key==="Enter"&&ke()})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Theme"}),f.jsx("div",{className:"theme-buttons",children:Object.entries(Ee).map(([ce,we])=>f.jsx("button",{className:`theme-button ${D===ce?"selected":""}`,style:{background:`linear-gradient(to bottom, ${we.dark} 0%, ${we.dark} 50%, ${we.light} 50%, ${we.light} 100%)`},onClick:()=>R(ce),title:we.name,"aria-label":`Select ${we.name} theme`},ce))})]})]}),f.jsxs("div",{className:"modal-footer",children:[f.jsx("button",{className:"btn-secondary",onClick:()=>h(!1),children:"Cancel"}),f.jsx("button",{className:"btn-primary",style:{background:B.trim()?"#4169e1":"#e0e0e0",borderColor:B.trim()?"#4169e1":"#e0e0e0",color:B.trim()?"#fff":"#b0b0b0",cursor:B.trim()?"pointer":"not-allowed",fontFamily:"Space Mono, monospace"},onClick:ke,disabled:!B.trim(),children:"Create"})]})]})}),E&&f.jsx("div",{className:"modal-overlay fade-in-scale",onClick:()=>A(null),children:f.jsxs("div",{className:"modal-content classroom-detail-modal",onClick:ce=>ce.stopPropagation(),children:[f.jsxs("div",{className:"modal-header",children:[f.jsx("div",{className:"classroom-header-info",children:f.jsx("input",{type:"text",value:N,onChange:O,onBlur:re,onKeyDown:pe,className:"classroom-name-input",style:{fontSize:"1.5rem",fontWeight:700,border:"none",background:"transparent",color:"#222",padding:"8px 0",borderBottom:"2px solid transparent",minWidth:200,outline:"none",transition:"border-color 0.2s"},onFocus:ce=>ce.target.style.borderBottomColor="#4169e1",onBlurCapture:ce=>ce.target.style.borderBottomColor="transparent",placeholder:"Enter classroom name...",maxLength:60})}),f.jsx("button",{className:"modal-close",onClick:()=>A(null),children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"20",height:"20",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),f.jsx("div",{className:"modal-body",children:f.jsx("div",{className:"classroom-detail-tabs",children:f.jsxs("div",{className:"tab-content",children:[f.jsxs("div",{className:"section",children:[f.jsxs("div",{className:"section-header",children:[f.jsx("h3",{children:"Students"}),f.jsxs("button",{className:"add-btn",onClick:()=>g(!0),children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",width:"16",height:"16",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),"Add Student"]})]}),f.jsx("div",{className:"students-list",children:E.students.length===0?f.jsx("div",{className:"empty-list",children:f.jsx("p",{children:"No students added yet"})}):E.students.map(ce=>f.jsxs("div",{className:"student-item",draggable:!0,onDragStart:we=>{we.dataTransfer.setData("studentId",ce.id)},children:[f.jsxs("div",{className:"student-info",children:[f.jsx("div",{className:"student-avatar",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"16",height:"16",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"})})}),f.jsxs("div",{className:"student-details",children:[f.jsx("span",{className:"student-name",children:ce.name}),f.jsx("span",{className:"student-email",children:ce.email})]})]}),f.jsx("button",{className:"remove-btn",onClick:()=>dn(E.id,ce.id),children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"14",height:"14",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]},ce.id))})]}),f.jsxs("div",{className:"section",children:[f.jsxs("div",{className:"section-header",children:[f.jsx("h3",{children:"Groups"}),f.jsxs("button",{className:"add-btn",onClick:()=>w(!0),children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",width:"16",height:"16",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),"Add Group"]})]}),f.jsx("div",{className:"groups-list",children:E.groups.length===0?f.jsx("div",{className:"empty-list",children:f.jsx("p",{children:"No groups created yet"})}):E.groups.map(ce=>f.jsxs("div",{className:`group-item${C===ce.id?" drag-over":""}`,onDragOver:we=>we.preventDefault(),onDragEnter:()=>L(ce.id),onDragLeave:()=>L(null),onDrop:we=>{L(null);const De=we.dataTransfer.getData("studentId");De&&dt(ce.id,De)},children:[f.jsxs("div",{className:"group-header",children:[f.jsx("h4",{children:ce.name}),f.jsx("button",{className:"remove-btn",onClick:()=>qi(E.id,ce.id),children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"14",height:"14",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),f.jsx("div",{className:"group-students",children:ce.students.length===0?f.jsx("p",{className:"no-students",children:"No students in this group"}):ce.students.map(we=>f.jsxs("div",{className:"group-student",children:[f.jsx("span",{children:we.name}),f.jsx("button",{className:"remove-student-btn",onClick:()=>Wn(ce.id,we.id),children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"12",height:"12",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]},we.id))}),E.students.length>0&&f.jsx("div",{className:"add-to-group",children:f.jsxs("select",{onChange:we=>{we.target.value&&(dt(ce.id,we.target.value),we.target.value="")},defaultValue:"",children:[f.jsx("option",{value:"",children:"Add student to group..."}),E.students.filter(we=>!ce.students.find(De=>De.id===we.id)).map(we=>f.jsx("option",{value:we.id,children:we.name},we.id))]})})]},ce.id))})]})]})})})]})}),p&&f.jsx("div",{className:"modal-overlay fade-in-scale",onClick:()=>g(!1),children:f.jsxs("div",{className:"modal-content",onClick:ce=>ce.stopPropagation(),children:[f.jsxs("div",{className:"modal-header",children:[f.jsx("h2",{children:"Add Student"}),f.jsx("button",{className:"modal-close",onClick:()=>g(!1),children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"20",height:"20",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),f.jsxs("div",{className:"modal-body",children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Student Name"}),f.jsx("input",{type:"text",value:q,onChange:ce=>Q(ce.target.value),placeholder:"Enter student name"})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Email"}),f.jsx("input",{type:"email",value:z,onChange:ce=>ge(ce.target.value),placeholder:"Enter student email"})]})]}),f.jsxs("div",{className:"modal-footer",children:[f.jsx("button",{className:"btn-secondary",onClick:()=>g(!1),children:"Cancel"}),f.jsx("button",{className:"btn-primary",onClick:Oe,children:"Add Student"})]})]})}),y&&f.jsx("div",{className:"modal-overlay fade-in-scale",onClick:()=>w(!1),children:f.jsxs("div",{className:"modal-content",onClick:ce=>ce.stopPropagation(),children:[f.jsxs("div",{className:"modal-header",children:[f.jsx("h2",{children:"Add Group"}),f.jsx("button",{className:"modal-close",onClick:()=>w(!1),children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"20",height:"20",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),f.jsx("div",{className:"modal-body",children:f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Group Name"}),f.jsx("input",{type:"text",value:$,onChange:ce=>Y(ce.target.value),placeholder:"Enter group name",onKeyPress:ce=>ce.key==="Enter"&&ut()})]})}),f.jsxs("div",{className:"modal-footer",children:[f.jsx("button",{className:"btn-secondary",onClick:()=>w(!1),children:"Cancel"}),f.jsx("button",{className:"btn-primary",onClick:ut,children:"Add Group"})]})]})}),Je&&f.jsx("div",{className:"modal-overlay",onClick:()=>se(!1),children:f.jsxs("div",{className:"modal-content",onClick:ce=>ce.stopPropagation(),children:[f.jsx("div",{className:"modal-header",children:f.jsx("h2",{children:"Delete Classroom"})}),f.jsx("div",{className:"modal-body",children:f.jsx("p",{children:"Are you sure you want to delete this classroom? This action cannot be undone."})}),f.jsxs("div",{className:"modal-footer",children:[f.jsx("button",{className:"btn-secondary",onClick:()=>se(!1),children:"Cancel"}),f.jsx("button",{className:"btn-primary",style:{background:"#dc3545",borderColor:"#dc3545"},onClick:()=>{if(!he)return;const ce=r.filter(we=>we.id!==he);be(e,ce),o(ce),(E==null?void 0:E.id)===he&&A(null),se(!1),ne(null)},children:"Delete"})]})]})})]})}const Yk=`
.session-view-content .lesson-details-title {
  font-family: 'Sniglet', serif !important;
  font-weight: 500 !important;
}
`,oa=[{id:"lesson1",title:"I Feel",overview:"Code Roversa to move on a grid toward an emotion based on a scenario.",age:"Pre-K - 2nd",link:"https://docs.google.com/document/d/15hDBUGjhOFpLSPmmkFJMXMcShzhLqdaBW9WTI3UOFXs/edit?tab=t.0#heading=h.a6lqxihc6dhl"},{id:"lesson2",title:"Hungry, Hungry Robot",overview:"Code Roversa to move on a grid to bring a story to life.",age:"Pre-K - 2nd",link:"https://docs.google.com/document/d/13E9Lz6l0eP4ZT-kJBxJST35SX4427fOw6XLlfcZpwm0/edit?tab=t.0#heading=h.a6lqxihc6dhl"},{id:"lesson3",title:"Grid Challenges",overview:"Code Roversa to move on a grid toward certain objectives.",age:"3rd - 5th",link:"https://docs.google.com/document/d/1qHoE0t6diltiHJbYG4hKiGGIJOQFLw3rRNMmLgWc-1E/edit?tab=t.0#heading=h.a6lqxihc6dhl"},{id:"lesson4",title:"Duck Duck Robot",overview:"Match numerals to number of obejcts and solve number facts by coding Roversa to the correct answer.",age:"Pre-K - 2nd",link:"https://docs.google.com/document/d/14jte14tL0Txgm1CdY9kZsbov0lZDoqv7UyhECFW8ioI/edit?tab=t.0#heading=h.a6lqxihc6dhl"}],b_=oa.map(i=>i.id);function Wa(i){if(!i)return!1;try{return new URL(i),!0}catch{return!1}}function Qk(){const[i,e]=I.useState(oa[0].id),[n,r]=I.useState(""),[o,c]=I.useState([]),[h,p]=I.useState(!1),[g,y]=I.useState({title:"",overview:"",age:"",link:""}),[w,E]=I.useState(!1),[A,B]=I.useState(null),H=o.filter(ee=>ee.title.toLowerCase().includes(n.toLowerCase())||ee.overview.toLowerCase().includes(n.toLowerCase())),q=H.find(ee=>ee.id===i)||H[0],Q=Fs();_c.useEffect(()=>{!q&&H.length>0&&e(H[0].id)},[n]);const $=async ee=>{if(!ee)return;const me=on(ln,"users",ee.uid,"appdata","lessons"),D=await Gn(me);if(D.exists()){const R=D.data().lessons||[];R.length===0?(await ks(me,{lessons:[...oa]}),c([...oa])):c(R)}else await ks(me,{lessons:[...oa]}),c([...oa])},Y=async(ee,me)=>{if(!ee)return;const D=on(ln,"users",ee.uid,"appdata","lessons");await ks(D,{lessons:me})};_c.useEffect(()=>{const ee=Rt.onAuthStateChanged(me=>{me?$(me):Q("/login")});return()=>ee()},[Q]),_c.useEffect(()=>{},[o]);const z=async()=>{if(!g.title.trim())return;const ee=Rt.currentUser,me=on(ln,"users",ee.uid,"appdata","lessons"),D=await Gn(me);let R=[];D.exists()?(R=D.data().lessons||[],R.length===0&&(R=[...oa])):R=[...oa];const C="lesson"+Date.now(),L=[...R,{id:C,title:g.title,overview:g.overview,age:g.age,link:g.link}];await ks(me,{lessons:L}),c(L),e(C),p(!1),y({title:"",overview:"",age:"",link:""})},ge=async ee=>{var R;const me=Rt.currentUser,D=o.filter(C=>C.id!==ee);if(await Y(me,D),c(D),i===ee){const C=((R=D[0])==null?void 0:R.id)||"";e(C)}E(!1),B(null)};return f.jsxs(f.Fragment,{children:[f.jsx("style",{children:Yk}),f.jsxs("div",{className:"dashboard-container",children:[f.jsx(eu,{className:"slide-in-from-left"}),f.jsxs("div",{className:"main-content slide-in-from-bottom",children:[f.jsxs("div",{className:"top-bar slide-in-from-top",style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[f.jsx("h1",{className:"dashboard-welcome",style:{fontFamily:"Bevan, serif",fontWeight:400},children:"Lessons"}),f.jsxs("button",{className:"create-classroom-btn",onClick:()=>p(!0),children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",width:"20",height:"20",style:{minWidth:20},children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),"Create Lesson"]})]}),f.jsxs("div",{className:"session-view-content",style:{background:"white",borderRadius:18,boxShadow:"0 4px 24px rgba(65, 105, 225, 0.08)",padding:32,display:"flex",gap:32},children:[f.jsxs("div",{style:{minWidth:280,maxWidth:320,borderRight:"2px solid #e0e0e0",paddingRight:24},children:[f.jsxs("div",{style:{position:"relative",marginBottom:18},children:[f.jsx("span",{style:{position:"absolute",left:14,top:"50%",transform:"translateY(-50%)",pointerEvents:"none",zIndex:2,background:"transparent"},children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"#666",style:{width:20,height:20,background:"transparent",display:"block"},children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})})}),f.jsx("input",{type:"text",placeholder:"Search lessons...",value:n,onChange:ee=>r(ee.target.value),style:{width:"100%",padding:"10px 14px 10px 40px",borderRadius:8,border:"1.5px solid #e0e0e0",fontSize:16,outline:"none",transition:"border 0.2s"},onFocus:ee=>ee.target.style.borderColor="#4169e1",onBlur:ee=>ee.target.style.borderColor="#e0e0e0"})]}),H.length===0&&f.jsx("div",{style:{color:"#888",fontStyle:"italic",marginTop:24},children:"No lessons found."}),H.map(ee=>f.jsx($k,{lesson:ee,isActive:i===ee.id,onClick:()=>e(ee.id),onDelete:()=>{B(ee),E(!0)},canDelete:!b_.includes(ee.id)},ee.id))]}),f.jsx("div",{className:"slide-in-from-bottom",style:{flex:1,padding:24,background:"#f7f9fb",borderRadius:12,minHeight:220,position:"relative"},children:q?f.jsxs(f.Fragment,{children:[!b_.includes(q.id)&&f.jsxs("button",{onClick:()=>{B(q),E(!0)},title:"Delete lesson",style:{position:"absolute",right:30,top:27,display:"inline-flex",alignItems:"center",gap:6,padding:"6px 12px",background:"transparent",color:"#dc3545",border:"1px solid #dc3545",borderRadius:6,cursor:"pointer",fontSize:13,fontWeight:600,transition:"background 0.2s, border-color 0.2s, color 0.2s",zIndex:2},onMouseEnter:ee=>{ee.target.style.background="#dc3545",ee.target.style.color="#fff"},onMouseLeave:ee=>{ee.target.style.background="transparent",ee.target.style.color="#dc3545"},children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:16,height:16},children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})}),"Delete lesson"]}),f.jsx("h2",{className:"lesson-details-title",style:{color:"#4169e1",fontWeight:700,marginBottom:12},children:q.title}),f.jsxs("div",{style:{marginBottom:18,fontSize:16,color:"#444"},children:[f.jsx("strong",{children:"Overview:"})," ",q.overview]}),f.jsxs("div",{style:{marginBottom:18,fontSize:16,color:"#444"},children:[f.jsx("strong",{children:"Grade Levels:"})," ",q.age]}),f.jsx("a",{href:Wa(q.link)?q.link:void 0,target:"_blank",rel:"noopener noreferrer",style:{display:"inline-block",padding:"10px 28px",background:Wa(q.link)?"#4169e1":"#e0e0e0",color:Wa(q.link)?"#fff":"#b0b0b0",borderRadius:8,fontWeight:600,fontSize:16,textDecoration:"none",boxShadow:"0 2px 8px rgba(65, 105, 225, 0.10)",marginTop:8,transition:"background 0.2s",cursor:Wa(q.link)?"pointer":"not-allowed",pointerEvents:Wa(q.link)?"auto":"none"},tabIndex:Wa(q.link)?0:-1,"aria-disabled":!Wa(q.link),children:f.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:10},children:["View Lesson",f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:22,height:22,marginLeft:0,display:"inline-block"},children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"})})]})})]}):f.jsx("div",{style:{color:"#888",fontStyle:"italic",marginTop:24},children:"No lesson selected."})},i)]})]}),h&&f.jsx("div",{className:"modal-overlay",onClick:()=>p(!1),children:f.jsxs("div",{className:"modal-content",onClick:ee=>ee.stopPropagation(),style:{maxWidth:480,paddingTop:18},children:[f.jsxs("div",{className:"modal-header",style:{marginBottom:8},children:[f.jsx("h2",{children:"Create Lesson"}),f.jsx("button",{className:"modal-close",onClick:()=>p(!1),children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",width:"20",height:"20",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),f.jsxs("div",{className:"modal-body",children:[f.jsxs("div",{style:{marginBottom:18},children:[f.jsxs("label",{style:{fontWeight:600,color:"#4169e1",marginBottom:6,display:"block",fontFamily:"Space Mono, monospace"},children:["Lesson Name ",f.jsx("span",{style:{color:"red"},children:"*"})]}),f.jsx("input",{type:"text",value:g.title,onChange:ee=>y({...g,title:ee.target.value}),placeholder:"Enter lesson name",style:{width:"100%",padding:"10px 12px",borderRadius:8,border:"1.5px solid #e0e0e0",fontSize:16,marginBottom:8,fontFamily:"Space Mono, monospace"},required:!0})]}),f.jsxs("div",{style:{marginBottom:18},children:[f.jsx("label",{style:{fontWeight:600,color:"#4169e1",marginBottom:6,display:"block",fontFamily:"Space Mono, monospace"},children:"Overview"}),f.jsx("textarea",{value:g.overview,onChange:ee=>y({...g,overview:ee.target.value}),placeholder:"Enter lesson overview",style:{width:"100%",padding:"10px 12px",borderRadius:8,border:"1.5px solid #e0e0e0",fontSize:16,minHeight:60,resize:"vertical",fontFamily:"Space Mono, monospace"}})]}),f.jsxs("div",{style:{marginBottom:18},children:[f.jsx("label",{style:{fontWeight:600,color:"#4169e1",marginBottom:6,display:"block",fontFamily:"Space Mono, monospace"},children:"Grade Levels"}),f.jsx("input",{type:"text",value:g.age,onChange:ee=>y({...g,age:ee.target.value}),placeholder:"Enter grade levels",style:{width:"100%",padding:"10px 12px",borderRadius:8,border:"1.5px solid #e0e0e0",fontSize:16,fontFamily:"Space Mono, monospace"}})]}),f.jsxs("div",{style:{marginBottom:18},children:[f.jsx("label",{style:{fontWeight:600,color:"#4169e1",marginBottom:6,display:"block",fontFamily:"Space Mono, monospace"},children:"Lesson Link"}),f.jsx("input",{type:"text",value:g.link,onChange:ee=>y({...g,link:ee.target.value}),placeholder:"Enter lesson link",style:{width:"100%",padding:"10px 12px",borderRadius:8,border:"1.5px solid #e0e0e0",fontSize:16,fontFamily:"Space Mono, monospace"}})]})]}),f.jsxs("div",{className:"modal-footer",style:{display:"flex",gap:12,justifyContent:"flex-end"},children:[f.jsx("button",{className:"btn-secondary",onClick:()=>p(!1),children:"Cancel"}),f.jsx("button",{className:"btn-primary",style:{background:g.title.trim()?"#4169e1":"#e0e0e0",borderColor:g.title.trim()?"#4169e1":"#e0e0e0",color:g.title.trim()?"#fff":"#b0b0b0",cursor:g.title.trim()?"pointer":"not-allowed",fontFamily:"Space Mono, monospace"},onClick:z,disabled:!g.title.trim(),children:"Create"})]})]})}),w&&A&&f.jsx("div",{className:"modal-overlay",onClick:()=>E(!1),children:f.jsxs("div",{className:"modal-content",onClick:ee=>ee.stopPropagation(),style:{maxWidth:420},children:[f.jsx("div",{className:"modal-header",children:f.jsx("h2",{children:"Delete Lesson"})}),f.jsx("div",{className:"modal-body",children:f.jsxs("p",{children:["Are you sure you want to delete the lesson ",f.jsx("b",{children:A.title}),"? This action cannot be undone."]})}),f.jsxs("div",{className:"modal-footer",style:{display:"flex",gap:12,justifyContent:"flex-end"},children:[f.jsx("button",{className:"btn-secondary",onClick:()=>E(!1),children:"Cancel"}),f.jsx("button",{className:"btn-primary",style:{background:"#dc3545",borderColor:"#dc3545"},onClick:()=>ge(A.id),children:"Delete"})]})]})})]})]})}function $k({lesson:i,isActive:e,onClick:n,onDelete:r,canDelete:o}){const[c,h]=_c.useState(!1),p=i.title.length>14?i.title.slice(0,14)+"…":i.title;return f.jsxs("div",{style:{position:"relative",display:"flex",alignItems:"center"},onMouseEnter:()=>h(!0),onMouseLeave:()=>h(!1),children:[f.jsx("button",{onClick:n,className:e?"active":"",style:{width:"100%",textAlign:"left",padding:"16px 18px",marginBottom:8,border:"none",borderRadius:10,background:e?"#f0f4ff":"none",color:e?"#4169e1":"#222",fontWeight:700,fontSize:17,cursor:"pointer",transition:"background 0.2s, color 0.2s",outline:"none",boxShadow:e?"0 2px 8px rgba(65, 105, 225, 0.08)":"none",borderLeft:e?"4px solid #4169e1":"4px solid transparent",display:"block",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:p}),o&&c&&f.jsx("button",{onClick:r,title:"Delete lesson",style:{position:"absolute",right:30,top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",padding:0,margin:0,zIndex:2,color:"#4169e1",opacity:1,transition:"color 0.2s"},children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",style:{width:16,height:16},children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})})})]})}function Jk(){const i=ds(),e=I.useRef(i);return I.useEffect(()=>{const n=e.current.pathname.match(/^\/sessions\/[^/]+$/),r=i.pathname.match(/^\/sessions\/[^/]+$/);n&&!r&&window.location.reload(),e.current=i},[i]),f.jsxs(sS,{children:[f.jsx(mr,{path:"/",element:f.jsx(xk,{})}),f.jsx(mr,{path:"/login",element:f.jsx(Ek,{})}),f.jsx(mr,{path:"/signup",element:f.jsx(Sk,{})}),f.jsx(mr,{path:"/dashboard",element:f.jsx(Mk,{})}),f.jsx(mr,{path:"/sessions",element:f.jsx(Lk,{})}),f.jsx(mr,{path:"/sessions/:sessionId",element:f.jsx(Zk,{})}),f.jsx(mr,{path:"/classrooms",element:f.jsx(Kk,{})}),f.jsx(mr,{path:"/lessons",element:f.jsx(Qk,{})})]})}function eN(){return f.jsx(CS,{children:f.jsx("div",{className:"App",children:f.jsx(Jk,{})})})}hE.createRoot(document.getElementById("root")).render(f.jsx(_c.StrictMode,{children:f.jsx(eN,{})}));
